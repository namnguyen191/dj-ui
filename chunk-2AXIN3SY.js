import{a as N}from"./chunk-FI4W5XJG.js";import{a as G,b as P}from"./chunk-OWN4CUHW.js";import{a as F,d as H}from"./chunk-EWUWNZZG.js";import{$a as p,Aa as g,Ab as s,Ba as T,Bb as E,Bc as y,Fb as m,Ib as D,Jb as A,Kb as r,Lb as d,Mb as f,Nb as M,Ob as S,Pb as O,Qc as w,Sb as _,Sc as U,Yc as I,bc as c,ca as u,dc as L,lb as C,rb as l,zb as v}from"./chunk-J33AFEAQ.js";import{a as x}from"./chunk-VKRCUX5N.js";var z=(t,e)=>e.trackById;function b(t,e){if(t&1&&(r(0,"span"),c(1),d()),t&2){let n=_(2).ngIf;p(),L("No definition for layout with id ",n.id,"")}}function k(t,e){t&1&&O(0)}function $(t,e){if(t&1&&l(0,k,1,0,"ng-container",2),t&2){let n=_(4);s("ngComponentOutlet",n.layoutLoadingComponent)}}function B(t,e){if(t&1&&(r(0,"span"),c(1),d()),t&2){let n=_(3).ngIf;p(),L("Loading layout with id ",n.id,"...")}}function W(t,e){if(t&1&&l(0,$,1,1,"ng-container")(1,B,2,1,"span"),t&2){let n=_(3);m(n.layoutLoadingComponent?0:1)}}function X(t,e){if(t&1&&(r(0,"div",6),f(1,"dj-ui-element-wrapper",7),d()),t&2){let n,i,o,a=e.$implicit,h=_(7);E("--grid-item-columns",(n=a.elementInstance.positionAndSize==null?null:a.elementInstance.positionAndSize.cols)!==null&&n!==void 0?n:h.DEFAULT_UI_ELEMENT_COLS)("--grid-item-max-height",(i=a.elementInstance.positionAndSize==null?null:a.elementInstance.positionAndSize.maxHeight)!==null&&i!==void 0?i:h.DEFAULT_UI_ELEMENT_MAX_HEIGHT)("--grid-item-rows",(o=a.elementInstance.positionAndSize==null?null:a.elementInstance.positionAndSize.rows)!==null&&o!==void 0?o:h.DEFAULT_UI_ELEMENT_MAX_HEIGHT),s("id",a.elementInstance.id),p(),s("uiElementInstance",a.elementInstance)}}function q(t,e){if(t&1&&D(0,X,2,8,"div",5,z),t&2){let n=_();A(n)}}function V(t,e){t&1&&(r(0,"span"),c(1,"This layout is empty"),d())}function Y(t,e){t&1&&l(0,q,2,0)(1,V,2,0,"span"),t&2&&m(e.length>0?0:1)}function J(t,e){if(t&1&&(r(0,"div",4),l(1,Y,2,1),d()),t&2){let n,i=e.ngIf,o=_(4);E("--grid-columns",i.columns)("--grid-gap",i.gap)("--grid-row-height",i.rowHeight)("padding",i.padding),p(),m((n=o.gridItems())?1:-1,n)}}function K(t,e){if(t&1&&l(0,J,2,9,"div",3),t&2){let n=_(3);s("ngIf",n.layoutGridConfigs())}}function Q(t,e){if(t&1&&l(0,b,2,1,"span")(1,W,2,1)(2,K,1,1,"div",1),t&2){let n,i=_().ngIf;m((n=i.status)==="missing"?0:n==="loading"?1:n==="loaded"?2:-1)}}function Z(t,e){t&1&&(r(0,"span"),c(1,"Infinte loop in rendering layout detected"),d())}function tt(t,e){if(t&1&&(M(0),l(1,Q,3,1)(2,Z,2,0,"span"),S()),t&2){let n=_();p(),m(n.isInfinite()?2:1)}}var nt=16,it="1rem",et="0px",ot="0px",at={columns:nt,rowHeight:it,gap:et,padding:ot},j=(()=>{class t{constructor(){this.#t=u(N),this.#n=u(T),this.DEFAULT_UI_ELEMENT_COLS=4,this.DEFAULT_UI_ELEMENT_ROWS=20,this.DEFAULT_UI_ELEMENT_MAX_HEIGHT="auto",this.layoutId=g.required(),this.layoutConfig=F(()=>{let n=this.layoutId();return this.#t.getTemplate(n)}),this.gridItems=y(()=>{let n=this.layoutConfig();return!n||!n.config?null:n.config.uiElementInstances.map(i=>({id:i.id,elementInstance:i,trackById:`LAYOUT: ${n.id} - ELEMENT: ${i.id}`}))}),this.isInfinite=y(()=>{let n=this.layoutId(),i=this.#n.nativeElement,o=G({ele:i,attrName:"layoutId",attrValue:n});return o&&console.error(`Layout with id ${n} has already existed in parents`),o}),this.layoutGridConfigs=y(()=>{let n=this.layoutConfig();if(n?.status!=="loaded")return null;let i=n.config.gridConfigs??{};return x(x({},at),i)}),this.layoutLoadingComponent=u(H,{optional:!0})?.layoutLoadingComponent}#t;#n;static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=C({type:t,selectors:[["dj-ui-layout"]],hostVars:1,hostBindings:function(i,o){i&2&&v("layoutId",o.layoutId())},inputs:{layoutId:[1,"layoutId"]},decls:1,vars:1,consts:[[4,"ngIf"],[1,"grid",3,"--grid-columns","--grid-gap","--grid-row-height","padding"],[4,"ngComponentOutlet"],["class","grid",3,"--grid-columns","--grid-gap","--grid-row-height","padding",4,"ngIf"],[1,"grid"],[1,"grid-item",3,"id","--grid-item-columns","--grid-item-max-height","--grid-item-rows"],[1,"grid-item",3,"id"],[3,"uiElementInstance"]],template:function(i,o){i&1&&l(0,tt,3,1,"ng-container",0),i&2&&s("ngIf",o.layoutConfig())},dependencies:[I,w,U,P],styles:["[_nghost-%COMP%]{display:block;width:100%}[_nghost-%COMP%]   .grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(var(--grid-columns),1fr);grid-auto-rows:var(--grid-row-height);gap:var(--grid-gap)}[_nghost-%COMP%]   .grid[_ngcontent-%COMP%]   .grid-item[_ngcontent-%COMP%]{max-height:var(--grid-item-max-height);grid-column-start:span var(--grid-item-columns);grid-row-start:span var(--grid-item-rows)}"],changeDetection:0})}}return t})();function lt(t,e){t&1&&f(0,"dj-ui-layout",0),t&2&&s("layoutId",e)}function _t(t,e){t&1&&(r(0,"span"),c(1,"Waiting for layout id..."),d())}var vt=(()=>{class t{constructor(){this.layoutId=g.required()}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=C({type:t,selectors:[["djui"]],inputs:{layoutId:[1,"layoutId"]},decls:2,vars:1,consts:[[3,"layoutId"]],template:function(i,o){if(i&1&&l(0,lt,1,1,"dj-ui-layout",0)(1,_t,2,0,"span"),i&2){let a;m((a=o.layoutId())?0:1,a)}},dependencies:[I,j],styles:["[_nghost-%COMP%]{display:block;width:100%}"],changeDetection:0})}}return t})();export{vt as a};
