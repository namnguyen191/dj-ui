import{$ as Xo,$a as OC,$b as Ol,$c as KC,$d as Rr,$e as Ta,$f as _s,$g as jF,$h as sL,$i as dp,$j as Yf,$k as Oa,A as b,Aa as hd,Ab as cf,Ac as kk,Ad as Wt,Ae as e0,Af as dF,Ag as Bi,Ah as Ad,Ai as vr,Aj as zL,Ak as lN,B as pe,Ba as lf,Bb as gk,Bc as at,Bd as Zt,Be as Gk,Bf as uF,Bg as Nf,Bh as ke,Bi as DL,Bj as VL,Bk as cN,C as re,Ca as QP,Cb as df,Cc as Rl,Cd as mr,Ce as bf,Cf as r0,Cg as NF,Ch as gi,Ci as La,Cj as R6,Ck as dN,D as Da,Da as We,Db as zC,Dc as Or,Dd as er,De as Jk,Df as hF,Dg as qe,Dh as h0,Di as CL,Dj as UL,Dk as i_,E as po,Ea as Ci,Eb as Tt,Ec as Z,Ed as bd,Ee as Xk,Ef as pF,Eg as MF,Eh as p0,Ei as cp,Ej as Ao,Ek as uN,F as UP,Fa as Y,Fb as fk,Fc as Bl,Fd as ff,Fe as $h,Ff as mF,Fg as S6,Fh as m0,Fi as ct,Fj as Fd,Fk as Vr,G as Ca,Ga as pt,Gb as p6,Gc as te,Gd as Bt,Ge as zl,Gf as gF,Gg as OF,Gh as ap,Gi as ws,Gj as hp,Gk as o_,H as ef,Ha as T,Hb as VC,Hc as Fk,Hd as j,He as t0,Hf as wf,Hg as bs,Hh as Td,Hi as xL,Hj as qL,Hk as r_,I as Mh,Ia as ge,Ib as m6,Ic as eo,Id as GC,Ie as Df,If as fF,Ig as RF,Ih as Pt,Ii as br,Ij as To,Ik as An,J as qP,Ja as me,Jb as Vh,Jc as Mi,Jd as So,Je as tr,Jf as n0,Jg as Mf,Jh as ZF,Ji as Es,Jj as Ld,Jk as Tn,K as cd,Ka as ui,Kb as _k,Kc as Lk,Kd as wo,Ke as Br,Kf as _F,Kg as Of,Kh as Id,Ki as SL,Kj as D0,Kk as hN,L as KP,La as be,Lb as yk,Lc as wa,Ld as de,Le as Gh,Lf as yF,Lg as xd,Lh as eL,Li as As,Lj as C0,Lk as B6,M as Zi,Ma as xi,Mb as g6,Mc as ze,Md as M,Me as Re,Mf as vF,Mg as op,Mh as L6,Mi as g0,Mj as KL,Mk as n_,N as Oo,Na as Do,Nb as mt,Nc as Nk,Nd as JC,Ne as Dn,Nf as bF,Ng as rp,Nh as tL,Ni as wL,Nj as $L,Nk as pN,O as Oh,Oa as Bh,Ob as pn,Oc as gf,Od as Hk,Oe as Yk,Of as DF,Og as BF,Oh as N6,Oi as EL,Oj as Xf,Ok as W6,P as tf,Pa as un,Pb as Yo,Pc as vd,Pd as le,Pe as J,Pf as CF,Pg as Rf,Ph as li,Pi as f0,Pj as Nd,Pk as Rd,Q as $P,Qa as ZP,Qb as xa,Qc as ce,Qd as xe,Qe as Ge,Qf as xF,Qg as Ds,Qh as Hr,Qi as AL,Qj as Md,Qk as s_,R as GP,Ra as Wh,Rb as hs,Rc as zi,Rd as _f,Re as Qk,Rf as SF,Rg as Kl,Rh as jf,Ri as TL,Rj as GL,Rk as In,S as of,Sa as Nr,Sb as Uh,Sc as Je,Sd as Kh,Se as Zk,Sf as wF,Sg as Bf,Sh as lp,Si as _0,Sj as Is,Sk as mN,T as rf,Ta as Hh,Tb as mn,Tc as tt,Td as _6,Te as eF,Tf as Ef,Tg as Wf,Th as iL,Ti as IL,Tj as zr,Tk as Xl,U as dn,Ua as ek,Ub as ut,Uc as Vi,Ud as jk,Ue as tF,Uf as Cd,Ug as A,Uh as Cs,Ui as y0,Uj as pp,Uk as P0,V as nf,Va as tk,Vb as yd,Vc as Ot,Vd as y6,Ve as D6,Vf as s0,Vg as it,Vh as oL,Vi as Kf,Vj as ki,Vk as a_,W as Rh,Wa as ik,Wb as mo,Wc as hr,Wd as yf,We as Dd,Wf as ep,Wg as Sd,Wh as ka,Wi as PL,Wj as x0,Wk as l_,X as Fe,Xa as pd,Xb as vk,Xc as Si,Xd as zk,Xe as C6,Xf as a0,Xg as np,Xh as _r,Xi as Gl,Xj as mp,Xk as gN,Y as $e,Ya as ok,Yb as Xe,Yc as fn,Yd as Oe,Ye as iF,Yf as EF,Yg as WF,Yh as zf,Yi as kL,Yj as En,Yk as k0,Z as Ro,Za as jh,Zb as Qt,Zc as _n,Zd as ei,Ze as oF,Zf as AF,Zg as HF,Zh as rL,Zi as $f,Zj as JL,Zk as fN,_ as dd,_a as rk,_b as bk,_c as ps,_d as pi,_e as rF,_f as Af,_g as w6,_h as nL,_i as Na,_j as qi,_k as _N,a as Yi,aa as ud,ab as md,ac as uf,ad as Mk,ae as Ui,af as Cf,ag as Tf,ah as wd,ai as aL,aj as FL,ak as XL,b as kl,ba as Ze,bb as RC,bc as Dk,bd as Wl,be as gs,bf as xf,bg as wn,bh as E6,bi as Pi,bj as up,bk as YL,c as BP,ca as sf,cb as Jt,cc as Mr,cd as je,ce as si,cf as ai,cg as tp,ch as zF,ci as lL,cj as Gf,ck as QL,d as PC,da as JP,db as nk,dc as Co,dd as to,de as XC,df as Wr,dg as Ul,dh as A6,di as Vf,dj as LL,dk as ZL,e as Qi,ea as af,eb as h6,ec as Ne,ed as ht,ee as Hl,ef as nF,eg as ip,eh as VF,ei as cL,ej as v0,ek as eN,f as WP,fa as Vt,fb as gd,fc as Qo,fd as Ue,fe as YC,ff as i0,fg as ql,fh as T6,fi as dL,fj as wi,fk as tN,g as zt,ga as LC,gb as BC,gc as Ck,gd as Rt,ge as vf,gf as Ia,gg as Ri,gh as UF,gi as uL,gj as NL,gk as iN,h as Xg,ha as Ve,hb as sk,hc as xk,hd as W,he as Vk,hf as Jh,hg as If,hh as I6,hi as hL,hj as b0,hk as S0,i as Yg,ia as H,ib as fd,ic as hf,id as Ok,ie as Ye,if as o0,ig as ys,ih as qF,ii as pL,ij as oo,ik as Ps,j as Fl,ja as B,jb as us,jc as UC,jd as Ee,je as Ii,jf as Cn,jg as l0,jh as P6,ji as mL,jj as ML,jk as w0,k as Ll,ka as Ut,kb as ak,kc as Sk,kd as ve,ke as Uk,kf as ue,kg as Pf,kh as KF,ki as gL,kj as Jl,kk as oN,l as HP,la as XP,lb as lk,lc as gn,ld as Me,le as jl,lf as go,lg as TF,lh as k6,li as $l,lj as OL,lk as gp,m as jP,ma as X,mb as Ml,mc as st,md as Rk,me as QC,mf as Sf,mg as IF,mh as $F,mi as xs,mj as Ei,mk as E0,n as bt,na as qt,nb as ck,nc as wk,nd as f6,ne as gr,nf as ne,ng as x6,nh as d0,ni as Uf,nj as Ma,nk as rN,o as Qg,oa as Lr,ob as zh,oc as Ek,od as Oi,oe as vn,of as Xh,og as PF,oh as Hf,oi as qf,oj as RL,ok as Qf,p as Zg,pa as ft,pb as Kt,pc as $t,pd as ms,pe as qk,pf as fr,pg as kf,ph as GF,pi as fL,pj as BL,pk as A0,q as kC,qa as fe,qb as _d,qc as xo,qd as Zo,qe as Ea,qf as xn,qg as vs,qh as fo,qi as Ss,qj as O6,qk as T0,r as Nl,ra as NC,rb as WC,rc as Sa,rd as $C,re as Aa,rf as Yh,rg as kF,rh as JF,ri as _L,rj as Lt,rk as I0,s as ad,sa as nt,sb as dk,sc as Ak,sd as Bk,se as v6,sf as Sn,sg as Ff,sh as Ed,si as M6,sj as WL,sk as nN,t as He,ta as we,tb as HC,tc as Tk,td as Q,te as Eo,tf as Vl,tg as Lf,th as XF,ti as Gt,tj as HL,tk as sN,u as ba,ua as _t,ub as jC,uc as pf,ud as pr,ue as ZC,uf as Qh,ug as c0,uh as YF,ui as Fa,uj as kd,uk as Zf,v as zP,va as MC,vb as hn,vc as Ik,vd as io,ve as fs,vf as sF,vg as FF,vh as sp,vi as Pd,vj as jr,vk as e_,w as Di,wa as yt,wb as uk,wc as qh,wd as Wk,we as Kk,wf as aF,wg as LF,wh as ir,wi as yr,wj as ci,wk as Od,x as VP,xa as St,xb as hk,xc as mf,xd as yn,xe as bn,xf as lF,xg as mi,xh as QF,xi as yL,xj as Ts,xk as kt,y as ld,ya as ds,yb as pk,yc as Pk,yd as hi,ye as $k,yf as cF,yg as It,yh as F6,yi as vL,yj as Jf,yk as t_,z as FC,za as YP,zb as mk,zc as qC,zd as et,ze as b6,zf as Zh,zg as Pa,zh as u0,zi as bL,zj as jL,zk as aN}from"./chunk-XSHXIKD3.js";import{a as RP}from"./chunk-O2IUUI6A.js";import{a as U,b as he,c as AC,d as Jg,e as TC,f as OP,g as IC}from"./chunk-VKRCUX5N.js";var Pz,zw,Xa,wu,fm,_m,js,Vw,Eu=Jg(()=>{"use strict";bt();yt();Ze();Oh();Ea();pt();ge();Hr();Je();gs();hr();X();Ge();Pz=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},zw=function(i,e){return function(t,o){e(t,o,i)}},Xa=class{remove(){var e;(e=this.parent)===null||e===void 0||e.children.delete(this.id)}static findId(e,t){let o;typeof e=="string"?o=`${t.id}/${e}`:(o=`${t.id}/${e.name}`,t.children.get(o)!==void 0&&(o=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let r=o;for(let n=0;t.children.get(r)!==void 0;n++)r=`${o}_${n}`;return r}static empty(e){return e.children.size===0}},wu=class extends Xa{constructor(e,t,o){super(),this.id=e,this.parent=t,this.symbol=o,this.children=new Map}},fm=class extends Xa{constructor(e,t,o,r){super(),this.id=e,this.parent=t,this.label=o,this.order=r,this.children=new Map}},_m=class i extends Xa{static create(e,t,o){let r=new _t(o),n=new i(t.uri),s=e.ordered(t),a=s.map((h,p)=>{var g;let f=Xa.findId(`provider_${p}`,n),_=new fm(f,n,(g=h.displayName)!==null&&g!==void 0?g:"Unknown Outline Provider",p);return Promise.resolve(h.provideDocumentSymbols(t,r.token)).then(y=>{for(let C of y||[])i._makeOutlineElement(C,_);return _},y=>($e(y),_)).then(y=>{Xa.empty(y)?y.remove():n._groups.set(f,y)})}),c=e.onDidChange(()=>{let h=e.ordered(t);Yi(h,s)||r.cancel()});return Promise.all(a).then(()=>r.token.isCancellationRequested&&!o.isCancellationRequested?i.create(e,t,o):n._compact()).finally(()=>{r.dispose(),c.dispose(),r.dispose()})}static _makeOutlineElement(e,t){let o=Xa.findId(e,t),r=new wu(o,t,e);if(e.children)for(let n of e.children)i._makeOutlineElement(n,r);t.children.set(r.id,r)}constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}_compact(){let e=0;for(let[t,o]of this._groups)o.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{let t=Oo.first(this._groups.values());for(let[,o]of t.children)o.parent=this,this.children.set(o.id,o)}return this}getTopLevelSymbols(){let e=[];for(let t of this.children.values())t instanceof wu?e.push(t.symbol):e.push(...Oo.map(t.children.values(),o=>o.symbol));return e.sort((t,o)=>T.compareRangesUsingStarts(t.range,o.range))}asListOfDocumentSymbols(){let e=this.getTopLevelSymbols(),t=[];return i._flattenDocumentSymbols(t,e,""),t.sort((o,r)=>Y.compare(T.getStartPosition(o.range),T.getStartPosition(r.range))||Y.compare(T.getEndPosition(r.range),T.getEndPosition(o.range)))}static _flattenDocumentSymbols(e,t,o){for(let r of t)e.push({kind:r.kind,tags:r.tags,name:r.name,detail:r.detail,containerName:r.containerName||o,range:r.range,selectionRange:r.selectionRange,children:void 0}),r.children&&i._flattenDocumentSymbols(e,r.children,r.name)}},js=zi("IOutlineModelService"),Vw=class{constructor(e,t,o){this._languageFeaturesService=e,this._disposables=new H,this._cache=new vn(10,.7),this._debounceInformation=t.for(e.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(o.onModelRemoved(r=>{this._cache.delete(r.id)}))}dispose(){this._disposables.dispose()}async getOrCreate(e,t){let o=this._languageFeaturesService.documentSymbolProvider,r=o.ordered(e),n=this._cache.get(e.id);if(!n||n.versionId!==e.getVersionId()||!Yi(n.provider,r)){let a=new _t;n={versionId:e.getVersionId(),provider:r,promiseCnt:0,source:a,promise:_m.create(o,e,a.token),model:void 0},this._cache.set(e.id,n);let c=Date.now();n.promise.then(h=>{n.model=h,this._debounceInformation.update(e,Date.now()-c)}).catch(h=>{this._cache.delete(e.id)})}if(n.model)return n.model;n.promiseCnt+=1;let s=t.onCancellationRequested(()=>{--n.promiseCnt===0&&(n.source.cancel(),this._cache.delete(e.id))});try{return await n.promise}finally{s.dispose()}}};Vw=Pz([zw(0,J),zw(1,li),zw(2,Ot)],Vw);Ui(js,Vw,1)});var _b,pO=Jg(()=>{"use strict";ui();_b=class{constructor(e,t,o){this._editRange=e,this._originalSelection=t,this._text=o}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){let r=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new me(r.endLineNumber,Math.min(this._originalSelection.positionColumn,r.endColumn),r.endLineNumber,Math.min(this._originalSelection.positionColumn,r.endColumn)):new me(r.endLineNumber,r.endColumn-this._text.length,r.endLineNumber,r.endColumn)}}});var mO=Jg(()=>{});var gO=TC(zm=>{"use strict";Xe();Ze();Xl();xe();ge();ui();it();gi();pp();re();pO();mO();var W5=zm&&zm.__decorate||function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},H5=zm&&zm.__param||function(i,e){return function(t,o){e(t,o,i)}},yb,ol=yb=class{static get(e){return e.getContribution(yb.ID)}constructor(e,t){this.editor=e,this.editorWorkerService=t,this.decorations=this.editor.createDecorationsCollection()}dispose(){}run(e,t){var o;(o=this.currentRequest)===null||o===void 0||o.cancel();let r=this.editor.getSelection(),n=this.editor.getModel();if(!n||!r)return;let s=r;if(s.startLineNumber!==s.endLineNumber)return;let a=new s_(this.editor,5),c=n.uri;return this.editorWorkerService.canNavigateValueSet(c)?(this.currentRequest=mt(h=>this.editorWorkerService.navigateValueSet(c,s,t)),this.currentRequest.then(h=>{var p;if(!h||!h.range||!h.value||!a.validate(this.editor))return;let g=T.lift(h.range),f=h.range,_=h.value.length-(s.endColumn-s.startColumn);f={startLineNumber:f.startLineNumber,startColumn:f.startColumn,endLineNumber:f.endLineNumber,endColumn:f.startColumn+h.value.length},_>1&&(s=new me(s.startLineNumber,s.startColumn,s.endLineNumber,s.endColumn+_-1));let y=new _b(g,s,h.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,y),this.editor.pushUndoStop(),this.decorations.set([{range:f,options:yb.DECORATION}]),(p=this.decorationRemover)===null||p===void 0||p.cancel(),this.decorationRemover=xa(350),this.decorationRemover.then(()=>this.decorations.clear()).catch(Fe)}).catch(Fe)):Promise.resolve(void 0)}};ol.ID="editor.contrib.inPlaceReplaceController";ol.DECORATION=ke.register({description:"in-place-replace",className:"valueSetReplacement"});ol=yb=W5([H5(1,zr)],ol);var zE=class extends j{constructor(){super({id:"editor.action.inPlaceReplace.up",label:b("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:3159,weight:100}})}run(e,t){let o=ol.get(t);return o?o.run(this.id,!1):Promise.resolve(void 0)}},VE=class extends j{constructor(){super({id:"editor.action.inPlaceReplace.down",label:b("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:3161,weight:100}})}run(e,t){let o=ol.get(t);return o?o.run(this.id,!0):Promise.resolve(void 0)}};le(ol.ID,ol,4);M(zE);M(VE)});var tR=TC(hg=>{"use strict";bt();Ao();W6();B6();Ge();Eu();X();nt();var J9=hg&&hg.__decorate||function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},eR=hg&&hg.__param||function(i,e){return function(t,o){e(t,o,i)}},dT=class extends B{constructor(e,t,o){super(),this._textModel=e,this._languageFeaturesService=t,this._outlineModelService=o,this._currentModel=oo(this,void 0);let r=Ts("documentSymbolProvider.onDidChange",this._languageFeaturesService.documentSymbolProvider.onDidChange),n=Ts("_textModel.onDidChangeContent",ft.debounce(s=>this._textModel.onDidChangeContent(s),()=>{},100));this._register(kd(async(s,a)=>{r.read(s),n.read(s);let c=a.add(new hN),h=await this._outlineModelService.getOrCreate(this._textModel,c.token);a.isDisposed||this._currentModel.set(h,void 0)}))}getBreadcrumbItems(e,t){let o=this._currentModel.read(t);if(!o)return[];let r=o.asListOfDocumentSymbols().filter(n=>e.contains(n.range.startLineNumber)&&!e.contains(n.range.endLineNumber));return r.sort(HP(Fl(n=>n.range.endLineNumber-n.range.startLineNumber,Ll))),r.map(n=>({name:n.name,kind:n.kind,startLineNumber:n.range.startLineNumber}))}};dT=J9([eR(1,J),eR(2,js)],dT);pN.setBreadcrumbsSourceFactory((i,e)=>e.createInstance(dT,i))});var oR=Jg(()=>{});var nR=TC(pg=>{"use strict";oR();ze();Dn();X();xe();Jt();C6();D6();Rr();uN();Gl();var Y9=pg&&pg.__decorate||function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},rR=pg&&pg.__param||function(i,e){return function(t,o){e(t,o,i)}},uT,Yu=uT=class extends B{static get(e){return e.getContribution(uT.ID)}constructor(e,t,o){super(),this._editor=e,this._languageService=o,this._widget=null,this._register(this._editor.onDidChangeModel(r=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(r=>this.stop())),this._register(md.onDidChange(r=>this.stop())),this._register(this._editor.onKeyUp(r=>r.keyCode===9&&this.stop()))}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new e7(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}};Yu.ID="editor.contrib.inspectTokens";Yu=uT=Y9([rR(1,i_),rR(2,pi)],Yu);var hT=class extends j{constructor(){super({id:"editor.action.inspectTokens",label:TL.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(e,t){let o=Yu.get(t);o?.launch()}};function Q9(i){let e="";for(let t=0,o=i.length;t<o;t++){let r=i.charCodeAt(t);switch(r){case 9:e+="\u2192";break;case 32:e+="\xB7";break;default:e+=String.fromCharCode(r)}}return e}function Z9(i,e){let t=md.get(e);if(t)return t;let o=i.encodeLanguageId(e);return{getInitialState:()=>Zk,tokenize:(r,n,s)=>eF(e,s),tokenizeEncoded:(r,n,s)=>tF(o,s)}}var e7=(()=>{class i extends B{constructor(t,o){super(),this.allowEditorOverflow=!0,this._editor=t,this._languageService=o,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=Z9(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(r=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return i._ID}_compute(t){let o=this._getTokensAtLine(t.lineNumber),r=0;for(let h=o.tokens1.length-1;h>=0;h--){let p=o.tokens1[h];if(t.column-1>=p.offset){r=h;break}}let n=0;for(let h=o.tokens2.length>>>1;h>=0;h--)if(t.column-1>=o.tokens2[h<<1]){n=h;break}let s=this._model.getLineContent(t.lineNumber),a="";if(r<o.tokens1.length){let h=o.tokens1[r].offset,p=r+1<o.tokens1.length?o.tokens1[r+1].offset:s.length;a=s.substring(h,p)}Bl(this._domNode,te("h2.tm-token",void 0,Q9(a),te("span.tm-token-length",void 0,`${a.length} ${a.length===1?"char":"chars"}`))),Z(this._domNode,te("hr.tokens-inspect-separator",{style:"clear:both"}));let c=(n<<1)+1<o.tokens2.length?this._decodeMetadata(o.tokens2[(n<<1)+1]):null;Z(this._domNode,te("table.tm-metadata-table",void 0,te("tbody",void 0,te("tr",void 0,te("td.tm-metadata-key",void 0,"language"),te("td.tm-metadata-value",void 0,`${c?c.languageId:"-?-"}`)),te("tr",void 0,te("td.tm-metadata-key",void 0,"token type"),te("td.tm-metadata-value",void 0,`${c?this._tokenTypeToString(c.tokenType):"-?-"}`)),te("tr",void 0,te("td.tm-metadata-key",void 0,"font style"),te("td.tm-metadata-value",void 0,`${c?this._fontStyleToString(c.fontStyle):"-?-"}`)),te("tr",void 0,te("td.tm-metadata-key",void 0,"foreground"),te("td.tm-metadata-value",void 0,`${c?Re.Format.CSS.formatHex(c.foreground):"-?-"}`)),te("tr",void 0,te("td.tm-metadata-key",void 0,"background"),te("td.tm-metadata-value",void 0,`${c?Re.Format.CSS.formatHex(c.background):"-?-"}`))))),Z(this._domNode,te("hr.tokens-inspect-separator")),r<o.tokens1.length&&Z(this._domNode,te("span.tm-token-type",void 0,o.tokens1[r].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(t){let o=md.getColorMap(),r=Dd.getLanguageId(t),n=Dd.getTokenType(t),s=Dd.getFontStyle(t),a=Dd.getForeground(t),c=Dd.getBackground(t);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(r),tokenType:n,fontStyle:s,foreground:o[a],background:o[c]}}_tokenTypeToString(t){switch(t){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_fontStyleToString(t){let o="";return t&1&&(o+="italic "),t&2&&(o+="bold "),t&4&&(o+="underline "),t&8&&(o+="strikethrough "),o.length===0&&(o="---"),o}_getTokensAtLine(t){let o=this._getStateBeforeLine(t),r=this._tokenizationSupport.tokenize(this._model.getLineContent(t),!0,o),n=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(t),!0,o);return{startState:o,tokens1:r.tokens,tokens2:n.tokens,endState:r.endState}}_getStateBeforeLine(t){let o=this._tokenizationSupport.getInitialState();for(let r=1;r<t;r++)o=this._tokenizationSupport.tokenize(this._model.getLineContent(r),!0,o).endState;return o}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}}return i._ID="editor.contrib.inspectTokensWidget",i})();le(Yu.ID,Yu,4);M(hT)});var iZ={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M2 26H30V28H2zM25.4 9c.8-.8.8-2 0-2.8 0 0 0 0 0 0l-3.6-3.6c-.8-.8-2-.8-2.8 0 0 0 0 0 0 0l-15 15V24h6.4L25.4 9zM20.4 4L24 7.6l-3 3L17.4 7 20.4 4zM6 22v-3.6l10-10 3.6 3.6-10 10H6z"}}],name:"edit",size:16};var xN=Symbol.for("immer-nothing"),yN=Symbol.for("immer-draftable"),or=Symbol.for("immer-state");function Ur(i,...e){throw new Error(`[Immer] minified error nr: ${i}. Full error at: https://bit.ly/3cXEKWf`)}var Bd=Object.getPrototypeOf;function Wd(i){return!!i&&!!i[or]}function Ql(i){return i?SN(i)||Array.isArray(i)||!!i[yN]||!!i.constructor?.[yN]||p_(i)||m_(i):!1}var H6=Object.prototype.constructor.toString();function SN(i){if(!i||typeof i!="object")return!1;let e=Bd(i);if(e===null)return!0;let t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===H6}function c_(i,e){h_(i)===0?Reflect.ownKeys(i).forEach(t=>{e(t,i[t],i)}):i.forEach((t,o)=>e(o,t,i))}function h_(i){let e=i[or];return e?e.type_:Array.isArray(i)?1:p_(i)?2:m_(i)?3:0}function N0(i,e){return h_(i)===2?i.has(e):Object.prototype.hasOwnProperty.call(i,e)}function wN(i,e,t){let o=h_(i);o===2?i.set(e,t):o===3?i.add(t):i[e]=t}function j6(i,e){return i===e?i!==0||1/i===1/e:i!==i&&e!==e}function p_(i){return i instanceof Map}function m_(i){return i instanceof Set}function Yl(i){return i.copy_||i.base_}function M0(i,e){if(p_(i))return new Map(i);if(m_(i))return new Set(i);if(Array.isArray(i))return Array.prototype.slice.call(i);let t=SN(i);if(e===!0||e==="class_only"&&!t){let o=Object.getOwnPropertyDescriptors(i);delete o[or];let r=Reflect.ownKeys(o);for(let n=0;n<r.length;n++){let s=r[n],a=o[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(o[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:i[s]})}return Object.create(Bd(i),o)}else{let o=Bd(i);if(o!==null&&t)return U({},i);let r=Object.create(o);return Object.assign(r,i)}}function H0(i,e=!1){return g_(i)||Wd(i)||!Ql(i)||(h_(i)>1&&(i.set=i.add=i.clear=i.delete=z6),Object.freeze(i),e&&Object.entries(i).forEach(([t,o])=>H0(o,!0))),i}function z6(){Ur(2)}function g_(i){return Object.isFrozen(i)}var V6={};function Zl(i){let e=V6[i];return e||Ur(0,i),e}var fp;function EN(){return fp}function U6(i,e){return{drafts_:[],parent_:i,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function vN(i,e){e&&(Zl("Patches"),i.patches_=[],i.inversePatches_=[],i.patchListener_=e)}function O0(i){R0(i),i.drafts_.forEach(q6),i.drafts_=null}function R0(i){i===fp&&(fp=i.parent_)}function bN(i){return fp=U6(fp,i)}function q6(i){let e=i[or];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function DN(i,e){e.unfinalizedDrafts_=e.drafts_.length;let t=e.drafts_[0];return i!==void 0&&i!==t?(t[or].modified_&&(O0(e),Ur(4)),Ql(i)&&(i=d_(e,i),e.parent_||u_(e,i)),e.patches_&&Zl("Patches").generateReplacementPatches_(t[or].base_,i,e.patches_,e.inversePatches_)):i=d_(e,t,[]),O0(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),i!==xN?i:void 0}function d_(i,e,t){if(g_(e))return e;let o=e[or];if(!o)return c_(e,(r,n)=>CN(i,o,e,r,n,t)),e;if(o.scope_!==i)return e;if(!o.modified_)return u_(i,o.base_,!0),o.base_;if(!o.finalized_){o.finalized_=!0,o.scope_.unfinalizedDrafts_--;let r=o.copy_,n=r,s=!1;o.type_===3&&(n=new Set(r),r.clear(),s=!0),c_(n,(a,c)=>CN(i,o,r,a,c,t,s)),u_(i,r,!1),t&&i.patches_&&Zl("Patches").generatePatches_(o,t,i.patches_,i.inversePatches_)}return o.copy_}function CN(i,e,t,o,r,n,s){if(Wd(r)){let a=n&&e&&e.type_!==3&&!N0(e.assigned_,o)?n.concat(o):void 0,c=d_(i,r,a);if(wN(t,o,c),Wd(c))i.canAutoFreeze_=!1;else return}else s&&t.add(r);if(Ql(r)&&!g_(r)){if(!i.immer_.autoFreeze_&&i.unfinalizedDrafts_<1)return;d_(i,r),(!e||!e.scope_.parent_)&&typeof o!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,o)&&u_(i,r)}}function u_(i,e,t=!1){!i.parent_&&i.immer_.autoFreeze_&&i.canAutoFreeze_&&H0(e,t)}function K6(i,e){let t=Array.isArray(i),o={type_:t?1:0,scope_:e?e.scope_:EN(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:i,draft_:null,copy_:null,revoke_:null,isManual_:!1},r=o,n=j0;t&&(r=[o],n=_p);let{revoke:s,proxy:a}=Proxy.revocable(r,n);return o.draft_=a,o.revoke_=s,a}var j0={get(i,e){if(e===or)return i;let t=Yl(i);if(!N0(t,e))return $6(i,t,e);let o=t[e];return i.finalized_||!Ql(o)?o:o===F0(i.base_,e)?(L0(i),i.copy_[e]=W0(o,i)):o},has(i,e){return e in Yl(i)},ownKeys(i){return Reflect.ownKeys(Yl(i))},set(i,e,t){let o=AN(Yl(i),e);if(o?.set)return o.set.call(i.draft_,t),!0;if(!i.modified_){let r=F0(Yl(i),e),n=r?.[or];if(n&&n.base_===t)return i.copy_[e]=t,i.assigned_[e]=!1,!0;if(j6(t,r)&&(t!==void 0||N0(i.base_,e)))return!0;L0(i),B0(i)}return i.copy_[e]===t&&(t!==void 0||e in i.copy_)||Number.isNaN(t)&&Number.isNaN(i.copy_[e])||(i.copy_[e]=t,i.assigned_[e]=!0),!0},deleteProperty(i,e){return F0(i.base_,e)!==void 0||e in i.base_?(i.assigned_[e]=!1,L0(i),B0(i)):delete i.assigned_[e],i.copy_&&delete i.copy_[e],!0},getOwnPropertyDescriptor(i,e){let t=Yl(i),o=Reflect.getOwnPropertyDescriptor(t,e);return o&&{writable:!0,configurable:i.type_!==1||e!=="length",enumerable:o.enumerable,value:t[e]}},defineProperty(){Ur(11)},getPrototypeOf(i){return Bd(i.base_)},setPrototypeOf(){Ur(12)}},_p={};c_(j0,(i,e)=>{_p[i]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});_p.deleteProperty=function(i,e){return _p.set.call(this,i,e,void 0)};_p.set=function(i,e,t){return j0.set.call(this,i[0],e,t,i[0])};function F0(i,e){let t=i[or];return(t?Yl(t):i)[e]}function $6(i,e,t){let o=AN(e,t);return o?"value"in o?o.value:o.get?.call(i.draft_):void 0}function AN(i,e){if(!(e in i))return;let t=Bd(i);for(;t;){let o=Object.getOwnPropertyDescriptor(t,e);if(o)return o;t=Bd(t)}}function B0(i){i.modified_||(i.modified_=!0,i.parent_&&B0(i.parent_))}function L0(i){i.copy_||(i.copy_=M0(i.base_,i.scope_.immer_.useStrictShallowCopy_))}var G6=class{constructor(i){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,o)=>{if(typeof e=="function"&&typeof t!="function"){let n=t;t=e;let s=this;return function(c=n,...h){return s.produce(c,p=>t.call(this,p,...h))}}typeof t!="function"&&Ur(6),o!==void 0&&typeof o!="function"&&Ur(7);let r;if(Ql(e)){let n=bN(this),s=W0(e,void 0),a=!0;try{r=t(s),a=!1}finally{a?O0(n):R0(n)}return vN(n,o),DN(r,n)}else if(!e||typeof e!="object"){if(r=t(e),r===void 0&&(r=e),r===xN&&(r=void 0),this.autoFreeze_&&H0(r,!0),o){let n=[],s=[];Zl("Patches").generateReplacementPatches_(e,r,n,s),o(n,s)}return r}else Ur(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(s,...a)=>this.produceWithPatches(s,c=>e(c,...a));let o,r;return[this.produce(e,t,(s,a)=>{o=s,r=a}),o,r]},typeof i?.autoFreeze=="boolean"&&this.setAutoFreeze(i.autoFreeze),typeof i?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(i.useStrictShallowCopy)}createDraft(i){Ql(i)||Ur(8),Wd(i)&&(i=J6(i));let e=bN(this),t=W0(i,void 0);return t[or].isManual_=!0,R0(e),t}finishDraft(i,e){let t=i&&i[or];(!t||!t.isManual_)&&Ur(9);let{scope_:o}=t;return vN(o,e),DN(void 0,o)}setAutoFreeze(i){this.autoFreeze_=i}setUseStrictShallowCopy(i){this.useStrictShallowCopy_=i}applyPatches(i,e){let t;for(t=e.length-1;t>=0;t--){let r=e[t];if(r.path.length===0&&r.op==="replace"){i=r.value;break}}t>-1&&(e=e.slice(t+1));let o=Zl("Patches").applyPatches_;return Wd(i)?o(i,e):this.produce(i,r=>o(r,e))}};function W0(i,e){let t=p_(i)?Zl("MapSet").proxyMap_(i,e):m_(i)?Zl("MapSet").proxySet_(i,e):K6(i,e);return(e?e.scope_:EN()).drafts_.push(t),t}function J6(i){return Wd(i)||Ur(10,i),TN(i)}function TN(i){if(!Ql(i)||g_(i))return i;let e=i[or],t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=M0(i,e.scope_.immer_.useStrictShallowCopy_)}else t=M0(i,!0);return c_(t,(o,r)=>{wN(t,o,TN(r))}),e&&(e.finalized_=!1),t}var rr=new G6,IN=rr.produce,rZ=rr.produceWithPatches.bind(rr),nZ=rr.setAutoFreeze.bind(rr),sZ=rr.setUseStrictShallowCopy.bind(rr),aZ=rr.applyPatches.bind(rr),lZ=rr.createDraft.bind(rr),cZ=rr.finishDraft.bind(rr);function PN(i){return(e,t)=>IN(e,o=>i(o,t))}function X6(i){return e=>{let t=i(e);if(t)return U(U({},e),t)}}function _Z(i,...e){let t=e.map(o=>typeof o=="function"?PN(X6(o)):o);RP(i,...t)}var Y6=Object.defineProperty,Q6=Object.getOwnPropertyDescriptor,Z6=Object.getOwnPropertyNames,eH=Object.prototype.hasOwnProperty,kN=(i,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Z6(e))!eH.call(i,r)&&r!==t&&Y6(i,r,{get:()=>e[r],enumerable:!(o=Q6(e,r))||o.enumerable});return i},tH=(i,e,t)=>(kN(i,e,"default"),t&&kN(t,e,"default")),yp={};tH(yp,Oa);var FN={},z0={},iH=class LN{static getOrCreate(e){return z0[e]||(z0[e]=new LN(e)),z0[e]}constructor(e){this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((t,o)=>{this._lazyLoadPromiseResolve=t,this._lazyLoadPromiseReject=o})}load(){return this._loadingTriggered||(this._loadingTriggered=!0,FN[this._languageId].loader().then(e=>this._lazyLoadPromiseResolve(e),e=>this._lazyLoadPromiseReject(e))),this._lazyLoadPromise}};function R(i){let e=i.id;FN[e]=i,yp.languages.register(i);let t=iH.getOrCreate(e);yp.languages.registerTokensProviderFactory(e,{create:async()=>(await t.load()).language}),yp.languages.onLanguageEncountered(e,async()=>{let o=await t.load();yp.languages.setLanguageConfiguration(e,o.conf)})}R({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:()=>import("./chunk-EQZUY75B.js")});R({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:()=>import("./chunk-LV3WR5ZW.js")});R({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:()=>import("./chunk-EAZFTPF2.js")});R({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:()=>import("./chunk-RH3WSLAW.js")});R({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:()=>import("./chunk-GRLADNIX.js")});R({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:()=>import("./chunk-7DAZ4YEQ.js")});R({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:()=>import("./chunk-LMLVKBBY.js")});R({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:()=>import("./chunk-UPMZKKI6.js")});R({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>import("./chunk-NW3UQXVV.js")});R({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>import("./chunk-NW3UQXVV.js")});R({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:()=>import("./chunk-USZ4DNXZ.js")});R({id:"csp",extensions:[".csp"],aliases:["CSP","csp"],loader:()=>import("./chunk-TROIVRAC.js")});R({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>import("./chunk-TB2E6FJY.js")});R({id:"cypher",extensions:[".cypher",".cyp"],aliases:["Cypher","OpenCypher"],loader:()=>import("./chunk-JKWQZ7TQ.js")});R({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:()=>import("./chunk-LTRTSQDO.js")});R({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:()=>import("./chunk-VMQPTEKH.js")});R({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:()=>import("./chunk-VQHVRKXV.js")});R({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>import("./chunk-CJG3Z34T.js")});R({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:()=>import("./chunk-MLKXXMU4.js")});R({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:()=>import("./chunk-RI5P775H.js")});R({id:"freemarker2",extensions:[".ftl",".ftlh",".ftlx"],aliases:["FreeMarker2","Apache FreeMarker2"],loader:()=>import("./chunk-ANXEP44G.js").then(i=>i.TagAutoInterpolationDollar)});R({id:"freemarker2.tag-angle.interpolation-dollar",aliases:["FreeMarker2 (Angle/Dollar)","Apache FreeMarker2 (Angle/Dollar)"],loader:()=>import("./chunk-ANXEP44G.js").then(i=>i.TagAngleInterpolationDollar)});R({id:"freemarker2.tag-bracket.interpolation-dollar",aliases:["FreeMarker2 (Bracket/Dollar)","Apache FreeMarker2 (Bracket/Dollar)"],loader:()=>import("./chunk-ANXEP44G.js").then(i=>i.TagBracketInterpolationDollar)});R({id:"freemarker2.tag-angle.interpolation-bracket",aliases:["FreeMarker2 (Angle/Bracket)","Apache FreeMarker2 (Angle/Bracket)"],loader:()=>import("./chunk-ANXEP44G.js").then(i=>i.TagAngleInterpolationBracket)});R({id:"freemarker2.tag-bracket.interpolation-bracket",aliases:["FreeMarker2 (Bracket/Bracket)","Apache FreeMarker2 (Bracket/Bracket)"],loader:()=>import("./chunk-ANXEP44G.js").then(i=>i.TagBracketInterpolationBracket)});R({id:"freemarker2.tag-auto.interpolation-dollar",aliases:["FreeMarker2 (Auto/Dollar)","Apache FreeMarker2 (Auto/Dollar)"],loader:()=>import("./chunk-ANXEP44G.js").then(i=>i.TagAutoInterpolationDollar)});R({id:"freemarker2.tag-auto.interpolation-bracket",aliases:["FreeMarker2 (Auto/Bracket)","Apache FreeMarker2 (Auto/Bracket)"],loader:()=>import("./chunk-ANXEP44G.js").then(i=>i.TagAutoInterpolationBracket)});R({id:"go",extensions:[".go"],aliases:["Go"],loader:()=>import("./chunk-AQW7VUFV.js")});R({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:()=>import("./chunk-5JLTELMI.js")});R({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>import("./chunk-VA7JCQBG.js")});R({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:()=>import("./chunk-24WXJNHE.js")});R({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>import("./chunk-RDGIV6D7.js")});R({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>import("./chunk-V46YSBBU.js")});R({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:()=>import("./chunk-QPYXPGSO.js")});R({id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>import("./chunk-E2ZFCM4O.js")});R({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:()=>import("./chunk-QHXHQNDW.js")});R({id:"kotlin",extensions:[".kt",".kts"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:()=>import("./chunk-UNWZOFYA.js")});R({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:()=>import("./chunk-O2A4QVVA.js")});R({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:()=>import("./chunk-6T2HRIWF.js")});R({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:()=>import("./chunk-7XHYVLFR.js")});R({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>import("./chunk-SE5E4U4J.js")});R({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:()=>import("./chunk-XVOW7BG2.js")});R({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>import("./chunk-SE2BIYBP.js")});R({id:"mdx",extensions:[".mdx"],aliases:["MDX","mdx"],loader:()=>import("./chunk-4U2ITPAC.js")});R({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:()=>import("./chunk-2XU2O7QH.js")});R({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:()=>import("./chunk-2UWKANFR.js")});R({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:()=>import("./chunk-JFRQGBED.js")});R({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:()=>import("./chunk-6CXAYTA4.js")});R({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:()=>import("./chunk-KTRCM4SW.js")});R({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:()=>import("./chunk-3L75LHON.js")});R({id:"perl",extensions:[".pl",".pm"],aliases:["Perl","pl"],loader:()=>import("./chunk-N3E3WKKW.js")});R({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:()=>import("./chunk-TEIEHLEC.js")});R({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:()=>import("./chunk-Y3HDQOSA.js")});R({id:"pla",extensions:[".pla"],loader:()=>import("./chunk-DMMGB7VP.js")});R({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:()=>import("./chunk-PL3ESH27.js")});R({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:()=>import("./chunk-IG5FKKML.js")});R({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:()=>import("./chunk-XDZHJ7SS.js")});R({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:()=>import("./chunk-3KPG3YPJ.js")});R({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:()=>import("./chunk-K5TT2HHE.js")});R({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>import("./chunk-YJIOWHTE.js")});R({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:()=>import("./chunk-YJUZ5U44.js")});R({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:()=>import("./chunk-K4PH3CPQ.js")});R({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:()=>import("./chunk-SDRP567V.js")});R({id:"redis",extensions:[".redis"],aliases:["redis"],loader:()=>import("./chunk-QS5QMAC7.js")});R({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:()=>import("./chunk-QBDI7N4K.js")});R({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:()=>import("./chunk-T6TDWRVJ.js")});R({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:()=>import("./chunk-F4T2MD54.js")});R({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:()=>import("./chunk-356UZOXY.js")});R({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:()=>import("./chunk-3E7SIYNP.js")});R({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:()=>import("./chunk-PY4NYZAQ.js")});R({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:()=>import("./chunk-7NZP3OQH.js")});R({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:()=>import("./chunk-ITKUWA4B.js")});R({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:()=>import("./chunk-UNXC6SX3.js")});R({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:()=>import("./chunk-LUOAQHOJ.js")});R({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:()=>import("./chunk-YXAZZUU5.js")});R({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:()=>import("./chunk-SNYNUP7Y.js")});R({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:()=>import("./chunk-W2Z6PBXH.js")});R({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib",".TcPOU",".TcDUT",".TcGVL",".TcIO"],aliases:["StructuredText","scl","stl"],loader:()=>import("./chunk-IYTSX2ZV.js")});R({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:()=>import("./chunk-Q7QKMCXX.js")});R({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:()=>import("./chunk-ZN7MSRN3.js")});R({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:()=>import("./chunk-ZN7MSRN3.js")});R({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:()=>import("./chunk-OL5I2ZYI.js")});R({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:()=>import("./chunk-XFOKVER3.js")});R({id:"typescript",extensions:[".ts",".tsx",".cts",".mts"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>import("./chunk-34WRZBWM.js")});R({id:"typespec",extensions:[".tsp"],aliases:["TypeSpec"],loader:()=>import("./chunk-PGWKXYBB.js")});R({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:()=>import("./chunk-3FQBAJTW.js")});R({id:"wgsl",extensions:[".wgsl"],aliases:["WebGPU Shading Language","WGSL","wgsl"],loader:()=>import("./chunk-NWLOQSAE.js")});R({id:"xml",extensions:[".xml",".xsd",".dtd",".ascx",".csproj",".config",".props",".targets",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xslt",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>import("./chunk-CHI4CJ33.js")});R({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:()=>import("./chunk-UBXACO2G.js")});var oH=Object.defineProperty,rH=Object.getOwnPropertyDescriptor,nH=Object.getOwnPropertyNames,sH=Object.prototype.hasOwnProperty,NN=(i,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of nH(e))!sH.call(i,r)&&r!==t&&oH(i,r,{get:()=>e[r],enumerable:!(o=rH(e,r))||o.enumerable});return i},aH=(i,e,t)=>(NN(i,e,"default"),t&&NN(t,e,"default")),Hd={};aH(Hd,Oa);var V0=class{constructor(i,e,t){this._onDidChange=new Hd.Emitter,this._languageId=i,this.setOptions(e),this.setModeConfiguration(t)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(i){this._options=i||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(i){this.setOptions(i)}setModeConfiguration(i){this._modeConfiguration=i||Object.create(null),this._onDidChange.fire(this)}},U0={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0},format:{newlineBetweenSelectors:!0,newlineBetweenRules:!0,spaceAroundSelectorSeparator:!1,braceStyle:"collapse",maxPreserveNewLines:void 0,preserveNewLines:!0}},q0={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0,documentFormattingEdits:!0,documentRangeFormattingEdits:!0},MN=new V0("css",U0,q0),ON=new V0("scss",U0,q0),RN=new V0("less",U0,q0);Hd.languages.css={cssDefaults:MN,lessDefaults:RN,scssDefaults:ON};function K0(){return import("./chunk-2KEU6E6I.js")}Hd.languages.onLanguage("less",()=>{K0().then(i=>i.setupMode(RN))});Hd.languages.onLanguage("scss",()=>{K0().then(i=>i.setupMode(ON))});Hd.languages.onLanguage("css",()=>{K0().then(i=>i.setupMode(MN))});var lH=Object.defineProperty,cH=Object.getOwnPropertyDescriptor,dH=Object.getOwnPropertyNames,uH=Object.prototype.hasOwnProperty,BN=(i,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of dH(e))!uH.call(i,r)&&r!==t&&lH(i,r,{get:()=>e[r],enumerable:!(o=cH(e,r))||o.enumerable});return i},hH=(i,e,t)=>(BN(i,e,"default"),t&&BN(t,e,"default")),f_={};hH(f_,Oa);var pH=class{constructor(i,e,t){this._onDidChange=new f_.Emitter,this._languageId=i,this.setOptions(e),this.setModeConfiguration(t)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(i){this._options=i||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(i){this._modeConfiguration=i||Object.create(null),this._onDidChange.fire(this)}},mH={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},__={format:mH,suggest:{},data:{useDefaultDataProvider:!0}};function y_(i){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:i===vp,documentFormattingEdits:i===vp,documentRangeFormattingEdits:i===vp}}var vp="html",WN="handlebars",HN="razor",jN=v_(vp,__,y_(vp)),gH=jN.defaults,zN=v_(WN,__,y_(WN)),fH=zN.defaults,VN=v_(HN,__,y_(HN)),_H=VN.defaults;f_.languages.html={htmlDefaults:gH,razorDefaults:_H,handlebarDefaults:fH,htmlLanguageService:jN,handlebarLanguageService:zN,razorLanguageService:VN,registerHTMLLanguageService:v_};function yH(){return import("./chunk-NFZ7XE5E.js")}function v_(i,e=__,t=y_(i)){let o=new pH(i,e,t),r,n=f_.languages.onLanguage(i,async()=>{r=(await yH()).setupMode(o)});return{defaults:o,dispose(){n.dispose(),r?.dispose(),r=void 0}}}var vH=Object.defineProperty,bH=Object.getOwnPropertyDescriptor,DH=Object.getOwnPropertyNames,CH=Object.prototype.hasOwnProperty,UN=(i,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of DH(e))!CH.call(i,r)&&r!==t&&vH(i,r,{get:()=>e[r],enumerable:!(o=bH(e,r))||o.enumerable});return i},xH=(i,e,t)=>(UN(i,e,"default"),t&&UN(t,e,"default")),bp={};xH(bp,Oa);var SH=class{constructor(i,e,t){this._onDidChange=new bp.Emitter,this._languageId=i,this.setDiagnosticsOptions(e),this.setModeConfiguration(t)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(i){this._diagnosticsOptions=i||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(i){this._modeConfiguration=i||Object.create(null),this._onDidChange.fire(this)}},wH={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},EH={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},qN=new SH("json",wH,EH),AH=()=>KN().then(i=>i.getWorker());bp.languages.json={jsonDefaults:qN,getWorker:AH};function KN(){return import("./chunk-SUQOWQJ7.js")}bp.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});bp.languages.onLanguage("json",()=>{KN().then(i=>i.setupMode(qN))});xi();ze();xi();xe();Vi();it();re();Wt();ei();Me();var b_=class extends hi{constructor(){super({id:"diffEditor.toggleCollapseUnchangedRegions",title:pe("toggleCollapseUnchangedRegions","Toggle Collapse Unchanged Regions"),icon:be.map,toggled:W.has("config.diffEditor.hideUnchangedRegions.enabled"),precondition:W.has("isInDiffEditor"),menu:{when:W.has("isInDiffEditor"),id:Q.EditorTitle,order:22,group:"navigation"}})}run(e,...t){let o=e.get(Oe),r=!o.getValue("diffEditor.hideUnchangedRegions.enabled");o.updateValue("diffEditor.hideUnchangedRegions.enabled",r)}},Dp=class extends hi{constructor(){super({id:"diffEditor.toggleShowMovedCodeBlocks",title:pe("toggleShowMovedCodeBlocks","Toggle Show Moved Code Blocks"),precondition:W.has("isInDiffEditor")})}run(e,...t){let o=e.get(Oe),r=!o.getValue("diffEditor.experimental.showMoves");o.updateValue("diffEditor.experimental.showMoves",r)}},Cp=class extends hi{constructor(){super({id:"diffEditor.toggleUseInlineViewWhenSpaceIsLimited",title:pe("toggleUseInlineViewWhenSpaceIsLimited","Toggle Use Inline View When Space Is Limited"),precondition:W.has("isInDiffEditor")})}run(e,...t){let o=e.get(Oe),r=!o.getValue("diffEditor.useInlineViewWhenSpaceIsLimited");o.updateValue("diffEditor.useInlineViewWhenSpaceIsLimited",r)}},xp=pe("diffEditor","Diff Editor"),D_=class extends So{constructor(){super({id:"diffEditor.switchSide",title:pe("switchSide","Switch Side"),icon:be.arrowSwap,precondition:W.has("isInDiffEditor"),f1:!0,category:xp})}runEditorCommand(e,t,o){let r=zd(e);if(r instanceof Rd){if(o&&o.dryRun)return{destinationSelection:r.mapToOtherSide().destinationSelection};r.switchSide()}}},C_=class extends So{constructor(){super({id:"diffEditor.exitCompareMove",title:pe("exitCompareMove","Exit Compare Move"),icon:be.close,precondition:A.comparingMovedCode,f1:!1,category:xp,keybinding:{weight:1e4,primary:9}})}runEditorCommand(e,t,...o){let r=zd(e);r instanceof Rd&&r.exitCompareMove()}},x_=class extends So{constructor(){super({id:"diffEditor.collapseAllUnchangedRegions",title:pe("collapseAllUnchangedRegions","Collapse All Unchanged Regions"),icon:be.fold,precondition:W.has("isInDiffEditor"),f1:!0,category:xp})}runEditorCommand(e,t,...o){let r=zd(e);r instanceof Rd&&r.collapseAllUnchangedRegions()}},S_=class extends So{constructor(){super({id:"diffEditor.showAllUnchangedRegions",title:pe("showAllUnchangedRegions","Show All Unchanged Regions"),icon:be.unfold,precondition:W.has("isInDiffEditor"),f1:!0,category:xp})}runEditorCommand(e,t,...o){let r=zd(e);r instanceof Rd&&r.showAllUnchangedRegions()}},jd=class extends hi{constructor(){super({id:"diffEditor.revert",title:pe("revert","Revert"),f1:!1,category:xp})}run(e,t){var o;let r=TH(e,t.originalUri,t.modifiedUri);r instanceof Rd&&r.revertRangeMappings((o=t.mapping.innerChanges)!==null&&o!==void 0?o:[])}},$N=pe("accessibleDiffViewer","Accessible Diff Viewer"),w_=(()=>{class i extends hi{constructor(){super({id:i.id,title:pe("editor.action.accessibleDiffViewer.next","Go to Next Difference"),category:$N,precondition:W.has("isInDiffEditor"),keybinding:{primary:65,weight:100},f1:!0})}run(t){let o=zd(t);o?.accessibleDiffViewerNext()}}return i.id="editor.action.accessibleDiffViewer.next",i})(),$0=(()=>{class i extends hi{constructor(){super({id:i.id,title:pe("editor.action.accessibleDiffViewer.prev","Go to Previous Difference"),category:$N,precondition:W.has("isInDiffEditor"),keybinding:{primary:1089,weight:100},f1:!0})}run(t){let o=zd(t);o?.accessibleDiffViewerPrev()}}return i.id="editor.action.accessibleDiffViewer.prev",i})();function TH(i,e,t){return i.get(tt).listDiffEditors().find(n=>{var s,a;let c=n.getModifiedEditor(),h=n.getOriginalEditor();return c&&((s=c.getModel())===null||s===void 0?void 0:s.uri.toString())===t.toString()&&h&&((a=h.getModel())===null||a===void 0?void 0:a.uri.toString())===e.toString()})||null}function zd(i){let t=i.get(tt).listDiffEditors(),o=pf();if(o)for(let r of t){let n=r.getContainerDomNode();if(IH(n,o))return r}return null}function IH(i,e){let t=e;for(;t;){if(t===i)return!0;t=t.parentElement}return!1}it();re();Wt();Rt();Me();et(b_);et(Dp);et(Cp);io.appendMenuItem(Q.EditorTitle,{command:{id:new Cp().desc.id,title:b("useInlineViewWhenSpaceIsLimited","Use Inline View When Space Is Limited"),toggled:W.has("config.diffEditor.useInlineViewWhenSpaceIsLimited"),precondition:W.has("isInDiffEditor")},order:11,group:"1_diff",when:W.and(A.diffEditorRenderSideBySideInlineBreakpointReached,W.has("isInDiffEditor"))});io.appendMenuItem(Q.EditorTitle,{command:{id:new Dp().desc.id,title:b("showMoves","Show Moved Code Blocks"),icon:be.move,toggled:Ok.create("config.diffEditor.experimental.showMoves",!0),precondition:W.has("isInDiffEditor")},order:10,group:"1_diff",when:W.has("isInDiffEditor")});et(jd);for(let i of[{icon:be.arrowRight,key:A.diffEditorInlineMode.toNegated()},{icon:be.discard,key:A.diffEditorInlineMode}])io.appendMenuItem(Q.DiffEditorHunkToolbar,{command:{id:new jd().desc.id,title:b("revertHunk","Revert Block"),icon:i.icon},when:W.and(A.diffEditorModifiedWritable,i.key),order:5,group:"primary"}),io.appendMenuItem(Q.DiffEditorSelectionToolbar,{command:{id:new jd().desc.id,title:b("revertSelection","Revert Selection"),icon:i.icon},when:W.and(A.diffEditorModifiedWritable,i.key),order:5,group:"primary"});et(D_);et(C_);et(x_);et(S_);io.appendMenuItem(Q.EditorTitle,{command:{id:w_.id,title:b("Open Accessible Diff Viewer","Open Accessible Diff Viewer"),precondition:W.has("isInDiffEditor")},order:10,group:"2_diff",when:W.and(A.accessibleDiffViewerVisible.negate(),W.has("isInDiffEditor"))});Ue.registerCommandAlias("editor.action.diffReview.next",w_.id);et(w_);Ue.registerCommandAlias("editor.action.diffReview.prev",$0.id);et($0);yr();ds();xe();ui();it();re();Me();var PH=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},kH=function(i,e){return function(t,o){e(t,o,i)}},G0,E_=new Ee("selectionAnchorSet",!1),ks=G0=class{static get(e){return e.getContribution(G0.ID)}constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=E_.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}setSelectionAnchor(){if(this.editor.hasModel()){let e=this.editor.getPosition();this.editor.changeDecorations(t=>{this.decorationId&&t.removeDecoration(this.decorationId),this.decorationId=t.addDecoration(me.fromPositions(e,e),{description:"selection-anchor",stickiness:1,hoverMessage:new Gt().appendText(b("selectionAnchor","Selection Anchor")),className:"selection-anchor"})}),this.selectionAnchorSetContextKey.set(!!this.decorationId),ai(b("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){let e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){let e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){let t=this.editor.getPosition();this.editor.setSelection(me.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){let e=this.decorationId;this.editor.changeDecorations(t=>{t.removeDecoration(e),this.decorationId=void 0}),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};ks.ID="editor.contrib.selectionAnchorController";ks=G0=PH([kH(1,ve)],ks);var J0=class extends j{constructor(){super({id:"editor.action.setSelectionAnchor",label:b("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:St(2089,2080),weight:100}})}async run(e,t){var o;(o=ks.get(t))===null||o===void 0||o.setSelectionAnchor()}},X0=class extends j{constructor(){super({id:"editor.action.goToSelectionAnchor",label:b("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:E_})}async run(e,t){var o;(o=ks.get(t))===null||o===void 0||o.goToSelectionAnchor()}},Y0=class extends j{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:b("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:E_,kbOpts:{kbExpr:A.editorTextFocus,primary:St(2089,2089),weight:100}})}async run(e,t){var o;(o=ks.get(t))===null||o===void 0||o.selectFromAnchorToCursor()}},Q0=class extends j{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:b("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:E_,kbOpts:{kbExpr:A.editorTextFocus,primary:9,weight:100}})}async run(e,t){var o;(o=ks.get(t))===null||o===void 0||o.cancelSelectionAnchor()}};le(ks.ID,ks,4);M(J0);M(X0);M(Y0);M(Q0);Xe();X();xe();pt();ge();ui();it();bn();gi();re();Wt();Ri();Bi();var FH=ue("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hcDark:"#A0A0A0",hcLight:"#A0A0A0"},b("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets.")),Z0=class extends j{constructor(){super({id:"editor.action.jumpToBracket",label:b("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:3165,weight:100}})}run(e,t){var o;(o=Pn.get(t))===null||o===void 0||o.jumpToBracket()}},ex=class extends j{constructor(){super({id:"editor.action.selectToBracket",label:b("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,metadata:{description:pe("smartSelect.selectToBracketDescription","Select the text inside and including the brackets or curly braces"),args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,o){var r;let n=!0;o&&o.selectBrackets===!1&&(n=!1),(r=Pn.get(t))===null||r===void 0||r.selectToBracket(n)}},tx=class extends j{constructor(){super({id:"editor.action.removeBrackets",label:b("smartSelect.removeBrackets","Remove Brackets"),alias:"Remove Brackets",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:2561,weight:100}})}run(e,t){var o;(o=Pn.get(t))===null||o===void 0||o.removeBrackets(this.id)}},ix=class{constructor(e,t,o){this.position=e,this.brackets=t,this.options=o}},Pn=class i extends B{static get(e){return e.getContribution(i.ID)}constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new ut(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(72),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(72)&&(this._matchBrackets=this._editor.getOption(72),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}jumpToBracket(){if(!this._editor.hasModel())return;let e=this._editor.getModel(),t=this._editor.getSelections().map(o=>{let r=o.getStartPosition(),n=e.bracketPairs.matchBracket(r),s=null;if(n)n[0].containsPosition(r)&&!n[1].containsPosition(r)?s=n[1].getStartPosition():n[1].containsPosition(r)&&(s=n[0].getStartPosition());else{let a=e.bracketPairs.findEnclosingBrackets(r);if(a)s=a[1].getStartPosition();else{let c=e.bracketPairs.findNextBracket(r);c&&c.range&&(s=c.range.getStartPosition())}}return s?new me(s.lineNumber,s.column,s.lineNumber,s.column):new me(r.lineNumber,r.column,r.lineNumber,r.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;let t=this._editor.getModel(),o=[];this._editor.getSelections().forEach(r=>{let n=r.getStartPosition(),s=t.bracketPairs.matchBracket(n);if(!s&&(s=t.bracketPairs.findEnclosingBrackets(n),!s)){let h=t.bracketPairs.findNextBracket(n);h&&h.range&&(s=t.bracketPairs.matchBracket(h.range.getStartPosition()))}let a=null,c=null;if(s){s.sort(T.compareRangesUsingStarts);let[h,p]=s;if(a=e?h.getStartPosition():h.getEndPosition(),c=e?p.getEndPosition():p.getStartPosition(),p.containsPosition(n)){let g=a;a=c,c=g}}a&&c&&o.push(new me(a.lineNumber,a.column,c.lineNumber,c.column))}),o.length>0&&(this._editor.setSelections(o),this._editor.revealRange(o[0]))}removeBrackets(e){if(!this._editor.hasModel())return;let t=this._editor.getModel();this._editor.getSelections().forEach(o=>{let r=o.getPosition(),n=t.bracketPairs.matchBracket(r);n||(n=t.bracketPairs.findEnclosingBrackets(r)),n&&(this._editor.pushUndoStop(),this._editor.executeEdits(e,[{range:n[0],text:""},{range:n[1],text:""}]),this._editor.pushUndoStop())})}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();let e=[],t=0;for(let o of this._lastBracketsData){let r=o.brackets;r&&(e[t++]={range:r[0],options:o.options},e[t++]={range:r[1],options:o.options})}this._decorations.set(e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}let e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}let t=this._editor.getModel(),o=t.getVersionId(),r=[];this._lastVersionId===o&&(r=this._lastBracketsData);let n=[],s=0;for(let g=0,f=e.length;g<f;g++){let _=e[g];_.isEmpty()&&(n[s++]=_.getStartPosition())}n.length>1&&n.sort(Y.compare);let a=[],c=0,h=0,p=r.length;for(let g=0,f=n.length;g<f;g++){let _=n[g];for(;h<p&&r[h].position.isBefore(_);)h++;if(h<p&&r[h].position.equals(_))a[c++]=r[h];else{let y=t.bracketPairs.matchBracket(_,20),C=i._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!y&&this._matchBrackets==="always"&&(y=t.bracketPairs.findEnclosingBrackets(_,20),C=i._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[c++]=new ix(_,y,C)}}this._lastBracketsData=a,this._lastVersionId=o}};Pn.ID="editor.contrib.bracketMatchingController";Pn._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=ke.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:It(FH),position:Eo.Center}});Pn._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=ke.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});le(Pn.ID,Pn,1);M(ex);M(Z0);M(tx);io.appendMenuItem(Q.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:b({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});xe();it();ge();ui();var A_=class{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;let o=this._selection.startLineNumber,r=this._selection.startColumn,n=this._selection.endColumn;if(!(this._isMovingLeft&&r===1)&&!(!this._isMovingLeft&&n===e.getLineMaxColumn(o)))if(this._isMovingLeft){let s=new T(o,r-1,o,r),a=e.getValueInRange(s);t.addEditOperation(s,null),t.addEditOperation(new T(o,n,o,n),a)}else{let s=new T(o,n,o,n+1),a=e.getValueInRange(s);t.addEditOperation(s,null),t.addEditOperation(new T(o,r,o,r),a)}}computeCursorState(e,t){return this._isMovingLeft?new me(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new me(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}};re();var T_=class extends j{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;let o=[],r=t.getSelections();for(let n of r)o.push(new A_(n,this.left));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}},ox=class extends T_{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:b("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:A.writable})}},rx=class extends T_{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:b("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:A.writable})}};M(ox);M(rx);xe();ge();it();re();var nx=class extends j{constructor(){super({id:"editor.action.transposeLetters",label:b("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;let o=t.getModel(),r=[],n=t.getSelections();for(let s of n){if(!s.isEmpty())continue;let a=s.startLineNumber,c=s.startColumn,h=o.getLineMaxColumn(a);if(a===1&&(c===1||c===2&&h===2))continue;let p=c===h?s.getPosition():Of.rightPosition(o,s.getPosition().lineNumber,s.getPosition().column),g=Of.leftPosition(o,p),f=Of.leftPosition(o,g),_=o.getValueInRange(T.fromPositions(f,g)),y=o.getValueInRange(T.fromPositions(g,p)),C=T.fromPositions(f,p);r.push(new bs(C,y+_))}r.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop())}};M(nx);p6();ze();Zi();xe();Vi();it();ze();bt();Xe();bt();Oh();var Ra=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let i;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?i=crypto.getRandomValues.bind(crypto):i=function(o){for(let r=0;r<o.length;r++)o[r]=Math.floor(Math.random()*256);return o};let e=new Uint8Array(16),t=[];for(let o=0;o<256;o++)t.push(o.toString(16).padStart(2,"0"));return function(){i(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let r=0,n="";return n+=t[e[r++]],n+=t[e[r++]],n+=t[e[r++]],n+=t[e[r++]],n+="-",n+=t[e[r++]],n+=t[e[r++]],n+="-",n+=t[e[r++]],n+=t[e[r++]],n+="-",n+=t[e[r++]],n+=t[e[r++]],n+="-",n+=t[e[r++]],n+=t[e[r++]],n+=t[e[r++]],n+=t[e[r++]],n+=t[e[r++]],n+=t[e[r++]],n}}();function Sp(i){return{asString:async()=>i,asFile:()=>{},value:typeof i=="string"?i:void 0}}function GN(i,e,t){let o={id:Ra(),name:i,uri:e,data:t};return{asString:async()=>"",asFile:()=>o,value:void 0}}var Vd=class{constructor(){this._entries=new Map}get size(){let e=0;for(let t of this._entries)e++;return e}has(e){return this._entries.has(this.toKey(e))}matches(e){let t=[...this._entries.keys()];return Oo.some(this,([o,r])=>r.asFile())&&t.push("files"),JN(I_(e),t)}get(e){var t;return(t=this._entries.get(this.toKey(e)))===null||t===void 0?void 0:t[0]}append(e,t){let o=this._entries.get(e);o?o.push(t):this._entries.set(this.toKey(e),[t])}replace(e,t){this._entries.set(this.toKey(e),[t])}delete(e){this._entries.delete(this.toKey(e))}*[Symbol.iterator](){for(let[e,t]of this._entries)for(let o of t)yield[e,o]}toKey(e){return I_(e)}};function I_(i){return i.toLowerCase()}function P_(i,e){return JN(I_(i),e.map(I_))}function JN(i,e){if(i==="*/*")return e.length>0;if(e.includes(i))return!0;let t=i.match(/^([a-z]+)\/([a-z]+|\*)$/i);if(!t)return!1;let[o,r,n]=t;return n==="*"?e.some(s=>s.startsWith(r+"/")):!1}var ec=Object.freeze({create:i=>Xg(i.map(e=>e.toString())).join(`\r
`),split:i=>i.split(`\r
`),parse:i=>ec.split(i).filter(e=>!e.startsWith("#"))});var Ke=class i{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+i.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(...e){return new i((this.value?[this.value,...e]:e).join(i.sep))}};Ke.sep=".";Ke.None=new Ke("@@none@@");Ke.Empty=new Ke("");X();XC();Zi();XC();Ci();ms();var ax={EDITORS:"CodeEditors",FILES:"CodeFiles"},sx=class{},LH={DragAndDropContribution:"workbench.contributions.dragAndDrop"};Oi.add(LH.DragAndDropContribution,new sx);var Ud=class i{constructor(){}static getInstance(){return i.INSTANCE}hasData(e){return e&&e===this.proto}getData(e){if(this.hasData(e))return this.data}};Ud.INSTANCE=new Ud;function lx(i){let e=new Vd;for(let t of i.items){let o=t.type;if(t.kind==="string"){let r=new Promise(n=>t.getAsString(n));e.append(o,Sp(r))}else if(t.kind==="file"){let r=t.getAsFile();r&&e.append(o,NH(r))}}return e}function NH(i){let e=i.path?We.parse(i.path):void 0;return GN(i.name,e,async()=>new Uint8Array(await i.arrayBuffer()))}var MH=Object.freeze([ax.EDITORS,ax.FILES,$f.RESOURCES,$f.INTERNAL_URI_LIST]);function k_(i,e=!1){let t=lx(i),o=t.get($f.INTERNAL_URI_LIST);if(o)t.replace(si.uriList,o);else if(e||!t.has(si.uriList)){let r=[];for(let n of i.items){let s=n.getAsFile();if(s){let a=s.path;try{a?r.push(We.file(a).toString()):r.push(We.parse(s.name,!0).toString())}catch{}}}r.length&&t.replace(si.uriList,Sp(ec.create(r)))}for(let r of MH)t.delete(r);return t}ge();Jt();Ge();bt();X();XC();Ol();ir();Ci();Jt();Ge();re();var dx=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},wp=function(i,e){return function(t,o){e(t,o,i)}},Ep=class{async provideDocumentPasteEdits(e,t,o,r,n){let s=await this.getEdit(o,n);if(s)return{dispose(){},edits:[{insertText:s.insertText,title:s.title,kind:s.kind,handledMimeType:s.handledMimeType,yieldTo:s.yieldTo}]}}async provideDocumentDropEdits(e,t,o,r){let n=await this.getEdit(o,r);return n?[{insertText:n.insertText,title:n.title,kind:n.kind,handledMimeType:n.handledMimeType,yieldTo:n.yieldTo}]:void 0}},qr=class i extends Ep{constructor(){super(...arguments),this.kind=i.kind,this.dropMimeTypes=[si.text],this.pasteMimeTypes=[si.text]}async getEdit(e,t){let o=e.get(si.text);if(!o||e.has(si.uriList))return;let r=await o.asString();return{handledMimeType:si.text,title:b("text.label","Insert Plain Text"),insertText:r,kind:this.kind}}};qr.id="text";qr.kind=new Ke("text.plain");var F_=class extends Ep{constructor(){super(...arguments),this.kind=new Ke("uri.absolute"),this.dropMimeTypes=[si.uriList],this.pasteMimeTypes=[si.uriList]}async getEdit(e,t){let o=await XN(e);if(!o.length||t.isCancellationRequested)return;let r=0,n=o.map(({uri:a,originalText:c})=>a.scheme===Qt.file?a.fsPath:(r++,c)).join(" "),s;return r>0?s=o.length>1?b("defaultDropProvider.uriList.uris","Insert Uris"):b("defaultDropProvider.uriList.uri","Insert Uri"):s=o.length>1?b("defaultDropProvider.uriList.paths","Insert Paths"):b("defaultDropProvider.uriList.path","Insert Path"),{handledMimeType:si.uriList,insertText:n,title:s,kind:this.kind}}},L_=class extends Ep{constructor(e){super(),this._workspaceContextService=e,this.kind=new Ke("uri.relative"),this.dropMimeTypes=[si.uriList],this.pasteMimeTypes=[si.uriList]}async getEdit(e,t){let o=await XN(e);if(!o.length||t.isCancellationRequested)return;let r=Qi(o.map(({uri:n})=>{let s=this._workspaceContextService.getWorkspaceFolder(n);return s?YF(s.uri,n):void 0}));if(r.length)return{handledMimeType:si.uriList,insertText:r.join(" "),title:o.length>1?b("defaultDropProvider.uriList.relativePaths","Insert Relative Paths"):b("defaultDropProvider.uriList.relativePath","Insert Relative Path"),kind:this.kind}}};L_=dx([wp(0,As)],L_);var cx=class{constructor(){this.kind=new Ke("html"),this.pasteMimeTypes=["text/html"],this._yieldTo=[{mimeType:si.text}]}async provideDocumentPasteEdits(e,t,o,r,n){var s;if(r.triggerKind!==Wh.PasteAs&&!(!((s=r.only)===null||s===void 0)&&s.contains(this.kind)))return;let a=o.get("text/html"),c=await a?.asString();if(!(!c||n.isCancellationRequested))return{dispose(){},edits:[{insertText:c,yieldTo:this._yieldTo,title:b("pasteHtmlLabel","Insert HTML"),kind:this.kind}]}}};async function XN(i){let e=i.get(si.uriList);if(!e)return[];let t=await e.asString(),o=[];for(let r of ec.parse(t))try{o.push({uri:We.parse(r),originalText:r})}catch{}return o}var N_=class extends B{constructor(e,t){super(),this._register(e.documentDropEditProvider.register("*",new qr)),this._register(e.documentDropEditProvider.register("*",new F_)),this._register(e.documentDropEditProvider.register("*",new L_(t)))}};N_=dx([wp(0,J),wp(1,As)],N_);var M_=class extends B{constructor(e,t){super(),this._register(e.documentPasteEditProvider.register("*",new qr)),this._register(e.documentPasteEditProvider.register("*",new F_)),this._register(e.documentPasteEditProvider.register("*",new L_(t))),this._register(e.documentPasteEditProvider.register("*",new cx))}};M_=dx([wp(0,J),wp(1,As)],M_);var OH=(()=>{class i{constructor(){this.value="",this.pos=0}static isDigitCharacter(t){return t>=48&&t<=57}static isVariableCharacter(t){return t===95||t>=97&&t<=122||t>=65&&t<=90}text(t){this.value=t,this.pos=0}tokenText(t){return this.value.substr(t.pos,t.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let t=this.pos,o=0,r=this.value.charCodeAt(t),n;if(n=i._table[r],typeof n=="number")return this.pos+=1,{type:n,pos:t,len:1};if(i.isDigitCharacter(r)){n=8;do o+=1,r=this.value.charCodeAt(t+o);while(i.isDigitCharacter(r));return this.pos+=o,{type:n,pos:t,len:o}}if(i.isVariableCharacter(r)){n=9;do r=this.value.charCodeAt(t+ ++o);while(i.isVariableCharacter(r)||i.isDigitCharacter(r));return this.pos+=o,{type:n,pos:t,len:o}}n=10;do o+=1,r=this.value.charCodeAt(t+o);while(!isNaN(r)&&typeof i._table[r]>"u"&&!i.isDigitCharacter(r)&&!i.isVariableCharacter(r));return this.pos+=o,{type:n,pos:t,len:o}}}return i._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13},i})(),Ba=class{constructor(){this._children=[]}appendChild(e){return e instanceof Fi&&this._children[this._children.length-1]instanceof Fi?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){let{parent:o}=e,r=o.children.indexOf(e),n=o.children.slice(0);n.splice(r,1,...t),o._children=n,function s(a,c){for(let h of a)h.parent=c,s(h.children,h)}(t,o)}get children(){return this._children}get rightMostDescendant(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof qd)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}},Fi=class i extends Ba{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new i(this.value)}},O_=class extends Ba{},Bo=class i extends O_{static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}constructor(e){super(),this.index=e}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof tc?this._children[0]:void 0}clone(){let e=new i(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}},tc=class i extends Ba{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof Fi&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){let e=new i;return this.options.forEach(e.appendChild,e),e}},ux=class i extends Ba{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){let t=this,o=!1,r=e.replace(this.regexp,function(){return o=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!o&&this._children.some(n=>n instanceof Kr&&!!n.elseValue)&&(r=this._replace([])),r}_replace(e){let t="";for(let o of this._children)if(o instanceof Kr){let r=e[o.index]||"";r=o.resolve(r),t+=r}else t+=o.toString();return t}toString(){return""}clone(){let e=new i;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}},Kr=class i extends Ba{constructor(e,t,o,r){super(),this.index=e,this.shorthandName=t,this.ifValue=o,this.elseValue=r}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":e&&typeof this.ifValue=="string"?this.ifValue:!e&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){let t=e.match(/[a-z0-9]+/gi);return t?t.map(o=>o.charAt(0).toUpperCase()+o.substr(1)).join(""):e}_toCamelCase(e){let t=e.match(/[a-z0-9]+/gi);return t?t.map((o,r)=>r===0?o.charAt(0).toLowerCase()+o.substr(1):o.charAt(0).toUpperCase()+o.substr(1)).join(""):e}clone(){return new i(this.index,this.shorthandName,this.ifValue,this.elseValue)}},Ap=class i extends O_{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new Fi(t)],!0):!1}clone(){let e=new i(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}};function YN(i,e){let t=[...i];for(;t.length>0;){let o=t.shift();if(!e(o))break;t.unshift(...o.children)}}var qd=class i extends Ba{get placeholderInfo(){if(!this._placeholders){let e=[],t;this.walk(function(o){return o instanceof Bo&&(e.push(o),t=!t||t.index<o.index?o:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let t=0,o=!1;return this.walk(r=>r===e?(o=!0,!1):(t+=r.len(),!0)),o?t:-1}fullLen(e){let t=0;return YN([e],o=>(t+=o.len(),!0)),t}enclosingPlaceholders(e){let t=[],{parent:o}=e;for(;o;)o instanceof Bo&&t.push(o),o=o.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof Ap&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){let e=new i;return this._children=this.children.map(t=>t.clone()),e}walk(e){YN(this.children,e)}},Io=class{constructor(){this._scanner=new OH,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,o){let r=new qd;return this.parseFragment(e,r),this.ensureFinalTabstop(r,o??!1,t??!1),r}parseFragment(e,t){let o=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););let r=new Map,n=[];t.walk(c=>(c instanceof Bo&&(c.isFinalTabstop?r.set(0,void 0):!r.has(c.index)&&c.children.length>0?r.set(c.index,c.children):n.push(c)),!0));let s=(c,h)=>{let p=r.get(c.index);if(!p)return;let g=new Bo(c.index);g.transform=c.transform;for(let f of p){let _=f.clone();g.appendChild(_),_ instanceof Bo&&r.has(_.index)&&!h.has(_.index)&&(h.add(_.index),s(_,h),h.delete(_.index))}t.replace(c,[g])},a=new Set;for(let c of n)s(c,a);return t.children.slice(o)}ensureFinalTabstop(e,t,o){(t||o&&e.placeholders.length>0)&&(e.placeholders.find(n=>n.index===0)||e.appendChild(new Bo(0)))}_accept(e,t){if(e===void 0||this._token.type===e){let o=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),o}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let r=this._scanner.next();if(r.type!==0&&r.type!==4&&r.type!==5)return!1}this._token=this._scanner.next()}let o=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),o}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new Fi(t)),!0):!1}_parseTabstopOrVariableName(e){let t,o=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new Bo(Number(t)):new Ap(t)),!0):this._backTo(o)}_parseComplexPlaceholder(e){let t,o=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(o);let n=new Bo(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(n),!0;if(!this._parse(n))return e.appendChild(new Fi("${"+t+":")),n.children.forEach(e.appendChild,e),!0}else if(n.index>0&&this._accept(7)){let s=new tc;for(;;){if(this._parseChoiceElement(s)){if(this._accept(2))continue;if(this._accept(7)&&(n.appendChild(s),this._accept(4)))return e.appendChild(n),!0}return this._backTo(o),!1}}else return this._accept(6)?this._parseTransform(n)?(e.appendChild(n),!0):(this._backTo(o),!1):this._accept(4)?(e.appendChild(n),!0):this._backTo(o)}_parseChoiceElement(e){let t=this._token,o=[];for(;!(this._token.type===2||this._token.type===7);){let r;if((r=this._accept(5,!0))?r=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:r=this._accept(void 0,!0),!r)return this._backTo(t),!1;o.push(r)}return o.length===0?(this._backTo(t),!1):(e.appendChild(new Fi(o.join(""))),!0)}_parseComplexVariable(e){let t,o=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(o);let n=new Ap(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(n),!0;if(!this._parse(n))return e.appendChild(new Fi("${"+t+":")),n.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(n)?(e.appendChild(n),!0):(this._backTo(o),!1):this._accept(4)?(e.appendChild(n),!0):this._backTo(o)}_parseTransform(e){let t=new ux,o="",r="";for(;!this._accept(6);){let n;if(n=this._accept(5,!0)){n=this._accept(6,!0)||n,o+=n;continue}if(this._token.type!==14){o+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let n;if(n=this._accept(5,!0)){n=this._accept(5,!0)||this._accept(6,!0)||n,t.appendChild(new Fi(n));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){r+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(o,r)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){let t=this._token;if(!this._accept(0))return!1;let o=!1;this._accept(3)&&(o=!0);let r=this._accept(8,!0);if(r)if(o){if(this._accept(4))return e.appendChild(new Kr(Number(r))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new Kr(Number(r))),!0;else return this._backTo(t),!1;if(this._accept(6)){let n=this._accept(9,!0);return!n||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new Kr(Number(r),n)),!0)}else if(this._accept(11)){let n=this._until(4);if(n)return e.appendChild(new Kr(Number(r),void 0,n,void 0)),!0}else if(this._accept(12)){let n=this._until(4);if(n)return e.appendChild(new Kr(Number(r),void 0,void 0,n)),!0}else if(this._accept(13)){let n=this._until(1);if(n){let s=this._until(4);if(s)return e.appendChild(new Kr(Number(r),void 0,n,s)),!0}}else{let n=this._until(4);if(n)return e.appendChild(new Kr(Number(r),void 0,void 0,n)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Fi(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};function R_(i,e,t){var o,r,n,s;return(typeof t.insertText=="string"?t.insertText==="":t.insertText.snippet==="")?{edits:(r=(o=t.additionalEdit)===null||o===void 0?void 0:o.edits)!==null&&r!==void 0?r:[]}:{edits:[...e.map(a=>new CL(i,{range:a,text:typeof t.insertText=="string"?Io.escape(t.insertText)+"$0":t.insertText.snippet,insertAsSnippet:!0})),...(s=(n=t.additionalEdit)===null||n===void 0?void 0:n.edits)!==null&&s!==void 0?s:[]]}}function B_(i){var e;function t(a,c){return"mimeType"in a?a.mimeType===c.handledMimeType:!!c.kind&&a.kind.contains(c.kind)}let o=new Map;for(let a of i)for(let c of(e=a.yieldTo)!==null&&e!==void 0?e:[])for(let h of i)if(h!==a&&t(c,h)){let p=o.get(a);p||(p=[],o.set(a,p)),p.push(h)}if(!o.size)return Array.from(i);let r=new Set,n=[];function s(a){if(!a.length)return[];let c=a[0];if(n.includes(c))return console.warn("Yield to cycle detected",c),a;if(r.has(c))return s(a.slice(1));let h=[],p=o.get(c);return p&&(n.push(c),h=s(p),n.pop()),r.add(c),[...h,c,...s(a.slice(1))]}return s(Array.from(i))}Xl();ze();Xe();xi();X();Tt();to();ge();gi();Je();var RH=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},BH=function(i,e){return function(t,o){e(t,o,i)}},WH=ke.register({description:"inline-progress-widget",stickiness:1,showIfCollapsed:!0,after:{content:df,inlineClassName:"inline-editor-progress-decoration",inlineClassNameAffectsLetterSpacing:!0}}),HH=(()=>{class i extends B{constructor(t,o,r,n,s){super(),this.typeId=t,this.editor=o,this.range=r,this.delegate=s,this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this.create(n),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this)}create(t){this.domNode=te(".inline-progress-widget"),this.domNode.role="button",this.domNode.title=t;let o=te("span.icon");this.domNode.append(o),o.classList.add(...je.asClassNameArray(be.loading),"codicon-modifier-spin");let r=()=>{let n=this.editor.getOption(67);this.domNode.style.height=`${n}px`,this.domNode.style.width=`${Math.ceil(.8*n)}px`};r(),this._register(this.editor.onDidChangeConfiguration(n=>{(n.hasChanged(52)||n.hasChanged(67))&&r()})),this._register(Ne(this.domNode,at.CLICK,n=>{this.delegate.cancel()}))}getId(){return i.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:{lineNumber:this.range.startLineNumber,column:this.range.startColumn},preference:[0]}}dispose(){super.dispose(),this.editor.removeContentWidget(this)}}return i.baseId="editor.widget.inlineProgressWidget",i})(),Kd=class extends B{constructor(e,t,o){super(),this.id=e,this._editor=t,this._instantiationService=o,this._showDelay=500,this._showPromise=this._register(new Ut),this._currentWidget=new Ut,this._operationIdPool=0,this._currentDecorations=t.createDecorationsCollection()}async showWhile(e,t,o){let r=this._operationIdPool++;this._currentOperation=r,this.clear(),this._showPromise.value=hs(()=>{let n=T.fromPositions(e);this._currentDecorations.set([{range:n,options:WH}]).length>0&&(this._currentWidget.value=this._instantiationService.createInstance(HH,this.id,this._editor,n,t,o))},this._showDelay);try{return await o}finally{this._currentOperation===r&&(this.clear(),this._currentOperation=void 0)}}clear(){this._showPromise.clear(),this._currentDecorations.clear(),this._currentWidget.clear()}};Kd=RH([BH(2,ce)],Kd);nt();yr();X();xe();ge();re();Me();ze();var jH=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},QN=function(i,e){return function(t,o){e(t,o,i)}},W_,fi=W_=class{static get(e){return e.getContribution(W_.ID)}constructor(e,t,o){this._openerService=o,this._messageWidget=new Ut,this._messageListeners=new H,this._mouseOverMessage=!1,this._editor=e,this._visible=W_.MESSAGE_VISIBLE.bindTo(t)}dispose(){var e;(e=this._message)===null||e===void 0||e.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){ai(Pd(e)?e.value:e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._message=Pd(e)?bL(e,{actionHandler:{callback:r=>{this.closeMessage(),DL(this._openerService,r,Pd(e)?e.isTrusted:void 0)},disposables:this._messageListeners}}):void 0,this._messageWidget.value=new H_(this._editor,t,typeof e=="string"?e:this._message.element),this._messageListeners.add(ft.debounce(this._editor.onDidBlurEditorText,(r,n)=>n,0)(()=>{this._mouseOverMessage||this._messageWidget.value&&Ak(pf(),this._messageWidget.value.getDomNode())||this.closeMessage()})),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(Ne(this._messageWidget.value.getDomNode(),at.MOUSE_ENTER,()=>this._mouseOverMessage=!0,!0)),this._messageListeners.add(Ne(this._messageWidget.value.getDomNode(),at.MOUSE_LEAVE,()=>this._mouseOverMessage=!1,!0));let o;this._messageListeners.add(this._editor.onMouseMove(r=>{r.target.position&&(o?o.containsPosition(r.target.position)||this.closeMessage():o=new T(t.lineNumber-3,1,r.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(H_.fadeOut(this._messageWidget.value))}};fi.ID="editor.contrib.messageController";fi.MESSAGE_VISIBLE=new Ee("messageVisible",!1,b("messageVisible","Whether the editor is currently showing an inline message"));fi=W_=jH([QN(1,ve),QN(2,Pi)],fi);var zH=Bt.bindToContribution(fi.get);de(new zH({id:"leaveEditorMessage",precondition:fi.MESSAGE_VISIBLE,handler:i=>i.closeMessage(),kbOpts:{weight:130,primary:9}}));var H_=class{static fadeOut(e){let t=()=>{e.dispose(),clearTimeout(o),e.getDomNode().removeEventListener("animationend",t)},o=setTimeout(t,110);return e.getDomNode().addEventListener("animationend",t),e.getDomNode().classList.add("fadeOut"),{dispose:t}}constructor(e,{lineNumber:t,column:o},r){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:o},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";let n=document.createElement("div");n.classList.add("anchor","top"),this._domNode.appendChild(n);let s=document.createElement("div");typeof r=="string"?(s.classList.add("message"),s.textContent=r):(r.classList.add("message"),s.appendChild(r)),this._domNode.appendChild(s);let a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(e){this._domNode.classList.toggle("below",e===2)}};le(fi.ID,fi,4);re();Me();Je();ze();Wl();bt();Di();re();function hx(i,e){return e&&(i.stack||i.stacktrace)?b("stackTrace.format","{0}: {1}",eM(i),ZN(i.stack)||ZN(i.stacktrace)):eM(i)}function ZN(i){return Array.isArray(i)?i.join(`
`):i}function eM(i){return i.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${i.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof i.code=="string"&&typeof i.errno=="number"&&typeof i.syscall=="string"?b("nodeExceptionMessage","A system error occurred ({0})",i.message):i.message||b("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function $d(i=null,e=!1){if(!i)return b("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(i)){let t=Qi(i),o=$d(t[0],e);return t.length>1?b("error.moreErrors","{0} ({1} errors in total)",o,t.length):o}if(Qg(i))return i;if(i.detail){let t=i.detail;if(t.error)return hx(t.error,e);if(t.exception)return hx(t.exception,e)}return i.stack?hx(i,e):i.message?i.message:b("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}Ze();nt();X();re();Me();Je();var tM=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Gd=function(i,e){return function(t,o){e(t,o,i)}},px,z_=px=class extends B{constructor(e,t,o,r,n,s,a,c,h,p){super(),this.typeId=e,this.editor=t,this.showCommand=r,this.range=n,this.edits=s,this.onSelectNewEdit=a,this._contextMenuService=c,this._keybindingService=p,this.allowEditorOverflow=!0,this.suppressMouseDown=!0,this.create(),this.visibleContext=o.bindTo(h),this.visibleContext.set(!0),this._register(Ve(()=>this.visibleContext.reset())),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this),this._register(Ve(()=>this.editor.removeContentWidget(this))),this._register(this.editor.onDidChangeCursorPosition(g=>{n.containsPosition(g.position)||this.dispose()})),this._register(ft.runAndSubscribe(p.onDidUpdateKeybindings,()=>{this._updateButtonTitle()}))}_updateButtonTitle(){var e;let t=(e=this._keybindingService.lookupKeybinding(this.showCommand.id))===null||e===void 0?void 0:e.getLabel();this.button.element.title=this.showCommand.label+(t?` (${t})`:"")}create(){this.domNode=te(".post-edit-widget"),this.button=this._register(new XL(this.domNode,{supportIcons:!0})),this.button.label="$(insert)",this._register(Ne(this.domNode,at.CLICK,()=>this.showSelector()))}getId(){return px.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:this.range.getEndPosition(),preference:[2]}}showSelector(){this._contextMenuService.showContextMenu({getAnchor:()=>{let e=$t(this.button.element);return{x:e.left+e.width,y:e.top+e.height}},getActions:()=>this.edits.allEdits.map((e,t)=>Mk({id:"",label:e.title,checked:t===this.edits.activeEditIndex,run:()=>{if(t!==this.edits.activeEditIndex)return this.onSelectNewEdit(t)}}))})}};z_.baseId="editor.widget.postEditWidget";z_=px=tM([Gd(7,_r),Gd(8,ve),Gd(9,qe)],z_);var Jd=class extends B{constructor(e,t,o,r,n,s,a){super(),this._id=e,this._editor=t,this._visibleContext=o,this._showCommand=r,this._instantiationService=n,this._bulkEditService=s,this._notificationService=a,this._currentWidget=this._register(new Ut),this._register(ft.any(t.onDidChangeModel,t.onDidChangeModelContent)(()=>this.clear()))}async applyEditAndShowIfNeeded(e,t,o,r,n){let s=this._editor.getModel();if(!s||!e.length)return;let a=t.allEdits.at(t.activeEditIndex);if(!a)return;let c=async x=>{let D=this._editor.getModel();D&&(await D.undo(),this.applyEditAndShowIfNeeded(e,{activeEditIndex:x,allEdits:t.allEdits},o,r,n))},h=(x,D)=>{Ro(x)||(this._notificationService.error(D),o&&this.show(e[0],t,c))},p;try{p=await r(a,n)}catch(x){return h(x,b("resolveError",`Error resolving edit '{0}':
{1}`,a.title,$d(x)))}if(n.isCancellationRequested)return;let g=R_(s.uri,e,p),f=e[0],_=s.deltaDecorations([],[{range:f,options:{description:"paste-line-suffix",stickiness:0}}]);this._editor.focus();let y,C;try{y=await this._bulkEditService.apply(g,{editor:this._editor,token:n}),C=s.getDecorationRange(_[0])}catch(x){return h(x,b("applyError",`Error applying edit '{0}':
{1}`,a.title,$d(x)))}finally{s.deltaDecorations(_,[])}n.isCancellationRequested||o&&y.isApplied&&t.allEdits.length>1&&this.show(C??f,t,c)}show(e,t,o){this.clear(),this._editor.hasModel()&&(this._currentWidget.value=this._instantiationService.createInstance(z_,this._id,this._editor,this._visibleContext,this._showCommand,e,t,o))}clear(){this._currentWidget.clear()}tryShowSelector(){var e;(e=this._currentWidget.value)===null||e===void 0||e.showSelector()}};Jd=tM([Gd(4,ce),Gd(5,La),Gd(6,Pt)],Jd);var UH=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Xd=function(i,e){return function(t,o){e(t,o,i)}},ic,gx="editor.changePasteType",V_=new Ee("pasteWidgetVisible",!1,b("pasteWidgetVisible","Whether the paste widget is showing")),mx="application/vnd.code.copyMetadata",Dr=ic=class extends B{static get(e){return e.getContribution(ic.ID)}constructor(e,t,o,r,n,s,a){super(),this._bulkEditService=o,this._clipboardService=r,this._languageFeaturesService=n,this._quickInputService=s,this._progressService=a,this._editor=e;let c=e.getContainerDomNode();this._register(Ne(c,"copy",h=>this.handleCopy(h))),this._register(Ne(c,"cut",h=>this.handleCopy(h))),this._register(Ne(c,"paste",h=>this.handlePaste(h),!0)),this._pasteProgressManager=this._register(new Kd("pasteIntoEditor",e,t)),this._postPasteWidgetManager=this._register(t.createInstance(Jd,"pasteIntoEditor",e,V_,{id:gx,label:b("postPasteWidgetTitle","Show paste options...")}))}changePasteType(){this._postPasteWidgetManager.tryShowSelector()}pasteAs(e){this._editor.focus();try{this._pasteAsActionContext={preferred:e},qh().execCommand("paste")}finally{this._pasteAsActionContext=void 0}}clearWidgets(){this._postPasteWidgetManager.clear()}isPasteAsEnabled(){return this._editor.getOption(85).enabled&&!this._editor.getOption(91)}async finishedPaste(){await this._currentPasteOperation}handleCopy(e){var t,o;if(!this._editor.hasTextFocus()||(ef&&this._clipboardService.writeResources([]),!e.clipboardData||!this.isPasteAsEnabled()))return;let r=this._editor.getModel(),n=this._editor.getSelections();if(!r||!n?.length)return;let s=this._editor.getOption(37),a=n,c=n.length===1&&n[0].isEmpty();if(c){if(!s)return;a=[new T(a[0].startLineNumber,1,a[0].startLineNumber,1+r.getLineLength(a[0].startLineNumber))]}let h=(t=this._editor._getViewModel())===null||t===void 0?void 0:t.getPlainTextToCopy(n,s,Da),g={multicursorText:Array.isArray(h)?h:null,pasteOnNewLine:c,mode:null},f=this._languageFeaturesService.documentPasteEditProvider.ordered(r).filter(D=>!!D.prepareDocumentPaste);if(!f.length){this.setCopyMetadata(e.clipboardData,{defaultPastePayload:g});return}let _=lx(e.clipboardData),y=f.flatMap(D=>{var E;return(E=D.copyMimeTypes)!==null&&E!==void 0?E:[]}),C=Ra();this.setCopyMetadata(e.clipboardData,{id:C,providerCopyMimeTypes:y,defaultPastePayload:g});let x=mt(async D=>{let E=Qi(await Promise.all(f.map(async I=>{try{return await I.prepareDocumentPaste(r,a,_,D)}catch(k){console.error(k);return}})));E.reverse();for(let I of E)for(let[k,N]of I)_.replace(k,N);return _});(o=ic._currentCopyOperation)===null||o===void 0||o.dataTransferPromise.cancel(),ic._currentCopyOperation={handle:C,dataTransferPromise:x}}async handlePaste(e){var t,o,r,n;if(!e.clipboardData||!this._editor.hasTextFocus())return;(t=fi.get(this._editor))===null||t===void 0||t.closeMessage(),(o=this._currentPasteOperation)===null||o===void 0||o.cancel(),this._currentPasteOperation=void 0;let s=this._editor.getModel(),a=this._editor.getSelections();if(!a?.length||!s||!this.isPasteAsEnabled()&&!this._pasteAsActionContext)return;let c=this.fetchCopyMetadata(e),h=k_(e.clipboardData);h.delete(mx);let p=[...e.clipboardData.types,...(r=c?.providerCopyMimeTypes)!==null&&r!==void 0?r:[],si.uriList],g=this._languageFeaturesService.documentPasteEditProvider.ordered(s).filter(f=>{var _,y;let C=(_=this._pasteAsActionContext)===null||_===void 0?void 0:_.preferred;return C&&f.providedPasteEditKinds&&!this.providerMatchesPreference(f,C)?!1:(y=f.pasteMimeTypes)===null||y===void 0?void 0:y.some(x=>P_(x,p))});if(!g.length){!((n=this._pasteAsActionContext)===null||n===void 0)&&n.preferred&&this.showPasteAsNoEditMessage(a,this._pasteAsActionContext.preferred);return}e.preventDefault(),e.stopImmediatePropagation(),this._pasteAsActionContext?this.showPasteAsPick(this._pasteAsActionContext.preferred,g,a,h,c):this.doPasteInline(g,a,h,c,e)}showPasteAsNoEditMessage(e,t){var o;(o=fi.get(this._editor))===null||o===void 0||o.showMessage(b("pasteAsError","No paste edits for '{0}' found",t instanceof Ke?t.value:t.providerId),e[0].getStartPosition())}doPasteInline(e,t,o,r,n){let s=mt(async a=>{let c=this._editor;if(!c.hasModel())return;let h=c.getModel(),p=new In(c,3,void 0,a);try{if(await this.mergeInDataFromCopy(o,r,p.token),p.token.isCancellationRequested)return;let g=e.filter(y=>this.isSupportedPasteProvider(y,o));if(!g.length||g.length===1&&g[0]instanceof qr)return this.applyDefaultPasteHandler(o,r,p.token,n);let f={triggerKind:Wh.Automatic},_=await this.getPasteEdits(g,o,h,t,f,p.token);if(p.token.isCancellationRequested)return;if(_.length===1&&_[0].provider instanceof qr)return this.applyDefaultPasteHandler(o,r,p.token,n);if(_.length){let y=c.getOption(85).showPasteSelector==="afterPaste";return this._postPasteWidgetManager.applyEditAndShowIfNeeded(t,{activeEditIndex:0,allEdits:_},y,async(C,x)=>{var D,E;let I=await((E=(D=C.provider).resolveDocumentPasteEdit)===null||E===void 0?void 0:E.call(D,C,x));return I&&(C.additionalEdit=I.additionalEdit),C},p.token)}await this.applyDefaultPasteHandler(o,r,p.token,n)}finally{p.dispose(),this._currentPasteOperation===s&&(this._currentPasteOperation=void 0)}});this._pasteProgressManager.showWhile(t[0].getEndPosition(),b("pasteIntoEditorProgress","Running paste handlers. Click to cancel"),s),this._currentPasteOperation=s}showPasteAsPick(e,t,o,r,n){let s=mt(async a=>{let c=this._editor;if(!c.hasModel())return;let h=c.getModel(),p=new In(c,3,void 0,a);try{if(await this.mergeInDataFromCopy(r,n,p.token),p.token.isCancellationRequested)return;let g=t.filter(x=>this.isSupportedPasteProvider(x,r,e));e&&(g=g.filter(x=>this.providerMatchesPreference(x,e)));let f={triggerKind:Wh.PasteAs,only:e&&e instanceof Ke?e:void 0},_=await this.getPasteEdits(g,r,h,o,f,p.token);if(p.token.isCancellationRequested)return;if(e&&(_=_.filter(x=>e instanceof Ke?e.contains(x.kind):e.providerId===x.provider.id)),!_.length){f.only&&this.showPasteAsNoEditMessage(o,f.only);return}let y;if(e)y=_.at(0);else{let x=await this._quickInputService.pick(_.map(D=>{var E;return{label:D.title,description:(E=D.kind)===null||E===void 0?void 0:E.value,edit:D}}),{placeHolder:b("pasteAsPickerPlaceholder","Select Paste Action")});y=x?.edit}if(!y)return;let C=R_(h.uri,o,y);await this._bulkEditService.apply(C,{editor:this._editor})}finally{p.dispose(),this._currentPasteOperation===s&&(this._currentPasteOperation=void 0)}});this._progressService.withProgress({location:10,title:b("pasteAsProgress","Running paste handlers")},()=>s)}setCopyMetadata(e,t){e.setData(mx,JSON.stringify(t))}fetchCopyMetadata(e){var t;if(!e.clipboardData)return;let o=e.clipboardData.getData(mx);if(o)try{return JSON.parse(o)}catch{return}let[r,n]=LF.getTextData(e.clipboardData);if(n)return{defaultPastePayload:{mode:n.mode,multicursorText:(t=n.multicursorText)!==null&&t!==void 0?t:null,pasteOnNewLine:!!n.isFromEmptySelection}}}async mergeInDataFromCopy(e,t,o){var r;if(t?.id&&((r=ic._currentCopyOperation)===null||r===void 0?void 0:r.handle)===t.id){let n=await ic._currentCopyOperation.dataTransferPromise;if(o.isCancellationRequested)return;for(let[s,a]of n)e.replace(s,a)}if(!e.has(si.uriList)){let n=await this._clipboardService.readResources();if(o.isCancellationRequested)return;n.length&&e.append(si.uriList,Sp(ec.create(n)))}}async getPasteEdits(e,t,o,r,n,s){let a=await pn(Promise.all(e.map(async h=>{var p,g;try{let f=await((p=h.provideDocumentPasteEdits)===null||p===void 0?void 0:p.call(h,o,r,t,n,s));return(g=f?.edits)===null||g===void 0?void 0:g.map(_=>he(U({},_),{provider:h}))}catch(f){console.error(f)}})),s),c=Qi(a??[]).flat().filter(h=>!n.only||n.only.contains(h.kind));return B_(c)}async applyDefaultPasteHandler(e,t,o,r){var n,s,a,c;let h=(n=e.get(si.text))!==null&&n!==void 0?n:e.get("text"),p=(s=await h?.asString())!==null&&s!==void 0?s:"";if(o.isCancellationRequested)return;let g={clipboardEvent:r,text:p,pasteOnNewLine:(a=t?.defaultPastePayload.pasteOnNewLine)!==null&&a!==void 0?a:!1,multicursorText:(c=t?.defaultPastePayload.multicursorText)!==null&&c!==void 0?c:null,mode:null};this._editor.trigger("keyboard","paste",g)}isSupportedPasteProvider(e,t,o){var r;return!((r=e.pasteMimeTypes)===null||r===void 0)&&r.some(n=>t.matches(n))?!o||this.providerMatchesPreference(e,o):!1}providerMatchesPreference(e,t){return t instanceof Ke?e.providedPasteEditKinds?e.providedPasteEditKinds.some(o=>t.contains(o)):!0:e.id===t.providerId}};Dr.ID="editor.contrib.copyPasteActionController";Dr=ic=UH([Xd(1,ce),Xd(2,La),Xd(3,Vr),Xd(4,J),Xd(5,qi),Xd(6,xL)],Dr);re();Wt();Me();var oc="9_cutcopypaste",qH=Ca||document.queryCommandSupported("cut"),iM=Ca||document.queryCommandSupported("copy"),KH=typeof navigator.clipboard>"u"||fk?document.queryCommandSupported("paste"):!0;function yx(i){return i.register(),i}var $H=qH?yx(new ff({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:Ca?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:Q.MenubarEditMenu,group:"2_ccp",title:b({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:Q.EditorContext,group:oc,title:b("actions.clipboard.cutLabel","Cut"),when:A.writable,order:1},{menuId:Q.CommandPalette,group:"",title:b("actions.clipboard.cutLabel","Cut"),order:1},{menuId:Q.SimpleEditorContext,group:oc,title:b("actions.clipboard.cutLabel","Cut"),when:A.writable,order:1}]})):void 0,GH=iM?yx(new ff({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:Ca?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:Q.MenubarEditMenu,group:"2_ccp",title:b({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:Q.EditorContext,group:oc,title:b("actions.clipboard.copyLabel","Copy"),order:2},{menuId:Q.CommandPalette,group:"",title:b("actions.clipboard.copyLabel","Copy"),order:1},{menuId:Q.SimpleEditorContext,group:oc,title:b("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;io.appendMenuItem(Q.MenubarEditMenu,{submenu:Q.MenubarCopy,title:pe("copy as","Copy As"),group:"2_ccp",order:3});io.appendMenuItem(Q.EditorContext,{submenu:Q.EditorContextCopy,title:pe("copy as","Copy As"),group:oc,order:3});io.appendMenuItem(Q.EditorContext,{submenu:Q.EditorContextShare,title:pe("share","Share"),group:"11_share",order:-1,when:W.and(W.notEquals("resourceScheme","output"),A.editorTextFocus)});io.appendMenuItem(Q.ExplorerContext,{submenu:Q.ExplorerContextShare,title:pe("share","Share"),group:"11_share",order:-1});var fx=KH?yx(new ff({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:Ca?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:Q.MenubarEditMenu,group:"2_ccp",title:b({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:Q.EditorContext,group:oc,title:b("actions.clipboard.pasteLabel","Paste"),when:A.writable,order:4},{menuId:Q.CommandPalette,group:"",title:b("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:Q.SimpleEditorContext,group:oc,title:b("actions.clipboard.pasteLabel","Paste"),when:A.writable,order:4}]})):void 0,_x=class extends j{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:b("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:A.textInputFocus,primary:0,weight:100}})}run(e,t){!t.hasModel()||!t.getOption(37)&&t.getSelection().isEmpty()||(c0.forceCopyWithSyntaxHighlighting=!0,t.focus(),t.getContainerDomNode().ownerDocument.execCommand("copy"),c0.forceCopyWithSyntaxHighlighting=!1)}};function oM(i,e){i&&(i.addImplementation(1e4,"code-editor",(t,o)=>{let r=t.get(tt).getFocusedCodeEditor();if(r&&r.hasTextFocus()){let n=r.getOption(37),s=r.getSelection();return s&&s.isEmpty()&&!n||r.getContainerDomNode().ownerDocument.execCommand(e),!0}return!1}),i.addImplementation(0,"generic-dom",(t,o)=>(qh().execCommand(e),!0)))}oM($H,"cut");oM(GH,"copy");fx&&(fx.addImplementation(1e4,"code-editor",(i,e)=>{var t,o;let r=i.get(tt),n=i.get(Vr),s=r.getFocusedCodeEditor();return s&&s.hasTextFocus()?s.getContainerDomNode().ownerDocument.execCommand("paste")?(o=(t=Dr.get(s))===null||t===void 0?void 0:t.finishedPaste())!==null&&o!==void 0?o:Promise.resolve():ef?(async()=>{let c=await n.readText();if(c!==""){let h=FF.INSTANCE.get(c),p=!1,g=null,f=null;h&&(p=s.getOption(37)&&!!h.isFromEmptySelection,g=typeof h.multicursorText<"u"?h.multicursorText:null,f=h.mode),s.trigger("keyboard","paste",{text:c,pasteOnNewLine:p,multicursorText:g,mode:f})}})():!0:!1}),fx.addImplementation(0,"generic-dom",(i,e)=>(qh().execCommand("paste"),!0)));iM&&M(_x);xe();Tt();xe();it();bt();yt();Ze();X();Ci();ge();ui();Ge();hr();Xl();re();Rt();mr();Ze();var lt=new class{constructor(){this.QuickFix=new Ke("quickfix"),this.Refactor=new Ke("refactor"),this.RefactorExtract=this.Refactor.append("extract"),this.RefactorInline=this.Refactor.append("inline"),this.RefactorMove=this.Refactor.append("move"),this.RefactorRewrite=this.Refactor.append("rewrite"),this.Notebook=new Ke("notebook"),this.Source=new Ke("source"),this.SourceOrganizeImports=this.Source.append("organizeImports"),this.SourceFixAll=this.Source.append("fixAll"),this.SurroundWith=this.Refactor.append("surround")}},Wi=function(i){return i.Refactor="refactor",i.RefactorPreview="refactor preview",i.Lightbulb="lightbulb",i.Default="other (default)",i.SourceAction="source action",i.QuickFix="quick fix action",i.FixAll="fix all",i.OrganizeImports="organize imports",i.AutoFix="auto fix",i.QuickFixHover="quick fix hover window",i.OnSave="save participants",i.ProblemsView="problems view",i}(Wi||{});function rM(i,e){return!(i.include&&!i.include.intersects(e)||i.excludes&&i.excludes.some(t=>sM(e,t,i.include))||!i.includeSourceActions&&lt.Source.contains(e))}function nM(i,e){let t=e.kind?new Ke(e.kind):void 0;return!(i.include&&(!t||!i.include.contains(t))||i.excludes&&t&&i.excludes.some(o=>sM(t,o,i.include))||!i.includeSourceActions&&t&&lt.Source.contains(t)||i.onlyIncludePreferredActions&&!e.isPreferred)}function sM(i,e,t){return!(!e.contains(i)||t&&e.contains(t))}var Ha=class i{static fromUser(e,t){return!e||typeof e!="object"?new i(t.kind,t.apply,!1):new i(i.getKindFromUser(e,t.kind),i.getApplyFromUser(e,t.apply),i.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new Ke(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}constructor(e,t,o){this.kind=e,this.apply=t,this.preferred=o}},U_=class{constructor(e,t,o){this.action=e,this.provider=t,this.highlightRange=o}async resolve(e){var t;if(!((t=this.provider)===null||t===void 0)&&t.resolveCodeAction&&!this.action.edit){let o;try{o=await this.provider.resolveCodeAction(this.action,e)}catch(r){$e(r)}o&&(this.action.edit=o.edit)}return this}};var q_="editor.action.codeAction",Yd="editor.action.quickFix",K_="editor.action.autoFix",$_="editor.action.refactor",G_="editor.action.sourceAction",Tp="editor.action.organizeImports",Ip="editor.action.fixAll",vx=class i extends B{static codeActionsPreferredComparator(e,t){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:0}static codeActionsComparator({action:e},{action:t}){return e.isAI&&!t.isAI?1:!e.isAI&&t.isAI?-1:zt(e.diagnostics)?zt(t.diagnostics)?i.codeActionsPreferredComparator(e,t):-1:zt(t.diagnostics)?1:i.codeActionsPreferredComparator(e,t)}constructor(e,t,o){super(),this.documentation=t,this._register(o),this.allActions=[...e].sort(i.codeActionsComparator),this.validActions=this.allActions.filter(({action:r})=>!r.disabled)}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&lt.QuickFix.contains(new Ke(e.kind))&&!!e.isPreferred)}get hasAIFix(){return this.validActions.some(({action:e})=>!!e.isAI)}get allAIFixes(){return this.validActions.every(({action:e})=>!!e.isAI)}},aM={actions:[],documentation:void 0};async function rc(i,e,t,o,r,n){var s;let a=o.filter||{},c=he(U({},a),{excludes:[...a.excludes||[],lt.Notebook]}),h={only:(s=a.include)===null||s===void 0?void 0:s.value,trigger:o.type},p=new mN(e,n),g=o.type===2,f=JH(i,e,g?c:a),_=new H,y=f.map(async x=>{try{r.report(x);let D=await x.provideCodeActions(e,t,h,p.token);if(D&&_.add(D),p.token.isCancellationRequested)return aM;let E=(D?.actions||[]).filter(k=>k&&nM(a,k)),I=YH(x,E,a.include);return{actions:E.map(k=>new U_(k,x)),documentation:I}}catch(D){if(Ro(D))throw D;return $e(D),aM}}),C=i.onDidChange(()=>{let x=i.all(e);Yi(x,f)||p.cancel()});try{let x=await Promise.all(y),D=x.map(I=>I.actions).flat(),E=[...Qi(x.map(I=>I.documentation)),...XH(i,e,o,D)];return new vx(D,E,_)}finally{C.dispose(),p.dispose()}}function JH(i,e,t){return i.all(e).filter(o=>o.providedCodeActionKinds?o.providedCodeActionKinds.some(r=>rM(t,new Ke(r))):!0)}function*XH(i,e,t,o){var r,n,s;if(e&&o.length)for(let a of i.all(e))a._getAdditionalMenuItems&&(yield*(r=a._getAdditionalMenuItems)===null||r===void 0?void 0:r.call(a,{trigger:t.type,only:(s=(n=t.filter)===null||n===void 0?void 0:n.include)===null||s===void 0?void 0:s.value},o.map(c=>c.action)))}function YH(i,e,t){if(!i.documentation)return;let o=i.documentation.map(r=>({kind:new Ke(r.kind),command:r.command}));if(t){let r;for(let n of o)n.kind.contains(t)&&(r?r.kind.contains(n.kind)&&(r=n):r=n);if(r)return r?.command}for(let r of e)if(r.kind){for(let n of o)if(n.kind.contains(new Ke(r.kind)))return n.command}}var nc=function(i){return i.OnSave="onSave",i.FromProblemsView="fromProblemsView",i.FromCodeActions="fromCodeActions",i.FromAILightbulb="fromAILightbulb",i}(nc||{});async function lM(i,e,t,o,r=we.None){var n;let s=i.get(La),a=i.get(ht),c=i.get(Zt),h=i.get(Pt);if(c.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred,reason:t}),await e.resolve(r),!r.isCancellationRequested&&!(!((n=e.action.edit)===null||n===void 0)&&n.edits.length&&!(await s.apply(e.action.edit,{editor:o?.editor,label:e.action.title,quotableLabel:e.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:t!==nc.OnSave,showPreview:o?.preview})).isApplied)&&e.action.command)try{await a.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(p){let g=QH(p);h.error(typeof g=="string"?g:b("applyCodeActionFailed","An unknown error occurred while applying the code action"))}}function QH(i){return typeof i=="string"?i:i instanceof Error&&typeof i.message=="string"?i.message:void 0}Ue.registerCommand("_executeCodeActionProvider",async function(i,e,t,o,r){if(!(e instanceof We))throw Xo();let{codeActionProvider:n}=i.get(J),s=i.get(Ot).getModel(e);if(!s)throw Xo();let a=me.isISelection(t)?me.liftSelection(t):T.isIRange(t)?s.validateRange(t):void 0;if(!a)throw Xo();let c=typeof o=="string"?new Ke(o):void 0,h=await rc(n,s,a,{type:1,triggerAction:Wi.Default,filter:{includeSourceActions:!0,include:c}},br.None,we.None),p=[],g=Math.min(h.validActions.length,typeof r=="number"?r:0);for(let f=0;f<g;f++)p.push(h.validActions[f].resolve(we.None));try{return await Promise.all(p),h.validActions.map(f=>f.action)}finally{setTimeout(()=>h.dispose(),100)}});re();Me();ze();Ze();BC();X();pt();gi();Ge();BC();var ZH=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},ej=function(i,e){return function(t,o){e(t,o,i)}},bx,Pp=bx=class{constructor(e){this.keybindingService=e}getResolver(){let e=new gd(()=>this.keybindingService.getKeybindings().filter(t=>bx.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let o=t.commandArgs;return t.command===Tp?o={kind:lt.SourceOrganizeImports.value}:t.command===Ip&&(o={kind:lt.SourceFixAll.value}),U({resolvedKeybinding:t.resolvedKeybinding},Ha.fromUser(o,{kind:Ke.None,apply:"never"}))}));return t=>{if(t.kind){let o=this.bestKeybindingForCodeAction(t,e.value);return o?.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;let o=new Ke(e.kind);return t.filter(r=>r.kind.contains(o)).filter(r=>r.preferred?e.isPreferred:!0).reduceRight((r,n)=>r?r.kind.contains(n.kind)?n:r:n,void 0)}};Pp.codeActionCommands=[$_,q_,G_,Tp,Ip];Pp=bx=ZH([ej(0,qe)],Pp);xi();re();Ri();var Hse=ue("symbolIcon.arrayForeground",{dark:ne,light:ne,hcDark:ne,hcLight:ne},b("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),jse=ue("symbolIcon.booleanForeground",{dark:ne,light:ne,hcDark:ne,hcLight:ne},b("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),zse=ue("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},b("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Vse=ue("symbolIcon.colorForeground",{dark:ne,light:ne,hcDark:ne,hcLight:ne},b("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Use=ue("symbolIcon.constantForeground",{dark:ne,light:ne,hcDark:ne,hcLight:ne},b("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),qse=ue("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},b("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Kse=ue("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},b("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),$se=ue("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},b("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Gse=ue("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},b("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jse=ue("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},b("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Xse=ue("symbolIcon.fileForeground",{dark:ne,light:ne,hcDark:ne,hcLight:ne},b("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Yse=ue("symbolIcon.folderForeground",{dark:ne,light:ne,hcDark:ne,hcLight:ne},b("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Qse=ue("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},b("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Zse=ue("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},b("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),eae=ue("symbolIcon.keyForeground",{dark:ne,light:ne,hcDark:ne,hcLight:ne},b("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),tae=ue("symbolIcon.keywordForeground",{dark:ne,light:ne,hcDark:ne,hcLight:ne},b("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),iae=ue("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},b("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),oae=ue("symbolIcon.moduleForeground",{dark:ne,light:ne,hcDark:ne,hcLight:ne},b("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),rae=ue("symbolIcon.namespaceForeground",{dark:ne,light:ne,hcDark:ne,hcLight:ne},b("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),nae=ue("symbolIcon.nullForeground",{dark:ne,light:ne,hcDark:ne,hcLight:ne},b("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),sae=ue("symbolIcon.numberForeground",{dark:ne,light:ne,hcDark:ne,hcLight:ne},b("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),aae=ue("symbolIcon.objectForeground",{dark:ne,light:ne,hcDark:ne,hcLight:ne},b("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),lae=ue("symbolIcon.operatorForeground",{dark:ne,light:ne,hcDark:ne,hcLight:ne},b("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),cae=ue("symbolIcon.packageForeground",{dark:ne,light:ne,hcDark:ne,hcLight:ne},b("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),dae=ue("symbolIcon.propertyForeground",{dark:ne,light:ne,hcDark:ne,hcLight:ne},b("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),uae=ue("symbolIcon.referenceForeground",{dark:ne,light:ne,hcDark:ne,hcLight:ne},b("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),hae=ue("symbolIcon.snippetForeground",{dark:ne,light:ne,hcDark:ne,hcLight:ne},b("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),pae=ue("symbolIcon.stringForeground",{dark:ne,light:ne,hcDark:ne,hcLight:ne},b("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),mae=ue("symbolIcon.structForeground",{dark:ne,light:ne,hcDark:ne,hcLight:ne},b("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),gae=ue("symbolIcon.textForeground",{dark:ne,light:ne,hcDark:ne,hcLight:ne},b("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),fae=ue("symbolIcon.typeParameterForeground",{dark:ne,light:ne,hcDark:ne,hcLight:ne},b("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),_ae=ue("symbolIcon.unitForeground",{dark:ne,light:ne,hcDark:ne,hcLight:ne},b("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),yae=ue("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},b("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));re();var cM=Object.freeze({kind:Ke.Empty,title:b("codeAction.widget.id.more","More Actions...")}),tj=Object.freeze([{kind:lt.QuickFix,title:b("codeAction.widget.id.quickfix","Quick Fix")},{kind:lt.RefactorExtract,title:b("codeAction.widget.id.extract","Extract"),icon:be.wrench},{kind:lt.RefactorInline,title:b("codeAction.widget.id.inline","Inline"),icon:be.wrench},{kind:lt.RefactorRewrite,title:b("codeAction.widget.id.convert","Rewrite"),icon:be.wrench},{kind:lt.RefactorMove,title:b("codeAction.widget.id.move","Move"),icon:be.wrench},{kind:lt.SurroundWith,title:b("codeAction.widget.id.surround","Surround With"),icon:be.surroundWith},{kind:lt.Source,title:b("codeAction.widget.id.source","Source Action"),icon:be.symbolFile},cM]);function dM(i,e,t){if(!e)return i.map(n=>{var s;return{kind:"action",item:n,group:cM,disabled:!!n.action.disabled,label:n.action.disabled||n.action.title,canPreview:!!(!((s=n.action.edit)===null||s===void 0)&&s.edits.length)}});let o=tj.map(n=>({group:n,actions:[]}));for(let n of i){let s=n.action.kind?new Ke(n.action.kind):Ke.None;for(let a of o)if(a.group.kind.contains(s)){a.actions.push(n);break}}let r=[];for(let n of o)if(n.actions.length){r.push({kind:"header",group:n.group});for(let s of n.actions){let a=n.group;r.push({kind:"action",item:s,group:s.action.isAI?{title:a.title,kind:a.kind,icon:be.sparkle}:a,label:s.action.title,disabled:!!s.action.disabled,keybinding:t(s.action)})}}return r}ze();xi();nt();X();to();WF();re();Rt();var ij=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},uM=function(i,e){return function(t,o){e(t,o,i)}},Dx,Qd;(function(i){i.Hidden={type:0};class e{constructor(o,r,n,s){this.actions=o,this.trigger=r,this.editorPosition=n,this.widgetPosition=s,this.type=1}}i.Showing=e})(Qd||(Qd={}));var Fs=Dx=class extends B{constructor(e,t,o){super(),this._editor=e,this._keybindingService=t,this._onClick=this._register(new fe),this.onClick=this._onClick.event,this._state=Qd.Hidden,this._iconClasses=[],this._domNode=te("div.lightBulbWidget"),this._domNode.role="listbox",this._register(kf.ignoreTarget(this._domNode)),this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(r=>{let n=this._editor.getModel();(this.state.type!==1||!n||this.state.editorPosition.lineNumber>=n.getLineCount())&&this.hide()})),this._register(Ck(this._domNode,r=>{if(this.state.type!==1)return;this._editor.focus(),r.preventDefault();let{top:n,height:s}=$t(this._domNode),a=this._editor.getOption(67),c=Math.floor(a/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(c+=a),this._onClick.fire({x:r.posx,y:n+s+c,actions:this.state.actions,trigger:this.state.trigger})})),this._register(Ne(this._domNode,"mouseenter",r=>{(r.buttons&1)===1&&this.hide()})),this._register(ft.runAndSubscribe(this._keybindingService.onDidUpdateKeybindings,()=>{var r,n,s,a;this._preferredKbLabel=(n=(r=this._keybindingService.lookupKeybinding(K_))===null||r===void 0?void 0:r.getLabel())!==null&&n!==void 0?n:void 0,this._quickFixKbLabel=(a=(s=this._keybindingService.lookupKeybinding(Yd))===null||s===void 0?void 0:s.getLabel())!==null&&a!==void 0?a:void 0,this._updateLightBulbTitleAndIcon()}))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,o){if(e.validActions.length<=0)return this.hide();if(!this._editor.getOptions().get(65).enabled)return this.hide();let n=this._editor.getModel();if(!n)return this.hide();let{lineNumber:s,column:a}=n.validatePosition(o),c=n.getOptions().tabSize,h=this._editor.getOptions().get(50),p=n.getLineContent(s),g=np(p,c),f=h.spaceWidth*g>22,_=E=>E>2&&this._editor.getTopForLineNumber(E)===this._editor.getTopForLineNumber(E-1),y=s,C=1;if(!f){if(s>1&&!_(s-1))y-=1;else if(s<n.getLineCount()&&!_(s+1))y+=1;else if(a*h.spaceWidth<22)return this.hide();C=/^\S\s*$/.test(n.getLineContent(y))?2:1}this.state=new Qd.Showing(e,t,o,{position:{lineNumber:y,column:C},preference:Dx._posPref});let x=e.validActions,D=e.validActions[0].action.kind;if(x.length!==1||!D){this._editor.layoutContentWidget(this);return}this._editor.layoutContentWidget(this)}hide(){this.state!==Qd.Hidden&&(this.state=Qd.Hidden,this._editor.layoutContentWidget(this))}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this._domNode.classList.remove(...this._iconClasses),this._iconClasses=[],this.state.type!==1)return;let e,t=!1;this.state.actions.allAIFixes?(e=be.sparkleFilled,this.state.actions.validActions.length===1&&(t=!0)):this.state.actions.hasAutoFix?this.state.actions.hasAIFix?e=be.lightbulbSparkleAutofix:e=be.lightbulbAutofix:this.state.actions.hasAIFix?e=be.lightbulbSparkle:e=be.lightBulb,this._updateLightbulbTitle(this.state.actions.hasAutoFix,t),this._iconClasses=je.asClassNameArray(e),this._domNode.classList.add(...this._iconClasses)}_updateLightbulbTitle(e,t){this.state.type===1&&(t?this.title=b("codeActionAutoRun","Run: {0}",this.state.actions.validActions[0].action.title):e&&this._preferredKbLabel?this.title=b("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",this._preferredKbLabel):!e&&this._quickFixKbLabel?this.title=b("codeActionWithKb","Show Code Actions ({0})",this._quickFixKbLabel):e||(this.title=b("codeAction","Show Code Actions")))}set title(e){this._domNode.title=e}};Fs.ID="editor.contrib.lightbulbWidget";Fs._posPref=[0];Fs=Dx=ij([uM(1,qe),uM(2,ht)],Fs);re();ze();X();re();ze();yt();xi();X();Zi();to();re();Ri();var hM=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Cx=function(i,e){return function(t,o){e(t,o,i)}},Ex="acceptSelectedCodeAction",Ax="previewSelectedCodeAction",xx=class{get templateId(){return"header"}renderTemplate(e){e.classList.add("group-header");let t=document.createElement("span");return e.append(t),{container:e,text:t}}renderElement(e,t,o){var r,n;o.text.textContent=(n=(r=e.group)===null||r===void 0?void 0:r.title)!==null&&n!==void 0?n:""}disposeTemplate(e){}},Sx=class{get templateId(){return"action"}constructor(e,t){this._supportsPreview=e,this._keybindingService=t}renderTemplate(e){e.classList.add(this.templateId);let t=document.createElement("div");t.className="icon",e.append(t);let o=document.createElement("span");o.className="title",e.append(o);let r=new Od(e,cd);return{container:e,icon:t,text:o,keybinding:r}}renderElement(e,t,o){var r,n,s;if(!((r=e.group)===null||r===void 0)&&r.icon?(o.icon.className=je.asClassName(e.group.icon),e.group.icon.color&&(o.icon.style.color=Cn(e.group.icon.color.id))):(o.icon.className=je.asClassName(be.lightBulb),o.icon.style.color="var(--vscode-editorLightBulb-foreground)"),!e.item||!e.label)return;o.text.textContent=pM(e.label),o.keybinding.set(e.keybinding),Fk(!!e.keybinding,o.keybinding.element);let a=(n=this._keybindingService.lookupKeybinding(Ex))===null||n===void 0?void 0:n.getLabel(),c=(s=this._keybindingService.lookupKeybinding(Ax))===null||s===void 0?void 0:s.getLabel();o.container.classList.toggle("option-disabled",e.disabled),e.disabled?o.container.title=e.label:a&&c?this._supportsPreview&&e.canPreview?o.container.title=b({key:"label-preview",comment:['placeholders are keybindings, e.g "F2 to Apply, Shift+F2 to Preview"']},"{0} to Apply, {1} to Preview",a,c):o.container.title=b({key:"label",comment:['placeholder is a keybinding, e.g "F2 to Apply"']},"{0} to Apply",a):o.container.title=""}disposeTemplate(e){e.keybinding.dispose()}};Sx=hM([Cx(1,qe)],Sx);var wx=class extends UIEvent{constructor(){super("acceptSelectedAction")}},J_=class extends UIEvent{constructor(){super("previewSelectedAction")}};function oj(i){if(i.kind==="action")return i.label}var X_=class extends B{constructor(e,t,o,r,n,s){super(),this._delegate=r,this._contextViewService=n,this._keybindingService=s,this._actionLineHeight=24,this._headerLineHeight=26,this.cts=this._register(new _t),this.domNode=document.createElement("div"),this.domNode.classList.add("actionList");let a={getHeight:c=>c.kind==="header"?this._headerLineHeight:this._actionLineHeight,getTemplateId:c=>c.kind};this._list=this._register(new Fd(e,this.domNode,a,[new Sx(t,this._keybindingService),new xx],{keyboardSupport:!1,typeNavigationEnabled:!0,keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:oj},accessibilityProvider:{getAriaLabel:c=>{if(c.kind==="action"){let h=c.label?pM(c?.label):"";return c.disabled&&(h=b({key:"customQuickFixWidget.labels",comment:["Action widget labels for accessibility."]},"{0}, Disabled Reason: {1}",h,c.disabled)),h}return null},getWidgetAriaLabel:()=>b({key:"customQuickFixWidget",comment:["An action widget option"]},"Action Widget"),getRole:c=>c.kind==="action"?"option":"separator",getWidgetRole:()=>"listbox"}})),this._list.style($L),this._register(this._list.onMouseClick(c=>this.onListClick(c))),this._register(this._list.onMouseOver(c=>this.onListHover(c))),this._register(this._list.onDidChangeFocus(()=>this.onFocus())),this._register(this._list.onDidChangeSelection(c=>this.onListSelection(c))),this._allMenuItems=o,this._list.splice(0,this._list.length,this._allMenuItems),this._list.length&&this.focusNext()}focusCondition(e){return!e.disabled&&e.kind==="action"}hide(e){this._delegate.onHide(e),this.cts.cancel(),this._contextViewService.hideContextView()}layout(e){let t=this._allMenuItems.filter(c=>c.kind==="header").length,r=this._allMenuItems.length*this._actionLineHeight+t*this._headerLineHeight-t*this._actionLineHeight;this._list.layout(r);let n=e;if(this._allMenuItems.length>=50)n=380;else{let c=this._allMenuItems.map((h,p)=>{let g=this.domNode.ownerDocument.getElementById(this._list.getElementID(p));if(g){g.style.width="auto";let f=g.getBoundingClientRect().width;return g.style.width="",f}return 0});n=Math.max(...c,e)}let a=Math.min(r,this.domNode.ownerDocument.body.clientHeight*.7);return this._list.layout(a,n),this.domNode.style.height=`${a}px`,this._list.domFocus(),n}focusPrevious(){this._list.focusPrevious(1,!0,void 0,this.focusCondition)}focusNext(){this._list.focusNext(1,!0,void 0,this.focusCondition)}acceptSelected(e){let t=this._list.getFocus();if(t.length===0)return;let o=t[0],r=this._list.element(o);if(!this.focusCondition(r))return;let n=e?new J_:new wx;this._list.setSelection([o],n)}onListSelection(e){if(!e.elements.length)return;let t=e.elements[0];t.item&&this.focusCondition(t)?this._delegate.onSelect(t.item,e.browserEvent instanceof J_):this._list.setSelection([])}onFocus(){var e,t;let o=this._list.getFocus();if(o.length===0)return;let r=o[0],n=this._list.element(r);(t=(e=this._delegate).onFocus)===null||t===void 0||t.call(e,n.item)}async onListHover(e){let t=e.element;if(t&&t.item&&this.focusCondition(t)){if(this._delegate.onHover&&!t.disabled&&t.kind==="action"){let o=await this._delegate.onHover(t.item,this.cts.token);t.canPreview=o?o.canPreview:void 0}e.index&&this._list.splice(e.index,1,[t])}this._list.setFocus(typeof e.index=="number"?[e.index]:[])}onListClick(e){e.element&&this.focusCondition(e.element)&&this._list.setFocus([])}};X_=hM([Cx(4,ka),Cx(5,qe)],X_);function pM(i){return i.replace(/\r\n|\r|\n/g," ")}Wt();Me();gs();Je();Ri();var rj=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Tx=function(i,e){return function(t,o){e(t,o,i)}};ue("actionBar.toggledBackground",{dark:_s,light:_s,hcDark:_s,hcLight:_s},b("actionBar.toggledBackground","Background color for toggled action items in action bar."));var sc={Visible:new Ee("codeActionMenuVisible",!1,b("codeActionMenuVisible","Whether the action widget list is visible"))},ja=zi("actionWidgetService"),ac=class extends B{get isVisible(){return sc.Visible.getValue(this._contextKeyService)||!1}constructor(e,t,o){super(),this._contextViewService=e,this._contextKeyService=t,this._instantiationService=o,this._list=this._register(new Ut)}show(e,t,o,r,n,s,a){let c=sc.Visible.bindTo(this._contextKeyService),h=this._instantiationService.createInstance(X_,e,t,o,r);this._contextViewService.showContextView({getAnchor:()=>n,render:p=>(c.set(!0),this._renderWidget(p,h,a??[])),onHide:p=>{c.reset(),this._onWidgetClosed(p)}},s,!1)}acceptSelected(e){var t;(t=this._list.value)===null||t===void 0||t.acceptSelected(e)}focusPrevious(){var e,t;(t=(e=this._list)===null||e===void 0?void 0:e.value)===null||t===void 0||t.focusPrevious()}focusNext(){var e,t;(t=(e=this._list)===null||e===void 0?void 0:e.value)===null||t===void 0||t.focusNext()}hide(e){var t;(t=this._list.value)===null||t===void 0||t.hide(e),this._list.clear()}_renderWidget(e,t,o){var r;let n=document.createElement("div");if(n.classList.add("action-widget"),e.appendChild(n),this._list.value=t,this._list.value)n.appendChild(this._list.value.domNode);else throw new Error("List has no value");let s=new H,a=document.createElement("div"),c=e.appendChild(a);c.classList.add("context-view-block"),s.add(Ne(c,at.MOUSE_DOWN,y=>y.stopPropagation()));let h=document.createElement("div"),p=e.appendChild(h);p.classList.add("context-view-pointerBlock"),s.add(Ne(p,at.POINTER_MOVE,()=>p.remove())),s.add(Ne(p,at.MOUSE_DOWN,()=>p.remove()));let g=0;if(o.length){let y=this._createActionBar(".action-widget-action-bar",o);y&&(n.appendChild(y.getContainer().parentElement),s.add(y),g=y.getContainer().offsetWidth)}let f=(r=this._list.value)===null||r===void 0?void 0:r.layout(g);n.style.width=`${f}px`;let _=s.add(Or(e));return s.add(_.onDidBlur(()=>this.hide(!0))),s}_createActionBar(e,t){if(!t.length)return;let o=te(e),r=new Is(o);return r.push(t,{icon:!1,label:!0}),r}_onWidgetClosed(e){var t;(t=this._list.value)===null||t===void 0||t.hide(e)}};ac=rj([Tx(0,ka),Tx(1,ve),Tx(2,ce)],ac);Ui(ja,ac,1);var kp=1100;et(class extends hi{constructor(){super({id:"hideCodeActionWidget",title:pe("hideCodeActionWidget.title","Hide action widget"),precondition:sc.Visible,keybinding:{weight:kp,primary:9,secondary:[1033]}})}run(i){i.get(ja).hide(!0)}});et(class extends hi{constructor(){super({id:"selectPrevCodeAction",title:pe("selectPrevCodeAction.title","Select previous action"),precondition:sc.Visible,keybinding:{weight:kp,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})}run(i){let e=i.get(ja);e instanceof ac&&e.focusPrevious()}});et(class extends hi{constructor(){super({id:"selectNextCodeAction",title:pe("selectNextCodeAction.title","Select next action"),precondition:sc.Visible,keybinding:{weight:kp,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})}run(i){let e=i.get(ja);e instanceof ac&&e.focusNext()}});et(class extends hi{constructor(){super({id:Ex,title:pe("acceptSelected.title","Accept selected action"),precondition:sc.Visible,keybinding:{weight:kp,primary:3,secondary:[2137]}})}run(i){let e=i.get(ja);e instanceof ac&&e.acceptSelected()}});et(class extends hi{constructor(){super({id:Ax,title:pe("previewSelected.title","Preview selected action"),precondition:sc.Visible,keybinding:{weight:kp,primary:2051}})}run(i){let e=i.get(ja);e instanceof ac&&e.acceptSelected(!0)}});Rt();ei();Me();Je();Ri();Pf();Bi();Xe();Ze();nt();X();ir();pt();ui();Me();var Px=new Ee("supportedCodeAction",""),mM="_typescript.applyFixAllCodeAction",Ix=class extends B{constructor(e,t,o,r=250){super(),this._editor=e,this._markerService=t,this._signalChange=o,this._delay=r,this._autoTriggerTimer=this._register(new mn),this._register(this._markerService.onMarkerChanged(n=>this._onMarkerChanges(n))),this._register(this._editor.onDidChangeCursorPosition(()=>this._tryAutoTrigger()))}trigger(e){let t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);this._signalChange(t?{trigger:e,selection:t}:void 0)}_onMarkerChanges(e){let t=this._editor.getModel();t&&e.some(o=>Hf(o,t.uri))&&this._tryAutoTrigger()}_tryAutoTrigger(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2,triggerAction:Wi.Default})},this._delay)}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;let t=this._editor.getSelection();if(e.type===1)return t;let o=this._editor.getOption(65).enabled;if(o!==of.Off){{if(o===of.On)return t;if(o===of.OnCode){if(!t.isEmpty())return t;let n=this._editor.getModel(),{lineNumber:s,column:a}=t.getPosition(),c=n.getLineContent(s);if(c.length===0)return;if(a===1){if(/\s/.test(c[0]))return}else if(a===n.getLineMaxColumn(s)){if(/\s/.test(c[c.length-1]))return}else if(/\s/.test(c[a-2])&&/\s/.test(c[a-1]))return}}return t}}},lc;(function(i){i.Empty={type:0};class e{constructor(o,r,n){this.trigger=o,this.position=r,this._cancellablePromise=n,this.type=1,this.actions=n.catch(s=>{if(Ro(s))return gM;throw s})}cancel(){this._cancellablePromise.cancel()}}i.Triggered=e})(lc||(lc={}));var gM=Object.freeze({allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1,hasAIFix:!1,allAIFixes:!1}),Y_=class extends B{constructor(e,t,o,r,n,s){super(),this._editor=e,this._registry=t,this._markerService=o,this._progressService=n,this._configurationService=s,this._codeActionOracle=this._register(new Ut),this._state=lc.Empty,this._onDidChangeState=this._register(new fe),this.onDidChangeState=this._onDidChangeState.event,this._disposed=!1,this._supportedCodeActions=Px.bindTo(r),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(this._registry.onDidChange(()=>this._update())),this._register(this._editor.onDidChangeConfiguration(a=>{a.hasChanged(65)&&this._update()})),this._update()}dispose(){this._disposed||(this._disposed=!0,super.dispose(),this.setState(lc.Empty,!0))}_settingEnabledNearbyQuickfixes(){var e;let t=(e=this._editor)===null||e===void 0?void 0:e.getModel();return this._configurationService?this._configurationService.getValue("editor.codeActionWidget.includeNearbyQuickFixes",{resource:t?.uri}):!1}_update(){if(this._disposed)return;this._codeActionOracle.value=void 0,this.setState(lc.Empty);let e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(91)){let t=this._registry.all(e).flatMap(o=>{var r;return(r=o.providedCodeActionKinds)!==null&&r!==void 0?r:[]});this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new Ix(this._editor,this._markerService,o=>{var r;if(!o){this.setState(lc.Empty);return}let n=o.selection.getStartPosition(),s=mt(async h=>{var p,g,f,_,y,C,x,D,E,I;if(this._settingEnabledNearbyQuickfixes()&&o.trigger.type===1&&(o.trigger.triggerAction===Wi.QuickFix||!((g=(p=o.trigger.filter)===null||p===void 0?void 0:p.include)===null||g===void 0)&&g.contains(lt.QuickFix))){let k=await rc(this._registry,e,o.selection,o.trigger,br.None,h),N=[...k.allActions];if(h.isCancellationRequested)return gM;let O=(f=k.validActions)===null||f===void 0?void 0:f.some(K=>K.action.kind?lt.QuickFix.contains(new Ke(K.action.kind)):!1),V=this._markerService.read({resource:e.uri});if(O){for(let K of k.validActions)!((y=(_=K.action.command)===null||_===void 0?void 0:_.arguments)===null||y===void 0)&&y.some($=>typeof $=="string"&&$.includes(mM))&&(K.action.diagnostics=[...V.filter($=>$.relatedInformation)]);return{validActions:k.validActions,allActions:N,documentation:k.documentation,hasAutoFix:k.hasAutoFix,hasAIFix:k.hasAIFix,allAIFixes:k.allAIFixes,dispose:()=>{k.dispose()}}}else if(!O&&V.length>0){let K=o.selection.getPosition(),$=K,ae=Number.MAX_VALUE,q=[...k.validActions];for(let Mt of V){let De=Mt.endColumn,Ht=Mt.endLineNumber,Ti=Mt.startLineNumber;if(Ht===K.lineNumber||Ti===K.lineNumber){$=new Y(Ht,De);let bo={type:o.trigger.type,triggerAction:o.trigger.triggerAction,filter:{include:!((C=o.trigger.filter)===null||C===void 0)&&C.include?(x=o.trigger.filter)===null||x===void 0?void 0:x.include:lt.QuickFix},autoApply:o.trigger.autoApply,context:{notAvailableMessage:((D=o.trigger.context)===null||D===void 0?void 0:D.notAvailableMessage)||"",position:$}},Qe=new me($.lineNumber,$.column,$.lineNumber,$.column),Yt=await rc(this._registry,e,Qe,bo,br.None,h);if(Yt.validActions.length!==0){for(let Mo of Yt.validActions)!((I=(E=Mo.action.command)===null||E===void 0?void 0:E.arguments)===null||I===void 0)&&I.some(Xi=>typeof Xi=="string"&&Xi.includes(mM))&&(Mo.action.diagnostics=[...V.filter(Xi=>Xi.relatedInformation)]);k.allActions.length===0&&N.push(...Yt.allActions),Math.abs(K.column-De)<ae?q.unshift(...Yt.validActions):q.push(...Yt.validActions)}ae=Math.abs(K.column-De)}}let ji=q.filter((Mt,De,Ht)=>Ht.findIndex(Ti=>Ti.action.title===Mt.action.title)===De);return ji.sort((Mt,De)=>Mt.action.isPreferred&&!De.action.isPreferred?-1:!Mt.action.isPreferred&&De.action.isPreferred||Mt.action.isAI&&!De.action.isAI?1:!Mt.action.isAI&&De.action.isAI?-1:0),{validActions:ji,allActions:N,documentation:k.documentation,hasAutoFix:k.hasAutoFix,hasAIFix:k.hasAIFix,allAIFixes:k.allAIFixes,dispose:()=>{k.dispose()}}}}return rc(this._registry,e,o.selection,o.trigger,br.None,h)});o.trigger.type===1&&((r=this._progressService)===null||r===void 0||r.showWhile(s,250));let a=new lc.Triggered(o.trigger,n,s),c=!1;this._state.type===1&&(c=this._state.trigger.type===1&&a.type===1&&a.trigger.type===2&&this._state.position!==a.position),c?setTimeout(()=>{this.setState(a)},500):this.setState(a)},void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:Wi.Default})}else this._supportedCodeActions.reset()}trigger(e){var t;(t=this._codeActionOracle.value)===null||t===void 0||t.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!this._disposed&&this._onDidChangeState.fire(e))}};mr();var nj=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},kn=function(i,e){return function(t,o){e(t,o,i)}},Zd,sj="quickfix-edit-highlight",$r=Zd=class extends B{static get(e){return e.getContribution(Zd.ID)}constructor(e,t,o,r,n,s,a,c,h,p,g){super(),this._commandService=a,this._configurationService=c,this._actionWidgetService=h,this._instantiationService=p,this._telemetryService=g,this._activeCodeActions=this._register(new Ut),this._showDisabled=!1,this._disposed=!1,this._editor=e,this._model=this._register(new Y_(this._editor,n.codeActionProvider,t,o,s,c)),this._register(this._model.onDidChangeState(f=>this.update(f))),this._lightBulbWidget=new gd(()=>{let f=this._editor.getContribution(Fs.ID);return f&&this._register(f.onClick(_=>this.showCodeActionsFromLightbulb(_.actions,_))),f}),this._resolver=r.createInstance(Pp),this._register(this._editor.onDidLayoutChange(()=>this._actionWidgetService.hide()))}dispose(){this._disposed=!0,super.dispose()}async showCodeActionsFromLightbulb(e,t){if(this._telemetryService.publicLog2("codeAction.showCodeActionsFromLightbulb",{codeActionListLength:e.validActions.length,codeActions:e.validActions.map(o=>o.action.title),codeActionProviders:e.validActions.map(o=>{var r,n;return(n=(r=o.provider)===null||r===void 0?void 0:r.displayName)!==null&&n!==void 0?n:""})}),e.allAIFixes&&e.validActions.length===1){let o=e.validActions[0],r=o.action.command;r&&r.id==="inlineChat.start"&&r.arguments&&r.arguments.length>=1&&(r.arguments[0]=he(U({},r.arguments[0]),{autoSend:!1})),await this._applyCodeAction(o,!1,!1,nc.FromAILightbulb);return}await this.showCodeActionList(e,t,{includeDisabledActions:!1,fromLightbulb:!0})}showCodeActions(e,t,o){return this.showCodeActionList(t,o,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(e,t,o,r){var n;if(!this._editor.hasModel())return;(n=fi.get(this._editor))===null||n===void 0||n.closeMessage();let s=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:o,autoApply:r,context:{notAvailableMessage:e,position:s}})}_trigger(e){return this._model.trigger(e)}async _applyCodeAction(e,t,o,r){try{await this._instantiationService.invokeFunction(lM,e,r,{preview:o,editor:this._editor})}finally{t&&this._trigger({type:2,triggerAction:Wi.QuickFix,filter:{}})}}async update(e){var t,o,r,n,s,a,c;if(e.type!==1){(t=this._lightBulbWidget.rawValue)===null||t===void 0||t.hide();return}let h;try{h=await e.actions}catch(p){Fe(p);return}if(!this._disposed)if((o=this._lightBulbWidget.value)===null||o===void 0||o.update(h,e.trigger,e.position),e.trigger.type===1){if(!((r=e.trigger.filter)===null||r===void 0)&&r.include){let g=this.tryGetValidActionToApply(e.trigger,h);if(g){try{(n=this._lightBulbWidget.value)===null||n===void 0||n.hide(),await this._applyCodeAction(g,!1,!1,nc.FromCodeActions)}finally{h.dispose()}return}if(e.trigger.context){let f=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,h);if(f&&f.action.disabled){(s=fi.get(this._editor))===null||s===void 0||s.showMessage(f.action.disabled,e.trigger.context.position),h.dispose();return}}}let p=!!(!((a=e.trigger.filter)===null||a===void 0)&&a.include);if(e.trigger.context&&(!h.allActions.length||!p&&!h.validActions.length)){(c=fi.get(this._editor))===null||c===void 0||c.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=h,h.dispose();return}this._activeCodeActions.value=h,this.showCodeActionList(h,this.toCoords(e.position),{includeDisabledActions:p,fromLightbulb:!1})}else this._actionWidgetService.isVisible?h.dispose():this._activeCodeActions.value=h}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:o})=>o.disabled)}tryGetValidActionToApply(e,t){if(t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}async showCodeActionList(e,t,o){let r=this._editor.createDecorationsCollection(),n=this._editor.getDomNode();if(!n)return;let s=o.includeDisabledActions&&(this._showDisabled||e.validActions.length===0)?e.allActions:e.validActions;if(!s.length)return;let a=Y.isIPosition(t)?this.toCoords(t):t,c={onSelect:async(h,p)=>{this._applyCodeAction(h,!0,!!p,o.fromLightbulb?nc.FromAILightbulb:nc.FromCodeActions),this._actionWidgetService.hide(!1),r.clear()},onHide:h=>{var p;(p=this._editor)===null||p===void 0||p.focus(),r.clear(),o.fromLightbulb&&h!==void 0&&this._telemetryService.publicLog2("codeAction.showCodeActionList.onHide",{codeActionListLength:e.validActions.length,didCancel:h,codeActions:e.validActions.map(g=>g.action.title)})},onHover:async(h,p)=>{var g;if(p.isCancellationRequested)return;let f=!1,_=h.action.kind;if(_){let y=new Ke(_);f=[lt.RefactorExtract,lt.RefactorInline,lt.RefactorRewrite,lt.RefactorMove,lt.Source].some(x=>x.contains(y))}return{canPreview:f||!!(!((g=h.action.edit)===null||g===void 0)&&g.edits.length)}},onFocus:h=>{var p,g;if(h&&h.action){let f=h.action.ranges,_=h.action.diagnostics;if(r.clear(),f&&f.length>0){let y=_&&_?.length>1?_.map(C=>({range:C,options:Zd.DECORATION})):f.map(C=>({range:C,options:Zd.DECORATION}));r.set(y)}else if(_&&_.length>0){let y=_.map(x=>({range:x,options:Zd.DECORATION}));r.set(y);let C=_[0];if(C.startLineNumber&&C.startColumn){let x=(g=(p=this._editor.getModel())===null||p===void 0?void 0:p.getWordAtPosition({lineNumber:C.startLineNumber,column:C.startColumn}))===null||g===void 0?void 0:g.word;Wr(b("editingNewSelection","Context: {0} at line {1} and column {2}.",x,C.startLineNumber,C.startColumn))}}}else r.clear()}};this._actionWidgetService.show("codeActionWidget",!0,dM(s,this._shouldShowHeaders(),this._resolver.getResolver()),c,a,n,this._getActionBarActions(e,t,o))}toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();let t=this._editor.getScrolledVisiblePosition(e),o=$t(this._editor.getDomNode()),r=o.left+t.left,n=o.top+t.top+t.height;return{x:r,y:n}}_shouldShowHeaders(){var e;let t=(e=this._editor)===null||e===void 0?void 0:e.getModel();return this._configurationService.getValue("editor.codeActionWidget.showHeaders",{resource:t?.uri})}_getActionBarActions(e,t,o){if(o.fromLightbulb)return[];let r=e.documentation.map(n=>{var s;return{id:n.id,label:n.title,tooltip:(s=n.tooltip)!==null&&s!==void 0?s:"",class:void 0,enabled:!0,run:()=>{var a;return this._commandService.executeCommand(n.id,...(a=n.arguments)!==null&&a!==void 0?a:[])}}});return o.includeDisabledActions&&e.validActions.length>0&&e.allActions.length!==e.validActions.length&&r.push(this._showDisabled?{id:"hideMoreActions",label:b("hideMoreActions","Hide Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!1,this.showCodeActionList(e,t,o))}:{id:"showMoreActions",label:b("showMoreActions","Show Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!0,this.showCodeActionList(e,t,o))}),r}};$r.ID="editor.contrib.codeActionController";$r.DECORATION=ke.register({description:"quickfix-highlight",className:sj});$r=Zd=nj([kn(1,mp),kn(2,ve),kn(3,ce),kn(4,J),kn(5,Es),kn(6,ht),kn(7,Oe),kn(8,ja),kn(9,ce),kn(10,Zt)],$r);Pa((i,e)=>{((r,n)=>{n&&e.addRule(`.monaco-editor ${r} { background-color: ${n}; }`)})(".quickfix-edit-highlight",i.getColor(mF));let o=i.getColor(wf);o&&e.addRule(`.monaco-editor .quickfix-edit-highlight { border: 1px ${ys(i.type)?"dotted":"solid"} ${o}; box-sizing: border-box; }`)});function Fp(i){return W.regex(Px.keys()[0],new RegExp("(\\s|^)"+us(i.value)+"\\b"))}var kx={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:b("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:b("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[b("args.schema.apply.first","Always apply the first returned code action."),b("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),b("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:b("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};function cc(i,e,t,o,r=Wi.Default){if(i.hasModel()){let n=$r.get(i);n?.manualTriggerAtCurrentPosition(e,r,t,o)}}var Q_=class extends j{constructor(){super({id:Yd,label:b("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:W.and(A.writable,A.hasCodeActionsProvider),kbOpts:{kbExpr:A.textInputFocus,primary:2137,weight:100}})}run(e,t){return cc(t,b("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,Wi.QuickFix)}},Z_=class extends Bt{constructor(){super({id:q_,precondition:W.and(A.writable,A.hasCodeActionsProvider),metadata:{description:"Trigger a code action",args:[{name:"args",schema:kx}]}})}runEditorCommand(e,t,o){let r=Ha.fromUser(o,{kind:Ke.Empty,apply:"ifSingle"});return cc(t,typeof o?.kind=="string"?r.preferred?b("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",o.kind):b("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",o.kind):r.preferred?b("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):b("editor.action.codeAction.noneMessage","No code actions available"),{include:r.kind,includeSourceActions:!0,onlyIncludePreferredActions:r.preferred},r.apply)}},ey=class extends j{constructor(){super({id:$_,label:b("refactor.label","Refactor..."),alias:"Refactor...",precondition:W.and(A.writable,A.hasCodeActionsProvider),kbOpts:{kbExpr:A.textInputFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:W.and(A.writable,Fp(lt.Refactor))},metadata:{description:"Refactor...",args:[{name:"args",schema:kx}]}})}run(e,t,o){let r=Ha.fromUser(o,{kind:lt.Refactor,apply:"never"});return cc(t,typeof o?.kind=="string"?r.preferred?b("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",o.kind):b("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",o.kind):r.preferred?b("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):b("editor.action.refactor.noneMessage","No refactorings available"),{include:lt.Refactor.contains(r.kind)?r.kind:Ke.None,onlyIncludePreferredActions:r.preferred},r.apply,Wi.Refactor)}},ty=class extends j{constructor(){super({id:G_,label:b("source.label","Source Action..."),alias:"Source Action...",precondition:W.and(A.writable,A.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:W.and(A.writable,Fp(lt.Source))},metadata:{description:"Source Action...",args:[{name:"args",schema:kx}]}})}run(e,t,o){let r=Ha.fromUser(o,{kind:lt.Source,apply:"never"});return cc(t,typeof o?.kind=="string"?r.preferred?b("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",o.kind):b("editor.action.source.noneMessage.kind","No source actions for '{0}' available",o.kind):r.preferred?b("editor.action.source.noneMessage.preferred","No preferred source actions available"):b("editor.action.source.noneMessage","No source actions available"),{include:lt.Source.contains(r.kind)?r.kind:Ke.None,includeSourceActions:!0,onlyIncludePreferredActions:r.preferred},r.apply,Wi.SourceAction)}},iy=class extends j{constructor(){super({id:Tp,label:b("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:W.and(A.writable,Fp(lt.SourceOrganizeImports)),kbOpts:{kbExpr:A.textInputFocus,primary:1581,weight:100}})}run(e,t){return cc(t,b("editor.action.organize.noneMessage","No organize imports action available"),{include:lt.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",Wi.OrganizeImports)}},oy=class extends j{constructor(){super({id:Ip,label:b("fixAll.label","Fix All"),alias:"Fix All",precondition:W.and(A.writable,Fp(lt.SourceFixAll))})}run(e,t){return cc(t,b("fixAll.noneMessage","No fix all action available"),{include:lt.SourceFixAll,includeSourceActions:!0},"ifSingle",Wi.FixAll)}},ry=class extends j{constructor(){super({id:K_,label:b("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:W.and(A.writable,Fp(lt.QuickFix)),kbOpts:{kbExpr:A.textInputFocus,primary:1625,mac:{primary:2649},weight:100}})}run(e,t){return cc(t,b("editor.action.autoFix.noneMessage","No auto fixes available"),{include:lt.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",Wi.AutoFix)}};re();YC();ms();le($r.ID,$r,3);le(Fs.ID,Fs,4);M(Q_);M(ey);M(ty);M(iy);M(ry);M(oy);de(new Z_);Oi.as(Hl.Configuration).registerConfiguration(he(U({},cp),{properties:{"editor.codeActionWidget.showHeaders":{type:"boolean",scope:5,description:b("showCodeActionHeaders","Enable/disable showing group headers in the Code Action menu."),default:!0}}}));Oi.as(Hl.Configuration).registerConfiguration(he(U({},cp),{properties:{"editor.codeActionWidget.includeNearbyQuickFixes":{type:"boolean",scope:5,description:b("includeNearbyQuickFixes","Enable/disable showing nearest Quick Fix within a line when not currently on a diagnostic."),default:!0}}}));Xe();Ze();X();xe();it();yt();Ze();X();Di();Ci();hr();Rt();Ge();var eu=class{constructor(){this.lenses=[],this._disposables=new H}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){this._disposables.add(e);for(let o of e.lenses)this.lenses.push({symbol:o,provider:t})}};async function Fx(i,e,t){let o=i.ordered(e),r=new Map,n=new eu,s=o.map(async(a,c)=>{r.set(a,c);try{let h=await Promise.resolve(a.provideCodeLenses(e,t));h&&n.add(h,a)}catch(h){$e(h)}});return await Promise.all(s),n.lenses=n.lenses.sort((a,c)=>a.symbol.range.startLineNumber<c.symbol.range.startLineNumber?-1:a.symbol.range.startLineNumber>c.symbol.range.startLineNumber?1:r.get(a.provider)<r.get(c.provider)?-1:r.get(a.provider)>r.get(c.provider)?1:a.symbol.range.startColumn<c.symbol.range.startColumn?-1:a.symbol.range.startColumn>c.symbol.range.startColumn?1:0),n}Ue.registerCommand("_executeCodeLensProvider",function(i,...e){let[t,o]=e;He(We.isUri(t)),He(typeof o=="number"||!o);let{codeLensProvider:r}=i.get(J),n=i.get(Ot).getModel(t);if(!n)throw Xo();let s=[],a=new H;return Fx(r,n,we.None).then(c=>{a.add(c);let h=[];for(let p of c.lenses)o==null||p.symbol.command?s.push(p.symbol):o-- >0&&p.provider.resolveCodeLens&&h.push(Promise.resolve(p.provider.resolveCodeLens(n,p.symbol,we.None)).then(g=>s.push(g||p.symbol)));return Promise.all(h)}).then(()=>s).finally(()=>{setTimeout(()=>a.dispose(),100)})});nt();Ea();ge();gs();Je();h6();ze();var aj=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},lj=function(i,e){return function(t,o){e(t,o,i)}},Nx=zi("ICodeLensCache"),ny=class{constructor(e,t){this.lineCount=e,this.data=t}},Lx=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new vn(20,.75);let t="codelens/cache";xk(nk,()=>e.remove(t,1));let o="codelens/cache2",r=e.get(o,1,"{}");this._deserialize(r),ft.once(e.onWillSaveState)(n=>{n.reason===Ld.SHUTDOWN&&e.store(o,this._serialize(),1,1)})}put(e,t){let o=t.lenses.map(s=>{var a;return{range:s.symbol.range,command:s.symbol.command&&{id:"",title:(a=s.symbol.command)===null||a===void 0?void 0:a.title}}}),r=new eu;r.add({lenses:o,dispose:()=>{}},this._fakeProvider);let n=new ny(e.getLineCount(),r);this._cache.set(e.uri.toString(),n)}get(e){let t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){let e=Object.create(null);for(let[t,o]of this._cache){let r=new Set;for(let n of o.data.lenses)r.add(n.symbol.range.startLineNumber);e[t]={lineCount:o.lineCount,lines:[...r.values()]}}return JSON.stringify(e)}_deserialize(e){try{let t=JSON.parse(e);for(let o in t){let r=t[o],n=[];for(let a of r.lines)n.push({range:new T(a,1,a,11)});let s=new eu;s.add({lenses:n,dispose(){}},this._fakeProvider),this._cache.set(o,new ny(r.lineCount,s))}}catch{}}};Lx=aj([lj(0,To)],Lx);Ui(Nx,Lx,1);ze();cL();ge();gi();var Mx=class{constructor(e,t,o){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=o,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}},cj=(()=>{class i{constructor(t,o){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=t,this._id=`codelens.widget-${i._idPool++}`,this.updatePosition(o),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration"}withCommands(t,o){this._commands.clear();let r=[],n=!1;for(let s=0;s<t.length;s++){let a=t[s];if(a&&(n=!0,a.command)){let c=lL(a.command.title.trim());if(a.command.id){let h=`c${i._idPool++}`;r.push(te("a",{id:h,title:a.command.tooltip,role:"button"},...c)),this._commands.set(h,a.command)}else r.push(te("span",{title:a.command.tooltip},...c));s+1<t.length&&r.push(te("span",void 0,"\xA0|\xA0"))}}n?(Bl(this._domNode,...r),this._isEmpty&&o&&this._domNode.classList.add("fadein"),this._isEmpty=!1):Bl(this._domNode,te("span",void 0,"no commands"))}getCommand(t){return t.parentElement===this._domNode?this._commands.get(t.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(t){let o=this._editor.getModel().getLineFirstNonWhitespaceColumn(t);this._widgetPosition={position:{lineNumber:t,column:o},preference:[1]}}getPosition(){return this._widgetPosition||null}}return i._idPool=0,i})(),tu=class{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){let t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let o=0,r=t.length;o<r;o++)this._addDecorationsCallbacks[o](t[o])}},_M=ke.register({collapseOnReplaceEdit:!0,description:"codelens"}),Lp=class{constructor(e,t,o,r,n,s){this._isDisposed=!1,this._editor=t,this._data=e,this._decorationIds=[];let a,c=[];this._data.forEach((h,p)=>{h.symbol.command&&c.push(h.symbol),o.addDecoration({range:h.symbol.range,options:_M},g=>this._decorationIds[p]=g),a?a=T.plusRange(a,h.symbol.range):a=T.lift(h.symbol.range)}),this._viewZone=new Mx(a.startLineNumber-1,n,s),this._viewZoneId=r.addZone(this._viewZone),c.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(c,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new cj(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t?.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{let o=this._editor.getModel().getDecorationRange(e),r=this._data[t].symbol;return!!(o&&T.isEmpty(r.range)===o.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((o,r)=>{t.addDecoration({range:o.symbol.range,options:_M},n=>this._decorationIds[r]=n)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){let o=e.getDecorationRange(this._decorationIds[t]);o&&(this._data[t].symbol.range=o)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){let o=e[t];if(o){let{symbol:r}=this._data[t];r.command=o.command||r.command}}}getCommand(e){var t;return(t=this._contentWidget)===null||t===void 0?void 0:t.getCommand(e)}getLineNumber(){let e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){let t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}};re();Rt();Hr();Ge();var dj=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Np=function(i,e){return function(t,o){e(t,o,i)}},iu=class{constructor(e,t,o,r,n,s){this._editor=e,this._languageFeaturesService=t,this._commandService=r,this._notificationService=n,this._codeLensCache=s,this._disposables=new H,this._localToDispose=new H,this._lenses=[],this._oldCodeLensModels=new H,this._provideCodeLensDebounce=o.for(t.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=o.for(t.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new ut(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(a=>{(a.hasChanged(50)||a.hasChanged(19)||a.hasChanged(18))&&this._updateLensStyle(),a.hasChanged(17)&&this._onModelChange()})),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(e=this._currentCodeLensModel)===null||e===void 0||e.dispose()}_getLayoutInfo(){let e=Math.max(1.3,this._editor.getOption(67)/this._editor.getOption(52)),t=this._editor.getOption(19);return(!t||t<5)&&(t=this._editor.getOption(52)*.9|0),{fontSize:t,codeLensHeight:t*e|0}}_updateLensStyle(){let{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),o=this._editor.getOption(18),r=this._editor.getOption(50),{style:n}=this._editor.getContainerDomNode();n.setProperty("--vscode-editorCodeLens-lineHeight",`${e}px`),n.setProperty("--vscode-editorCodeLens-fontSize",`${t}px`),n.setProperty("--vscode-editorCodeLens-fontFeatureSettings",r.fontFeatureSettings),o&&(n.setProperty("--vscode-editorCodeLens-fontFamily",o),n.setProperty("--vscode-editorCodeLens-fontFamilyDefault",nf.fontFamily)),this._editor.changeViewZones(s=>{for(let a of this._lenses)a.updateHeight(e,s)})}_localDispose(){var e,t,o;(e=this._getCodeLensModelPromise)===null||e===void 0||e.cancel(),this._getCodeLensModelPromise=void 0,(t=this._resolveCodeLensesPromise)===null||t===void 0||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(o=this._currentCodeLensModel)===null||o===void 0||o.dispose()}_onModelChange(){this._localDispose();let e=this._editor.getModel();if(!e||!this._editor.getOption(17)||e.isTooLargeForTokenization())return;let t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e)){t&&hs(()=>{let r=this._codeLensCache.get(e);t===r&&(this._codeLensCache.delete(e),this._onModelChange())},30*1e3,this._localToDispose);return}for(let r of this._languageFeaturesService.codeLensProvider.all(e))if(typeof r.onDidChange=="function"){let n=r.onDidChange(()=>o.schedule());this._localToDispose.add(n)}let o=new ut(()=>{var r;let n=Date.now();(r=this._getCodeLensModelPromise)===null||r===void 0||r.cancel(),this._getCodeLensModelPromise=mt(s=>Fx(this._languageFeaturesService.codeLensProvider,e,s)),this._getCodeLensModelPromise.then(s=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=s,this._codeLensCache.put(e,s);let a=this._provideCodeLensDebounce.update(e,Date.now()-n);o.delay=a,this._renderCodeLensSymbols(s),this._resolveCodeLensesInViewportSoon()},Fe)},this._provideCodeLensDebounce.get(e));this._localToDispose.add(o),this._localToDispose.add(Ve(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{var r;this._editor.changeDecorations(n=>{this._editor.changeViewZones(s=>{let a=[],c=-1;this._lenses.forEach(p=>{!p.isValid()||c===p.getLineNumber()?a.push(p):(p.update(s),c=p.getLineNumber())});let h=new tu;a.forEach(p=>{p.dispose(h,s),this._lenses.splice(this._lenses.indexOf(p),1)}),h.commit(n)})}),o.schedule(),this._resolveCodeLensesScheduler.cancel(),(r=this._resolveCodeLensesPromise)===null||r===void 0||r.cancel(),this._resolveCodeLensesPromise=void 0})),this._localToDispose.add(this._editor.onDidFocusEditorText(()=>{o.schedule()})),this._localToDispose.add(this._editor.onDidBlurEditorText(()=>{o.cancel()})),this._localToDispose.add(this._editor.onDidScrollChange(r=>{r.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(Ve(()=>{if(this._editor.getModel()){let r=Tn.capture(this._editor);this._editor.changeDecorations(n=>{this._editor.changeViewZones(s=>{this._disposeAllLenses(n,s)})}),r.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(r=>{if(r.target.type!==9)return;let n=r.target.element;if(n?.tagName==="SPAN"&&(n=n.parentElement),n?.tagName==="A")for(let s of this._lenses){let a=s.getCommand(n);if(a){this._commandService.executeCommand(a.id,...a.arguments||[]).catch(c=>this._notificationService.error(c));break}}})),o.schedule()}_disposeAllLenses(e,t){let o=new tu;for(let r of this._lenses)r.dispose(o,t);e&&o.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;let t=this._editor.getModel().getLineCount(),o=[],r;for(let a of e.lenses){let c=a.symbol.range.startLineNumber;c<1||c>t||(r&&r[r.length-1].symbol.range.startLineNumber===c?r.push(a):(r=[a],o.push(r)))}if(!o.length&&!this._lenses.length)return;let n=Tn.capture(this._editor),s=this._getLayoutInfo();this._editor.changeDecorations(a=>{this._editor.changeViewZones(c=>{let h=new tu,p=0,g=0;for(;g<o.length&&p<this._lenses.length;){let f=o[g][0].symbol.range.startLineNumber,_=this._lenses[p].getLineNumber();_<f?(this._lenses[p].dispose(h,c),this._lenses.splice(p,1)):_===f?(this._lenses[p].updateCodeLensSymbols(o[g],h),g++,p++):(this._lenses.splice(p,0,new Lp(o[g],this._editor,h,c,s.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),p++,g++)}for(;p<this._lenses.length;)this._lenses[p].dispose(h,c),this._lenses.splice(p,1);for(;g<o.length;)this._lenses.push(new Lp(o[g],this._editor,h,c,s.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),g++;h.commit(a)})}),n.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;(e=this._resolveCodeLensesPromise)===null||e===void 0||e.cancel(),this._resolveCodeLensesPromise=void 0;let t=this._editor.getModel();if(!t)return;let o=[],r=[];if(this._lenses.forEach(a=>{let c=a.computeIfNecessary(t);c&&(o.push(c),r.push(a))}),o.length===0)return;let n=Date.now(),s=mt(a=>{let c=o.map((h,p)=>{let g=new Array(h.length),f=h.map((_,y)=>!_.symbol.command&&typeof _.provider.resolveCodeLens=="function"?Promise.resolve(_.provider.resolveCodeLens(t,_.symbol,a)).then(C=>{g[y]=C},$e):(g[y]=_.symbol,Promise.resolve(void 0)));return Promise.all(f).then(()=>{!a.isCancellationRequested&&!r[p].isDisposed()&&r[p].updateCommands(g)})});return Promise.all(c)});this._resolveCodeLensesPromise=s,this._resolveCodeLensesPromise.then(()=>{let a=this._resolveCodeLensesDebounce.update(t,Date.now()-n);this._resolveCodeLensesScheduler.delay=a,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),s===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},a=>{Fe(a),s===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}async getModel(){var e;return await this._getCodeLensModelPromise,await this._resolveCodeLensesPromise,!((e=this._currentCodeLensModel)===null||e===void 0)&&e.isDisposed?void 0:this._currentCodeLensModel}};iu.ID="css.editor.codeLens";iu=dj([Np(1,J),Np(2,li),Np(3,ht),Np(4,Pt),Np(5,Nx)],iu);le(iu.ID,iu,1);M(class extends j{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:A.hasCodeLensProvider,label:b("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}async run(e,t){if(!t.hasModel())return;let o=e.get(qi),r=e.get(ht),n=e.get(Pt),s=t.getSelection().positionLineNumber,a=t.getContribution(iu.ID);if(!a)return;let c=await a.getModel();if(!c)return;let h=[];for(let f of c.lenses)f.symbol.command&&f.symbol.range.startLineNumber===s&&h.push({label:f.symbol.command.title,command:f.symbol.command});if(h.length===0)return;let p=await o.pick(h,{canPickMany:!1,placeHolder:b("placeHolder","Select a command")});if(!p)return;let g=p.command;if(c.isDisposed){let f=await a.getModel(),_=f?.lenses.find(y=>{var C;return y.symbol.range.startLineNumber===s&&((C=y.symbol.command)===null||C===void 0?void 0:C.title)===g.title});if(!_||!_.symbol.command)return;g=_.symbol.command}try{await r.executeCommand(g.id,...g.arguments||[])}catch(f){n.error(f)}}});X();xe();ge();Xe();Dn();Ze();nt();X();Lr();Tt();xe();ge();gi();Hr();Ge();yt();Ze();Ci();ge();hr();Rt();Ge();Dn();hr();Ii();X();Ge();var uj=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Ox=function(i,e){return function(t,o){e(t,o,i)}},dc=class{constructor(e,t){this._editorWorkerClient=new Qk(e,!1,"editorWorkerService",t)}async provideDocumentColors(e,t){return this._editorWorkerClient.computeDefaultDocumentColors(e.uri)}provideColorPresentations(e,t,o){let r=t.range,n=t.color,s=n.alpha,a=new Re(new Br(Math.round(255*n.red),Math.round(255*n.green),Math.round(255*n.blue),s)),c=s?Re.Format.CSS.formatRGB(a):Re.Format.CSS.formatRGBA(a),h=s?Re.Format.CSS.formatHSL(a):Re.Format.CSS.formatHSLA(a),p=s?Re.Format.CSS.formatHex(a):Re.Format.CSS.formatHexA(a),g=[];return g.push({label:c,textEdit:{range:r,text:c}}),g.push({label:h,textEdit:{range:r,text:h}}),g.push({label:p,textEdit:{range:r,text:p}}),g}},Rx=class extends B{constructor(e,t,o){super(),this._register(o.colorProvider.register("*",new dc(e,t)))}};Rx=uj([Ox(0,Ot),Ox(1,Ye),Ox(2,J)],Rx);An(Rx);ei();async function sy(i,e,t,o=!0){return zx(new Bx,i,e,t,o)}function jx(i,e,t,o){return Promise.resolve(t.provideColorPresentations(i,e,o))}var Bx=class{constructor(){}async compute(e,t,o,r){let n=await e.provideDocumentColors(t,o);if(Array.isArray(n))for(let s of n)r.push({colorInfo:s,provider:e});return Array.isArray(n)}},Wx=class{constructor(){}async compute(e,t,o,r){let n=await e.provideDocumentColors(t,o);if(Array.isArray(n))for(let s of n)r.push({range:s.range,color:[s.color.red,s.color.green,s.color.blue,s.color.alpha]});return Array.isArray(n)}},Hx=class{constructor(e){this.colorInfo=e}async compute(e,t,o,r){let n=await e.provideColorPresentations(t,this.colorInfo,we.None);return Array.isArray(n)&&r.push(...n),Array.isArray(n)}};async function zx(i,e,t,o,r){let n=!1,s,a=[],c=e.ordered(t);for(let h=c.length-1;h>=0;h--){let p=c[h];if(p instanceof dc)s=p;else try{await i.compute(p,t,o,a)&&(n=!0)}catch(g){$e(g)}}return n?a:s&&r?(await i.compute(s,t,o,a),a):[]}function yM(i,e){let{colorProvider:t}=i.get(J),o=i.get(Ot).getModel(e);if(!o)throw Xo();let r=i.get(Oe).getValue("editor.defaultColorDecorators",{resource:e});return{model:o,colorProviderRegistry:t,isDefaultColorDecoratorsEnabled:r}}Ue.registerCommand("_executeDocumentColorProvider",function(i,...e){let[t]=e;if(!(t instanceof We))throw Xo();let{model:o,colorProviderRegistry:r,isDefaultColorDecoratorsEnabled:n}=yM(i,t);return zx(new Wx,r,o,we.None,n)});Ue.registerCommand("_executeColorPresentationProvider",function(i,...e){let[t,o]=e,{uri:r,range:n}=o;if(!(r instanceof We)||!Array.isArray(t)||t.length!==4||!T.isIRange(n))throw Xo();let{model:s,colorProviderRegistry:a,isDefaultColorDecoratorsEnabled:c}=yM(i,r),[h,p,g,f]=t;return zx(new Hx({range:n,color:{red:h,green:p,blue:g,alpha:f}}),a,s,we.None,c)});ei();var hj=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Vx=function(i,e){return function(t,o){e(t,o,i)}},Ux,Kx=Object.create({}),Ls=Ux=class extends B{constructor(e,t,o,r){super(),this._editor=e,this._configurationService=t,this._languageFeaturesService=o,this._localToDispose=this._register(new H),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new If(this._editor),this._decoratorLimitReporter=new qx,this._colorDecorationClassRefs=this._register(new H),this._debounceInformation=r.for(o.colorProvider,"Document Colors",{min:Ux.RECOMPUTE_TIME}),this._register(e.onDidChangeModel(()=>{this._isColorDecoratorsEnabled=this.isEnabled(),this.updateColors()})),this._register(e.onDidChangeModelLanguage(()=>this.updateColors())),this._register(o.colorProvider.onDidChange(()=>this.updateColors())),this._register(e.onDidChangeConfiguration(n=>{let s=this._isColorDecoratorsEnabled;this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(147);let a=s!==this._isColorDecoratorsEnabled||n.hasChanged(21),c=n.hasChanged(147);(a||c)&&(this._isColorDecoratorsEnabled?this.updateColors():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(147),this.updateColors()}isEnabled(){let e=this._editor.getModel();if(!e)return!1;let t=e.getLanguageId(),o=this._configurationService.getValue(t);if(o&&typeof o=="object"){let r=o.colorDecorators;if(r&&r.enable!==void 0&&!r.enable)return r.enable}return this._editor.getOption(20)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}updateColors(){if(this.stop(),!this._isColorDecoratorsEnabled)return;let e=this._editor.getModel();!e||!this._languageFeaturesService.colorProvider.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new mn,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},this._debounceInformation.get(e)))})),this.beginCompute())}async beginCompute(){this._computePromise=mt(async e=>{let t=this._editor.getModel();if(!t)return[];let o=new qt(!1),r=await sy(this._languageFeaturesService.colorProvider,t,e,this._isDefaultColorDecoratorsEnabled);return this._debounceInformation.update(t,o.elapsed()),r});try{let e=await this._computePromise;this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null}catch(e){Fe(e)}}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){let t=e.map(o=>({range:{startLineNumber:o.colorInfo.range.startLineNumber,startColumn:o.colorInfo.range.startColumn,endLineNumber:o.colorInfo.range.endLineNumber,endColumn:o.colorInfo.range.endColumn},options:ke.EMPTY}));this._editor.changeDecorations(o=>{this._decorationsIds=o.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((r,n)=>this._colorDatas.set(r,e[n]))})}updateColorDecorators(e){this._colorDecorationClassRefs.clear();let t=[],o=this._editor.getOption(21);for(let n=0;n<e.length&&t.length<o;n++){let{red:s,green:a,blue:c,alpha:h}=e[n].colorInfo.color,p=new Br(Math.round(s*255),Math.round(a*255),Math.round(c*255),h),g=`rgba(${p.r}, ${p.g}, ${p.b}, ${p.a})`,f=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:g}));t.push({range:{startLineNumber:e[n].colorInfo.range.startLineNumber,startColumn:e[n].colorInfo.range.startColumn,endLineNumber:e[n].colorInfo.range.endLineNumber,endColumn:e[n].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:df,inlineClassName:`${f.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:Kx}}})}let r=o<e.length?o:!1;this._decoratorLimitReporter.update(e.length,r),this._colorDecoratorIds.set(t)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(e){let t=this._editor.getModel();if(!t)return null;let o=t.getDecorationsInRange(T.fromPositions(e,e)).filter(r=>this._colorDatas.has(r.id));return o.length===0?null:this._colorDatas.get(o[0].id)}isColorDecoration(e){return this._colorDecoratorIds.has(e)}};Ls.ID="editor.contrib.colorDetector";Ls.RECOMPUTE_TIME=1e3;Ls=Ux=hj([Vx(1,Oe),Vx(2,J),Vx(3,li)],Ls);var qx=class{constructor(){this._onDidChange=new fe,this._computed=0,this._limited=!1}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}};le(Ls.ID,Ls,1);Xe();yt();Dn();X();ge();nt();var ay=class{get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}constructor(e,t,o){this.presentationIndex=o,this._onColorFlushed=new fe,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new fe,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new fe,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){let o=-1;for(let r=0;r<this.colorPresentations.length;r++)if(t.toLowerCase()===this.colorPresentations[r].label){o=r;break}if(o===-1){let r=t.split("(")[0].toLowerCase();for(let n=0;n<this.colorPresentations.length;n++)if(this.colorPresentations[n].label.toLowerCase().startsWith(r)){o=n;break}}o!==-1&&o!==this.presentationIndex&&(this.presentationIndex=o,this._onDidChangePresentation.fire(this.presentation))}flushColor(){this._onColorFlushed.fire(this._color)}};ze();xi();Dn();nt();X();to();re();Ri();var Wo=te,$x=class extends B{constructor(e,t,o,r=!1){super(),this.model=t,this.showingStandaloneColorPicker=r,this._closeButton=null,this._domNode=Wo(".colorpicker-header"),Z(e,this._domNode),this._pickedColorNode=Z(this._domNode,Wo(".picked-color")),Z(this._pickedColorNode,Wo("span.codicon.codicon-color-mode")),this._pickedColorPresentation=Z(this._pickedColorNode,document.createElement("span")),this._pickedColorPresentation.classList.add("picked-color-presentation");let n=b("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this._pickedColorNode.setAttribute("title",n),this._originalColorNode=Z(this._domNode,Wo(".original-color")),this._originalColorNode.style.backgroundColor=Re.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=o.getColorTheme().getColor(n0)||Re.white,this._register(o.onDidColorThemeChange(s=>{this.backgroundColor=s.getColor(n0)||Re.white})),this._register(Ne(this._pickedColorNode,at.CLICK,()=>this.model.selectNextColorPresentation())),this._register(Ne(this._originalColorNode,at.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this._pickedColorNode.style.backgroundColor=Re.Format.CSS.format(t.color)||"",this._pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color),this.showingStandaloneColorPicker&&(this._domNode.classList.add("standalone-colorpicker"),this._closeButton=this._register(new Gx(this._domNode)))}get closeButton(){return this._closeButton}get pickedColorNode(){return this._pickedColorNode}get originalColorNode(){return this._originalColorNode}onDidChangeColor(e){this._pickedColorNode.style.backgroundColor=Re.Format.CSS.format(e)||"",this._pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this._pickedColorPresentation.textContent=this.model.presentation?this.model.presentation.label:""}},Gx=class extends B{constructor(e){super(),this._onClicked=this._register(new fe),this.onClicked=this._onClicked.event,this._button=document.createElement("div"),this._button.classList.add("close-button"),Z(e,this._button);let t=document.createElement("div");t.classList.add("close-button-inner-div"),Z(this._button,t),Z(t,Wo(".button"+je.asCSSSelector(kt("color-picker-close",be.close,b("closeIcon","Icon to close the color picker"))))).classList.add("close-icon"),this._register(Ne(this._button,at.CLICK,()=>{this._onClicked.fire()}))}},Jx=class extends B{constructor(e,t,o,r=!1){super(),this.model=t,this.pixelRatio=o,this._insertButton=null,this._domNode=Wo(".colorpicker-body"),Z(e,this._domNode),this._saturationBox=new Xx(this._domNode,this.model,this.pixelRatio),this._register(this._saturationBox),this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this._saturationBox.onColorFlushed(this.flushColor,this)),this._opacityStrip=new Yx(this._domNode,this.model,r),this._register(this._opacityStrip),this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this._opacityStrip.onColorFlushed(this.flushColor,this)),this._hueStrip=new Qx(this._domNode,this.model,r),this._register(this._hueStrip),this._register(this._hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this._hueStrip.onColorFlushed(this.flushColor,this)),r&&(this._insertButton=this._register(new Zx(this._domNode)),this._domNode.classList.add("standalone-colorpicker"))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){let o=this.model.color.hsva;this.model.color=new Re(new Gh(o.h,e,t,o.a))}onDidOpacityChange(e){let t=this.model.color.hsva;this.model.color=new Re(new Gh(t.h,t.s,t.v,e))}onDidHueChange(e){let t=this.model.color.hsva,o=(1-e)*360;this.model.color=new Re(new Gh(o===360?0:o,t.s,t.v,t.a))}get domNode(){return this._domNode}get saturationBox(){return this._saturationBox}get enterButton(){return this._insertButton}layout(){this._saturationBox.layout(),this._opacityStrip.layout(),this._hueStrip.layout()}},Xx=class extends B{constructor(e,t,o){super(),this.model=t,this.pixelRatio=o,this._onDidChange=new fe,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new fe,this.onColorFlushed=this._onColorFlushed.event,this._domNode=Wo(".saturation-wrap"),Z(e,this._domNode),this._canvas=document.createElement("canvas"),this._canvas.className="saturation-box",Z(this._domNode,this._canvas),this.selection=Wo(".saturation-selection"),Z(this._domNode,this.selection),this.layout(),this._register(Ne(this._domNode,at.POINTER_DOWN,r=>this.onPointerDown(r))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}get domNode(){return this._domNode}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;this.monitor=this._register(new o0);let t=$t(this._domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>this.onDidChangePosition(r.pageX-t.left,r.pageY-t.top),()=>null);let o=Ne(e.target.ownerDocument,at.POINTER_UP,()=>{this._onColorFlushed.fire(),o.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){let o=Math.max(0,Math.min(1,e/this.width)),r=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(o,r),this._onDidChange.fire({s:o,v:r})}layout(){this.width=this._domNode.offsetWidth,this.height=this._domNode.offsetHeight,this._canvas.width=this.width*this.pixelRatio,this._canvas.height=this.height*this.pixelRatio,this.paint();let e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){let e=this.model.color.hsva,t=new Re(new Gh(e.h,1,1,1)),o=this._canvas.getContext("2d"),r=o.createLinearGradient(0,0,this._canvas.width,0);r.addColorStop(0,"rgba(255, 255, 255, 1)"),r.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),r.addColorStop(1,"rgba(255, 255, 255, 0)");let n=o.createLinearGradient(0,0,0,this._canvas.height);n.addColorStop(0,"rgba(0, 0, 0, 0)"),n.addColorStop(1,"rgba(0, 0, 0, 1)"),o.rect(0,0,this._canvas.width,this._canvas.height),o.fillStyle=Re.Format.CSS.format(t),o.fill(),o.fillStyle=r,o.fill(),o.fillStyle=n,o.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(e){if(this.monitor&&this.monitor.isMonitoring())return;this.paint();let t=e.hsva;this.paintSelection(t.s,t.v)}},ly=class extends B{constructor(e,t,o=!1){super(),this.model=t,this._onDidChange=new fe,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new fe,this.onColorFlushed=this._onColorFlushed.event,o?(this.domNode=Z(e,Wo(".standalone-strip")),this.overlay=Z(this.domNode,Wo(".standalone-overlay"))):(this.domNode=Z(e,Wo(".strip")),this.overlay=Z(this.domNode,Wo(".overlay"))),this.slider=Z(this.domNode,Wo(".slider")),this.slider.style.top="0px",this._register(Ne(this.domNode,at.POINTER_DOWN,r=>this.onPointerDown(r))),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;let e=this.getValue(this.model.color);this.updateSliderPosition(e)}onDidChangeColor(e){let t=this.getValue(e);this.updateSliderPosition(t)}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=this._register(new o0),o=$t(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.pointerId,e.buttons,n=>this.onDidChangeTop(n.pageY-o.top),()=>null);let r=Ne(e.target.ownerDocument,at.POINTER_UP,()=>{this._onColorFlushed.fire(),r.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){let t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}},Yx=class extends ly{constructor(e,t,o=!1){super(e,t,o),this.domNode.classList.add("opacity-strip"),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){super.onDidChangeColor(e);let{r:t,g:o,b:r}=e.rgba,n=new Re(new Br(t,o,r,1)),s=new Re(new Br(t,o,r,0));this.overlay.style.background=`linear-gradient(to bottom, ${n} 0%, ${s} 100%)`}getValue(e){return e.hsva.a}},Qx=class extends ly{constructor(e,t,o=!1){super(e,t,o),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}},Zx=class extends B{constructor(e){super(),this._onClicked=this._register(new fe),this.onClicked=this._onClicked.event,this._button=Z(e,document.createElement("button")),this._button.classList.add("insert-button"),this._button.textContent="Insert",this._register(Ne(this._button,at.CLICK,()=>{this._onClicked.fire()}))}get button(){return this._button}},cy=class extends vs{constructor(e,t,o,r,n=!1){super(),this.model=t,this.pixelRatio=o,this._register(Nk.getInstance(Mr(e)).onDidChange(()=>this.layout()));let s=Wo(".colorpicker-widget");e.appendChild(s),this.header=this._register(new $x(s,this.model,r,n)),this.body=this._register(new Jx(s,this.model,this.pixelRatio,n))}layout(){this.body.layout()}};Bi();ze();var vM=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},bM=function(i,e){return function(t,o){e(t,o,i)}},eS=class{constructor(e,t,o,r){this.owner=e,this.range=t,this.model=o,this.provider=r,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}},Mp=class{constructor(e,t){this._editor=e,this._themeService=t,this.hoverOrdinal=2}computeSync(e,t){return[]}computeAsync(e,t,o){return mo.fromPromise(this._computeAsync(e,t,o))}async _computeAsync(e,t,o){if(!this._editor.hasModel())return[];let r=Ls.get(this._editor);if(!r)return[];for(let n of t){if(!r.isColorDecoration(n))continue;let s=r.getColorData(n.range.getStartPosition());if(s)return[await DM(this,this._editor.getModel(),s.colorInfo,s.provider)]}return[]}renderHoverParts(e,t){return CM(this,this._editor,this._themeService,t,e)}};Mp=vM([bM(1,mi)],Mp);var tS=class{constructor(e,t,o,r){this.owner=e,this.range=t,this.model=o,this.provider=r}},ou=class{constructor(e,t){this._editor=e,this._themeService=t,this._color=null}async createColorHover(e,t,o){if(!this._editor.hasModel()||!Ls.get(this._editor))return null;let n=await sy(o,this._editor.getModel(),we.None),s=null,a=null;for(let g of n){let f=g.colorInfo;T.containsRange(f.range,e.range)&&(s=f,a=g.provider)}let c=s??e,h=a??t,p=!!s;return{colorHover:await DM(this,this._editor.getModel(),c,h),foundInEditor:p}}async updateEditorModel(e){if(!this._editor.hasModel())return;let t=e.model,o=new T(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn);this._color&&(await dy(this._editor.getModel(),t,this._color,o,e),o=xM(this._editor,o,t))}renderHoverParts(e,t){return CM(this,this._editor,this._themeService,t,e)}set color(e){this._color=e}get color(){return this._color}};ou=vM([bM(1,mi)],ou);async function DM(i,e,t,o){let r=e.getValueInRange(t.range),{red:n,green:s,blue:a,alpha:c}=t.color,h=new Br(Math.round(n*255),Math.round(s*255),Math.round(a*255),c),p=new Re(h),g=await jx(e,t,o,we.None),f=new ay(p,[],0);return f.colorPresentations=g||[],f.guessColorPresentation(p,r),i instanceof Mp?new eS(i,T.lift(t.range),f,o):new tS(i,T.lift(t.range),f,o)}function CM(i,e,t,o,r){if(o.length===0||!e.hasModel())return B.None;if(r.setMinimumDimensions){let f=e.getOption(67)+8;r.setMinimumDimensions(new st(302,f))}let n=new H,s=o[0],a=e.getModel(),c=s.model,h=n.add(new cy(r.fragment,c,e.getOption(143),t,i instanceof ou));r.setColorPicker(h);let p=!1,g=new T(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn);if(i instanceof ou){let f=o[0].model.color;i.color=f,dy(a,c,f,g,s),n.add(c.onColorFlushed(_=>{i.color=_}))}else n.add(c.onColorFlushed(async f=>{await dy(a,c,f,g,s),p=!0,g=xM(e,g,c)}));return n.add(c.onDidChangeColor(f=>{dy(a,c,f,g,s)})),n.add(e.onDidChangeModelContent(f=>{p?p=!1:(r.hide(),e.focus())})),n}function xM(i,e,t){var o,r;let n=[],s=(o=t.presentation.textEdit)!==null&&o!==void 0?o:{range:e,text:t.presentation.label,forceMoveMarkers:!1};n.push(s),t.presentation.additionalTextEdits&&n.push(...t.presentation.additionalTextEdits);let a=T.lift(s.range),c=i.getModel()._setTrackedRange(null,a,3);return i.executeEdits("colorpicker",n),i.pushUndoStop(),(r=i.getModel()._getTrackedRange(c))!==null&&r!==void 0?r:a}async function dy(i,e,t,o,r){let n=await jx(i,{range:o,color:{red:t.rgba.r/255,green:t.rgba.g/255,blue:t.rgba.b/255,alpha:t.rgba.a}},r.provider,we.None);e.colorPresentations=n||[]}re();var uy="editor.action.showHover",SM="editor.action.showDefinitionPreviewHover",wM="editor.action.scrollUpHover",EM="editor.action.scrollDownHover",AM="editor.action.scrollLeftHover",TM="editor.action.scrollRightHover",IM="editor.action.pageUpHover",PM="editor.action.pageDownHover",kM="editor.action.goToTopHover",FM="editor.action.goToBottomHover",za="editor.action.increaseHoverVerbosityLevel",LM=b({key:"increaseHoverVerbosityLevel",comment:["Label for action that will increase the hover verbosity level."]},"Increase Hover Verbosity Level"),Va="editor.action.decreaseHoverVerbosityLevel",NM=b({key:"decreaseHoverVerbosityLevel",comment:["Label for action that will decrease the hover verbosity level."]},"Decrease Hover Verbosity Level");X();Je();ze();Wl();bt();Xe();xi();X();Ao();O6();Zi();to();pt();Jt();var hy="editor.action.inlineSuggest.commit",py="editor.action.inlineSuggest.showPrevious",my="editor.action.inlineSuggest.showNext";re();Wt();Rt();Me();Je();mr();var nS=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Cr=function(i,e){return function(t,o){e(t,o,i)}},gy,fy=class extends B{constructor(e,t,o){super(),this.editor=e,this.model=t,this.instantiationService=o,this.alwaysShowToolbar=ci(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).showToolbar==="always"),this.sessionPosition=void 0,this.position=Ei(this,r=>{var n,s,a;let c=(n=this.model.read(r))===null||n===void 0?void 0:n.primaryGhostText.read(r);if(!this.alwaysShowToolbar.read(r)||!c||c.parts.length===0)return this.sessionPosition=void 0,null;let h=c.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==c.lineNumber&&(this.sessionPosition=void 0);let p=new Y(c.lineNumber,Math.min(h,(a=(s=this.sessionPosition)===null||s===void 0?void 0:s.column)!==null&&a!==void 0?a:Number.MAX_SAFE_INTEGER));return this.sessionPosition=p,p}),this._register(kd((r,n)=>{let s=this.model.read(r);if(!s||!this.alwaysShowToolbar.read(r))return;let a=BL((h,p)=>{let g=p.add(this.instantiationService.createInstance(Gr,this.editor,!0,this.position,s.selectedInlineCompletionIndex,s.inlineCompletionsCount,s.activeCommands));return e.addContentWidget(g),p.add(Ve(()=>e.removeContentWidget(g))),p.add(Lt(f=>{this.position.read(f)&&s.lastTriggerKind.read(f)!==un.Explicit&&s.triggerExplicitly()})),g}),c=zL(this,(h,p)=>!!this.position.read(h)||!!p);n.add(Lt(h=>{c.read(h)&&a.read(h)}))}))}};fy=nS([Cr(2,ce)],fy);var pj=kt("inline-suggestion-hints-next",be.chevronRight,b("parameterHintsNextIcon","Icon for show next parameter hint.")),mj=kt("inline-suggestion-hints-previous",be.chevronLeft,b("parameterHintsPreviousIcon","Icon for show previous parameter hint.")),Gr=gy=class extends B{static get dropDownVisible(){return this._dropDownVisible}createCommandAction(e,t,o){let r=new _n(e,t,o,!0,()=>this._commandService.executeCommand(e)),n=this.keybindingService.lookupKeybinding(e,this._contextKeyService),s=t;return n&&(s=b({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",t,n.getLabel())),r.tooltip=s,r}constructor(e,t,o,r,n,s,a,c,h,p,g){super(),this.editor=e,this.withBorder=t,this._position=o,this._currentSuggestionIdx=r,this._suggestionCount=n,this._extraCommands=s,this._commandService=a,this.keybindingService=h,this._contextKeyService=p,this._menuService=g,this.id=`InlineSuggestionHintsContentWidget${gy.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=wa("div.inlineSuggestionsHints",{className:this.withBorder?".withBorder":""},[wa("div@toolBar")]),this.previousAction=this.createCommandAction(py,b("previous","Previous"),je.asClassName(mj)),this.availableSuggestionCountAction=new _n("inlineSuggestionHints.availableSuggestionCount","",void 0,!1),this.nextAction=this.createCommandAction(my,b("next","Next"),je.asClassName(pj)),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(Q.InlineCompletionsActions,this._contextKeyService)),this.clearAvailableSuggestionCountLabelDebounced=this._register(new ut(()=>{this.availableSuggestionCountAction.label=""},100)),this.disableButtonsDebounced=this._register(new ut(()=>{this.previousAction.enabled=this.nextAction.enabled=!1},100)),this.toolBar=this._register(c.createInstance(rS,this.nodes.toolBar,Q.InlineSuggestionToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:f=>f.startsWith("primary")},actionViewItemProvider:(f,_)=>{if(f instanceof yn)return c.createInstance(oS,f,void 0);if(f===this.availableSuggestionCountAction){let y=new iS(void 0,f,{label:!0,icon:!1});return y.setClass("availableSuggestionCount"),y}},telemetrySource:"InlineSuggestionToolbar"})),this.toolBar.setPrependedPrimaryActions([this.previousAction,this.availableSuggestionCountAction,this.nextAction]),this._register(this.toolBar.onDidChangeDropdownVisibility(f=>{gy._dropDownVisible=f})),this._register(Lt(f=>{this._position.read(f),this.editor.layoutContentWidget(this)})),this._register(Lt(f=>{let _=this._suggestionCount.read(f),y=this._currentSuggestionIdx.read(f);_!==void 0?(this.clearAvailableSuggestionCountLabelDebounced.cancel(),this.availableSuggestionCountAction.label=`${y+1}/${_}`):this.clearAvailableSuggestionCountLabelDebounced.schedule(),_!==void 0&&_>1?(this.disableButtonsDebounced.cancel(),this.previousAction.enabled=this.nextAction.enabled=!0):this.disableButtonsDebounced.schedule()})),this._register(Lt(f=>{let y=this._extraCommands.read(f).map(C=>({class:void 0,id:C.id,enabled:!0,tooltip:C.tooltip||"",label:C.title,run:x=>this._commandService.executeCommand(C.id)}));for(let[C,x]of this.inlineCompletionsActionsMenus.getActions())for(let D of x)D instanceof yn&&y.push(D);y.length>0&&y.unshift(new ps),this.toolBar.setAdditionalSecondaryActions(y)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}};Gr._dropDownVisible=!1;Gr.id=0;Gr=gy=nS([Cr(6,ht),Cr(7,ce),Cr(8,qe),Cr(9,ve),Cr(10,pr)],Gr);var iS=class extends hp{constructor(){super(...arguments),this._className=void 0}setClass(e){this._className=e}render(e){super.render(e),this._className&&e.classList.add(this._className)}updateTooltip(){}},oS=class extends Md{updateLabel(){let e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){let t=wa("div.keybinding").root;this._register(new Od(t,cd,U({disableTitle:!0},e_))).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineSuggestionStatusBarItemLabel")}}updateTooltip(){}},rS=class extends n_{constructor(e,t,o,r,n,s,a,c,h){super(e,U({resetMenu:t},o),r,n,s,a,c,h),this.menuId=t,this.options2=o,this.menuService=r,this.contextKeyService=n,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){var e,t,o,r,n,s,a;let c=[],h=[];Nd(this.menu,(e=this.options2)===null||e===void 0?void 0:e.menuOptions,{primary:c,secondary:h},(o=(t=this.options2)===null||t===void 0?void 0:t.toolbarOptions)===null||o===void 0?void 0:o.primaryGroup,(n=(r=this.options2)===null||r===void 0?void 0:r.toolbarOptions)===null||n===void 0?void 0:n.shouldInlineSubmenu,(a=(s=this.options2)===null||s===void 0?void 0:s.toolbarOptions)===null||a===void 0?void 0:a.useSeparatorsInPrimaryActions),h.push(...this.additionalActions),c.unshift(...this.prependedPrimaryActions),this.setActions(c,h)}setPrependedPrimaryActions(e){Yi(this.prependedPrimaryActions,e,(t,o)=>t===o)||(this.prependedPrimaryActions=e,this.updateToolbar())}setAdditionalSecondaryActions(e){Yi(this.additionalActions,e,(t,o)=>t===o)||(this.additionalActions=e,this.updateToolbar())}};rS=nS([Cr(3,pr),Cr(4,ve),Cr(5,_r),Cr(6,qe),Cr(7,ht),Cr(8,Zt)],rS);Xe();ze();ze();nt();X();var Ua=class{constructor(){this._onDidWillResize=new fe,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new fe,this.onDidResize=this._onDidResize.event,this._sashListener=new H,this._size=new st(0,0),this._minSize=new st(0,0),this._maxSize=new st(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new Ps(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new Ps(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new Ps(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:S0.North}),this._southSash=new Ps(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:S0.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,o=0;this._sashListener.add(ft.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,o=0)})),this._sashListener.add(ft.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,o=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(r=>{e&&(o=r.currentX-r.startX,this.layout(e.height+t,e.width+o),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(r=>{e&&(o=-(r.currentX-r.startX),this.layout(e.height+t,e.width+o),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(r=>{e&&(t=-(r.currentY-r.startY),this.layout(e.height+t,e.width+o),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(r=>{e&&(t=r.currentY-r.startY,this.layout(e.height+t,e.width+o),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(ft.any(this._eastSash.onDidReset,this._westSash.onDidReset)(r=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(ft.any(this._northSash.onDidReset,this._southSash.onDidReset)(r=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,o,r){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=o?3:0,this._westSash.state=r?3:0}layout(e=this.size.height,t=this.size.width){let{height:o,width:r}=this._minSize,{height:n,width:s}=this._maxSize;e=Math.max(o,Math.min(n,e)),t=Math.max(r,Math.min(s,t));let a=new st(t,e);st.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}};X();pt();ze();var gj=30,fj=24,_y=class extends B{constructor(e,t=new st(10,10)){super(),this._editor=e,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._resizableNode=this._register(new Ua),this._contentPosition=null,this._isResizing=!1,this._resizableNode.domNode.style.position="absolute",this._resizableNode.minSize=st.lift(t),this._resizableNode.layout(t.height,t.width),this._resizableNode.enableSashes(!0,!0,!0,!0),this._register(this._resizableNode.onDidResize(o=>{this._resize(new st(o.dimension.width,o.dimension.height)),o.done&&(this._isResizing=!1)})),this._register(this._resizableNode.onDidWillResize(()=>{this._isResizing=!0}))}get isResizing(){return this._isResizing}getDomNode(){return this._resizableNode.domNode}getPosition(){return this._contentPosition}get position(){var e;return!((e=this._contentPosition)===null||e===void 0)&&e.position?Y.lift(this._contentPosition.position):void 0}_availableVerticalSpaceAbove(e){let t=this._editor.getDomNode(),o=this._editor.getScrolledVisiblePosition(e);return!t||!o?void 0:$t(t).top+o.top-gj}_availableVerticalSpaceBelow(e){let t=this._editor.getDomNode(),o=this._editor.getScrolledVisiblePosition(e);if(!t||!o)return;let r=$t(t),n=gn(t.ownerDocument.body),s=r.top+o.top+o.height;return n.height-s-fj}_findPositionPreference(e,t){var o,r;let n=Math.min((o=this._availableVerticalSpaceBelow(t))!==null&&o!==void 0?o:1/0,e),s=Math.min((r=this._availableVerticalSpaceAbove(t))!==null&&r!==void 0?r:1/0,e),a=Math.min(Math.max(s,n),e),c=Math.min(e,a),h;return this._editor.getOption(60).above?h=c<=s?1:2:h=c<=n?2:1,h===1?this._resizableNode.enableSashes(!0,!0,!1,!1):this._resizableNode.enableSashes(!1,!0,!0,!1),h}_resize(e){this._resizableNode.layout(e.height,e.width)}};Me();ei();it();var _j=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},yy=function(i,e){return function(t,o){e(t,o,i)}},Fn,MM=30,yj=6,qa=Fn=class extends _y{get isColorPickerVisible(){var e;return!!(!((e=this._visibleData)===null||e===void 0)&&e.colorPicker)}get isVisibleFromKeyboard(){var e;return((e=this._visibleData)===null||e===void 0?void 0:e.source)===1}get isVisible(){var e;return(e=this._hoverVisibleKey.get())!==null&&e!==void 0?e:!1}get isFocused(){var e;return(e=this._hoverFocusedKey.get())!==null&&e!==void 0?e:!1}constructor(e,t,o,r,n){let s=e.getOption(67)+8,a=150,c=new st(a,s);super(e,c),this._configurationService=o,this._accessibilityService=r,this._keybindingService=n,this._hover=this._register(new zf),this._minimumSize=c,this._hoverVisibleKey=A.hoverVisible.bindTo(t),this._hoverFocusedKey=A.hoverFocused.bindTo(t),Z(this._resizableNode.domNode,this._hover.containerDomNode),this._resizableNode.domNode.style.zIndex="50",this._register(this._editor.onDidLayoutChange(()=>{this.isVisible&&this._updateMaxDimensions()})),this._register(this._editor.onDidChangeConfiguration(p=>{p.hasChanged(50)&&this._updateFont()}));let h=this._register(Or(this._resizableNode.domNode));this._register(h.onDidFocus(()=>{this._hoverFocusedKey.set(!0)})),this._register(h.onDidBlur(()=>{this._hoverFocusedKey.set(!1)})),this._setHoverData(void 0),this._editor.addContentWidget(this)}dispose(){var e;super.dispose(),(e=this._visibleData)===null||e===void 0||e.disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return Fn.ID}static _applyDimensions(e,t,o){let r=typeof t=="number"?`${t}px`:t,n=typeof o=="number"?`${o}px`:o;e.style.width=r,e.style.height=n}_setContentsDomNodeDimensions(e,t){let o=this._hover.contentsDomNode;return Fn._applyDimensions(o,e,t)}_setContainerDomNodeDimensions(e,t){let o=this._hover.containerDomNode;return Fn._applyDimensions(o,e,t)}_setHoverWidgetDimensions(e,t){this._setContentsDomNodeDimensions(e,t),this._setContainerDomNodeDimensions(e,t),this._layoutContentWidget()}static _applyMaxDimensions(e,t,o){let r=typeof t=="number"?`${t}px`:t,n=typeof o=="number"?`${o}px`:o;e.style.maxWidth=r,e.style.maxHeight=n}_setHoverWidgetMaxDimensions(e,t){Fn._applyMaxDimensions(this._hover.contentsDomNode,e,t),Fn._applyMaxDimensions(this._hover.containerDomNode,e,t),this._hover.containerDomNode.style.setProperty("--vscode-hover-maxWidth",typeof e=="number"?`${e}px`:e),this._layoutContentWidget()}_setAdjustedHoverWidgetDimensions(e){this._setHoverWidgetMaxDimensions("none","none");let t=e.width,o=e.height;this._setHoverWidgetDimensions(t,o)}_updateResizableNodeMaxDimensions(){var e,t;let o=(e=this._findMaximumRenderingWidth())!==null&&e!==void 0?e:1/0,r=(t=this._findMaximumRenderingHeight())!==null&&t!==void 0?t:1/0;this._resizableNode.maxSize=new st(o,r),this._setHoverWidgetMaxDimensions(o,r)}_resize(e){var t,o;Fn._lastDimensions=new st(e.width,e.height),this._setAdjustedHoverWidgetDimensions(e),this._resizableNode.layout(e.height,e.width),this._updateResizableNodeMaxDimensions(),this._hover.scrollbar.scanDomNode(),this._editor.layoutContentWidget(this),(o=(t=this._visibleData)===null||t===void 0?void 0:t.colorPicker)===null||o===void 0||o.layout()}_findAvailableSpaceVertically(){var e;let t=(e=this._visibleData)===null||e===void 0?void 0:e.showAtPosition;if(t)return this._positionPreference===1?this._availableVerticalSpaceAbove(t):this._availableVerticalSpaceBelow(t)}_findMaximumRenderingHeight(){let e=this._findAvailableSpaceVertically();if(!e)return;let t=yj;return Array.from(this._hover.contentsDomNode.children).forEach(o=>{t+=o.clientHeight}),Math.min(e,t)}_isHoverTextOverflowing(){this._hover.containerDomNode.style.setProperty("--vscode-hover-whiteSpace","nowrap"),this._hover.containerDomNode.style.setProperty("--vscode-hover-sourceWhiteSpace","nowrap");let e=Array.from(this._hover.contentsDomNode.children).some(t=>t.scrollWidth>t.clientWidth);return this._hover.containerDomNode.style.removeProperty("--vscode-hover-whiteSpace"),this._hover.containerDomNode.style.removeProperty("--vscode-hover-sourceWhiteSpace"),e}_findMaximumRenderingWidth(){if(!this._editor||!this._editor.hasModel())return;let e=this._isHoverTextOverflowing(),t=typeof this._contentWidth>"u"?0:this._contentWidth-2;return e||this._hover.containerDomNode.clientWidth<t?gn(this._hover.containerDomNode.ownerDocument.body).width-14:this._hover.containerDomNode.clientWidth+2}isMouseGettingCloser(e,t){if(!this._visibleData)return!1;if(typeof this._visibleData.initialMousePosX>"u"||typeof this._visibleData.initialMousePosY>"u")return this._visibleData.initialMousePosX=e,this._visibleData.initialMousePosY=t,!1;let o=$t(this.getDomNode());typeof this._visibleData.closestMouseDistance>"u"&&(this._visibleData.closestMouseDistance=OM(this._visibleData.initialMousePosX,this._visibleData.initialMousePosY,o.left,o.top,o.width,o.height));let r=OM(e,t,o.left,o.top,o.width,o.height);return r>this._visibleData.closestMouseDistance+4?!1:(this._visibleData.closestMouseDistance=Math.min(this._visibleData.closestMouseDistance,r),!0)}_setHoverData(e){var t;(t=this._visibleData)===null||t===void 0||t.disposables.dispose(),this._visibleData=e,this._hoverVisibleKey.set(!!e),this._hover.containerDomNode.classList.toggle("hidden",!e)}_updateFont(){let{fontSize:e,lineHeight:t}=this._editor.getOption(50),o=this._hover.contentsDomNode;o.style.fontSize=`${e}px`,o.style.lineHeight=`${t/e}`,Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(n=>this._editor.applyFontInfo(n))}_updateContent(e){let t=this._hover.contentsDomNode;t.style.paddingBottom="",t.textContent="",t.appendChild(e)}_layoutContentWidget(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}_updateMaxDimensions(){let e=Math.max(this._editor.getLayoutInfo().height/4,250,Fn._lastDimensions.height),t=Math.max(this._editor.getLayoutInfo().width*.66,500,Fn._lastDimensions.width);this._setHoverWidgetMaxDimensions(t,e)}_render(e,t){this._setHoverData(t),this._updateFont(),this._updateContent(e),this._updateMaxDimensions(),this.onContentsChanged(),this._editor.render()}getPosition(){var e;return this._visibleData?{position:this._visibleData.showAtPosition,secondaryPosition:this._visibleData.showAtSecondaryPosition,positionAffinity:this._visibleData.isBeforeContent?3:void 0,preference:[(e=this._positionPreference)!==null&&e!==void 0?e:1]}:null}showAt(e,t){var o,r,n,s;if(!this._editor||!this._editor.hasModel())return;this._render(e,t);let a=Sa(this._hover.containerDomNode),c=t.showAtPosition;this._positionPreference=(o=this._findPositionPreference(a,c))!==null&&o!==void 0?o:1,this.onContentsChanged(),t.stoleFocus&&this._hover.containerDomNode.focus(),(r=t.colorPicker)===null||r===void 0||r.layout();let p=this._hover.containerDomNode.ownerDocument.activeElement===this._hover.containerDomNode&&nL(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),(s=(n=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))===null||n===void 0?void 0:n.getAriaLabel())!==null&&s!==void 0?s:"");p&&(this._hover.contentsDomNode.ariaLabel=this._hover.contentsDomNode.textContent+", "+p)}hide(){if(!this._visibleData)return;let e=this._visibleData.stoleFocus||this._hoverFocusedKey.get();this._setHoverData(void 0),this._resizableNode.maxSize=new st(1/0,1/0),this._resizableNode.clearSashHoverState(),this._hoverFocusedKey.set(!1),this._editor.layoutContentWidget(this),e&&this._editor.focus()}_removeConstraintsRenderNormally(){let e=this._editor.getLayoutInfo();this._resizableNode.layout(e.height,e.width),this._setHoverWidgetDimensions("auto","auto")}setMinimumDimensions(e){this._minimumSize=new st(Math.max(this._minimumSize.width,e.width),Math.max(this._minimumSize.height,e.height)),this._updateMinimumWidth()}_updateMinimumWidth(){let e=typeof this._contentWidth>"u"?this._minimumSize.width:Math.min(this._contentWidth,this._minimumSize.width);this._resizableNode.minSize=new st(e,this._minimumSize.height)}onContentsChanged(){var e;this._removeConstraintsRenderNormally();let t=this._hover.containerDomNode,o=Sa(t),r=xo(t);if(this._resizableNode.layout(o,r),this._setHoverWidgetDimensions(r,o),o=Sa(t),r=xo(t),this._contentWidth=r,this._updateMinimumWidth(),this._resizableNode.layout(o,r),!((e=this._visibleData)===null||e===void 0)&&e.showAtPosition){let n=Sa(this._hover.containerDomNode);this._positionPreference=this._findPositionPreference(n,this._visibleData.showAtPosition)}this._layoutContentWidget()}focus(){this._hover.containerDomNode.focus()}scrollUp(){let e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e-t.lineHeight})}scrollDown(){let e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e+t.lineHeight})}scrollLeft(){let e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e-MM})}scrollRight(){let e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e+MM})}pageUp(){let e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e-t})}pageDown(){let e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e+t})}goToTop(){this._hover.scrollbar.setScrollPosition({scrollTop:0})}goToBottom(){this._hover.scrollbar.setScrollPosition({scrollTop:this._hover.scrollbar.getScrollDimensions().scrollHeight})}};qa.ID="editor.contrib.resizableContentHoverWidget";qa._lastDimensions=new st(0,0);qa=Fn=_j([yy(1,ve),yy(2,Oe),yy(3,Ia),yy(4,qe)],qa);function OM(i,e,t,o,r,n){let s=t+r/2,a=o+n/2,c=Math.max(Math.abs(i-s)-r/2,0),h=Math.max(Math.abs(e-a)-n/2,0);return Math.sqrt(c*c+h*h)}ze();X();pt();ge();gi();Jt();Xe();Ze();nt();X();var sS=class{constructor(e,t,o){this.value=e,this.isComplete=t,this.hasLoadingMessage=o}},ru=class extends B{constructor(e,t){super(),this._editor=e,this._computer=t,this._onResult=this._register(new fe),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new ut(()=>this._triggerAsyncComputation(),0)),this._secondWaitScheduler=this._register(new ut(()=>this._triggerSyncComputation(),0)),this._loadingMessageScheduler=this._register(new ut(()=>this._triggerLoadingMessage(),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(60).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(e,t=!0){this._state=e,t&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=vk(e=>this._computer.computeAsync(e)),(async()=>{try{for await(let e of this._asyncIterable)e&&(this._result.push(e),this._fireResult());this._asyncIterableDone=!0,(this._state===3||this._state===4)&&this._setState(0)}catch(e){Fe(e)}})()):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){this._state===3&&this._setState(4)}_fireResult(){if(this._state===1||this._state===2)return;let e=this._state===0,t=this._state===4;this._onResult.fire(new sS(this._result.slice(0),e,t))}start(e){if(e===0)this._state===0&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}};var nu=class{constructor(e,t,o,r){this.priority=e,this.range=t,this.initialMousePosX=o,this.initialMousePosY=r,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}},xr=class{constructor(e,t,o,r,n,s){this.priority=e,this.owner=t,this.range=o,this.initialMousePosX=r,this.initialMousePosY=n,this.supportsMarkerHover=s,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}},Po=new class{constructor(){this._participants=[]}register(e){this._participants.push(e)}getAll(){return this._participants}};Je();ze();bt();yt();yr();X();ge();Rr();re();ei();Ge();Jt();xi();to();Ze();Xe();Xe();yt();Ze();xe();Ge();var aS=class{constructor(e,t,o){this.provider=e,this.hover=t,this.ordinal=o}};async function vj(i,e,t,o,r){let n=await Promise.resolve(i.provideHover(t,o,r)).catch($e);if(!(!n||!Dj(n)))return new aS(i,n,e)}function Op(i,e,t,o){let n=i.ordered(e).map((s,a)=>vj(s,a,e,t,o));return mo.fromPromises(n).coalesce()}function bj(i,e,t,o){return Op(i,e,t,o).map(r=>r.hover).toPromise()}wo("_executeHoverProvider",(i,e,t)=>{let o=i.get(J);return bj(o.hoverProvider,e,t,we.None)});function Dj(i){let e=typeof i.range<"u",t=typeof i.contents<"u"&&i.contents&&i.contents.length>0;return e&&t}var Cj=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},su=function(i,e){return function(t,o){e(t,o,i)}},au=te,xj=kt("hover-increase-verbosity",be.add,b("increaseHoverVerbosity","Icon for increaseing hover verbosity.")),Sj=kt("hover-decrease-verbosity",be.remove,b("decreaseHoverVerbosity","Icon for decreasing hover verbosity.")),ko=class{constructor(e,t,o,r,n,s=void 0){this.owner=e,this.range=t,this.contents=o,this.isBeforeContent=r,this.ordinal=n,this.source=s}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}},vy=class{constructor(e,t,o){this.hover=e,this.hoverProvider=t,this.hoverPosition=o}supportsVerbosityAction(e){var t,o;switch(e){case Do.Increase:return(t=this.hover.canIncreaseVerbosity)!==null&&t!==void 0?t:!1;case Do.Decrease:return(o=this.hover.canDecreaseVerbosity)!==null&&o!==void 0?o:!1}}},Ka=class{constructor(e,t,o,r,n,s,a){this._editor=e,this._languageService=t,this._openerService=o,this._configurationService=r,this._languageFeaturesService=n,this._keybindingService=s,this._hoverService=a,this.hoverOrdinal=3}createLoadingMessage(e){return new ko(this,e.range,[new Gt().appendText(b("modesContentHover.loading","Loading..."))],!1,2e3)}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];let o=this._editor.getModel(),r=e.range.startLineNumber,n=o.getLineMaxColumn(r),s=[],a=1e3,c=o.getLineLength(r),h=o.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),p=this._editor.getOption(117),g=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:h}),f=!1;p>=0&&c>p&&e.range.startColumn>=p&&(f=!0,s.push(new ko(this,e.range,[{value:b("stopped rendering","Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.")}],!1,a++))),!f&&typeof g=="number"&&c>=g&&s.push(new ko(this,e.range,[{value:b("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],!1,a++));let _=!1;for(let y of t){let C=y.range.startLineNumber===r?y.range.startColumn:1,x=y.range.endLineNumber===r?y.range.endColumn:n,D=y.options.hoverMessage;if(!D||Fa(D))continue;y.options.beforeContentClassName&&(_=!0);let E=new T(e.range.startLineNumber,C,e.range.startLineNumber,x);s.push(new ko(this,E,Yg(D),_,a++))}return s}computeAsync(e,t,o){if(!this._editor.hasModel()||e.type!==1)return mo.EMPTY;let r=this._editor.getModel(),n=this._languageFeaturesService.hoverProvider;return n.has(r)?this._getMarkdownHovers(n,r,e,o):mo.EMPTY}_getMarkdownHovers(e,t,o,r){let n=o.range.getStartPosition();return Op(e,t,n,r).filter(c=>!Fa(c.hover.contents)).map(c=>{let h=c.hover.range?T.lift(c.hover.range):o.range,p=new vy(c.hover,c.provider,n);return new ko(this,h,c.hover.contents,!1,c.ordinal,p)})}renderHoverParts(e,t){return this._renderedHoverParts=new lS(t,e.fragment,this._editor,this._languageService,this._openerService,this._keybindingService,this._hoverService,this._configurationService,e.onContentsChanged),this._renderedHoverParts}markdownHoverContentAtIndex(e){var t,o;return(o=(t=this._renderedHoverParts)===null||t===void 0?void 0:t.markdownHoverContentAtIndex(e))!==null&&o!==void 0?o:""}doesMarkdownHoverAtIndexSupportVerbosityAction(e,t){var o,r;return(r=(o=this._renderedHoverParts)===null||o===void 0?void 0:o.doesMarkdownHoverAtIndexSupportVerbosityAction(e,t))!==null&&r!==void 0?r:!1}updateMarkdownHoverVerbosityLevel(e,t,o){var r;(r=this._renderedHoverParts)===null||r===void 0||r.updateMarkdownHoverPartVerbosityLevel(e,t,o)}};Ka=Cj([su(1,pi),su(2,Pi),su(3,Oe),su(4,J),su(5,qe),su(6,Cs)],Ka);var lS=class extends B{constructor(e,t,o,r,n,s,a,c,h){super(),this._editor=o,this._languageService=r,this._openerService=n,this._keybindingService=s,this._hoverService=a,this._configurationService=c,this._onFinishedRendering=h,this._focusedHoverPartIndex=-1,this._ongoingHoverOperations=new Map,this._renderedHoverParts=this._renderHoverParts(e,t,this._onFinishedRendering),this._register(Ve(()=>{this._renderedHoverParts.forEach(p=>{p.disposables.dispose()})})),this._register(Ve(()=>{this._ongoingHoverOperations.forEach(p=>{p.tokenSource.dispose(!0)})}))}_renderHoverParts(e,t,o){return e.sort(Fl(r=>r.ordinal,Ll)),e.map((r,n)=>{let s=this._renderHoverPart(n,r.contents,r.source,o);return t.appendChild(s.renderedMarkdown),s})}_renderHoverPart(e,t,o,r){let{renderedMarkdown:n,disposables:s}=this._renderMarkdownContent(t,r);if(!o)return{renderedMarkdown:n,disposables:s};let a=o.supportsVerbosityAction(Do.Increase),c=o.supportsVerbosityAction(Do.Decrease);if(!a&&!c)return{renderedMarkdown:n,disposables:s,hoverSource:o};let h=au("div.verbosity-actions");return n.prepend(h),s.add(this._renderHoverExpansionAction(h,Do.Increase,a)),s.add(this._renderHoverExpansionAction(h,Do.Decrease,c)),this._register(Ne(n,at.FOCUS_IN,p=>{p.stopPropagation(),this._focusedHoverPartIndex=e})),this._register(Ne(n,at.FOCUS_OUT,p=>{p.stopPropagation(),this._focusedHoverPartIndex=-1})),{renderedMarkdown:n,disposables:s,hoverSource:o}}_renderMarkdownContent(e,t){let o=au("div.hover-row");o.tabIndex=0;let r=au("div.hover-row-contents");o.appendChild(r);let n=new H;return n.add(BM(this._editor,r,e,this._languageService,this._openerService,t)),{renderedMarkdown:o,disposables:n}}_renderHoverExpansionAction(e,t,o){let r=new H,n=t===Do.Increase,s=Z(e,au(je.asCSSSelector(n?xj:Sj)));s.tabIndex=0;let a=new oL("mouse",!1,{target:e,position:{hoverPosition:0}},this._configurationService,this._hoverService);if(r.add(this._hoverService.setupUpdatableHover(a,s,wj(this._keybindingService,t))),!o)return s.classList.add("disabled"),r;s.classList.add("enabled");let c=()=>this.updateMarkdownHoverPartVerbosityLevel(t);return r.add(new sL(s,c)),r.add(new aL(s,c,[3,10])),r}async updateMarkdownHoverPartVerbosityLevel(e,t=-1,o=!0){var r;let n=this._editor.getModel();if(!n)return;let s=t!==-1?t:this._focusedHoverPartIndex,a=this._getRenderedHoverPartAtIndex(s);if(!a||!(!((r=a.hoverSource)===null||r===void 0)&&r.supportsVerbosityAction(e)))return;let c=a.hoverSource,h=await this._fetchHover(c,n,e);if(!h)return;let p=new vy(h,c.hoverProvider,c.hoverPosition),g=this._renderHoverPart(s,h.contents,p,this._onFinishedRendering);this._replaceRenderedHoverPartAtIndex(s,g),o&&this._focusOnHoverPartWithIndex(s),this._onFinishedRendering()}markdownHoverContentAtIndex(e){var t;let o=this._getRenderedHoverPartAtIndex(e);return(t=o?.renderedMarkdown.innerText)!==null&&t!==void 0?t:""}doesMarkdownHoverAtIndexSupportVerbosityAction(e,t){var o;let r=this._getRenderedHoverPartAtIndex(e);return!(!r||!(!((o=r.hoverSource)===null||o===void 0)&&o.supportsVerbosityAction(t)))}async _fetchHover(e,t,o){let r=o===Do.Increase?1:-1,n=e.hoverProvider,s=this._ongoingHoverOperations.get(n);s&&(s.tokenSource.cancel(),r+=s.verbosityDelta);let a=new _t;this._ongoingHoverOperations.set(n,{verbosityDelta:r,tokenSource:a});let c={verbosityRequest:{verbosityDelta:r,previousHover:e.hover}},h;try{h=await Promise.resolve(n.provideHover(t,e.hoverPosition,a.token,c))}catch(p){$e(p)}return a.dispose(),this._ongoingHoverOperations.delete(n),h}_replaceRenderedHoverPartAtIndex(e,t){if(e>=this._renderHoverParts.length||e<0)return;let o=this._renderedHoverParts[e];o.renderedMarkdown.replaceWith(t.renderedMarkdown),o.disposables.dispose(),this._renderedHoverParts[e]=t}_focusOnHoverPartWithIndex(e){this._renderedHoverParts[e].renderedMarkdown.focus()}_getRenderedHoverPartAtIndex(e){return this._renderedHoverParts[e]}};function RM(i,e,t,o,r){e.sort(Fl(s=>s.ordinal,Ll));let n=new H;for(let s of e)n.add(BM(t,i.fragment,s.contents,o,r,i.onContentsChanged));return n}function BM(i,e,t,o,r,n){let s=new H;for(let a of t){if(Fa(a))continue;let c=au("div.markdown-hover"),h=Z(c,au("div.hover-contents")),p=s.add(new vr({editor:i},o,r));s.add(p.onDidRenderAsync(()=>{h.className="hover-contents code-hover-contents",n()}));let g=s.add(p.render(a));h.appendChild(g.element),e.appendChild(c)}return s}function wj(i,e){switch(e){case Do.Increase:{let t=i.lookupKeybinding(za);return t?b("increaseVerbosityWithKb","Increase Hover Verbosity ({0})",t.getLabel()):b("increaseVerbosity","Increase Hover Verbosity")}case Do.Decrease:{let t=i.lookupKeybinding(Va);return t?b("decreaseVerbosityWithKb","Decrease Hover Verbosity ({0})",t.getLabel()):b("decreaseVerbosity","Decrease Hover Verbosity")}}}Xe();yr();pt();gi();Rr();fn();ze();bt();Xe();yt();Ze();X();Ea();Di();Ci();ge();Jt();bn();gi();Hr();Ge();fn();nt();X();Zi();function cS(i,e){return!!i[e]}var Rp=class{constructor(e,t){this.target=e.target,this.isLeftClick=e.event.leftButton,this.isMiddleClick=e.event.middleButton,this.isRightClick=e.event.rightButton,this.hasTriggerModifier=cS(e.event,t.triggerModifier),this.hasSideBySideModifier=cS(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}},by=class{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=cS(e,t.triggerModifier)}},lu=class{constructor(e,t,o,r){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=o,this.triggerSideBySideModifier=r}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}};function WM(i){return i==="altKey"?po?new lu(57,"metaKey",6,"altKey"):new lu(5,"ctrlKey",6,"altKey"):po?new lu(6,"altKey",57,"metaKey"):new lu(6,"altKey",5,"ctrlKey")}var Ln=class extends B{constructor(e,t){var o;super(),this._onMouseMoveOrRelevantKeyDown=this._register(new fe),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new fe),this.onExecute=this._onExecute.event,this._onCancel=this._register(new fe),this.onCancel=this._onCancel.event,this._editor=e,this._extractLineNumberFromMouseEvent=(o=t?.extractLineNumberFromMouseEvent)!==null&&o!==void 0?o:r=>r.target.position?r.target.position.lineNumber:0,this._opts=WM(this._editor.getOption(78)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(r=>{if(r.hasChanged(78)){let n=WM(this._editor.getOption(78));if(this._opts.equals(n))return;this._opts=n,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(r=>this._onEditorMouseMove(new Rp(r,this._opts)))),this._register(this._editor.onMouseDown(r=>this._onEditorMouseDown(new Rp(r,this._opts)))),this._register(this._editor.onMouseUp(r=>this._onEditorMouseUp(new Rp(r,this._opts)))),this._register(this._editor.onKeyDown(r=>this._onEditorKeyDown(new by(r,this._opts)))),this._register(this._editor.onKeyUp(r=>this._onEditorKeyUp(new by(r,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(r=>this._onDidChangeCursorSelection(r))),this._register(this._editor.onDidChangeModel(r=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(r=>{(r.scrollTopChanged||r.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=this._extractLineNumberFromMouseEvent(e)}_onEditorMouseUp(e){let t=this._extractLineNumberFromMouseEvent(e);this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}};Ze();X();pt();ge();Ol();Ci();var Bp=class{constructor(e,t){this.range=e,this.direction=t}},dS=class i{constructor(e,t,o){this.hint=e,this.anchor=t,this.provider=o,this._isResolved=!1}with(e){let t=new i(this.hint,e.anchor,this.provider);return t._isResolved=this._isResolved,t._currentResolve=this._currentResolve,t}async resolve(e){if(typeof this.provider.resolveInlayHint=="function"){if(this._currentResolve)return await this._currentResolve,e.isCancellationRequested?void 0:this.resolve(e);this._isResolved||(this._currentResolve=this._doResolve(e).finally(()=>this._currentResolve=void 0)),await this._currentResolve}}async _doResolve(e){var t,o,r;try{let n=await Promise.resolve(this.provider.resolveInlayHint(this.hint,e));this.hint.tooltip=(t=n?.tooltip)!==null&&t!==void 0?t:this.hint.tooltip,this.hint.label=(o=n?.label)!==null&&o!==void 0?o:this.hint.label,this.hint.textEdits=(r=n?.textEdits)!==null&&r!==void 0?r:this.hint.textEdits,this._isResolved=!0}catch(n){$e(n),this._isResolved=!1}}},cu=class i{static async create(e,t,o,r){let n=[],s=e.ordered(t).reverse().map(a=>o.map(async c=>{try{let h=await a.provideInlayHints(t,c,r);(h?.hints.length||a.onDidChangeInlayHints)&&n.push([h??i._emptyInlayHintList,a])}catch(h){$e(h)}}));if(await Promise.all(s.flat()),r.isCancellationRequested||t.isDisposed())throw new dd;return new i(o,n,t)}constructor(e,t,o){this._disposables=new H,this.ranges=e,this.provider=new Set;let r=[];for(let[n,s]of t){this._disposables.add(n),this.provider.add(s);for(let a of n.hints){let c=o.validatePosition(a.position),h="before",p=i._getRangeAtPosition(o,c),g;p.getStartPosition().isBefore(c)?(g=T.fromPositions(p.getStartPosition(),c),h="after"):(g=T.fromPositions(c,p.getEndPosition()),h="before"),r.push(new dS(a,new Bp(g,h),s))}}this.items=r.sort((n,s)=>Y.compare(n.hint.position,s.hint.position))}dispose(){this._disposables.dispose()}static _getRangeAtPosition(e,t){let o=t.lineNumber,r=e.getWordAtPosition(t);if(r)return new T(o,r.startColumn,o,r.endColumn);e.tokenization.tokenizeIfCheap(o);let n=e.tokenization.getLineTokens(o),s=t.column-1,a=n.findTokenIndexAtOffset(s),c=n.getStartOffset(a),h=n.getEndOffset(a);return h-c===1&&(c===s&&a>1?(c=n.getStartOffset(a-1),h=n.getEndOffset(a-1)):h===s&&a<n.getCount()-1&&(c=n.getStartOffset(a+1),h=n.getEndOffset(a+1))),new T(o,c+1,o,h+1)}};cu._emptyInlayHintList=Object.freeze({dispose(){},hints:[]});function HM(i){return We.from({scheme:Qt.command,path:i.id,query:i.arguments&&encodeURIComponent(JSON.stringify(i.arguments))}).toString()}ze();Wl();yt();ge();fn();Xe();ds();Di();Ci();Xl();xe();Vi();FC();Vi();Ii();Ge();Rt();Me();Je();Bi();var Ej=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Ns=function(i,e){return function(t,o){e(t,o,i)}},nr=class extends ZF{constructor(e,t,o,r,n,s,a,c,h,p,g,f,_){super(e,he(U({},r.getRawOptions()),{overflowWidgetsDomNode:r.getOverflowWidgetsDomNode()}),o,n,s,a,c,h,p,g,f,_),this._parentEditor=r,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(r.onDidChangeConfiguration(y=>this._onParentConfigurationChanged(y)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){ld(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};nr=Ej([Ns(4,ce),Ns(5,tt),Ns(6,ht),Ns(7,ve),Ns(8,mi),Ns(9,Pt),Ns(10,Ia),Ns(11,Ye),Ns(12,J)],nr);pt();ge();it();Jt();Xe();Ze();ds();X();Vi();pt();ge();ze();Wl();xi();to();Dn();nt();FC();xe();Vi();ze();Dn();X();FC();ge();gi();var zM=new Re(new Br(0,122,204)),Aj={showArrow:!0,showFrame:!0,className:"",frameColor:zM,arrowColor:zM,keepEditorSelection:!1},Tj="vs.editor.contrib.zoneWidget",uS=class{constructor(e,t,o,r,n,s,a,c){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=o,this.heightInLines=r,this.showInHiddenAreas=a,this.ordinal=c,this._onDomNodeTop=n,this._onComputedHeight=s}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}},hS=class{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}},Dy=class i{constructor(e){this._editor=e,this._ruleName=i._IdGenerator.nextId(),this._decorations=this._editor.createDecorationsCollection(),this._color=null,this._height=-1}dispose(){this.hide(),qC(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){qC(this._ruleName),Pk(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px !important; margin-left: -${this._height}px; `)}show(e){e.column===1&&(e={lineNumber:e.lineNumber,column:2}),this._decorations.set([{range:T.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._decorations.clear()}};Dy._IdGenerator=new yL(".arrow-decoration-");var Cy=class{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._viewZone=null,this._disposables=new H,this.container=null,this._isShowing=!1,this.editor=e,this._positionMarkerId=this.editor.createDecorationsCollection(),this.options=VP(t),ld(this.options,Aj,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(o=>{let r=this._getWidth(o);this.domNode.style.width=r+"px",this.domNode.style.left=this._getLeft(o)+"px",this._onWidth(r)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this._positionMarkerId.clear(),this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new Dy(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){let e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){let e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){var t;if(this.domNode.style.height=`${e}px`,this.container){let o=e-this._decoratingElementsHeight();this.container.style.height=`${o}px`;let r=this.editor.getLayoutInfo();this._doLayout(o,this._getWidth(r))}(t=this._resizeSash)===null||t===void 0||t.layout()}get position(){let e=this._positionMarkerId.getRange(0);if(e)return e.getStartPosition()}show(e,t){let o=T.isIRange(e)?T.lift(e):T.fromPositions(e);this._isShowing=!0,this._showImpl(o,t),this._isShowing=!1,this._positionMarkerId.set([{range:o,options:ke.EMPTY}])}hide(){var e;this._viewZone&&(this.editor.changeViewZones(t=>{this._viewZone&&t.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),(e=this._arrow)===null||e===void 0||e.hide(),this._positionMarkerId.clear()}_decoratingElementsHeight(){let e=this.editor.getOption(67),t=0;if(this.options.showArrow){let o=Math.round(e/3);t+=2*o}if(this.options.showFrame){let o=Math.round(e/9);t+=2*o}return t}_showImpl(e,t){let o=e.getStartPosition(),r=this.editor.getLayoutInfo(),n=this._getWidth(r);this.domNode.style.width=`${n}px`,this.domNode.style.left=this._getLeft(r)+"px";let s=document.createElement("div");s.style.overflow="hidden";let a=this.editor.getOption(67);if(!this.options.allowUnlimitedHeight){let f=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,f)}let c=0,h=0;if(this._arrow&&this.options.showArrow&&(c=Math.round(a/3),this._arrow.height=c,this._arrow.show(o)),this.options.showFrame&&(h=Math.round(a/9)),this.editor.changeViewZones(f=>{this._viewZone&&f.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new uS(s,o.lineNumber,o.column,t,_=>this._onViewZoneTop(_),_=>this._onViewZoneHeight(_),this.options.showInHiddenAreas,this.options.ordinal),this._viewZone.id=f.addZone(this._viewZone),this._overlayWidget=new hS(Tj+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){let f=this.options.frameWidth?this.options.frameWidth:h;this.container.style.borderTopWidth=f+"px",this.container.style.borderBottomWidth=f+"px"}let p=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=c+"px",this.container.style.height=p+"px",this.container.style.overflow="hidden"),this._doLayout(p,n),this.options.keepEditorSelection||this.editor.setSelection(e);let g=this.editor.getModel();if(g){let f=g.validateRange(new T(e.startLineNumber,1,e.endLineNumber+1,1));this.revealRange(f,f.startLineNumber===g.getLineCount())}}revealRange(e,t){t?this.editor.revealLineNearTop(e.endLineNumber,0):this.editor.revealRange(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new Ps(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){let o=(t.currentY-e.startY)/this.editor.getOption(67),r=o<0?Math.ceil(o):Math.floor(o),n=e.heightInLines+r;n>5&&n<35&&this._relayout(n)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){let e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}};re();Me();gs();Je();Ri();var VM=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},UM=function(i,e){return function(t,o){e(t,o,i)}},pS=zi("IPeekViewService");Ui(pS,class{constructor(){this._widgets=new Map}addExclusiveWidget(i,e){let t=this._widgets.get(i);t&&(t.listener.dispose(),t.widget.dispose());let o=()=>{let r=this._widgets.get(i);r&&r.widget===e&&(r.listener.dispose(),this._widgets.delete(i))};this._widgets.set(i,{widget:e,listener:e.onDidClose(o)})}},1);var Li;(function(i){i.inPeekEditor=new Ee("inReferenceSearchEditor",!0,b("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),i.notInPeekEditor=i.inPeekEditor.toNegated()})(Li||(Li={}));var Wp=class{constructor(e,t){e instanceof nr&&Li.inPeekEditor.bindTo(t)}dispose(){}};Wp.ID="editor.contrib.referenceController";Wp=VM([UM(1,ve)],Wp);le(Wp.ID,Wp,0);function qM(i){let e=i.get(tt).getFocusedCodeEditor();return e instanceof nr?e.getParentEditor():e}var Ij={headerBackgroundColor:Re.white,primaryHeadingColor:Re.fromHex("#333333"),secondaryHeadingColor:Re.fromHex("#6c6c6cb3")},du=class extends Cy{constructor(e,t,o){super(e,t),this.instantiationService=o,this._onDidClose=new fe,this.onDidClose=this._onDidClose.event,ld(this.options,Ij,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){let t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();let e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=te(".head"),this._bodyElement=te(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){this._titleElement=te(".peekview-title"),this.options.supportOnTitleClick&&(this._titleElement.classList.add("clickable"),Qo(this._titleElement,"click",n=>this._onTitleClick(n))),Z(this._headElement,this._titleElement),this._fillTitleIcon(this._titleElement),this._primaryHeading=te("span.filename"),this._secondaryHeading=te("span.dirname"),this._metaHeading=te("span.meta"),Z(this._titleElement,this._primaryHeading,this._secondaryHeading,this._metaHeading);let o=te(".peekview-actions");Z(this._headElement,o);let r=this._getActionBarOptions();this._actionbarWidget=new Is(o,r),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new _n("peekview.close",b("label.close","Close"),je.asClassName(be.close),!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:GL.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:Co(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,eo(this._metaHeading)):Mi(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}let o=Math.ceil(this.editor.getOption(67)*1.2),r=Math.round(e-(o+2));this._doLayoutHead(o,t),this._doLayoutBody(r,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};du=VM([UM(2,ce)],du);var KM=ue("peekViewTitle.background",{dark:"#252526",light:"#F3F3F3",hcDark:Re.black,hcLight:Re.white},b("peekViewTitleBackground","Background color of the peek view title area.")),xy=ue("peekViewTitleLabel.foreground",{dark:Re.white,light:Re.black,hcDark:Re.white,hcLight:Sn},b("peekViewTitleForeground","Color of the peek view title.")),Sy=ue("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},b("peekViewTitleInfoForeground","Color of the peek view title info.")),$M=ue("peekView.border",{dark:Zh,light:Zh,hcDark:fr,hcLight:fr},b("peekViewBorder","Color of the peek view borders and arrow.")),GM=ue("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:Re.black,hcLight:Re.white},b("peekViewResultsBackground","Background color of the peek view result list.")),yme=ue("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:Re.white,hcLight:Sn},b("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list.")),vme=ue("peekViewResult.fileForeground",{dark:Re.white,light:"#1E1E1E",hcDark:Re.white,hcLight:Sn},b("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list.")),bme=ue("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},b("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list.")),Dme=ue("peekViewResult.selectionForeground",{dark:Re.white,light:"#6C6C6C",hcDark:Re.white,hcLight:Sn},b("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list.")),$a=ue("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:Re.black,hcLight:Re.white},b("peekViewEditorBackground","Background color of the peek view editor.")),Cme=ue("peekViewEditorGutter.background",{dark:$a,light:$a,hcDark:$a,hcLight:$a},b("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor.")),xme=ue("peekViewEditorStickyScroll.background",{dark:$a,light:$a,hcDark:$a,hcLight:$a},b("peekViewEditorStickScrollBackground","Background color of sticky scroll in the peek view editor.")),Sme=ue("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},b("peekViewResultsMatchHighlight","Match highlight color in the peek view result list.")),wme=ue("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},b("peekViewEditorMatchHighlight","Match highlight color in the peek view editor.")),Eme=ue("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:xn,hcLight:xn},b("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));re();Rt();ei();Me();Je();$C();Ze();nt();X();Ea();ir();Tt();ge();re();var sr=class{constructor(e,t,o,r){this.isProviderFirst=e,this.parent=t,this.link=o,this._rangeCallback=r,this.id=vL.nextId()}get uri(){return this.link.uri}get range(){var e,t;return(t=(e=this._range)!==null&&e!==void 0?e:this.link.targetSelectionRange)!==null&&t!==void 0?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;let t=(e=this.parent.getPreview(this))===null||e===void 0?void 0:e.preview(this.range);return t?b({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"{0} in {1} on line {2} at column {3}",t.value,fo(this.uri),this.range.startLineNumber,this.range.startColumn):b("aria.oneReference","in {0} on line {1} at column {2}",fo(this.uri),this.range.startLineNumber,this.range.startColumn)}},mS=class{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){let o=this._modelReference.object.textEditorModel;if(!o)return;let{startLineNumber:r,startColumn:n,endLineNumber:s,endColumn:a}=e,c=o.getWordUntilPosition({lineNumber:r,column:n-t}),h=new T(r,c.startColumn,r,n),p=new T(s,a,s,1073741824),g=o.getValueInRange(h).replace(/^\s+/,""),f=o.getValueInRange(e),_=o.getValueInRange(p).replace(/\s+$/,"");return{value:g+f+_,highlight:{start:g.length,end:g.length+f.length}}}},Ms=class{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new gr}dispose(){Vt(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){let e=this.children.length;return e===1?b("aria.fileReferences.1","1 symbol in {0}, full path {1}",fo(this.uri),this.uri.fsPath):b("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,fo(this.uri),this.uri.fsPath)}async resolve(e){if(this._previews.size!==0)return this;for(let t of this.children)if(!this._previews.has(t.uri))try{let o=await e.createModelReference(t.uri);this._previews.set(t.uri,new mS(o))}catch(o){Fe(o)}return this}},_o=class i{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new fe,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;let[o]=e;e.sort(i._compareReferences);let r;for(let n of e)if((!r||!d0.isEqual(r.uri,n.uri,!0))&&(r=new Ms(this,n.uri),this.groups.push(r)),r.children.length===0||i._compareReferences(n,r.children[r.children.length-1])!==0){let s=new sr(o===n,r,n,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(s),r.children.push(s)}}dispose(){Vt(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new i(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?b("aria.result.0","No results found"):this.references.length===1?b("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?b("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):b("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){let{parent:o}=e,r=o.children.indexOf(e),n=o.children.length,s=o.parent.groups.length;return s===1||t&&r+1<n||!t&&r>0?(t?r=(r+1)%n:r=(r+n-1)%n,o.children[r]):(r=o.parent.groups.indexOf(o),t?(r=(r+1)%s,o.parent.groups[r].children[0]):(r=(r+s-1)%s,o.parent.groups[r].children[o.parent.groups[r].children.length-1]))}nearestReference(e,t){let o=this.references.map((r,n)=>({idx:n,prefixLen:hn(r.uri.toString(),e.toString()),offsetDist:Math.abs(r.range.startLineNumber-t.lineNumber)*100+Math.abs(r.range.startColumn-t.column)})).sort((r,n)=>r.prefixLen>n.prefixLen?-1:r.prefixLen<n.prefixLen?1:r.offsetDist<n.offsetDist?-1:r.offsetDist>n.offsetDist?1:0)[0];if(o)return this.references[o.idx]}referenceAt(e,t){for(let o of this.references)if(o.uri.toString()===e.toString()&&T.containsPosition(o.range,t))return o}firstReference(){for(let e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return d0.compare(e.uri,t.uri)||T.compareRangesUsingStarts(e.range,t.range)}};ze();Dn();nt();X();Ol();ir();ge();gi();Ii();Vk();Rr();fn();ze();Ss();X();ir();fn();re();Je();var Py=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},ky=function(i,e){return function(t,o){e(t,o,i)}},gS,wy=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof _o||e instanceof Ms}getChildren(e){if(e instanceof _o)return e.groups;if(e instanceof Ms)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}};wy=Py([ky(0,Si)],wy);var Ey=class{getHeight(){return 23}getTemplateId(e){return e instanceof Ms?uu.id:yS.id}},Ay=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof sr){let o=(t=e.parent.getPreview(e))===null||t===void 0?void 0:t.preview(e.range);if(o)return o.value}return fo(e.uri)}};Ay=Py([ky(0,qe)],Ay);var Ty=class{getId(e){return e instanceof sr?e.id:e.uri}},fS=class extends B{constructor(e,t){super(),this._labelService=t;let o=document.createElement("div");o.classList.add("reference-file"),this.file=this._register(new Zf(o,{supportHighlights:!0})),this.badge=new YL(Z(o,te(".count")),{},KL),e.appendChild(o)}set(e,t){let o=Ed(e.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(e.uri),this._labelService.getUriLabel(o,{relative:!0}),{title:this._labelService.getUriLabel(e.uri),matches:t});let r=e.children.length;this.badge.setCount(r),r>1?this.badge.setTitleFormat(b("referencesCount","{0} references",r)):this.badge.setTitleFormat(b("referenceCount","{0} reference",r))}};fS=Py([ky(1,ws)],fS);var uu=gS=class{constructor(e){this._instantiationService=e,this.templateId=gS.id}renderTemplate(e){return this._instantiationService.createInstance(fS,e)}renderElement(e,t,o){o.set(e.element,$l(e.filterData))}disposeTemplate(e){e.dispose()}};uu.id="FileReferencesRenderer";uu=gS=Py([ky(0,ce)],uu);var _S=class extends B{constructor(e){super(),this.label=this._register(new sN(e))}set(e,t){var o;let r=(o=e.parent.getPreview(e))===null||o===void 0?void 0:o.preview(e.range);if(!r||!r.value)this.label.set(`${fo(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{let{value:n,highlight:s}=r;t&&!xs.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(n,$l(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(n,[s]))}}},yS=(()=>{class i{constructor(){this.templateId=i.id}renderTemplate(t){return new _S(t)}renderElement(t,o,r){r.set(t.element,t.filterData)}disposeTemplate(t){t.dispose()}}return i.id="OneReferenceRenderer",i})(),Iy=class{getWidgetAriaLabel(){return b("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}};re();Je();Bi();F6();var kj=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Os=function(i,e){return function(t,o){e(t,o,i)}},Fy=class i{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new H,this._callOnModelChange=new H,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();let e=this._editor.getModel();if(e){for(let t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));let t=[],o=[];for(let r=0,n=e.children.length;r<n;r++){let s=e.children[r];this._decorationIgnoreSet.has(s.id)||s.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:s.range,options:i.DecorationOptions}),o.push(r))}this._editor.changeDecorations(r=>{let n=r.deltaDecorations([],t);for(let s=0;s<n.length;s++)this._decorations.set(n[s],e.children[o[s]])})}_onDecorationChanged(){let e=[],t=this._editor.getModel();if(t){for(let[o,r]of this._decorations){let n=t.getDecorationRange(o);if(!n)continue;let s=!1;if(!T.equalsRange(n,r.range)){if(T.spansMultipleLines(n))s=!0;else{let a=r.range.endColumn-r.range.startColumn,c=n.endColumn-n.startColumn;a!==c&&(s=!0)}s?(this._decorationIgnoreSet.add(r.id),e.push(o)):r.range=n}}for(let o=0,r=e.length;o<r;o++)this._decorations.delete(e[o]);this._editor.removeDecorations(e)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}};Fy.DecorationOptions=ke.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});var Ly=class{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,o;try{let r=JSON.parse(e);t=r.ratio,o=r.heightInLines}catch{}return{ratio:t||.7,heightInLines:o||18}}},vS=class extends nN{},Ny=class extends du{constructor(e,t,o,r,n,s,a,c,h,p,g,f){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},s),this._defaultTreeKeyboardSupport=t,this.layoutData=o,this._textModelResolverService=n,this._instantiationService=s,this._peekViewService=a,this._uriLabel=c,this._undoRedoService=h,this._keybindingService=p,this._languageService=g,this._languageConfigurationService=f,this._disposeOnNewModel=new H,this._callOnDispose=new H,this._onDidSelectReference=new fe,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new st(0,0),this._applyTheme(r.getColorTheme()),this._callOnDispose.add(r.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),Vt(this._preview),Vt(this._previewNotAvailableMessage),Vt(this._tree),Vt(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){let t=e.getColor($M)||Re.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(KM)||Re.transparent,primaryHeadingColor:e.getColor(xy),secondaryHeadingColor:e.getColor(Sy)})}show(e){super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=Z(e,te("div.messages")),Mi(this._messageContainer),this._splitView=new oN(e,{orientation:1}),this._previewContainer=Z(e,te("div.preview.inline"));let t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!0},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(nr,this._previewContainer,t,{},this.editor),Mi(this._previewContainer),this._previewNotAvailableMessage=new u0(b("missingPreviewMessage","no preview available"),vf,u0.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=Z(e,te("div.ref-tree.inline"));let o={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new Iy,keyboardNavigationLabelProvider:this._instantiationService.createInstance(Ay),identityProvider:new Ty,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:GM}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(Qo(this._treeContainer,"keydown",n=>{n.equals(9)&&(this._keybindingService.dispatchEvent(n,n.target),n.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(vS,"ReferencesWidget",this._treeContainer,new Ey,[this._instantiationService.createInstance(uu),this._instantiationService.createInstance(yS)],this._instantiationService.createInstance(wy),o),this._splitView.addView({onDidChange:ft.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:n=>{this._preview.layout({height:this._dim.height,width:n})}},w0.Distribute),this._splitView.addView({onDidChange:ft.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:n=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${n}px`,this._tree.layout(this._dim.height,n)}},w0.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));let r=(n,s)=>{n instanceof sr&&(s==="show"&&this._revealReference(n,!1),this._onDidSelectReference.fire({element:n,kind:s,source:"tree"}))};this._tree.onDidOpen(n=>{n.sideBySide?r(n.element,"side"):n.editorOptions.pinned?r(n.element,"goto"):r(n.element,"show")}),Mi(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new st(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=b("noResults","No results"),eo(this._messageContainer),Promise.resolve(void 0)):(Mi(this._messageContainer),this._decorationsManager=new Fy(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{let{event:t,target:o}=e;if(t.detail!==2)return;let r=this._getFocusedReference();r&&this._onDidSelectReference.fire({element:{uri:r.uri,range:o.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),eo(this._treeContainer),eo(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){let[e]=this._tree.getFocus();if(e instanceof sr)return e;if(e instanceof Ms&&e.children.length>0)return e.children[0]}async revealReference(e){await this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})}async _revealReference(e,t){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==Qt.inMemory?this.setTitle(GF(e.uri),this._uriLabel.getUriLabel(Ed(e.uri))):this.setTitle(b("peekView.alternateTitle","References"));let o=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),await this._tree.expand(e.parent),this._tree.reveal(e));let r=await o;if(!this._model){r.dispose();return}Vt(this._previewModelReference);let n=r.object;if(n){let s=this._preview.getModel()===n.textEditorModel?0:1,a=T.lift(e.range).collapseToStart();this._previewModelReference=r,this._preview.setModel(n.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,s)}else this._preview.setModel(this._previewNotAvailableMessage),r.dispose()}};Ny=kj([Os(3,mi),Os(4,Si),Os(5,ce),Os(6,pS),Os(7,ws),Os(8,QF),Os(9,qe),Os(10,pi),Os(11,Ye)],Ny);it();var Fj=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},hu=function(i,e){return function(t,o){e(t,o,i)}},My,uc=new Ee("referenceSearchVisible",!1,b("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'")),Nn=My=class{static get(e){return e.getContribution(My.ID)}constructor(e,t,o,r,n,s,a,c){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=r,this._notificationService=n,this._instantiationService=s,this._storageService=a,this._configurationService=c,this._disposables=new H,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=uc.bindTo(o)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)===null||e===void 0||e.dispose(),(t=this._model)===null||t===void 0||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,o){let r;if(this._widget&&(r=this._widget.position),this.closeWidget(),r&&e.containsPosition(r))return;this._peekMode=o,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));let n="peekViewLayout",s=Ly.fromJSON(this._storageService.get(n,0,"{}"));this._widget=this._instantiationService.createInstance(Ny,this._editor,this._defaultTreeKeyboardSupport,s),this._widget.setTitle(b("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(n,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(c=>{let{element:h,kind:p}=c;if(h)switch(p){case"open":(c.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(h,!1,!1);break;case"side":this.openReference(h,!0,!1);break;case"goto":o?this._gotoReference(h,!0):this.openReference(h,!1,!0);break}}));let a=++this._requestIdPool;t.then(c=>{var h;if(a!==this._requestIdPool||!this._widget){c.dispose();return}return(h=this._model)===null||h===void 0||h.dispose(),this._model=c,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(b("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));let p=this._editor.getModel().uri,g=new Y(e.startLineNumber,e.startColumn),f=this._model.nearestReference(p,g);if(f)return this._widget.setSelection(f).then(()=>{this._widget&&this._editor.getOption(87)==="editor"&&this._widget.focusOnPreviewEditor()})}})},c=>{this._notificationService.error(c)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}async goToNextOrPreviousReference(e){if(!this._editor.hasModel()||!this._model||!this._widget)return;let t=this._widget.position;if(!t)return;let o=this._model.nearestReference(this._editor.getModel().uri,t);if(!o)return;let r=this._model.nextOrPreviousReference(o,e),n=this._editor.hasTextFocus(),s=this._widget.isPreviewEditorFocused();await this._widget.setSelection(r),await this._gotoReference(r,!1),n?this._editor.focus():this._widget&&s&&this._widget.focusOnPreviewEditor()}async revealReference(e){!this._editor.hasModel()||!this._model||!this._widget||await this._widget.revealReference(e)}closeWidget(e=!0){var t,o;(t=this._widget)===null||t===void 0||t.dispose(),(o=this._model)===null||o===void 0||o.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e,t){var o;(o=this._widget)===null||o===void 0||o.hide(),this._ignoreModelChangeEvent=!0;let r=T.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:r,selectionSource:"code.jump",pinned:t}},this._editor).then(n=>{var s;if(this._ignoreModelChangeEvent=!1,!n||!this._widget){this.closeWidget();return}if(this._editor===n)this._widget.show(r),this._widget.focusOnReferenceTree();else{let a=My.get(n),c=this._model.clone();this.closeWidget(),n.focus(),a?.toggleWidget(r,mt(h=>Promise.resolve(c)),(s=this._peekMode)!==null&&s!==void 0?s:!1)}},n=>{this._ignoreModelChangeEvent=!1,Fe(n)})}openReference(e,t,o){t||this.closeWidget();let{uri:r,range:n}=e;this._editorService.openCodeEditor({resource:r,options:{selection:n,selectionSource:"code.jump",pinned:o}},this._editor,t)}};Nn.ID="editor.contrib.referencesController";Nn=My=Fj([hu(2,ve),hu(3,tt),hu(4,Pt),hu(5,ce),hu(6,To),hu(7,Oe)],Nn);function hc(i,e){let t=qM(i);if(!t)return;let o=Nn.get(t);o&&e(o)}Zo.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:St(2089,60),when:W.or(uc,Li.inPeekEditor),handler(i){hc(i,e=>{e.changeFocusBetweenPreviewAndReferences()})}});Zo.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:W.or(uc,Li.inPeekEditor),handler(i){hc(i,e=>{e.goToNextOrPreviousReference(!0)})}});Zo.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:W.or(uc,Li.inPeekEditor),handler(i){hc(i,e=>{e.goToNextOrPreviousReference(!1)})}});Ue.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");Ue.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");Ue.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");Ue.registerCommand("closeReferenceSearch",i=>hc(i,e=>e.closeWidget()));Zo.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:W.and(Li.inPeekEditor,W.not("config.editor.stablePeek"))});Zo.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:W.and(uc,W.not("config.editor.stablePeek"),W.or(A.editorTextFocus,rN.negate()))});Zo.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:W.and(uc,A0,T0.negate(),I0.negate()),handler(i){var e;let o=(e=i.get(Qf).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(o)&&o[0]instanceof sr&&hc(i,r=>r.revealReference(o[0]))}});Zo.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:W.and(uc,A0,T0.negate(),I0.negate()),handler(i){var e;let o=(e=i.get(Qf).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(o)&&o[0]instanceof sr&&hc(i,r=>r.openReference(o[0],!0,!0))}});Ue.registerCommand("openReference",i=>{var e;let o=(e=i.get(Qf).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(o)&&o[0]instanceof sr&&hc(i,r=>r.openReference(o[0],!1,!0))});nt();X();ir();xe();Vi();ge();re();Me();gs();Je();$C();var JM=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Hp=function(i,e){return function(t,o){e(t,o,i)}},CS=new Ee("hasSymbols",!1,b("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),jp=zi("ISymbolNavigationService"),bS=class{constructor(e,t,o,r){this._editorService=t,this._notificationService=o,this._keybindingService=r,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=CS.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)===null||e===void 0||e.dispose(),(t=this._currentMessage)===null||t===void 0||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){let t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();let o=new DS(this._editorService),r=o.onDidChange(n=>{if(this._ignoreEditorChange)return;let s=this._editorService.getActiveCodeEditor();if(!s)return;let a=s.getModel(),c=s.getPosition();if(!a||!c)return;let h=!1,p=!1;for(let g of t.references)if(Hf(g.uri,a.uri))h=!0,p=p||T.containsPosition(g.range,c);else if(h)break;(!h||!p)&&this.reset()});this._currentState=LC(o,r)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;let t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:T.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;(e=this._currentMessage)===null||e===void 0||e.dispose();let t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),o=t?b("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):b("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(o)}};bS=JM([Hp(0,ve),Hp(1,tt),Hp(2,Pt),Hp(3,qe)],bS);Ui(jp,bS,1);de(new class extends Bt{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:CS,kbOpts:{weight:100,primary:70}})}runEditorCommand(i,e){return i.get(jp).revealNext(e)}});Zo.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:CS,primary:9,handler(i){i.get(jp).reset()}});var DS=class{constructor(e){this._listener=new Map,this._disposables=new H,this._onDidChange=new fe,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),Vt(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,LC(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))===null||t===void 0||t.dispose(),this._listener.delete(e)}};DS=JM([Hp(0,tt)],DS);re();Wt();Rt();Me();Je();bt();yt();Ze();Ol();xe();Ge();function xS(i,e){return e.uri.scheme===i.uri.scheme?!0:!bk(e.uri,Qt.walkThroughSnippet,Qt.vscodeChatCodeBlock,Qt.vscodeChatCodeCompareBlock,Qt.vscodeCopilotBackingChatCodeBlock)}async function zp(i,e,t,o){let n=t.ordered(i).map(a=>Promise.resolve(o(a,i,e)).then(void 0,c=>{$e(c)})),s=await Promise.all(n);return Qi(s.flat()).filter(a=>xS(i,a))}function pc(i,e,t,o){return zp(e,t,i,(r,n,s)=>r.provideDefinition(n,s,o))}function SS(i,e,t,o){return zp(e,t,i,(r,n,s)=>r.provideDeclaration(n,s,o))}function wS(i,e,t,o){return zp(e,t,i,(r,n,s)=>r.provideImplementation(n,s,o))}function ES(i,e,t,o){return zp(e,t,i,(r,n,s)=>r.provideTypeDefinition(n,s,o))}function Vp(i,e,t,o,r){return zp(e,t,i,async(n,s,a)=>{var c,h;let p=(c=await n.provideReferences(s,a,{includeDeclaration:!0},r))===null||c===void 0?void 0:c.filter(f=>xS(s,f));if(!o||!p||p.length!==2)return p;let g=(h=await n.provideReferences(s,a,{includeDeclaration:!1},r))===null||h===void 0?void 0:h.filter(f=>xS(s,f));return g&&g.length===1?g:p})}async function Up(i){let e=await i(),t=new _o(e,""),o=t.references.map(r=>r.link);return t.dispose(),o}wo("_executeDefinitionProvider",(i,e,t)=>{let o=i.get(J),r=pc(o.definitionProvider,e,t,we.None);return Up(()=>r)});wo("_executeTypeDefinitionProvider",(i,e,t)=>{let o=i.get(J),r=ES(o.typeDefinitionProvider,e,t,we.None);return Up(()=>r)});wo("_executeDeclarationProvider",(i,e,t)=>{let o=i.get(J),r=SS(o.declarationProvider,e,t,we.None);return Up(()=>r)});wo("_executeReferenceProvider",(i,e,t)=>{let o=i.get(J),r=Vp(o.referenceProvider,e,t,!1,we.None);return Up(()=>r)});wo("_executeImplementationProvider",(i,e,t)=>{let o=i.get(J),r=wS(o.implementationProvider,e,t,we.None);return Up(()=>r)});Ge();Oh();var qp,Kp,$p,Oy,Ry,By,Wy,Hy;io.appendMenuItem(Q.EditorContext,{submenu:Q.EditorContextPeek,title:b("peek.submenu","Peek"),group:"navigation",order:100});var mc=class i{static is(e){return!e||typeof e!="object"?!1:!!(e instanceof i||Y.isIPosition(e.position)&&e.model)}constructor(e,t){this.model=e,this.position=t}},Sr=class i extends So{static all(){return i._allSymbolNavigationCommands.values()}static _patchConfig(e){let t=he(U({},e),{f1:!0});if(t.menu)for(let o of Oo.wrap(t.menu))(o.id===Q.EditorContext||o.id===Q.EditorContextPeek)&&(o.when=W.and(e.precondition,o.when));return t}constructor(e,t){super(i._patchConfig(t)),this.configuration=e,i._allSymbolNavigationCommands.set(t.id,this)}runEditorCommand(e,t,o,r){if(!t.hasModel())return Promise.resolve(void 0);let n=e.get(Pt),s=e.get(tt),a=e.get(Es),c=e.get(jp),h=e.get(J),p=e.get(ce),g=t.getModel(),f=t.getPosition(),_=mc.is(o)?o:new mc(g,f),y=new In(t,5),C=pn(this._getLocationModel(h,_.model,_.position,y.token),y.token).then(async x=>{var D;if(!x||y.token.isCancellationRequested)return;ai(x.ariaMessage);let E;if(x.referenceAt(g.uri,f)){let k=this._getAlternativeCommand(t);!i._activeAlternativeCommands.has(k)&&i._allSymbolNavigationCommands.has(k)&&(E=i._allSymbolNavigationCommands.get(k))}let I=x.references.length;if(I===0){if(!this.configuration.muteMessage){let k=g.getWordAtPosition(f);(D=fi.get(t))===null||D===void 0||D.showMessage(this._getNoResultFoundMessage(k),f)}}else if(I===1&&E)i._activeAlternativeCommands.add(this.desc.id),p.invokeFunction(k=>E.runEditorCommand(k,t,o,r).finally(()=>{i._activeAlternativeCommands.delete(this.desc.id)}));else return this._onResult(s,c,t,x,r)},x=>{n.error(x)}).finally(()=>{y.dispose()});return a.showWhile(C,250),C}async _onResult(e,t,o,r,n){let s=this._getGoToPreference(o);if(!(o instanceof nr)&&(this.configuration.openInPeek||s==="peek"&&r.references.length>1))this._openInPeek(o,r,n);else{let a=r.firstReference(),c=r.references.length>1&&s==="gotoAndPeek",h=await this._openReference(o,e,a,this.configuration.openToSide,!c);c&&h?this._openInPeek(h,r,n):r.dispose(),s==="goto"&&t.put(a)}}async _openReference(e,t,o,r,n){let s;if(ek(o)&&(s=o.targetSelectionRange),s||(s=o.range),!s)return;let a=await t.openCodeEditor({resource:o.uri,options:{selection:T.collapseToStart(s),selectionRevealType:3,selectionSource:"code.jump"}},e,r);if(a){if(n){let c=a.getModel(),h=a.createDecorationsCollection([{range:s,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===c&&h.clear()},350)}return a}}_openInPeek(e,t,o){let r=Nn.get(e);r&&e.hasModel()?r.toggleWidget(o??e.getSelection(),mt(n=>Promise.resolve(t)),this.configuration.openInPeek):t.dispose()}};Sr._allSymbolNavigationCommands=new Map;Sr._activeAlternativeCommands=new Set;var Rs=class extends Sr{async _getLocationModel(e,t,o,r){return new _o(await pc(e.definitionProvider,t,o,r),b("def.title","Definitions"))}_getNoResultFoundMessage(e){return e&&e.word?b("noResultWord","No definition found for '{0}'",e.word):b("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleDefinitions}};et((qp=class extends Rs{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:qp.id,title:he(U({},pe("actions.goToDecl.label","Go to Definition")),{mnemonicTitle:b({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")}),precondition:A.hasDefinitionProvider,keybinding:[{when:A.editorTextFocus,primary:70,weight:100},{when:W.and(A.editorTextFocus,E0),primary:2118,weight:100}],menu:[{id:Q.EditorContext,group:"navigation",order:1.1},{id:Q.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:2}]}),Ue.registerCommandAlias("editor.action.goToDeclaration",qp.id)}},qp.id="editor.action.revealDefinition",qp));et((Kp=class extends Rs{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:Kp.id,title:pe("actions.goToDeclToSide.label","Open Definition to the Side"),precondition:W.and(A.hasDefinitionProvider,A.isInEmbeddedEditor.toNegated()),keybinding:[{when:A.editorTextFocus,primary:St(2089,70),weight:100},{when:W.and(A.editorTextFocus,E0),primary:St(2089,2118),weight:100}]}),Ue.registerCommandAlias("editor.action.openDeclarationToTheSide",Kp.id)}},Kp.id="editor.action.revealDefinitionAside",Kp));et(($p=class extends Rs{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:$p.id,title:pe("actions.previewDecl.label","Peek Definition"),precondition:W.and(A.hasDefinitionProvider,Li.notInPeekEditor,A.isInEmbeddedEditor.toNegated()),keybinding:{when:A.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menu:{id:Q.EditorContextPeek,group:"peek",order:2}}),Ue.registerCommandAlias("editor.action.previewDeclaration",$p.id)}},$p.id="editor.action.peekDefinition",$p));var jy=class extends Sr{async _getLocationModel(e,t,o,r){return new _o(await SS(e.declarationProvider,t,o,r),b("decl.title","Declarations"))}_getNoResultFoundMessage(e){return e&&e.word?b("decl.noResultWord","No declaration found for '{0}'",e.word):b("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(58).multipleDeclarations}};et((Oy=class extends jy{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:Oy.id,title:he(U({},pe("actions.goToDeclaration.label","Go to Declaration")),{mnemonicTitle:b({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")}),precondition:W.and(A.hasDeclarationProvider,A.isInEmbeddedEditor.toNegated()),menu:[{id:Q.EditorContext,group:"navigation",order:1.3},{id:Q.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}_getNoResultFoundMessage(e){return e&&e.word?b("decl.noResultWord","No declaration found for '{0}'",e.word):b("decl.generic.noResults","No declaration found")}},Oy.id="editor.action.revealDeclaration",Oy));et(class extends jy{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",title:pe("actions.peekDecl.label","Peek Declaration"),precondition:W.and(A.hasDeclarationProvider,Li.notInPeekEditor,A.isInEmbeddedEditor.toNegated()),menu:{id:Q.EditorContextPeek,group:"peek",order:3}})}});var zy=class extends Sr{async _getLocationModel(e,t,o,r){return new _o(await ES(e.typeDefinitionProvider,t,o,r),b("typedef.title","Type Definitions"))}_getNoResultFoundMessage(e){return e&&e.word?b("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):b("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleTypeDefinitions}};et((Ry=class extends zy{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:Ry.ID,title:he(U({},pe("actions.goToTypeDefinition.label","Go to Type Definition")),{mnemonicTitle:b({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")}),precondition:A.hasTypeDefinitionProvider,keybinding:{when:A.editorTextFocus,primary:0,weight:100},menu:[{id:Q.EditorContext,group:"navigation",order:1.4},{id:Q.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}},Ry.ID="editor.action.goToTypeDefinition",Ry));et((By=class extends zy{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:By.ID,title:pe("actions.peekTypeDefinition.label","Peek Type Definition"),precondition:W.and(A.hasTypeDefinitionProvider,Li.notInPeekEditor,A.isInEmbeddedEditor.toNegated()),menu:{id:Q.EditorContextPeek,group:"peek",order:4}})}},By.ID="editor.action.peekTypeDefinition",By));var Vy=class extends Sr{async _getLocationModel(e,t,o,r){return new _o(await wS(e.implementationProvider,t,o,r),b("impl.title","Implementations"))}_getNoResultFoundMessage(e){return e&&e.word?b("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):b("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(58).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(58).multipleImplementations}};et((Wy=class extends Vy{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:Wy.ID,title:he(U({},pe("actions.goToImplementation.label","Go to Implementations")),{mnemonicTitle:b({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")}),precondition:A.hasImplementationProvider,keybinding:{when:A.editorTextFocus,primary:2118,weight:100},menu:[{id:Q.EditorContext,group:"navigation",order:1.45},{id:Q.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:4}]})}},Wy.ID="editor.action.goToImplementation",Wy));et((Hy=class extends Vy{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:Hy.ID,title:pe("actions.peekImplementation.label","Peek Implementations"),precondition:W.and(A.hasImplementationProvider,Li.notInPeekEditor,A.isInEmbeddedEditor.toNegated()),keybinding:{when:A.editorTextFocus,primary:3142,weight:100},menu:{id:Q.EditorContextPeek,group:"peek",order:5}})}},Hy.ID="editor.action.peekImplementation",Hy));var Uy=class extends Sr{_getNoResultFoundMessage(e){return e?b("references.no","No references found for '{0}'",e.word):b("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(58).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(58).multipleReferences}};et(class extends Uy{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",title:he(U({},pe("goToReferences.label","Go to References")),{mnemonicTitle:b({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")}),precondition:W.and(A.hasReferenceProvider,Li.notInPeekEditor,A.isInEmbeddedEditor.toNegated()),keybinding:{when:A.editorTextFocus,primary:1094,weight:100},menu:[{id:Q.EditorContext,group:"navigation",order:1.45},{id:Q.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:5}]})}async _getLocationModel(e,t,o,r){return new _o(await Vp(e.referenceProvider,t,o,!0,r),b("ref.title","References"))}});et(class extends Uy{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",title:pe("references.action.label","Peek References"),precondition:W.and(A.hasReferenceProvider,Li.notInPeekEditor,A.isInEmbeddedEditor.toNegated()),menu:{id:Q.EditorContextPeek,group:"peek",order:6}})}async _getLocationModel(e,t,o,r){return new _o(await Vp(e.referenceProvider,t,o,!1,r),b("ref.title","References"))}});var AS=class extends Sr{constructor(e,t,o){super(e,{id:"editor.action.goToLocation",title:pe("label.generic","Go to Any Symbol"),precondition:W.and(Li.notInPeekEditor,A.isInEmbeddedEditor.toNegated())}),this._references=t,this._gotoMultipleBehaviour=o}async _getLocationModel(e,t,o,r){return new _o(this._references,b("generic.title","Locations"))}_getNoResultFoundMessage(e){return e&&b("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return(t=this._gotoMultipleBehaviour)!==null&&t!==void 0?t:e.getOption(58).multipleReferences}_getAlternativeCommand(){return""}};Ue.registerCommand({id:"editor.action.goToLocations",metadata:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:We},{name:"position",description:"The position at which to start",constraint:Y.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:async(i,e,t,o,r,n,s)=>{He(We.isUri(e)),He(Y.isIPosition(t)),He(Array.isArray(o)),He(typeof r>"u"||typeof r=="string"),He(typeof s>"u"||typeof s=="boolean");let a=i.get(tt),c=await a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(P0(c))return c.setPosition(t),c.revealPositionInCenterIfOutsideViewport(t,0),c.invokeWithinContext(h=>{let p=new class extends AS{_getNoResultFoundMessage(g){return n||super._getNoResultFoundMessage(g)}}({muteMessage:!n,openInPeek:!!s,openToSide:!1},o,r);h.get(ce).invokeFunction(p.run.bind(p),c)})}});Ue.registerCommand({id:"editor.action.peekLocations",metadata:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:We},{name:"position",description:"The position at which to start",constraint:Y.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"}]},handler:async(i,e,t,o,r)=>{i.get(ht).executeCommand("editor.action.goToLocations",e,t,o,r,void 0,!0)}});Ue.registerCommand({id:"editor.action.findReferences",handler:(i,e,t)=>{He(We.isUri(e)),He(Y.isIPosition(t));let o=i.get(J),r=i.get(tt);return r.openCodeEditor({resource:e},r.getFocusedCodeEditor()).then(n=>{if(!P0(n)||!n.hasModel())return;let s=Nn.get(n);if(!s)return;let a=mt(h=>Vp(o.referenceProvider,n.getModel(),Y.lift(t),!1,h).then(p=>new _o(p,b("ref.title","References")))),c=new T(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(s.toggleWidget(c,a,!1))})}});Ue.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");Wt();Rt();Me();Je();async function XM(i,e,t,o){var r;let n=i.get(Si),s=i.get(_r),a=i.get(ht),c=i.get(ce),h=i.get(Pt);if(await o.item.resolve(we.None),!o.part.location)return;let p=o.part.location,g=[],f=new Set(io.getMenuItems(Q.EditorContext).map(y=>Bk(y)?y.command.id:Ra()));for(let y of Sr.all())f.has(y.desc.id)&&g.push(new _n(y.desc.id,yn.label(y.desc,{renderShortTitle:!0}),void 0,!0,async()=>{let C=await n.createModelReference(p.uri);try{let x=new mc(C.object.textEditorModel,T.getStartPosition(p.range)),D=o.item.anchor.range;await c.invokeFunction(y.runEditorCommand.bind(y),e,x,D)}finally{C.dispose()}}));if(o.part.command){let{command:y}=o.part;g.push(new ps),g.push(new _n(y.id,y.title,void 0,!0,async()=>{var C;try{await a.executeCommand(y.id,...(C=y.arguments)!==null&&C!==void 0?C:[])}catch(x){h.notify({severity:Td.Error,source:o.item.provider.displayName,message:x})}}))}let _=e.getOption(127);s.showContextMenu({domForShadowRoot:_&&(r=e.getDomNode())!==null&&r!==void 0?r:void 0,getAnchor:()=>{let y=$t(t);return{x:y.left,y:y.top+y.height+8}},getActions:()=>g,onHide:()=>{e.focus()},autoSelectFirstItem:!0})}async function qy(i,e,t,o){let n=await i.get(Si).createModelReference(o.uri);await t.invokeWithinContext(async s=>{let a=e.hasSideBySideModifier,c=s.get(ve),h=Li.inPeekEditor.getValue(c),p=!a&&t.getOption(88)&&!h;return new Rs({openToSide:a,openInPeek:p,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(s,new mc(n.object.textEditorModel,T.getStartPosition(o.range)),T.lift(o.range))}),n.dispose()}Rt();gs();Je();Ri();Bi();var Lj=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},pu=function(i,e){return function(t,o){e(t,o,i)}},mu,TS=class i{constructor(){this._entries=new vn(50)}get(e){let t=i._key(e);return this._entries.get(t)}set(e,t){let o=i._key(e);this._entries.set(o,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}},YM=zi("IInlayHintsCache");Ui(YM,TS,1);var gu=class{constructor(e,t){this.item=e,this.index=t}get part(){let e=this.item.hint.label;return typeof e=="string"?{label:e}:e[this.index]}},IS=class{constructor(e,t){this.part=e,this.hasTriggerModifier=t}},Mn=mu=class{static get(e){var t;return(t=e.getContribution(mu.ID))!==null&&t!==void 0?t:void 0}constructor(e,t,o,r,n,s,a){this._editor=e,this._languageFeaturesService=t,this._inlayHintsCache=r,this._commandService=n,this._notificationService=s,this._instaService=a,this._disposables=new H,this._sessionDisposables=new H,this._decorationsMetadata=new Map,this._ruleFactory=new If(this._editor),this._activeRenderMode=0,this._debounceInfo=o.for(t.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(t.inlayHintsProvider.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(c=>{c.hasChanged(141)&&this._update()})),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){this._sessionDisposables.clear(),this._removeAllDecorations();let e=this._editor.getOption(141);if(e.enabled==="off")return;let t=this._editor.getModel();if(!t||!this._languageFeaturesService.inlayHintsProvider.has(t))return;if(e.enabled==="on")this._activeRenderMode=0;else{let a,c;e.enabled==="onUnlessPressed"?(a=0,c=1):(a=1,c=0),this._activeRenderMode=a,this._sessionDisposables.add(Lk.getInstance().event(h=>{if(!this._editor.hasModel())return;let p=h.altKey&&h.ctrlKey&&!(h.shiftKey||h.metaKey)?c:a;if(p!==this._activeRenderMode){this._activeRenderMode=p;let g=this._editor.getModel(),f=this._copyInlayHintsWithCurrentAnchor(g);this._updateHintsDecorators([g.getFullModelRange()],f),s.schedule(0)}}))}let o=this._inlayHintsCache.get(t);o&&this._updateHintsDecorators([t.getFullModelRange()],o),this._sessionDisposables.add(Ve(()=>{t.isDisposed()||this._cacheHintsForFastRestore(t)}));let r,n=new Set,s=new ut(async()=>{let a=Date.now();r?.dispose(!0),r=new _t;let c=t.onWillDispose(()=>r?.cancel());try{let h=r.token,p=await cu.create(this._languageFeaturesService.inlayHintsProvider,t,this._getHintsRanges(),h);if(s.delay=this._debounceInfo.update(t,Date.now()-a),h.isCancellationRequested){p.dispose();return}for(let g of p.provider)typeof g.onDidChangeInlayHints=="function"&&!n.has(g)&&(n.add(g),this._sessionDisposables.add(g.onDidChangeInlayHints(()=>{s.isScheduled()||s.schedule()})));this._sessionDisposables.add(p),this._updateHintsDecorators(p.ranges,p.items),this._cacheHintsForFastRestore(t)}catch(h){Fe(h)}finally{r.dispose(),c.dispose()}},this._debounceInfo.get(t));this._sessionDisposables.add(s),this._sessionDisposables.add(Ve(()=>r?.dispose(!0))),s.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange(a=>{(a.scrollTopChanged||!s.isScheduled())&&s.schedule()})),this._sessionDisposables.add(this._editor.onDidChangeModelContent(a=>{r?.cancel();let c=Math.max(s.delay,1250);s.schedule(c)})),this._sessionDisposables.add(this._installDblClickGesture(()=>s.schedule(0))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){let e=new H,t=e.add(new Ln(this._editor)),o=new H;return e.add(o),e.add(t.onMouseMoveOrRelevantKeyDown(r=>{let[n]=r,s=this._getInlayHintLabelPart(n),a=this._editor.getModel();if(!s||!a){o.clear();return}let c=new _t;o.add(Ve(()=>c.dispose(!0))),s.item.resolve(c.token),this._activeInlayHintPart=s.part.command||s.part.location?new IS(s,n.hasTriggerModifier):void 0;let h=a.validatePosition(s.item.hint.position).lineNumber,p=new T(h,1,h,a.getLineMaxColumn(h)),g=this._getInlineHintsForRange(p);this._updateHintsDecorators([p],g),o.add(Ve(()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([p],g)}))})),e.add(t.onCancel(()=>o.clear())),e.add(t.onExecute(async r=>{let n=this._getInlayHintLabelPart(r);if(n){let s=n.part;s.location?this._instaService.invokeFunction(qy,r,this._editor,s.location):rk.is(s.command)&&await this._invokeCommand(s.command,n.item)}})),e}_getInlineHintsForRange(e){let t=new Set;for(let o of this._decorationsMetadata.values())e.containsRange(o.item.anchor.range)&&t.add(o.item);return Array.from(t)}_installDblClickGesture(e){return this._editor.onMouseUp(async t=>{if(t.event.detail!==2)return;let o=this._getInlayHintLabelPart(t);if(o&&(t.event.preventDefault(),await o.item.resolve(we.None),zt(o.item.hint.textEdits))){let r=o.item.hint.textEdits.map(n=>ct.replace(T.lift(n.range),n.text));this._editor.executeEdits("inlayHint.default",r),e()}})}_installContextMenu(){return this._editor.onContextMenu(async e=>{if(!kk(e.event.target))return;let t=this._getInlayHintLabelPart(e);t&&await this._instaService.invokeFunction(XM,this._editor,e.event.target,t)})}_getInlayHintLabelPart(e){var t;if(e.target.type!==6)return;let o=(t=e.target.detail.injectedText)===null||t===void 0?void 0:t.options;if(o instanceof Ad&&o?.attachedData instanceof gu)return o.attachedData}async _invokeCommand(e,t){var o;try{await this._commandService.executeCommand(e.id,...(o=e.arguments)!==null&&o!==void 0?o:[])}catch(r){this._notificationService.notify({severity:Td.Error,source:t.provider.displayName,message:r})}}_cacheHintsForFastRestore(e){let t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}_copyInlayHintsWithCurrentAnchor(e){let t=new Map;for(let[o,r]of this._decorationsMetadata){if(t.has(r.item))continue;let n=e.getDecorationRange(o);if(n){let s=new Bp(n,r.item.anchor.direction),a=r.item.with({anchor:s});t.set(r.item,a)}}return Array.from(t.values())}_getHintsRanges(){let t=this._editor.getModel(),o=this._editor.getVisibleRangesPlusViewportAboveBelow(),r=[];for(let n of o.sort(T.compareRangesUsingStarts)){let s=t.validateRange(new T(n.startLineNumber-30,n.startColumn,n.endLineNumber+30,n.endColumn));r.length===0||!T.areIntersectingOrTouching(r[r.length-1],s)?r.push(s):r[r.length-1]=T.plusRange(r[r.length-1],s)}return r}_updateHintsDecorators(e,t){var o,r;let n=[],s=(x,D,E,I,k)=>{let N={content:E,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:D.className,cursorStops:I,attachedData:k};n.push({item:x,classNameRef:D,decoration:{range:x.anchor.range,options:{description:"InlayHint",showIfCollapsed:x.anchor.range.isEmpty(),collapseOnReplaceEdit:!x.anchor.range.isEmpty(),stickiness:0,[x.anchor.direction]:this._activeRenderMode===0?N:void 0}}})},a=(x,D)=>{let E=this._ruleFactory.createClassNameRef({width:`${c/3|0}px`,display:"inline-block"});s(x,E,"\u200A",D?fs.Right:fs.None)},{fontSize:c,fontFamily:h,padding:p,isUniform:g}=this._getLayoutInfo(),f="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(f,h);let _={line:0,totalLen:0};for(let x of t){if(_.line!==x.anchor.range.startLineNumber&&(_={line:x.anchor.range.startLineNumber,totalLen:0}),_.totalLen>mu._MAX_LABEL_LEN)continue;x.hint.paddingLeft&&a(x,!1);let D=typeof x.hint.label=="string"?[{label:x.hint.label}]:x.hint.label;for(let E=0;E<D.length;E++){let I=D[E],k=E===0,N=E===D.length-1,O={fontSize:`${c}px`,fontFamily:`var(${f}), ${nf.fontFamily}`,verticalAlign:g?"baseline":"middle",unicodeBidi:"isolate"};zt(x.hint.textEdits)&&(O.cursor="default"),this._fillInColors(O,x.hint),(I.command||I.location)&&((o=this._activeInlayHintPart)===null||o===void 0?void 0:o.part.item)===x&&this._activeInlayHintPart.part.index===E&&(O.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(O.color=It(uF),O.cursor="pointer")),p&&(k&&N?(O.padding=`1px ${Math.max(1,c/4)|0}px`,O.borderRadius=`${c/4|0}px`):k?(O.padding=`1px 0 1px ${Math.max(1,c/4)|0}px`,O.borderRadius=`${c/4|0}px 0 0 ${c/4|0}px`):N?(O.padding=`1px ${Math.max(1,c/4)|0}px 1px 0`,O.borderRadius=`0 ${c/4|0}px ${c/4|0}px 0`):O.padding="1px 0 1px 0");let V=I.label;_.totalLen+=V.length;let K=!1,$=_.totalLen-mu._MAX_LABEL_LEN;if($>0&&(V=V.slice(0,-$)+"\u2026",K=!0),s(x,this._ruleFactory.createClassNameRef(O),Nj(V),N&&!x.hint.paddingRight?fs.Right:fs.None,new gu(x,E)),K)break}if(x.hint.paddingRight&&a(x,!0),n.length>mu._MAX_DECORATORS)break}let y=[];for(let[x,D]of this._decorationsMetadata){let E=(r=this._editor.getModel())===null||r===void 0?void 0:r.getDecorationRange(x);E&&e.some(I=>I.containsRange(E))&&(y.push(x),D.classNameRef.dispose(),this._decorationsMetadata.delete(x))}let C=Tn.capture(this._editor);this._editor.changeDecorations(x=>{let D=x.deltaDecorations(y,n.map(E=>E.decoration));for(let E=0;E<D.length;E++){let I=n[E];this._decorationsMetadata.set(D[E],I)}}),C.restore(this._editor)}_fillInColors(e,t){t.kind===OC.Parameter?(e.backgroundColor=It(xF),e.color=It(CF)):t.kind===OC.Type?(e.backgroundColor=It(DF),e.color=It(bF)):(e.backgroundColor=It(vF),e.color=It(yF))}_getLayoutInfo(){let e=this._editor.getOption(141),t=e.padding,o=this._editor.getOption(52),r=this._editor.getOption(49),n=e.fontSize;(!n||n<5||n>o)&&(n=o);let s=e.fontFamily||r;return{fontSize:n,fontFamily:s,padding:t,isUniform:!t&&s===r&&n===o}}_removeAllDecorations(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(let e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}};Mn.ID="editor.contrib.InlayHints";Mn._MAX_DECORATORS=1500;Mn._MAX_LABEL_LEN=43;Mn=mu=Lj([pu(1,J),pu(2,li),pu(3,YM),pu(4,ht),pu(5,Pt),pu(6,ce)],Mn);function Nj(i){return i.replace(/[ \t]/g,"\xA0")}Ue.registerCommand("_executeInlayHintProvider",async(i,...e)=>{let[t,o]=e;He(We.isUri(t)),He(T.isIRange(o));let{inlayHintsProvider:r}=i.get(J),n=await i.get(Si).createModelReference(t);try{let s=await cu.create(r,n.object.textEditorModel,[T.lift(o)],we.None),a=s.items.map(c=>c.hint);return setTimeout(()=>s.dispose(),0),a}finally{n.dispose()}});ei();Ge();re();Zi();bt();var Mj=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},gc=function(i,e){return function(t,o){e(t,o,i)}},Ky=class extends xr{constructor(e,t,o,r){super(10,t,e.item.anchor.range,o,r,!0),this.part=e}},fu=class extends Ka{constructor(e,t,o,r,n,s,a,c){super(e,t,o,s,c,r,n),this._resolverService=a,this.hoverOrdinal=6}suggestHoverAnchor(e){var t;if(!Mn.get(this._editor)||e.target.type!==6)return null;let r=(t=e.target.detail.injectedText)===null||t===void 0?void 0:t.options;return r instanceof Ad&&r.attachedData instanceof gu?new Ky(r.attachedData,this,e.event.posx,e.event.posy):null}computeSync(){return[]}computeAsync(e,t,o){return e instanceof Ky?new mo(async r=>{let{part:n}=e;if(await n.item.resolve(o),o.isCancellationRequested)return;let s;typeof n.item.hint.tooltip=="string"?s=new Gt().appendText(n.item.hint.tooltip):n.item.hint.tooltip&&(s=n.item.hint.tooltip),s&&r.emitOne(new ko(this,e.range,[s],!1,0)),zt(n.item.hint.textEdits)&&r.emitOne(new ko(this,e.range,[new Gt().appendText(b("hint.dbl","Double-click to insert"))],!1,10001));let a;if(typeof n.part.tooltip=="string"?a=new Gt().appendText(n.part.tooltip):n.part.tooltip&&(a=n.part.tooltip),a&&r.emitOne(new ko(this,e.range,[a],!1,1)),n.part.location||n.part.command){let h,g=this._editor.getOption(78)==="altKey"?po?b("links.navigate.kb.meta.mac","cmd + click"):b("links.navigate.kb.meta","ctrl + click"):po?b("links.navigate.kb.alt.mac","option + click"):b("links.navigate.kb.alt","alt + click");n.part.location&&n.part.command?h=new Gt().appendText(b("hint.defAndCommand","Go to Definition ({0}), right click for more",g)):n.part.location?h=new Gt().appendText(b("hint.def","Go to Definition ({0})",g)):n.part.command&&(h=new Gt(`[${b("hint.cmd","Execute Command")}](${HM(n.part.command)} "${n.part.command.title}") (${g})`,{isTrusted:!0})),h&&r.emitOne(new ko(this,e.range,[h],!1,1e4))}let c=await this._resolveInlayHintLabelPartHover(n,o);for await(let h of c)r.emitOne(h)}):mo.EMPTY}async _resolveInlayHintLabelPartHover(e,t){if(!e.part.location)return mo.EMPTY;let{uri:o,range:r}=e.part.location,n=await this._resolverService.createModelReference(o);try{let s=n.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(s)?Op(this._languageFeaturesService.hoverProvider,s,new Y(r.startLineNumber,r.startColumn),t).filter(a=>!Fa(a.hover.contents)).map(a=>new ko(this,e.item.anchor.range,a.hover.contents,!1,2+a.ordinal)):mo.EMPTY}finally{n.dispose()}}};fu=Mj([gc(1,pi),gc(2,Pi),gc(3,qe),gc(4,Cs),gc(5,Oe),gc(6,Si),gc(7,J)],fu);bt();Xe();var $y=class i{get anchor(){return this._anchor}set anchor(e){this._anchor=e}get shouldFocus(){return this._shouldFocus}set shouldFocus(e){this._shouldFocus=e}get source(){return this._source}set source(e){this._source=e}get insistOnKeepingHoverVisible(){return this._insistOnKeepingHoverVisible}set insistOnKeepingHoverVisible(e){this._insistOnKeepingHoverVisible=e}constructor(e,t){this._editor=e,this._participants=t,this._anchor=null,this._shouldFocus=!1,this._source=0,this._insistOnKeepingHoverVisible=!1}static _getLineDecorations(e,t){if(t.type!==1&&!t.supportsMarkerHover)return[];let o=e.getModel(),r=t.range.startLineNumber;if(r>o.getLineCount())return[];let n=o.getLineMaxColumn(r);return e.getLineDecorations(r).filter(s=>{if(s.options.isWholeLine)return!0;let a=s.range.startLineNumber===r?s.range.startColumn:1,c=s.range.endLineNumber===r?s.range.endColumn:n;if(s.options.showIfCollapsed){if(a>t.range.startColumn+1||t.range.endColumn-1>c)return!1}else if(a>t.range.startColumn||t.range.endColumn>c)return!1;return!0})}computeAsync(e){let t=this._anchor;if(!this._editor.hasModel()||!t)return mo.EMPTY;let o=i._getLineDecorations(this._editor,t);return mo.merge(this._participants.map(r=>r.computeAsync?r.computeAsync(t,o,e):mo.EMPTY))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];let e=i._getLineDecorations(this._editor,this._anchor),t=[];for(let o of this._participants)t=t.concat(o.computeSync(this._anchor,e));return Qi(t)}};var Gp=class{constructor(e,t,o){this.anchor=e,this.messages=t,this.isComplete=o}filter(e){let t=this.messages.filter(o=>o.isValidForHoverAnchor(e));return t.length===this.messages.length?this:new kS(this,this.anchor,t,this.isComplete)}},kS=class extends Gp{constructor(e,t,o,r){super(t,o,r),this.original=e}filter(e){return this.original.filter(e)}},Gy=class{constructor(e,t,o,r,n,s,a,c,h,p){this.initialMousePosX=e,this.initialMousePosY=t,this.colorPicker=o,this.showAtPosition=r,this.showAtSecondaryPosition=n,this.preferAbove=s,this.stoleFocus=a,this.source=c,this.isBeforeContent=h,this.disposables=p,this.closestMouseDistance=void 0}};ze();X();var Oj=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Rj=function(i,e){return function(t,o){e(t,o,i)}},QM=te,_u=class extends B{get hasContent(){return this._hasContent}constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=QM("div.hover-row.status-bar"),this.hoverElement.tabIndex=0,this.actionsElement=Z(this.hoverElement,QM("div.actions"))}addAction(e){let t=this._keybindingService.lookupKeybinding(e.commandId),o=t?t.getLabel():null;return this._hasContent=!0,this._register(rL.render(this.actionsElement,e,o))}append(e){let t=Z(this.actionsElement,e);return this._hasContent=!0,t}};_u=Oj([Rj(0,qe)],_u);nt();var Bj=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},ZM=function(i,e){return function(t,o){e(t,o,i)}},Jy,Jp=Jy=class extends B{constructor(e,t,o){super(),this._editor=e,this._instantiationService=t,this._keybindingService=o,this._currentResult=null,this._onContentsChanged=this._register(new fe),this.onContentsChanged=this._onContentsChanged.event,this._widget=this._register(this._instantiationService.createInstance(qa,this._editor)),this._participants=[];for(let r of Po.getAll()){let n=this._instantiationService.createInstance(r,this._editor);n instanceof Ka&&!(n instanceof fu)&&(this._markdownHoverParticipant=n),this._participants.push(n)}this._participants.sort((r,n)=>r.hoverOrdinal-n.hoverOrdinal),this._computer=new $y(this._editor,this._participants),this._hoverOperation=this._register(new ru(this._editor,this._computer)),this._register(this._hoverOperation.onResult(r=>{if(!this._computer.anchor)return;let n=r.hasLoadingMessage?this._addLoadingMessage(r.value):r.value;this._withResult(new Gp(this._computer.anchor,n,r.isComplete))})),this._register(Qo(this._widget.getDomNode(),"keydown",r=>{r.equals(9)&&this.hide()})),this._register(md.onDidChange(()=>{this._widget.position&&this._currentResult&&this._setCurrentResult(this._currentResult)}))}_startShowingOrUpdateHover(e,t,o,r,n){return!this._widget.position||!this._currentResult?e?(this._startHoverOperationIfNecessary(e,t,o,r,!1),!0):!1:this._editor.getOption(60).sticky&&n&&this._widget.isMouseGettingCloser(n.event.posx,n.event.posy)?(e&&this._startHoverOperationIfNecessary(e,t,o,r,!0),!0):e?e&&this._currentResult.anchor.equals(e)?!0:e.canAdoptVisibleHover(this._currentResult.anchor,this._widget.position)?(this._setCurrentResult(this._currentResult.filter(e)),this._startHoverOperationIfNecessary(e,t,o,r,!1),!0):(this._setCurrentResult(null),this._startHoverOperationIfNecessary(e,t,o,r,!1),!0):(this._setCurrentResult(null),!1)}_startHoverOperationIfNecessary(e,t,o,r,n){this._computer.anchor&&this._computer.anchor.equals(e)||(this._hoverOperation.cancel(),this._computer.anchor=e,this._computer.shouldFocus=r,this._computer.source=o,this._computer.insistOnKeepingHoverVisible=n,this._hoverOperation.start(t))}_setCurrentResult(e){this._currentResult!==e&&(e&&e.messages.length===0&&(e=null),this._currentResult=e,this._currentResult?this._renderMessages(this._currentResult.anchor,this._currentResult.messages):this._widget.hide())}_addLoadingMessage(e){if(this._computer.anchor){for(let t of this._participants)if(t.createLoadingMessage){let o=t.createLoadingMessage(this._computer.anchor);if(o)return e.slice(0).concat([o])}}return e}_withResult(e){this._widget.position&&this._currentResult&&this._currentResult.isComplete&&(!e.isComplete||this._computer.insistOnKeepingHoverVisible&&e.messages.length===0)||this._setCurrentResult(e)}_renderMessages(e,t){let{showAtPosition:o,showAtSecondaryPosition:r,highlightRange:n}=Jy.computeHoverRanges(this._editor,e.range,t),s=new H,a=s.add(new _u(this._keybindingService)),c=document.createDocumentFragment(),h=null,p={fragment:c,statusBar:a,setColorPicker:f=>h=f,onContentsChanged:()=>this._doOnContentsChanged(),setMinimumDimensions:f=>this._widget.setMinimumDimensions(f),hide:()=>this.hide()};for(let f of this._participants){let _=t.filter(y=>y.owner===f);_.length>0&&s.add(f.renderHoverParts(p,_))}let g=t.some(f=>f.isBeforeContent);if(a.hasContent&&c.appendChild(a.hoverElement),c.hasChildNodes()){if(n){let f=this._editor.createDecorationsCollection();f.set([{range:n,options:Jy._DECORATION_OPTIONS}]),s.add(Ve(()=>{f.clear()}))}this._widget.showAt(c,new Gy(e.initialMousePosX,e.initialMousePosY,h,o,r,this._editor.getOption(60).above,this._computer.shouldFocus,this._computer.source,g,s))}else s.dispose()}_doOnContentsChanged(){this._onContentsChanged.fire(),this._widget.onContentsChanged()}static computeHoverRanges(e,t,o){let r=1;if(e.hasModel()){let g=e._getViewModel(),f=g.coordinatesConverter,_=f.convertModelRangeToViewRange(t),y=new Y(_.startLineNumber,g.getLineMinColumn(_.startLineNumber));r=f.convertViewPositionToModelPosition(y).column}let n=t.startLineNumber,s=t.startColumn,a=o[0].range,c=null;for(let g of o)a=T.plusRange(a,g.range),g.range.startLineNumber===n&&g.range.endLineNumber===n&&(s=Math.max(Math.min(s,g.range.startColumn),r)),g.forceShowAtRange&&(c=g.range);let h=c?c.getStartPosition():new Y(n,t.startColumn),p=c?c.getStartPosition():new Y(n,s);return{showAtPosition:h,showAtSecondaryPosition:p,highlightRange:a}}showsOrWillShow(e){if(this._widget.isResizing)return!0;let t=[];for(let r of this._participants)if(r.suggestHoverAnchor){let n=r.suggestHoverAnchor(e);n&&t.push(n)}let o=e.target;if(o.type===6&&t.push(new nu(0,o.range,e.event.posx,e.event.posy)),o.type===7){let r=this._editor.getOption(50).typicalHalfwidthCharacterWidth/2;!o.detail.isAfterLines&&typeof o.detail.horizontalDistanceToText=="number"&&o.detail.horizontalDistanceToText<r&&t.push(new nu(0,o.range,e.event.posx,e.event.posy))}return t.length===0?this._startShowingOrUpdateHover(null,0,0,!1,e):(t.sort((r,n)=>n.priority-r.priority),this._startShowingOrUpdateHover(t[0],0,0,!1,e))}startShowingAtRange(e,t,o,r){this._startShowingOrUpdateHover(new nu(0,e,void 0,void 0),t,o,r,null)}async updateMarkdownHoverVerbosityLevel(e,t,o){var r;(r=this._markdownHoverParticipant)===null||r===void 0||r.updateMarkdownHoverVerbosityLevel(e,t,o)}markdownHoverContentAtIndex(e){var t,o;return(o=(t=this._markdownHoverParticipant)===null||t===void 0?void 0:t.markdownHoverContentAtIndex(e))!==null&&o!==void 0?o:""}doesMarkdownHoverAtIndexSupportVerbosityAction(e,t){var o,r;return(r=(o=this._markdownHoverParticipant)===null||o===void 0?void 0:o.doesMarkdownHoverAtIndexSupportVerbosityAction(e,t))!==null&&r!==void 0?r:!1}containsNode(e){return e?this._widget.getDomNode().contains(e):!1}focus(){this._widget.focus()}scrollUp(){this._widget.scrollUp()}scrollDown(){this._widget.scrollDown()}scrollLeft(){this._widget.scrollLeft()}scrollRight(){this._widget.scrollRight()}pageUp(){this._widget.pageUp()}pageDown(){this._widget.pageDown()}goToTop(){this._widget.goToTop()}goToBottom(){this._widget.goToBottom()}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._setCurrentResult(null)}get isColorPickerVisible(){return this._widget.isColorPickerVisible}get isVisibleFromKeyboard(){return this._widget.isVisibleFromKeyboard}get isVisible(){return this._widget.isVisible}get isFocused(){return this._widget.isFocused}get isResizing(){return this._widget.isResizing}get widget(){return this._widget}};Jp._DECORATION_OPTIONS=ke.register({description:"content-hover-highlight",className:"hoverHighlight"});Jp=Jy=Bj([ZM(1,ce),ZM(2,qe)],Jp);ze();X();bt();yr();bn();var Xy=class{get lineNumber(){return this._lineNumber}set lineNumber(e){this._lineNumber=e}get lane(){return this._laneOrLine}set lane(e){this._laneOrLine=e}constructor(e){this._editor=e,this._lineNumber=-1,this._laneOrLine=ZC.Center}computeSync(){var e,t;let o=a=>({value:a}),r=this._editor.getLineDecorations(this._lineNumber),n=[],s=this._laneOrLine==="lineNo";if(!r)return n;for(let a of r){let c=(t=(e=a.options.glyphMargin)===null||e===void 0?void 0:e.position)!==null&&t!==void 0?t:ZC.Center;if(!s&&c!==this._laneOrLine)continue;let h=s?a.options.lineNumberHoverMessage:a.options.glyphMarginHoverMessage;!h||Fa(h)||n.push(...Yg(h).map(o))}return n}};var e2=te,FS=(()=>{class i extends B{constructor(t,o,r){super(),this._renderDisposeables=this._register(new H),this._editor=t,this._isVisible=!1,this._messages=[],this._hover=this._register(new zf),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new vr({editor:this._editor},o,r)),this._computer=new Xy(this._editor),this._hoverOperation=this._register(new ru(this._editor,this._computer)),this._register(this._hoverOperation.onResult(n=>{this._withResult(n.value)})),this._register(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged())),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(50)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return i.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(o=>this._editor.applyFontInfo(o))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}showsOrWillShow(t){let o=t.target;return o.type===2&&o.detail.glyphMarginLane?(this._startShowingAt(o.position.lineNumber,o.detail.glyphMarginLane),!0):o.type===3?(this._startShowingAt(o.position.lineNumber,"lineNo"),!0):!1}_startShowingAt(t,o){this._computer.lineNumber===t&&this._computer.lane===o||(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=t,this._computer.lane=o,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(t){this._messages=t,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(t,o){this._renderDisposeables.clear();let r=document.createDocumentFragment();for(let n of o){let s=e2("div.hover-row.markdown-hover"),a=Z(s,e2("div.hover-contents")),c=this._renderDisposeables.add(this._markdownRenderer.render(n.value));a.appendChild(c.element),r.appendChild(s)}this._updateContents(r),this._showAt(t)}_updateContents(t){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(t),this._updateFont()}_showAt(t){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));let o=this._editor.getLayoutInfo(),r=this._editor.getTopForLineNumber(t),n=this._editor.getScrollTop(),s=this._editor.getOption(67),a=this._hover.containerDomNode.clientHeight,c=r-n-(a-s)/2,h=o.glyphMarginLeft+o.glyphMarginWidth+(this._computer.lane==="lineNo"?o.lineNumbersWidth:0);this._hover.containerDomNode.style.left=`${h}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(c),0)}px`}}return i.ID="editor.contrib.modesGlyphHoverWidget",i})();nt();var Wj=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},t2=function(i,e){return function(t,o){e(t,o,i)}},LS,Yy=!1,Ai=LS=class extends B{constructor(e,t,o){super(),this._editor=e,this._instantiationService=t,this._keybindingService=o,this._onHoverContentsChanged=this._register(new fe),this.shouldKeepOpenOnEditorMouseMoveOrLeave=!1,this._listenersStore=new H,this._hoverState={mouseDown:!1,activatedByDecoratorClick:!1},this._reactToEditorMouseMoveRunner=this._register(new ut(()=>this._reactToEditorMouseMove(this._mouseMoveEvent),0)),this._hookListeners(),this._register(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(60)&&(this._unhookListeners(),this._hookListeners())}))}static get(e){return e.getContribution(LS.ID)}_hookListeners(){let e=this._editor.getOption(60);this._hoverSettings={enabled:e.enabled,sticky:e.sticky,hidingDelay:e.delay},e.enabled?(this._listenersStore.add(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._listenersStore.add(this._editor.onMouseUp(()=>this._onEditorMouseUp())),this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))):(this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))),this._listenersStore.add(this._editor.onMouseLeave(t=>this._onEditorMouseLeave(t))),this._listenersStore.add(this._editor.onDidChangeModel(()=>{this._cancelScheduler(),this._hideWidgets()})),this._listenersStore.add(this._editor.onDidChangeModelContent(()=>this._cancelScheduler())),this._listenersStore.add(this._editor.onDidScrollChange(t=>this._onEditorScrollChanged(t)))}_unhookListeners(){this._listenersStore.clear()}_cancelScheduler(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._hoverState.mouseDown=!0,!this._shouldNotHideCurrentHoverWidget(e)&&this._hideWidgets()}_shouldNotHideCurrentHoverWidget(e){return!!(this._isMouseOnContentHoverWidget(e)||this._isMouseOnMarginHoverWidget(e)||this._isContentWidgetResizing())}_isMouseOnMarginHoverWidget(e){let t=e.target;return t?t.type===12&&t.detail===FS.ID:!1}_isMouseOnContentHoverWidget(e){let t=e.target;return t?t.type===9&&t.detail===qa.ID:!1}_onEditorMouseUp(){this._hoverState.mouseDown=!1}_onEditorMouseLeave(e){this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._cancelScheduler(),this._shouldNotHideCurrentHoverWidget(e))||Yy||this._hideWidgets()}_shouldNotRecomputeCurrentHoverWidget(e){let t=this._hoverSettings.sticky,o=(a,c)=>{let h=this._isMouseOnMarginHoverWidget(a);return c&&h},r=(a,c)=>{let h=this._isMouseOnContentHoverWidget(a);return c&&h},n=a=>{var c;let h=this._isMouseOnContentHoverWidget(a),p=(c=this._contentWidget)===null||c===void 0?void 0:c.isColorPickerVisible;return h&&p},s=(a,c)=>{var h,p,g,f;return c&&((h=this._contentWidget)===null||h===void 0?void 0:h.containsNode((p=a.event.browserEvent.view)===null||p===void 0?void 0:p.document.activeElement))&&!(!((f=(g=a.event.browserEvent.view)===null||g===void 0?void 0:g.getSelection())===null||f===void 0)&&f.isCollapsed)};return!!(o(e,t)||r(e,t)||n(e)||s(e,t))}_onEditorMouseMove(e){var t,o,r,n;if(this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._mouseMoveEvent=e,!((t=this._contentWidget)===null||t===void 0)&&t.isFocused||!((o=this._contentWidget)===null||o===void 0)&&o.isResizing))return;let s=this._hoverSettings.sticky;if(s&&(!((r=this._contentWidget)===null||r===void 0)&&r.isVisibleFromKeyboard))return;if(this._shouldNotRecomputeCurrentHoverWidget(e)){this._reactToEditorMouseMoveRunner.cancel();return}let c=this._hoverSettings.hidingDelay;if(((n=this._contentWidget)===null||n===void 0?void 0:n.isVisible)&&s&&c>0){this._reactToEditorMouseMoveRunner.isScheduled()||this._reactToEditorMouseMoveRunner.schedule(c);return}this._reactToEditorMouseMove(e)}_reactToEditorMouseMove(e){var t;if(!e)return;let r=(t=e.target.element)===null||t===void 0?void 0:t.classList.contains("colorpicker-color-decoration"),n=this._editor.getOption(148),s=this._hoverSettings.enabled,a=this._hoverState.activatedByDecoratorClick;if(r&&(n==="click"&&!a||n==="hover"&&!s&&!Yy||n==="clickAndHover"&&!s&&!a)||!r&&!s&&!a){this._hideWidgets();return}this._tryShowHoverWidget(e,0)||this._tryShowHoverWidget(e,1)||Yy||this._hideWidgets()}_tryShowHoverWidget(e,t){let o=this._getOrCreateContentWidget(),r=this._getOrCreateGlyphWidget(),n,s;switch(t){case 0:n=o,s=r;break;case 1:n=r,s=o;break;default:throw new Error(`HoverWidgetType ${t} is unrecognized`)}let a=n.showsOrWillShow(e);return a&&s.hide(),a}_onKeyDown(e){var t;if(!this._editor.hasModel())return;let o=this._keybindingService.softDispatch(e,this._editor.getDomNode()),r=o.kind===1||o.kind===2&&(o.commandId===uy||o.commandId===za||o.commandId===Va)&&((t=this._contentWidget)===null||t===void 0?void 0:t.isVisible);e.keyCode===5||e.keyCode===6||e.keyCode===57||e.keyCode===4||r||this._hideWidgets()}_hideWidgets(){var e,t,o;Yy||this._hoverState.mouseDown&&(!((e=this._contentWidget)===null||e===void 0)&&e.isColorPickerVisible)||Gr.dropDownVisible||(this._hoverState.activatedByDecoratorClick=!1,(t=this._glyphWidget)===null||t===void 0||t.hide(),(o=this._contentWidget)===null||o===void 0||o.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(Jp,this._editor),this._listenersStore.add(this._contentWidget.onContentsChanged(()=>this._onHoverContentsChanged.fire()))),this._contentWidget}_getOrCreateGlyphWidget(){return this._glyphWidget||(this._glyphWidget=this._instantiationService.createInstance(FS,this._editor)),this._glyphWidget}showContentHover(e,t,o,r,n=!1){this._hoverState.activatedByDecoratorClick=n,this._getOrCreateContentWidget().startShowingAtRange(e,t,o,r)}_isContentWidgetResizing(){var e;return((e=this._contentWidget)===null||e===void 0?void 0:e.widget.isResizing)||!1}markdownHoverContentAtIndex(e){return this._getOrCreateContentWidget().markdownHoverContentAtIndex(e)}doesMarkdownHoverAtIndexSupportVerbosityAction(e,t){return this._getOrCreateContentWidget().doesMarkdownHoverAtIndexSupportVerbosityAction(e,t)}updateMarkdownHoverVerbosityLevel(e,t,o){this._getOrCreateContentWidget().updateMarkdownHoverVerbosityLevel(e,t,o)}focus(){var e;(e=this._contentWidget)===null||e===void 0||e.focus()}scrollUp(){var e;(e=this._contentWidget)===null||e===void 0||e.scrollUp()}scrollDown(){var e;(e=this._contentWidget)===null||e===void 0||e.scrollDown()}scrollLeft(){var e;(e=this._contentWidget)===null||e===void 0||e.scrollLeft()}scrollRight(){var e;(e=this._contentWidget)===null||e===void 0||e.scrollRight()}pageUp(){var e;(e=this._contentWidget)===null||e===void 0||e.pageUp()}pageDown(){var e;(e=this._contentWidget)===null||e===void 0||e.pageDown()}goToTop(){var e;(e=this._contentWidget)===null||e===void 0||e.goToTop()}goToBottom(){var e;(e=this._contentWidget)===null||e===void 0||e.goToBottom()}get isColorPickerVisible(){var e;return(e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible}get isHoverVisible(){var e;return(e=this._contentWidget)===null||e===void 0?void 0:e.isVisible}dispose(){var e,t;super.dispose(),this._unhookListeners(),this._listenersStore.dispose(),(e=this._glyphWidget)===null||e===void 0||e.dispose(),(t=this._contentWidget)===null||t===void 0||t.dispose()}};Ai.ID="editor.contrib.hover";Ai=LS=Wj([t2(1,ce),t2(2,qe)],Ai);var i2=(()=>{class i extends B{constructor(t){super(),this._editor=t,this._register(t.onMouseDown(o=>this.onMouseDown(o)))}dispose(){super.dispose()}onMouseDown(t){let o=this._editor.getOption(148);if(o!=="click"&&o!=="clickAndHover")return;let r=t.target;if(r.type!==6||!r.detail.injectedText||r.detail.injectedText.options.attachedData!==Kx||!r.range)return;let n=this._editor.getContribution(Ai.ID);if(n&&!n.isColorPickerVisible){let s=new T(r.range.startLineNumber,r.range.startColumn+1,r.range.endLineNumber,r.range.endColumn+1);n.showContentHover(s,1,0,!1,!0)}}}return i.ID="editor.contrib.colorContribution",i})();le(i2.ID,i2,2);Po.register(Mp);xe();re();X();Je();nt();Ge();xe();it();Me();hr();Ii();ze();var r2=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Xr=function(i,e){return function(t,o){e(t,o,i)}},NS,MS,Bs=NS=class extends B{constructor(e,t,o,r,n,s,a){super(),this._editor=e,this._modelService=o,this._keybindingService=r,this._instantiationService=n,this._languageFeatureService=s,this._languageConfigurationService=a,this._standaloneColorPickerWidget=null,this._standaloneColorPickerVisible=A.standaloneColorPickerVisible.bindTo(t),this._standaloneColorPickerFocused=A.standaloneColorPickerFocused.bindTo(t)}showOrFocus(){var e;this._editor.hasModel()&&(this._standaloneColorPickerVisible.get()?this._standaloneColorPickerFocused.get()||(e=this._standaloneColorPickerWidget)===null||e===void 0||e.focus():this._standaloneColorPickerWidget=new Qy(this._editor,this._standaloneColorPickerVisible,this._standaloneColorPickerFocused,this._instantiationService,this._modelService,this._keybindingService,this._languageFeatureService,this._languageConfigurationService))}hide(){var e;this._standaloneColorPickerFocused.set(!1),this._standaloneColorPickerVisible.set(!1),(e=this._standaloneColorPickerWidget)===null||e===void 0||e.hide(),this._editor.focus()}insertColor(){var e;(e=this._standaloneColorPickerWidget)===null||e===void 0||e.updateEditor(),this.hide()}static get(e){return e.getContribution(NS.ID)}};Bs.ID="editor.contrib.standaloneColorPickerController";Bs=NS=r2([Xr(1,ve),Xr(2,Ot),Xr(3,qe),Xr(4,ce),Xr(5,J),Xr(6,Ye)],Bs);le(Bs.ID,Bs,1);var o2=8,Hj=22,Qy=MS=class extends B{constructor(e,t,o,r,n,s,a,c){var h;super(),this._editor=e,this._standaloneColorPickerVisible=t,this._standaloneColorPickerFocused=o,this._modelService=n,this._keybindingService=s,this._languageFeaturesService=a,this._languageConfigurationService=c,this.allowEditorOverflow=!0,this._position=void 0,this._body=document.createElement("div"),this._colorHover=null,this._selectionSetInEditor=!1,this._onResult=this._register(new fe),this.onResult=this._onResult.event,this._standaloneColorPickerVisible.set(!0),this._standaloneColorPickerParticipant=r.createInstance(ou,this._editor),this._position=(h=this._editor._getViewModel())===null||h===void 0?void 0:h.getPrimaryCursorState().modelState.position;let p=this._editor.getSelection(),g=p?{startLineNumber:p.startLineNumber,startColumn:p.startColumn,endLineNumber:p.endLineNumber,endColumn:p.endColumn}:{startLineNumber:0,endLineNumber:0,endColumn:0,startColumn:0},f=this._register(Or(this._body));this._register(f.onDidBlur(_=>{this.hide()})),this._register(f.onDidFocus(_=>{this.focus()})),this._register(this._editor.onDidChangeCursorPosition(()=>{this._selectionSetInEditor?this._selectionSetInEditor=!1:this.hide()})),this._register(this._editor.onMouseMove(_=>{var y;let C=(y=_.target.element)===null||y===void 0?void 0:y.classList;C&&C.contains("colorpicker-color-decoration")&&this.hide()})),this._register(this.onResult(_=>{this._render(_.value,_.foundInEditor)})),this._start(g),this._body.style.zIndex="50",this._editor.addContentWidget(this)}updateEditor(){this._colorHover&&this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover)}getId(){return MS.ID}getDomNode(){return this._body}getPosition(){if(!this._position)return null;let e=this._editor.getOption(60).above;return{position:this._position,secondaryPosition:this._position,preference:e?[1,2]:[2,1],positionAffinity:2}}hide(){this.dispose(),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerFocused.set(!1),this._editor.removeContentWidget(this),this._editor.focus()}focus(){this._standaloneColorPickerFocused.set(!0),this._body.focus()}async _start(e){let t=await this._computeAsync(e);t&&this._onResult.fire(new OS(t.result,t.foundInEditor))}async _computeAsync(e){if(!this._editor.hasModel())return null;let t={range:e,color:{red:0,green:0,blue:0,alpha:1}},o=await this._standaloneColorPickerParticipant.createColorHover(t,new dc(this._modelService,this._languageConfigurationService),this._languageFeaturesService.colorProvider);return o?{result:o.colorHover,foundInEditor:o.foundInEditor}:null}_render(e,t){let o=document.createDocumentFragment(),r=this._register(new _u(this._keybindingService)),n,s={fragment:o,statusBar:r,setColorPicker:C=>n=C,onContentsChanged:()=>{},hide:()=>this.hide()};if(this._colorHover=e,this._register(this._standaloneColorPickerParticipant.renderHoverParts(s,[e])),n===void 0)return;this._body.classList.add("standalone-colorpicker-body"),this._body.style.maxHeight=Math.max(this._editor.getLayoutInfo().height/4,250)+"px",this._body.style.maxWidth=Math.max(this._editor.getLayoutInfo().width*.66,500)+"px",this._body.tabIndex=0,this._body.appendChild(o),n.layout();let a=n.body,c=a.saturationBox.domNode.clientWidth,h=a.domNode.clientWidth-c-Hj-o2,p=n.body.enterButton;p?.onClicked(()=>{this.updateEditor(),this.hide()});let g=n.header,f=g.pickedColorNode;f.style.width=c+o2+"px";let _=g.originalColorNode;_.style.width=h+"px";let y=n.header.closeButton;y?.onClicked(()=>{this.hide()}),t&&(p&&(p.button.textContent="Replace"),this._selectionSetInEditor=!0,this._editor.setSelection(e.range)),this._editor.layoutContentWidget(this)}};Qy.ID="editor.contrib.standaloneColorPickerWidget";Qy=MS=r2([Xr(3,ce),Xr(4,Ot),Xr(5,qe),Xr(6,J),Xr(7,Ye)],Qy);var OS=class{constructor(e,t){this.value=e,this.foundInEditor=t}};it();Wt();var RS=class extends So{constructor(){super({id:"editor.action.showOrFocusStandaloneColorPicker",title:he(U({},pe("showOrFocusStandaloneColorPicker","Show or Focus Standalone Color Picker")),{mnemonicTitle:b({key:"mishowOrFocusStandaloneColorPicker",comment:["&& denotes a mnemonic"]},"&&Show or Focus Standalone Color Picker")}),precondition:void 0,menu:[{id:Q.CommandPalette}],metadata:{description:pe("showOrFocusStandaloneColorPickerDescription","Show or focus a standalone color picker which uses the default color provider. It displays hex/rgb/hsl colors.")}})}runEditorCommand(e,t){var o;(o=Bs.get(t))===null||o===void 0||o.showOrFocus()}},BS=class extends j{constructor(){super({id:"editor.action.hideColorPicker",label:b({key:"hideColorPicker",comment:["Action that hides the color picker"]},"Hide the Color Picker"),alias:"Hide the Color Picker",precondition:A.standaloneColorPickerVisible.isEqualTo(!0),kbOpts:{primary:9,weight:100},metadata:{description:pe("hideColorPickerDescription","Hide the standalone color picker.")}})}run(e,t){var o;(o=Bs.get(t))===null||o===void 0||o.hide()}},WS=class extends j{constructor(){super({id:"editor.action.insertColorWithStandaloneColorPicker",label:b({key:"insertColorWithStandaloneColorPicker",comment:["Action that inserts color with standalone color picker"]},"Insert Color with Standalone Color Picker"),alias:"Insert Color with Standalone Color Picker",precondition:A.standaloneColorPickerFocused.isEqualTo(!0),kbOpts:{primary:3,weight:100},metadata:{description:pe("insertColorWithStandaloneColorPickerDescription","Insert hex/rgb/hsl colors with the focused standalone color picker.")}})}run(e,t){var o;(o=Bs.get(t))===null||o===void 0||o.insertColor()}};M(BS);M(WS);et(RS);ds();xe();ge();it();Ii();pt();ge();ui();var Ws=class i{constructor(e,t,o){this.languageConfigurationService=o,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,o){if(o<0)return!1;let r=t.length,n=e.length;if(o+r>n)return!1;for(let s=0;s<r;s++){let a=e.charCodeAt(o+s),c=t.charCodeAt(s);if(a!==c&&!(a>=65&&a<=90&&a+32===c)&&!(c>=65&&c<=90&&c+32===a))return!1}return!0}_createOperationsForBlockComment(e,t,o,r,n,s){let a=e.startLineNumber,c=e.startColumn,h=e.endLineNumber,p=e.endColumn,g=n.getLineContent(a),f=n.getLineContent(h),_=g.lastIndexOf(t,c-1+t.length),y=f.indexOf(o,p-1-o.length);if(_!==-1&&y!==-1)if(a===h)g.substring(_+t.length,y).indexOf(o)>=0&&(_=-1,y=-1);else{let x=g.substring(_+t.length),D=f.substring(0,y);(x.indexOf(o)>=0||D.indexOf(o)>=0)&&(_=-1,y=-1)}let C;_!==-1&&y!==-1?(r&&_+t.length<g.length&&g.charCodeAt(_+t.length)===32&&(t=t+" "),r&&y>0&&f.charCodeAt(y-1)===32&&(o=" "+o,y-=1),C=i._createRemoveBlockCommentOperations(new T(a,_+t.length+1,h,y+1),t,o)):(C=i._createAddBlockCommentOperations(e,t,o,this._insertSpace),this._usedEndToken=C.length===1?o:null);for(let x of C)s.addTrackedEditOperation(x.range,x.text)}static _createRemoveBlockCommentOperations(e,t,o){let r=[];return T.isEmpty(e)?r.push(ct.delete(new T(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+o.length))):(r.push(ct.delete(new T(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),r.push(ct.delete(new T(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+o.length)))),r}static _createAddBlockCommentOperations(e,t,o,r){let n=[];return T.isEmpty(e)?n.push(ct.replace(new T(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+o)):(n.push(ct.insert(new Y(e.startLineNumber,e.startColumn),t+(r?" ":""))),n.push(ct.insert(new Y(e.endLineNumber,e.endColumn),(r?" ":"")+o))),n}getEditOperations(e,t){let o=this._selection.startLineNumber,r=this._selection.startColumn;e.tokenization.tokenizeIfCheap(o);let n=e.getLanguageIdAtPosition(o,r),s=this.languageConfigurationService.getLanguageConfiguration(n).comments;!s||!s.blockCommentStartToken||!s.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,s.blockCommentStartToken,s.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){let o=t.getInverseEditOperations();if(o.length===2){let r=o[0],n=o[1];return new me(r.range.endLineNumber,r.range.endColumn,n.range.startLineNumber,n.range.startColumn)}else{let r=o[0].range,n=this._usedEndToken?-this._usedEndToken.length-1:0;return new me(r.endLineNumber,r.endColumn+n,r.endLineNumber,r.endColumn+n)}}};Tt();pt();ge();ui();var Zy=class i{constructor(e,t,o,r,n,s,a){this.languageConfigurationService=e,this._selection=t,this._indentSize=o,this._type=r,this._insertSpace=n,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=s,this._ignoreFirstLine=a||!1}static _gatherPreflightCommentStrings(e,t,o,r){e.tokenization.tokenizeIfCheap(t);let n=e.getLanguageIdAtPosition(t,1),s=r.getLanguageConfiguration(n).comments,a=s?s.lineCommentToken:null;if(!a)return null;let c=[];for(let h=0,p=o-t+1;h<p;h++)c[h]={ignore:!1,commentStr:a,commentStrOffset:0,commentStrLength:a.length};return c}static _analyzeLines(e,t,o,r,n,s,a,c){let h=!0,p;e===0?p=!0:e===1?p=!1:p=!0;for(let g=0,f=r.length;g<f;g++){let _=r[g],y=n+g;if(y===n&&a){_.ignore=!0;continue}let C=o.getLineContent(y),x=zh(C);if(x===-1){_.ignore=s,_.commentStrOffset=C.length;continue}if(h=!1,_.ignore=!1,_.commentStrOffset=x,p&&!Ws._haystackHasNeedleAtOffset(C,_.commentStr,x)&&(e===0?p=!1:e===1||(_.ignore=!0)),p&&t){let D=x+_.commentStrLength;D<C.length&&C.charCodeAt(D)===32&&(_.commentStrLength+=1)}}if(e===0&&h){p=!1;for(let g=0,f=r.length;g<f;g++)r[g].ignore=!1}return{supported:!0,shouldRemoveComments:p,lines:r}}static _gatherPreflightData(e,t,o,r,n,s,a,c){let h=i._gatherPreflightCommentStrings(o,r,n,c);return h===null?{supported:!1}:i._analyzeLines(e,t,o,h,r,s,a,c)}_executeLineComments(e,t,o,r){let n;o.shouldRemoveComments?n=i._createRemoveLineCommentsOperations(o.lines,r.startLineNumber):(i._normalizeInsertionPoint(e,o.lines,r.startLineNumber,this._indentSize),n=this._createAddLineCommentsOperations(o.lines,r.startLineNumber));let s=new Y(r.positionLineNumber,r.positionColumn);for(let a=0,c=n.length;a<c;a++)t.addEditOperation(n[a].range,n[a].text),T.isEmpty(n[a].range)&&T.getStartPosition(n[a].range).equals(s)&&e.getLineContent(s.lineNumber).length+1===s.column&&(this._deltaColumn=(n[a].text||"").length);this._selectionId=t.trackSelection(r)}_attemptRemoveBlockComment(e,t,o,r){let n=t.startLineNumber,s=t.endLineNumber,a=r.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn),c=e.getLineContent(n).lastIndexOf(o,a-1),h=e.getLineContent(s).indexOf(r,t.endColumn-1-o.length);return c!==-1&&h===-1&&(h=e.getLineContent(n).indexOf(r,c+o.length),s=n),c===-1&&h!==-1&&(c=e.getLineContent(s).lastIndexOf(o,h),n=s),t.isEmpty()&&(c===-1||h===-1)&&(c=e.getLineContent(n).indexOf(o),c!==-1&&(h=e.getLineContent(n).indexOf(r,c+o.length))),c!==-1&&e.getLineContent(n).charCodeAt(c+o.length)===32&&(o+=" "),h!==-1&&e.getLineContent(s).charCodeAt(h-1)===32&&(r=" "+r,h-=1),c!==-1&&h!==-1?Ws._createRemoveBlockCommentOperations(new T(n,c+o.length+1,s,h+1),o,r):null}_executeBlockComment(e,t,o){e.tokenization.tokenizeIfCheap(o.startLineNumber);let r=e.getLanguageIdAtPosition(o.startLineNumber,1),n=this.languageConfigurationService.getLanguageConfiguration(r).comments;if(!n||!n.blockCommentStartToken||!n.blockCommentEndToken)return;let s=n.blockCommentStartToken,a=n.blockCommentEndToken,c=this._attemptRemoveBlockComment(e,o,s,a);if(!c){if(o.isEmpty()){let h=e.getLineContent(o.startLineNumber),p=zh(h);p===-1&&(p=h.length),c=Ws._createAddBlockCommentOperations(new T(o.startLineNumber,p+1,o.startLineNumber,h.length+1),s,a,this._insertSpace)}else c=Ws._createAddBlockCommentOperations(new T(o.startLineNumber,e.getLineFirstNonWhitespaceColumn(o.startLineNumber),o.endLineNumber,e.getLineMaxColumn(o.endLineNumber)),s,a,this._insertSpace);c.length===1&&(this._deltaColumn=s.length+1)}this._selectionId=t.trackSelection(o);for(let h of c)t.addEditOperation(h.range,h.text)}getEditOperations(e,t){let o=this._selection;if(this._moveEndPositionDown=!1,o.startLineNumber===o.endLineNumber&&this._ignoreFirstLine){t.addEditOperation(new T(o.startLineNumber,e.getLineMaxColumn(o.startLineNumber),o.startLineNumber+1,1),o.startLineNumber===e.getLineCount()?"":`
`),this._selectionId=t.trackSelection(o);return}o.startLineNumber<o.endLineNumber&&o.endColumn===1&&(this._moveEndPositionDown=!0,o=o.setEndPosition(o.endLineNumber-1,e.getLineMaxColumn(o.endLineNumber-1)));let r=i._gatherPreflightData(this._type,this._insertSpace,e,o.startLineNumber,o.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return r.supported?this._executeLineComments(e,t,r,o):this._executeBlockComment(e,t,o)}computeCursorState(e,t){let o=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(o=o.setEndPosition(o.endLineNumber+1,1)),new me(o.selectionStartLineNumber,o.selectionStartColumn+this._deltaColumn,o.positionLineNumber,o.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){let o=[];for(let r=0,n=e.length;r<n;r++){let s=e[r];s.ignore||o.push(ct.delete(new T(t+r,s.commentStrOffset+1,t+r,s.commentStrOffset+s.commentStrLength+1)))}return o}_createAddLineCommentsOperations(e,t){let o=[],r=this._insertSpace?" ":"";for(let n=0,s=e.length;n<s;n++){let a=e[n];a.ignore||o.push(ct.insert(new Y(t+n,a.commentStrOffset+1),a.commentStr+r))}return o}static nextVisibleColumn(e,t,o,r){return o?e+(t-e%t):e+r}static _normalizeInsertionPoint(e,t,o,r){let n=1073741824,s,a;for(let c=0,h=t.length;c<h;c++){if(t[c].ignore)continue;let p=e.getLineContent(o+c),g=0;for(let f=0,_=t[c].commentStrOffset;g<n&&f<_;f++)g=i.nextVisibleColumn(g,r,p.charCodeAt(f)===9,1);g<n&&(n=g)}n=Math.floor(n/r)*r;for(let c=0,h=t.length;c<h;c++){if(t[c].ignore)continue;let p=e.getLineContent(o+c),g=0;for(s=0,a=t[c].commentStrOffset;g<n&&s<a;s++)g=i.nextVisibleColumn(g,r,p.charCodeAt(s)===9,1);g>n?t[c].commentStrOffset=s-1:t[c].commentStrOffset=s}}};re();Wt();var Xp=class extends j{constructor(e,t){super(t),this._type=e}run(e,t){let o=e.get(Ye);if(!t.hasModel())return;let r=t.getModel(),n=[],s=r.getOptions(),a=t.getOption(23),c=t.getSelections().map((p,g)=>({selection:p,index:g,ignoreFirstLine:!1}));c.sort((p,g)=>T.compareRangesUsingStarts(p.selection,g.selection));let h=c[0];for(let p=1;p<c.length;p++){let g=c[p];h.selection.endLineNumber===g.selection.startLineNumber&&(h.index<g.index?g.ignoreFirstLine=!0:(h.ignoreFirstLine=!0,h=g))}for(let p of c)n.push(new Zy(o,p.selection,s.indentSize,this._type,a.insertSpace,a.ignoreEmptyLines,p.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}},HS=class extends Xp{constructor(){super(0,{id:"editor.action.commentLine",label:b("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:2138,weight:100},menuOpts:{menuId:Q.MenubarEditMenu,group:"5_insert",title:b({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}},jS=class extends Xp{constructor(){super(1,{id:"editor.action.addCommentLine",label:b("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:St(2089,2081),weight:100}})}},zS=class extends Xp{constructor(){super(2,{id:"editor.action.removeCommentLine",label:b("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:St(2089,2099),weight:100}})}},VS=class extends j{constructor(){super({id:"editor.action.blockComment",label:b("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:Q.MenubarEditMenu,group:"5_insert",title:b({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){let o=e.get(Ye);if(!t.hasModel())return;let r=t.getOption(23),n=[],s=t.getSelections();for(let a of s)n.push(new Ws(a,r.insertSpace,o));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}};M(HS);M(jS);M(zS);M(VS);ze();Wl();X();Zi();xe();it();re();Wt();Me();ei();var jj=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},fc=function(i,e){return function(t,o){e(t,o,i)}},US,yu=US=class{static get(e){return e.getContribution(US.ID)}constructor(e,t,o,r,n,s,a,c){this._contextMenuService=t,this._contextViewService=o,this._contextKeyService=r,this._keybindingService=n,this._menuService=s,this._configurationService=a,this._workspaceContextService=c,this._toDispose=new H,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(h=>this._onContextMenu(h))),this._toDispose.add(this._editor.onMouseWheel(h=>{if(this._contextMenuIsBeingShownCount>0){let p=this._contextViewService.getContextViewElement(),g=h.srcElement;g.shadowRoot&&Tk(p)===g.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(h=>{this._editor.getOption(24)&&h.keyCode===58&&(h.preventDefault(),h.stopPropagation(),this.showContextMenu())}))}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(24)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||e.target.type===6&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),e.target.type===11)return this._showScrollbarContextMenu(e.event);if(e.target.type!==6&&e.target.type!==7&&e.target.type!==1)return;if(this._editor.focus(),e.target.position){let o=!1;for(let r of this._editor.getSelections())if(r.containsPosition(e.target.position)){o=!0;break}o||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t=e.event),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(24)||!this._editor.hasModel())return;let t=this._getMenuActions(this._editor.getModel(),this._editor.contextMenuId);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){let o=[],r=this._menuService.createMenu(t,this._contextKeyService),n=r.getActions({arg:e.uri});r.dispose();for(let s of n){let[,a]=s,c=0;for(let h of a)if(h instanceof Wk){let p=this._getMenuActions(e,h.item.submenu);p.length>0&&(o.push(new KC(h.id,h.label,p)),c++)}else o.push(h),c++;c&&o.push(new ps)}return o.length&&o.pop(),o}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;let o=this._editor.getOption(60);this._editor.updateOptions({hover:{enabled:!1}});let r=t;if(!r){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();let s=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),a=$t(this._editor.getDomNode()),c=a.left+s.left,h=a.top+s.top+s.height;r={x:c,y:h}}let n=this._editor.getOption(127)&&!Mh;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:n?this._editor.getDomNode():void 0,getAnchor:()=>r,getActions:()=>e,getActionViewItem:s=>{let a=this._keybindingFor(s);if(a)return new hp(s,s,{label:!0,keybinding:a.getLabel(),isMenu:!0});let c=s;return typeof c.getActionViewItem=="function"?c.getActionViewItem():new hp(s,s,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:s=>this._keybindingFor(s),onHide:s=>{this._contextMenuIsBeingShownCount--,this._editor.updateOptions({hover:o})}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel()||AL(this._workspaceContextService.getWorkspace()))return;let t=this._editor.getOption(73),o=0,r=h=>({id:`menu-action-${++o}`,label:h.label,tooltip:"",class:void 0,enabled:typeof h.enabled>"u"?!0:h.enabled,checked:h.checked,run:h.run}),n=(h,p)=>new KC(`menu-action-${++o}`,h,p,void 0),s=(h,p,g,f,_)=>{if(!p)return r({label:h,enabled:p,run:()=>{}});let y=x=>()=>{this._configurationService.updateValue(g,x)},C=[];for(let x of _)C.push(r({label:x.label,checked:f===x.value,run:y(x.value)}));return n(h,C)},a=[];a.push(r({label:b("context.minimap.minimap","Minimap"),checked:t.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!t.enabled)}})),a.push(new ps),a.push(r({label:b("context.minimap.renderCharacters","Render Characters"),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!t.renderCharacters)}})),a.push(s(b("context.minimap.size","Vertical size"),t.enabled,"editor.minimap.size",t.size,[{label:b("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:b("context.minimap.size.fill","Fill"),value:"fill"},{label:b("context.minimap.size.fit","Fit"),value:"fit"}])),a.push(s(b("context.minimap.slider","Slider"),t.enabled,"editor.minimap.showSlider",t.showSlider,[{label:b("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:b("context.minimap.slider.always","Always"),value:"always"}]));let c=this._editor.getOption(127)&&!Mh;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:c?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>a,onHide:h=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};yu.ID="editor.contrib.contextmenu";yu=US=jj([fc(1,_r),fc(2,ka),fc(3,ve),fc(4,qe),fc(5,pr),fc(6,Oe),fc(7,As)],yu);var qS=class extends j{constructor(){super({id:"editor.action.showContextMenu",label:b("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:A.textInputFocus,primary:1092,weight:100}})}run(e,t){var o;(o=yu.get(t))===null||o===void 0||o.showContextMenu()}};le(yu.ID,yu,2);M(qS);X();xe();it();re();var Yp=class{constructor(e){this.selections=e}equals(e){let t=this.selections.length,o=e.selections.length;if(t!==o)return!1;for(let r=0;r<t;r++)if(!this.selections[r].equalsSelection(e.selections[r]))return!1;return!0}},Qp=class{constructor(e,t,o){this.cursorState=e,this.scrollTop=t,this.scrollLeft=o}},ev=(()=>{class i extends B{static get(t){return t.getContribution(i.ID)}constructor(t){super(),this._editor=t,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(t.onDidChangeModel(o=>{this._undoStack=[],this._redoStack=[]})),this._register(t.onDidChangeModelContent(o=>{this._undoStack=[],this._redoStack=[]})),this._register(t.onDidChangeCursorSelection(o=>{if(this._isCursorUndoRedo||!o.oldSelections||o.oldModelVersionId!==o.modelVersionId)return;let r=new Yp(o.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(r)||(this._undoStack.push(new Qp(r,t.getScrollTop(),t.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new Qp(new Yp(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new Qp(new Yp(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(t){this._isCursorUndoRedo=!0,this._editor.setSelections(t.cursorState.selections),this._editor.setScrollPosition({scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),this._isCursorUndoRedo=!1}}return i.ID="editor.contrib.cursorUndoRedoController",i})(),KS=class extends j{constructor(){super({id:"cursorUndo",label:b("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:A.textInputFocus,primary:2099,weight:100}})}run(e,t,o){var r;(r=ev.get(t))===null||r===void 0||r.cursorUndo()}},$S=class extends j{constructor(){super({id:"cursorRedo",label:b("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,o){var r;(r=ev.get(t))===null||r===void 0||r.cursorRedo()}};le(ev.ID,ev,0);M(KS);M($S);X();Zi();xe();pt();ge();ui();gi();ge();ui();var tv=class{constructor(e,t,o){this.selection=e,this.targetPosition=t,this.copy=o,this.targetSelection=null}getEditOperations(e,t){let o=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new T(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),o),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new me(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new me(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new me(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new me(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new me(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}};function vu(i){return po?i.altKey:i.ctrlKey}var _c=class i extends B{constructor(e){super(),this._editor=e,this._dndDecorationIds=this._editor.createDecorationsCollection(),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(t))),this._register(this._editor.onMouseDrag(t=>this._onEditorMouseDrag(t))),this._register(this._editor.onMouseDrop(t=>this._onEditorMouseDrop(t))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(t=>this.onEditorKeyDown(t))),this._register(this._editor.onKeyUp(t=>this.onEditorKeyUp(t))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!this._editor.getOption(35)||this._editor.getOption(22)||(vu(e)&&(this._modifierPressed=!0),this._mouseDown&&vu(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){!this._editor.getOption(35)||this._editor.getOption(22)||(vu(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===i.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){let t=e.target;if(this._dragSelection===null){let r=(this._editor.getSelections()||[]).filter(n=>t.position&&n.containsPosition(t.position));if(r.length===1)this._dragSelection=r[0];else return}vu(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){let t=new Y(e.target.position.lineNumber,e.target.position.column);if(this._dragSelection===null){let o=null;if(e.event.shiftKey){let r=this._editor.getSelection();if(r){let{selectionStartLineNumber:n,selectionStartColumn:s}=r;o=[new me(n,s,t.lineNumber,t.column)]}}else o=(this._editor.getSelections()||[]).map(r=>r.containsPosition(t)?new me(t.lineNumber,t.column,t.lineNumber,t.column):r);this._editor.setSelections(o||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(vu(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(i.ID,new tv(this._dragSelection,t,vu(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){this._dndDecorationIds.set([{range:new T(e.lineNumber,e.column,e.lineNumber,e.column),options:i._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds.clear()}_hitContent(e){return e.type===6||e.type===7}_hitMargin(e){return e.type===2||e.type===3||e.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}};_c.ID="editor.contrib.dragAndDrop";_c.TRIGGER_KEY_VALUE=po?6:5;_c._DECORATION_OPTIONS=ke.register({description:"dnd-target",className:"dnd-target"});le(_c.ID,_c,2);xe();it();re();var iv;le(Dr.ID,Dr,0);An(M_);de(new class extends Bt{constructor(){super({id:gx,precondition:V_,kbOpts:{weight:100,primary:2137}})}runEditorCommand(i,e){var t;return(t=Dr.get(e))===null||t===void 0?void 0:t.changePasteType()}});de(new class extends Bt{constructor(){super({id:"editor.hidePasteWidget",precondition:V_,kbOpts:{weight:100,primary:9}})}runEditorCommand(i,e){var t;(t=Dr.get(e))===null||t===void 0||t.clearWidgets()}});M((iv=class extends j{constructor(){super({id:"editor.action.pasteAs",label:b("pasteAs","Paste As..."),alias:"Paste As...",precondition:A.writable,metadata:{description:"Paste as",args:[{name:"args",schema:iv.argsSchema}]}})}run(e,t,o){var r;let n=typeof o?.kind=="string"?o.kind:void 0;return!n&&o&&(n=typeof o.id=="string"?o.id:void 0),(r=Dr.get(t))===null||r===void 0?void 0:r.pasteAs(n?new Ke(n):void 0)}},iv.argsSchema={type:"object",properties:{kind:{type:"string",description:b("pasteAs.kind","The kind of the paste edit to try applying. If not provided or there are multiple edits for this kind, the editor will show a picker.")}}},iv));M(class extends j{constructor(){super({id:"editor.action.pasteAsText",label:b("pasteAsText","Paste as Text"),alias:"Paste as Text",precondition:A.writable})}run(i,e){var t;return(t=Dr.get(e))===null||t===void 0?void 0:t.pasteAs({providerId:qr.id})}});xe();re();YC();ms();bt();Xe();X();ge();Ge();var ov=class{constructor(){this._dragOperations=new Map}removeDragOperationTransfer(e){if(e&&this._dragOperations.has(e)){let t=this._dragOperations.get(e);return this._dragOperations.delete(e),t}}},Zp=class{constructor(e){this.identifier=e}};gs();Je();var GS=zi("treeViewsDndService");Ui(GS,ov,1);Xl();re();ei();Me();Je();var zj=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},rv=function(i,e){return function(t,o){e(t,o,i)}},JS,XS="editor.experimental.dropIntoEditor.defaultProvider",YS="editor.changeDropType",nv=new Ee("dropWidgetVisible",!1,b("dropWidgetVisible","Whether the drop widget is showing")),Ga=JS=class extends B{static get(e){return e.getContribution(JS.ID)}constructor(e,t,o,r,n){super(),this._configService=o,this._languageFeaturesService=r,this._treeViewsDragAndDropService=n,this.treeItemsTransfer=Ud.getInstance(),this._dropProgressManager=this._register(t.createInstance(Kd,"dropIntoEditor",e)),this._postDropWidgetManager=this._register(t.createInstance(Jd,"dropIntoEditor",e,nv,{id:YS,label:b("postDropWidgetTitle","Show drop options...")})),this._register(e.onDropIntoEditor(s=>this.onDropIntoEditor(e,s.position,s.event)))}clearWidgets(){this._postDropWidgetManager.clear()}changeDropType(){this._postDropWidgetManager.tryShowSelector()}async onDropIntoEditor(e,t,o){var r;if(!o.dataTransfer||!e.hasModel())return;(r=this._currentOperation)===null||r===void 0||r.cancel(),e.focus(),e.setPosition(t);let n=mt(async s=>{let a=new In(e,1,void 0,s);try{let c=await this.extractDataTransferData(o);if(c.size===0||a.token.isCancellationRequested)return;let h=e.getModel();if(!h)return;let p=this._languageFeaturesService.documentDropEditProvider.ordered(h).filter(f=>f.dropMimeTypes?f.dropMimeTypes.some(_=>c.matches(_)):!0),g=await this.getDropEdits(p,h,t,c,a);if(a.token.isCancellationRequested)return;if(g.length){let f=this.getInitialActiveEditIndex(h,g),_=e.getOption(36).showDropSelector==="afterDrop";await this._postDropWidgetManager.applyEditAndShowIfNeeded([T.fromPositions(t)],{activeEditIndex:f,allEdits:g},_,async y=>y,s)}}finally{a.dispose(),this._currentOperation===n&&(this._currentOperation=void 0)}});this._dropProgressManager.showWhile(t,b("dropIntoEditorProgress","Running drop handlers. Click to cancel"),n),this._currentOperation=n}async getDropEdits(e,t,o,r,n){let s=await pn(Promise.all(e.map(async c=>{try{let h=await c.provideDocumentDropEdits(t,o,r,n.token);return h?.map(p=>he(U({},p),{providerId:c.id}))}catch(h){console.error(h)}})),n.token),a=Qi(s??[]).flat();return B_(a)}getInitialActiveEditIndex(e,t){let o=this._configService.getValue(XS,{resource:e.uri});for(let[r,n]of Object.entries(o)){let s=new Ke(n),a=t.findIndex(c=>s.value===c.providerId&&c.handledMimeType&&P_(r,[c.handledMimeType]));if(a>=0)return a}return 0}async extractDataTransferData(e){if(!e.dataTransfer)return new Vd;let t=k_(e.dataTransfer);if(this.treeItemsTransfer.hasData(Zp.prototype)){let o=this.treeItemsTransfer.getData(Zp.prototype);if(Array.isArray(o))for(let r of o){let n=await this._treeViewsDragAndDropService.removeDragOperationTransfer(r.identifier);if(n)for(let[s,a]of n)t.replace(s,a)}}return t}};Ga.ID="editor.contrib.dropIntoEditorController";Ga=JS=zj([rv(1,ce),rv(2,Oe),rv(3,J),rv(4,GS)],Ga);le(Ga.ID,Ga,2);An(N_);de(new class extends Bt{constructor(){super({id:YS,precondition:nv,kbOpts:{weight:100,primary:2137}})}runEditorCommand(i,e,t){var o;(o=Ga.get(e))===null||o===void 0||o.changeDropType()}});de(new class extends Bt{constructor(){super({id:"editor.hideDropWidget",precondition:nv,kbOpts:{weight:100,primary:9}})}runEditorCommand(i,e,t){var o;(o=Ga.get(e))===null||o===void 0||o.clearWidgets()}});Oi.as(Hl.Configuration).registerConfiguration(he(U({},cp),{properties:{[XS]:{type:"object",scope:5,description:b("defaultProviderDescription","Configures the default drop provider to use for content of a given mime type."),default:{},additionalProperties:{type:"string"}}}}));Xe();X();Tt();xe();NF();it();bn();$h();Xe();X();pt();ge();ui();b6();ge();bn();gi();Ri();Bi();var On=class i{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){let e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){let t=this._decorations.indexOf(e);return t>=0?t+1:1}getDecorationRangeAt(e){let t=e<this._decorations.length?this._decorations[e]:null;return t?this._editor.getModel().getDecorationRange(t):null}getCurrentMatchesPosition(e){let t=this._editor.getModel().getDecorationsInRange(e);for(let o of t){let r=o.options;if(r===i._FIND_MATCH_DECORATION||r===i._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(o.id)}return 0}setCurrentFindMatch(e){let t=null,o=0;if(e)for(let r=0,n=this._decorations.length;r<n;r++){let s=this._editor.getModel().getDecorationRange(this._decorations[r]);if(e.equalsRange(s)){t=this._decorations[r],o=r+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(r=>{if(this._highlightedDecorationId!==null&&(r.changeDecorationOptions(this._highlightedDecorationId,i._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,r.changeDecorationOptions(this._highlightedDecorationId,i._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(r.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let n=this._editor.getModel().getDecorationRange(t);if(n.startLineNumber!==n.endLineNumber&&n.endColumn===1){let s=n.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(s);n=new T(n.startLineNumber,n.startColumn,s,a)}this._rangeHighlightDecorationId=r.addDecoration(n,i._RANGE_HIGHLIGHT_DECORATION)}}),o}set(e,t){this._editor.changeDecorations(o=>{let r=i._FIND_MATCH_DECORATION,n=[];if(e.length>1e3){r=i._FIND_MATCH_NO_OVERVIEW_DECORATION;let a=this._editor.getModel().getLineCount(),h=this._editor.getLayoutInfo().height/a,p=Math.max(2,Math.ceil(3/h)),g=e[0].range.startLineNumber,f=e[0].range.endLineNumber;for(let _=1,y=e.length;_<y;_++){let C=e[_].range;f+p>=C.startLineNumber?C.endLineNumber>f&&(f=C.endLineNumber):(n.push({range:new T(g,1,f,1),options:i._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),g=C.startLineNumber,f=C.endLineNumber)}n.push({range:new T(g,1,f,1),options:i._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}let s=new Array(e.length);for(let a=0,c=e.length;a<c;a++)s[a]={range:e[a].range,options:r};this._decorations=o.deltaDecorations(this._decorations,s),this._overviewRulerApproximateDecorations=o.deltaDecorations(this._overviewRulerApproximateDecorations,n),this._rangeHighlightDecorationId&&(o.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>o.removeDecoration(a)),this._findScopeDecorationIds=[]),t?.length&&(this._findScopeDecorationIds=t.map(a=>o.addDecoration(a,i._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){let o=this._decorations[t],r=this._editor.getModel().getDecorationRange(o);if(!(!r||r.endLineNumber>e.lineNumber)){if(r.endLineNumber<e.lineNumber)return r;if(!(r.endColumn>e.column))return r}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,o=this._decorations.length;t<o;t++){let r=this._decorations[t],n=this._editor.getModel().getDecorationRange(r);if(!(!n||n.startLineNumber<e.lineNumber)){if(n.startLineNumber>e.lineNumber)return n;if(!(n.startColumn<e.column))return n}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}};On._CURRENT_FIND_MATCH_DECORATION=ke.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",inlineClassName:"currentFindMatchInline",showIfCollapsed:!0,overviewRuler:{color:It(Ef),position:Eo.Center},minimap:{color:It(s0),position:1}});On._FIND_MATCH_DECORATION=ke.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",inlineClassName:"findMatchInline",showIfCollapsed:!0,overviewRuler:{color:It(Ef),position:Eo.Center},minimap:{color:It(s0),position:1}});On._FIND_MATCH_NO_OVERVIEW_DECORATION=ke.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0});On._FIND_MATCH_ONLY_OVERVIEW_DECORATION=ke.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:It(Ef),position:Eo.Center}});On._RANGE_HIGHLIGHT_DECORATION=ke.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0});On._FIND_SCOPE_DECORATION=ke.register({description:"find-scope",className:"findScope",isWholeLine:!0});ge();var sv=class{constructor(e,t,o){this._editorSelection=e,this._ranges=t,this._replaceStrings=o,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){let o=[];for(let s=0;s<this._ranges.length;s++)o.push({range:this._ranges[s],text:this._replaceStrings[s]});o.sort((s,a)=>T.compareRangesUsingStarts(s.range,a.range));let r=[],n=o[0];for(let s=1;s<o.length;s++)n.range.endLineNumber===o[s].range.startLineNumber&&n.range.endColumn===o[s].range.startColumn?(n.range=n.range.plusRange(o[s].range),n.text=n.text+o[s].text):(r.push(n),n=o[s]);r.push(n);for(let s of r)t.addEditOperation(s.range,s.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}};Tt();function QS(i,e){if(i&&i[0]!==""){let t=n2(i,e,"-"),o=n2(i,e,"_");return t&&!o?s2(i,e,"-"):!t&&o?s2(i,e,"_"):i[0].toUpperCase()===i[0]?e.toUpperCase():i[0].toLowerCase()===i[0]?e.toLowerCase():gk(i[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):i[0][0].toUpperCase()!==i[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}function n2(i,e,t){return i[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&i[0].split(t).length===e.split(t).length}function s2(i,e,t){let o=e.split(t),r=i[0].split(t),n="";return o.forEach((s,a)=>{n+=QS([r[a]],s)+t}),n.slice(0,-1)}var av=class{constructor(e){this.staticValue=e,this.kind=0}},ZS=class{constructor(e){this.pieces=e,this.kind=1}},Du=class i{static fromStaticValue(e){return new i([bu.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}constructor(e){!e||e.length===0?this._state=new av(""):e.length===1&&e[0].staticValue!==null?this._state=new av(e[0].staticValue):this._state=new ZS(e)}buildReplaceString(e,t){if(this._state.kind===0)return t?QS(e,this._state.staticValue):this._state.staticValue;let o="";for(let r=0,n=this._state.pieces.length;r<n;r++){let s=this._state.pieces[r];if(s.staticValue!==null){o+=s.staticValue;continue}let a=i._substitute(s.matchIndex,e);if(s.caseOps!==null&&s.caseOps.length>0){let c=[],h=s.caseOps.length,p=0;for(let g=0,f=a.length;g<f;g++){if(p>=h){c.push(a.slice(g));break}switch(s.caseOps[p]){case"U":c.push(a[g].toUpperCase());break;case"u":c.push(a[g].toUpperCase()),p++;break;case"L":c.push(a[g].toLowerCase());break;case"l":c.push(a[g].toLowerCase()),p++;break;default:c.push(a[g])}}a=c.join("")}o+=a}return o}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let o="";for(;e>0;){if(e<t.length)return(t[e]||"")+o;o=String(e%10)+o,e=Math.floor(e/10)}return"$"+o}},bu=class i{static staticValue(e){return new i(e,-1,null)}static caseOps(e,t){return new i(null,e,t)}constructor(e,t,o){this.staticValue=e,this.matchIndex=t,!o||o.length===0?this.caseOps=null:this.caseOps=o.slice(0)}},ew=class{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,o){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=bu.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=bu.caseOps(e,o),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=bu.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new Du(this._result)}};function a2(i){if(!i||i.length===0)return new Du(null);let e=[],t=new ew(i);for(let o=0,r=i.length;o<r;o++){let n=i.charCodeAt(o);if(n===92){if(o++,o>=r)break;let s=i.charCodeAt(o);switch(s){case 92:t.emitUnchanged(o-1),t.emitStatic("\\",o+1);break;case 110:t.emitUnchanged(o-1),t.emitStatic(`
`,o+1);break;case 116:t.emitUnchanged(o-1),t.emitStatic("	",o+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(o-1),t.emitStatic("",o+1),e.push(String.fromCharCode(s));break}continue}if(n===36){if(o++,o>=r)break;let s=i.charCodeAt(o);if(s===36){t.emitUnchanged(o-1),t.emitStatic("$",o+1);continue}if(s===48||s===38){t.emitUnchanged(o-1),t.emitMatchIndex(0,o+1,e),e.length=0;continue}if(49<=s&&s<=57){let a=s-48;if(o+1<r){let c=i.charCodeAt(o+1);if(48<=c&&c<=57){o++,a=a*10+(c-48),t.emitUnchanged(o-2),t.emitMatchIndex(a,o+1,e),e.length=0;continue}}t.emitUnchanged(o-1),t.emitMatchIndex(a,o+1,e),e.length=0;continue}}}return t.finalize()}Me();var Bn=new Ee("findWidgetVisible",!1),dCe=Bn.toNegated(),Cu=new Ee("findInputFocussed",!1),em=new Ee("replaceInputFocussed",!1),tm={primary:545,mac:{primary:2593}},im={primary:565,mac:{primary:2613}},om={primary:560,mac:{primary:2608}},rm={primary:554,mac:{primary:2602}},nm={primary:558,mac:{primary:2606}},gt={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",GoToMatchFindAction:"editor.action.goToMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},Rn=19999,Vj=240,lv=class i{constructor(e,t){this._toDispose=new H,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new mn,this._decorations=new On(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new ut(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(o=>{(o.reason===3||o.reason===5||o.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(o=>{this._ignoreModelContentChanged||(o.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(o=>this._onStateChanged(o))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,Vt(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},Vj)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let o=null;typeof t<"u"?t!==null&&(Array.isArray(t)?o=t:o=[t]):o=this._decorations.getFindScopes(),o!==null&&(o=o.map(a=>{if(a.startLineNumber!==a.endLineNumber){let c=a.endLineNumber;return a.endColumn===1&&(c=c-1),new T(a.startLineNumber,1,c,this._editor.getModel().getLineMaxColumn(c))}return a}));let r=this._findMatches(o,!1,Rn);this._decorations.set(r,o);let n=this._editor.getSelection(),s=this._decorations.getCurrentMatchesPosition(n);if(s===0&&r.length>0){let a=bf(r.map(c=>c.range),c=>T.compareRangesUsingStarts(c,n)>=0);s=a>0?a-1+1:s}this._state.changeMatchInfo(s,this._decorations.getCount(),void 0),e&&this._editor.getOption(41).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){let e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){let t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:o,column:r}=e,n=this._editor.getModel();return t||r===1?(o===1?o=n.getLineCount():o--,r=n.getLineMaxColumn(o)):r--,new Y(o,r)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){let p=this._decorations.matchAfterPosition(e);p&&this._setCurrentFindMatch(p);return}if(this._decorations.getCount()<Rn){let p=this._decorations.matchBeforePosition(e);p&&p.isEmpty()&&p.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),p=this._decorations.matchBeforePosition(e)),p&&this._setCurrentFindMatch(p);return}if(this._cannotFind())return;let o=this._decorations.getFindScope(),r=i._getSearchRange(this._editor.getModel(),o);r.getEndPosition().isBefore(e)&&(e=r.getEndPosition()),e.isBefore(r.getStartPosition())&&(e=r.getEndPosition());let{lineNumber:n,column:s}=e,a=this._editor.getModel(),c=new Y(n,s),h=a.findPreviousMatch(this._state.searchString,c,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,!1);if(h&&h.range.isEmpty()&&h.range.getStartPosition().equals(c)&&(c=this._prevSearchPosition(c),h=a.findPreviousMatch(this._state.searchString,c,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,!1)),!!h){if(!t&&!r.containsRange(h.range))return this._moveToPrevMatch(h.range.getStartPosition(),!0);this._setCurrentFindMatch(h.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:o,column:r}=e,n=this._editor.getModel();return t||r===n.getLineMaxColumn(o)?(o===n.getLineCount()?o=1:o++,r=1):r++,new Y(o,r)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){let o=this._decorations.matchBeforePosition(e);o&&this._setCurrentFindMatch(o);return}if(this._decorations.getCount()<Rn){let o=this._decorations.matchAfterPosition(e);o&&o.isEmpty()&&o.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),o=this._decorations.matchAfterPosition(e)),o&&this._setCurrentFindMatch(o);return}let t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,o,r=!1){if(this._cannotFind())return null;let n=this._decorations.getFindScope(),s=i._getSearchRange(this._editor.getModel(),n);s.getEndPosition().isBefore(e)&&(e=s.getStartPosition()),e.isBefore(s.getStartPosition())&&(e=s.getStartPosition());let{lineNumber:a,column:c}=e,h=this._editor.getModel(),p=new Y(a,c),g=h.findNextMatch(this._state.searchString,p,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,t);return o&&g&&g.range.isEmpty()&&g.range.getStartPosition().equals(p)&&(p=this._nextSearchPosition(p),g=h.findNextMatch(this._state.searchString,p,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,t)),g?!r&&!s.containsRange(g.range)?this._getNextMatch(g.range.getEndPosition(),t,o,!0):g:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_moveToMatch(e){let t=this._decorations.getDecorationRangeAt(e);t&&this._setCurrentFindMatch(t)}moveToMatch(e){this._moveToMatch(e)}_getReplacePattern(){return this._state.isRegex?a2(this._state.replaceString):Du.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;let e=this._getReplacePattern(),t=this._editor.getSelection(),o=this._getNextMatch(t.getStartPosition(),!0,!1);if(o)if(t.equalsRange(o.range)){let r=e.buildReplaceString(o.matches,this._state.preserveCase),n=new bs(t,r);this._executeEditorCommand("replace",n),this._decorations.setStartPosition(new Y(t.startLineNumber,t.startColumn+r.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(o.range)}_findMatches(e,t,o){let r=(e||[null]).map(n=>i._getSearchRange(this._editor.getModel(),n));return this._editor.getModel().findMatches(this._state.searchString,r,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,t,o)}replaceAll(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=Rn?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){let t=new $k(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null).parseSearchRequest();if(!t)return;let o=t.regex;if(!o.multiline){let g="mu";o.ignoreCase&&(g+="i"),o.global&&(g+="g"),o=new RegExp(o.source,g)}let r=this._editor.getModel(),n=r.getValue(1),s=r.getFullModelRange(),a=this._getReplacePattern(),c,h=this._state.preserveCase;a.hasReplacementPatterns||h?c=n.replace(o,function(){return a.buildReplaceString(arguments,h)}):c=n.replace(o,a.buildReplaceString(null,h));let p=new Mf(s,c,this._editor.getSelection());this._executeEditorCommand("replaceAll",p)}_regularReplaceAll(e){let t=this._getReplacePattern(),o=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),r=[];for(let s=0,a=o.length;s<a;s++)r[s]=t.buildReplaceString(o[s].matches,this._state.preserveCase);let n=new sv(this._editor.getSelection(),o.map(s=>s.range),r);this._executeEditorCommand("replaceAll",n)}selectAllMatches(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes(),o=this._findMatches(e,!1,1073741824).map(n=>new me(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn)),r=this._editor.getSelection();for(let n=0,s=o.length;n<s;n++)if(o[n].equalsRange(r)){o=[r].concat(o.slice(0,n)).concat(o.slice(n+1));break}this._editor.setSelections(o)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}};ze();Xe();Ri();var l2=(()=>{class i extends vs{constructor(t,o,r){super(),this._hideSoon=this._register(new ut(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=t,this._state=o,this._keybindingService=r,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.style.zIndex="12",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");let n={inputActiveOptionBorder:Cn(Af),inputActiveOptionForeground:Cn(Tf),inputActiveOptionBackground:Cn(_s)},s=this._register(dp());this.caseSensitive=this._register(new QL(U({appendTitle:this._keybindingLabelFor(gt.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,hoverDelegate:s},n))),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new ZL(U({appendTitle:this._keybindingLabelFor(gt.ToggleWholeWordCommand),isChecked:this._state.wholeWord,hoverDelegate:s},n))),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new eN(U({appendTitle:this._keybindingLabelFor(gt.ToggleRegexCommand),isChecked:this._state.isRegex,hoverDelegate:s},n))),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(a=>{let c=!1;a.isRegex&&(this.regex.checked=this._state.isRegex,c=!0),a.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,c=!0),a.matchCase&&(this.caseSensitive.checked=this._state.matchCase,c=!0),!this._state.isRevealed&&c&&this._revealTemporarily()})),this._register(Ne(this._domNode,at.MOUSE_LEAVE,a=>this._onMouseLeave())),this._register(Ne(this._domNode,"mouseover",a=>this._onMouseOver()))}_keybindingLabelFor(t){let o=this._keybindingService.lookupKeybinding(t);return o?` (${o.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return i.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseLeave(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}}return i.ID="editor.contrib.findOptionsWidget",i})();nt();X();ge();function cv(i,e){return i===1?!0:i===2?!1:e}var dv=class extends B{get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return cv(this._isRegexOverride,this._isRegex)}get wholeWord(){return cv(this._wholeWordOverride,this._wholeWord)}get matchCase(){return cv(this._matchCaseOverride,this._matchCase)}get preserveCase(){return cv(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}constructor(){super(),this._onFindReplaceStateChange=this._register(new fe),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}changeMatchInfo(e,t,o){let r={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},n=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,r.matchesPosition=!0,n=!0),this._matchesCount!==t&&(this._matchesCount=t,r.matchesCount=!0,n=!0),typeof o<"u"&&(T.equalsRange(this._currentMatch,o)||(this._currentMatch=o,r.currentMatch=!0,n=!0)),n&&this._onFindReplaceStateChange.fire(r)}change(e,t,o=!0){var r;let n={moveCursor:t,updateHistory:o,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},s=!1,a=this.isRegex,c=this.wholeWord,h=this.matchCase,p=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,n.searchString=!0,s=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,n.replaceString=!0,s=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,n.isRevealed=!0,s=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,n.isReplaceRevealed=!0,s=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&(!((r=e.searchScope)===null||r===void 0)&&r.every(g=>{var f;return(f=this._searchScope)===null||f===void 0?void 0:f.some(_=>!T.equalsRange(_,g))})||(this._searchScope=e.searchScope,n.searchScope=!0,s=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,n.loop=!0,s=!0),typeof e.isSearching<"u"&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,n.isSearching=!0,s=!0),typeof e.filters<"u"&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,n.filters=!0,s=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,a!==this.isRegex&&(s=!0,n.isRegex=!0),c!==this.wholeWord&&(s=!0,n.wholeWord=!0),h!==this.matchCase&&(s=!0,n.matchCase=!0),p!==this.preserveCase&&(s=!0,n.preserveCase=!0),s&&this._onFindReplaceStateChange.fire(n)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=Rn}};ze();Xe();xi();Ze();X();Zi();Tt();ge();re();ze();xi();nt();re();var Uj=b("defaultLabel","input"),qj=b("label.preserveCaseToggle","Preserve Case"),tw=class extends Yf{constructor(e){var t;super({icon:be.preserveCase,title:qj+e.appendTitle,isChecked:e.isChecked,hoverDelegate:(t=e.hoverDelegate)!==null&&t!==void 0?t:Na("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},uv=class extends vs{constructor(e,t,o,r){super(),this._showOptionButtons=o,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new fe),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new fe),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new fe),this._onInput=this._register(new fe),this._onKeyUp=this._register(new fe),this._onPreserveCaseKeyDown=this._register(new fe),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=r.placeholder||"",this.validation=r.validation,this.label=r.label||Uj;let n=r.appendPreserveCaseLabel||"",s=r.history||[],a=!!r.flexibleHeight,c=!!r.flexibleWidth,h=r.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new tN(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},history:s,showHistoryHint:r.showHistoryHint,flexibleHeight:a,flexibleWidth:c,flexibleMaxHeight:h,inputBoxStyles:r.inputBoxStyles})),this.preserveCase=this._register(new tw(U({appendTitle:n,isChecked:!1},r.toggleStyles))),this._register(this.preserveCase.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(f=>{this._onPreserveCaseKeyDown.fire(f)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;let p=[this.preserveCase.domNode];this.onkeydown(this.domNode,f=>{if(f.equals(15)||f.equals(17)||f.equals(9)){let _=p.indexOf(this.domNode.ownerDocument.activeElement);if(_>=0){let y=-1;f.equals(17)?y=(_+1)%p.length:f.equals(15)&&(_===0?y=p.length-1:y=_-1),f.equals(9)?(p[_].blur(),this.inputBox.focus()):y>=0&&p[y].focus(),Rl.stop(f,!0)}}});let g=document.createElement("div");g.className="controls",g.style.display=this._showOptionButtons?"block":"none",g.appendChild(this.preserveCase.domNode),this.domNode.appendChild(g),e?.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,f=>this._onKeyDown.fire(f)),this.onkeyup(this.inputBox.inputElement,f=>this._onKeyUp.fire(f)),this.oninput(this.inputBox.inputElement,f=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,f=>this._onMouseDown.fire(f))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){var e;(e=this.inputBox)===null||e===void 0||e.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=e+"px"}dispose(){super.dispose()}};Me();$C();re();X();ze();var c2=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},d2=function(i,e){return function(t,o){e(t,o,i)}},gv=new Ee("suggestWidgetVisible",!1,b("suggestWidgetVisible","Whether suggestion are visible")),iw="historyNavigationWidgetFocus",u2="historyNavigationForwardsEnabled",h2="historyNavigationBackwardsEnabled",Hs,hv=[];function p2(i,e){if(hv.includes(e))throw new Error("Cannot register the same widget multiple times");hv.push(e);let t=new H,o=new Ee(iw,!1).bindTo(i),r=new Ee(u2,!0).bindTo(i),n=new Ee(h2,!0).bindTo(i),s=()=>{o.set(!0),Hs=e},a=()=>{o.set(!1),Hs===e&&(Hs=void 0)};return Ik(e.element)&&s(),t.add(e.onDidFocus(()=>s())),t.add(e.onDidBlur(()=>a())),t.add(Ve(()=>{hv.splice(hv.indexOf(e),1),a()})),{historyNavigationForwardsEnablement:r,historyNavigationBackwardsEnablement:n,dispose(){t.dispose()}}}var pv=class extends iN{constructor(e,t,o,r){super(e,t,o);let n=this._register(r.createScoped(this.inputBox.element));this._register(p2(n,this.inputBox))}};pv=c2([d2(3,ve)],pv);var mv=class extends uv{constructor(e,t,o,r,n=!1){super(e,t,n,o);let s=this._register(r.createScoped(this.inputBox.element));this._register(p2(s,this.inputBox))}};mv=c2([d2(3,ve)],mv);Zo.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:W.and(W.has(iw),W.equals(h2,!0),W.not("isComposing"),gv.isEqualTo(!1)),primary:16,secondary:[528],handler:i=>{Hs?.showPreviousValue()}});Zo.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:W.and(W.has(iw),W.equals(u2,!0),W.not("isComposing"),gv.isEqualTo(!1)),primary:18,secondary:[530],handler:i=>{Hs?.showNextValue()}});function ow(i){var e,t;return((e=i.lookupKeybinding("history.showPrevious"))===null||e===void 0?void 0:e.getElectronAccelerator())==="Up"&&((t=i.lookupKeybinding("history.showNext"))===null||t===void 0?void 0:t.getElectronAccelerator())==="Down"}Ri();Bi();to();Pf();Di();var m2=kt("find-collapsed",be.chevronRight,b("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),g2=kt("find-expanded",be.chevronDown,b("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),Kj=kt("find-selection",be.selection,b("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),$j=kt("find-replace",be.replace,b("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),Gj=kt("find-replace-all",be.replaceAll,b("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),Jj=kt("find-previous-match",be.arrowUp,b("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),Xj=kt("find-next-match",be.arrowDown,b("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),Yj=b("label.findDialog","Find / Replace"),Qj=b("label.find","Find"),Zj=b("placeholder.find","Find"),ez=b("label.previousMatchButton","Previous Match"),tz=b("label.nextMatchButton","Next Match"),iz=b("label.toggleSelectionFind","Find in Selection"),oz=b("label.closeButton","Close"),rz=b("label.replace","Replace"),nz=b("placeholder.replace","Replace"),sz=b("label.replaceButton","Replace"),az=b("label.replaceAllButton","Replace All"),lz=b("label.toggleReplaceButton","Toggle Replace"),cz=b("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",Rn),dz=b("label.matchesLocation","{0} of {1}"),f2=b("label.noResults","No results"),Wn=419,uz=275,hz=uz-54,sm=69,pz=33,_2="ctrlEnterReplaceAll.windows.donotask",y2=po?256:2048,am=class{constructor(e){this.afterLineNumber=e,this.heightInPx=pz,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}};function v2(i,e,t){let o=!!e.match(/\n/);if(t&&o&&t.selectionStart>0){i.stopPropagation();return}}function b2(i,e,t){let o=!!e.match(/\n/);if(t&&o&&t.selectionEnd<t.value.length){i.stopPropagation();return}}var D2=(()=>{class i extends vs{constructor(t,o,r,n,s,a,c,h,p,g){super(),this._hoverService=g,this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=t,this._controller=o,this._state=r,this._contextViewProvider=n,this._keybindingService=s,this._contextKeyService=a,this._storageService=h,this._notificationService=p,this._ctrlEnterReplaceAllWarningPrompted=!!h.getBoolean(_2,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new Yo(500),this._register(Ve(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(f=>this._onStateChanged(f))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(f=>{if(f.hasChanged(91)&&(this._codeEditor.getOption(91)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),f.hasChanged(145)&&this._tryUpdateWidgetWidth(),f.hasChanged(2)&&this.updateAccessibilitySupport(),f.hasChanged(41)){let _=this._codeEditor.getOption(41).loop;this._state.change({loop:_},!1);let y=this._codeEditor.getOption(41).addExtraSpaceOnTop;y&&!this._viewZone&&(this._viewZone=new am(0),this._showViewZone()),!y&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(async()=>{if(this._isVisible){let f=await this._controller.getGlobalBufferTerm();f&&f!==this._state.searchString&&(this._state.change({searchString:f},!1),this._findInput.select())}})),this._findInputFocused=Cu.bindTo(a),this._findFocusTracker=this._register(Or(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=em.bindTo(a),this._replaceFocusTracker=this._register(Or(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(41).addExtraSpaceOnTop&&(this._viewZone=new am(0)),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(f=>{if(f.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return i.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(t){if(t.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(t.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),t.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),t.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(91)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=xo(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(t.isRevealed||t.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),t.isRegex&&this._findInput.setRegex(this._state.isRegex),t.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),t.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),t.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),t.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),t.searchString||t.matchesCount||t.matchesPosition){let o=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",o),this._updateMatchesCount(),this._updateButtons()}(t.searchString||t.currentMatch)&&this._layoutViewZone(),t.updateHistory&&this._delayedUpdateHistory(),t.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,Fe)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=sm+"px",this._state.matchesCount>=Rn?this._matchesCount.title=cz:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);let t;if(this._state.matchesCount>0){let o=String(this._state.matchesCount);this._state.matchesCount>=Rn&&(o+="+");let r=String(this._state.matchesPosition);r==="0"&&(r="?"),t=fd(dz,r,o)}else t=f2;this._matchesCount.appendChild(document.createTextNode(t)),ai(this._getAriaLabel(t,this._state.currentMatch,this._state.searchString)),sm=Math.max(sm,this._matchesCount.clientWidth)}_getAriaLabel(t,o,r){if(t===f2)return r===""?b("ariaSearchNoResultEmpty","{0} found",t):b("ariaSearchNoResult","{0} found for '{1}'",t,r);if(o){let n=b("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",t,r,o.startLineNumber+":"+o.startColumn),s=this._codeEditor.getModel();return s&&o.startLineNumber<=s.getLineCount()&&o.startLineNumber>=1?`${s.getLineContent(o.startLineNumber)}, ${n}`:n}return b("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",t,r)}_updateToggleSelectionFindButton(){let t=this._codeEditor.getSelection(),o=t?t.startLineNumber!==t.endLineNumber||t.startColumn!==t.endColumn:!1,r=this._toggleSelectionFind.checked;this._isVisible&&(r||o)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);let t=this._state.searchString.length>0,o=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&t&&o&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&t&&o&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&t),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&t),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);let r=!this._codeEditor.getOption(91);this._toggleReplaceBtn.setEnabled(this._isVisible&&r)}_reveal(){if(this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;let t=this._codeEditor.getSelection();switch(this._codeEditor.getOption(41).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{let r=!!t&&t.startLineNumber!==t.endLineNumber;this._toggleSelectionFind.checked=r;break}default:break}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let o=!0;if(this._codeEditor.getOption(41).seedSearchStringFromSelection&&t){let r=this._codeEditor.getDomNode();if(r){let n=$t(r),s=this._codeEditor.getScrolledVisiblePosition(t.getStartPosition()),a=n.left+(s?s.left:0),c=s?s.top:0;if(this._viewZone&&c<this._viewZone.heightInPx){t.endLineNumber>t.startLineNumber&&(o=!1);let h=wk(this._domNode).left;a>h&&(o=!1);let p=this._codeEditor.getScrolledVisiblePosition(t.getEndPosition());n.left+(p?p.left:0)>h&&(o=!1)}}}this._showViewZone(o)}}_hide(t){this._revealTimeouts.forEach(o=>{clearTimeout(o)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),t&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(t){if(!this._codeEditor.getOption(41).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;let r=this._viewZone;this._viewZoneId!==void 0||!r||this._codeEditor.changeViewZones(n=>{r.heightInPx=this._getHeight(),this._viewZoneId=n.addZone(r),this._codeEditor.setScrollTop(t||this._codeEditor.getScrollTop()+r.heightInPx)})}_showViewZone(t=!0){if(!this._isVisible||!this._codeEditor.getOption(41).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new am(0));let r=this._viewZone;this._codeEditor.changeViewZones(n=>{if(this._viewZoneId!==void 0){let s=this._getHeight();if(s===r.heightInPx)return;let a=s-r.heightInPx;r.heightInPx=s,n.layoutZone(this._viewZoneId),t&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+a);return}else{let s=this._getHeight();if(s-=this._codeEditor.getOption(84).top,s<=0)return;r.heightInPx=s,this._viewZoneId=n.addZone(r),t&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+s)}})}_removeViewZone(){this._codeEditor.changeViewZones(t=>{this._viewZoneId!==void 0&&(t.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_tryUpdateWidgetWidth(){if(!this._isVisible||!this._domNode.isConnected)return;let t=this._codeEditor.getLayoutInfo();if(t.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");let r=t.width,n=t.minimap.minimapWidth,s=!1,a=!1,c=!1;if(this._resized&&xo(this._domNode)>Wn){this._domNode.style.maxWidth=`${r-28-n-15}px`,this._replaceInput.width=xo(this._findInput.domNode);return}if(Wn+28+n>=r&&(a=!0),Wn+28+n-sm>=r&&(c=!0),Wn+28+n-sm>=r+50&&(s=!0),this._domNode.classList.toggle("collapsed-find-widget",s),this._domNode.classList.toggle("narrow-find-widget",c),this._domNode.classList.toggle("reduced-find-widget",a),!c&&!s&&(this._domNode.style.maxWidth=`${r-28-n-15}px`),this._findInput.layout({collapsedFindWidget:s,narrowFindWidget:c,reducedFindWidget:a}),this._resized){let h=this._findInput.inputBox.element.clientWidth;h>0&&(this._replaceInput.width=h)}else this._isReplaceVisible&&(this._replaceInput.width=xo(this._findInput.domNode))}_getHeight(){let t=0;return t+=4,t+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(t+=4,t+=this._replaceInput.inputBox.height+2),t+=4,t}_tryUpdateHeight(){let t=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===t?!1:(this._cachedHeight=t,this._domNode.style.height=`${t}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){let t=this._codeEditor.getSelections();t.map(o=>{o.endColumn===1&&o.endLineNumber>o.startLineNumber&&(o=o.setEndPosition(o.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(o.endLineNumber-1)));let r=this._state.currentMatch;return o.startLineNumber!==o.endLineNumber&&!T.equalsRange(o,r)?o:null}).filter(o=>!!o),t.length&&this._state.change({searchScope:t},!0)}}_onFindInputMouseDown(t){t.middleButton&&t.stopPropagation()}_onFindInputKeyDown(t){if(t.equals(y2|3))if(this._keybindingService.dispatchEvent(t,t.target)){t.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),t.preventDefault();return}if(t.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),t.preventDefault();return}if(t.equals(2066)){this._codeEditor.focus(),t.preventDefault();return}if(t.equals(16))return v2(t,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(t.equals(18))return b2(t,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(t){if(t.equals(y2|3))if(this._keybindingService.dispatchEvent(t,t.target)){t.preventDefault();return}else{Da&&Ca&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(b("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(_2,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),t.preventDefault();return}if(t.equals(2)){this._findInput.focusOnCaseSensitive(),t.preventDefault();return}if(t.equals(1026)){this._findInput.focus(),t.preventDefault();return}if(t.equals(2066)){this._codeEditor.focus(),t.preventDefault();return}if(t.equals(16))return v2(t,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(t.equals(18))return b2(t,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(t){return 0}_keybindingLabelFor(t){let o=this._keybindingService.lookupKeybinding(t);return o?` (${o.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new pv(null,this._contextViewProvider,{width:hz,label:Qj,placeholder:Zj,appendCaseSensitiveLabel:this._keybindingLabelFor(gt.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(gt.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(gt.ToggleRegexCommand),validation:g=>{if(g.length===0||!this._findInput.getRegex())return null;try{return new RegExp(g,"gu"),null}catch(f){return{content:f.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showCommonFindToggles:!0,showHistoryHint:()=>ow(this._keybindingService),inputBoxStyles:C0,toggleStyles:D0},this._contextKeyService)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(g=>this._onFindInputKeyDown(g))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(g=>{g.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),g.preventDefault())})),this._register(this._findInput.onRegexKeyDown(g=>{g.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),g.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(g=>{this._tryUpdateHeight()&&this._showViewZone()})),UP&&this._register(this._findInput.onMouseDown(g=>this._onFindInputMouseDown(g))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount();let r=this._register(dp());this._prevBtn=this._register(new Ja({label:ez+this._keybindingLabelFor(gt.PreviousMatchFindAction),icon:Jj,hoverDelegate:r,onTrigger:()=>{ba(this._codeEditor.getAction(gt.PreviousMatchFindAction)).run().then(void 0,Fe)}},this._hoverService)),this._nextBtn=this._register(new Ja({label:tz+this._keybindingLabelFor(gt.NextMatchFindAction),icon:Xj,hoverDelegate:r,onTrigger:()=>{ba(this._codeEditor.getAction(gt.NextMatchFindAction)).run().then(void 0,Fe)}},this._hoverService));let n=document.createElement("div");n.className="find-part",n.appendChild(this._findInput.domNode);let s=document.createElement("div");s.className="find-actions",n.appendChild(s),s.appendChild(this._matchesCount),s.appendChild(this._prevBtn.domNode),s.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new Yf({icon:Kj,title:iz+this._keybindingLabelFor(gt.ToggleSearchScopeCommand),isChecked:!1,hoverDelegate:r,inputActiveOptionBackground:Cn(_s),inputActiveOptionBorder:Cn(Af),inputActiveOptionForeground:Cn(Tf)})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let g=this._codeEditor.getSelections();g=g.map(f=>(f.endColumn===1&&f.endLineNumber>f.startLineNumber&&(f=f.setEndPosition(f.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(f.endLineNumber-1))),f.isEmpty()?null:f)).filter(f=>!!f),g.length&&this._state.change({searchScope:g},!0)}}else this._state.change({searchScope:null},!0)})),s.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new Ja({label:oz+this._keybindingLabelFor(gt.CloseFindWidgetCommand),icon:t_,hoverDelegate:r,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:g=>{g.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),g.preventDefault())}},this._hoverService)),this._replaceInput=this._register(new mv(null,void 0,{label:rz,placeholder:nz,appendPreserveCaseLabel:this._keybindingLabelFor(gt.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>ow(this._keybindingService),inputBoxStyles:C0,toggleStyles:D0},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(g=>this._onReplaceInputKeyDown(g))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(g=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(g=>{g.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),g.preventDefault())}));let a=this._register(dp());this._replaceBtn=this._register(new Ja({label:sz+this._keybindingLabelFor(gt.ReplaceOneAction),icon:$j,hoverDelegate:a,onTrigger:()=>{this._controller.replace()},onKeyDown:g=>{g.equals(1026)&&(this._closeBtn.focus(),g.preventDefault())}},this._hoverService)),this._replaceAllBtn=this._register(new Ja({label:az+this._keybindingLabelFor(gt.ReplaceAllAction),icon:Gj,hoverDelegate:a,onTrigger:()=>{this._controller.replaceAll()}},this._hoverService));let c=document.createElement("div");c.className="replace-part",c.appendChild(this._replaceInput.domNode);let h=document.createElement("div");h.className="replace-actions",c.appendChild(h),h.appendChild(this._replaceBtn.domNode),h.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new Ja({label:lz,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=xo(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}},this._hoverService)),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.ariaLabel=Yj,this._domNode.role="dialog",this._domNode.style.width=`${Wn}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(n),this._domNode.appendChild(this._closeBtn.domNode),this._domNode.appendChild(c),this._resizeSash=this._register(new Ps(this._domNode,this,{orientation:0,size:2})),this._resized=!1;let p=Wn;this._register(this._resizeSash.onDidStart(()=>{p=xo(this._domNode)})),this._register(this._resizeSash.onDidChange(g=>{this._resized=!0;let f=p+g.startX-g.currentX;if(f<Wn)return;let _=parseFloat(Sk(this._domNode).maxWidth)||0;f>_||(this._domNode.style.width=`${f}px`,this._isReplaceVisible&&(this._replaceInput.width=xo(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{let g=xo(this._domNode);if(g<Wn)return;let f=Wn;if(!this._resized||g===Wn){let _=this._codeEditor.getLayoutInfo();f=_.width-28-_.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${f}px`,this._isReplaceVisible&&(this._replaceInput.width=xo(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){let t=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(t!==2)}}return i.ID="editor.contrib.findWidget",i})(),Ja=class extends vs{constructor(e,t){var o;super(),this._opts=e;let r="button";this._opts.className&&(r=r+" "+this._opts.className),this._opts.icon&&(r=r+" "+je.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.tabIndex=0,this._domNode.className=r,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this._register(t.setupUpdatableHover((o=e.hoverDelegate)!==null&&o!==void 0?o:Na("element"),this._domNode,this._opts.label)),this.onclick(this._domNode,n=>{this._opts.onTrigger(),n.preventDefault()}),this.onkeydown(this._domNode,n=>{var s,a;if(n.equals(10)||n.equals(3)){this._opts.onTrigger(),n.preventDefault();return}(a=(s=this._opts).onKeyDown)===null||a===void 0||a.call(s,n)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...je.asClassNameArray(m2)),this._domNode.classList.add(...je.asClassNameArray(g2))):(this._domNode.classList.remove(...je.asClassNameArray(g2)),this._domNode.classList.add(...je.asClassNameArray(m2)))}};Pa((i,e)=>{let t=i.getColor(wf);t&&e.addRule(`.monaco-editor .findMatch { border: 1px ${ys(i.type)?"dotted":"solid"} ${t}; box-sizing: border-box; }`);let o=i.getColor(fF);o&&e.addRule(`.monaco-editor .findScope { border: 1px ${ys(i.type)?"dashed":"solid"} ${o}; }`);let r=i.getColor(fr);r&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${r}; }`);let n=i.getColor(pF);n&&e.addRule(`.monaco-editor .findMatchInline { color: ${n}; }`);let s=i.getColor(gF);s&&e.addRule(`.monaco-editor .currentFindMatchInline { color: ${s}; }`)});re();Wt();Me();Bi();var C2=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},ar=function(i,e){return function(t,o){e(t,o,i)}},rw,mz=524288;function nw(i,e="single",t=!1){if(!i.hasModel())return null;let o=i.getSelection();if(e==="single"&&o.startLineNumber===o.endLineNumber||e==="multiple"){if(o.isEmpty()){let r=i.getConfiguredWordAtPosition(o.getStartPosition());if(r&&t===!1)return r.word}else if(i.getModel().getValueLengthInRange(o)<mz)return i.getModel().getValueInRange(o)}return null}var Ki=rw=class extends B{get editor(){return this._editor}static get(e){return e.getContribution(rw.ID)}constructor(e,t,o,r,n,s){super(),this._editor=e,this._findWidgetVisible=Bn.bindTo(t),this._contextKeyService=t,this._storageService=o,this._clipboardService=r,this._notificationService=n,this._hoverService=s,this._updateHistoryDelayer=new Yo(500),this._state=this._register(new dv),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(a=>this._onStateChanged(a))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{let a=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),a&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(41).loop})}))}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,1),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,1),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,1),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,1)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!Cu.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e=e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=us(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}async _start(e,t){if(this.disposeModel(),!this._editor.hasModel())return;let o=he(U({},t),{isRevealed:!0});if(e.seedSearchStringFromSelection==="single"){let r=nw(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);r&&(this._state.isRegex?o.searchString=us(r):o.searchString=r)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){let r=nw(this._editor,e.seedSearchStringFromSelection);r&&(o.searchString=r)}if(!o.searchString&&e.seedSearchStringFromGlobalClipboard){let r=await this.getGlobalBufferTerm();if(!this._editor.hasModel())return;r&&(o.searchString=r)}if(e.forceRevealReplace||o.isReplaceRevealed?o.isReplaceRevealed=!0:this._findWidgetVisible.get()||(o.isReplaceRevealed=!1),e.updateSearchScope){let r=this._editor.getSelections();r.some(n=>!n.isEmpty())&&(o.searchScope=r)}o.loop=e.loop,this._state.change(o,!1),this._model||(this._model=new lv(this._editor,this._state))}start(e,t){return this._start(e,t)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}goToMatch(e){return this._model?(this._model.moveToMatch(e),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){var e;return this._model?!((e=this._editor.getModel())===null||e===void 0)&&e.isTooLargeForHeapOperation()?(this._notificationService.warn(b("too.large.for.replaceall","The file is too large to perform a replace all operation.")),!1):(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}async getGlobalBufferTerm(){return this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""}setGlobalBufferTerm(e){this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};Ki.ID="editor.contrib.findController";Ki=rw=C2([ar(1,ve),ar(2,To),ar(3,Vr),ar(4,Pt),ar(5,Cs)],Ki);var sw=class extends Ki{constructor(e,t,o,r,n,s,a,c,h){super(e,o,a,c,s,h),this._contextViewService=t,this._keybindingService=r,this._themeService=n,this._widget=null,this._findOptionsWidget=null}async _start(e,t){this._widget||this._createFindWidget();let o=this._editor.getSelection(),r=!1;switch(this._editor.getOption(41).autoFindInSelection){case"always":r=!0;break;case"never":r=!1;break;case"multiline":{r=!!o&&o.startLineNumber!==o.endLineNumber;break}default:break}e.updateSearchScope=e.updateSearchScope||r,await super._start(e,t),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new D2(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService,this._hoverService)),this._findOptionsWidget=this._register(new l2(this._editor,this._state,this._keybindingService))}};sw=C2([ar(1,ka),ar(2,ve),ar(3,qe),ar(4,mi),ar(5,Pt),ar(6,To),ar(7,Vr),ar(8,Cs)],sw);var gz=JC(new GC({id:gt.StartFindAction,label:b("startFindAction","Find"),alias:"Find",precondition:W.or(A.focus,W.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:Q.MenubarEditMenu,group:"3_find",title:b({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));gz.addImplementation(0,(i,e,t)=>{let o=Ki.get(e);return o?o.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(41).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(41).loop}):!1});var fz={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},isRegex:{type:"boolean"},matchWholeWord:{type:"boolean"},isCaseSensitive:{type:"boolean"},preserveCase:{type:"boolean"},findInSelection:{type:"boolean"}}}}]},aw=class extends j{constructor(){super({id:gt.StartFindWithArgs,label:b("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},metadata:fz})}async run(e,t,o){let r=Ki.get(t);if(r){let n=o?{searchString:o.searchString,replaceString:o.replaceString,isReplaceRevealed:o.replaceString!==void 0,isRegex:o.isRegex,wholeWord:o.matchWholeWord,matchCase:o.isCaseSensitive,preserveCase:o.preserveCase}:{};await r.start({forceRevealReplace:!1,seedSearchStringFromSelection:r.getState().searchString.length===0&&t.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:o?.findInSelection||!1,loop:t.getOption(41).loop},n),r.setGlobalBufferTerm(r.getState().searchString)}}},lw=class extends j{constructor(){super({id:gt.StartFindWithSelection,label:b("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}async run(e,t){let o=Ki.get(t);o&&(await o.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),o.setGlobalBufferTerm(o.getState().searchString))}},fv=class extends j{async run(e,t){let o=Ki.get(t);o&&!this._run(o)&&(await o.start({forceRevealReplace:!1,seedSearchStringFromSelection:o.getState().searchString.length===0&&t.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(o))}},cw=class extends fv{constructor(){super({id:gt.NextMatchFindAction,label:b("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:A.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:W.and(A.focus,Cu),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}},dw=class extends fv{constructor(){super({id:gt.PreviousMatchFindAction,label:b("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:A.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:W.and(A.focus,Cu),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}},uw=class extends j{constructor(){super({id:gt.GoToMatchFindAction,label:b("findMatchAction.goToMatch","Go to Match..."),alias:"Go to Match...",precondition:Bn}),this._highlightDecorations=[]}run(e,t,o){let r=Ki.get(t);if(!r)return;let n=r.getState().matchesCount;if(n<1){e.get(Pt).notify({severity:Td.Warning,message:b("findMatchAction.noResults","No matches. Try searching for something else.")});return}let a=e.get(qi).createInputBox();a.placeholder=b("findMatchAction.inputPlaceHolder","Type a number to go to a specific match (between 1 and {0})",n);let c=p=>{let g=parseInt(p);if(isNaN(g))return;let f=r.getState().matchesCount;if(g>0&&g<=f)return g-1;if(g<0&&g>=-f)return f+g},h=p=>{let g=c(p);if(typeof g=="number"){a.validationMessage=void 0,r.goToMatch(g);let f=r.getState().currentMatch;f&&this.addDecorations(t,f)}else a.validationMessage=b("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",r.getState().matchesCount),this.clearDecorations(t)};a.onDidChangeValue(p=>{h(p)}),a.onDidAccept(()=>{let p=c(a.value);typeof p=="number"?(r.goToMatch(p),a.hide()):a.validationMessage=b("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",r.getState().matchesCount)}),a.onDidHide(()=>{this.clearDecorations(t),a.dispose()}),a.show()}clearDecorations(e){e.changeDecorations(t=>{this._highlightDecorations=t.deltaDecorations(this._highlightDecorations,[])})}addDecorations(e,t){e.changeDecorations(o=>{this._highlightDecorations=o.deltaDecorations(this._highlightDecorations,[{range:t,options:{description:"find-match-quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"find-match-quick-access-range-highlight-overview",overviewRuler:{color:It(Nf),position:Eo.Full}}}])})}},_v=class extends j{async run(e,t){let o=Ki.get(t);if(!o)return;let r=nw(t,"single",!1);r&&o.setSearchString(r),this._run(o)||(await o.start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(o))}},hw=class extends _v{constructor(){super({id:gt.NextSelectionMatchFindAction,label:b("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}},pw=class extends _v{constructor(){super({id:gt.PreviousSelectionMatchFindAction,label:b("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}},_z=JC(new GC({id:gt.StartFindReplaceAction,label:b("startReplace","Replace"),alias:"Replace",precondition:W.or(A.focus,W.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:Q.MenubarEditMenu,group:"3_find",title:b({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));_z.addImplementation(0,(i,e,t)=>{if(!e.hasModel()||e.getOption(91))return!1;let o=Ki.get(e);if(!o)return!1;let r=e.getSelection(),n=o.isFindInputFocused(),s=!r.isEmpty()&&r.startLineNumber===r.endLineNumber&&e.getOption(41).seedSearchStringFromSelection!=="never"&&!n,a=n||s?2:1;return o.start({forceRevealReplace:!0,seedSearchStringFromSelection:s?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(41).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(41).loop})});le(Ki.ID,sw,0);M(aw);M(lw);M(cw);M(dw);M(uw);M(hw);M(pw);var Yr=Bt.bindToContribution(Ki.get);de(new Yr({id:gt.CloseFindWidgetCommand,precondition:Bn,handler:i=>i.closeFindWidget(),kbOpts:{weight:105,kbExpr:W.and(A.focus,W.not("isComposing")),primary:9,secondary:[1033]}}));de(new Yr({id:gt.ToggleCaseSensitiveCommand,precondition:void 0,handler:i=>i.toggleCaseSensitive(),kbOpts:{weight:105,kbExpr:A.focus,primary:tm.primary,mac:tm.mac,win:tm.win,linux:tm.linux}}));de(new Yr({id:gt.ToggleWholeWordCommand,precondition:void 0,handler:i=>i.toggleWholeWords(),kbOpts:{weight:105,kbExpr:A.focus,primary:im.primary,mac:im.mac,win:im.win,linux:im.linux}}));de(new Yr({id:gt.ToggleRegexCommand,precondition:void 0,handler:i=>i.toggleRegex(),kbOpts:{weight:105,kbExpr:A.focus,primary:om.primary,mac:om.mac,win:om.win,linux:om.linux}}));de(new Yr({id:gt.ToggleSearchScopeCommand,precondition:void 0,handler:i=>i.toggleSearchScope(),kbOpts:{weight:105,kbExpr:A.focus,primary:rm.primary,mac:rm.mac,win:rm.win,linux:rm.linux}}));de(new Yr({id:gt.TogglePreserveCaseCommand,precondition:void 0,handler:i=>i.togglePreserveCase(),kbOpts:{weight:105,kbExpr:A.focus,primary:nm.primary,mac:nm.mac,win:nm.win,linux:nm.linux}}));de(new Yr({id:gt.ReplaceOneAction,precondition:Bn,handler:i=>i.replace(),kbOpts:{weight:105,kbExpr:A.focus,primary:3094}}));de(new Yr({id:gt.ReplaceOneAction,precondition:Bn,handler:i=>i.replace(),kbOpts:{weight:105,kbExpr:W.and(A.focus,em),primary:3}}));de(new Yr({id:gt.ReplaceAllAction,precondition:Bn,handler:i=>i.replaceAll(),kbOpts:{weight:105,kbExpr:A.focus,primary:2563}}));de(new Yr({id:gt.ReplaceAllAction,precondition:Bn,handler:i=>i.replaceAll(),kbOpts:{weight:105,kbExpr:W.and(A.focus,em),primary:void 0,mac:{primary:2051}}}));de(new Yr({id:gt.SelectAllMatchesAction,precondition:Bn,handler:i=>i.selectAllMatches(),kbOpts:{weight:105,kbExpr:A.focus,primary:515}}));Xe();yt();Ze();ds();X();Tt();Di();xe();it();Jt();Ii();nt();var yz={0:" ",1:"u",2:"r"},x2=65535,lr=16777215,S2=4278190080,lm=class{constructor(e){let t=Math.ceil(e/32);this._states=new Uint32Array(t)}get(e){let t=e/32|0,o=e%32;return(this._states[t]&1<<o)!==0}set(e,t){let o=e/32|0,r=e%32,n=this._states[o];t?this._states[o]=n|1<<r:this._states[o]=n&~(1<<r)}},$i=class i{constructor(e,t,o){if(e.length!==t.length||e.length>x2)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new lm(e.length),this._userDefinedStates=new lm(e.length),this._recoveredStates=new lm(e.length),this._types=o,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],t=(o,r)=>{let n=e[e.length-1];return this.getStartLineNumber(n)<=o&&this.getEndLineNumber(n)>=r};for(let o=0,r=this._startIndexes.length;o<r;o++){let n=this._startIndexes[o],s=this._endIndexes[o];if(n>lr||s>lr)throw new Error("startLineNumber or endLineNumber must not exceed "+lr);for(;e.length>0&&!t(n,s);)e.pop();let a=e.length>0?e[e.length-1]:-1;e.push(o),this._startIndexes[o]=n+((a&255)<<24),this._endIndexes[o]=s+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&lr}getEndLineNumber(e){return this._endIndexes[e]&lr}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){return this._collapseStates.get(e)}setCollapsed(e,t){this._collapseStates.set(e,t)}isUserDefined(e){return this._userDefinedStates.get(e)}setUserDefined(e,t){return this._userDefinedStates.set(e,t)}isRecovered(e){return this._recoveredStates.get(e)}setRecovered(e,t){return this._recoveredStates.set(e,t)}getSource(e){return this.isUserDefined(e)?1:this.isRecovered(e)?2:0}setSource(e,t){t===1?(this.setUserDefined(e,!0),this.setRecovered(e,!1)):t===2?(this.setUserDefined(e,!1),this.setRecovered(e,!0)):(this.setUserDefined(e,!1),this.setRecovered(e,!1))}setCollapsedAllOfType(e,t){let o=!1;if(this._types)for(let r=0;r<this._types.length;r++)this._types[r]===e&&(this.setCollapsed(r,t),o=!0);return o}toRegion(e){return new mw(this,e)}getParentIndex(e){this.ensureParentIndices();let t=((this._startIndexes[e]&S2)>>>24)+((this._endIndexes[e]&S2)>>>16);return t===x2?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,o=this._startIndexes.length;if(o===0)return-1;for(;t<o;){let r=Math.floor((t+o)/2);e<this.getStartLineNumber(r)?o=r:t=r+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){let e=[];for(let t=0;t<this.length;t++)e[t]=`[${yz[this.getSource(t)]}${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}toFoldRange(e){return{startLineNumber:this._startIndexes[e]&lr,endLineNumber:this._endIndexes[e]&lr,type:this._types?this._types[e]:void 0,isCollapsed:this.isCollapsed(e),source:this.getSource(e)}}static fromFoldRanges(e){let t=e.length,o=new Uint32Array(t),r=new Uint32Array(t),n=[],s=!1;for(let c=0;c<t;c++){let h=e[c];o[c]=h.startLineNumber,r[c]=h.endLineNumber,n.push(h.type),h.type&&(s=!0)}s||(n=void 0);let a=new i(o,r,n);for(let c=0;c<t;c++)e[c].isCollapsed&&a.setCollapsed(c,!0),a.setSource(c,e[c].source);return a}static sanitizeAndMerge(e,t,o){o=o??Number.MAX_VALUE;let r=(C,x)=>Array.isArray(C)?D=>D<x?C[D]:void 0:D=>D<x?C.toFoldRange(D):void 0,n=r(e,e.length),s=r(t,t.length),a=0,c=0,h=n(0),p=s(0),g=[],f,_=0,y=[];for(;h||p;){let C;if(p&&(!h||h.startLineNumber>=p.startLineNumber))h&&h.startLineNumber===p.startLineNumber?(p.source===1?C=p:(C=h,C.isCollapsed=p.isCollapsed&&h.endLineNumber===p.endLineNumber,C.source=0),h=n(++a)):(C=p,p.isCollapsed&&p.source===0&&(C.source=2)),p=s(++c);else{let x=c,D=p;for(;;){if(!D||D.startLineNumber>h.endLineNumber){C=h;break}if(D.source===1&&D.endLineNumber>h.endLineNumber)break;D=s(++x)}h=n(++a)}if(C){for(;f&&f.endLineNumber<C.startLineNumber;)f=g.pop();C.endLineNumber>C.startLineNumber&&C.startLineNumber>_&&C.endLineNumber<=o&&(!f||f.endLineNumber>=C.endLineNumber)&&(y.push(C),_=C.startLineNumber,f&&g.push(f),f=C)}}return y}},mw=class{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}};Dk();var yv=class{get regions(){return this._regions}get textModel(){return this._textModel}constructor(e,t){this._updateEventEmitter=new fe,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new $i(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}toggleCollapseState(e){if(!e.length)return;e=e.sort((o,r)=>o.regionIndex-r.regionIndex);let t={};this._decorationProvider.changeDecorations(o=>{let r=0,n=-1,s=-1,a=c=>{for(;r<c;){let h=this._regions.getEndLineNumber(r),p=this._regions.isCollapsed(r);if(h<=n){let g=this.regions.getSource(r)!==0;o.changeDecorationOptions(this._editorDecorationIds[r],this._decorationProvider.getDecorationOption(p,h<=s,g))}p&&h>s&&(s=h),r++}};for(let c of e){let h=c.regionIndex,p=this._editorDecorationIds[h];if(p&&!t[p]){t[p]=!0,a(h);let g=!this._regions.isCollapsed(h);this._regions.setCollapsed(h,g),n=Math.max(n,this._regions.getEndLineNumber(h))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}removeManualRanges(e){let t=new Array,o=r=>{for(let n of e)if(!(n.startLineNumber>r.endLineNumber||r.startLineNumber>n.endLineNumber))return!0;return!1};for(let r=0;r<this._regions.length;r++){let n=this._regions.toFoldRange(r);(n.source===0||!o(n))&&t.push(n)}this.updatePost($i.fromFoldRanges(t))}update(e,t=[]){let o=this._currentFoldedOrManualRanges(t),r=$i.sanitizeAndMerge(e,o,this._textModel.getLineCount());this.updatePost($i.fromFoldRanges(r))}updatePost(e){let t=[],o=-1;for(let r=0,n=e.length;r<n;r++){let s=e.getStartLineNumber(r),a=e.getEndLineNumber(r),c=e.isCollapsed(r),h=e.getSource(r)!==0,p={startLineNumber:s,startColumn:this._textModel.getLineMaxColumn(s),endLineNumber:a,endColumn:this._textModel.getLineMaxColumn(a)+1};t.push({range:p,options:this._decorationProvider.getDecorationOption(c,a<=o,h)}),c&&a>o&&(o=a)}this._decorationProvider.changeDecorations(r=>this._editorDecorationIds=r.deltaDecorations(this._editorDecorationIds,t)),this._regions=e,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(e=[]){let t=(r,n)=>{for(let s of e)if(r<s&&s<=n)return!0;return!1},o=[];for(let r=0,n=this._regions.length;r<n;r++){let s=this.regions.isCollapsed(r),a=this.regions.getSource(r);if(s||a!==0){let c=this._regions.toFoldRange(r),h=this._textModel.getDecorationRange(this._editorDecorationIds[r]);h&&(s&&t(h.startLineNumber,h.endLineNumber)&&(s=!1),o.push({startLineNumber:h.startLineNumber,endLineNumber:h.endLineNumber,type:c.type,isCollapsed:s,source:a}))}}return o}getMemento(){let e=this._currentFoldedOrManualRanges(),t=[],o=this._textModel.getLineCount();for(let r=0,n=e.length;r<n;r++){let s=e[r];if(s.startLineNumber>=s.endLineNumber||s.startLineNumber<1||s.endLineNumber>o)continue;let a=this._getLinesChecksum(s.startLineNumber+1,s.endLineNumber);t.push({startLineNumber:s.startLineNumber,endLineNumber:s.endLineNumber,isCollapsed:s.isCollapsed,source:s.source,checksum:a})}return t.length>0?t:void 0}applyMemento(e){var t,o;if(!Array.isArray(e))return;let r=[],n=this._textModel.getLineCount();for(let a of e){if(a.startLineNumber>=a.endLineNumber||a.startLineNumber<1||a.endLineNumber>n)continue;let c=this._getLinesChecksum(a.startLineNumber+1,a.endLineNumber);(!a.checksum||c===a.checksum)&&r.push({startLineNumber:a.startLineNumber,endLineNumber:a.endLineNumber,type:void 0,isCollapsed:(t=a.isCollapsed)!==null&&t!==void 0?t:!0,source:(o=a.source)!==null&&o!==void 0?o:0})}let s=$i.sanitizeAndMerge(this._regions,r,n);this.updatePost($i.fromFoldRanges(s))}_getLinesChecksum(e,t){return uf(this._textModel.getLineContent(e)+this._textModel.getLineContent(t))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(e,t){let o=[];if(this._regions){let r=this._regions.findRange(e),n=1;for(;r>=0;){let s=this._regions.toRegion(r);(!t||t(s,n))&&o.push(s),n++,r=s.parentIndex}}return o}getRegionAtLine(e){if(this._regions){let t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){let o=[],r=e?e.regionIndex+1:0,n=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){let s=[];for(let a=r,c=this._regions.length;a<c;a++){let h=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<n){for(;s.length>0&&!h.containedBy(s[s.length-1]);)s.pop();s.push(h),t(h,s.length)&&o.push(h)}else break}}else for(let s=r,a=this._regions.length;s<a;s++){let c=this._regions.toRegion(s);if(this._regions.getStartLineNumber(s)<n)(!t||t(c))&&o.push(c);else break}return o}};function vv(i,e,t){let o=[];for(let r of t){let n=i.getRegionAtLine(r);if(n){let s=!n.isCollapsed;if(o.push(n),e>1){let a=i.getRegionsInside(n,(c,h)=>c.isCollapsed!==s&&h<e);o.push(...a)}}}i.toggleCollapseState(o)}function yc(i,e,t=Number.MAX_VALUE,o){let r=[];if(o&&o.length>0)for(let n of o){let s=i.getRegionAtLine(n);if(s&&(s.isCollapsed!==e&&r.push(s),t>1)){let a=i.getRegionsInside(s,(c,h)=>c.isCollapsed!==e&&h<t);r.push(...a)}}else{let n=i.getRegionsInside(null,(s,a)=>s.isCollapsed!==e&&a<t);r.push(...n)}i.toggleCollapseState(r)}function gw(i,e,t,o){let r=[];for(let n of o){let s=i.getAllRegionsAtLine(n,(a,c)=>a.isCollapsed!==e&&c<=t);r.push(...s)}i.toggleCollapseState(r)}function w2(i,e,t){let o=[];for(let r of t){let n=i.getAllRegionsAtLine(r,s=>s.isCollapsed!==e);n.length>0&&o.push(n[0])}i.toggleCollapseState(o)}function E2(i,e,t,o){let r=(s,a)=>a===e&&s.isCollapsed!==t&&!o.some(c=>s.containsLine(c)),n=i.getRegionsInside(null,r);i.toggleCollapseState(n)}function fw(i,e,t){let o=[];for(let s of t){let a=i.getAllRegionsAtLine(s,void 0);a.length>0&&o.push(a[0])}let r=s=>o.every(a=>!a.containedBy(s)&&!s.containedBy(a))&&s.isCollapsed!==e,n=i.getRegionsInside(null,r);i.toggleCollapseState(n)}function bv(i,e,t){let o=i.textModel,r=i.regions,n=[];for(let s=r.length-1;s>=0;s--)if(t!==r.isCollapsed(s)){let a=r.getStartLineNumber(s);e.test(o.getLineContent(a))&&n.push(r.toRegion(s))}i.toggleCollapseState(n)}function Dv(i,e,t){let o=i.regions,r=[];for(let n=o.length-1;n>=0;n--)t!==o.isCollapsed(n)&&e===o.getType(n)&&r.push(o.toRegion(n));i.toggleCollapseState(r)}function A2(i,e){let t=null,o=e.getRegionAtLine(i);if(o!==null&&(t=o.startLineNumber,i===t)){let r=o.parentIndex;r!==-1?t=e.regions.getStartLineNumber(r):t=null}return t}function T2(i,e){let t=e.getRegionAtLine(i);if(t!==null&&t.startLineNumber===i){if(i!==t.startLineNumber)return t.startLineNumber;{let o=t.parentIndex,r=0;for(o!==-1&&(r=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=r)return null;if(t.parentIndex===o)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<i)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}function I2(i,e){let t=e.getRegionAtLine(i);if(t!==null&&t.startLineNumber===i){let o=t.parentIndex,r=0;if(o!==-1)r=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;r=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=r)return null;if(t.parentIndex===o)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>i)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}$h();nt();ge();w6();var Cv=class{get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}constructor(e){this._updateEventEmitter=new fe,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(t=>t.range.endLineNumber!==t.range.startLineNumber||HF(t.text)[0]!==0))}updateHiddenRanges(){let e=!1,t=[],o=0,r=0,n=Number.MAX_VALUE,s=-1,a=this._foldingModel.regions;for(;o<a.length;o++){if(!a.isCollapsed(o))continue;let c=a.getStartLineNumber(o)+1,h=a.getEndLineNumber(o);n<=c&&h<=s||(!e&&r<this._hiddenRanges.length&&this._hiddenRanges[r].startLineNumber===c&&this._hiddenRanges[r].endLineNumber===h?(t.push(this._hiddenRanges[r]),r++):(e=!0,t.push(new T(c,1,h,1))),n=c,s=h)}(this._hasLineChanges||e||r<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return P2(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1,o=this._foldingModel.textModel,r=null,n=s=>((!r||!vz(s,r))&&(r=P2(this._hiddenRanges,s)),r?r.startLineNumber-1:null);for(let s=0,a=e.length;s<a;s++){let c=e[s],h=n(c.startLineNumber);h&&(c=c.setStartPosition(h,o.getLineMaxColumn(h)),t=!0);let p=n(c.endLineNumber);p&&(c=c.setEndPosition(p,o.getLineMaxColumn(p)),t=!0),e[s]=c}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}};function vz(i,e){return i>=e.startLineNumber&&i<=e.endLineNumber}function P2(i,e){let t=bf(i,o=>e<o.startLineNumber)-1;return t>=0&&i[t].endLineNumber>=e?i[t]:null}WF();var bz=5e3,Dz="indent",vc=class{constructor(e,t,o){this.editorModel=e,this.languageConfigurationService=t,this.foldingRangesLimit=o,this.id=Dz}dispose(){}compute(e){let t=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,o=t&&!!t.offSide,r=t&&t.markers;return Promise.resolve(xz(this.editorModel,o,r,this.foldingRangesLimit))}},_w=class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,o){if(e>lr||t>lr)return;let r=this._length;this._startIndexes[r]=e,this._endIndexes[r]=t,this._length++,o<1e3&&(this._indentOccurrences[o]=(this._indentOccurrences[o]||0)+1)}toIndentRanges(e){let t=this._foldingRangesLimit.limit;if(this._length<=t){this._foldingRangesLimit.update(this._length,!1);let o=new Uint32Array(this._length),r=new Uint32Array(this._length);for(let n=this._length-1,s=0;n>=0;n--,s++)o[s]=this._startIndexes[n],r[s]=this._endIndexes[n];return new $i(o,r)}else{this._foldingRangesLimit.update(this._length,t);let o=0,r=this._indentOccurrences.length;for(let c=0;c<this._indentOccurrences.length;c++){let h=this._indentOccurrences[c];if(h){if(h+o>t){r=c;break}o+=h}}let n=e.getOptions().tabSize,s=new Uint32Array(t),a=new Uint32Array(t);for(let c=this._length-1,h=0;c>=0;c--){let p=this._startIndexes[c],g=e.getLineContent(p),f=np(g,n);(f<r||f===r&&o++<t)&&(s[h]=p,a[h]=this._endIndexes[c],h++)}return new $i(s,a)}}},Cz={limit:bz,update:()=>{}};function xz(i,e,t,o=Cz){let r=i.getOptions().tabSize,n=new _w(o),s;t&&(s=new RegExp(`(${t.start.source})|(?:${t.end.source})`));let a=[],c=i.getLineCount()+1;a.push({indent:-1,endAbove:c,line:c});for(let h=i.getLineCount();h>0;h--){let p=i.getLineContent(h),g=np(p,r),f=a[a.length-1];if(g===-1){e&&(f.endAbove=h);continue}let _;if(s&&(_=p.match(s)))if(_[1]){let y=a.length-1;for(;y>0&&a[y].indent!==-2;)y--;if(y>0){a.length=y+1,f=a[y],n.insertFirst(h,f.line,g),f.line=h,f.indent=g,f.endAbove=h;continue}}else{a.push({indent:-2,endAbove:h,line:h});continue}if(f.indent>g){do a.pop(),f=a[a.length-1];while(f.indent>g);let y=f.endAbove-1;y-h>=1&&n.insertFirst(h,y,g)}f.indent===g?f.endAbove=h:a.push({indent:g,endAbove:h,line:h})}return n.toIndentRanges(i)}re();Me();xi();gi();re();Ri();Bi();to();var Sz=ue("editor.foldBackground",{light:go(r0,.3),dark:go(r0,.3),hcDark:null,hcLight:null},b("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0);ue("editorGutter.foldingControlForeground",{dark:Xh,light:Xh,hcDark:Xh,hcLight:Xh},b("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));var cm=kt("folding-expanded",be.chevronDown,b("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),dm=kt("folding-collapsed",be.chevronRight,b("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),k2=kt("folding-manual-collapsed",dm,b("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),F2=kt("folding-manual-expanded",cm,b("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin.")),yw={color:It(Sz),position:1},xu=b("linesCollapsed","Click to expand the range."),xv=b("linesExpanded","Click to collapse the range."),yo=class i{constructor(e){this.editor=e,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(e,t,o){return t?i.HIDDEN_RANGE_DECORATION:this.showFoldingControls==="never"?e?this.showFoldingHighlights?i.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION:i.NO_CONTROLS_COLLAPSED_RANGE_DECORATION:i.NO_CONTROLS_EXPANDED_RANGE_DECORATION:e?o?this.showFoldingHighlights?i.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:i.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?i.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:i.COLLAPSED_VISUAL_DECORATION:this.showFoldingControls==="mouseover"?o?i.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:i.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:o?i.MANUALLY_EXPANDED_VISUAL_DECORATION:i.EXPANDED_VISUAL_DECORATION}changeDecorations(e){return this.editor.changeDecorations(e)}removeDecorations(e){this.editor.removeDecorations(e)}};yo.COLLAPSED_VISUAL_DECORATION=ke.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:xu,firstLineDecorationClassName:je.asClassName(dm)});yo.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=ke.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:yw,isWholeLine:!0,linesDecorationsTooltip:xu,firstLineDecorationClassName:je.asClassName(dm)});yo.MANUALLY_COLLAPSED_VISUAL_DECORATION=ke.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:xu,firstLineDecorationClassName:je.asClassName(k2)});yo.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=ke.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:yw,isWholeLine:!0,linesDecorationsTooltip:xu,firstLineDecorationClassName:je.asClassName(k2)});yo.NO_CONTROLS_COLLAPSED_RANGE_DECORATION=ke.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:xu});yo.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION=ke.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:yw,isWholeLine:!0,linesDecorationsTooltip:xu});yo.EXPANDED_VISUAL_DECORATION=ke.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+je.asClassName(cm),linesDecorationsTooltip:xv});yo.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=ke.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:je.asClassName(cm),linesDecorationsTooltip:xv});yo.MANUALLY_EXPANDED_VISUAL_DECORATION=ke.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+je.asClassName(F2),linesDecorationsTooltip:xv});yo.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=ke.register({description:"folding-manually-expanded-auto-hide-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:je.asClassName(F2),linesDecorationsTooltip:xv});yo.NO_CONTROLS_EXPANDED_RANGE_DECORATION=ke.register({description:"folding-no-controls-range-decoration",stickiness:0,isWholeLine:!0});yo.HIDDEN_RANGE_DECORATION=ke.register({description:"folding-hidden-range-decoration",stickiness:1});Ze();X();var wz={},Ez="syntax",bc=class{constructor(e,t,o,r,n){this.editorModel=e,this.providers=t,this.handleFoldingRangesChange=o,this.foldingRangesLimit=r,this.fallbackRangeProvider=n,this.id=Ez,this.disposables=new H,n&&this.disposables.add(n);for(let s of t)typeof s.onDidChange=="function"&&this.disposables.add(s.onDidChange(o))}compute(e){return Az(this.providers,this.editorModel,e).then(t=>{var o,r;return t?Tz(t,this.foldingRangesLimit):(r=(o=this.fallbackRangeProvider)===null||o===void 0?void 0:o.compute(e))!==null&&r!==void 0?r:null})}dispose(){this.disposables.dispose()}};function Az(i,e,t){let o=null,r=i.map((n,s)=>Promise.resolve(n.provideFoldingRanges(e,wz,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(o)||(o=[]);let c=e.getLineCount();for(let h of a)h.start>0&&h.end>h.start&&h.end<=c&&o.push({start:h.start,end:h.end,rank:s,kind:h.kind})}},$e));return Promise.all(r).then(n=>o)}var vw=class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,o,r){if(e>lr||t>lr)return;let n=this._length;this._startIndexes[n]=e,this._endIndexes[n]=t,this._nestingLevels[n]=r,this._types[n]=o,this._length++,r<30&&(this._nestingLevelCounts[r]=(this._nestingLevelCounts[r]||0)+1)}toIndentRanges(){let e=this._foldingRangesLimit.limit;if(this._length<=e){this._foldingRangesLimit.update(this._length,!1);let t=new Uint32Array(this._length),o=new Uint32Array(this._length);for(let r=0;r<this._length;r++)t[r]=this._startIndexes[r],o[r]=this._endIndexes[r];return new $i(t,o,this._types)}else{this._foldingRangesLimit.update(this._length,e);let t=0,o=this._nestingLevelCounts.length;for(let a=0;a<this._nestingLevelCounts.length;a++){let c=this._nestingLevelCounts[a];if(c){if(c+t>e){o=a;break}t+=c}}let r=new Uint32Array(e),n=new Uint32Array(e),s=[];for(let a=0,c=0;a<this._length;a++){let h=this._nestingLevels[a];(h<o||h===o&&t++<e)&&(r[c]=this._startIndexes[a],n[c]=this._endIndexes[a],s[c]=this._types[a],c++)}return new $i(r,n,s)}}};function Tz(i,e){let t=i.sort((s,a)=>{let c=s.start-a.start;return c===0&&(c=s.rank-a.rank),c}),o=new vw(e),r,n=[];for(let s of t)if(!r)r=s,o.add(s.start,s.end,s.kind&&s.kind.value,n.length);else if(s.start>r.start)if(s.end<=r.end)n.push(r),r=s,o.add(s.start,s.end,s.kind&&s.kind.value,n.length);else{if(s.start>r.end){do r=n.pop();while(r&&s.start>r.end);r&&n.push(r),r=s}o.add(s.start,s.end,s.kind&&s.kind.value,n.length)}return o.toIndentRanges()}Hr();Lr();Ge();nt();Rt();Ci();hr();ei();var Iz=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},um=function(i,e){return function(t,o){e(t,o,i)}},Su,Hi=new Ee("foldingEnabled",!1),Qr=Su=class extends B{static get(e){return e.getContribution(Su.ID)}static getFoldingRangeProviders(e,t){var o,r;let n=e.foldingRangeProvider.ordered(t);return(r=(o=Su._foldingRangeSelector)===null||o===void 0?void 0:o.call(Su,n,t))!==null&&r!==void 0?r:n}constructor(e,t,o,r,n,s){super(),this.contextKeyService=t,this.languageConfigurationService=o,this.languageFeaturesService=s,this.localToDispose=this._register(new H),this.editor=e,this._foldingLimitReporter=new hm(e);let a=this.editor.getOptions();this._isEnabled=a.get(43),this._useFoldingProviders=a.get(44)!=="indentation",this._unfoldOnClickAfterEndOfLine=a.get(48),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=a.get(46),this.updateDebounceInfo=n.for(s.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new yo(e),this.foldingDecorationProvider.showFoldingControls=a.get(110),this.foldingDecorationProvider.showFoldingHighlights=a.get(45),this.foldingEnabled=Hi.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(c=>{if(c.hasChanged(43)&&(this._isEnabled=this.editor.getOptions().get(43),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),c.hasChanged(47)&&this.onModelChanged(),c.hasChanged(110)||c.hasChanged(45)){let h=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=h.get(110),this.foldingDecorationProvider.showFoldingHighlights=h.get(45),this.triggerFoldingModelChanged()}c.hasChanged(44)&&(this._useFoldingProviders=this.editor.getOptions().get(44)!=="indentation",this.onFoldingStrategyChanged()),c.hasChanged(48)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(48)),c.hasChanged(46)&&(this._foldingImportsByDefault=this.editor.getOptions().get(46))})),this.onModelChanged()}saveViewState(){let e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){let t=this.foldingModel.getMemento(),o=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:o,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){let t=this.editor.getModel();if(!(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel)&&e&&(this._currentModelHasFoldedImports=!!e.foldedImports,e.collapsedRegions&&e.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(e.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();let e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new yv(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new Cv(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new Yo(this.updateDebounceInfo.get(e)),this.cursorChangedScheduler=new ut(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(t=>this.onDidChangeModelContent(t))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{var t,o;this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),(t=this.updateScheduler)===null||t===void 0||t.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,(o=this.rangeProvider)===null||o===void 0||o.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){var e;(e=this.rangeProvider)===null||e===void 0||e.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;let t=new vc(e,this.languageConfigurationService,this._foldingLimitReporter);if(this.rangeProvider=t,this._useFoldingProviders&&this.foldingModel){let o=Su.getFoldingRangeProviders(this.languageFeaturesService,e);o.length>0&&(this.rangeProvider=new bc(e,o,()=>this.triggerFoldingModelChanged(),this._foldingLimitReporter,t))}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;(t=this.hiddenRangeModel)===null||t===void 0||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{let e=this.foldingModel;if(!e)return null;let t=new qt,o=this.getRangeProvider(e.textModel),r=this.foldingRegionPromise=mt(n=>o.compute(n));return r.then(n=>{if(n&&r===this.foldingRegionPromise){let s;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){let p=n.setCollapsedAllOfType(pd.Imports.value,!0);p&&(s=Tn.capture(this.editor),this._currentModelHasFoldedImports=p)}let a=this.editor.getSelections(),c=a?a.map(p=>p.startLineNumber):[];e.update(n,c),s?.restore(this.editor);let h=this.updateDebounceInfo.update(e.textModel,t.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=h)}return e})}).then(void 0,e=>(Fe(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){let t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e,this)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){let e=this.getFoldingModel();e&&e.then(t=>{if(t){let o=this.editor.getSelections();if(o&&o.length>0){let r=[];for(let n of o){let s=n.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(s)&&r.push(...t.getAllRegionsAtLine(s,a=>a.isCollapsed&&s>a.startLineNumber))}r.length&&(t.toggleCollapseState(r),this.reveal(o[0].getPosition()))}}}).then(void 0,Fe)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;let t=e.target.range,o=!1;switch(e.target.type){case 4:{let r=e.target.detail,n=e.target.element.offsetLeft;if(r.offsetX-n<4)return;o=!0;break}case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){let r=this.editor.getModel();if(r&&t.startColumn===r.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:o}}onEditorMouseUp(e){let t=this.foldingModel;if(!t||!this.mouseDownInfo||!e.target)return;let o=this.mouseDownInfo.lineNumber,r=this.mouseDownInfo.iconClicked,n=e.target.range;if(!n||n.startLineNumber!==o)return;if(r){if(e.target.type!==4)return}else{let a=this.editor.getModel();if(!a||n.startColumn!==a.getLineMaxColumn(o))return}let s=t.getRegionAtLine(o);if(s&&s.startLineNumber===o){let a=s.isCollapsed;if(r||a){let c=e.event.altKey,h=[];if(c){let p=f=>!f.containedBy(s)&&!s.containedBy(f),g=t.getRegionsInside(null,p);for(let f of g)f.isCollapsed&&h.push(f);h.length===0&&(h=g)}else{let p=e.event.middleButton||e.event.shiftKey;if(p)for(let g of t.getRegionsInside(s))g.isCollapsed===a&&h.push(g);(a||!p||h.length===0)&&h.push(s)}t.toggleCollapseState(h),this.reveal({lineNumber:o,column:1})}}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};Qr.ID="editor.contrib.folding";Qr=Su=Iz([um(1,ve),um(2,Ye),um(3,Pt),um(4,li),um(5,J)],Qr);var hm=class{constructor(e){this.editor=e,this._onDidChange=new fe,this._computed=0,this._limited=!1}get limit(){return this.editor.getOptions().get(47)}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}},Ni=class extends j{runEditorCommand(e,t,o){let r=e.get(Ye),n=Qr.get(t);if(!n)return;let s=n.getFoldingModel();if(s)return this.reportTelemetry(e,t),s.then(a=>{if(a){this.invoke(n,a,t,o,r);let c=t.getSelection();c&&n.reveal(c.getStartPosition())}})}getSelectedLines(e){let t=e.getSelections();return t?t.map(o=>o.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(o=>o+1):this.getSelectedLines(t)}run(e,t){}};function N2(i){if(!Nl(i)){if(!Zg(i))return!1;let e=i;if(!Nl(e.levels)&&!kC(e.levels)||!Nl(e.direction)&&!Qg(e.direction)||!Nl(e.selectionLines)&&(!Array.isArray(e.selectionLines)||!e.selectionLines.every(kC)))return!1}return!0}var bw=class extends Ni{constructor(){super({id:"editor.unfold",label:b("unfoldAction.label","Unfold"),alias:"Unfold",precondition:Hi,kbOpts:{kbExpr:A.editorTextFocus,primary:3166,mac:{primary:2654},weight:100},metadata:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:N2,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,o,r){let n=r&&r.levels||1,s=this.getLineNumbers(r,o);r&&r.direction==="up"?gw(t,!1,n,s):yc(t,!1,n,s)}},Dw=class extends Ni{constructor(){super({id:"editor.unfoldRecursively",label:b("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:Hi,kbOpts:{kbExpr:A.editorTextFocus,primary:St(2089,2142),weight:100}})}invoke(e,t,o,r){yc(t,!1,Number.MAX_VALUE,this.getSelectedLines(o))}},Cw=class extends Ni{constructor(){super({id:"editor.fold",label:b("foldAction.label","Fold"),alias:"Fold",precondition:Hi,kbOpts:{kbExpr:A.editorTextFocus,primary:3164,mac:{primary:2652},weight:100},metadata:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:N2,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,o,r){let n=this.getLineNumbers(r,o),s=r&&r.levels,a=r&&r.direction;typeof s!="number"&&typeof a!="string"?w2(t,!0,n):a==="up"?gw(t,!0,s||1,n):yc(t,!0,s||1,n)}},xw=class extends Ni{constructor(){super({id:"editor.toggleFold",label:b("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:Hi,kbOpts:{kbExpr:A.editorTextFocus,primary:St(2089,2090),weight:100}})}invoke(e,t,o){let r=this.getSelectedLines(o);vv(t,1,r)}},Sw=class extends Ni{constructor(){super({id:"editor.foldRecursively",label:b("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:Hi,kbOpts:{kbExpr:A.editorTextFocus,primary:St(2089,2140),weight:100}})}invoke(e,t,o){let r=this.getSelectedLines(o);yc(t,!0,Number.MAX_VALUE,r)}},ww=class extends Ni{constructor(){super({id:"editor.foldAllBlockComments",label:b("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:Hi,kbOpts:{kbExpr:A.editorTextFocus,primary:St(2089,2138),weight:100}})}invoke(e,t,o,r,n){if(t.regions.hasTypes())Dv(t,pd.Comment.value,!0);else{let s=o.getModel();if(!s)return;let a=n.getLanguageConfiguration(s.getLanguageId()).comments;if(a&&a.blockCommentStartToken){let c=new RegExp("^\\s*"+us(a.blockCommentStartToken));bv(t,c,!0)}}}},Ew=class extends Ni{constructor(){super({id:"editor.foldAllMarkerRegions",label:b("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:Hi,kbOpts:{kbExpr:A.editorTextFocus,primary:St(2089,2077),weight:100}})}invoke(e,t,o,r,n){if(t.regions.hasTypes())Dv(t,pd.Region.value,!0);else{let s=o.getModel();if(!s)return;let a=n.getLanguageConfiguration(s.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){let c=new RegExp(a.markers.start);bv(t,c,!0)}}}},Aw=class extends Ni{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:b("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:Hi,kbOpts:{kbExpr:A.editorTextFocus,primary:St(2089,2078),weight:100}})}invoke(e,t,o,r,n){if(t.regions.hasTypes())Dv(t,pd.Region.value,!1);else{let s=o.getModel();if(!s)return;let a=n.getLanguageConfiguration(s.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){let c=new RegExp(a.markers.start);bv(t,c,!1)}}}},Tw=class extends Ni{constructor(){super({id:"editor.foldAllExcept",label:b("foldAllExcept.label","Fold All Except Selected"),alias:"Fold All Except Selected",precondition:Hi,kbOpts:{kbExpr:A.editorTextFocus,primary:St(2089,2136),weight:100}})}invoke(e,t,o){let r=this.getSelectedLines(o);fw(t,!0,r)}},Iw=class extends Ni{constructor(){super({id:"editor.unfoldAllExcept",label:b("unfoldAllExcept.label","Unfold All Except Selected"),alias:"Unfold All Except Selected",precondition:Hi,kbOpts:{kbExpr:A.editorTextFocus,primary:St(2089,2134),weight:100}})}invoke(e,t,o){let r=this.getSelectedLines(o);fw(t,!1,r)}},Pw=class extends Ni{constructor(){super({id:"editor.foldAll",label:b("foldAllAction.label","Fold All"),alias:"Fold All",precondition:Hi,kbOpts:{kbExpr:A.editorTextFocus,primary:St(2089,2069),weight:100}})}invoke(e,t,o){yc(t,!0)}},kw=class extends Ni{constructor(){super({id:"editor.unfoldAll",label:b("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:Hi,kbOpts:{kbExpr:A.editorTextFocus,primary:St(2089,2088),weight:100}})}invoke(e,t,o){yc(t,!1)}},L2=(()=>{class i extends Ni{getFoldingLevel(){return parseInt(this.id.substr(i.ID_PREFIX.length))}invoke(t,o,r){E2(o,this.getFoldingLevel(),!0,this.getSelectedLines(r))}}return i.ID_PREFIX="editor.foldLevel",i.ID=e=>i.ID_PREFIX+e,i})(),Fw=class extends Ni{constructor(){super({id:"editor.gotoParentFold",label:b("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:Hi,kbOpts:{kbExpr:A.editorTextFocus,weight:100}})}invoke(e,t,o){let r=this.getSelectedLines(o);if(r.length>0){let n=A2(r[0],t);n!==null&&o.setSelection({startLineNumber:n,startColumn:1,endLineNumber:n,endColumn:1})}}},Lw=class extends Ni{constructor(){super({id:"editor.gotoPreviousFold",label:b("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:Hi,kbOpts:{kbExpr:A.editorTextFocus,weight:100}})}invoke(e,t,o){let r=this.getSelectedLines(o);if(r.length>0){let n=T2(r[0],t);n!==null&&o.setSelection({startLineNumber:n,startColumn:1,endLineNumber:n,endColumn:1})}}},Nw=class extends Ni{constructor(){super({id:"editor.gotoNextFold",label:b("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:Hi,kbOpts:{kbExpr:A.editorTextFocus,weight:100}})}invoke(e,t,o){let r=this.getSelectedLines(o);if(r.length>0){let n=I2(r[0],t);n!==null&&o.setSelection({startLineNumber:n,startColumn:1,endLineNumber:n,endColumn:1})}}},Mw=class extends Ni{constructor(){super({id:"editor.createFoldingRangeFromSelection",label:b("createManualFoldRange.label","Create Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:Hi,kbOpts:{kbExpr:A.editorTextFocus,primary:St(2089,2135),weight:100}})}invoke(e,t,o){var r;let n=[],s=o.getSelections();if(s){for(let a of s){let c=a.endLineNumber;a.endColumn===1&&--c,c>a.startLineNumber&&(n.push({startLineNumber:a.startLineNumber,endLineNumber:c,type:void 0,isCollapsed:!0,source:1}),o.setSelection({startLineNumber:a.startLineNumber,startColumn:1,endLineNumber:a.startLineNumber,endColumn:1}))}if(n.length>0){n.sort((c,h)=>c.startLineNumber-h.startLineNumber);let a=$i.sanitizeAndMerge(t.regions,n,(r=o.getModel())===null||r===void 0?void 0:r.getLineCount());t.updatePost($i.fromFoldRanges(a))}}}},Ow=class extends Ni{constructor(){super({id:"editor.removeManualFoldingRanges",label:b("removeManualFoldingRanges.label","Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:Hi,kbOpts:{kbExpr:A.editorTextFocus,primary:St(2089,2137),weight:100}})}invoke(e,t,o){let r=o.getSelections();if(r){let n=[];for(let s of r){let{startLineNumber:a,endLineNumber:c}=s;n.push(c>=a?{startLineNumber:a,endLineNumber:c}:{endLineNumber:c,startLineNumber:a})}t.removeManualRanges(n),e.triggerFoldingModelChanged()}}};le(Qr.ID,Qr,0);M(bw);M(Dw);M(Cw);M(Sw);M(Pw);M(kw);M(ww);M(Ew);M(Aw);M(Tw);M(Iw);M(xw);M(Fw);M(Lw);M(Nw);M(Mw);M(Ow);for(let i=1;i<=7;i++)Hk(new L2({id:L2.ID(i),label:b("foldLevelAction.label","Fold Level {0}",i),alias:`Fold Level ${i}`,precondition:Hi,kbOpts:{kbExpr:A.editorTextFocus,primary:St(2089,2048|21+i),weight:100}}));Ue.registerCommand("_executeFoldingRangeProvider",async function(i,...e){let[t]=e;if(!(t instanceof We))throw Xo();let o=i.get(J),r=i.get(Ot).getModel(t);if(!r)throw Xo();let n=i.get(Oe);if(!n.getValue("editor.folding",{resource:t}))return[];let s=i.get(Ye),a=n.getValue("editor.foldingStrategy",{resource:t}),c={get limit(){return n.getValue("editor.foldingMaximumRegions",{resource:t})},update:(_,y)=>{}},h=new vc(r,s,c),p=h;if(a!=="indentation"){let _=Qr.getFoldingRangeProviders(o,r);_.length&&(p=new bc(r,_,()=>{},c,h))}let g=await p.compute(we.None),f=[];try{if(g)for(let _=0;_<g.length;_++){let y=g.getType(_);f.push({start:g.getStartLineNumber(_),end:g.getEndLineNumber(_),kind:y?pd.fromValue(y):void 0})}return f}finally{p.dispose()}});xe();re();var Rw=class extends j{constructor(){super({id:"editor.action.fontZoomIn",label:b("EditorFontZoomIn.label","Increase Editor Font Size"),alias:"Increase Editor Font Size",precondition:void 0})}run(e,t){vd.setZoomLevel(vd.getZoomLevel()+1)}},Bw=class extends j{constructor(){super({id:"editor.action.fontZoomOut",label:b("EditorFontZoomOut.label","Decrease Editor Font Size"),alias:"Decrease Editor Font Size",precondition:void 0})}run(e,t){vd.setZoomLevel(vd.getZoomLevel()-1)}},Ww=class extends j{constructor(){super({id:"editor.action.fontZoomReset",label:b("EditorFontZoomReset.label","Reset Editor Font Size"),alias:"Reset Editor Font Size",precondition:void 0})}run(e,t){vd.setZoomLevel(0)}};M(Rw);M(Bw);M(Ww);bt();yt();Ze();ds();X();xe();Vi();QC();ge();it();pp();Ge();re();Rt();Me();Je();var M2=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},pm=function(i,e){return function(t,o){e(t,o,i)}},mm=class{constructor(e,t,o,r){this._editor=e,this._languageFeaturesService=t,this._workerService=o,this._accessibilitySignalService=r,this._disposables=new H,this._sessionDisposables=new H,this._disposables.add(t.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(n=>{n.hasChanged(56)&&this._update()})),this._update()}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(56)||!this._editor.hasModel())return;let e=this._editor.getModel(),[t]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;let o=new jl;for(let r of t.autoFormatTriggerCharacters)o.add(r.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType(r=>{let n=r.charCodeAt(r.length-1);o.has(n)&&this._trigger(String.fromCharCode(n))}))}_trigger(e){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;let t=this._editor.getModel(),o=this._editor.getPosition(),r=new _t,n=this._editor.onDidChangeModelContent(s=>{if(s.isFlush){r.cancel(),n.dispose();return}for(let a=0,c=s.changes.length;a<c;a++)if(s.changes[a].range.endLineNumber<=o.lineNumber){r.cancel(),n.dispose();return}});_N(this._workerService,this._languageFeaturesService,t,o,e,t.getFormattingOptions(),r.token).then(s=>{r.token.isCancellationRequested||zt(s)&&(this._accessibilitySignalService.playSignal(r_.format,{userGesture:!1}),gN.execute(this._editor,s,!0))}).finally(()=>{n.dispose()})}};mm.ID="editor.contrib.autoFormat";mm=M2([pm(1,J),pm(2,zr),pm(3,o_)],mm);var gm=class{constructor(e,t,o){this.editor=e,this._languageFeaturesService=t,this._instantiationService=o,this._callOnDispose=new H,this._callOnModel=new H,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(t.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(55)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(k0,this.editor,e,2,br.None,we.None,!1).catch(Fe))}};gm.ID="editor.contrib.formatOnPaste";gm=M2([pm(1,J),pm(2,ce)],gm);var Hw=class extends j{constructor(){super({id:"editor.action.formatDocument",label:b("formatDocument.label","Format Document"),alias:"Format Document",precondition:W.and(A.notInCompositeEditor,A.writable,A.hasDocumentFormattingProvider),kbOpts:{kbExpr:A.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}async run(e,t){if(t.hasModel()){let o=e.get(ce);await e.get(Es).showWhile(o.invokeFunction(fN,t,1,br.None,we.None,!0),250)}}},jw=class extends j{constructor(){super({id:"editor.action.formatSelection",label:b("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:W.and(A.writable,A.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:A.editorTextFocus,primary:St(2089,2084),weight:100},contextMenuOpts:{when:A.hasNonEmptySelection,group:"1_modification",order:1.31}})}async run(e,t){if(!t.hasModel())return;let o=e.get(ce),r=t.getModel(),n=t.getSelections().map(a=>a.isEmpty()?new T(a.startLineNumber,1,a.startLineNumber,r.getLineMaxColumn(a.startLineNumber)):a);await e.get(Es).showWhile(o.invokeFunction(k0,t,n,1,br.None,we.None,!0),250)}};le(mm.ID,mm,2);le(gm.ID,gm,2);M(Hw);M(jw);Ue.registerCommand("editor.action.format",async i=>{let e=i.get(tt).getFocusedCodeEditor();if(!e||!e.hasModel())return;let t=i.get(ht);e.getSelection().isEmpty()?await t.executeCommand("editor.action.formatDocument"):await t.executeCommand("editor.action.formatSelection")});yt();Di();Ci();fn();Eu();Rt();Ue.registerCommand("_executeDocumentSymbolProvider",async function(i,...e){let[t]=e;He(We.isUri(t));let o=i.get(js),n=await i.get(Si).createModelReference(t);try{return(await o.getOrCreate(n.object.textEditorModel,we.None)).getTopLevelSymbols()}finally{n.dispose()}});xe();Ao();OL();xe();it();Ao();Tt();x6();Me();X();re();var _i=class i extends B{constructor(e,t){super(),this.contextKeyService=e,this.model=t,this.inlineCompletionVisible=i.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=i.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=i.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService),this.suppressSuggestions=i.suppressSuggestions.bindTo(this.contextKeyService),this._register(Lt(o=>{let r=this.model.read(o),n=r?.state.read(o),s=!!n?.inlineCompletion&&n?.primaryGhostText!==void 0&&!n?.primaryGhostText.isEmpty();this.inlineCompletionVisible.set(s),n?.primaryGhostText&&n?.inlineCompletion&&this.suppressSuggestions.set(n.inlineCompletion.inlineCompletion.source.inlineCompletions.suppressSuggestions)})),this._register(Lt(o=>{let r=this.model.read(o),n=!1,s=!0,a=r?.primaryGhostText.read(o);if(r?.selectedSuggestItem&&a&&a.parts.length>0){let{column:c,lines:h}=a.parts[0],p=h[0],g=r.textModel.getLineIndentColumn(a.lineNumber);if(c<=g){let _=zh(p);_===-1&&(_=p.length-1),n=_>0;let y=r.textModel.getOptions().tabSize;s=IF.visibleColumnFromColumn(p,_+1,y)<y}}this.inlineCompletionSuggestsIndentation.set(n),this.inlineCompletionSuggestsIndentationLessThanTabSize.set(s)}))}};_i.inlineSuggestionVisible=new Ee("inlineSuggestionVisible",!1,b("inlineSuggestionVisible","Whether an inline suggestion is visible"));_i.inlineSuggestionHasIndentation=new Ee("inlineSuggestionHasIndentation",!1,b("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace"));_i.inlineSuggestionHasIndentationLessThanTabSize=new Ee("inlineSuggestionHasIndentationLessThanTabSize",!0,b("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"));_i.suppressSuggestions=new Ee("inlineSuggestionSuppressSuggestions",void 0,b("suppressSuggestions","Whether suggestions should be suppressed for the current suggestion"));ze();Xe();yt();v0();X();Ao();OL();R6();Di();pt();Hr();Ge();nt();X();Ao();Tt();pt();ge();zk();Rr();bn();rF();bt();Tt();pt();ge();var Hn=class{constructor(e,t){this.lineNumber=e,this.parts=t}equals(e){return this.lineNumber===e.lineNumber&&this.parts.length===e.parts.length&&this.parts.every((t,o)=>t.equals(e.parts[o]))}renderForScreenReader(e){if(this.parts.length===0)return"";let t=this.parts[this.parts.length-1],o=e.substr(0,t.column-1);return new Df([...this.parts.map(n=>new tr(T.fromPositions(new Y(1,n.column)),n.lines.join(`
`)))]).applyToString(o).substring(this.parts[0].column-1)}isEmpty(){return this.parts.every(e=>e.lines.length===0)}get lineCount(){return 1+this.parts.reduce((e,t)=>e+t.lines.length-1,0)}},Ya=class{constructor(e,t,o){this.column=e,this.text=t,this.preview=o,this.lines=Ml(this.text)}equals(e){return this.column===e.column&&this.lines.length===e.lines.length&&this.lines.every((t,o)=>t===e.lines[o])}},Au=class{constructor(e,t,o,r=0){this.lineNumber=e,this.columnRange=t,this.text=o,this.additionalReservedLineCount=r,this.parts=[new Ya(this.columnRange.endColumnExclusive,this.text,!1)],this.newLines=Ml(this.text)}renderForScreenReader(e){return this.newLines.join(`
`)}get lineCount(){return this.newLines.length}isEmpty(){return this.parts.every(e=>e.lines.length===0)}equals(e){return this.lineNumber===e.lineNumber&&this.columnRange.equals(e.columnRange)&&this.newLines.length===e.newLines.length&&this.newLines.every((t,o)=>t===e.newLines[o])&&this.additionalReservedLineCount===e.additionalReservedLineCount}};function Uw(i,e){return Yi(i,e,qw)}function qw(i,e){return i===e?!0:!i||!e?!1:i instanceof Hn&&e instanceof Hn||i instanceof Au&&e instanceof Au?i.equals(e):!1}Ze();X();Ao();pt();ge();var kz=[];function O2(){return kz}var Tu=class{constructor(e,t){if(this.startColumn=e,this.endColumnExclusive=t,e>t)throw new ud(`startColumn ${e} cannot be after endColumnExclusive ${t}`)}toRange(e){return new T(e,this.startColumn,e,this.endColumnExclusive)}equals(e){return this.startColumn===e.startColumn&&this.endColumnExclusive===e.endColumnExclusive}};function Sv(i,e){let t=new H,o=i.createDecorationsCollection();return t.add(WL({debugName:()=>`Apply decorations from ${e.debugName}`},r=>{let n=e.read(r);o.set(n)})),t.add({dispose:()=>{o.clear()}}),t}function R2(i,e){return new Y(i.lineNumber+e.lineNumber-1,e.lineNumber===1?i.column+e.column-1:e.column)}function Kw(i,e){return new Y(i.lineNumber-e.lineNumber+1,i.lineNumber-e.lineNumber===0?i.column-e.column+1:i.column)}var Fz=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Lz=function(i,e){return function(t,o){e(t,o,i)}},B2="ghost-text",wv=class extends B{constructor(e,t,o){super(),this.editor=e,this.model=t,this.languageService=o,this.isDisposed=oo(this,!1),this.currentTextModel=ci(this.editor.onDidChangeModel,()=>this.editor.getModel()),this.uiState=Ei(this,r=>{if(this.isDisposed.read(r))return;let n=this.currentTextModel.read(r);if(n!==this.model.targetTextModel.read(r))return;let s=this.model.ghostText.read(r);if(!s)return;let a=s instanceof Au?s.columnRange:void 0,c=[],h=[];function p(C,x){if(h.length>0){let D=h[h.length-1];x&&D.decorations.push(new Ta(D.content.length+1,D.content.length+1+C[0].length,x,0)),D.content+=C[0],C=C.slice(1)}for(let D of C)h.push({content:D,decorations:x?[new Ta(1,D.length+1,x,0)]:[]})}let g=n.getLineContent(s.lineNumber),f,_=0;for(let C of s.parts){let x=C.lines;f===void 0?(c.push({column:C.column,text:x[0],preview:C.preview}),x=x.slice(1)):p([g.substring(_,C.column-1)],void 0),x.length>0&&(p(x,B2),f===void 0&&C.column<=g.length&&(f=C.column)),_=C.column-1}f!==void 0&&p([g.substring(_)],void 0);let y=f!==void 0?new Tu(f,g.length+1):void 0;return{replacedRange:a,inlineTexts:c,additionalLines:h,hiddenRange:y,lineNumber:s.lineNumber,additionalReservedLineCount:this.model.minReservedLineCount.read(r),targetTextModel:n}}),this.decorations=Ei(this,r=>{let n=this.uiState.read(r);if(!n)return[];let s=[];n.replacedRange&&s.push({range:n.replacedRange.toRange(n.lineNumber),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}),n.hiddenRange&&s.push({range:n.hiddenRange.toRange(n.lineNumber),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});for(let a of n.inlineTexts)s.push({range:T.fromPositions(new Y(n.lineNumber,a.column)),options:{description:B2,after:{content:a.text,inlineClassName:a.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:fs.Left},showIfCollapsed:!0}});return s}),this.additionalLinesWidget=this._register(new ym(this.editor,this.languageService.languageIdCodec,Ei(r=>{let n=this.uiState.read(r);return n?{lineNumber:n.lineNumber,additionalLines:n.additionalLines,minReservedLineCount:n.additionalReservedLineCount,targetTextModel:n.targetTextModel}:void 0}))),this._register(Ve(()=>{this.isDisposed.set(!0,void 0)})),this._register(Sv(this.editor,this.decorations))}ownsViewZone(e){return this.additionalLinesWidget.viewZoneId===e}};wv=Fz([Lz(2,pi)],wv);var ym=class extends B{get viewZoneId(){return this._viewZoneId}constructor(e,t,o){super(),this.editor=e,this.languageIdCodec=t,this.lines=o,this._viewZoneId=void 0,this.editorOptionsChanged=Ts("editorOptionChanged",ft.filter(this.editor.onDidChangeConfiguration,r=>r.hasChanged(33)||r.hasChanged(117)||r.hasChanged(99)||r.hasChanged(94)||r.hasChanged(51)||r.hasChanged(50)||r.hasChanged(67))),this._register(Lt(r=>{let n=this.lines.read(r);this.editorOptionsChanged.read(r),n?this.updateLines(n.lineNumber,n.additionalLines,n.minReservedLineCount):this.clear()}))}dispose(){super.dispose(),this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,o){let r=this.editor.getModel();if(!r)return;let{tabSize:n}=r.getOptions();this.editor.changeViewZones(s=>{this._viewZoneId&&(s.removeZone(this._viewZoneId),this._viewZoneId=void 0);let a=Math.max(t.length,o);if(a>0){let c=document.createElement("div");Nz(c,n,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=s.addZone({afterLineNumber:e,heightInLines:a,domNode:c,afterColumnAffinity:1})}})}};function Nz(i,e,t,o,r){let n=o.get(33),s=o.get(117),a="none",c=o.get(94),h=o.get(51),p=o.get(50),g=o.get(67),f=new yf(1e4);f.appendString('<div class="suggest-preview-text">');for(let C=0,x=t.length;C<x;C++){let D=t[C],E=D.content;f.appendString('<div class="view-line'),f.appendString('" style="top:'),f.appendString(String(C*g)),f.appendString('px;width:1000000px;">');let I=cf(E),k=mk(E),N=iF.createEmpty(E,r);xf(new Cf(p.isMonospace&&!n,p.canUseHalfwidthRightwardsArrow,E,!1,I,k,0,N,D.decorations,e,0,p.spaceWidth,p.middotWidth,p.wsmiddotWidth,s,a,c,h!==GP.OFF,null),f),f.appendString("</div>")}f.appendString("</div>"),gf(i,p);let _=f.build(),y=W2?W2.createHTML(_):_;i.innerHTML=y}var W2=_f("editorGhostText",{createHTML:i=>i});bt();$h();v0();Ze();X();Ao();Tt();Di();pt();ge();ui();t0();Jt();Ii();yt();v0();Ss();X();Ao();ge();t0();Jt();Ii();Ge();f6();Xe();yt();Ea();Ze();ge();I6();E6();P6();A6();T6();function H2(i,e){let t=new zF,o=new UF(t,h=>e.getLanguageConfiguration(h)),r=new VF(new $w([i]),o),n=qF(r,[],void 0,!0),s="",a=i.getLineContent();function c(h,p){if(h.kind===2)if(c(h.openingBracket,p),p=wd(p,h.openingBracket.length),h.child&&(c(h.child,p),p=wd(p,h.child.length)),h.closingBracket)c(h.closingBracket,p),p=wd(p,h.closingBracket.length);else{let f=o.getSingleLanguageBracketTokens(h.openingBracket.languageId).findClosingTokenText(h.openingBracket.bracketIds);s+=f}else if(h.kind!==3){if(h.kind===0||h.kind===1)s+=a.substring(p,wd(p,h.length));else if(h.kind===4)for(let g of h.children)c(g,p),p=wd(p,g.length)}}return c(n,jF),s}var $w=class{constructor(e){this.lines=e,this.tokenization={getLineTokens:t=>this.lines[t-1]}}getLineCount(){return this.lines.length}getLineLength(e){return this.lines[e-1].getLineContent().length}};async function z2(i,e,t,o,r=we.None,n){let s=Mz(e,t),a=i.all(t),c=new qk;for(let D of a)D.groupId&&c.add(D.groupId,D);function h(D){if(!D.yieldsToGroupIds)return[];let E=[];for(let I of D.yieldsToGroupIds||[]){let k=c.get(I);for(let N of k)E.push(N)}return E}let p=new Map,g=new Set;function f(D,E){if(E=[...E,D],g.has(D))return E;g.add(D);try{let I=h(D);for(let k of I){let N=f(k,E);if(N)return N}}finally{g.delete(D)}}function _(D){let E=p.get(D);if(E)return E;let I=f(D,[]);I&&$e(new Error(`Inline completions: cyclic yield-to dependency detected. Path: ${I.map(N=>N.toString?N.toString():""+N).join(" -> ")}`));let k=new yd;return p.set(D,k.p),(async()=>{if(!I){let N=h(D);for(let O of N){let V=await _(O);if(V&&V.items.length>0)return}}try{return await D.provideInlineCompletions(t,e,o,r)}catch(N){$e(N);return}})().then(N=>k.complete(N),N=>k.error(N)),k.p}let y=await Promise.all(a.map(async D=>({provider:D,completions:await _(D)}))),C=new Map,x=[];for(let D of y){let E=D.completions;if(!E)continue;let I=new Jw(E,D.provider);x.push(I);for(let k of E.items){let N=Xw.from(k,I,s,t,n);C.set(N.hash(),N)}}return new Gw(Array.from(C.values()),new Set(C.keys()),x)}var Gw=class{constructor(e,t,o){this.completions=e,this.hashs=t,this.providerResults=o}has(e){return this.hashs.has(e.hash())}dispose(){for(let e of this.providerResults)e.removeRef()}},Jw=class{constructor(e,t){this.inlineCompletions=e,this.provider=t,this.refCount=1}addRef(){this.refCount++}removeRef(){this.refCount--,this.refCount===0&&this.provider.freeInlineCompletions(this.inlineCompletions)}},Xw=class i{static from(e,t,o,r,n){let s,a,c=e.range?T.lift(e.range):o;if(typeof e.insertText=="string"){if(s=e.insertText,n&&e.completeBracketPairs){s=j2(s,c.getStartPosition(),r,n);let h=s.length-e.insertText.length;h!==0&&(c=new T(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn+h))}a=void 0}else if("snippet"in e.insertText){let h=e.insertText.snippet.length;if(n&&e.completeBracketPairs){e.insertText.snippet=j2(e.insertText.snippet,c.getStartPosition(),r,n);let g=e.insertText.snippet.length-h;g!==0&&(c=new T(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn+g))}let p=new Io().parse(e.insertText.snippet);p.children.length===1&&p.children[0]instanceof Fi?(s=p.children[0].value,a=void 0):(s=p.toString(),a={snippet:e.insertText.snippet,range:c})}else Rk(e.insertText);return new i(s,e.command,c,s,a,e.additionalTextEdits||O2(),e,t)}constructor(e,t,o,r,n,s,a,c){this.filterText=e,this.command=t,this.range=o,this.insertText=r,this.snippetInfo=n,this.additionalTextEdits=s,this.sourceInlineCompletion=a,this.source=c,e=e.replace(/\r\n|\r/g,`
`),r=e.replace(/\r\n|\r/g,`
`)}withRange(e){return new i(this.filterText,this.command,e,this.insertText,this.snippetInfo,this.additionalTextEdits,this.sourceInlineCompletion,this.source)}hash(){return JSON.stringify({insertText:this.insertText,range:this.range.toString()})}};function Mz(i,e){let t=e.getWordAtPosition(i),o=e.getLineMaxColumn(i.lineNumber);return t?new T(i.lineNumber,t.startColumn,i.lineNumber,o):T.fromPositions(i,i.with(void 0,o))}function j2(i,e,t,o){let n=t.getLineContent(e.lineNumber).substring(0,e.column-1)+i,s=t.tokenization.tokenizeLineWithEdit(e,n.length-(e.column-1),i),a=s?.sliceAndInflate(e.column-1,n.length,0);return a?H2(a,o):i}Tt();ge();t0();function zn(i,e,t){let o=t?i.range.intersectRanges(t):i.range;if(!o)return i;let r=e.getValueInRange(o,1),n=hn(r,i.text),s=zl.ofText(r.substring(0,n)).addToPosition(i.range.getStartPosition()),a=i.text.substring(n),c=T.fromPositions(s,i.range.getEndPosition());return new tr(c,a)}function Ev(i,e){return i.text.startsWith(e.text)&&Oz(i.range,e.range)}function Yw(i,e,t,o,r=0){let n=zn(i,e);if(n.range.endLineNumber!==n.range.startLineNumber)return;let s=e.getLineContent(n.range.startLineNumber),a=Kt(s).length;if(n.range.startColumn-1<=a){let y=Kt(n.text).length,C=s.substring(n.range.startColumn-1,a),[x,D]=[n.range.getStartPosition(),n.range.getEndPosition()],E=x.column+C.length<=D.column?x.delta(0,C.length):D,I=T.fromPositions(E,D),k=n.text.startsWith(C)?n.text.substring(C.length):n.text.substring(y);n=new tr(I,k)}let h=e.getValueInRange(n.range),p=Rz(h,n.text);if(!p)return;let g=n.range.startLineNumber,f=new Array;if(t==="prefix"){let y=p.filter(C=>C.originalLength===0);if(y.length>1||y.length===1&&y[0].originalStart!==h.length)return}let _=n.text.length-r;for(let y of p){let C=n.range.startColumn+y.originalStart+y.originalLength;if(t==="subwordSmart"&&o&&o.lineNumber===n.range.startLineNumber&&C<o.column||y.originalLength>0)return;if(y.modifiedLength===0)continue;let x=y.modifiedStart+y.modifiedLength,D=Math.max(y.modifiedStart,Math.min(x,_)),E=n.text.substring(y.modifiedStart,D),I=n.text.substring(D,Math.max(y.modifiedStart,x));E.length>0&&f.push(new Ya(C,E,!1)),I.length>0&&f.push(new Ya(C,I,!0))}return new Hn(g,f)}function Oz(i,e){return e.getStartPosition().equals(i.getStartPosition())&&e.getEndPosition().isBeforeOrEqual(i.getEndPosition())}var jn;function Rz(i,e){if(jn?.originalValue===i&&jn?.newValue===e)return jn?.changes;{let t=U2(i,e,!0);if(t){let o=V2(t);if(o>0){let r=U2(i,e,!1);r&&V2(r)<o&&(t=r)}}return jn={originalValue:i,newValue:e,changes:t},t}}function V2(i){let e=0;for(let t of i)e+=t.originalLength;return e}function U2(i,e,t){if(i.length>5e3||e.length>5e3)return;function o(h){let p=0;for(let g=0,f=h.length;g<f;g++){let _=h.charCodeAt(g);_>p&&(p=_)}return p}let r=Math.max(o(i),o(e));function n(h){if(h<0)throw new Error("unexpected");return r+h+1}function s(h){let p=0,g=0,f=new Int32Array(h.length);for(let _=0,y=h.length;_<y;_++)if(t&&h[_]==="("){let C=g*100+p;f[_]=n(2*C),p++}else if(t&&h[_]===")"){p=Math.max(p-1,0);let C=g*100+p;f[_]=n(2*C+1),p===0&&g++}else f[_]=h.charCodeAt(_);return f}let a=s(i),c=s(e);return new Uk({getElements:()=>a},{getElements:()=>c}).ComputeDiff(!1).changes}var Bz=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},q2=function(i,e){return function(t,o){e(t,o,i)}},Av=class extends B{constructor(e,t,o,r,n){super(),this.textModel=e,this.versionId=t,this._debounceValue=o,this.languageFeaturesService=r,this.languageConfigurationService=n,this._updateOperation=this._register(new Ut),this.inlineCompletions=Jl("inlineCompletions",void 0),this.suggestWidgetInlineCompletions=Jl("suggestWidgetInlineCompletions",void 0),this._register(this.textModel.onDidChangeContent(()=>{this._updateOperation.clear()}))}fetch(e,t,o){var r,n;let s=new Zw(e,t,this.textModel.getVersionId()),a=t.selectedSuggestionInfo?this.suggestWidgetInlineCompletions:this.inlineCompletions;if(!((r=this._updateOperation.value)===null||r===void 0)&&r.request.satisfies(s))return this._updateOperation.value.promise;if(!((n=a.get())===null||n===void 0)&&n.request.satisfies(s))return Promise.resolve(!0);let c=!!this._updateOperation.value;this._updateOperation.clear();let h=new _t,p=(async()=>{if((c||t.triggerKind===un.Automatic)&&await Wz(this._debounceValue.get(this.textModel),h.token),h.token.isCancellationRequested||this.textModel.getVersionId()!==s.versionId)return!1;let _=new Date,y=await z2(this.languageFeaturesService.inlineCompletionsProvider,e,this.textModel,t,h.token,this.languageConfigurationService);if(h.token.isCancellationRequested||this.textModel.getVersionId()!==s.versionId)return!1;let C=new Date;this._debounceValue.update(this.textModel,C.getTime()-_.getTime());let x=new tE(y,s,this.textModel,this.versionId);if(o){let D=o.toInlineCompletion(void 0);o.canBeReused(this.textModel,e)&&!y.has(D)&&x.prepend(o.inlineCompletion,D.range,!0)}return this._updateOperation.clear(),wi(D=>{a.set(x,D)}),!0})(),g=new eE(s,h,p);return this._updateOperation.value=g,p}clear(e){this._updateOperation.clear(),this.inlineCompletions.set(void 0,e),this.suggestWidgetInlineCompletions.set(void 0,e)}clearSuggestWidgetInlineCompletions(e){var t;!((t=this._updateOperation.value)===null||t===void 0)&&t.request.context.selectedSuggestionInfo&&this._updateOperation.clear(),this.suggestWidgetInlineCompletions.set(void 0,e)}cancelUpdate(){this._updateOperation.clear()}};Av=Bz([q2(3,J),q2(4,Ye)],Av);function Wz(i,e){return new Promise(t=>{let o,r=setTimeout(()=>{o&&o.dispose(),t()},i);e&&(o=e.onCancellationRequested(()=>{clearTimeout(r),o&&o.dispose(),t()}))})}var Zw=class{constructor(e,t,o){this.position=e,this.context=t,this.versionId=o}satisfies(e){return this.position.equals(e.position)&&LL(this.context.selectedSuggestionInfo,e.context.selectedSuggestionInfo,Gf())&&(e.context.triggerKind===un.Automatic||this.context.triggerKind===un.Explicit)&&this.versionId===e.versionId}},eE=class{constructor(e,t,o){this.request=e,this.cancellationTokenSource=t,this.promise=o}dispose(){this.cancellationTokenSource.cancel()}},tE=class{get inlineCompletions(){return this._inlineCompletions}constructor(e,t,o,r){this.inlineCompletionProviderResult=e,this.request=t,this._textModel=o,this._versionId=r,this._refCount=1,this._prependedInlineCompletionItems=[];let n=o.deltaDecorations([],e.completions.map(s=>({range:s.range,options:{description:"inline-completion-tracking-range"}})));this._inlineCompletions=e.completions.map((s,a)=>new Tv(s,n[a],this._textModel,this._versionId))}clone(){return this._refCount++,this}dispose(){if(this._refCount--,this._refCount===0){setTimeout(()=>{this._textModel.isDisposed()||this._textModel.deltaDecorations(this._inlineCompletions.map(e=>e.decorationId),[])},0),this.inlineCompletionProviderResult.dispose();for(let e of this._prependedInlineCompletionItems)e.source.removeRef()}}prepend(e,t,o){o&&e.source.addRef();let r=this._textModel.deltaDecorations([],[{range:t,options:{description:"inline-completion-tracking-range"}}])[0];this._inlineCompletions.unshift(new Tv(e,r,this._textModel,this._versionId)),this._prependedInlineCompletionItems.push(e)}},Tv=class{get forwardStable(){var e;return(e=this.inlineCompletion.source.inlineCompletions.enableForwardStability)!==null&&e!==void 0?e:!1}constructor(e,t,o,r){this.inlineCompletion=e,this.decorationId=t,this._textModel=o,this._modelVersion=r,this.semanticId=JSON.stringify([this.inlineCompletion.filterText,this.inlineCompletion.insertText,this.inlineCompletion.range.getStartPosition().toString()]),this._updatedRange=Ma({owner:this,equalsFn:T.equalsRange},n=>(this._modelVersion.read(n),this._textModel.getDecorationRange(this.decorationId)))}toInlineCompletion(e){var t;return this.inlineCompletion.withRange((t=this._updatedRange.read(e))!==null&&t!==void 0?t:Qw)}toSingleTextEdit(e){var t;return new tr((t=this._updatedRange.read(e))!==null&&t!==void 0?t:Qw,this.inlineCompletion.insertText)}isVisible(e,t,o){let r=zn(this._toFilterTextReplacement(o),e),n=this._updatedRange.read(o);if(!n||!this.inlineCompletion.range.getStartPosition().equals(n.getStartPosition())||t.lineNumber!==r.range.startLineNumber)return!1;let s=e.getValueInRange(r.range,1),a=r.text,c=Math.max(0,t.column-r.range.startColumn),h=a.substring(0,c),p=a.substring(c),g=s.substring(0,c),f=s.substring(c),_=e.getLineIndentColumn(r.range.startLineNumber);return r.range.startColumn<=_&&(g=g.trimStart(),g.length===0&&(f=f.trimStart()),h=h.trimStart(),h.length===0&&(p=p.trimStart())),h.startsWith(g)&&!!pL(f,p)}canBeReused(e,t){let o=this._updatedRange.read(void 0);return!!o&&o.containsPosition(t)&&this.isVisible(e,t,void 0)&&zl.ofRange(o).isGreaterThanOrEqualTo(zl.ofRange(this.inlineCompletion.range))}_toFilterTextReplacement(e){var t;return new tr((t=this._updatedRange.read(e))!==null&&t!==void 0?t:Qw,this.inlineCompletion.filterText)}},Qw=new T(1,1,1,1);X();Di();xe();pt();it();Ii();Ge();yt();Ze();Ss();X();Lr();Di();Ci();pt();ge();fn();re();Wt();Rt();Me();Ge();var Ae={Visible:gv,HasFocusedSuggestion:new Ee("suggestWidgetHasFocusedSuggestion",!1,b("suggestWidgetHasSelection","Whether any suggestion is focused")),DetailsVisible:new Ee("suggestWidgetDetailsVisible",!1,b("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new Ee("suggestWidgetMultipleSuggestions",!1,b("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new Ee("suggestionMakesTextEdit",!0,b("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new Ee("acceptSuggestionOnEnter",!0,b("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new Ee("suggestionHasInsertAndReplaceRange",!1,b("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new Ee("suggestionInsertMode",void 0,{type:"string",description:b("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new Ee("suggestionCanResolve",!1,b("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},Un=new Q("suggestWidgetStatusBar"),iE=class{constructor(e,t,o,r){var n;this.position=e,this.completion=t,this.container=o,this.provider=r,this.isInvalid=!1,this.score=xs.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:(n=t.label)===null||n===void 0?void 0:n.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),this.extensionId=t.extensionId,T.isIRange(t.range)?(this.editStart=new Y(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new Y(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new Y(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||T.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new Y(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new Y(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new Y(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||T.spansMultipleLines(t.range.insert)||T.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof r.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._resolveDuration=0)}get isResolved(){return this._resolveDuration!==void 0}get resolveDuration(){return this._resolveDuration!==void 0?this._resolveDuration:-1}async resolve(e){if(!this._resolveCache){let t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._resolveDuration=void 0}),o=new qt(!0);this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(r=>{Object.assign(this.completion,r),this._resolveDuration=o.elapsed()},r=>{Ro(r)&&(this._resolveCache=void 0,this._resolveDuration=void 0)}).finally(()=>{t.dispose()})}return this._resolveCache}},zs=class{constructor(e=2,t=new Set,o=new Set,r=new Map,n=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=o,this.providerItemsToReuse=r,this.showDeprecated=n}};zs.default=new zs;var Iu;function K2(){return Iu}var oE=class{constructor(e,t,o,r){this.items=e,this.needsClipboard=t,this.durations=o,this.disposable=r}};async function vm(i,e,t,o=zs.default,r={triggerKind:0},n=we.None){let s=new qt;t=t.clone();let a=e.getWordAtPosition(t),c=a?new T(t.lineNumber,a.startColumn,t.lineNumber,a.endColumn):T.fromPositions(t),h={replace:c,insert:c.setEndPosition(t.lineNumber,t.column)},p=[],g=new H,f=[],_=!1,y=(x,D,E)=>{var I,k,N;let O=!1;if(!D)return O;for(let V of D.suggestions)if(!o.kindFilter.has(V.kind)){if(!o.showDeprecated&&(!((I=V?.tags)===null||I===void 0)&&I.includes(1)))continue;V.range||(V.range=h),V.sortText||(V.sortText=typeof V.label=="string"?V.label:V.label.label),!_&&V.insertTextRules&&V.insertTextRules&4&&(_=Io.guessNeedsClipboard(V.insertText)),p.push(new iE(t,V,D,x)),O=!0}return af(D)&&g.add(D),f.push({providerName:(k=x._debugDisplayName)!==null&&k!==void 0?k:"unknown_provider",elapsedProvider:(N=D.duration)!==null&&N!==void 0?N:-1,elapsedOverall:E.elapsed()}),O},C=(async()=>{if(!Iu||o.kindFilter.has(27))return;let x=o.providerItemsToReuse.get(Iu);if(x){x.forEach(I=>p.push(I));return}if(o.providerFilter.size>0&&!o.providerFilter.has(Iu))return;let D=new qt,E=await Iu.provideCompletionItems(e,t,r,n);y(Iu,E,D)})();for(let x of i.orderedGroups(e)){let D=!1;if(await Promise.all(x.map(async E=>{if(o.providerItemsToReuse.has(E)){let I=o.providerItemsToReuse.get(E);I.forEach(k=>p.push(k)),D=D||I.length>0;return}if(!(o.providerFilter.size>0&&!o.providerFilter.has(E)))try{let I=new qt,k=await E.provideCompletionItems(e,t,r,n);D=y(E,k,I)||D}catch(I){$e(I)}})),D||n.isCancellationRequested)break}return await C,n.isCancellationRequested?(g.dispose(),Promise.reject(new dd)):new oE(p.sort(zz(o.snippetSortOrder)),_,{entries:f,elapsed:s.elapsed()},g)}function rE(i,e){if(i.sortTextLow&&e.sortTextLow){if(i.sortTextLow<e.sortTextLow)return-1;if(i.sortTextLow>e.sortTextLow)return 1}return i.textLabel<e.textLabel?-1:i.textLabel>e.textLabel?1:i.completion.kind-e.completion.kind}function Hz(i,e){if(i.completion.kind!==e.completion.kind){if(i.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return rE(i,e)}function jz(i,e){if(i.completion.kind!==e.completion.kind){if(i.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return rE(i,e)}var Iv=new Map;Iv.set(0,Hz);Iv.set(2,jz);Iv.set(1,rE);function zz(i){return Iv.get(i)}Ue.registerCommand("_executeCompletionItemProvider",async(i,...e)=>{let[t,o,r,n]=e;He(We.isUri(t)),He(Y.isIPosition(o)),He(typeof r=="string"||!r),He(typeof n=="number"||!n);let{completionProvider:s}=i.get(J),a=await i.get(Si).createModelReference(t);try{let c={incomplete:!1,suggestions:[]},h=[],p=a.object.textEditorModel.validatePosition(o),g=await vm(s,a.object.textEditorModel,p,void 0,{triggerCharacter:r??void 0,triggerKind:r?1:0});for(let f of g.items)h.length<(n??0)&&h.push(f.resolve(we.None)),c.incomplete=c.incomplete||f.container.incomplete,c.suggestions.push(f.completion);try{return await Promise.all(h),c}finally{setTimeout(()=>g.disposable.dispose(),100)}}finally{a.dispose()}});function $2(i,e){var t;(t=i.getContribution("editor.contrib.suggestController"))===null||t===void 0||t.triggerSuggest(new Set().add(e),void 0,!0)}var Vn=class{static isAllOff(e){return e.other==="off"&&e.comments==="off"&&e.strings==="off"}static isAllOn(e){return e.other==="on"&&e.comments==="on"&&e.strings==="on"}static valueFor(e,t){switch(t){case 1:return e.comments;case 2:return e.strings;default:return e.other}}};re();Me();bd();bt();X();Tt();ge();ui();Ii();gi();k6();Zi();function nE(i,e=Da){return KF(i,e)?i.charAt(0).toUpperCase()+i.slice(1):i}QP();ir();Tt();Ii();re();var Vz=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Uz=function(i,e){return function(t,o){e(t,o,i)}},BEe=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,CURRENT_TIMEZONE_OFFSET:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,CURSOR_INDEX:!0,CURSOR_NUMBER:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0}),bm=class{constructor(e){this._delegates=e}resolve(e){for(let t of this._delegates){let o=t.resolve(e);if(o!==void 0)return o}}},Dm=class{constructor(e,t,o,r){this._model=e,this._selection=t,this._selectionIdx=o,this._overtypingCapturer=r}resolve(e){let{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let o=this._model.getValueInRange(this._selection)||void 0,r=this._selection.startLineNumber!==this._selection.endLineNumber;if(!o&&this._overtypingCapturer){let n=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);n&&(o=n.value,r=n.multiline)}if(o&&r&&e.snippet){let n=this._model.getLineContent(this._selection.startLineNumber),s=Kt(n,0,this._selection.startColumn-1),a=s;e.snippet.walk(h=>h===e?!1:(h instanceof Fi&&(a=Kt(Ml(h.value).pop())),!0));let c=hn(a,s);o=o.replace(/(\r\n|\r|\n)(.*)/g,(h,p,g)=>`${p}${a.substr(c)}${g}`)}return o}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){let o=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return o&&o.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber);if(t==="CURSOR_INDEX")return String(this._selectionIdx);if(t==="CURSOR_NUMBER")return String(this._selectionIdx+1)}}}},Cm=class{constructor(e,t){this._labelService=e,this._model=t}resolve(e){let{name:t}=e;if(t==="TM_FILENAME")return hd(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){let o=hd(this._model.uri.fsPath),r=o.lastIndexOf(".");return r<=0?o:o.slice(0,r)}else{if(t==="TM_DIRECTORY")return YP(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(Ed(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}},xm=class{constructor(e,t,o,r){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=o,this._spread=r}resolve(e){if(e.name!=="CLIPBOARD")return;let t=this._readClipboardText();if(t){if(this._spread){let o=t.split(/\r\n|\n|\r/).filter(r=>!sk(r));if(o.length===this._selectionCount)return o[this._selectionIdx]}return t}}},Sm=class{constructor(e,t,o){this._model=e,this._selection=t,this._languageConfigurationService=o}resolve(e){let{name:t}=e,o=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),r=this._languageConfigurationService.getLanguageConfiguration(o).comments;if(r){if(t==="LINE_COMMENT")return r.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return r.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return r.blockCommentEndToken||void 0}}};Sm=Vz([Uz(2,Ye)],Sm);var Vs=class i{constructor(){this._date=new Date}resolve(e){let{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return i.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return i.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return i.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return i.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3));if(t==="CURRENT_TIMEZONE_OFFSET"){let o=this._date.getTimezoneOffset(),r=o>0?"-":"+",n=Math.trunc(Math.abs(o/60)),s=n<10?"0"+n:n,a=Math.abs(o)-n*60,c=a<10?"0"+a:a;return r+s+":"+c}}};Vs.dayNames=[b("Sunday","Sunday"),b("Monday","Monday"),b("Tuesday","Tuesday"),b("Wednesday","Wednesday"),b("Thursday","Thursday"),b("Friday","Friday"),b("Saturday","Saturday")];Vs.dayNamesShort=[b("SundayShort","Sun"),b("MondayShort","Mon"),b("TuesdayShort","Tue"),b("WednesdayShort","Wed"),b("ThursdayShort","Thu"),b("FridayShort","Fri"),b("SaturdayShort","Sat")];Vs.monthNames=[b("January","January"),b("February","February"),b("March","March"),b("April","April"),b("May","May"),b("June","June"),b("July","July"),b("August","August"),b("September","September"),b("October","October"),b("November","November"),b("December","December")];Vs.monthNamesShort=[b("JanuaryShort","Jan"),b("FebruaryShort","Feb"),b("MarchShort","Mar"),b("AprilShort","Apr"),b("MayShort","May"),b("JuneShort","Jun"),b("JulyShort","Jul"),b("AugustShort","Aug"),b("SeptemberShort","Sep"),b("OctoberShort","Oct"),b("NovemberShort","Nov"),b("DecemberShort","Dec")];var wm=class{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;let t=EL(this._workspaceService.getWorkspace());if(!wL(t)){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(g0(e))return hd(e.uri.path);let t=hd(e.configPath.path);return t.endsWith(f0)&&(t=t.substr(0,t.length-f0.length-1)),t}_resoveWorkspacePath(e){if(g0(e))return nE(e.uri.fsPath);let t=hd(e.configPath.path),o=e.configPath.fsPath;return o.endsWith(t)&&(o=o.substr(0,o.length-t.length-1)),o?nE(o):"/"}},Em=class{resolve(e){let{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return Ra()}};var qz=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Kz=function(i,e){return function(t,o){e(t,o,i)}},Zr,Am=class i{constructor(e,t,o){this._editor=e,this._snippet=t,this._snippetLineLeadingWhitespace=o,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=PC(t.placeholders,Bo.compareByIndex),this._placeholderGroupsIdx=-1}initialize(e){this._offset=e.newPosition}dispose(){this._placeholderDecorations&&this._editor.removeDecorations([...this._placeholderDecorations.values()]),this._placeholderGroups.length=0}_initDecorations(){if(this._offset===-1)throw new Error("Snippet not initialized!");if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;let e=this._editor.getModel();this._editor.changeDecorations(t=>{for(let o of this._snippet.placeholders){let r=this._snippet.offset(o),n=this._snippet.fullLen(o),s=T.fromPositions(e.getPositionAt(this._offset+r),e.getPositionAt(this._offset+r+n)),a=o.isFinalTabstop?i._decor.inactiveFinal:i._decor.inactive,c=t.addDecoration(s,a);this._placeholderDecorations.set(o,c)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){let r=[];for(let n of this._placeholderGroups[this._placeholderGroupsIdx])if(n.transform){let s=this._placeholderDecorations.get(n),a=this._editor.getModel().getDecorationRange(s),c=this._editor.getModel().getValueInRange(a),h=n.transform.resolve(c).split(/\r\n|\r|\n/);for(let p=1;p<h.length;p++)h[p]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+h[p]);r.push(ct.replace(a,h.join(this._editor.getModel().getEOL())))}r.length>0&&this._editor.executeEdits("snippet.placeholderTransform",r)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);let o=this._editor.getModel().changeDecorations(r=>{let n=new Set,s=[];for(let a of this._placeholderGroups[this._placeholderGroupsIdx]){let c=this._placeholderDecorations.get(a),h=this._editor.getModel().getDecorationRange(c);s.push(new me(h.startLineNumber,h.startColumn,h.endLineNumber,h.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),r.changeDecorationOptions(c,a.isFinalTabstop?i._decor.activeFinal:i._decor.active),n.add(a);for(let p of this._snippet.enclosingPlaceholders(a)){let g=this._placeholderDecorations.get(p);r.changeDecorationOptions(g,p.isFinalTabstop?i._decor.activeFinal:i._decor.active),n.add(p)}}for(let[a,c]of this._placeholderDecorations)n.has(a)||r.changeDecorationOptions(c,a.isFinalTabstop?i._decor.inactiveFinal:i._decor.inactive);return s});return t?this.move(e):o??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof Bo){let o=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(o).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}get isTrivialSnippet(){if(this._snippet.placeholders.length===0)return!0;if(this._snippet.placeholders.length===1){let[e]=this._snippet.placeholders;if(e.isFinalTabstop&&this._snippet.rightMostDescendant===e)return!0}return!1}computePossibleSelections(){let e=new Map;for(let t of this._placeholderGroups){let o;for(let r of t){if(r.isFinalTabstop)break;o||(o=[],e.set(r.index,o));let n=this._placeholderDecorations.get(r),s=this._editor.getModel().getDecorationRange(n);if(!s){e.delete(r.index);break}o.push(s)}}return e}get activeChoice(){if(!this._placeholderDecorations)return;let e=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!e?.choice)return;let t=this._placeholderDecorations.get(e);if(!t)return;let o=this._editor.getModel().getDecorationRange(t);if(o)return{range:o,choice:e.choice}}get hasChoice(){let e=!1;return this._snippet.walk(t=>(e=t instanceof tc,!e)),e}merge(e){let t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(o=>{for(let r of this._placeholderGroups[this._placeholderGroupsIdx]){let n=e.shift();console.assert(n._offset!==-1),console.assert(!n._placeholderDecorations);let s=n._snippet.placeholderInfo.last.index;for(let c of n._snippet.placeholderInfo.all)c.isFinalTabstop?c.index=r.index+(s+1)/this._nestingLevel:c.index=r.index+c.index/this._nestingLevel;this._snippet.replace(r,n._snippet.children);let a=this._placeholderDecorations.get(r);o.removeDecoration(a),this._placeholderDecorations.delete(r);for(let c of n._snippet.placeholders){let h=n._snippet.offset(c),p=n._snippet.fullLen(c),g=T.fromPositions(t.getPositionAt(n._offset+h),t.getPositionAt(n._offset+h+p)),f=o.addDecoration(g,i._decor.inactive);this._placeholderDecorations.set(c,f)}}this._placeholderGroups=PC(this._snippet.placeholders,Bo.compareByIndex)})}};Am._decor={active:ke.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:ke.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:ke.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:ke.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};var G2={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},Pu=Zr=class{static adjustWhitespace(e,t,o,r,n){let s=e.getLineContent(t.lineNumber),a=Kt(s,0,t.column-1),c;return r.walk(h=>{if(!(h instanceof Fi)||h.parent instanceof tc||n&&!n.has(h))return!0;let p=h.value.split(/\r\n|\r|\n/);if(o){let f=r.offset(h);if(f===0)p[0]=e.normalizeIndentation(p[0]);else{c=c??r.toString();let _=c.charCodeAt(f-1);(_===10||_===13)&&(p[0]=e.normalizeIndentation(a+p[0]))}for(let _=1;_<p.length;_++)p[_]=e.normalizeIndentation(a+p[_])}let g=p.join(e.getEOL());return g!==h.value&&(h.parent.replace(h,[new Fi(g)]),c=void 0),!0}),a}static adjustSelection(e,t,o,r){if(o!==0||r!==0){let{positionLineNumber:n,positionColumn:s}=t,a=s-o,c=s+r,h=e.validateRange({startLineNumber:n,startColumn:a,endLineNumber:n,endColumn:c});t=me.createWithDirection(h.startLineNumber,h.startColumn,h.endLineNumber,h.endColumn,t.getDirection())}return t}static createEditsAndSnippetsFromSelections(e,t,o,r,n,s,a,c,h){let p=[],g=[];if(!e.hasModel())return{edits:p,snippets:g};let f=e.getModel(),_=e.invokeWithinContext(k=>k.get(As)),y=e.invokeWithinContext(k=>new Cm(k.get(ws),f)),C=()=>a,x=f.getValueInRange(Zr.adjustSelection(f,e.getSelection(),o,0)),D=f.getValueInRange(Zr.adjustSelection(f,e.getSelection(),0,r)),E=f.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber),I=e.getSelections().map((k,N)=>({selection:k,idx:N})).sort((k,N)=>T.compareRangesUsingStarts(k.selection,N.selection));for(let{selection:k,idx:N}of I){let O=Zr.adjustSelection(f,k,o,0),V=Zr.adjustSelection(f,k,0,r);x!==f.getValueInRange(O)&&(O=k),D!==f.getValueInRange(V)&&(V=k);let K=k.setStartPosition(O.startLineNumber,O.startColumn).setEndPosition(V.endLineNumber,V.endColumn),$=new Io().parse(t,!0,n),ae=K.getStartPosition(),q=Zr.adjustWhitespace(f,ae,s||N>0&&E!==f.getLineFirstNonWhitespaceColumn(k.positionLineNumber),$);$.resolveVariables(new bm([y,new xm(C,N,I.length,e.getOption(79)==="spread"),new Dm(f,k,N,c),new Sm(f,k,h),new Vs,new wm(_),new Em])),p[N]=ct.replace(K,$.toString()),p[N].identifier={major:N,minor:0},p[N]._isTracked=!0,g[N]=new Am(e,$,q)}return{edits:p,snippets:g}}static createEditsAndSnippetsFromEdits(e,t,o,r,n,s,a){if(!e.hasModel()||t.length===0)return{edits:[],snippets:[]};let c=[],h=e.getModel(),p=new Io,g=new qd,f=new bm([e.invokeWithinContext(y=>new Cm(y.get(ws),h)),new xm(()=>n,0,e.getSelections().length,e.getOption(79)==="spread"),new Dm(h,e.getSelection(),0,s),new Sm(h,e.getSelection(),a),new Vs,new wm(e.invokeWithinContext(y=>y.get(As))),new Em]);t=t.sort((y,C)=>T.compareRangesUsingStarts(y.range,C.range));let _=0;for(let y=0;y<t.length;y++){let{range:C,template:x}=t[y];if(y>0){let N=t[y-1].range,O=T.fromPositions(N.getEndPosition(),C.getStartPosition()),V=new Fi(h.getValueInRange(O));g.appendChild(V),_+=V.value.length}let D=p.parseFragment(x,g);Zr.adjustWhitespace(h,C.getStartPosition(),!0,g,new Set(D)),g.resolveVariables(f);let E=g.toString(),I=E.slice(_);_=E.length;let k=ct.replace(C,I);k.identifier={major:y,minor:0},k._isTracked=!0,c.push(k)}return p.ensureFinalTabstop(g,o,!0),{edits:c,snippets:[new Am(e,g,"")]}}constructor(e,t,o=G2,r){this._editor=e,this._template=t,this._options=o,this._languageConfigurationService=r,this._templateMerges=[],this._snippets=[]}dispose(){Vt(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;let{edits:e,snippets:t}=typeof this._template=="string"?Zr.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):Zr.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService);this._snippets=t,this._editor.executeEdits("snippet",e,o=>{let r=o.filter(n=>!!n.identifier);for(let n=0;n<t.length;n++)t[n].initialize(r[n].textChange);return this._snippets[0].hasPlaceholder?this._move(!0):r.map(n=>me.fromPositions(n.range.getEndPosition()))}),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=G2){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);let{edits:o,snippets:r}=Zr.createEditsAndSnippetsFromSelections(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer,this._languageConfigurationService);this._editor.executeEdits("snippet",o,n=>{let s=n.filter(c=>!!c.identifier);for(let c=0;c<r.length;c++)r[c].initialize(s[c].textChange);let a=r[0].isTrivialSnippet;if(!a){for(let c of this._snippets)c.merge(r);console.assert(r.length===0)}return this._snippets[0].hasPlaceholder&&!a?this._move(void 0):s.map(c=>me.fromPositions(c.range.getEndPosition()))})}next(){let e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){let e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){let t=[];for(let o of this._snippets){let r=o.move(e);t.push(...r)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get hasChoice(){return this._snippets[0].hasChoice}get activeChoice(){return this._snippets[0].activeChoice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;let e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;let t=new Map;for(let o of this._snippets){let r=o.computePossibleSelections();if(t.size===0)for(let[n,s]of r){s.sort(T.compareRangesUsingStarts);for(let a of e)if(s[0].containsRange(a)){t.set(n,[]);break}}if(t.size===0)return!1;t.forEach((n,s)=>{n.push(...r.get(s))})}e.sort(T.compareRangesUsingStarts);for(let[o,r]of t){if(r.length!==e.length){t.delete(o);continue}r.sort(T.compareRangesUsingStarts);for(let n=0;n<r.length;n++)if(!r[n].containsRange(e[n])){t.delete(o);continue}}return t.size>0}};Pu=Zr=qz([Kz(3,Ye)],Pu);var $z=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Pv=function(i,e){return function(t,o){e(t,o,i)}},ku,J2={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},ti=ku=class{static get(e){return e.getContribution(ku.ID)}constructor(e,t,o,r,n){this._editor=e,this._logService=t,this._languageFeaturesService=o,this._languageConfigurationService=n,this._snippetListener=new H,this._modelVersionId=-1,this._inSnippet=ku.InSnippetMode.bindTo(r),this._hasNextTabstop=ku.HasNextTabstop.bindTo(r),this._hasPrevTabstop=ku.HasPrevTabstop.bindTo(r)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)===null||e===void 0||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,typeof t>"u"?J2:U(U({},J2),t))}catch(o){this.cancel(),this._logService.error(o),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){var o;if(this._editor.hasModel()){if(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&typeof e!="string"&&this.cancel(),this._session?(He(typeof e=="string"),this._session.merge(e,t)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new Pu(this._editor,e,t,this._languageConfigurationService),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),!((o=this._session)===null||o===void 0)&&o.hasChoice){let r={_debugDisplayName:"snippetChoiceCompletions",provideCompletionItems:(p,g)=>{if(!this._session||p!==this._editor.getModel()||!Y.equals(this._editor.getPosition(),g))return;let{activeChoice:f}=this._session;if(!f||f.choice.options.length===0)return;let _=p.getValueInRange(f.range),y=!!f.choice.options.find(x=>x.value===_),C=[];for(let x=0;x<f.choice.options.length;x++){let D=f.choice.options[x];C.push({kind:13,label:D.value,insertText:D.value,sortText:"a".repeat(x+1),range:f.range,filterText:y?`${_}_${D.value}`:void 0,command:{id:"jumpToNextSnippetPlaceholder",title:b("next","Go to next placeholder...")}})}return{suggestions:C}}},n=this._editor.getModel(),s,a=!1,c=()=>{s?.dispose(),a=!1},h=()=>{a||(s=this._languageFeaturesService.completionProvider.register({language:n.getLanguageId(),pattern:n.uri.fsPath,scheme:n.uri.scheme,exclusive:!0},r),this._snippetListener.add(s),a=!0)};this._choiceCompletions={provider:r,enable:h,disable:c}}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(r=>r.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState()))}}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){var e;if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}let{activeChoice:t}=this._session;if(!t||!this._choiceCompletions){(e=this._choiceCompletions)===null||e===void 0||e.disable(),this._currentChoice=void 0;return}this._currentChoice!==t.choice&&(this._currentChoice=t.choice,this._choiceCompletions.enable(),queueMicrotask(()=>{$2(this._editor,this._choiceCompletions.provider)}))}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,(t=this._session)===null||t===void 0||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){var e;(e=this._session)===null||e===void 0||e.prev(),this._updateState()}next(){var e;(e=this._session)===null||e===void 0||e.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}};ti.ID="snippetController2";ti.InSnippetMode=new Ee("inSnippetMode",!1,b("inSnippetMode","Whether the editor in current in snippet mode"));ti.HasNextTabstop=new Ee("hasNextTabstop",!1,b("hasNextTabstop","Whether there is a next tab stop when in snippet mode"));ti.HasPrevTabstop=new Ee("hasPrevTabstop",!1,b("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode"));ti=ku=$z([Pv(1,er),Pv(2,J),Pv(3,ve),Pv(4,Ye)],ti);le(ti.ID,ti,4);var kv=Bt.bindToContribution(ti.get);de(new kv({id:"jumpToNextSnippetPlaceholder",precondition:W.and(ti.InSnippetMode,ti.HasNextTabstop),handler:i=>i.next(),kbOpts:{weight:130,kbExpr:A.textInputFocus,primary:2}}));de(new kv({id:"jumpToPrevSnippetPlaceholder",precondition:W.and(ti.InSnippetMode,ti.HasPrevTabstop),handler:i=>i.prev(),kbOpts:{weight:130,kbExpr:A.textInputFocus,primary:1026}}));de(new kv({id:"leaveSnippet",precondition:ti.InSnippetMode,handler:i=>i.cancel(!0),kbOpts:{weight:130,kbExpr:A.textInputFocus,primary:9,secondary:[1033]}}));de(new kv({id:"acceptSnippet",precondition:ti.InSnippetMode,handler:i=>i.finish()}));Rt();Je();var Gz=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},sE=function(i,e){return function(t,o){e(t,o,i)}},Ho=function(i){return i[i.Undo=0]="Undo",i[i.Redo=1]="Redo",i[i.AcceptWord=2]="AcceptWord",i[i.Other=3]="Other",i}(Ho||{}),Fv=class extends B{get isAcceptingPartially(){return this._isAcceptingPartially}constructor(e,t,o,r,n,s,a,c,h,p,g,f){super(),this.textModel=e,this.selectedSuggestItem=t,this.textModelVersionId=o,this._positions=r,this._debounceValue=n,this._suggestPreviewEnabled=s,this._suggestPreviewMode=a,this._inlineSuggestMode=c,this._enabled=h,this._instantiationService=p,this._commandService=g,this._languageConfigurationService=f,this._source=this._register(this._instantiationService.createInstance(Av,this.textModel,this.textModelVersionId,this._debounceValue)),this._isActive=oo(this,!1),this._forceUpdateExplicitlySignal=Jf(this),this._selectedInlineCompletionId=oo(this,void 0),this._primaryPosition=Ei(this,y=>{var C;return(C=this._positions.read(y)[0])!==null&&C!==void 0?C:new Y(1,1)}),this._isAcceptingPartially=!1,this._preserveCurrentCompletionReasons=new Set([Ho.Redo,Ho.Undo,Ho.AcceptWord]),this._fetchInlineCompletionsPromise=RL({owner:this,createEmptyChangeSummary:()=>({preserveCurrentCompletion:!1,inlineCompletionTriggerKind:un.Automatic}),handleChange:(y,C)=>(y.didChange(this.textModelVersionId)&&this._preserveCurrentCompletionReasons.has(y.change)?C.preserveCurrentCompletion=!0:y.didChange(this._forceUpdateExplicitlySignal)&&(C.inlineCompletionTriggerKind=un.Explicit),!0)},(y,C)=>{if(this._forceUpdateExplicitlySignal.read(y),!(this._enabled.read(y)&&this.selectedSuggestItem.read(y)||this._isActive.read(y))){this._source.cancelUpdate();return}this.textModelVersionId.read(y);let D=this._source.suggestWidgetInlineCompletions.get(),E=this.selectedSuggestItem.read(y);if(D&&!E){let V=this._source.inlineCompletions.get();wi(K=>{(!V||D.request.versionId>V.request.versionId)&&this._source.inlineCompletions.set(D.clone(),K),this._source.clearSuggestWidgetInlineCompletions(K)})}let I=this._primaryPosition.read(y),k={triggerKind:C.inlineCompletionTriggerKind,selectedSuggestionInfo:E?.toSelectedSuggestionInfo()},N=this.selectedInlineCompletion.get(),O=C.preserveCurrentCompletion||N?.forwardStable?N:void 0;return this._source.fetch(I,k,O)}),this._filteredInlineCompletionItems=Ma({owner:this,equalsFn:up()},y=>{let C=this._source.inlineCompletions.read(y);if(!C)return[];let x=this._primaryPosition.read(y);return C.inlineCompletions.filter(E=>E.isVisible(this.textModel,x,y))}),this.selectedInlineCompletionIndex=Ei(this,y=>{let C=this._selectedInlineCompletionId.read(y),x=this._filteredInlineCompletionItems.read(y),D=this._selectedInlineCompletionId===void 0?-1:x.findIndex(E=>E.semanticId===C);return D===-1?(this._selectedInlineCompletionId.set(void 0,void 0),0):D}),this.selectedInlineCompletion=Ei(this,y=>{let C=this._filteredInlineCompletionItems.read(y),x=this.selectedInlineCompletionIndex.read(y);return C[x]}),this.activeCommands=Ma({owner:this,equalsFn:up()},y=>{var C,x;return(x=(C=this.selectedInlineCompletion.read(y))===null||C===void 0?void 0:C.inlineCompletion.source.inlineCompletions.commands)!==null&&x!==void 0?x:[]}),this.lastTriggerKind=this._source.inlineCompletions.map(this,y=>y?.request.context.triggerKind),this.inlineCompletionsCount=Ei(this,y=>{if(this.lastTriggerKind.read(y)===un.Explicit)return this._filteredInlineCompletionItems.read(y).length}),this.state=Ma({owner:this,equalsFn:(y,C)=>!y||!C?y===C:Uw(y.ghostTexts,C.ghostTexts)&&y.inlineCompletion===C.inlineCompletion&&y.suggestItem===C.suggestItem},y=>{var C,x;let D=this.textModel,E=this.selectedSuggestItem.read(y);if(E){let I=zn(E.toSingleTextEdit(),D),k=this._computeAugmentation(I,y);if(!this._suggestPreviewEnabled.read(y)&&!k)return;let O=(C=k?.edit)!==null&&C!==void 0?C:I,V=k?k.edit.text.length-I.text.length:0,K=this._suggestPreviewMode.read(y),$=this._positions.read(y),ae=[O,...aE(this.textModel,$,O)],q=ae.map((Mt,De)=>Yw(Mt,D,K,$[De],V)).filter(ad),ji=(x=q[0])!==null&&x!==void 0?x:new Hn(O.range.endLineNumber,[]);return{edits:ae,primaryGhostText:ji,ghostTexts:q,inlineCompletion:k?.completion,suggestItem:E}}else{if(!this._isActive.read(y))return;let I=this.selectedInlineCompletion.read(y);if(!I)return;let k=I.toSingleTextEdit(y),N=this._inlineSuggestMode.read(y),O=this._positions.read(y),V=[k,...aE(this.textModel,O,k)],K=V.map(($,ae)=>Yw($,D,N,O[ae],0)).filter(ad);return K[0]?{edits:V,primaryGhostText:K[0],ghostTexts:K,inlineCompletion:I,suggestItem:void 0}:void 0}}),this.ghostTexts=Ma({owner:this,equalsFn:Uw},y=>{let C=this.state.read(y);if(C)return C.ghostTexts}),this.primaryGhostText=Ma({owner:this,equalsFn:qw},y=>{let C=this.state.read(y);if(C)return C?.primaryGhostText}),this._register(jL(this._fetchInlineCompletionsPromise));let _;this._register(Lt(y=>{var C,x;let D=this.state.read(y),E=D?.inlineCompletion;if(E?.semanticId!==_?.semanticId&&(_=E,E)){let I=E.inlineCompletion,k=I.source;(x=(C=k.provider).handleItemDidShow)===null||x===void 0||x.call(C,k.inlineCompletions,I.sourceInlineCompletion,I.insertText)}}))}async trigger(e){this._isActive.set(!0,e),await this._fetchInlineCompletionsPromise.get()}async triggerExplicitly(e){b0(e,t=>{this._isActive.set(!0,t),this._forceUpdateExplicitlySignal.trigger(t)}),await this._fetchInlineCompletionsPromise.get()}stop(e){b0(e,t=>{this._isActive.set(!1,t),this._source.clear(t)})}_computeAugmentation(e,t){let o=this.textModel,r=this._source.suggestWidgetInlineCompletions.read(t),n=r?r.inlineCompletions:[this.selectedInlineCompletion.read(t)].filter(ad);return Xk(n,a=>{let c=a.toSingleTextEdit(t);return c=zn(c,o,T.fromPositions(c.range.getStartPosition(),e.range.getEndPosition())),Ev(c,e)?{completion:a,edit:c}:void 0})}async _deltaSelectedInlineCompletionIndex(e){await this.triggerExplicitly();let t=this._filteredInlineCompletionItems.get()||[];if(t.length>0){let o=(this.selectedInlineCompletionIndex.get()+e+t.length)%t.length;this._selectedInlineCompletionId.set(t[o].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)}async next(){await this._deltaSelectedInlineCompletionIndex(1)}async previous(){await this._deltaSelectedInlineCompletionIndex(-1)}async accept(e){var t;if(e.getModel()!==this.textModel)throw new ud;let o=this.state.get();if(!o||o.primaryGhostText.isEmpty()||!o.inlineCompletion)return;let r=o.inlineCompletion.toInlineCompletion(void 0);if(e.pushUndoStop(),r.snippetInfo)e.executeEdits("inlineSuggestion.accept",[ct.replace(r.range,""),...r.additionalTextEdits]),e.setPosition(r.snippetInfo.range.getStartPosition(),"inlineCompletionAccept"),(t=ti.get(e))===null||t===void 0||t.insert(r.snippetInfo.snippet,{undoStopBefore:!1});else{let n=o.edits,s=X2(n).map(a=>me.fromPositions(a));e.executeEdits("inlineSuggestion.accept",[...n.map(a=>ct.replace(a.range,a.text)),...r.additionalTextEdits]),e.setSelections(s,"inlineCompletionAccept")}r.command&&r.source.addRef(),wi(n=>{this._source.clear(n),this._isActive.set(!1,n)}),r.command&&(await this._commandService.executeCommand(r.command.id,...r.command.arguments||[]).then(void 0,$e),r.source.removeRef())}async acceptNextWord(e){await this._acceptNext(e,(t,o)=>{let r=this.textModel.getLanguageIdAtPosition(t.lineNumber,t.column),n=this._languageConfigurationService.getLanguageConfiguration(r),s=new RegExp(n.wordDefinition.source,n.wordDefinition.flags.replace("g","")),a=o.match(s),c=0;a&&a.index!==void 0?a.index===0?c=a[0].length:c=a.index:c=o.length;let p=/\s+/g.exec(o);return p&&p.index!==void 0&&p.index+p[0].length<c&&(c=p.index+p[0].length),c},0)}async acceptNextLine(e){await this._acceptNext(e,(t,o)=>{let r=o.match(/\n/);return r&&r.index!==void 0?r.index+1:o.length},1)}async _acceptNext(e,t,o){if(e.getModel()!==this.textModel)throw new ud;let r=this.state.get();if(!r||r.primaryGhostText.isEmpty()||!r.inlineCompletion)return;let n=r.primaryGhostText,s=r.inlineCompletion.toInlineCompletion(void 0);if(s.snippetInfo||s.filterText!==s.insertText){await this.accept(e);return}let a=n.parts[0],c=new Y(n.lineNumber,a.column),h=a.text,p=t(c,h);if(p===h.length&&n.parts.length===1){this.accept(e);return}let g=h.substring(0,p),f=this._positions.get(),_=f[0];s.source.addRef();try{this._isAcceptingPartially=!0;try{e.pushUndoStop();let y=T.fromPositions(_,c),C=e.getModel().getValueInRange(y)+g,x=new tr(y,C),D=[x,...aE(this.textModel,f,x)],E=X2(D).map(I=>me.fromPositions(I));e.executeEdits("inlineSuggestion.accept",D.map(I=>ct.replace(I.range,I.text))),e.setSelections(E,"inlineCompletionPartialAccept"),e.revealPositionInCenterIfOutsideViewport(e.getPosition(),1)}finally{this._isAcceptingPartially=!1}if(s.source.provider.handlePartialAccept){let y=T.fromPositions(s.range.getStartPosition(),zl.ofText(g).addToPosition(c)),C=e.getModel().getValueInRange(y,1);s.source.provider.handlePartialAccept(s.source.inlineCompletions,s.sourceInlineCompletion,C.length,{kind:o})}}finally{s.source.removeRef()}}handleSuggestAccepted(e){var t,o;let r=zn(e.toSingleTextEdit(),this.textModel),n=this._computeAugmentation(r,void 0);if(!n)return;let s=n.completion.inlineCompletion;(o=(t=s.source.provider).handlePartialAccept)===null||o===void 0||o.call(t,s.source.inlineCompletions,s.sourceInlineCompletion,r.text.length,{kind:2})}};Fv=Gz([sE(9,ce),sE(10,ht),sE(11,Ye)],Fv);function aE(i,e,t){if(e.length===1)return[];let o=e[0],r=e.slice(1),n=t.range.getStartPosition(),s=t.range.getEndPosition(),a=i.getValueInRange(T.fromPositions(o,s)),c=Kw(o,n);if(c.lineNumber<1)return Fe(new ud(`positionWithinTextEdit line number should be bigger than 0.
			Invalid subtraction between ${o.toString()} and ${n.toString()}`)),[];let h=Jz(t.text,c);return r.map(p=>{let g=R2(Kw(p,n),s),f=i.getValueInRange(T.fromPositions(p,g)),_=hn(a,f),y=T.fromPositions(p,p.delta(0,_));return new tr(y,h)})}function Jz(i,e){let t="",o=ck(i);for(let r=e.lineNumber-1;r<o.length;r++)t+=o[r].substring(r===e.lineNumber-1?e.column-1:0);return t}function X2(i){let e=jP.createSortPermutation(i,(n,s)=>T.compareRangesUsingStarts(n.range,s.range)),o=new Df(e.apply(i)).getNewRanges();return e.inverse().apply(o).map(n=>n.getEndPosition())}nt();X();pt();ge();Jt();bt();yt();Ze();nt();m6();X();Zi();Lr();Di();xe();pt();ge();it();Xe();X();Ea();Jt();ei();gs();Je();var Xz=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Y2=function(i,e){return function(t,o){e(t,o,i)}},Tm,Im=class{constructor(e){this.name=e}select(e,t,o){if(o.length===0)return 0;let r=o[0].score[0];for(let n=0;n<o.length;n++){let{score:s,completion:a}=o[n];if(s[0]!==r)break;if(a.preselect)return n}return 0}},Lv=class extends Im{constructor(){super("first")}memorize(e,t,o){}toJSON(){}fromJSON(){}},lE=class extends Im{constructor(){super("recentlyUsed"),this._cache=new vn(300,.66),this._seq=0}memorize(e,t,o){let r=`${e.getLanguageId()}/${o.textLabel}`;this._cache.set(r,{touch:this._seq++,type:o.completion.kind,insertText:o.completion.insertText})}select(e,t,o){if(o.length===0)return 0;let r=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(r))return super.select(e,t,o);let n=o[0].score[0],s=-1,a=-1,c=-1;for(let h=0;h<o.length&&o[h].score[0]===n;h++){let p=`${e.getLanguageId()}/${o[h].textLabel}`,g=this._cache.peek(p);if(g&&g.touch>c&&g.type===o[h].completion.kind&&g.insertText===o[h].completion.insertText&&(c=g.touch,a=h),o[h].completion.preselect&&s===-1)return s=h}return a!==-1?a:s!==-1?s:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();let t=0;for(let[o,r]of e)r.touch=t,r.type=typeof r.type=="number"?r.type:Bh.fromString(r.type),this._cache.set(o,r);this._seq=this._cache.size}},cE=class extends Im{constructor(){super("recentlyUsedByPrefix"),this._trie=SL.forStrings(),this._seq=0}memorize(e,t,o){let{word:r}=e.getWordUntilPosition(t),n=`${e.getLanguageId()}/${r}`;this._trie.set(n,{type:o.completion.kind,insertText:o.completion.insertText,touch:this._seq++})}select(e,t,o){let{word:r}=e.getWordUntilPosition(t);if(!r)return super.select(e,t,o);let n=`${e.getLanguageId()}/${r}`,s=this._trie.get(n);if(s||(s=this._trie.findSubstr(n)),s)for(let a=0;a<o.length;a++){let{kind:c,insertText:h}=o[a].completion;if(c===s.type&&h===s.insertText)return a}return super.select(e,t,o)}toJSON(){let e=[];return this._trie.forEach((t,o)=>e.push([o,t])),e.sort((t,o)=>-(t[1].touch-o[1].touch)).forEach((t,o)=>t[1].touch=o),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(let[t,o]of e)o.type=typeof o.type=="number"?o.type:Bh.fromString(o.type),this._trie.set(t,o)}}},Pm=Tm=class{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new H,this._persistSoon=new ut(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(o=>{o.reason===Ld.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,o){this._withStrategy(e,t).memorize(e,t,o),this._persistSoon.schedule()}select(e,t,o){return this._withStrategy(e,t).select(e,t,o)}_withStrategy(e,t){var o;let r=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((o=this._strategy)===null||o===void 0?void 0:o.name)!==r){this._saveState();let n=Tm._strategyCtors.get(r)||Lv;this._strategy=new n;try{let a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,c=this._storageService.get(`${Tm._storagePrefix}/${r}`,a);c&&this._strategy.fromJSON(JSON.parse(c))}catch{}}return this._strategy}_saveState(){if(this._strategy){let t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,o=JSON.stringify(this._strategy);this._storageService.store(`${Tm._storagePrefix}/${this._strategy.name}`,o,t,1)}}};Pm._strategyCtors=new Map([["recentlyUsedByPrefix",cE],["recentlyUsed",lE],["first",Lv]]);Pm._storagePrefix="suggest/memories";Pm=Tm=Xz([Y2(0,To),Y2(1,Oe)],Pm);var Fu=zi("ISuggestMemories");Ui(Fu,Pm,1);Me();var Yz=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Qz=function(i,e){return function(t,o){e(t,o,i)}},dE,Lu=dE=class{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=dE.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(o=>o.hasChanged(123)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)===null||e===void 0||e.dispose(),this._ckAtEnd.reset()}_update(){let e=this._editor.getOption(123)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){let t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}let o=this._editor.getModel(),r=this._editor.getSelection(),n=o.getWordAtPosition(r.getStartPosition());if(!n){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(n.endColumn===r.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};Lu.AtEnd=new Ee("atEndOfWord",!1);Lu=dE=Yz([Qz(1,ve)],Lu);re();Rt();Me();Je();bd();Me();var Zz=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},e5=function(i,e){return function(t,o){e(t,o,i)}},km,Qa=km=class{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=km.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)===null||e===void 0||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},o){if(e.items.length===0){this.reset();return}if(km._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=o,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,o){let r=o;for(let n=t.items.length;n>0&&(r=(r+t.items.length+(e?1:-1))%t.items.length,!(r===o||!t.items[r].completion.additionalTextEdits));n--);return r}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=km._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};Qa.OtherSuggestions=new Ee("hasOtherSuggestions",!1);Qa=km=Zz([e5(1,ve)],Qa);bt();X();QC();var Nv=class{constructor(e,t,o,r){this._disposables=new H,this._disposables.add(o.onDidSuggest(n=>{n.completionModel.items.length===0&&this.reset()})),this._disposables.add(o.onDidCancel(n=>{this.reset()})),this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(n=>{if(this._active&&!t.isFrozen()&&o.state!==0){let s=n.charCodeAt(n.length-1);this._active.acceptCharacters.has(s)&&e.getOption(0)&&r(this._active.item)}}))}_onItem(e){if(!e||!zt(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;let t=new jl;for(let o of e.item.completion.commitCharacters)o.length>0&&t.add(o.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}};Xe();yt();Ze();nt();X();Tt();ui();pp();bt();ge();$P();pt();ge();var Mv=(()=>{class i{async provideSelectionRanges(t,o){let r=[];for(let n of o){let s=[];r.push(s);let a=new Map;await new Promise(c=>i._bracketsRightYield(c,0,t,n,a)),await new Promise(c=>i._bracketsLeftYield(c,0,t,n,a,s))}return r}static _bracketsRightYield(t,o,r,n,s){let a=new Map,c=Date.now();for(;;){if(o>=i._maxRounds){t();break}if(!n){t();break}let h=r.bracketPairs.findNextBracket(n);if(!h){t();break}if(Date.now()-c>i._maxDuration){setTimeout(()=>i._bracketsRightYield(t,o+1,r,n,s));break}if(h.bracketInfo.isOpeningBracket){let g=h.bracketInfo.bracketText,f=a.has(g)?a.get(g):0;a.set(g,f+1)}else{let g=h.bracketInfo.getOpeningBrackets()[0].bracketText,f=a.has(g)?a.get(g):0;if(f-=1,a.set(g,Math.max(0,f)),f<0){let _=s.get(g);_||(_=new tf,s.set(g,_)),_.push(h.range)}}n=h.range.getEndPosition()}}static _bracketsLeftYield(t,o,r,n,s,a){let c=new Map,h=Date.now();for(;;){if(o>=i._maxRounds&&s.size===0){t();break}if(!n){t();break}let p=r.bracketPairs.findPrevBracket(n);if(!p){t();break}if(Date.now()-h>i._maxDuration){setTimeout(()=>i._bracketsLeftYield(t,o+1,r,n,s,a));break}if(p.bracketInfo.isOpeningBracket){let f=p.bracketInfo.bracketText,_=c.has(f)?c.get(f):0;if(_-=1,c.set(f,Math.max(0,_)),_<0){let y=s.get(f);if(y){let C=y.shift();y.size===0&&s.delete(f);let x=T.fromPositions(p.range.getEndPosition(),C.getStartPosition()),D=T.fromPositions(p.range.getStartPosition(),C.getEndPosition());a.push({range:x}),a.push({range:D}),i._addBracketLeading(r,D,a)}}}else{let f=p.bracketInfo.getOpeningBrackets()[0].bracketText,_=c.has(f)?c.get(f):0;c.set(f,_+1)}n=p.range.getStartPosition()}}static _addBracketLeading(t,o,r){if(o.startLineNumber===o.endLineNumber)return;let n=o.startLineNumber,s=t.getLineFirstNonWhitespaceColumn(n);s!==0&&s!==o.startColumn&&(r.push({range:T.fromPositions(new Y(n,s),o.getEndPosition())}),r.push({range:T.fromPositions(new Y(n,1),o.getEndPosition())}));let a=n-1;if(a>0){let c=t.getLineFirstNonWhitespaceColumn(a);c===o.startColumn&&c!==t.getLineLastNonWhitespaceColumn(a)&&(r.push({range:T.fromPositions(new Y(a,c),o.getEndPosition())}),r.push({range:T.fromPositions(new Y(a,1),o.getEndPosition())}))}}}return i._maxDuration=30,i._maxRounds=2,i})();var Za=class i{static async create(e,t){if(!t.getOption(118).localityBonus||!t.hasModel())return i.None;let o=t.getModel(),r=t.getPosition();if(!e.canComputeWordRanges(o.uri))return i.None;let[n]=await new Mv().provideSelectionRanges(o,[r]);if(n.length===0)return i.None;let s=await e.computeWordRanges(o.uri,n[0].range);if(!s)return i.None;let a=o.getWordUntilPosition(r);return delete s[a.word],new class extends i{distance(c,h){if(!r.equals(t.getPosition()))return 0;if(h.kind===17)return 2<<20;let p=typeof h.label=="string"?h.label:h.label.label,g=s[p];if(WP(g))return 2<<20;let f=kl(g,T.fromPositions(c),T.compareRangesUsingStarts),_=f>=0?g[f]:g[Math.max(0,~f-1)],y=n.length;for(let C of n){if(!T.containsRange(C.range,_))break;y-=1}return y}}}};Za.None=new class extends Za{distance(){return 0}};ei();Me();bd();mr();bt();Ss();Tt();var Fm=class{constructor(e,t){this.leadingLineContent=e,this.characterCountDelta=t}},Nu=class i{constructor(e,t,o,r,n,s,a=Uf.default,c=void 0){this.clipboardText=c,this._snippetCompareFn=i._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=r,this._options=n,this._refilterKind=1,this._lineContext=o,this._fuzzyScoreOptions=a,s==="top"?this._snippetCompareFn=i._compareCompletionItemsSnippetsUp:s==="bottom"&&(this._snippetCompareFn=i._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}getItemsByProvider(){return this._ensureCachedState(),this._itemsByProvider}getIncompleteProvider(){this._ensureCachedState();let e=new Set;for(let[t,o]of this.getItemsByProvider())o.length>0&&o[0].container.incomplete&&e.add(t);return e}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._itemsByProvider=new Map;let e=[],{leadingLineContent:t,characterCountDelta:o}=this._lineContext,r="",n="",s=this._refilterKind===1?this._items:this._filteredItems,a=[],c=!this._options.filterGraceful||s.length>2e3?qf:fL;for(let h=0;h<s.length;h++){let p=s[h];if(p.isInvalid)continue;let g=this._itemsByProvider.get(p.provider);g?g.push(p):this._itemsByProvider.set(p.provider,[p]);let f=p.position.column-p.editStart.column,_=f+o-(p.position.column-this._column);if(r.length!==_&&(r=_===0?"":t.slice(-_),n=r.toLowerCase()),p.word=r,_===0)p.score=xs.Default;else{let y=0;for(;y<f;){let C=r.charCodeAt(y);if(C===32||C===9)y+=1;else break}if(y>=_)p.score=xs.Default;else if(typeof p.completion.filterText=="string"){let C=c(r,n,y,p.completion.filterText,p.filterTextLow,0,this._fuzzyScoreOptions);if(!C)continue;dk(p.completion.filterText,p.textLabel)===0?p.score=C:(p.score=gL(r,n,y,p.textLabel,p.labelLow,0),p.score[0]=C[0])}else{let C=c(r,n,y,p.textLabel,p.labelLow,0,this._fuzzyScoreOptions);if(!C)continue;p.score=C}}p.idx=h,p.distance=this._wordDistance.distance(p.position,p.completion),a.push(p),e.push(p.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?BP(e.length-.85,e,(h,p)=>h-p):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return i._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return i._compareCompletionItems(e,t)}};Ge();Ss();Di();N6();var t5=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},el=function(i,e){return function(t,o){e(t,o,i)}},uE,Us=class{static shouldAutoTrigger(e){if(!e.hasModel())return!1;let t=e.getModel(),o=e.getPosition();t.tokenization.tokenizeIfCheap(o.lineNumber);let r=t.getWordAtPosition(o);return!(!r||r.endColumn!==o.column&&r.startColumn+1!==o.column||!isNaN(Number(r.word)))}constructor(e,t,o){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.triggerOptions=o}};function i5(i,e,t){if(!e.getContextKeyValue(_i.inlineSuggestionVisible.key))return!0;let o=e.getContextKeyValue(_i.suppressSuggestions.key);return o!==void 0?!o:!i.getOption(62).suppressSuggestions}function o5(i,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;let o=e.getContextKeyValue(_i.suppressSuggestions.key);return o!==void 0?!o:!i.getOption(62).suppressSuggestions}var Mu=uE=class{constructor(e,t,o,r,n,s,a,c,h){this._editor=e,this._editorWorkerService=t,this._clipboardService=o,this._telemetryService=r,this._logService=n,this._contextKeyService=s,this._configurationService=a,this._languageFeaturesService=c,this._envService=h,this._toDispose=new H,this._triggerCharacterListener=new H,this._triggerQuickSuggest=new mn,this._triggerState=void 0,this._completionDisposables=new H,this._onDidCancel=new fe,this._onDidTrigger=new fe,this._onDidSuggest=new fe,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new me(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters()})),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}));let p=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{p=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{p=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(g=>{p||this._onCursorChange(g)})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{!p&&this._triggerState!==void 0&&this._refilterCompletionItems()})),this._updateTriggerCharacters()}dispose(){Vt(this._triggerCharacterListener),Vt([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(91)||!this._editor.hasModel()||!this._editor.getOption(121))return;let e=new Map;for(let o of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(let r of o.triggerCharacters||[]){let n=e.get(r);n||(n=new Set,n.add(K2()),e.set(r,n)),n.add(o)}let t=o=>{var r;if(!o5(this._editor,this._contextKeyService,this._configurationService)||Us.shouldAutoTrigger(this._editor))return;if(!o){let a=this._editor.getPosition();o=this._editor.getModel().getLineContent(a.lineNumber).substr(0,a.column-1)}let n="";pk(o.charCodeAt(o.length-1))?hk(o.charCodeAt(o.length-2))&&(n=o.substr(o.length-2)):n=o.charAt(o.length-1);let s=e.get(n);if(s){let a=new Map;if(this._completionModel)for(let[c,h]of this._completionModel.getItemsByProvider())s.has(c)||a.set(c,h);this.trigger({auto:!0,triggerKind:1,triggerCharacter:n,retrigger:!!this._completionModel,clipboardText:(r=this._completionModel)===null||r===void 0?void 0:r.clipboardText,completionOptions:{providerFilter:s,providerItemsToReuse:a}})}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(()=>t()))}get state(){return this._triggerState?this._triggerState.auto?2:1:0}cancel(e=!1){var t;this._triggerState!==void 0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)===null||t===void 0||t.cancel(),this._requestToken=void 0,this._triggerState=void 0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._triggerState!==void 0&&(!this._editor.hasModel()||!this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._triggerState.auto,retrigger:!0}))}_onCursorChange(e){if(!this._editor.hasModel())return;let t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._triggerState===void 0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._triggerState!==void 0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._triggerState===void 0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){var e;Vn.isAllOff(this._editor.getOption(89))||this._editor.getOption(118).snippetsPreventQuickSuggestions&&(!((e=ti.get(this._editor))===null||e===void 0)&&e.isInSnippet())||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._triggerState!==void 0||!Us.shouldAutoTrigger(this._editor)||!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;let t=this._editor.getModel(),o=this._editor.getPosition(),r=this._editor.getOption(89);if(!Vn.isAllOff(r)){if(!Vn.isAllOn(r)){t.tokenization.tokenizeIfCheap(o.lineNumber);let n=t.tokenization.getLineTokens(o.lineNumber),s=n.getStandardTokenType(n.findTokenIndexAtOffset(Math.max(o.column-1-1,0)));if(Vn.valueFor(r,s)!=="on")return}i5(this._editor,this._contextKeyService,this._configurationService)&&this._languageFeaturesService.completionProvider.has(t)&&this.trigger({auto:!0})}},this._editor.getOption(90)))}_refilterCompletionItems(){He(this._editor.hasModel()),He(this._triggerState!==void 0);let e=this._editor.getModel(),t=this._editor.getPosition(),o=new Us(e,t,he(U({},this._triggerState),{refilter:!0}));this._onNewContext(o)}trigger(e){var t,o,r,n,s,a;if(!this._editor.hasModel())return;let c=this._editor.getModel(),h=new Us(c,this._editor.getPosition(),e);this.cancel(e.retrigger),this._triggerState=e,this._onDidTrigger.fire({auto:e.auto,shy:(t=e.shy)!==null&&t!==void 0?t:!1,position:this._editor.getPosition()}),this._context=h;let p={triggerKind:(o=e.triggerKind)!==null&&o!==void 0?o:0};e.triggerCharacter&&(p={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new _t;let g=this._editor.getOption(112),f=1;switch(g){case"top":f=0;break;case"bottom":f=2;break}let{itemKind:_,showDeprecated:y}=uE.createSuggestFilter(this._editor),C=new zs(f,(n=(r=e.completionOptions)===null||r===void 0?void 0:r.kindFilter)!==null&&n!==void 0?n:_,(s=e.completionOptions)===null||s===void 0?void 0:s.providerFilter,(a=e.completionOptions)===null||a===void 0?void 0:a.providerItemsToReuse,y),x=Za.create(this._editorWorkerService,this._editor),D=vm(this._languageFeaturesService.completionProvider,c,this._editor.getPosition(),C,p,this._requestToken.token);Promise.all([D,x]).then(async([E,I])=>{var k;if((k=this._requestToken)===null||k===void 0||k.dispose(),!this._editor.hasModel())return;let N=e?.clipboardText;if(!N&&E.needsClipboard&&(N=await this._clipboardService.readText()),this._triggerState===void 0)return;let O=this._editor.getModel(),V=new Us(O,this._editor.getPosition(),e),K=he(U({},Uf.default),{firstMatchCanBeWeak:!this._editor.getOption(118).matchOnWordStartOnly});if(this._completionModel=new Nu(E.items,this._context.column,{leadingLineContent:V.leadingLineContent,characterCountDelta:V.column-this._context.column},I,this._editor.getOption(118),this._editor.getOption(112),K,N),this._completionDisposables.add(E.disposable),this._onNewContext(V),this._reportDurationsTelemetry(E.durations),!this._envService.isBuilt||this._envService.isExtensionDevelopment)for(let $ of E.items)$.isInvalid&&this._logService.warn(`[suggest] did IGNORE invalid completion item from ${$.provider._debugDisplayName}`,$.completion)}).catch(Fe)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static createSuggestFilter(e){let t=new Set;e.getOption(112)==="none"&&t.add(27);let r=e.getOption(118);return r.showMethods||t.add(0),r.showFunctions||t.add(1),r.showConstructors||t.add(2),r.showFields||t.add(3),r.showVariables||t.add(4),r.showClasses||t.add(5),r.showStructs||t.add(6),r.showInterfaces||t.add(7),r.showModules||t.add(8),r.showProperties||t.add(9),r.showEvents||t.add(10),r.showOperators||t.add(11),r.showUnits||t.add(12),r.showValues||t.add(13),r.showConstants||t.add(14),r.showEnums||t.add(15),r.showEnumMembers||t.add(16),r.showKeywords||t.add(17),r.showWords||t.add(18),r.showColors||t.add(19),r.showFiles||t.add(20),r.showReferences||t.add(21),r.showColors||t.add(22),r.showFolders||t.add(23),r.showTypeParameters||t.add(24),r.showSnippets||t.add(27),r.showUsers||t.add(25),r.showIssues||t.add(26),{itemKind:t,showDeprecated:r.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(Kt(e.leadingLineContent)!==Kt(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0}):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){if(Us.shouldAutoTrigger(this._editor)&&this._context){let o=this._completionModel.getItemsByProvider();this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerItemsToReuse:o}})}return}if(e.column>this._context.column&&this._completionModel.getIncompleteProvider().size>0&&e.leadingWord.word.length!==0){let t=new Map,o=new Set;for(let[r,n]of this._completionModel.getItemsByProvider())n.length>0&&n[0].container.incomplete?o.add(r):t.set(r,n);this.trigger({auto:this._context.triggerOptions.auto,triggerKind:2,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerFilter:o,providerItemsToReuse:t}})}else{let t=this._completionModel.lineContext,o=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){let r=Us.shouldAutoTrigger(this._editor);if(!this._context){this.cancel();return}if(r&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});return}if(this._context.triggerOptions.auto){this.cancel();return}else if(this._completionModel.lineContext=t,o=this._completionModel.items.length>0,o&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,triggerOptions:e.triggerOptions,isFrozen:o})}}}}};Mu=uE=t5([el(1,zr),el(2,Vr),el(3,Zt),el(4,er),el(5,ve),el(6,Oe),el(7,J),el(8,tL)],Mu);X();var Q2=(()=>{class i{constructor(t,o){this._disposables=new H,this._lastOvertyped=[],this._locked=!1,this._disposables.add(t.onWillType(()=>{if(this._locked||!t.hasModel())return;let r=t.getSelections(),n=r.length,s=!1;for(let c=0;c<n;c++)if(!r[c].isEmpty()){s=!0;break}if(!s){this._lastOvertyped.length!==0&&(this._lastOvertyped.length=0);return}this._lastOvertyped=[];let a=t.getModel();for(let c=0;c<n;c++){let h=r[c];if(a.getValueLengthInRange(h)>i._maxSelectionLength)return;this._lastOvertyped[c]={value:a.getValueInRange(h),multiline:h.startLineNumber!==h.endLineNumber}}})),this._disposables.add(o.onDidTrigger(r=>{this._locked=!0})),this._disposables.add(o.onDidCancel(r=>{this._locked=!1}))}getLastOvertypedInfo(t){if(t>=0&&t<this._lastOvertyped.length)return this._lastOvertyped[t]}dispose(){this._disposables.dispose()}}return i._maxSelectionLength=51200,i})();ze();Xe();Ze();nt();X();L6();Tt();ze();X();re();Wt();Me();Je();var r5=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},hE=function(i,e){return function(t,o){e(t,o,i)}},pE=class i extends Md{updateLabel(){let e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=b({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",this._action.label,i.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return(t=e.getLabel())===null||t===void 0?void 0:t.replace(/\benter\b/gi,"\u23CE")}},Ov=class{constructor(e,t,o,r,n){this._menuId=t,this._menuService=r,this._contextKeyService=n,this._menuDisposables=new H,this.element=Z(e,te(".suggest-status-bar"));let s=a=>a instanceof yn?o.createInstance(pE,a,void 0):void 0;this._leftActions=new Is(this.element,{actionViewItemProvider:s}),this._rightActions=new Is(this.element,{actionViewItemProvider:s}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this._leftActions.dispose(),this._rightActions.dispose(),this.element.remove()}show(){let e=this._menuService.createMenu(this._menuId,this._contextKeyService),t=()=>{let o=[],r=[];for(let[n,s]of e.getActions())n==="left"?o.push(...s):r.push(...s);this._leftActions.clear(),this._leftActions.push(o),this._rightActions.clear(),this._rightActions.push(r)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};Ov=r5([hE(2,ce),hE(3,pr),hE(4,ve)],Ov);re();Me();Je();Ri();Pf();Bi();ze();xi();to();nt();yr();X();re();Je();var n5=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},s5=function(i,e){return function(t,o){e(t,o,i)}};function Lm(i){return!!i&&!!(i.completion.documentation||i.completion.detail&&i.completion.detail!==i.completion.label)}var Rv=class{constructor(e,t){this._editor=e,this._onDidClose=new fe,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new fe,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new H,this._renderDisposeable=new H,this._borderWidth=1,this._size=new st(330,0),this.domNode=te(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(vr,{editor:e}),this._body=te(".body"),this._scrollbar=new Ff(this._body,{alwaysConsumeMouseWheel:!0}),Z(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=Z(this._body,te(".header")),this._close=Z(this._header,te("span"+je.asCSSSelector(be.close))),this._close.title=b("details.close","Close"),this._type=Z(this._header,te("p.type")),this._docs=Z(this._body,te("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(o=>{o.hasChanged(50)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){let e=this._editor.getOptions(),t=e.get(50),o=t.getMassagedFontFamily(),r=e.get(119)||t.fontSize,n=e.get(120)||t.lineHeight,s=t.fontWeight,a=`${r}px`,c=`${n}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${n/r}`,this.domNode.style.fontWeight=s,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=o,this._close.style.height=c,this._close.style.width=c}getLayoutInfo(){let e=this._editor.getOption(120)||this._editor.getOption(50).lineHeight,t=this._borderWidth,o=t*2;return{lineHeight:e,borderWidth:t,borderHeight:o,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=b("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var o,r;this._renderDisposeable.clear();let{detail:n,documentation:s}=e.completion;if(t){let a="";a+=`score: ${e.score[0]}
`,a+=`prefix: ${(o=e.word)!==null&&o!==void 0?o:"(no prefix)"}
`,a+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,a+=`distance: ${e.distance} (localityBonus-setting)
`,a+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,a+=`commit_chars: ${(r=e.completion.commitCharacters)===null||r===void 0?void 0:r.join("")}
`,s=new Gt().appendCodeblock("empty",a),n=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!Lm(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),n){let a=n.length>1e5?`${n.substr(0,1e5)}\u2026`:n;this._type.textContent=a,this._type.title=a,eo(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(a))}else Co(this._type),this._type.title="",Mi(this._type),this.domNode.classList.add("no-type");if(Co(this._docs),typeof s=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=s;else if(s){this._docs.classList.add("markdown-docs"),Co(this._docs);let a=this._markdownRenderer.render(s);this._docs.appendChild(a.element),this._renderDisposeable.add(a),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=a=>{a.preventDefault(),a.stopPropagation()},this._close.onclick=a=>{a.preventDefault(),a.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get isEmpty(){return this.domNode.classList.contains("no-docs")}get size(){return this._size}layout(e,t){let o=new st(e,t);st.equals(o,this._size)||(this._size=o,Ek(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};Rv=n5([s5(1,ce)],Rv);var Bv=class{constructor(e,t){this.widget=e,this._editor=t,this.allowEditorOverflow=!0,this._disposables=new H,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new Ua,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let o,r,n=0,s=0;this._disposables.add(this._resizable.onDidWillResize(()=>{o=this._topLeft,r=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(o&&r){this.widget.layout(a.dimension.width,a.dimension.height);let c=!1;a.west&&(s=r.width-a.dimension.width,c=!0),a.north&&(n=r.height-a.dimension.height,c=!0),c&&this._applyTopLeft({top:o.top+n,left:o.left+s})}a.done&&(o=void 0,r=void 0,n=0,s=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var a;this._anchorBox&&this._placeAtAnchor(this._anchorBox,(a=this._userSize)!==null&&a!==void 0?a:this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return this._topLeft?{preference:this._topLeft}:null}show(){this._added||(this._editor.addOverlayWidget(this),this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){var o;let r=e.getBoundingClientRect();this._anchorBox=r,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,(o=this._userSize)!==null&&o!==void 0?o:this.widget.size,t)}_placeAtAnchor(e,t,o){var r;let n=gn(this.getDomNode().ownerDocument.body),s=this.widget.getLayoutInfo(),a=new st(220,2*s.lineHeight),c=e.top,h=function(){let O=n.width-(e.left+e.width+s.borderWidth+s.horizontalPadding),V=-s.borderWidth+e.left+e.width,K=new st(O,n.height-e.top-s.borderHeight-s.verticalPadding),$=K.with(void 0,e.top+e.height-s.borderHeight-s.verticalPadding);return{top:c,left:V,fit:O-t.width,maxSizeTop:K,maxSizeBottom:$,minSize:a.with(Math.min(O,a.width))}}(),p=function(){let O=e.left-s.borderWidth-s.horizontalPadding,V=Math.max(s.horizontalPadding,e.left-t.width-s.borderWidth),K=new st(O,n.height-e.top-s.borderHeight-s.verticalPadding),$=K.with(void 0,e.top+e.height-s.borderHeight-s.verticalPadding);return{top:c,left:V,fit:O-t.width,maxSizeTop:K,maxSizeBottom:$,minSize:a.with(Math.min(O,a.width))}}(),g=function(){let O=e.left,V=-s.borderWidth+e.top+e.height,K=new st(e.width-s.borderHeight,n.height-e.top-e.height-s.verticalPadding);return{top:V,left:O,fit:K.height-t.height,maxSizeBottom:K,maxSizeTop:K,minSize:a.with(K.width)}}(),f=[h,p,g],_=(r=f.find(O=>O.fit>=0))!==null&&r!==void 0?r:f.sort((O,V)=>V.fit-O.fit)[0],y=e.top+e.height-s.borderHeight,C,x=t.height,D=Math.max(_.maxSizeTop.height,_.maxSizeBottom.height);x>D&&(x=D);let E;o?x<=_.maxSizeTop.height?(C=!0,E=_.maxSizeTop):(C=!1,E=_.maxSizeBottom):x<=_.maxSizeBottom.height?(C=!1,E=_.maxSizeBottom):(C=!0,E=_.maxSizeTop);let{top:I,left:k}=_;!C&&x>e.height&&(I=y-x);let N=this._editor.getDomNode();if(N){let O=N.getBoundingClientRect();I-=O.top,k-=O.left}this._applyTopLeft({left:k,top:I}),this._resizable.enableSashes(!C,_===h,C,_!==h),this._resizable.minSize=_.minSize,this._resizable.maxSize=E,this._resizable.layout(x,Math.min(E.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this._editor.layoutOverlayWidget(this)}};ze();xi();to();nt();Ss();X();Ci();Jt();Ol();ir();Ci();Vk();var en=function(i){return i[i.FILE=0]="FILE",i[i.FOLDER=1]="FOLDER",i[i.ROOT_FOLDER=2]="ROOT_FOLDER",i}(en||{});to();var a5=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function Nm(i,e,t,o,r){if(je.isThemeIcon(r))return[`codicon-${r.id}`,"predefined-file-icon"];if(We.isUri(r))return[];let n=o===en.ROOT_FOLDER?["rootfolder-icon"]:o===en.FOLDER?["folder-icon"]:["file-icon"];if(t){let s;if(t.scheme===Qt.data)s=sp.parseMetaData(t).get(sp.META_DATA_LABEL);else{let a=t.path.match(a5);a?(s=Wv(a[2].toLowerCase()),a[1]&&n.push(`${Wv(a[1].toLowerCase())}-name-dir-icon`)):s=Wv(t.authority.toLowerCase())}if(o===en.ROOT_FOLDER)n.push(`${s}-root-name-folder-icon`);else if(o===en.FOLDER)n.push(`${s}-name-folder-icon`);else{if(s){if(n.push(`${s}-name-file-icon`),n.push("name-file-icon"),s.length<=255){let c=s.split(".");for(let h=1;h<c.length;h++)n.push(`${c.slice(h).join(".")}-ext-file-icon`)}n.push("ext-file-icon")}let a=l5(i,e,t);a&&n.push(`${Wv(a)}-lang-file-icon`)}}return n}function l5(i,e,t){if(!t)return null;let o=null;if(t.scheme===Qt.data){let n=sp.parseMetaData(t).get(sp.META_DATA_MIME);n&&(o=e.getLanguageIdByMimeType(n))}else{let r=i.getModel(t);r&&(o=r.getLanguageId())}return o&&o!==vf?o:e.guessLanguageIdByFilepathOrFirstLine(t)}function Wv(i){return i.replace(/[\11\12\14\15\40]/g,"/")}hr();Rr();re();Bi();var c5=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},mE=function(i,e){return function(t,o){e(t,o,i)}},tl;function fE(i){return`suggest-aria-id:${i}`}var d5=kt("suggest-more-info",be.chevronRight,b("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),u5=new(tl=class{extract(e,t){if(e.textLabel.match(tl._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(tl._regexStrict))return t[0]=e.completion.detail,!0;if(e.completion.documentation){let o=typeof e.completion.documentation=="string"?e.completion.documentation:e.completion.documentation.value,r=tl._regexRelaxed.exec(o);if(r&&(r.index===0||r.index+r[0].length===o.length))return t[0]=r[0],!0}return!1}},tl._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,tl._regexStrict=new RegExp(`^${tl._regexRelaxed.source}$`,"i"),tl),Hv=class{constructor(e,t,o,r){this._editor=e,this._modelService=t,this._languageService=o,this._themeService=r,this._onDidToggleDetails=new fe,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){let t=new H,o=e;o.classList.add("show-file-icons");let r=Z(e,te(".icon")),n=Z(r,te("span.colorspan")),s=Z(e,te(".contents")),a=Z(s,te(".main")),c=Z(a,te(".icon-label.codicon")),h=Z(a,te("span.left")),p=Z(a,te("span.right")),g=new Zf(h,{supportHighlights:!0,supportIcons:!0});t.add(g);let f=Z(h,te("span.signature-label")),_=Z(h,te("span.qualifier-label")),y=Z(p,te("span.details-label")),C=Z(p,te("span.readMore"+je.asCSSSelector(d5)));return C.title=b("readMore","Read More"),{root:o,left:h,right:p,icon:r,colorspan:n,iconLabel:g,iconContainer:c,parametersLabel:f,qualifierLabel:_,detailsLabel:y,readMore:C,disposables:t,configureFont:()=>{let D=this._editor.getOptions(),E=D.get(50),I=E.getMassagedFontFamily(),k=E.fontFeatureSettings,N=D.get(119)||E.fontSize,O=D.get(120)||E.lineHeight,V=E.fontWeight,K=E.letterSpacing,$=`${N}px`,ae=`${O}px`,q=`${K}px`;o.style.fontSize=$,o.style.fontWeight=V,o.style.letterSpacing=q,a.style.fontFamily=I,a.style.fontFeatureSettings=k,a.style.lineHeight=ae,r.style.height=ae,r.style.width=ae,C.style.height=ae,C.style.width=ae}}}renderElement(e,t,o){o.configureFont();let{completion:r}=e;o.root.id=fE(t),o.colorspan.style.backgroundColor="";let n={labelEscapeNewLines:!0,matches:$l(e.score)},s=[];if(r.kind===19&&u5.extract(e,s))o.icon.className="icon customcolor",o.iconContainer.className="icon hide",o.colorspan.style.backgroundColor=s[0];else if(r.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){o.icon.className="icon hide",o.iconContainer.className="icon hide";let a=Nm(this._modelService,this._languageService,We.from({scheme:"fake",path:e.textLabel}),en.FILE),c=Nm(this._modelService,this._languageService,We.from({scheme:"fake",path:r.detail}),en.FILE);n.extraClasses=a.length>c.length?a:c}else r.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(o.icon.className="icon hide",o.iconContainer.className="icon hide",n.extraClasses=[Nm(this._modelService,this._languageService,We.from({scheme:"fake",path:e.textLabel}),en.FOLDER),Nm(this._modelService,this._languageService,We.from({scheme:"fake",path:r.detail}),en.FOLDER)].flat()):(o.icon.className="icon hide",o.iconContainer.className="",o.iconContainer.classList.add("suggest-icon",...je.asClassNameArray(Bh.toIcon(r.kind))));r.tags&&r.tags.indexOf(1)>=0&&(n.extraClasses=(n.extraClasses||[]).concat(["deprecated"]),n.matches=[]),o.iconLabel.setLabel(e.textLabel,void 0,n),typeof r.label=="string"?(o.parametersLabel.textContent="",o.detailsLabel.textContent=gE(r.detail||""),o.root.classList.add("string-label")):(o.parametersLabel.textContent=gE(r.label.detail||""),o.detailsLabel.textContent=gE(r.label.description||""),o.root.classList.remove("string-label")),this._editor.getOption(118).showInlineDetails?eo(o.detailsLabel):Mi(o.detailsLabel),Lm(e)?(o.right.classList.add("can-expand-details"),eo(o.readMore),o.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},o.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(o.right.classList.remove("can-expand-details"),Mi(o.readMore),o.readMore.onmousedown=null,o.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};Hv=c5([mE(1,Ot),mE(2,pi),mE(3,mi)],Hv);function gE(i){return i.replace(/\r\n|\r|\n/g,"")}var h5=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},jv=function(i,e){return function(t,o){e(t,o,i)}},Ou;ue("editorSuggestWidget.background",{dark:Vl,light:Vl,hcDark:Vl,hcLight:Vl},b("editorSuggestWidgetBackground","Background color of the suggest widget."));ue("editorSuggestWidget.border",{dark:Qh,light:Qh,hcDark:Qh,hcLight:Qh},b("editorSuggestWidgetBorder","Border color of the suggest widget."));var zv=ue("editorSuggestWidget.foreground",{dark:Sn,light:Sn,hcDark:Sn,hcLight:Sn},b("editorSuggestWidgetForeground","Foreground color of the suggest widget."));ue("editorSuggestWidget.selectedForeground",{dark:Ul,light:Ul,hcDark:Ul,hcLight:Ul},b("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget."));ue("editorSuggestWidget.selectedIconForeground",{dark:ip,light:ip,hcDark:ip,hcLight:ip},b("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));var p5=ue("editorSuggestWidget.selectedBackground",{dark:ql,light:ql,hcDark:ql,hcLight:ql},b("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));ue("editorSuggestWidget.highlightForeground",{dark:wn,light:wn,hcDark:wn,hcLight:wn},b("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget."));ue("editorSuggestWidget.focusHighlightForeground",{dark:tp,light:tp,hcDark:tp,hcLight:tp},b("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));ue("editorSuggestWidgetStatus.foreground",{dark:go(zv,.5),light:go(zv,.5),hcDark:go(zv,.5),hcLight:go(zv,.5)},b("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));var _E=class{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof nr}`}restore(){var e;let t=(e=this._service.get(this._key,0))!==null&&e!==void 0?e:"";try{let o=JSON.parse(t);if(st.is(o))return st.lift(o)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}},Ru=Ou=class{constructor(e,t,o,r,n){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._pendingLayout=new Ut,this._pendingShowDetails=new Ut,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new mn,this._disposables=new H,this._onDidSelect=new NC,this._onDidFocus=new NC,this._onDidHide=new fe,this._onDidShow=new fe,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new fe,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new Ua,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new yE(this,e),this._persistedSize=new _E(t,e);class s{constructor(_,y,C=!1,x=!1){this.persistedSize=_,this.currentSize=y,this.persistHeight=C,this.persistWidth=x}}let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new s(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(f=>{var _,y,C,x;if(this._resize(f.dimension.width,f.dimension.height),a&&(a.persistHeight=a.persistHeight||!!f.north||!!f.south,a.persistWidth=a.persistWidth||!!f.east||!!f.west),!!f.done){if(a){let{itemHeight:D,defaultSize:E}=this.getLayoutInfo(),I=Math.round(D/2),{width:k,height:N}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-N)<=I)&&(N=(y=(_=a.persistedSize)===null||_===void 0?void 0:_.height)!==null&&y!==void 0?y:E.height),(!a.persistWidth||Math.abs(a.currentSize.width-k)<=I)&&(k=(x=(C=a.persistedSize)===null||C===void 0?void 0:C.width)!==null&&x!==void 0?x:E.width),this._persistedSize.store(new st(k,N))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=Z(this.element.domNode,te(".message")),this._listElement=Z(this.element.domNode,te(".tree"));let c=this._disposables.add(n.createInstance(Rv,this.editor));c.onDidClose(this.toggleDetails,this,this._disposables),this._details=new Bv(c,this.editor);let h=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(118).showIcons);h();let p=n.createInstance(Hv,this.editor);this._disposables.add(p),this._disposables.add(p.onDidToggleDetails(()=>this.toggleDetails())),this._list=new Fd("SuggestWidget",this._listElement,{getHeight:f=>this.getLayoutInfo().itemHeight,getTemplateId:f=>"suggestion"},[p],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>b("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:f=>{let _=f.textLabel;if(typeof f.completion.label!="string"){let{detail:D,description:E}=f.completion.label;D&&E?_=b("label.full","{0} {1}, {2}",_,D,E):D?_=b("label.detail","{0} {1}",_,D):E&&(_=b("label.desc","{0}, {1}",_,E))}if(!f.isResolved||!this._isDetailsVisible())return _;let{documentation:y,detail:C}=f.completion,x=fd("{0}{1}",C||"",y?typeof y=="string"?y:y.value:"");return b("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",_,x)}}}),this._list.style(Xf({listInactiveFocusBackground:p5,listInactiveFocusOutline:xn})),this._status=n.createInstance(Ov,this.element.domNode,Un);let g=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(118).showStatusBar);g(),this._disposables.add(r.onDidColorThemeChange(f=>this._onThemeChange(f))),this._onThemeChange(r.getColorTheme()),this._disposables.add(this._list.onMouseDown(f=>this._onListMouseDownOrTap(f))),this._disposables.add(this._list.onTap(f=>this._onListMouseDownOrTap(f))),this._disposables.add(this._list.onDidChangeSelection(f=>this._onListSelection(f))),this._disposables.add(this._list.onDidChangeFocus(f=>this._onListFocus(f))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(f=>{f.hasChanged(118)&&(g(),h()),this._completionModel&&(f.hasChanged(50)||f.hasChanged(119)||f.hasChanged(120))&&this._list.splice(0,this._list.length,this._completionModel.items)})),this._ctxSuggestWidgetVisible=Ae.Visible.bindTo(o),this._ctxSuggestWidgetDetailsVisible=Ae.DetailsVisible.bindTo(o),this._ctxSuggestWidgetMultipleSuggestions=Ae.MultipleSuggestions.bindTo(o),this._ctxSuggestWidgetHasFocusedSuggestion=Ae.HasFocusedSuggestion.bindTo(o),this._disposables.add(Qo(this._details.widget.domNode,"keydown",f=>{this._onDetailsKeydown.fire(f)})),this._disposables.add(this.editor.onMouseDown(f=>this._onEditorMouseDown(f)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._pendingLayout.dispose(),this._pendingShowDetails.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){let o=this._completionModel;o&&(this._onDidSelect.fire({item:e,index:t,model:o}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=ys(e.type)?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);return}if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);let o=e.elements[0],r=e.indexes[0];o!==this._focusedItem&&((t=this._currentSuggestionDetails)===null||t===void 0||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=o,this._list.reveal(r),this._currentSuggestionDetails=mt(async n=>{let s=hs(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250),a=n.onCancellationRequested(()=>s.dispose());try{return await o.resolve(n)}finally{s.dispose(),a.dispose()}}),this._currentSuggestionDetails.then(()=>{r>=this._list.length||o!==this._list.element(r)||(this._ignoreFocusEvents=!0,this._list.splice(r,1,[o]),this._list.setFocus([r]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:fE(r)}))}).catch(Fe)),this._onDidFocus.fire({item:o,index:r,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:Mi(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=Ou.LOADING_MESSAGE,Mi(this._listElement,this._status.element),eo(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,Wr(Ou.LOADING_MESSAGE);break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=Ou.NO_SUGGESTIONS_MESSAGE,Mi(this._listElement,this._status.element),eo(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,Wr(Ou.NO_SUGGESTIONS_MESSAGE);break;case 3:Mi(this._messageElement),eo(this._listElement,this._status.element),this._show();break;case 4:Mi(this._messageElement),eo(this._listElement,this._status.element),this._show();break;case 5:Mi(this._messageElement),eo(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=hs(()=>this._setState(1),t)))}showSuggestions(e,t,o,r,n){var s,a;if(this._contentWidget.setPosition(this.editor.getPosition()),(s=this._loadingTimeout)===null||s===void 0||s.dispose(),(a=this._currentSuggestionDetails)===null||a===void 0||a.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),o&&this._state!==2&&this._state!==0){this._setState(4);return}let c=this._completionModel.items.length,h=c===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(c>1),h){this._setState(r?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._onDidFocus.pause(),this._onDidSelect.pause();try{this._list.splice(0,this._list.length,this._completionModel.items),this._setState(o?4:3),this._list.reveal(t,0),this._list.setFocus(n?[]:[t])}finally{this._onDidFocus.resume(),this._onDidSelect.resume()}this._pendingLayout.value=UC(Mr(this.element.domNode),()=>{this._pendingLayout.clear(),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")})}focusSelected(){this._list.length>0&&this._list.setFocus([0])}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel&&this._list.getFocus().length>0)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._pendingShowDetails.clear(),this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(Lm(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._pendingShowDetails.value=UC(Mr(this.element.domNode),()=>{this._pendingShowDetails.clear(),this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._details.widget.isEmpty?this._details.hide():(this._positionDetails(),this.element.domNode.classList.add("shows-details")),this.editor.focus()})}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;this._pendingLayout.clear(),this._pendingShowDetails.clear(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();let t=this._persistedSize.restore(),o=Math.ceil(this.getLayoutInfo().itemHeight*4.3);t&&t.height<o&&this._persistedSize.store(t.with(void 0,o))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&!this._details.widget.isEmpty&&this._details.show(),this._positionDetails())}_layout(e){var t,o,r;if(!this.editor.hasModel()||!this.editor.getDomNode())return;let n=gn(this.element.domNode.ownerDocument.body),s=this.getLayoutInfo();e||(e=s.defaultSize);let a=e.height,c=e.width;if(this._status.element.style.height=`${s.itemHeight}px`,this._state===2||this._state===1)a=s.itemHeight+s.borderHeight,c=s.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new st(c,a),this._contentWidget.setPreference(2);else{let h=n.width-s.borderHeight-2*s.horizontalPadding;c>h&&(c=h);let p=this._completionModel?this._completionModel.stats.pLabelLen*s.typicalHalfwidthCharacterWidth:c,g=s.statusBarHeight+this._list.contentHeight+s.borderHeight,f=s.itemHeight+s.statusBarHeight,_=$t(this.editor.getDomNode()),y=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),C=_.top+y.top+y.height,x=Math.min(n.height-C-s.verticalPadding,g),D=_.top+y.top-s.verticalPadding,E=Math.min(D,g),I=Math.min(Math.max(E,x)+s.borderHeight,g);a===((t=this._cappedHeight)===null||t===void 0?void 0:t.capped)&&(a=this._cappedHeight.wanted),a<f&&(a=f),a>I&&(a=I),a>x||this._forceRenderingAbove&&D>150?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),I=E):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),I=x),this.element.preferredSize=new st(p,s.defaultSize.height),this.element.maxSize=new st(h,I),this.element.minSize=new st(220,f),this._cappedHeight=a===g?{wanted:(r=(o=this._cappedHeight)===null||o===void 0?void 0:o.wanted)!==null&&r!==void 0?r:e.height,capped:a}:void 0}this._resize(c,a)}_resize(e,t){let{width:o,height:r}=this.element.maxSize;e=Math.min(o,e),t=Math.min(r,t);let{statusBarHeight:n}=this.getLayoutInfo();this._list.layout(t-n,e),this._listElement.style.height=`${t-n}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((e=this._contentWidget.getPosition())===null||e===void 0?void 0:e.preference[0])===2)}getLayoutInfo(){let e=this.editor.getOption(50),t=eL(this.editor.getOption(120)||e.lineHeight,8,1e3),o=!this.editor.getOption(118).showStatusBar||this._state===2||this._state===1?0:t,r=this._details.widget.borderWidth,n=2*r;return{itemHeight:t,statusBarHeight:o,borderWidth:r,borderHeight:n,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new st(430,o+12*t+n)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};Ru.LOADING_MESSAGE=b("suggestWidget.loading","Loading...");Ru.NO_SUGGESTIONS_MESSAGE=b("suggestWidget.noSuggestions","No suggestions.");Ru=Ou=h5([jv(1,To),jv(2,ve),jv(3,mi),jv(4,ce)],Ru);var yE=class{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){let{height:e,width:t}=this._widget.element.size,{borderWidth:o,horizontalPadding:r}=this._widget.getLayoutInfo();return new st(t+2*o+r,e+2*o)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}};mr();ir();Dk();ze();gi();var m5=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Bu=function(i,e){return function(t,o){e(t,o,i)}},vE,g5=!1,bE=class{constructor(e,t){if(this._model=e,this._position=t,this._decorationOptions=ke.register({description:"suggest-line-suffix",stickiness:1}),e.getLineMaxColumn(t.lineNumber)!==t.column){let r=e.getOffsetAt(t),n=e.getPositionAt(r+1);e.changeDecorations(s=>{this._marker&&s.removeDecoration(this._marker),this._marker=s.addDecoration(T.fromPositions(t,n),this._decorationOptions)})}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.changeDecorations(e=>{e.removeDecoration(this._marker),this._marker=void 0})}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){let t=this._model.getDecorationRange(this._marker);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}},cr=vE=class{static get(e){return e.getContribution(vE.ID)}constructor(e,t,o,r,n,s,a){this._memoryService=t,this._commandService=o,this._contextKeyService=r,this._instantiationService=n,this._logService=s,this._telemetryService=a,this._lineSuffix=new Ut,this._toDispose=new H,this._selectors=new DE(g=>g.priority),this._onWillInsertSuggestItem=new fe,this.onWillInsertSuggestItem=this._onWillInsertSuggestItem.event,this.editor=e,this.model=n.createInstance(Mu,this.editor),this._selectors.register({priority:0,select:(g,f,_)=>this._memoryService.select(g,f,_)});let c=Ae.InsertMode.bindTo(r);c.set(e.getOption(118).insertMode),this._toDispose.add(this.model.onDidTrigger(()=>c.set(e.getOption(118).insertMode))),this.widget=this._toDispose.add(new hf(Mr(e.getDomNode()),()=>{let g=this._instantiationService.createInstance(Ru,this.editor);this._toDispose.add(g),this._toDispose.add(g.onDidSelect(x=>this._insertSuggestion(x,0),this));let f=new Nv(this.editor,g,this.model,x=>this._insertSuggestion(x,2));this._toDispose.add(f);let _=Ae.MakesTextEdit.bindTo(this._contextKeyService),y=Ae.HasInsertAndReplaceRange.bindTo(this._contextKeyService),C=Ae.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(Ve(()=>{_.reset(),y.reset(),C.reset()})),this._toDispose.add(g.onDidFocus(({item:x})=>{let D=this.editor.getPosition(),E=x.editStart.column,I=D.column,k=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!x.completion.additionalTextEdits&&!(x.completion.insertTextRules&4)&&I-E===x.completion.insertText.length&&(k=this.editor.getModel().getValueInRange({startLineNumber:D.lineNumber,startColumn:E,endLineNumber:D.lineNumber,endColumn:I})!==x.completion.insertText),_.set(k),y.set(!Y.equals(x.editInsertEnd,x.editReplaceEnd)),C.set(!!x.provider.resolveCompletionItem||!!x.completion.documentation||x.completion.detail!==x.completion.label)})),this._toDispose.add(g.onDetailsKeyDown(x=>{if(x.toKeyCodeChord().equals(new VC(!0,!1,!1,!1,33))||po&&x.toKeyCodeChord().equals(new VC(!1,!1,!1,!0,33))){x.stopPropagation();return}x.toKeyCodeChord().isModifierKey()||this.editor.focus()})),g})),this._overtypingCapturer=this._toDispose.add(new hf(Mr(e.getDomNode()),()=>this._toDispose.add(new Q2(this.editor,this.model)))),this._alternatives=this._toDispose.add(new hf(Mr(e.getDomNode()),()=>this._toDispose.add(new Qa(this.editor,this._contextKeyService)))),this._toDispose.add(n.createInstance(Lu,e)),this._toDispose.add(this.model.onDidTrigger(g=>{this.widget.value.showTriggered(g.auto,g.shy?250:50),this._lineSuffix.value=new bE(this.editor.getModel(),g.position)})),this._toDispose.add(this.model.onDidSuggest(g=>{if(g.triggerOptions.shy)return;let f=-1;for(let y of this._selectors.itemsOrderedByPriorityDesc)if(f=y.select(this.editor.getModel(),this.editor.getPosition(),g.completionModel.items),f!==-1)break;if(f===-1&&(f=0),this.model.state===0)return;let _=!1;if(g.triggerOptions.auto){let y=this.editor.getOption(118);y.selectionMode==="never"||y.selectionMode==="always"?_=y.selectionMode==="never":y.selectionMode==="whenTriggerCharacter"?_=g.triggerOptions.triggerKind!==1:y.selectionMode==="whenQuickSuggestion"&&(_=g.triggerOptions.triggerKind===1&&!g.triggerOptions.refilter)}this.widget.value.showSuggestions(g.completionModel,f,g.isFrozen,g.triggerOptions.auto,_)})),this._toDispose.add(this.model.onDidCancel(g=>{g.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{g5||(this.model.cancel(),this.model.clear())}));let h=Ae.AcceptSuggestionsOnEnter.bindTo(r),p=()=>{let g=this.editor.getOption(1);h.set(g==="on"||g==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>p())),p()}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose(),this._onWillInsertSuggestItem.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;let o=ti.get(this.editor);if(!o)return;this._onWillInsertSuggestItem.fire({item:e.item});let r=this.editor.getModel(),n=r.getAlternativeVersionId(),{item:s}=e,a=[],c=new _t;t&1||this.editor.pushUndoStop();let h=this.getOverwriteInfo(s,!!(t&8));this._memoryService.memorize(r,this.editor.getPosition(),s);let p=s.isResolved,g=-1,f=-1;if(Array.isArray(s.completion.additionalTextEdits)){this.model.cancel();let y=Tn.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",s.completion.additionalTextEdits.map(C=>{let x=T.lift(C.range);if(x.startLineNumber===s.position.lineNumber&&x.startColumn>s.position.column){let D=this.editor.getPosition().column-s.position.column,E=D,I=T.spansMultipleLines(x)?0:D;x=new T(x.startLineNumber,x.startColumn+E,x.endLineNumber,x.endColumn+I)}return ct.replaceMove(x,C.text)})),y.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!p){let y=new qt,C,x=r.onDidChangeContent(k=>{if(k.isFlush){c.cancel(),x.dispose();return}for(let N of k.changes){let O=T.getEndPosition(N.range);(!C||Y.isBefore(O,C))&&(C=O)}}),D=t;t|=2;let E=!1,I=this.editor.onWillType(()=>{I.dispose(),E=!0,D&2||this.editor.pushUndoStop()});a.push(s.resolve(c.token).then(()=>{if(!s.completion.additionalTextEdits||c.token.isCancellationRequested)return;if(C&&s.completion.additionalTextEdits.some(N=>Y.isBefore(C,T.getStartPosition(N.range))))return!1;E&&this.editor.pushUndoStop();let k=Tn.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",s.completion.additionalTextEdits.map(N=>ct.replaceMove(T.lift(N.range),N.text))),k.restoreRelativeVerticalPositionOfCursor(this.editor),(E||!(D&2))&&this.editor.pushUndoStop(),!0}).then(k=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",y.elapsed(),k),f=k===!0?1:k===!1?0:-2}).finally(()=>{x.dispose(),I.dispose()}))}let{insertText:_}=s.completion;if(s.completion.insertTextRules&4||(_=Io.escape(_)),this.model.cancel(),o.insert(_,{overwriteBefore:h.overwriteBefore,overwriteAfter:h.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(s.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),s.completion.command)if(s.completion.command.id===Z2.id)this.model.trigger({auto:!0,retrigger:!0});else{let y=new qt;a.push(this._commandService.executeCommand(s.completion.command.id,...s.completion.command.arguments?[...s.completion.command.arguments]:[]).catch(C=>{s.completion.extensionId?$e(C):Fe(C)}).finally(()=>{g=y.elapsed()}))}t&4&&this._alternatives.value.set(e,y=>{for(c.cancel();r.canUndo();){n!==r.getAlternativeVersionId()&&r.undo(),this._insertSuggestion(y,3|(t&8?8:0));break}}),this._alertCompletionItem(s),Promise.all(a).finally(()=>{this._reportSuggestionAcceptedTelemetry(s,r,p,g,f),this.model.clear(),c.dispose()})}_reportSuggestionAcceptedTelemetry(e,t,o,r,n){var s,a,c;Math.floor(Math.random()*100)!==0&&this._telemetryService.publicLog2("suggest.acceptedSuggestion",{extensionId:(a=(s=e.extensionId)===null||s===void 0?void 0:s.value)!==null&&a!==void 0?a:"unknown",providerId:(c=e.provider._debugDisplayName)!==null&&c!==void 0?c:"unknown",kind:e.completion.kind,basenameHash:uf(fo(t.uri)).toString(16),languageId:t.getLanguageId(),fileExtension:JF(t.uri),resolveInfo:e.provider.resolveCompletionItem?o?1:0:-1,resolveDuration:e.resolveDuration,commandDuration:r,additionalEditsAsync:n})}getOverwriteInfo(e,t){He(this.editor.hasModel());let o=this.editor.getOption(118).insertMode==="replace";t&&(o=!o);let r=e.position.column-e.editStart.column,n=(o?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,s=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:r+s,overwriteAfter:n+a}}_alertCompletionItem(e){if(zt(e.completion.additionalTextEdits)){let t=b("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);ai(t)}}triggerSuggest(e,t,o){this.editor.hasModel()&&(this.model.trigger({auto:t??!1,completionOptions:{providerFilter:e,kindFilter:o?new Set:void 0}}),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;let t=this.editor.getPosition(),o=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},r=n=>{if(n.completion.insertTextRules&4||n.completion.additionalTextEdits)return!0;let s=this.editor.getPosition(),a=n.editStart.column,c=s.column;return c-a!==n.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:s.lineNumber,startColumn:a,endLineNumber:s.lineNumber,endColumn:c})!==n.completion.insertText};ft.once(this.model.onDidTrigger)(n=>{let s=[];ft.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{Vt(s),o()},void 0,s),this.model.onDidSuggest(({completionModel:a})=>{if(Vt(s),a.items.length===0){o();return}let c=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),h=a.items[c];if(!r(h)){o();return}this.editor.pushUndoStop(),this._insertSuggestion({index:c,item:h,model:a},7)},void 0,s)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){let o=this.widget.value.getFocusedItem(),r=0;e&&(r|=4),t&&(r|=8),this._insertSuggestion(o,r)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}focusSuggestion(){this.widget.value.focusSelected()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}};cr.ID="editor.contrib.suggestController";cr=vE=m5([Bu(1,Fu),Bu(2,ht),Bu(3,ve),Bu(4,ce),Bu(5,er),Bu(6,Zt)],cr);var DE=class{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,o)=>this.prioritySelector(o)-this.prioritySelector(t)),{dispose:()=>{let t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}},Z2=(()=>{class i extends j{constructor(){super({id:i.id,label:b("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:W.and(A.writable,A.hasCompletionItemProvider,Ae.Visible.toNegated()),kbOpts:{kbExpr:A.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(t,o,r){let n=cr.get(o);if(!n)return;let s;r&&typeof r=="object"&&r.auto===!0&&(s=!0),n.triggerSuggest(void 0,s,void 0)}}return i.id="editor.action.triggerSuggest",i})();le(cr.ID,cr,2);M(Z2);var jo=190,ro=Bt.bindToContribution(cr.get);de(new ro({id:"acceptSelectedSuggestion",precondition:W.and(Ae.Visible,Ae.HasFocusedSuggestion),handler(i){i.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:W.and(Ae.Visible,A.textInputFocus),weight:jo},{primary:3,kbExpr:W.and(Ae.Visible,A.textInputFocus,Ae.AcceptSuggestionsOnEnter,Ae.MakesTextEdit),weight:jo}],menuOpts:[{menuId:Un,title:b("accept.insert","Insert"),group:"left",order:1,when:Ae.HasInsertAndReplaceRange.toNegated()},{menuId:Un,title:b("accept.insert","Insert"),group:"left",order:1,when:W.and(Ae.HasInsertAndReplaceRange,Ae.InsertMode.isEqualTo("insert"))},{menuId:Un,title:b("accept.replace","Replace"),group:"left",order:1,when:W.and(Ae.HasInsertAndReplaceRange,Ae.InsertMode.isEqualTo("replace"))}]}));de(new ro({id:"acceptAlternativeSelectedSuggestion",precondition:W.and(Ae.Visible,A.textInputFocus,Ae.HasFocusedSuggestion),kbOpts:{weight:jo,kbExpr:A.textInputFocus,primary:1027,secondary:[1026]},handler(i){i.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:Un,group:"left",order:2,when:W.and(Ae.HasInsertAndReplaceRange,Ae.InsertMode.isEqualTo("insert")),title:b("accept.replace","Replace")},{menuId:Un,group:"left",order:2,when:W.and(Ae.HasInsertAndReplaceRange,Ae.InsertMode.isEqualTo("replace")),title:b("accept.insert","Insert")}]}));Ue.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");de(new ro({id:"hideSuggestWidget",precondition:Ae.Visible,handler:i=>i.cancelSuggestWidget(),kbOpts:{weight:jo,kbExpr:A.textInputFocus,primary:9,secondary:[1033]}}));de(new ro({id:"selectNextSuggestion",precondition:W.and(Ae.Visible,W.or(Ae.MultipleSuggestions,Ae.HasFocusedSuggestion.negate())),handler:i=>i.selectNextSuggestion(),kbOpts:{weight:jo,kbExpr:A.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));de(new ro({id:"selectNextPageSuggestion",precondition:W.and(Ae.Visible,W.or(Ae.MultipleSuggestions,Ae.HasFocusedSuggestion.negate())),handler:i=>i.selectNextPageSuggestion(),kbOpts:{weight:jo,kbExpr:A.textInputFocus,primary:12,secondary:[2060]}}));de(new ro({id:"selectLastSuggestion",precondition:W.and(Ae.Visible,W.or(Ae.MultipleSuggestions,Ae.HasFocusedSuggestion.negate())),handler:i=>i.selectLastSuggestion()}));de(new ro({id:"selectPrevSuggestion",precondition:W.and(Ae.Visible,W.or(Ae.MultipleSuggestions,Ae.HasFocusedSuggestion.negate())),handler:i=>i.selectPrevSuggestion(),kbOpts:{weight:jo,kbExpr:A.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));de(new ro({id:"selectPrevPageSuggestion",precondition:W.and(Ae.Visible,W.or(Ae.MultipleSuggestions,Ae.HasFocusedSuggestion.negate())),handler:i=>i.selectPrevPageSuggestion(),kbOpts:{weight:jo,kbExpr:A.textInputFocus,primary:11,secondary:[2059]}}));de(new ro({id:"selectFirstSuggestion",precondition:W.and(Ae.Visible,W.or(Ae.MultipleSuggestions,Ae.HasFocusedSuggestion.negate())),handler:i=>i.selectFirstSuggestion()}));de(new ro({id:"focusSuggestion",precondition:W.and(Ae.Visible,Ae.HasFocusedSuggestion.negate()),handler:i=>i.focusSuggestion(),kbOpts:{weight:jo,kbExpr:A.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}}}));de(new ro({id:"focusAndAcceptSuggestion",precondition:W.and(Ae.Visible,Ae.HasFocusedSuggestion.negate()),handler:i=>{i.focusSuggestion(),i.acceptSelectedSuggestion(!0,!1)}}));de(new ro({id:"toggleSuggestionDetails",precondition:W.and(Ae.Visible,Ae.HasFocusedSuggestion),handler:i=>i.toggleSuggestionDetails(),kbOpts:{weight:jo,kbExpr:A.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:Un,group:"right",order:1,when:W.and(Ae.DetailsVisible,Ae.CanResolve),title:b("detail.more","show less")},{menuId:Un,group:"right",order:1,when:W.and(Ae.DetailsVisible.toNegated(),Ae.CanResolve),title:b("detail.less","show more")}]}));de(new ro({id:"toggleExplainMode",precondition:Ae.Visible,handler:i=>i.toggleExplainMode(),kbOpts:{weight:100,primary:2138}}));de(new ro({id:"toggleSuggestionFocus",precondition:Ae.Visible,handler:i=>i.toggleSuggestionFocus(),kbOpts:{weight:jo,kbExpr:A.textInputFocus,primary:2570,mac:{primary:778}}}));de(new ro({id:"insertBestCompletion",precondition:W.and(A.textInputFocus,W.equals("config.editor.tabCompletion","on"),Lu.AtEnd,Ae.Visible.toNegated(),Qa.OtherSuggestions.toNegated(),ti.InSnippetMode.toNegated()),handler:(i,e)=>{i.triggerSuggestAndAcceptBest(Zg(e)?U({fallback:"tab"},e):{fallback:"tab"})},kbOpts:{weight:jo,primary:2}}));de(new ro({id:"insertNextSuggestion",precondition:W.and(A.textInputFocus,W.equals("config.editor.tabCompletion","on"),Qa.OtherSuggestions,Ae.Visible.toNegated(),ti.InSnippetMode.toNegated()),handler:i=>i.acceptNextSuggestion(),kbOpts:{weight:jo,kbExpr:A.textInputFocus,primary:2}}));de(new ro({id:"insertPrevSuggestion",precondition:W.and(A.textInputFocus,W.equals("config.editor.tabCompletion","on"),Qa.OtherSuggestions,Ae.Visible.toNegated(),ti.InSnippetMode.toNegated()),handler:i=>i.acceptPrevSuggestion(),kbOpts:{weight:jo,kbExpr:A.textInputFocus,primary:1026}}));M(class extends j{constructor(){super({id:"editor.action.resetSuggestSize",label:b("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(i,e){var t;(t=cr.get(e))===null||t===void 0||t.resetWidgetSize()}});Ao();bt();$h();var Vv=class extends B{get selectedItem(){return this._selectedItem}constructor(e,t,o,r){super(),this.editor=e,this.suggestControllerPreselector=t,this.checkModelVersion=o,this.onWillAccept=r,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this._selectedItem=oo(this,void 0),this._register(e.onKeyDown(s=>{s.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(s=>{s.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));let n=cr.get(this.editor);if(n){this._register(n.registerSelector({priority:100,select:(c,h,p)=>{wi(D=>this.checkModelVersion(D));let g=this.editor.getModel();if(!g)return-1;let f=this.suggestControllerPreselector(),_=f?zn(f,g):void 0;if(!_)return-1;let y=Y.lift(h),C=p.map((D,E)=>{let I=Mm.fromSuggestion(n,g,y,D,this.isShiftKeyPressed),k=zn(I.toSingleTextEdit(),g),N=Ev(_,k);return{index:E,valid:N,prefixLength:k.text.length,suggestItem:D}}).filter(D=>D&&D.valid&&D.prefixLength>0),x=Jk(C,Fl(D=>D.prefixLength,Ll));return x?x.index:-1}}));let s=!1,a=()=>{s||(s=!0,this._register(n.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(n.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.update(!1)})),this._register(n.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(ft.once(n.model.onDidTrigger)(c=>{a()})),this._register(n.onWillInsertSuggestItem(c=>{let h=this.editor.getPosition(),p=this.editor.getModel();if(!h||!p)return;let g=Mm.fromSuggestion(n,p,h,c.item,this.isShiftKeyPressed);this.onWillAccept(g)}))}this.update(this._isActive)}update(e){let t=this.getSuggestItemInfo();(this._isActive!==e||!f5(this._currentSuggestItemInfo,t))&&(this._isActive=e,this._currentSuggestItemInfo=t,wi(o=>{this.checkModelVersion(o),this._selectedItem.set(this._isActive?this._currentSuggestItemInfo:void 0,o)}))}getSuggestItemInfo(){let e=cr.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;let t=e.widget.value.getFocusedItem(),o=this.editor.getPosition(),r=this.editor.getModel();if(!(!t||!o||!r))return Mm.fromSuggestion(e,r,o,t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){let e=cr.get(this.editor);e?.stopForceRenderingAbove()}forceRenderingAbove(){let e=cr.get(this.editor);e?.forceRenderingAbove()}},Mm=class i{static fromSuggestion(e,t,o,r,n){let{insertText:s}=r.completion,a=!1;if(r.completion.insertTextRules&4){let h=new Io().parse(s);h.children.length<100&&Pu.adjustWhitespace(t,o,!0,h),s=h.toString(),a=!0}let c=e.getOverwriteInfo(r,n);return new i(T.fromPositions(o.delta(0,-c.overwriteBefore),o.delta(0,Math.max(c.overwriteAfter,0))),s,r.completion.kind,a)}constructor(e,t,o,r){this.range=e,this.insertText=t,this.completionItemKind=o,this.isSnippetText=r}equals(e){return this.range.equalsRange(e.range)&&this.insertText===e.insertText&&this.completionItemKind===e.completionItemKind&&this.isSnippetText===e.isSnippetText}toSelectedSuggestionInfo(){return new ZP(this.range,this.insertText,this.completionItemKind,this.isSnippetText)}toSingleTextEdit(){return new tr(this.range,this.insertText)}};function f5(i,e){return i===e?!0:!i||!e?!1:i.equals(e)}re();Rt();ei();Me();Je();var _5=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},qs=function(i,e){return function(t,o){e(t,o,i)}},CE,no=CE=class extends B{static get(e){return e.getContribution(CE.ID)}constructor(e,t,o,r,n,s,a,c,h,p){super(),this.editor=e,this._instantiationService=t,this._contextKeyService=o,this._configurationService=r,this._commandService=n,this._debounceService=s,this._languageFeaturesService=a,this._accessibilitySignalService=c,this._keybindingService=h,this._accessibilityService=p,this.model=this._register(Jl("inlineCompletionModel",void 0)),this._textModelVersionId=oo(this,-1),this._positions=ML({owner:this,equalsFn:up(Gf())},[new Y(1,1)]),this._suggestWidgetAdaptor=this._register(new Vv(this.editor,()=>{var C,x;return(x=(C=this.model.get())===null||C===void 0?void 0:C.selectedInlineCompletion.get())===null||x===void 0?void 0:x.toSingleTextEdit(void 0)},C=>this.updateObservables(C,Ho.Other),C=>{wi(x=>{var D;this.updateObservables(x,Ho.Other),(D=this.model.get())===null||D===void 0||D.handleSuggestAccepted(C)})})),this._enabledInConfig=ci(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).enabled),this._isScreenReaderEnabled=ci(this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this._editorDictationInProgress=ci(this._contextKeyService.onDidChangeContext,()=>this._contextKeyService.getContext(this.editor.getDomNode()).getValue("editorDictation.inProgress")===!0),this._enabled=Ei(this,C=>this._enabledInConfig.read(C)&&(!this._isScreenReaderEnabled.read(C)||!this._editorDictationInProgress.read(C))),this._fontFamily=ci(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).fontFamily),this._ghostTexts=Ei(this,C=>{var x;let D=this.model.read(C);return(x=D?.ghostTexts.read(C))!==null&&x!==void 0?x:[]}),this._stablizedGhostTexts=y5(this._ghostTexts,this._store),this._ghostTextWidgets=VL(this,this._stablizedGhostTexts,(C,x)=>x.add(this._instantiationService.createInstance(wv,this.editor,{ghostText:C,minReservedLineCount:jr(0),targetTextModel:this.model.map(D=>D?.textModel)}))).recomputeInitiallyAndOnChange(this._store),this._debounceValue=this._debounceService.for(this._languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),this._playAccessibilitySignal=Jf(this),this._isReadonly=ci(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(91)),this._textModel=ci(this.editor.onDidChangeModel,()=>this.editor.getModel()),this._textModelIfWritable=Ei(C=>this._isReadonly.read(C)?void 0:this._textModel.read(C)),this._register(new _i(this._contextKeyService,this.model)),this._register(Lt(C=>{let x=this._textModelIfWritable.read(C);wi(D=>{if(this.model.set(void 0,D),this.updateObservables(D,Ho.Other),x){let E=t.createInstance(Fv,x,this._suggestWidgetAdaptor.selectedItem,this._textModelVersionId,this._positions,this._debounceValue,ci(e.onDidChangeConfiguration,()=>e.getOption(118).preview),ci(e.onDidChangeConfiguration,()=>e.getOption(118).previewMode),ci(e.onDidChangeConfiguration,()=>e.getOption(62).mode),this._enabled);this.model.set(E,D)}})}));let g=this._register(mf());this._register(Lt(C=>{let x=this._fontFamily.read(C);g.setStyle(x===""||x==="default"?"":`
.monaco-editor .ghost-text-decoration,
.monaco-editor .ghost-text-decoration-preview,
.monaco-editor .ghost-text {
	font-family: ${x};
}`)}));let f=C=>{var x;return C.isUndoing?Ho.Undo:C.isRedoing?Ho.Redo:!((x=this.model.get())===null||x===void 0)&&x.isAcceptingPartially?Ho.AcceptWord:Ho.Other};this._register(e.onDidChangeModelContent(C=>wi(x=>this.updateObservables(x,f(C))))),this._register(e.onDidChangeCursorPosition(C=>wi(x=>{var D;this.updateObservables(x,Ho.Other),(C.reason===3||C.source==="api")&&((D=this.model.get())===null||D===void 0||D.stop(x))}))),this._register(e.onDidType(()=>wi(C=>{var x;this.updateObservables(C,Ho.Other),this._enabled.get()&&((x=this.model.get())===null||x===void 0||x.trigger(C))}))),this._register(this._commandService.onDidExecuteCommand(C=>{new Set([Sd.Tab.id,Sd.DeleteLeft.id,Sd.DeleteRight.id,hy,"acceptSelectedSuggestion"]).has(C.commandId)&&e.hasTextFocus()&&this._enabled.get()&&wi(D=>{var E;(E=this.model.get())===null||E===void 0||E.trigger(D)})})),this._register(this.editor.onDidBlurEditorWidget(()=>{this._contextKeyService.getContextKeyValue("accessibleViewIsShown")||this._configurationService.getValue("editor.inlineSuggest.keepOnBlur")||e.getOption(62).keepOnBlur||Gr.dropDownVisible||wi(C=>{var x;(x=this.model.get())===null||x===void 0||x.stop(C)})})),this._register(Lt(C=>{var x;let D=(x=this.model.read(C))===null||x===void 0?void 0:x.state.read(C);D?.suggestItem?D.primaryGhostText.lineCount>=2&&this._suggestWidgetAdaptor.forceRenderingAbove():this._suggestWidgetAdaptor.stopForceRenderingAbove()})),this._register(Ve(()=>{this._suggestWidgetAdaptor.stopForceRenderingAbove()}));let _=this._register(new H),y;this._register(HL({handleChange:(C,x)=>(C.didChange(this._playAccessibilitySignal)&&(y=void 0),!0)},async(C,x)=>{this._playAccessibilitySignal.read(C);let D=this.model.read(C),E=D?.state.read(C);if(!D||!E||!E.inlineCompletion){y=void 0;return}if(E.inlineCompletion.semanticId!==y){_.clear(),y=E.inlineCompletion.semanticId;let I=D.textModel.getLineContent(E.primaryGhostText.lineNumber);await xa(50,MC(_)),await UL(this._suggestWidgetAdaptor.selectedItem,Nl,()=>!1,MC(_)),await this._accessibilitySignalService.playSignal(r_.inlineSuggestion),this.editor.getOption(8)&&this.provideScreenReaderUpdate(E.primaryGhostText.renderForScreenReader(I))}})),this._register(new fy(this.editor,this.model,this._instantiationService)),this._register(this._configurationService.onDidChangeConfiguration(C=>{C.affectsConfiguration("accessibility.verbosity.inlineCompletions")&&this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})})),this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})}playAccessibilitySignal(e){this._playAccessibilitySignal.trigger(e)}provideScreenReaderUpdate(e){let t=this._contextKeyService.getContextKeyValue("accessibleViewIsShown"),o=this._keybindingService.lookupKeybinding("editor.action.accessibleView"),r;!t&&o&&this.editor.getOption(149)&&(r=b("showAccessibleViewHint","Inspect this in the accessible view ({0})",o.getAriaLabel())),r?ai(e+", "+r):ai(e)}updateObservables(e,t){var o,r,n;let s=this.editor.getModel();this._textModelVersionId.set((o=s?.getVersionId())!==null&&o!==void 0?o:-1,e,t),this._positions.set((n=(r=this.editor.getSelections())===null||r===void 0?void 0:r.map(a=>a.getPosition()))!==null&&n!==void 0?n:[new Y(1,1)],e)}shouldShowHoverAt(e){var t;let o=(t=this.model.get())===null||t===void 0?void 0:t.primaryGhostText.get();return o?o.parts.some(r=>e.containsPosition(new Y(o.lineNumber,r.column))):!1}shouldShowHoverAtViewZone(e){var t,o;return(o=(t=this._ghostTextWidgets.get()[0])===null||t===void 0?void 0:t.ownsViewZone(e))!==null&&o!==void 0?o:!1}};no.ID="editor.contrib.inlineCompletionsController";no=CE=_5([qs(1,ce),qs(2,ve),qs(3,Oe),qs(4,ht),qs(5,li),qs(6,J),qs(7,o_),qs(8,qe),qs(9,Ia)],no);function y5(i,e){let t=oo("result",[]),o=[];return e.add(Lt(r=>{let n=i.read(r);wi(s=>{if(n.length!==o.length){o.length=n.length;for(let a=0;a<o.length;a++)o[a]||(o[a]=oo("item",n[a]));t.set([...o],s)}o.forEach((a,c)=>a.set(n[c],s))})})),t}re();Wt();ei();Me();var eO=(()=>{class i extends j{constructor(){super({id:i.ID,label:b("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:W.and(A.writable,_i.inlineSuggestionVisible),kbOpts:{weight:100,primary:606}})}async run(t,o){var r;let n=no.get(o);(r=n?.model.get())===null||r===void 0||r.next()}}return i.ID=my,i})(),tO=(()=>{class i extends j{constructor(){super({id:i.ID,label:b("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:W.and(A.writable,_i.inlineSuggestionVisible),kbOpts:{weight:100,primary:604}})}async run(t,o){var r;let n=no.get(o);(r=n?.model.get())===null||r===void 0||r.previous()}}return i.ID=py,i})(),Uv=class extends j{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:b("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:A.writable})}async run(e,t){let o=no.get(t);await NL(async r=>{var n;await((n=o?.model.get())===null||n===void 0?void 0:n.triggerExplicitly(r)),o?.playAccessibilitySignal(r)})}},qv=class extends j{constructor(){super({id:"editor.action.inlineSuggest.acceptNextWord",label:b("action.inlineSuggest.acceptNextWord","Accept Next Word Of Inline Suggestion"),alias:"Accept Next Word Of Inline Suggestion",precondition:W.and(A.writable,_i.inlineSuggestionVisible),kbOpts:{weight:101,primary:2065,kbExpr:W.and(A.writable,_i.inlineSuggestionVisible)},menuOpts:[{menuId:Q.InlineSuggestionToolbar,title:b("acceptWord","Accept Word"),group:"primary",order:2}]})}async run(e,t){var o;let r=no.get(t);await((o=r?.model.get())===null||o===void 0?void 0:o.acceptNextWord(r.editor))}},Kv=class extends j{constructor(){super({id:"editor.action.inlineSuggest.acceptNextLine",label:b("action.inlineSuggest.acceptNextLine","Accept Next Line Of Inline Suggestion"),alias:"Accept Next Line Of Inline Suggestion",precondition:W.and(A.writable,_i.inlineSuggestionVisible),kbOpts:{weight:101},menuOpts:[{menuId:Q.InlineSuggestionToolbar,title:b("acceptLine","Accept Line"),group:"secondary",order:2}]})}async run(e,t){var o;let r=no.get(t);await((o=r?.model.get())===null||o===void 0?void 0:o.acceptNextLine(r.editor))}},$v=class extends j{constructor(){super({id:hy,label:b("action.inlineSuggest.accept","Accept Inline Suggestion"),alias:"Accept Inline Suggestion",precondition:_i.inlineSuggestionVisible,menuOpts:[{menuId:Q.InlineSuggestionToolbar,title:b("accept","Accept"),group:"primary",order:1}],kbOpts:{primary:2,weight:200,kbExpr:W.and(_i.inlineSuggestionVisible,A.tabMovesFocus.toNegated(),_i.inlineSuggestionHasIndentationLessThanTabSize,Ae.Visible.toNegated(),A.hoverFocused.toNegated())}})}async run(e,t){var o;let r=no.get(t);r&&((o=r.model.get())===null||o===void 0||o.accept(r.editor),r.editor.focus())}},iO=(()=>{class i extends j{constructor(){super({id:i.ID,label:b("action.inlineSuggest.hide","Hide Inline Suggestion"),alias:"Hide Inline Suggestion",precondition:_i.inlineSuggestionVisible,kbOpts:{weight:100,primary:9}})}async run(t,o){let r=no.get(o);wi(n=>{var s;(s=r?.model.get())===null||s===void 0||s.stop(n)})}}return i.ID="editor.action.inlineSuggest.hide",i})(),oO=(()=>{class i extends hi{constructor(){super({id:i.ID,title:b("action.inlineSuggest.alwaysShowToolbar","Always Show Toolbar"),f1:!1,precondition:void 0,menu:[{id:Q.InlineSuggestionToolbar,group:"secondary",order:10}],toggled:W.equals("config.editor.inlineSuggest.showToolbar","always")})}async run(t,o){let r=t.get(Oe),s=r.getValue("editor.inlineSuggest.showToolbar")==="always"?"onHover":"always";r.updateValue("editor.inlineSuggest.showToolbar",s)}}return i.ID="editor.action.inlineSuggest.toggleAlwaysShowToolbar",i})();ze();yr();X();Ao();ge();Rr();re();Je();mr();var v5=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Om=function(i,e){return function(t,o){e(t,o,i)}},xE=class{constructor(e,t,o){this.owner=e,this.range=t,this.controller=o}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}},Gv=class{constructor(e,t,o,r,n,s){this._editor=e,this._languageService=t,this._openerService=o,this.accessibilityService=r,this._instantiationService=n,this._telemetryService=s,this.hoverOrdinal=4}suggestHoverAnchor(e){let t=no.get(this._editor);if(!t)return null;let o=e.target;if(o.type===8){let r=o.detail;if(t.shouldShowHoverAtViewZone(r.viewZoneId))return new xr(1e3,this,T.fromPositions(this._editor.getModel().validatePosition(r.positionBefore||r.position)),e.event.posx,e.event.posy,!1)}return o.type===7&&t.shouldShowHoverAt(o.range)?new xr(1e3,this,o.range,e.event.posx,e.event.posy,!1):o.type===6&&o.detail.mightBeForeignElement&&t.shouldShowHoverAt(o.range)?new xr(1e3,this,o.range,e.event.posx,e.event.posy,!1):null}computeSync(e,t){if(this._editor.getOption(62).showToolbar!=="onHover")return[];let o=no.get(this._editor);return o&&o.shouldShowHoverAt(e.range)?[new xE(this,e.range,o)]:[]}renderHoverParts(e,t){let o=new H,r=t[0];this._telemetryService.publicLog2("inlineCompletionHover.shown"),this.accessibilityService.isScreenReaderOptimized()&&!this._editor.getOption(8)&&this.renderScreenReaderText(e,r,o);let n=r.controller.model.get(),s=this._instantiationService.createInstance(Gr,this._editor,!1,jr(null),n.selectedInlineCompletionIndex,n.inlineCompletionsCount,n.activeCommands);return e.fragment.appendChild(s.getDomNode()),n.triggerExplicitly(),o.add(s),o}renderScreenReaderText(e,t,o){let r=te,n=r("div.hover-row.markdown-hover"),s=Z(n,r("div.hover-contents",{"aria-live":"assertive"})),a=o.add(new vr({editor:this._editor},this._languageService,this._openerService)),c=h=>{o.add(a.onDidRenderAsync(()=>{s.className="hover-contents code-hover-contents",e.onContentsChanged()}));let p=b("inlineSuggestionFollows","Suggestion:"),g=o.add(a.render(new Gt().appendText(p).appendCodeblock("text",h)));s.replaceChildren(g.element)};o.add(Lt(h=>{var p;let g=(p=t.controller.model.read(h))===null||p===void 0?void 0:p.primaryGhostText.read(h);if(g){let f=this._editor.getModel().getLineContent(g.lineNumber);c(g.renderForScreenReader(f))}else Bl(s)})),e.fragment.appendChild(n)}};Gv=v5([Om(1,pi),Om(2,Pi),Om(3,Ia),Om(4,ce),Om(5,Zt)],Gv);X();var Jv=class extends B{constructor(){super()}};var Wu=new class{constructor(){this._implementations=[]}register(e){return this._implementations.push(e),{dispose:()=>{let t=this._implementations.indexOf(e);t!==-1&&this._implementations.splice(t,1),e.dispose()}}}getImplementations(){return this._implementations}};Wt();le(no.ID,no,3);M(Uv);M(eO);M(tO);M(qv);M(Kv);M($v);M(iO);et(oO);Po.register(Gv);Wu.register(new Jv);Xe();Ze();yr();X();Xl();xe();ge();Rr();fn();re();Me();Ge();gi();var b5=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},SE=function(i,e){return function(t,o){e(t,o,i)}},Rm,il=Rm=class{constructor(e,t,o,r){this.textModelResolverService=t,this.languageService=o,this.languageFeaturesService=r,this.toUnhook=new H,this.toUnhookForKeyboard=new H,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e,this.linkDecorations=this.editor.createDecorationsCollection();let n=new Ln(e);this.toUnhook.add(n),this.toUnhook.add(n.onMouseMoveOrRelevantKeyDown(([s,a])=>{this.startFindDefinitionFromMouse(s,a??void 0)})),this.toUnhook.add(n.onExecute(s=>{this.isEnabled(s)&&this.gotoDefinition(s.target.position,s.hasSideBySideModifier).catch(a=>{Fe(a)}).finally(()=>{this.removeLinkDecorations()})})),this.toUnhook.add(n.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(Rm.ID)}async startFindDefinitionFromCursor(e){await this.startFindDefinition(e),this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}let o=e.target.position;this.startFindDefinition(o)}async startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();let o=e?(t=this.editor.getModel())===null||t===void 0?void 0:t.getWordAtPosition(e):null;if(!o){this.currentWordAtPosition=null,this.removeLinkDecorations();return}if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===o.startColumn&&this.currentWordAtPosition.endColumn===o.endColumn&&this.currentWordAtPosition.word===o.word)return;this.currentWordAtPosition=o;let r=new s_(this.editor,15);this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=mt(a=>this.findDefinition(e,a));let n;try{n=await this.previousPromise}catch(a){Fe(a);return}if(!n||!n.length||!r.validate(this.editor)){this.removeLinkDecorations();return}let s=n[0].originSelectionRange?T.lift(n[0].originSelectionRange):new T(e.lineNumber,o.startColumn,e.lineNumber,o.endColumn);if(n.length>1){let a=s;for(let{originSelectionRange:c}of n)c&&(a=T.plusRange(a,c));this.addDecoration(a,new Gt().appendText(b("multipleResults","Click to show {0} definitions.",n.length)))}else{let a=n[0];if(!a.uri)return;this.textModelResolverService.createModelReference(a.uri).then(c=>{if(!c.object||!c.object.textEditorModel){c.dispose();return}let{object:{textEditorModel:h}}=c,{startLineNumber:p}=a.range;if(p<1||p>h.getLineCount()){c.dispose();return}let g=this.getPreviewValue(h,p,a),f=this.languageService.guessLanguageIdByFilepathOrFirstLine(h.uri);this.addDecoration(s,g?new Gt().appendCodeblock(f||"",g):void 0),c.dispose()})}}getPreviewValue(e,t,o){let r=o.range;return r.endLineNumber-r.startLineNumber>=Rm.MAX_SOURCE_PREVIEW_LINES&&(r=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,r)}stripIndentationFromPreviewRange(e,t,o){let n=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<o.endLineNumber;a++){let c=e.getLineFirstNonWhitespaceColumn(a);n=Math.min(n,c)}return e.getValueInRange(o).replace(new RegExp(`^\\s{${n-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){let o=e.getLineFirstNonWhitespaceColumn(t),r=Math.min(e.getLineCount(),t+Rm.MAX_SOURCE_PREVIEW_LINES),n=t+1;for(;n<r;n++){let s=e.getLineFirstNonWhitespaceColumn(n);if(o===s)break}return new T(t,1,n+1,1)}addDecoration(e,t){let o={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations.set([o])}removeLinkDecorations(){this.linkDecorations.clear()}isEnabled(e,t){var o;return this.editor.hasModel()&&e.isLeftClick&&e.isNoneOrSingleMouseDown&&e.target.type===6&&!(((o=e.target.detail.injectedText)===null||o===void 0?void 0:o.options)instanceof Ad)&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(e,t){let o=this.editor.getModel();return o?pc(this.languageFeaturesService.definitionProvider,o,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(o=>{let r=!t&&this.editor.getOption(88)&&!this.isInPeekEditor(o);return new Rs({openToSide:t,openInPeek:r,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(o)})}isInPeekEditor(e){let t=e.get(ve);return Li.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose(),this.toUnhookForKeyboard.dispose()}};il.ID="editor.contrib.gotodefinitionatposition";il.MAX_SOURCE_PREVIEW_LINES=8;il=Rm=b5([SE(1,Si),SE(2,pi),SE(3,J)],il);le(il.ID,il,2);xi();X();xe();Vi();pt();ge();it();bt();nt();X();$P();Tt();Ci();ge();gs();Je();ei();var rO=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Xv=function(i,e){return function(t,o){e(t,o,i)}},Yv=class{constructor(e,t,o){this.marker=e,this.index=t,this.total=o}},wE=class{constructor(e,t,o){this._markerService=t,this._configService=o,this._onDidChange=new fe,this.onDidChange=this._onDidChange.event,this._dispoables=new H,this._markers=[],this._nextIdx=-1,We.isUri(e)?this._resourceFilter=a=>a.toString()===e.toString():e&&(this._resourceFilter=e);let r=this._configService.getValue("problems.sortOrder"),n=(a,c)=>{let h=WC(a.resource.toString(),c.resource.toString());return h===0&&(r==="position"?h=T.compareRangesUsingStarts(a,c)||ki.compare(a.severity,c.severity):h=ki.compare(a.severity,c.severity)||T.compareRangesUsingStarts(a,c)),h},s=()=>{this._markers=this._markerService.read({resource:We.isUri(e)?e:void 0,severities:ki.Error|ki.Warning|ki.Info}),typeof e=="function"&&(this._markers=this._markers.filter(a=>this._resourceFilter(a.resource))),this._markers.sort(n)};s(),this._dispoables.add(t.onMarkerChanged(a=>{(!this._resourceFilter||a.some(c=>this._resourceFilter(c)))&&(s(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){let e=this._markers[this._nextIdx];return e&&new Yv(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,o){let r=!1,n=this._markers.findIndex(s=>s.resource.toString()===e.uri.toString());n<0&&(n=kl(this._markers,{resource:e.uri},(s,a)=>WC(s.resource.toString(),a.resource.toString())),n<0&&(n=~n));for(let s=n;s<this._markers.length;s++){let a=T.lift(this._markers[s]);if(a.isEmpty()){let c=e.getWordAtPosition(a.getStartPosition());c&&(a=new T(a.startLineNumber,c.startColumn,a.startLineNumber,c.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=s,r=!0;break}if(this._markers[s].resource.toString()!==e.uri.toString())break}r||(this._nextIdx=o?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,o){if(this._markers.length===0)return!1;let r=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,o,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),r!==this._nextIdx}find(e,t){let o=this._markers.findIndex(r=>r.resource.toString()===e.toString());if(!(o<0)){for(;o<this._markers.length;o++)if(T.containsPosition(this._markers[o],t))return new Yv(this._markers[o],o+1,this._markers.length)}}};wE=rO([Xv(1,mp),Xv(2,Oe)],wE);var AE=zi("IMarkerNavigationService"),EE=class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new tf}getMarkerList(e){for(let t of this._provider){let o=t.getMarkerList(e);if(o)return o}return new wE(e,this._markerService,this._configService)}};EE=rO([Xv(0,mp),Xv(1,Oe)],EE);Ui(AE,EE,1);re();Wt();Me();Je();ze();bt();Dn();nt();X();ir();Tt();ge();re();Wt();Me();Je();xi();to();var Qv;(function(i){function e(t){switch(t){case ap.Ignore:return"severity-ignore "+je.asClassName(be.info);case ap.Info:return je.asClassName(be.info);case ap.Warning:return je.asClassName(be.warning);case ap.Error:return je.asClassName(be.error);default:return""}}i.className=e})(Qv||(Qv={}));Ri();Bi();var D5=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Hu=function(i,e){return function(t,o){e(t,o,i)}},TE,IE=class{constructor(e,t,o,r,n){this._openerService=r,this._labelService=n,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new H,this._editor=t;let s=document.createElement("div");s.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),s.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),s.appendChild(this._relatedBlock),this._disposables.add(Qo(this._relatedBlock,"click",a=>{a.preventDefault();let c=this._relatedDiagnostics.get(a.target);c&&o(c)})),this._scrollable=new kF(s,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{s.style.left=`-${a.scrollLeft}px`,s.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){Vt(this._disposables)}update(e){let{source:t,message:o,relatedInformation:r,code:n}=e,s=(t?.length||0)+2;n&&(typeof n=="string"?s+=n.length:s+=n.value.length);let a=Ml(o);this._lines=a.length,this._longestLineLength=0;for(let f of a)this._longestLineLength=Math.max(f.length+s,this._longestLineLength);Co(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let c=this._messageBlock;for(let f of a)c=document.createElement("div"),c.innerText=f,f===""&&(c.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(c);if(t||n){let f=document.createElement("span");if(f.classList.add("details"),c.appendChild(f),t){let _=document.createElement("span");_.innerText=t,_.classList.add("source"),f.appendChild(_)}if(n)if(typeof n=="string"){let _=document.createElement("span");_.innerText=`(${n})`,_.classList.add("code"),f.appendChild(_)}else{this._codeLink=te("a.code-link"),this._codeLink.setAttribute("href",`${n.target.toString()}`),this._codeLink.onclick=y=>{this._openerService.open(n.target,{allowCommands:!0}),y.preventDefault(),y.stopPropagation()};let _=Z(this._codeLink,te("span"));_.innerText=n.value,f.appendChild(this._codeLink)}}if(Co(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),zt(r)){let f=this._relatedBlock.appendChild(document.createElement("div"));f.style.paddingTop=`${Math.floor(this._editor.getOption(67)*.66)}px`,this._lines+=1;for(let _ of r){let y=document.createElement("div"),C=document.createElement("a");C.classList.add("filename"),C.innerText=`${this._labelService.getUriBasenameLabel(_.resource)}(${_.startLineNumber}, ${_.startColumn}): `,C.title=this._labelService.getUriLabel(_.resource),this._relatedDiagnostics.set(C,_);let x=document.createElement("span");x.innerText=_.message,y.appendChild(C),y.appendChild(x),this._lines+=1,f.appendChild(y)}}let h=this._editor.getOption(50),p=Math.ceil(h.typicalFullwidthCharacterWidth*this._longestLineLength*.75),g=h.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:p,scrollHeight:g})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case ki.Error:t=b("Error","Error");break;case ki.Warning:t=b("Warning","Warning");break;case ki.Info:t=b("Info","Info");break;case ki.Hint:t=b("Hint","Hint");break}let o=b("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn),r=this._editor.getModel();return r&&e.startLineNumber<=r.getLineCount()&&e.startLineNumber>=1&&(o=`${r.getLineContent(e.startLineNumber)}, ${o}`),o}},Dc=TE=class extends du{constructor(e,t,o,r,n,s,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},n),this._themeService=t,this._openerService=o,this._menuService=r,this._contextKeyService=s,this._labelService=a,this._callOnDispose=new H,this._onDidSelectRelatedInformation=new fe,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=ki.Warning,this._backgroundColor=Re.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(w5);let t=PE,o=C5;this._severity===ki.Warning?(t=Zv,o=x5):this._severity===ki.Info&&(t=kE,o=S5);let r=e.getColor(t),n=e.getColor(o);this.style({arrowColor:r,frameColor:r,headerBackgroundColor:n,primaryHeadingColor:e.getColor(xy),secondaryHeadingColor:e.getColor(Sy)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onWillRun(r=>this.editor.focus()));let t=[],o=this._menuService.createMenu(TE.TitleMenu,this._contextKeyService);Nd(o,void 0,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0}),o.dispose()}_fillTitleIcon(e){this._icon=Z(e,te(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new IE(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,o){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());let r=T.lift(e),n=this.editor.getPosition(),s=n&&r.containsPosition(n)?n:r.getStartPosition();super.show(s,this.computeRequiredHeight());let a=this.editor.getModel();if(a){let c=o>1?b("problems","{0} of {1} problems",t,o):b("change","{0} of {1} problem",t,o);this.setTitle(fo(a.uri),c)}this._icon.className=`codicon ${Qv.className(ki.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(s,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};Dc.TitleMenu=new Q("gotoErrorTitleMenu");Dc=TE=D5([Hu(1,mi),Hu(2,Pi),Hu(3,pr),Hu(4,ce),Hu(5,ve),Hu(6,ws)],Dc);var nO=Sf(sF,aF),sO=Sf(lF,cF),aO=Sf(Zh,dF),PE=ue("editorMarkerNavigationError.background",{dark:nO,light:nO,hcDark:fr,hcLight:fr},b("editorMarkerNavigationError","Editor marker navigation widget error color.")),C5=ue("editorMarkerNavigationError.headerBackground",{dark:go(PE,.1),light:go(PE,.1),hcDark:null,hcLight:null},b("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),Zv=ue("editorMarkerNavigationWarning.background",{dark:sO,light:sO,hcDark:fr,hcLight:fr},b("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),x5=ue("editorMarkerNavigationWarning.headerBackground",{dark:go(Zv,.1),light:go(Zv,.1),hcDark:"#0C141F",hcLight:go(Zv,.2)},b("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),kE=ue("editorMarkerNavigationInfo.background",{dark:aO,light:aO,hcDark:fr,hcLight:fr},b("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),S5=ue("editorMarkerNavigationInfo.headerBackground",{dark:go(kE,.1),light:go(kE,.1),hcDark:null,hcLight:null},b("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),w5=ue("editorMarkerNavigation.background",{dark:Yh,light:Yh,hcDark:Yh,hcLight:Yh},b("editorMarkerNavigationBackground","Editor marker navigation widget background."));var E5=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},eb=function(i,e){return function(t,o){e(t,o,i)}},Bm,Ks=Bm=class{static get(e){return e.getContribution(Bm.ID)}constructor(e,t,o,r,n){this._markerNavigationService=t,this._contextKeyService=o,this._editorService=r,this._instantiationService=n,this._sessionDispoables=new H,this._editor=e,this._widgetVisible=lO.bindTo(this._contextKeyService)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(Dc,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(o=>{var r,n,s;(!(!((r=this._model)===null||r===void 0)&&r.selected)||!T.containsPosition((n=this._model)===null||n===void 0?void 0:n.selected.marker,o.position))&&((s=this._model)===null||s===void 0||s.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;let o=this._model.find(this._editor.getModel().uri,this._widget.position);o?this._widget.updateMarker(o.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(o=>{this._editorService.openCodeEditor({resource:o.resource,options:{pinned:!0,revealIfOpened:!0,selection:T.lift(o).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){let t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new Y(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}async nagivate(e,t){var o,r;if(this._editor.hasModel()){let n=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(n.move(e,this._editor.getModel(),this._editor.getPosition()),!n.selected)return;if(n.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();let s=await this._editorService.openCodeEditor({resource:n.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:n.selected.marker}},this._editor);s&&((o=Bm.get(s))===null||o===void 0||o.close(),(r=Bm.get(s))===null||r===void 0||r.nagivate(e,t))}else this._widget.showAtMarker(n.selected.marker,n.selected.index,n.selected.total)}}};Ks.ID="editor.contrib.markerController";Ks=Bm=E5([eb(1,AE),eb(2,ve),eb(3,tt),eb(4,ce)],Ks);var ju=class extends j{constructor(e,t,o){super(o),this._next=e,this._multiFile=t}async run(e,t){var o;t.hasModel()&&((o=Ks.get(t))===null||o===void 0||o.nagivate(this._next,this._multiFile))}},Cc=class i extends ju{constructor(){super(!0,!1,{id:i.ID,label:i.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:578,weight:100},menuOpts:{menuId:Dc.TitleMenu,title:i.LABEL,icon:kt("marker-navigation-next",be.arrowDown,b("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}};Cc.ID="editor.action.marker.next";Cc.LABEL=b("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");var Wm=class i extends ju{constructor(){super(!1,!1,{id:i.ID,label:i.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:1602,weight:100},menuOpts:{menuId:Dc.TitleMenu,title:i.LABEL,icon:kt("marker-navigation-previous",be.arrowUp,b("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}};Wm.ID="editor.action.marker.prev";Wm.LABEL=b("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");var FE=class extends ju{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:b("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:66,weight:100},menuOpts:{menuId:Q.MenubarGoMenu,title:b({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}},LE=class extends ju{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:b("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:1090,weight:100},menuOpts:{menuId:Q.MenubarGoMenu,title:b({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}};le(Ks.ID,Ks,4);M(Cc);M(Wm);M(FE);M(LE);var lO=new Ee("markersNavigationVisible",!1),A5=Bt.bindToContribution(Ks.get);de(new A5({id:"closeMarkersNavigation",precondition:lO,handler:i=>i.close(),kbOpts:{weight:150,kbExpr:A.focus,primary:9,secondary:[1033]}}));ds();xe();ge();it();Jt();re();var qn=function(i){return i.NoAutoFocus="noAutoFocus",i.FocusIfVisible="focusIfVisible",i.AutoFocusImmediately="autoFocusImmediately",i}(qn||{}),tb=class extends j{constructor(){super({id:uy,label:b({key:"showOrFocusHover",comment:["Label for action that will trigger the showing/focusing of a hover in the editor.","If the hover is not visible, it will show the hover.","This allows for users to show the hover without using the mouse."]},"Show or Focus Hover"),metadata:{description:pe("showOrFocusHoverDescription","Show or focus the editor hover which shows documentation, references, and other content for a symbol at the current cursor position."),args:[{name:"args",schema:{type:"object",properties:{focus:{description:"Controls if and when the hover should take focus upon being triggered by this action.",enum:[qn.NoAutoFocus,qn.FocusIfVisible,qn.AutoFocusImmediately],enumDescriptions:[b("showOrFocusHover.focus.noAutoFocus","The hover will not automatically take focus."),b("showOrFocusHover.focus.focusIfVisible","The hover will take focus only if it is already visible."),b("showOrFocusHover.focus.autoFocusImmediately","The hover will automatically take focus when it appears.")],default:qn.FocusIfVisible}}}}]},alias:"Show or Focus Hover",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:St(2089,2087),weight:100}})}run(e,t,o){if(!t.hasModel())return;let r=Ai.get(t);if(!r)return;let n=o?.focus,s=qn.FocusIfVisible;Object.values(qn).includes(n)?s=n:typeof n=="boolean"&&n&&(s=qn.AutoFocusImmediately);let a=h=>{let p=t.getPosition(),g=new T(p.lineNumber,p.column,p.lineNumber,p.column);r.showContentHover(g,1,1,h)},c=t.getOption(2)===2;r.isHoverVisible?s!==qn.NoAutoFocus?r.focus():a(c):a(c||s===qn.AutoFocusImmediately)}},ib=class extends j{constructor(){super({id:SM,label:b({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0,metadata:{description:pe("showDefinitionPreviewHoverDescription","Show the definition preview hover in the editor.")}})}run(e,t){let o=Ai.get(t);if(!o)return;let r=t.getPosition();if(!r)return;let n=new T(r.lineNumber,r.column,r.lineNumber,r.column),s=il.get(t);if(!s)return;s.startFindDefinitionFromCursor(r).then(()=>{o.showContentHover(n,1,1,!0)})}},ob=class extends j{constructor(){super({id:wM,label:b({key:"scrollUpHover",comment:["Action that allows to scroll up in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Up Hover"),alias:"Scroll Up Hover",precondition:A.hoverFocused,kbOpts:{kbExpr:A.hoverFocused,primary:16,weight:100},metadata:{description:pe("scrollUpHoverDescription","Scroll up the editor hover.")}})}run(e,t){let o=Ai.get(t);o&&o.scrollUp()}},rb=class extends j{constructor(){super({id:EM,label:b({key:"scrollDownHover",comment:["Action that allows to scroll down in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Down Hover"),alias:"Scroll Down Hover",precondition:A.hoverFocused,kbOpts:{kbExpr:A.hoverFocused,primary:18,weight:100},metadata:{description:pe("scrollDownHoverDescription","Scroll down the editor hover.")}})}run(e,t){let o=Ai.get(t);o&&o.scrollDown()}},nb=class extends j{constructor(){super({id:AM,label:b({key:"scrollLeftHover",comment:["Action that allows to scroll left in the hover widget with the left arrow when the hover widget is focused."]},"Scroll Left Hover"),alias:"Scroll Left Hover",precondition:A.hoverFocused,kbOpts:{kbExpr:A.hoverFocused,primary:15,weight:100},metadata:{description:pe("scrollLeftHoverDescription","Scroll left the editor hover.")}})}run(e,t){let o=Ai.get(t);o&&o.scrollLeft()}},sb=class extends j{constructor(){super({id:TM,label:b({key:"scrollRightHover",comment:["Action that allows to scroll right in the hover widget with the right arrow when the hover widget is focused."]},"Scroll Right Hover"),alias:"Scroll Right Hover",precondition:A.hoverFocused,kbOpts:{kbExpr:A.hoverFocused,primary:17,weight:100},metadata:{description:pe("scrollRightHoverDescription","Scroll right the editor hover.")}})}run(e,t){let o=Ai.get(t);o&&o.scrollRight()}},ab=class extends j{constructor(){super({id:IM,label:b({key:"pageUpHover",comment:["Action that allows to page up in the hover widget with the page up command when the hover widget is focused."]},"Page Up Hover"),alias:"Page Up Hover",precondition:A.hoverFocused,kbOpts:{kbExpr:A.hoverFocused,primary:11,secondary:[528],weight:100},metadata:{description:pe("pageUpHoverDescription","Page up the editor hover.")}})}run(e,t){let o=Ai.get(t);o&&o.pageUp()}},lb=class extends j{constructor(){super({id:PM,label:b({key:"pageDownHover",comment:["Action that allows to page down in the hover widget with the page down command when the hover widget is focused."]},"Page Down Hover"),alias:"Page Down Hover",precondition:A.hoverFocused,kbOpts:{kbExpr:A.hoverFocused,primary:12,secondary:[530],weight:100},metadata:{description:pe("pageDownHoverDescription","Page down the editor hover.")}})}run(e,t){let o=Ai.get(t);o&&o.pageDown()}},cb=class extends j{constructor(){super({id:kM,label:b({key:"goToTopHover",comment:["Action that allows to go to the top of the hover widget with the home command when the hover widget is focused."]},"Go To Top Hover"),alias:"Go To Bottom Hover",precondition:A.hoverFocused,kbOpts:{kbExpr:A.hoverFocused,primary:14,secondary:[2064],weight:100},metadata:{description:pe("goToTopHoverDescription","Go to the top of the editor hover.")}})}run(e,t){let o=Ai.get(t);o&&o.goToTop()}},db=class extends j{constructor(){super({id:FM,label:b({key:"goToBottomHover",comment:["Action that allows to go to the bottom in the hover widget with the end command when the hover widget is focused."]},"Go To Bottom Hover"),alias:"Go To Bottom Hover",precondition:A.hoverFocused,kbOpts:{kbExpr:A.hoverFocused,primary:13,secondary:[2066],weight:100},metadata:{description:pe("goToBottomHoverDescription","Go to the bottom of the editor hover.")}})}run(e,t){let o=Ai.get(t);o&&o.goToBottom()}},ub=class extends j{constructor(){super({id:za,label:LM,alias:"Increase Hover Verbosity Level",precondition:A.hoverVisible})}run(e,t,o){var r;(r=Ai.get(t))===null||r===void 0||r.updateMarkdownHoverVerbosityLevel(Do.Increase,o?.index,o?.focus)}},hb=class extends j{constructor(){super({id:Va,label:NM,alias:"Decrease Hover Verbosity Level",precondition:A.hoverVisible})}run(e,t,o){var r;(r=Ai.get(t))===null||r===void 0||r.updateMarkdownHoverVerbosityLevel(Do.Decrease,o?.index,o?.focus)}};xe();Ri();Bi();ze();bt();Xe();Ze();X();ir();ge();Ge();re();var T5=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},NE=function(i,e){return function(t,o){e(t,o,i)}},wr=te,ME=class{constructor(e,t,o){this.owner=e,this.range=t,this.marker=o}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}},cO={type:1,filter:{include:lt.QuickFix},triggerAction:Wi.QuickFixHover},pb=class{constructor(e,t,o,r){this._editor=e,this._markerDecorationsService=t,this._openerService=o,this._languageFeaturesService=r,this.hoverOrdinal=1,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1&&!e.supportsMarkerHover)return[];let o=this._editor.getModel(),r=e.range.startLineNumber,n=o.getLineMaxColumn(r),s=[];for(let a of t){let c=a.range.startLineNumber===r?a.range.startColumn:1,h=a.range.endLineNumber===r?a.range.endColumn:n,p=this._markerDecorationsService.getMarker(o.uri,a);if(!p)continue;let g=new T(e.range.startLineNumber,c,e.range.startLineNumber,h);s.push(new ME(this,g,p))}return s}renderHoverParts(e,t){if(!t.length)return B.None;let o=new H;t.forEach(n=>e.fragment.appendChild(this.renderMarkerHover(n,o)));let r=t.length===1?t[0]:t.sort((n,s)=>ki.compare(n.marker.severity,s.marker.severity))[0];return this.renderMarkerStatusbar(e,r,o),o}renderMarkerHover(e,t){let o=wr("div.hover-row");o.tabIndex=0;let r=Z(o,wr("div.marker.hover-contents")),{source:n,message:s,code:a,relatedInformation:c}=e.marker;this._editor.applyFontInfo(r);let h=Z(r,wr("span"));if(h.style.whiteSpace="pre-wrap",h.innerText=s,n||a)if(a&&typeof a!="string"){let p=wr("span");if(n){let y=Z(p,wr("span"));y.innerText=n}let g=Z(p,wr("a.code-link"));g.setAttribute("href",a.target.toString()),t.add(Ne(g,"click",y=>{this._openerService.open(a.target,{allowCommands:!0}),y.preventDefault(),y.stopPropagation()}));let f=Z(g,wr("span"));f.innerText=a.value;let _=Z(r,p);_.style.opacity="0.6",_.style.paddingLeft="6px"}else{let p=Z(r,wr("span"));p.style.opacity="0.6",p.style.paddingLeft="6px",p.innerText=n&&a?`${n}(${a})`:n||`(${a})`}if(zt(c))for(let{message:p,resource:g,startLineNumber:f,startColumn:_}of c){let y=Z(r,wr("div"));y.style.marginTop="8px";let C=Z(y,wr("a"));C.innerText=`${fo(g)}(${f}, ${_}): `,C.style.cursor="pointer",t.add(Ne(C,"click",D=>{D.stopPropagation(),D.preventDefault(),this._openerService&&this._openerService.open(g,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:f,startColumn:_}}}).catch(Fe)}));let x=Z(y,wr("span"));x.innerText=p,this._editor.applyFontInfo(x)}return o}renderMarkerStatusbar(e,t,o){if(t.marker.severity===ki.Error||t.marker.severity===ki.Warning||t.marker.severity===ki.Info){let r=Ks.get(this._editor);r&&e.statusBar.addAction({label:b("view problem","View Problem"),commandId:Cc.ID,run:()=>{e.hide(),r.showAtMarker(t.marker),this._editor.focus()}})}if(!this._editor.getOption(91)){let r=e.statusBar.append(wr("div"));this.recentMarkerCodeActionsInfo&&(x0.makeKey(this.recentMarkerCodeActionsInfo.marker)===x0.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(r.textContent=b("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);let n=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?B.None:hs(()=>r.textContent=b("checkingForQuickFixes","Checking for quick fixes..."),200,o);r.textContent||(r.textContent="\xA0");let s=this.getCodeActions(t.marker);o.add(Ve(()=>s.cancel())),s.then(a=>{if(n.dispose(),this.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),r.textContent=b("noQuickFixes","No quick fixes available");return}r.style.display="none";let c=!1;o.add(Ve(()=>{c||a.dispose()})),e.statusBar.addAction({label:b("quick fixes","Quick Fix..."),commandId:Yd,run:h=>{c=!0;let p=$r.get(this._editor),g=$t(h);e.hide(),p?.showCodeActions(cO,a,{x:g.left,y:g.top,width:g.width,height:g.height})}})},Fe)}}getCodeActions(e){return mt(t=>rc(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new T(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),cO,br.None,t))}};pb=T5([NE(1,nF),NE(2,Pi),NE(3,J)],pb);re();Jt();X();var dO;(function(i){i.intro=b("intro","Focus on the hover widget to cycle through the hover parts with the Tab key."),i.increaseVerbosity=b("increaseVerbosity","- The focused hover part verbosity level can be increased with the Increase Hover Verbosity command<keybinding:{0}>.",za),i.decreaseVerbosity=b("decreaseVerbosity","- The focused hover part verbosity level can be decreased with the Decrease Hover Verbosity command<keybinding:{0}>.",Va),i.hoverContent=b("contentHover","The last focused hover content is the following.")})(dO||(dO={}));var mb=class{dispose(){var e;(e=this._provider)===null||e===void 0||e.dispose()}},gb=class{dispose(){var e;(e=this._provider)===null||e===void 0||e.dispose()}};var fb=class{dispose(){}};le(Ai.ID,Ai,2);M(tb);M(ib);M(ob);M(rb);M(nb);M(sb);M(ab);M(lb);M(cb);M(db);M(ub);M(hb);Po.register(Ka);Po.register(pb);Pa((i,e)=>{let t=i.getColor(_F);t&&(e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${t.transparent(.5)}; }`))});Wu.register(new mb);Wu.register(new gb);Wu.register(new fb);X();Tt();xe();ge();it();Ii();hr();function so(i,e){let t=0;for(let o=0;o<i.length;o++)i.charAt(o)==="	"?t+=e:t++;return t}function xc(i,e,t){i=i<0?0:i;let o="";if(!t){let r=Math.floor(i/e);i=i%e;for(let n=0;n<r;n++)o+="	"}for(let r=0;r<i;r++)o+=" ";return o}re();Tt();S6();ui();function OE(i,e,t,o){if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return[];let r=e.getLanguageConfiguration(i.getLanguageId()).indentRulesSupport;if(!r)return[];let n=new BF(i,r,e);for(o=Math.min(o,i.getLineCount());t<=o&&n.shouldIgnore(t);)t++;if(t>o-1)return[];let{tabSize:s,indentSize:a,insertSpaces:c}=i.getOptions(),h=(C,x)=>(x=x||1,Ds.shiftIndent(C,C.length+x,s,a,c)),p=(C,x)=>(x=x||1,Ds.unshiftIndent(C,C.length+x,s,a,c)),g=[],f=i.getLineContent(t),_=Kt(f),y=_;n.shouldIncrease(t)?(y=h(y),_=h(_)):n.shouldIndentNextLine(t)&&(y=h(y)),t++;for(let C=t;C<=o;C++){if(I5(i,C))continue;let x=i.getLineContent(C),D=Kt(x),E=y;n.shouldDecrease(C,E)&&(y=p(y),_=p(_)),D!==y&&g.push(ct.replaceMove(new me(C,1,C,D.length+1),MF(y,a,c))),!n.shouldIgnore(C)&&(n.shouldIncrease(C,E)?(_=h(_),y=_):n.shouldIndentNextLine(C,E)?y=h(y):y=_)}return g}function I5(i,e){return i.tokenization.isCheapToTokenize(e)?i.tokenization.getLineTokens(e).getStandardTokenType(0)===2:!1}rF();var P5=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},k5=function(i,e){return function(t,o){e(t,o,i)}},F5=(()=>{class i extends j{constructor(){super({id:i.ID,label:b("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:A.writable,metadata:{description:pe("indentationToSpacesDescription","Convert the tab indentation to spaces.")}})}run(t,o){let r=o.getModel();if(!r)return;let n=r.getOptions(),s=o.getSelection();if(!s)return;let a=new HE(s,n.tabSize);o.pushUndoStop(),o.executeCommands(this.id,[a]),o.pushUndoStop(),r.updateOptions({insertSpaces:!0})}}return i.ID="editor.action.indentationToSpaces",i})(),L5=(()=>{class i extends j{constructor(){super({id:i.ID,label:b("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:A.writable,metadata:{description:pe("indentationToTabsDescription","Convert the spaces indentation to tabs.")}})}run(t,o){let r=o.getModel();if(!r)return;let n=r.getOptions(),s=o.getSelection();if(!s)return;let a=new jE(s,n.tabSize);o.pushUndoStop(),o.executeCommands(this.id,[a]),o.pushUndoStop(),r.updateOptions({insertSpaces:!1})}}return i.ID="editor.action.indentationToTabs",i})(),Hm=class extends j{constructor(e,t,o){super(o),this.insertSpaces=e,this.displaySizeOnly=t}run(e,t){let o=e.get(qi),r=e.get(Ot),n=t.getModel();if(!n)return;let s=r.getCreationOptions(n.getLanguageId(),n.uri,n.isForSimpleWidget),a=n.getOptions(),c=[1,2,3,4,5,6,7,8].map(p=>({id:p.toString(),label:p.toString(),description:p===s.tabSize&&p===a.tabSize?b("configuredTabSize","Configured Tab Size"):p===s.tabSize?b("defaultTabSize","Default Tab Size"):p===a.tabSize?b("currentTabSize","Current Tab Size"):void 0})),h=Math.min(n.getOptions().tabSize-1,7);setTimeout(()=>{o.pick(c,{placeHolder:b({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:c[h]}).then(p=>{if(p&&n&&!n.isDisposed()){let g=parseInt(p.label,10);this.displaySizeOnly?n.updateOptions({tabSize:g}):n.updateOptions({tabSize:g,indentSize:g,insertSpaces:this.insertSpaces})}})},50)}},N5=(()=>{class i extends Hm{constructor(){super(!1,!1,{id:i.ID,label:b("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0,metadata:{description:pe("indentUsingTabsDescription","Use indentation with tabs.")}})}}return i.ID="editor.action.indentUsingTabs",i})(),M5=(()=>{class i extends Hm{constructor(){super(!0,!1,{id:i.ID,label:b("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0,metadata:{description:pe("indentUsingSpacesDescription","Use indentation with spaces.")}})}}return i.ID="editor.action.indentUsingSpaces",i})(),O5=(()=>{class i extends Hm{constructor(){super(!0,!0,{id:i.ID,label:b("changeTabDisplaySize","Change Tab Display Size"),alias:"Change Tab Display Size",precondition:void 0,metadata:{description:pe("changeTabDisplaySizeDescription","Change the space size equivalent of the tab.")}})}}return i.ID="editor.action.changeTabDisplaySize",i})(),R5=(()=>{class i extends j{constructor(){super({id:i.ID,label:b("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0,metadata:{description:pe("detectIndentationDescription","Detect the indentation from content.")}})}run(t,o){let r=t.get(Ot),n=o.getModel();if(!n)return;let s=r.getCreationOptions(n.getLanguageId(),n.uri,n.isForSimpleWidget);n.detectIndentation(s.insertSpaces,s.tabSize)}}return i.ID="editor.action.detectIndentation",i})(),RE=class extends j{constructor(){super({id:"editor.action.reindentlines",label:b("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:A.writable,metadata:{description:pe("editor.reindentlinesDescription","Reindent the lines of the editor.")}})}run(e,t){let o=e.get(Ye),r=t.getModel();if(!r)return;let n=OE(r,o,1,r.getLineCount());n.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,n),t.pushUndoStop())}},BE=class extends j{constructor(){super({id:"editor.action.reindentselectedlines",label:b("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:A.writable,metadata:{description:pe("editor.reindentselectedlinesDescription","Reindent the selected lines of the editor.")}})}run(e,t){let o=e.get(Ye),r=t.getModel();if(!r)return;let n=t.getSelections();if(n===null)return;let s=[];for(let a of n){let c=a.startLineNumber,h=a.endLineNumber;if(c!==h&&a.endColumn===1&&h--,c===1){if(c===h)continue}else c--;let p=OE(r,o,c,h);s.push(...p)}s.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop())}},WE=class{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(let o of e)o.range&&typeof o.text=="string"&&this._edits.push(o)}getEditOperations(e,t){for(let r of this._edits)t.addEditOperation(T.lift(r.range),r.text);let o=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(o=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(o=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),o||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}},jm=class{constructor(e,t){this.editor=e,this._languageConfigurationService=t,this.callOnDispose=new H,this.callOnModel=new H,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(12)<4||this.editor.getOption(55))&&this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)}))}trigger(e){let t=this.editor.getSelections();if(t===null||t.length>1)return;let o=this.editor.getModel();if(!o||B5(o,e)||!o.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber))return;let r=this.editor.getOption(12),{tabSize:n,indentSize:s,insertSpaces:a}=o.getOptions(),c=[],h={shiftIndent:_=>Ds.shiftIndent(_,_.length+1,n,s,a),unshiftIndent:_=>Ds.unshiftIndent(_,_.length+1,n,s,a)},p=e.startLineNumber;for(;p<=e.endLineNumber;){if(this.shouldIgnoreLine(o,p)){p++;continue}break}if(p>e.endLineNumber)return;let g=o.getLineContent(p);if(!/\S/.test(g.substring(0,e.startColumn-1))){let _=Kl(r,o,o.getLanguageId(),p,h,this._languageConfigurationService);if(_!==null){let y=Kt(g),C=so(_,n),x=so(y,n);if(C!==x){let D=xc(C,n,a);c.push({range:new T(p,1,p,y.length+1),text:D}),g=D+g.substr(y.length)}else{let D=Bf(o,p,this._languageConfigurationService);if(D===0||D===8)return}}}let f=p;for(;p<e.endLineNumber;){if(!/\S/.test(o.getLineContent(p+1))){p++;continue}break}if(p!==e.endLineNumber){let y=Kl(r,{tokenization:{getLineTokens:C=>o.tokenization.getLineTokens(C),getLanguageId:()=>o.getLanguageId(),getLanguageIdAtPosition:(C,x)=>o.getLanguageIdAtPosition(C,x)},getLineContent:C=>C===f?g:o.getLineContent(C)},o.getLanguageId(),p+1,h,this._languageConfigurationService);if(y!==null){let C=so(y,n),x=so(Kt(o.getLineContent(p+1)),n);if(C!==x){let D=C-x;for(let E=p+1;E<=e.endLineNumber;E++){let I=o.getLineContent(E),k=Kt(I),O=so(k,n)+D,V=xc(O,n,a);V!==k&&c.push({range:new T(E,1,E,k.length+1),text:V})}}}}if(c.length>0){this.editor.pushUndoStop();let _=new WE(c,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",_),this.editor.pushUndoStop()}}shouldIgnoreLine(e,t){e.tokenization.forceTokenization(t);let o=e.getLineFirstNonWhitespaceColumn(t);if(o===0)return!0;let r=e.tokenization.getLineTokens(t);if(r.getCount()>0){let n=r.findTokenIndexAtOffset(o);if(n>=0&&r.getStandardTokenType(n)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}};jm.ID="editor.contrib.autoIndentOnPaste";jm=P5([k5(1,Ye)],jm);function B5(i,e){let t=o=>oF(i,o)===2;return t(e.getStartPosition())||t(e.getEndPosition())}function hO(i,e,t,o){if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;let r="";for(let s=0;s<t;s++)r+=" ";let n=new RegExp(r,"gi");for(let s=1,a=i.getLineCount();s<=a;s++){let c=i.getLineFirstNonWhitespaceColumn(s);if(c===0&&(c=i.getLineMaxColumn(s)),c===1)continue;let h=new T(s,1,s,c),p=i.getValueInRange(h),g=o?p.replace(/\t/ig,r):p.replace(n,"	");e.addEditOperation(h,g)}}var HE=class{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),hO(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}},jE=class{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),hO(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}};le(jm.ID,jm,2);M(F5);M(L5);M(N5);M(M5);M(O5);M(R5);M(RE);M(BE);xe();le(Mn.ID,Mn,1);Po.register(fu);var Bje=IC(gO());xe();it();re();var UE=class extends j{constructor(){super({id:"expandLineSelection",label:b("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:A.textInputFocus,primary:2090}})}run(e,t,o){if(o=o||{},!t.hasModel())return;let r=t._getViewModel();r.model.pushStackElement(),r.setCursorStates(o.source,3,rp.expandLineSelection(r,r.getCursorStates())),r.revealAllCursors(o.source,!0)}};M(UE);ds();xe();Tt();ge();var vb=class{constructor(e,t,o){this._selection=e,this._cursors=t,this._selectionId=null,this._trimInRegexesAndStrings=o}getEditOperations(e,t){let o=j5(e,this._cursors,this._trimInRegexesAndStrings);for(let r=0,n=o.length;r<n;r++){let s=o[r];t.addEditOperation(s.range,s.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}};function j5(i,e,t){e.sort((a,c)=>a.lineNumber===c.lineNumber?a.column-c.column:a.lineNumber-c.lineNumber);for(let a=e.length-2;a>=0;a--)e[a].lineNumber===e[a+1].lineNumber&&e.splice(a,1);let o=[],r=0,n=0,s=e.length;for(let a=1,c=i.getLineCount();a<=c;a++){let h=i.getLineContent(a),p=h.length+1,g=0;if(n<s&&e[n].lineNumber===a&&(g=e[n].column,n++,g===p)||h.length===0)continue;let f=_d(h),_=0;if(f===-1)_=1;else if(f!==h.length-1)_=f+2;else continue;if(!t){if(!i.tokenization.hasAccurateTokensForLine(a))continue;let y=i.tokenization.getLineTokens(a),C=y.getStandardTokenType(y.findTokenIndexAtOffset(_));if(C===2||C===3)continue}_=Math.max(g,_),o[r++]=ct.delete(new T(a,_,a,p))}return o}pt();ge();ui();it();ge();ui();var Vm=class{constructor(e,t,o){this._selection=e,this._isCopyingDown=t,this._noop=o||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let o=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,o.startLineNumber<o.endLineNumber&&o.endColumn===1&&(this._endLineNumberDelta=1,o=o.setEndPosition(o.endLineNumber-1,e.getLineMaxColumn(o.endLineNumber-1)));let r=[];for(let s=o.startLineNumber;s<=o.endLineNumber;s++)r.push(e.getLineContent(s));let n=r.join(`
`);n===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new T(o.endLineNumber,e.getLineMaxColumn(o.endLineNumber),o.endLineNumber+1,1),o.endLineNumber===e.getLineCount()?"":`
`):this._isCopyingDown?t.addEditOperation(new T(o.startLineNumber,1,o.startLineNumber,1),n+`
`):t.addEditOperation(new T(o.endLineNumber,e.getLineMaxColumn(o.endLineNumber),o.endLineNumber,e.getLineMaxColumn(o.endLineNumber)),`
`+n),this._selectionId=t.trackSelection(o),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let o=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let r=o.startLineNumber,n=o.startColumn,s=o.endLineNumber,a=o.endColumn;this._startLineNumberDelta!==0&&(r=r+this._startLineNumberDelta,n=1),this._endLineNumberDelta!==0&&(s=s+this._endLineNumberDelta,a=1),o=me.createWithDirection(r,n,s,a,this._selectionDirection)}return o}};Tt();ge();ui();_6();Ii();var z5=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},V5=function(i,e){return function(t,o){e(t,o,i)}},bb=class{constructor(e,t,o,r){this._languageConfigurationService=r,this._selection=e,this._isMovingDown=t,this._autoIndent=o,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){let o=()=>e.getLanguageId(),r=(g,f)=>e.getLanguageIdAtPosition(g,f),n=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===n){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let s=this._selection;s.startLineNumber<s.endLineNumber&&s.endColumn===1&&(this._moveEndPositionDown=!0,s=s.setEndPosition(s.endLineNumber-1,e.getLineMaxColumn(s.endLineNumber-1)));let{tabSize:a,indentSize:c,insertSpaces:h}=e.getOptions(),p=this.buildIndentConverter(a,c,h);if(s.startLineNumber===s.endLineNumber&&e.getLineMaxColumn(s.startLineNumber)===1){let g=s.startLineNumber,f=this._isMovingDown?g+1:g-1;e.getLineMaxColumn(f)===1?t.addEditOperation(new T(1,1,1,1),null):(t.addEditOperation(new T(g,1,g,1),e.getLineContent(f)),t.addEditOperation(new T(f,1,f,e.getLineMaxColumn(f)),null)),s=new me(f,1,f,1)}else{let g,f;if(this._isMovingDown){g=s.endLineNumber+1,f=e.getLineContent(g),t.addEditOperation(new T(g-1,e.getLineMaxColumn(g-1),g,e.getLineMaxColumn(g)),null);let _=f;if(this.shouldAutoIndent(e,s)){let y=this.matchEnterRule(e,p,a,g,s.startLineNumber-1);if(y!==null){let x=Kt(e.getLineContent(g)),D=y+so(x,a);_=xc(D,a,h)+this.trimStart(f)}else{let x={tokenization:{getLineTokens:E=>E===s.startLineNumber?e.tokenization.getLineTokens(g):e.tokenization.getLineTokens(E),getLanguageId:o,getLanguageIdAtPosition:r},getLineContent:E=>E===s.startLineNumber?e.getLineContent(g):e.getLineContent(E)},D=Kl(this._autoIndent,x,e.getLanguageIdAtPosition(g,1),s.startLineNumber,p,this._languageConfigurationService);if(D!==null){let E=Kt(e.getLineContent(g)),I=so(D,a),k=so(E,a);I!==k&&(_=xc(I,a,h)+this.trimStart(f))}}t.addEditOperation(new T(s.startLineNumber,1,s.startLineNumber,1),_+`
`);let C=this.matchEnterRuleMovingDown(e,p,a,s.startLineNumber,g,_);if(C!==null)C!==0&&this.getIndentEditsOfMovingBlock(e,t,s,a,h,C);else{let x={tokenization:{getLineTokens:E=>E===s.startLineNumber?e.tokenization.getLineTokens(g):E>=s.startLineNumber+1&&E<=s.endLineNumber+1?e.tokenization.getLineTokens(E-1):e.tokenization.getLineTokens(E),getLanguageId:o,getLanguageIdAtPosition:r},getLineContent:E=>E===s.startLineNumber?_:E>=s.startLineNumber+1&&E<=s.endLineNumber+1?e.getLineContent(E-1):e.getLineContent(E)},D=Kl(this._autoIndent,x,e.getLanguageIdAtPosition(g,1),s.startLineNumber+1,p,this._languageConfigurationService);if(D!==null){let E=Kt(e.getLineContent(s.startLineNumber)),I=so(D,a),k=so(E,a);if(I!==k){let N=I-k;this.getIndentEditsOfMovingBlock(e,t,s,a,h,N)}}}}else t.addEditOperation(new T(s.startLineNumber,1,s.startLineNumber,1),_+`
`)}else if(g=s.startLineNumber-1,f=e.getLineContent(g),t.addEditOperation(new T(g,1,g+1,1),null),t.addEditOperation(new T(s.endLineNumber,e.getLineMaxColumn(s.endLineNumber),s.endLineNumber,e.getLineMaxColumn(s.endLineNumber)),`
`+f),this.shouldAutoIndent(e,s)){let _={tokenization:{getLineTokens:C=>C===g?e.tokenization.getLineTokens(s.startLineNumber):e.tokenization.getLineTokens(C),getLanguageId:o,getLanguageIdAtPosition:r},getLineContent:C=>C===g?e.getLineContent(s.startLineNumber):e.getLineContent(C)},y=this.matchEnterRule(e,p,a,s.startLineNumber,s.startLineNumber-2);if(y!==null)y!==0&&this.getIndentEditsOfMovingBlock(e,t,s,a,h,y);else{let C=Kl(this._autoIndent,_,e.getLanguageIdAtPosition(s.startLineNumber,1),g,p,this._languageConfigurationService);if(C!==null){let x=Kt(e.getLineContent(s.startLineNumber)),D=so(C,a),E=so(x,a);if(D!==E){let I=D-E;this.getIndentEditsOfMovingBlock(e,t,s,a,h,I)}}}}}this._selectionId=t.trackSelection(s)}buildIndentConverter(e,t,o){return{shiftIndent:r=>Ds.shiftIndent(r,r.length+1,e,t,o),unshiftIndent:r=>Ds.unshiftIndent(r,r.length+1,e,t,o)}}parseEnterResult(e,t,o,r,n){if(n){let s=n.indentation;n.indentAction===Kh.None||n.indentAction===Kh.Indent?s=n.indentation+n.appendText:n.indentAction===Kh.IndentOutdent?s=n.indentation:n.indentAction===Kh.Outdent&&(s=t.unshiftIndent(n.indentation)+n.appendText);let a=e.getLineContent(r);if(this.trimStart(a).indexOf(this.trimStart(s))>=0){let c=Kt(e.getLineContent(r)),h=Kt(s),p=Bf(e,r,this._languageConfigurationService);p!==null&&p&2&&(h=t.unshiftIndent(h));let g=so(h,o),f=so(c,o);return g-f}}return null}matchEnterRuleMovingDown(e,t,o,r,n,s){if(_d(s)>=0){let a=e.getLineMaxColumn(n),c=Rf(this._autoIndent,e,new T(n,a,n,a),this._languageConfigurationService);return this.parseEnterResult(e,t,o,r,c)}else{let a=r-1;for(;a>=1;){let p=e.getLineContent(a);if(_d(p)>=0)break;a--}if(a<1||r>e.getLineCount())return null;let c=e.getLineMaxColumn(a),h=Rf(this._autoIndent,e,new T(a,c,a,c),this._languageConfigurationService);return this.parseEnterResult(e,t,o,r,h)}}matchEnterRule(e,t,o,r,n,s){let a=n;for(;a>=1;){let p;if(a===n&&s!==void 0?p=s:p=e.getLineContent(a),_d(p)>=0)break;a--}if(a<1||r>e.getLineCount())return null;let c=e.getLineMaxColumn(a),h=Rf(this._autoIndent,e,new T(a,c,a,c),this._languageConfigurationService);return this.parseEnterResult(e,t,o,r,h)}trimStart(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;let o=e.getLanguageIdAtPosition(t.startLineNumber,1),r=e.getLanguageIdAtPosition(t.endLineNumber,1);return!(o!==r||this._languageConfigurationService.getLanguageConfiguration(o).indentRulesSupport===null)}getIndentEditsOfMovingBlock(e,t,o,r,n,s){for(let a=o.startLineNumber;a<=o.endLineNumber;a++){let c=e.getLineContent(a),h=Kt(c),g=so(h,r)+s,f=xc(g,r,n);f!==h&&(t.addEditOperation(new T(a,1,a,h.length+1),f),a===o.endLineNumber&&o.endColumn<=h.length+1&&f===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let o=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(o=o.setEndPosition(o.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&o.startLineNumber<o.endLineNumber&&(o=o.setEndPosition(o.endLineNumber,2)),o}};bb=z5([V5(3,Ye)],bb);ge();var Db=(()=>{class i{static getCollator(){return i._COLLATOR||(i._COLLATOR=new Intl.Collator),i._COLLATOR}constructor(t,o){this.selection=t,this.descending=o,this.selectionId=null}getEditOperations(t,o){let r=U5(t,this.selection,this.descending);r&&o.addEditOperation(r.range,r.text),this.selectionId=o.trackSelection(this.selection)}computeCursorState(t,o){return o.getTrackedSelection(this.selectionId)}static canRun(t,o,r){if(t===null)return!1;let n=fO(t,o,r);if(!n)return!1;for(let s=0,a=n.before.length;s<a;s++)if(n.before[s]!==n.after[s])return!0;return!1}}return i._COLLATOR=null,i})();function fO(i,e,t){let o=e.startLineNumber,r=e.endLineNumber;if(e.endColumn===1&&r--,o>=r)return null;let n=[];for(let a=o;a<=r;a++)n.push(i.getLineContent(a));let s=n.slice(0);return s.sort(Db.getCollator().compare),t===!0&&(s=s.reverse()),{startLineNumber:o,endLineNumber:r,before:n,after:s}}function U5(i,e,t){let o=fO(i,e,t);return o?ct.replace(new T(o.startLineNumber,1,o.endLineNumber,i.getLineMaxColumn(o.endLineNumber)),o.after.join(`
`)):null}re();Wt();Ii();ei();var Cb=class extends j{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;let o=t.getSelections().map((s,a)=>({selection:s,index:a,ignore:!1}));o.sort((s,a)=>T.compareRangesUsingStarts(s.selection,a.selection));let r=o[0];for(let s=1;s<o.length;s++){let a=o[s];r.selection.endLineNumber===a.selection.startLineNumber&&(r.index<a.index?a.ignore=!0:(r.ignore=!0,r=a))}let n=[];for(let s of o)n.push(new Vm(s.selection,this.down,s.ignore));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}},qE=class extends Cb{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:b("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:Q.MenubarSelectionMenu,group:"2_line",title:b({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}},KE=class extends Cb{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:b("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:Q.MenubarSelectionMenu,group:"2_line",title:b({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}},$E=class extends j{constructor(){super({id:"editor.action.duplicateSelection",label:b("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:A.writable,menuOpts:{menuId:Q.MenubarSelectionMenu,group:"2_line",title:b({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,o){if(!t.hasModel())return;let r=[],n=t.getSelections(),s=t.getModel();for(let a of n)if(a.isEmpty())r.push(new Vm(a,!0));else{let c=new me(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);r.push(new RF(c,s.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}},xb=class extends j{constructor(e,t){super(t),this.down=e}run(e,t){let o=e.get(Ye),r=[],n=t.getSelections()||[],s=t.getOption(12);for(let a of n)r.push(new bb(a,this.down,s,o));t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}},GE=class extends xb{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:b("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:Q.MenubarSelectionMenu,group:"2_line",title:b({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}},JE=class extends xb{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:b("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:Q.MenubarSelectionMenu,group:"2_line",title:b({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}},Sb=class extends j{constructor(e,t){super(t),this.descending=e}run(e,t){if(!t.hasModel())return;let o=t.getModel(),r=t.getSelections();r.length===1&&r[0].isEmpty()&&(r=[new me(1,1,o.getLineCount(),o.getLineMaxColumn(o.getLineCount()))]);for(let s of r)if(!Db.canRun(t.getModel(),s,this.descending))return;let n=[];for(let s=0,a=r.length;s<a;s++)n[s]=new Db(r[s],this.descending);t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}},XE=class extends Sb{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:b("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:A.writable})}},YE=class extends Sb{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:b("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:A.writable})}},QE=class extends j{constructor(){super({id:"editor.action.removeDuplicateLines",label:b("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:A.writable})}run(e,t){if(!t.hasModel())return;let o=t.getModel();if(o.getLineCount()===1&&o.getLineMaxColumn(1)===1)return;let r=[],n=[],s=0,a=!0,c=t.getSelections();c.length===1&&c[0].isEmpty()&&(c=[new me(1,1,o.getLineCount(),o.getLineMaxColumn(o.getLineCount()))],a=!1);for(let h of c){let p=new Set,g=[];for(let C=h.startLineNumber;C<=h.endLineNumber;C++){let x=o.getLineContent(C);p.has(x)||(g.push(x),p.add(x))}let f=new me(h.startLineNumber,1,h.endLineNumber,o.getLineMaxColumn(h.endLineNumber)),_=h.startLineNumber-s,y=new me(_,1,_+g.length-1,g[g.length-1].length);r.push(ct.replace(f,g.join(`
`))),n.push(y),s+=h.endLineNumber-h.startLineNumber+1-g.length}t.pushUndoStop(),t.executeEdits(this.id,r,a?n:void 0),t.pushUndoStop()}},q5=(()=>{class i extends j{constructor(){super({id:i.ID,label:b("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:St(2089,2102),weight:100}})}run(t,o,r){let n=[];r.reason==="auto-save"&&(n=(o.getSelections()||[]).map(g=>new Y(g.positionLineNumber,g.positionColumn)));let s=o.getSelection();if(s===null)return;let a=t.get(Oe),c=o.getModel(),h=a.getValue("files.trimTrailingWhitespaceInRegexAndStrings",{overrideIdentifier:c?.getLanguageId(),resource:c?.uri}),p=new vb(s,n,h);o.pushUndoStop(),o.executeCommands(this.id,[p]),o.pushUndoStop()}}return i.ID="editor.action.trimTrailingWhitespace",i})(),ZE=class extends j{constructor(){super({id:"editor.action.deleteLines",label:b("lines.delete","Delete Line"),alias:"Delete Line",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;let o=this._getLinesToRemove(t),r=t.getModel();if(r.getLineCount()===1&&r.getLineMaxColumn(1)===1)return;let n=0,s=[],a=[];for(let c=0,h=o.length;c<h;c++){let p=o[c],g=p.startLineNumber,f=p.endLineNumber,_=1,y=r.getLineMaxColumn(f);f<r.getLineCount()?(f+=1,y=1):g>1&&(g-=1,_=r.getLineMaxColumn(g)),s.push(ct.replace(new me(g,_,f,y),"")),a.push(new me(g-n,p.positionColumn,g-n,p.positionColumn)),n+=p.endLineNumber-p.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,s,a),t.pushUndoStop()}_getLinesToRemove(e){let t=e.getSelections().map(n=>{let s=n.endLineNumber;return n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(s-=1),{startLineNumber:n.startLineNumber,selectionStartColumn:n.selectionStartColumn,endLineNumber:s,positionColumn:n.positionColumn}});t.sort((n,s)=>n.startLineNumber===s.startLineNumber?n.endLineNumber-s.endLineNumber:n.startLineNumber-s.startLineNumber);let o=[],r=t[0];for(let n=1;n<t.length;n++)r.endLineNumber+1>=t[n].startLineNumber?r.endLineNumber=t[n].endLineNumber:(o.push(r),r=t[n]);return o.push(r),o}},e1=class extends j{constructor(){super({id:"editor.action.indentLines",label:b("lines.indent","Indent Line"),alias:"Indent Line",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:2142,weight:100}})}run(e,t){let o=t._getViewModel();o&&(t.pushUndoStop(),t.executeCommands(this.id,Wf.indent(o.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}},t1=class extends j{constructor(){super({id:"editor.action.outdentLines",label:b("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:2140,weight:100}})}run(e,t){Sd.Outdent.runEditorCommand(e,t,null)}},i1=class extends j{constructor(){super({id:"editor.action.insertLineBefore",label:b("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:3075,weight:100}})}run(e,t){let o=t._getViewModel();o&&(t.pushUndoStop(),t.executeCommands(this.id,Wf.lineInsertBefore(o.cursorConfig,t.getModel(),t.getSelections())))}},o1=class extends j{constructor(){super({id:"editor.action.insertLineAfter",label:b("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:2051,weight:100}})}run(e,t){let o=t._getViewModel();o&&(t.pushUndoStop(),t.executeCommands(this.id,Wf.lineInsertAfter(o.cursorConfig,t.getModel(),t.getSelections())))}},wb=class extends j{run(e,t){if(!t.hasModel())return;let o=t.getSelection(),r=this._getRangesToDelete(t),n=[];for(let c=0,h=r.length-1;c<h;c++){let p=r[c],g=r[c+1];T.intersectRanges(p,g)===null?n.push(p):r[c+1]=T.plusRange(p,g)}n.push(r[r.length-1]);let s=this._getEndCursorState(o,n),a=n.map(c=>ct.replace(c,""));t.pushUndoStop(),t.executeEdits(this.id,a,s),t.pushUndoStop()}},r1=class extends wb{constructor(){super({id:"deleteAllLeft",label:b("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let o=null,r=[],n=0;return t.forEach(s=>{let a;if(s.endColumn===1&&n>0){let c=s.startLineNumber-n;a=new me(c,s.startColumn,c,s.startColumn)}else a=new me(s.startLineNumber,s.startColumn,s.startLineNumber,s.startColumn);n+=s.endLineNumber-s.startLineNumber,s.intersectRanges(e)?o=a:r.push(a)}),o&&r.unshift(o),r}_getRangesToDelete(e){let t=e.getSelections();if(t===null)return[];let o=t,r=e.getModel();return r===null?[]:(o.sort(T.compareRangesUsingStarts),o=o.map(n=>{if(n.isEmpty())if(n.startColumn===1){let s=Math.max(1,n.startLineNumber-1),a=n.startLineNumber===1?1:r.getLineLength(s)+1;return new T(s,a,n.startLineNumber,1)}else return new T(n.startLineNumber,1,n.startLineNumber,n.startColumn);else return new T(n.startLineNumber,1,n.endLineNumber,n.endColumn)}),o)}},n1=class extends wb{constructor(){super({id:"deleteAllRight",label:b("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let o=null,r=[];for(let n=0,s=t.length,a=0;n<s;n++){let c=t[n],h=new me(c.startLineNumber-a,c.startColumn,c.startLineNumber-a,c.startColumn);c.intersectRanges(e)?o=h:r.push(h)}return o&&r.unshift(o),r}_getRangesToDelete(e){let t=e.getModel();if(t===null)return[];let o=e.getSelections();if(o===null)return[];let r=o.map(n=>{if(n.isEmpty()){let s=t.getLineMaxColumn(n.startLineNumber);return n.startColumn===s?new T(n.startLineNumber,n.startColumn,n.startLineNumber+1,1):new T(n.startLineNumber,n.startColumn,n.startLineNumber,s)}return n});return r.sort(T.compareRangesUsingStarts),r}},s1=class extends j{constructor(){super({id:"editor.action.joinLines",label:b("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:A.writable,kbOpts:{kbExpr:A.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){let o=t.getSelections();if(o===null)return;let r=t.getSelection();if(r===null)return;o.sort(T.compareRangesUsingStarts);let n=[],s=o.reduce((f,_)=>f.isEmpty()?f.endLineNumber===_.startLineNumber?(r.equalsSelection(f)&&(r=_),_):_.startLineNumber>f.endLineNumber+1?(n.push(f),_):new me(f.startLineNumber,f.startColumn,_.endLineNumber,_.endColumn):_.startLineNumber>f.endLineNumber?(n.push(f),_):new me(f.startLineNumber,f.startColumn,_.endLineNumber,_.endColumn));n.push(s);let a=t.getModel();if(a===null)return;let c=[],h=[],p=r,g=0;for(let f=0,_=n.length;f<_;f++){let y=n[f],C=y.startLineNumber,x=1,D=0,E,I,k=a.getLineLength(y.endLineNumber)-y.endColumn;if(y.isEmpty()||y.startLineNumber===y.endLineNumber){let V=y.getStartPosition();V.lineNumber<a.getLineCount()?(E=C+1,I=a.getLineMaxColumn(E)):(E=V.lineNumber,I=a.getLineMaxColumn(V.lineNumber))}else E=y.endLineNumber,I=a.getLineMaxColumn(E);let N=a.getLineContent(C);for(let V=C+1;V<=E;V++){let K=a.getLineContent(V),$=a.getLineFirstNonWhitespaceColumn(V);if($>=1){let ae=!0;N===""&&(ae=!1),ae&&(N.charAt(N.length-1)===" "||N.charAt(N.length-1)==="	")&&(ae=!1,N=N.replace(/[\s\uFEFF\xA0]+$/g," "));let q=K.substr($-1);N+=(ae?" ":"")+q,ae?D=q.length+1:D=q.length}else D=0}let O=new T(C,x,E,I);if(!O.isEmpty()){let V;y.isEmpty()?(c.push(ct.replace(O,N)),V=new me(O.startLineNumber-g,N.length-D+1,C-g,N.length-D+1)):y.startLineNumber===y.endLineNumber?(c.push(ct.replace(O,N)),V=new me(y.startLineNumber-g,y.startColumn,y.endLineNumber-g,y.endColumn)):(c.push(ct.replace(O,N)),V=new me(y.startLineNumber-g,y.startColumn,y.startLineNumber-g,N.length-k)),T.intersectRanges(O,r)!==null?p=V:h.push(V)}g+=O.endLineNumber-O.startLineNumber}h.unshift(p),t.pushUndoStop(),t.executeEdits(this.id,c,h),t.pushUndoStop()}},a1=class extends j{constructor(){super({id:"editor.action.transpose",label:b("editor.transpose","Transpose Characters around the Cursor"),alias:"Transpose Characters around the Cursor",precondition:A.writable})}run(e,t){let o=t.getSelections();if(o===null)return;let r=t.getModel();if(r===null)return;let n=[];for(let s=0,a=o.length;s<a;s++){let c=o[s];if(!c.isEmpty())continue;let h=c.getStartPosition(),p=r.getLineMaxColumn(h.lineNumber);if(h.column>=p){if(h.lineNumber===r.getLineCount())continue;let g=new T(h.lineNumber,Math.max(1,h.column-1),h.lineNumber+1,1),f=r.getValueInRange(g).split("").reverse().join("");n.push(new bs(new me(h.lineNumber,Math.max(1,h.column-1),h.lineNumber+1,1),f))}else{let g=new T(h.lineNumber,Math.max(1,h.column-1),h.lineNumber,h.column+1),f=r.getValueInRange(g).split("").reverse().join("");n.push(new Mf(g,f,new me(h.lineNumber,h.column+1,h.lineNumber,h.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}},$s=class extends j{run(e,t){let o=t.getSelections();if(o===null)return;let r=t.getModel();if(r===null)return;let n=t.getOption(131),s=[];for(let a of o)if(a.isEmpty()){let c=a.getStartPosition(),h=t.getConfiguredWordAtPosition(c);if(!h)continue;let p=new T(c.lineNumber,h.startColumn,c.lineNumber,h.endColumn),g=r.getValueInRange(p);s.push(ct.replace(p,this._modifyText(g,n)))}else{let c=r.getValueInRange(a);s.push(ct.replace(a,this._modifyText(c,n)))}t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop()}},l1=class extends $s{constructor(){super({id:"editor.action.transformToUppercase",label:b("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:A.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}},c1=class extends $s{constructor(){super({id:"editor.action.transformToLowercase",label:b("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:A.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}},tn=class{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}},Um=class i extends $s{constructor(){super({id:"editor.action.transformToTitlecase",label:b("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:A.writable})}_modifyText(e,t){let o=i.titleBoundary.get();return o?e.toLocaleLowerCase().replace(o,r=>r.toLocaleUpperCase()):e}};Um.titleBoundary=new tn("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");var Sc=class i extends $s{constructor(){super({id:"editor.action.transformToSnakecase",label:b("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:A.writable})}_modifyText(e,t){let o=i.caseBoundary.get(),r=i.singleLetters.get();return!o||!r?e:e.replace(o,"$1_$2").replace(r,"$1_$2$3").toLocaleLowerCase()}};Sc.caseBoundary=new tn("(\\p{Ll})(\\p{Lu})","gmu");Sc.singleLetters=new tn("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");var qm=class i extends $s{constructor(){super({id:"editor.action.transformToCamelcase",label:b("editor.transformToCamelcase","Transform to Camel Case"),alias:"Transform to Camel Case",precondition:A.writable})}_modifyText(e,t){let o=i.wordBoundary.get();if(!o)return e;let r=e.split(o);return r.shift()+r.map(s=>s.substring(0,1).toLocaleUpperCase()+s.substring(1)).join("")}};qm.wordBoundary=new tn("[_\\s-]","gm");var zu=class i extends $s{constructor(){super({id:"editor.action.transformToPascalcase",label:b("editor.transformToPascalcase","Transform to Pascal Case"),alias:"Transform to Pascal Case",precondition:A.writable})}_modifyText(e,t){let o=i.wordBoundary.get(),r=i.wordBoundaryToMaintain.get();return!o||!r?e:e.split(r).map(a=>a.split(o)).flat().map(a=>a.substring(0,1).toLocaleUpperCase()+a.substring(1)).join("")}};zu.wordBoundary=new tn("[_\\s-]","gm");zu.wordBoundaryToMaintain=new tn("(?<=\\.)","gm");var wc=class i extends $s{static isSupported(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every(t=>t.isSupported())}constructor(){super({id:"editor.action.transformToKebabcase",label:b("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:A.writable})}_modifyText(e,t){let o=i.caseBoundary.get(),r=i.singleLetters.get(),n=i.underscoreBoundary.get();return!o||!r||!n?e:e.replace(n,"$1-$3").replace(o,"$1-$2").replace(r,"$1-$2").toLocaleLowerCase()}};wc.caseBoundary=new tn("(\\p{Ll})(\\p{Lu})","gmu");wc.singleLetters=new tn("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu");wc.underscoreBoundary=new tn("(\\S)(_)(\\S)","gm");M(qE);M(KE);M($E);M(GE);M(JE);M(XE);M(YE);M(QE);M(q5);M(ZE);M(e1);M(t1);M(i1);M(o1);M(r1);M(n1);M(s1);M(a1);M(l1);M(c1);Sc.caseBoundary.isSupported()&&Sc.singleLetters.isSupported()&&M(Sc);qm.wordBoundary.isSupported()&&M(qm);zu.wordBoundary.isSupported()&&M(zu);Um.titleBoundary.isSupported()&&M(Um);wc.isSupported()&&M(wc);bt();Xe();yt();Dn();Ze();nt();X();Tt();Ci();xe();Vi();pt();ge();it();gi();Ii();re();Me();Ge();Ri();Hr();Lr();var K5=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Eb=function(i,e){return function(t,o){e(t,o,i)}},Ab,_O=new Ee("LinkedEditingInputVisible",!1),$5="linked-editing-decoration",rl=Ab=class extends B{static get(e){return e.getContribution(Ab.ID)}constructor(e,t,o,r,n){super(),this.languageConfigurationService=r,this._syncRangesToken=0,this._localToDispose=this._register(new H),this._editor=e,this._providers=o.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=_O.bindTo(t),this._debounceInformation=n.for(this._providers,"Linked Editing",{max:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new H),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequestCts=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(s=>{(s.hasChanged(70)||s.hasChanged(93))&&this.reinitialize(!1)})),this._register(this._providers.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}reinitialize(e){let t=this._editor.getModel(),o=t!==null&&(this._editor.getOption(70)||this._editor.getOption(93))&&this._providers.has(t);if(o===this._enabled&&!e||(this._enabled=o,this.clearRanges(),this._localToDispose.clear(),!o||t===null))return;this._localToDispose.add(ft.runAndSubscribe(t.onDidChangeLanguageConfiguration,()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition()}));let r=new Yo(this._debounceInformation.get(t)),n=()=>{var c;this._rangeUpdateTriggerPromise=r.trigger(()=>this.updateRanges(),(c=this._debounceDuration)!==null&&c!==void 0?c:this._debounceInformation.get(t))},s=new Yo(0),a=c=>{this._rangeSyncTriggerPromise=s.trigger(()=>this._syncRanges(c))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{n()})),this._localToDispose.add(this._editor.onDidChangeModelContent(c=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){let h=this._currentDecorations.getRange(0);if(h&&c.changes.every(p=>h.intersectRanges(p.range))){a(this._syncRangesToken);return}}n()})),this._localToDispose.add({dispose:()=>{r.dispose(),s.dispose()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._syncRangesToken||this._currentDecorations.length===0)return;let t=this._editor.getModel(),o=this._currentDecorations.getRange(0);if(!o||o.startLineNumber!==o.endLineNumber)return this.clearRanges();let r=t.getValueInRange(o);if(this._currentWordPattern){let s=r.match(this._currentWordPattern);if((s?s[0].length:0)!==r.length)return this.clearRanges()}let n=[];for(let s=1,a=this._currentDecorations.length;s<a;s++){let c=this._currentDecorations.getRange(s);if(c)if(c.startLineNumber!==c.endLineNumber)n.push({range:c,text:r});else{let h=t.getValueInRange(c),p=r,g=c.startColumn,f=c.endColumn,_=hn(h,p);g+=_,h=h.substr(_),p=p.substr(_);let y=uk(h,p);f-=y,h=h.substr(0,h.length-y),p=p.substr(0,p.length-y),(g!==f||p.length!==0)&&n.push({range:new T(c.startLineNumber,g,c.endLineNumber,f),text:p})}}if(n.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;let s=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",n),this._editor._getViewModel().setPrevEditOperationType(s)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequestCts&&(this._currentRequestCts.cancel(),this._currentRequestCts=null,this._currentRequestPosition=null)}async updateRanges(e=!1){if(!this._editor.hasModel()){this.clearRanges();return}let t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}let o=this._editor.getModel(),r=o.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===r){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){let s=this._currentDecorations.getRange(0);if(s&&s.containsPosition(t))return}}this.clearRanges(),this._currentRequestPosition=t,this._currentRequestModelVersion=r;let n=this._currentRequestCts=new _t;try{let s=new qt(!1),a=await yO(this._providers,o,t,n.token);if(this._debounceInformation.update(o,s.elapsed()),n!==this._currentRequestCts||(this._currentRequestCts=null,r!==o.getVersionId()))return;let c=[];a?.ranges&&(c=a.ranges),this._currentWordPattern=a?.wordPattern||this._languageWordPattern;let h=!1;for(let g=0,f=c.length;g<f;g++)if(T.containsPosition(c[g],t)){if(h=!0,g!==0){let _=c[g];c.splice(g,1),c.unshift(_)}break}if(!h){this.clearRanges();return}let p=c.map(g=>({range:g,options:Ab.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations.set(p),this._syncRangesToken++}catch(s){Ro(s)||Fe(s),(this._currentRequestCts===n||!this._currentRequestCts)&&this.clearRanges()}}};rl.ID="editor.contrib.linkedEditing";rl.DECORATION=ke.register({description:"linked-editing",stickiness:0,className:$5});rl=Ab=K5([Eb(1,ve),Eb(2,J),Eb(3,Ye),Eb(4,li)],rl);var d1=class extends j{constructor(){super({id:"editor.action.linkedEditing",label:b("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:W.and(A.writable,A.hasRenameProvider),kbOpts:{kbExpr:A.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){let o=e.get(tt),[r,n]=Array.isArray(t)&&t||[void 0,void 0];return We.isUri(r)&&Y.isIPosition(n)?o.openCodeEditor({resource:r},o.getActiveCodeEditor()).then(s=>{s&&(s.setPosition(n),s.invokeWithinContext(a=>(this.reportTelemetry(a,s),this.run(a,s))))},Fe):super.runCommand(e,t)}run(e,t){let o=rl.get(t);return o?Promise.resolve(o.updateRanges(!0)):Promise.resolve()}},G5=Bt.bindToContribution(rl.get);de(new G5({id:"cancelLinkedEditingInput",precondition:_O,handler:i=>i.clearRanges(),kbOpts:{kbExpr:A.editorTextFocus,weight:199,primary:9,secondary:[1033]}}));function yO(i,e,t,o){let r=i.ordered(e);return Uh(r.map(n=>async()=>{try{return await n.provideLinkedEditingRanges(e,t,o)}catch(s){$e(s);return}}),n=>!!n&&zt(n?.ranges))}var HMe=ue("editor.linkedEditingBackground",{dark:Re.fromHex("#f00").transparent(.3),light:Re.fromHex("#f00").transparent(.3),hcDark:Re.fromHex("#f00").transparent(.3),hcLight:Re.white},b("editorLinkedEditingBackground","Background color when the editor auto renames on type."));wo("_executeLinkedEditingProvider",(i,e,t)=>{let{linkedEditingRangeProvider:o}=i.get(J);return yO(o,e,t,we.None)});le(rl.ID,rl,1);M(d1);Xe();yt();Ze();yr();X();Ol();Zi();ir();Lr();Ci();xe();gi();Hr();Ge();bt();yt();Ze();X();Di();Ci();ge();hr();Rt();Ge();var u1=class{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}async resolve(e){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))}},Tb=class i{constructor(e){this._disposables=new H;let t=[];for(let[o,r]of e){let n=o.links.map(s=>new u1(s,r));t=i._union(t,n),af(o)&&this._disposables.add(o)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){let o=[],r,n,s,a;for(r=0,s=0,n=e.length,a=t.length;r<n&&s<a;){let c=e[r],h=t[s];if(T.areIntersectingOrTouching(c.range,h.range)){r++;continue}T.compareRangesUsingStarts(c.range,h.range)<0?(o.push(c),r++):(o.push(h),s++)}for(;r<n;r++)o.push(e[r]);for(;s<a;s++)o.push(t[s]);return o}};function h1(i,e,t){let o=[],r=i.ordered(e).reverse().map((n,s)=>Promise.resolve(n.provideLinks(e,t)).then(a=>{a&&(o[s]=[a,n])},$e));return Promise.all(r).then(()=>{let n=new Tb(Qi(o));return t.isCancellationRequested?(n.dispose(),new Tb([])):n})}Ue.registerCommand("_executeLinkProvider",async(i,...e)=>{let[t,o]=e;He(t instanceof We),typeof o!="number"&&(o=0);let{linkProvider:r}=i.get(J),n=i.get(Ot).getModel(t);if(!n)return[];let s=await h1(r,n,we.None);if(!s)return[];for(let c=0;c<Math.min(o,s.links.length);c++)await s.links[c].resolve(we.None);let a=s.links.slice(0);return s.dispose(),a});re();var J5=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Ib=function(i,e){return function(t,o){e(t,o,i)}},p1,Vu=p1=class extends B{static get(e){return e.getContribution(p1.ID)}constructor(e,t,o,r,n){super(),this.editor=e,this.openerService=t,this.notificationService=o,this.languageFeaturesService=r,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=n.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new ut(()=>this.computeLinksNow(),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;let s=this._register(new Ln(e));this._register(s.onMouseMoveOrRelevantKeyDown(([a,c])=>{this._onEditorMouseMove(a,c)})),this._register(s.onExecute(a=>{this.onEditorMouseUp(a)})),this._register(s.onCancel(a=>{this.cleanUpActiveLinkDecoration()})),this._register(e.onDidChangeConfiguration(a=>{a.hasChanged(71)&&(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))})),this._register(e.onDidChangeModelContent(a=>{this.editor.hasModel()&&this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))})),this._register(e.onDidChangeModel(a=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)})),this._register(e.onDidChangeModelLanguage(a=>{this.stop(),this.computeLinks.schedule(0)})),this._register(this.providers.onDidChange(a=>{this.stop(),this.computeLinks.schedule(0)})),this.computeLinks.schedule(0)}async computeLinksNow(){if(!this.editor.hasModel()||!this.editor.getOption(71))return;let e=this.editor.getModel();if(!e.isTooLargeForSyncing()&&this.providers.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=mt(t=>h1(this.providers,e,t));try{let t=new qt(!1);if(this.activeLinksList=await this.computePromise,this.debounceInformation.update(e,t.elapsed()),e.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(t){Fe(t)}finally{this.computePromise=null}}}updateDecorations(e){let t=this.editor.getOption(78)==="altKey",o=[],r=Object.keys(this.currentOccurrences);for(let s of r){let a=this.currentOccurrences[s];o.push(a.decorationId)}let n=[];if(e)for(let s of e)n.push(Pb.decoration(s,t));this.editor.changeDecorations(s=>{let a=s.deltaDecorations(o,n);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let c=0,h=a.length;c<h;c++){let p=new Pb(e[c],a[c]);this.currentOccurrences[p.decorationId]=p}})}_onEditorMouseMove(e,t){let o=this.editor.getOption(78)==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();let r=this.getLinkOccurrence(e.target.position);r&&this.editor.changeDecorations(n=>{r.activate(n,o),this.activeLinkDecorationId=r.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){let e=this.editor.getOption(78)==="altKey";if(this.activeLinkDecorationId){let t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(o=>{t.deactivate(o,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;let t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,o=!1){if(!this.openerService)return;let{link:r}=e;r.resolve(we.None).then(n=>{if(typeof n=="string"&&this.editor.hasModel()){let s=this.editor.getModel().uri;if(s.scheme===Qt.file&&n.startsWith(`${Qt.file}:`)){let a=We.parse(n);if(a.scheme===Qt.file){let c=$F(a),h=null;c.startsWith("/./")||c.startsWith("\\.\\")?h=`.${c.substr(1)}`:(c.startsWith("//./")||c.startsWith("\\\\.\\"))&&(h=`.${c.substr(2)}`),h&&(n=XF(s,h))}}}return this.openerService.open(n,{openToSide:t,fromUserGesture:o,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})},n=>{let s=n instanceof Error?n.message:n;s==="invalid"?this.notificationService.warn(b("invalid.url","Failed to open this link because it is not well-formed: {0}",r.url.toString())):s==="missing"?this.notificationService.warn(b("missing.url","Failed to open this link because its target is missing.")):Fe(n)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;let t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(let o of t){let r=this.currentOccurrences[o.id];if(r)return r}return null}isEnabled(e,t){return!!(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.computeLinks.cancel(),this.activeLinksList&&((e=this.activeLinksList)===null||e===void 0||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}};Vu.ID="editor.linkDetector";Vu=p1=J5([Ib(1,Pi),Ib(2,Pt),Ib(3,J),Ib(4,li)],Vu);var vO={general:ke.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:ke.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})},Pb=class i{static decoration(e,t){return{range:e.range,options:i._getOptions(e,t,!1)}}static _getOptions(e,t,o){let r=U({},o?vO.active:vO.general);return r.hoverMessage=X5(e,t),r}constructor(e,t){this.link=e,this.decorationId=t}activate(e,t){e.changeDecorationOptions(this.decorationId,i._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,i._getOptions(this.link,t,!1))}};function X5(i,e){let t=i.url&&/^command:/i.test(i.url.toString()),o=i.tooltip?i.tooltip:t?b("links.navigate.executeCmd","Execute command"):b("links.navigate.follow","Follow link"),r=e?po?b("links.navigate.kb.meta.mac","cmd + click"):b("links.navigate.kb.meta","ctrl + click"):po?b("links.navigate.kb.alt.mac","option + click"):b("links.navigate.kb.alt","alt + click");if(i.url){let n="";if(/^command:/i.test(i.url.toString())){let a=i.url.toString().match(/^command:([^?#]+)/);if(a){let c=a[1];n=b("tooltip.explanation","Execute command {0}",c)}}return new Gt("",!0).appendLink(i.url.toString(!0).replace(/ /g,"%20"),o,n).appendMarkdown(` (${r})`)}else return new Gt().appendText(`${o} (${r})`)}var m1=class extends j{constructor(){super({id:"editor.action.openLink",label:b("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){let o=Vu.get(t);if(!o||!t.hasModel())return;let r=t.getSelections();for(let n of r){let s=o.getLinkOccurrence(n.getEndPosition());s&&o.openLinkOccurrence(s,!1)}}};le(Vu.ID,Vu,1);M(m1);X();xe();var bO=(()=>{class i extends B{constructor(t){super(),this._editor=t,this._register(this._editor.onMouseDown(o=>{let r=this._editor.getOption(117);r>=0&&o.target.type===6&&o.target.position.column>=r&&this._editor.updateOptions({stopRenderingLineAfter:-1})}))}}return i.ID="editor.contrib.longLinesHelper",i})();le(bO.ID,bO,2);Xe();ds();X();xe();ge();ui();it();re();Wt();Me();Ge();bn();gi();Jt();re();Ri();Bi();var kb=ue("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hcDark:null,hcLight:null},b("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0);ue("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hcDark:null,hcLight:null},b("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0);ue("editor.wordHighlightTextBackground",{light:kb,dark:kb,hcDark:kb,hcLight:kb},b("wordHighlightText","Background color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0);var Fb=ue("editor.wordHighlightBorder",{light:null,dark:null,hcDark:xn,hcLight:xn},b("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable."));ue("editor.wordHighlightStrongBorder",{light:null,dark:null,hcDark:xn,hcLight:xn},b("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable."));ue("editor.wordHighlightTextBorder",{light:Fb,dark:Fb,hcDark:Fb,hcLight:Fb},b("wordHighlightTextBorder","Border color of a textual occurrence for a symbol."));var Y5=ue("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},b("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),Q5=ue("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hcDark:"#C0A0C0CC",hcLight:"#C0A0C0CC"},b("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),Z5=ue("editorOverviewRuler.wordHighlightTextForeground",{dark:Cd,light:Cd,hcDark:Cd,hcLight:Cd},b("overviewRulerWordHighlightTextForeground","Overview ruler marker color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0),e9=ke.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:It(Q5),position:Eo.Center},minimap:{color:It(ep),position:1}}),t9=ke.register({description:"word-highlight-text",stickiness:1,className:"wordHighlightText",overviewRuler:{color:It(Z5),position:Eo.Center},minimap:{color:It(ep),position:1}}),i9=ke.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",overviewRuler:{color:It(Cd),position:Eo.Center},minimap:{color:It(ep),position:1}}),o9=ke.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),r9=ke.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:It(Y5),position:Eo.Center},minimap:{color:It(ep),position:1}});function DO(i){return i===Hh.Write?e9:i===Hh.Text?t9:r9}function CO(i){return i?o9:i9}Pa((i,e)=>{let t=i.getColor(hF);t&&e.addRule(`.monaco-editor .selectionHighlight { background-color: ${t.transparent(.5)}; }`)});Je();var n9=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},s9=function(i,e){return function(t,o){e(t,o,i)}},g1;function sl(i,e){let t=e.filter(o=>!i.find(r=>r.equals(o)));if(t.length>=1){let o=t.map(n=>`line ${n.viewState.position.lineNumber} column ${n.viewState.position.column}`).join(", "),r=t.length===1?b("cursorAdded","Cursor added: {0}",o):b("cursorsAdded","Cursors added: {0}",o);Wr(r)}}var f1=class extends j{constructor(){super({id:"editor.action.insertCursorAbove",label:b("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:Q.MenubarSelectionMenu,group:"3_multi",title:b({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,o){if(!t.hasModel())return;let r=!0;o&&o.logicalLine===!1&&(r=!1);let n=t._getViewModel();if(n.cursorConfig.readOnly)return;n.model.pushStackElement();let s=n.getCursorStates();n.setCursorStates(o.source,3,rp.addCursorUp(n,s,r)),n.revealTopMostCursor(o.source),sl(s,n.getCursorStates())}},_1=class extends j{constructor(){super({id:"editor.action.insertCursorBelow",label:b("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:Q.MenubarSelectionMenu,group:"3_multi",title:b({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,o){if(!t.hasModel())return;let r=!0;o&&o.logicalLine===!1&&(r=!1);let n=t._getViewModel();if(n.cursorConfig.readOnly)return;n.model.pushStackElement();let s=n.getCursorStates();n.setCursorStates(o.source,3,rp.addCursorDown(n,s,r)),n.revealBottomMostCursor(o.source),sl(s,n.getCursorStates())}},y1=class extends j{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:b("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:Q.MenubarSelectionMenu,group:"3_multi",title:b({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,o){if(!e.isEmpty()){for(let r=e.startLineNumber;r<e.endLineNumber;r++){let n=t.getLineMaxColumn(r);o.push(new me(r,n,r,n))}e.endColumn>1&&o.push(new me(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;let o=t.getModel(),r=t.getSelections(),n=t._getViewModel(),s=n.getCursorStates(),a=[];r.forEach(c=>this.getCursorsForSelection(c,o,a)),a.length>0&&t.setSelections(a),sl(s,n.getCursorStates())}},v1=class extends j{constructor(){super({id:"editor.action.addCursorsToBottom",label:b("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;let o=t.getSelections(),r=t.getModel().getLineCount(),n=[];for(let c=o[0].startLineNumber;c<=r;c++)n.push(new me(c,o[0].startColumn,c,o[0].endColumn));let s=t._getViewModel(),a=s.getCursorStates();n.length>0&&t.setSelections(n),sl(a,s.getCursorStates())}},b1=class extends j{constructor(){super({id:"editor.action.addCursorsToTop",label:b("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;let o=t.getSelections(),r=[];for(let a=o[0].startLineNumber;a>=1;a--)r.push(new me(a,o[0].startColumn,a,o[0].endColumn));let n=t._getViewModel(),s=n.getCursorStates();r.length>0&&t.setSelections(r),sl(s,n.getCursorStates())}},Uu=class{constructor(e,t,o){this.selections=e,this.revealRange=t,this.revealScrollType=o}},Lb=class i{static create(e,t){if(!e.hasModel())return null;let o=t.getState();if(!e.hasTextFocus()&&o.isRevealed&&o.searchString.length>0)return new i(e,t,!1,o.searchString,o.wholeWord,o.matchCase,null);let r=!1,n,s,a=e.getSelections();a.length===1&&a[0].isEmpty()?(r=!0,n=!0,s=!0):(n=o.wholeWord,s=o.matchCase);let c=e.getSelection(),h,p=null;if(c.isEmpty()){let g=e.getConfiguredWordAtPosition(c.getStartPosition());if(!g)return null;h=g.word,p=new me(c.startLineNumber,g.startColumn,c.startLineNumber,g.endColumn)}else h=e.getModel().getValueInRange(c).replace(/\r\n/g,`
`);return new i(e,t,r,h,n,s,p)}constructor(e,t,o,r,n,s,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=o,this.searchText=r,this.wholeWord=n,this.matchCase=s,this.currentMatch=a}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;let e=this._getNextMatch();if(!e)return null;let t=this._editor.getSelections();return new Uu(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;let e=this._getNextMatch();if(!e)return null;let t=this._editor.getSelections();return new Uu(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){let r=this.currentMatch;return this.currentMatch=null,r}this.findController.highlightFindOptions();let e=this._editor.getSelections(),t=e[e.length-1],o=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1);return o?new me(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;let e=this._getPreviousMatch();if(!e)return null;let t=this._editor.getSelections();return new Uu(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;let e=this._getPreviousMatch();if(!e)return null;let t=this._editor.getSelections();return new Uu(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){let r=this.currentMatch;return this.currentMatch=null,r}this.findController.highlightFindOptions();let e=this._editor.getSelections(),t=e[e.length-1],o=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1);return o?new me(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn):null}selectAll(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();let t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1,1073741824)}},Nb=(()=>{class i extends B{static get(t){return t.getContribution(i.ID)}constructor(t){super(),this._sessionDispose=this._register(new H),this._editor=t,this._ignoreSelectionChange=!1,this._session=null}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(t){if(!this._session){let o=Lb.create(this._editor,t);if(!o)return;this._session=o;let r={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(r.wholeWordOverride=1,r.matchCaseOverride=1,r.isRegexOverride=2),t.getState().change(r,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(n=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(t.getState().onFindReplaceStateChange(n=>{(n.matchCase||n.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){let t={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(t,!1)}this._session=null}_setSelections(t){this._ignoreSelectionChange=!0,this._editor.setSelections(t),this._ignoreSelectionChange=!1}_expandEmptyToWord(t,o){if(!o.isEmpty())return o;let r=this._editor.getConfiguredWordAtPosition(o.getStartPosition());return r?new me(o.startLineNumber,r.startColumn,o.startLineNumber,r.endColumn):o}_applySessionResult(t){t&&(this._setSelections(t.selections),t.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(t.revealRange,t.revealScrollType))}getSession(t){return this._session}addSelectionToNextFindMatch(t){if(this._editor.hasModel()){if(!this._session){let o=this._editor.getSelections();if(o.length>1){let n=t.getState().matchCase;if(!SO(this._editor.getModel(),o,n)){let a=this._editor.getModel(),c=[];for(let h=0,p=o.length;h<p;h++)c[h]=this._expandEmptyToWord(a,o[h]);this._editor.setSelections(c);return}}}this._beginSessionIfNeeded(t),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(t){this._beginSessionIfNeeded(t),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(t){this._beginSessionIfNeeded(t),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(t){this._beginSessionIfNeeded(t),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(t){if(!this._editor.hasModel())return;let o=null,r=t.getState();if(r.isRevealed&&r.searchString.length>0&&r.isRegex){let n=this._editor.getModel();r.searchScope?o=n.findMatches(r.searchString,r.searchScope,r.isRegex,r.matchCase,r.wholeWord?this._editor.getOption(131):null,!1,1073741824):o=n.findMatches(r.searchString,!0,r.isRegex,r.matchCase,r.wholeWord?this._editor.getOption(131):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(t),!this._session)return;o=this._session.selectAll(r.searchScope)}if(o.length>0){let n=this._editor.getSelection();for(let s=0,a=o.length;s<a;s++){let c=o[s];if(c.range.intersectRanges(n)){o[s]=o[0],o[0]=c;break}}this._setSelections(o.map(s=>new me(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn)))}}}return i.ID="editor.contrib.multiCursorController",i})(),nl=class extends j{run(e,t){let o=Nb.get(t);if(!o)return;let r=t._getViewModel();if(r){let n=r.getCursorStates(),s=Ki.get(t);if(s)this._run(o,s);else{let a=e.get(ce).createInstance(Ki,t);this._run(o,a),a.dispose()}sl(n,r.getCursorStates())}}},D1=class extends nl{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:b("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:2082,weight:100},menuOpts:{menuId:Q.MenubarSelectionMenu,group:"3_multi",title:b({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}},C1=class extends nl{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:b("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:Q.MenubarSelectionMenu,group:"3_multi",title:b({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}},x1=class extends nl{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:b("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:St(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}},S1=class extends nl{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:b("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}},w1=class extends nl{constructor(){super({id:"editor.action.selectHighlights",label:b("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:3114,weight:100},menuOpts:{menuId:Q.MenubarSelectionMenu,group:"3_multi",title:b({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}},E1=class extends nl{constructor(){super({id:"editor.action.changeAll",label:b("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:W.and(A.writable,A.editorTextFocus),kbOpts:{kbExpr:A.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}},A1=class{constructor(e,t,o,r,n){this._model=e,this._searchText=t,this._matchCase=o,this._wordSeparators=r,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,n&&this._model===n._model&&this._searchText===n._searchText&&this._matchCase===n._matchCase&&this._wordSeparators===n._wordSeparators&&this._modelVersionId===n._modelVersionId&&(this._cachedFindMatches=n._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(e=>e.range),this._cachedFindMatches.sort(T.compareRangesUsingStarts)),this._cachedFindMatches}},Km=g1=class extends B{constructor(e,t){super(),this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(108),this._decorations=e.createDecorationsCollection(),this.updateSoon=this._register(new ut(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(r=>{this._isEnabled=e.getOption(108)})),this._register(e.onDidChangeCursorSelection(r=>{this._isEnabled&&(r.selection.isEmpty()?r.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(r=>{this._setState(null)})),this._register(e.onDidChangeModelContent(r=>{this._isEnabled&&this.updateSoon.schedule()}));let o=Ki.get(e);o&&this._register(o.getState().onFindReplaceStateChange(r=>{this._update()})),this.updateSoon.schedule()}_update(){this._setState(g1._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,o){if(!t||!o.hasModel())return null;let r=o.getSelection();if(r.startLineNumber!==r.endLineNumber)return null;let n=Nb.get(o);if(!n)return null;let s=Ki.get(o);if(!s)return null;let a=n.getSession(s);if(!a){let p=o.getSelections();if(p.length>1){let f=s.getState().matchCase;if(!SO(o.getModel(),p,f))return null}a=Lb.create(o,s)}if(!a||a.currentMatch||/^[ \t]+$/.test(a.searchText)||a.searchText.length>200)return null;let c=s.getState(),h=c.matchCase;if(c.isRevealed){let p=c.searchString;h||(p=p.toLowerCase());let g=a.searchText;if(h||(g=g.toLowerCase()),p===g&&a.matchCase===c.matchCase&&a.wholeWord===c.wholeWord&&!c.isRegex)return null}return new A1(o.getModel(),a.searchText,a.matchCase,a.wholeWord?o.getOption(131):null,e)}_setState(e){if(this.state=e,!this.state){this._decorations.clear();return}if(!this.editor.hasModel())return;let t=this.editor.getModel();if(t.isTooLargeForTokenization())return;let o=this.state.findMatches(),r=this.editor.getSelections();r.sort(T.compareRangesUsingStarts);let n=[];for(let h=0,p=0,g=o.length,f=r.length;h<g;){let _=o[h];if(p>=f)n.push(_),h++;else{let y=T.compareRangesUsingStarts(_,r[p]);y<0?((r[p].isEmpty()||!T.areIntersecting(_,r[p]))&&n.push(_),h++):(y>0||h++,p++)}}let s=this.editor.getOption(81)!=="off",a=this._languageFeaturesService.documentHighlightProvider.has(t)&&s,c=n.map(h=>({range:h,options:CO(a)}));this._decorations.set(c)}dispose(){this._setState(null),super.dispose()}};Km.ID="editor.contrib.selectionHighlighter";Km=g1=n9([s9(1,J)],Km);function SO(i,e,t){let o=xO(i,e[0],!t);for(let r=1,n=e.length;r<n;r++){let s=e[r];if(s.isEmpty())return!1;let a=xO(i,s,!t);if(o!==a)return!1}return!0}function xO(i,e,t){let o=i.getValueInRange(e);return t?o.toLowerCase():o}var T1=class extends j{constructor(){super({id:"editor.action.focusNextCursor",label:b("mutlicursor.focusNextCursor","Focus Next Cursor"),metadata:{description:b("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(e,t,o){if(!t.hasModel())return;let r=t._getViewModel();if(r.cursorConfig.readOnly)return;r.model.pushStackElement();let n=Array.from(r.getCursorStates()),s=n.shift();s&&(n.push(s),r.setCursorStates(o.source,3,n),r.revealPrimaryCursor(o.source,!0),sl(n,r.getCursorStates()))}},I1=class extends j{constructor(){super({id:"editor.action.focusPreviousCursor",label:b("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),metadata:{description:b("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(e,t,o){if(!t.hasModel())return;let r=t._getViewModel();if(r.cursorConfig.readOnly)return;r.model.pushStackElement();let n=Array.from(r.getCursorStates()),s=n.pop();s&&(n.unshift(s),r.setCursorStates(o.source,3,n),r.revealPrimaryCursor(o.source,!0),sl(n,r.getCursorStates()))}};le(Nb.ID,Nb,4);le(Km.ID,Km,1);M(f1);M(_1);M(y1);M(D1);M(C1);M(x1);M(S1);M(w1);M(E1);M(v1);M(b1);M(T1);M(I1);xe();xe();it();var wO="editor.action.inlineEdit.accept",EO="editor.action.inlineEdit.reject",AO="editor.action.inlineEdit.jumpTo",TO="editor.action.inlineEdit.jumpBack";X();Ao();pt();ge();X();Ao();pt();ge();Rr();bn();var a9=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},l9=function(i,e){return function(t,o){e(t,o,i)}},P1="inline-edit",Mb=class extends B{constructor(e,t,o){super(),this.editor=e,this.model=t,this.languageService=o,this.isDisposed=oo(this,!1),this.currentTextModel=ci(this.editor.onDidChangeModel,()=>this.editor.getModel()),this.uiState=Ei(this,r=>{var n;if(this.isDisposed.read(r))return;let s=this.currentTextModel.read(r);if(s!==this.model.targetTextModel.read(r))return;let a=this.model.ghostText.read(r);if(!a)return;let c=(n=this.model.range)===null||n===void 0?void 0:n.read(r);c&&c.startLineNumber===c.endLineNumber&&c.startColumn===c.endColumn&&(c=void 0);let h=(c?c.startLineNumber===c.endLineNumber:!0)&&a.parts.length===1&&a.parts[0].lines.length===1,p=a.parts.length===1&&a.parts[0].lines.every(I=>I.length===0),g=[],f=[];function _(I,k){if(f.length>0){let N=f[f.length-1];k&&N.decorations.push(new Ta(N.content.length+1,N.content.length+1+I[0].length,k,0)),N.content+=I[0],I=I.slice(1)}for(let N of I)f.push({content:N,decorations:k?[new Ta(1,N.length+1,k,0)]:[]})}let y=s.getLineContent(a.lineNumber),C,x=0;if(!p){for(let I of a.parts){let k=I.lines;c&&!h&&(_(k,P1),k=[]),C===void 0?(g.push({column:I.column,text:k[0],preview:I.preview}),k=k.slice(1)):_([y.substring(x,I.column-1)],void 0),k.length>0&&(_(k,P1),C===void 0&&I.column<=y.length&&(C=I.column)),x=I.column-1}C!==void 0&&_([y.substring(x)],void 0)}let D=C!==void 0?new Tu(C,y.length+1):void 0,E=h||!c?a.lineNumber:c.endLineNumber-1;return{inlineTexts:g,additionalLines:f,hiddenRange:D,lineNumber:E,additionalReservedLineCount:this.model.minReservedLineCount.read(r),targetTextModel:s,range:c,isSingleLine:h,isPureRemove:p,backgroundColoring:this.model.backgroundColoring.read(r)}}),this.decorations=Ei(this,r=>{let n=this.uiState.read(r);if(!n)return[];let s=[];if(n.hiddenRange&&s.push({range:n.hiddenRange.toRange(n.lineNumber),options:{inlineClassName:"inline-edit-hidden",description:"inline-edit-hidden"}}),n.range){let a=[];if(n.isSingleLine)a.push(n.range);else if(n.isPureRemove){let h=n.range.endLineNumber-n.range.startLineNumber;for(let p=0;p<h;p++){let g=n.range.startLineNumber+p,f=n.targetTextModel.getLineFirstNonWhitespaceColumn(g),_=n.targetTextModel.getLineLastNonWhitespaceColumn(g),y=new T(g,f,g,_);a.push(y)}}else{let h=n.range.endLineNumber-n.range.startLineNumber;for(let p=0;p<h;p++){let g=n.range.startLineNumber+p,f=n.targetTextModel.getLineFirstNonWhitespaceColumn(g),_=n.targetTextModel.getLineLastNonWhitespaceColumn(g),y=new T(g,f,g,_);a.push(y)}}let c=n.backgroundColoring?"inline-edit-remove backgroundColoring":"inline-edit-remove";for(let h of a)s.push({range:h,options:{inlineClassName:c,description:"inline-edit-remove"}})}for(let a of n.inlineTexts)s.push({range:T.fromPositions(new Y(n.lineNumber,a.column)),options:{description:P1,after:{content:a.text,inlineClassName:a.preview?"inline-edit-decoration-preview":"inline-edit-decoration",cursorStops:fs.Left},showIfCollapsed:!0}});return s}),this.additionalLinesWidget=this._register(new ym(this.editor,this.languageService.languageIdCodec,Ei(r=>{let n=this.uiState.read(r);return n&&!n.isPureRemove?{lineNumber:n.lineNumber,additionalLines:n.additionalLines,minReservedLineCount:n.additionalReservedLineCount,targetTextModel:n.targetTextModel}:void 0}))),this._register(Ve(()=>{this.isDisposed.set(!0,void 0)})),this._register(Sv(this.editor,this.decorations))}ownsViewZone(e){return this.additionalLinesWidget.viewZoneId===e}};Mb=a9([l9(2,pi)],Mb);Me();Je();Jt();Ge();yt();Rt();ze();Wl();bt();X();Ao();Zi();pt();Wt();Rt();Me();Je();mr();var L1=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Kn=function(i,e){return function(t,o){e(t,o,i)}},Ob,Rb=class extends B{constructor(e,t,o){super(),this.editor=e,this.model=t,this.instantiationService=o,this.alwaysShowToolbar=ci(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).showToolbar==="always"),this.sessionPosition=void 0,this.position=Ei(this,r=>{var n,s,a;let c=(n=this.model.read(r))===null||n===void 0?void 0:n.widget.model.ghostText.read(r);if(!this.alwaysShowToolbar.read(r)||!c||c.parts.length===0)return this.sessionPosition=void 0,null;let h=c.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==c.lineNumber&&(this.sessionPosition=void 0);let p=new Y(c.lineNumber,Math.min(h,(a=(s=this.sessionPosition)===null||s===void 0?void 0:s.column)!==null&&a!==void 0?a:Number.MAX_SAFE_INTEGER));return this.sessionPosition=p,p}),this._register(kd((r,n)=>{if(!this.model.read(r)||!this.alwaysShowToolbar.read(r))return;let a=n.add(this.instantiationService.createInstance(Ec,this.editor,!0,this.position));e.addContentWidget(a),n.add(Ve(()=>e.removeContentWidget(a)))}))}};Rb=L1([Kn(2,ce)],Rb);var Ec=Ob=class extends B{constructor(e,t,o,r,n,s){super(),this.editor=e,this.withBorder=t,this._position=o,this._contextKeyService=n,this._menuService=s,this.id=`InlineEditHintsContentWidget${Ob.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=wa("div.inlineEditHints",{className:this.withBorder?".withBorder":""},[wa("div@toolBar")]),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(Q.InlineEditActions,this._contextKeyService)),this.toolBar=this._register(r.createInstance(F1,this.nodes.toolBar,this.editor,Q.InlineEditToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:a=>a.startsWith("primary")},actionViewItemProvider:(a,c)=>{if(a instanceof yn)return r.createInstance(k1,a,void 0)},telemetrySource:"InlineEditToolbar"})),this._register(this.toolBar.onDidChangeDropdownVisibility(a=>{Ob._dropDownVisible=a})),this._register(Lt(a=>{this._position.read(a),this.editor.layoutContentWidget(this)})),this._register(Lt(a=>{let c=[];for(let[h,p]of this.inlineCompletionsActionsMenus.getActions())for(let g of p)g instanceof yn&&c.push(g);c.length>0&&c.unshift(new ps),this.toolBar.setAdditionalSecondaryActions(c)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}};Ec._dropDownVisible=!1;Ec.id=0;Ec=Ob=L1([Kn(3,ce),Kn(4,ve),Kn(5,pr)],Ec);var k1=class extends Md{updateLabel(){let e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){let t=wa("div.keybinding").root;this._register(new Od(t,cd,U({disableTitle:!0},e_))).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineEditStatusBarItemLabel")}}updateTooltip(){}},F1=class extends n_{constructor(e,t,o,r,n,s,a,c,h,p){super(e,U({resetMenu:o},r),n,s,a,c,h,p),this.editor=t,this.menuId=o,this.options2=r,this.menuService=n,this.contextKeyService=s,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this._store.add(this.editor.onDidChangeCursorPosition(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){var e,t,o,r,n,s,a;let c=[],h=[];Nd(this.menu,(e=this.options2)===null||e===void 0?void 0:e.menuOptions,{primary:c,secondary:h},(o=(t=this.options2)===null||t===void 0?void 0:t.toolbarOptions)===null||o===void 0?void 0:o.primaryGroup,(n=(r=this.options2)===null||r===void 0?void 0:r.toolbarOptions)===null||n===void 0?void 0:n.shouldInlineSubmenu,(a=(s=this.options2)===null||s===void 0?void 0:s.toolbarOptions)===null||a===void 0?void 0:a.useSeparatorsInPrimaryActions),h.push(...this.additionalActions),c.unshift(...this.prependedPrimaryActions),this.setActions(c,h)}setAdditionalSecondaryActions(e){Yi(this.additionalActions,e,(t,o)=>t===o)||(this.additionalActions=e,this.updateToolbar())}};F1=L1([Kn(4,pr),Kn(5,ve),Kn(6,_r),Kn(7,qe),Kn(8,ht),Kn(9,Zt)],F1);ze();ei();Ze();var c9=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},$m=function(i,e){return function(t,o){e(t,o,i)}},Ac,N1=class{constructor(e,t){this.widget=e,this.edit=t}dispose(){this.widget.dispose()}},jt=Ac=class extends B{static get(e){return e.getContribution(Ac.ID)}constructor(e,t,o,r,n,s){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=o,this.languageFeaturesService=r,this._commandService=n,this._configurationService=s,this._isVisibleContext=Ac.inlineEditVisibleContext.bindTo(this.contextKeyService),this._isCursorAtInlineEditContext=Ac.cursorAtInlineEditContext.bindTo(this.contextKeyService),this._currentEdit=this._register(Jl(this,void 0)),this._isAccepting=oo(this,!1),this._enabled=ci(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).enabled),this._fontFamily=ci(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).fontFamily),this._backgroundColoring=ci(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).backgroundColoring);let a=Ts("InlineEditController.modelContentChangedSignal",e.onDidChangeModelContent);this._register(Lt(f=>{this._enabled.read(f)&&(a.read(f),!this._isAccepting.read(f)&&this.getInlineEdit(e,!0))}));let c=ci(e.onDidChangeCursorPosition,()=>e.getPosition());this._register(Lt(f=>{if(!this._enabled.read(f))return;let _=c.read(f);_&&this.checkCursorPosition(_)})),this._register(Lt(f=>{let _=this._currentEdit.read(f);if(this._isCursorAtInlineEditContext.set(!1),!_){this._isVisibleContext.set(!1);return}this._isVisibleContext.set(!0);let y=e.getPosition();y&&this.checkCursorPosition(y)}));let h=Ts("InlineEditController.editorBlurSignal",e.onDidBlurEditorWidget);this._register(Lt(async f=>{var _;this._enabled.read(f)&&(h.read(f),!(this._configurationService.getValue("editor.experimentalInlineEdit.keepOnBlur")||e.getOption(63).keepOnBlur)&&((_=this._currentRequestCts)===null||_===void 0||_.dispose(!0),this._currentRequestCts=void 0,await this.clear(!1)))}));let p=Ts("InlineEditController.editorFocusSignal",e.onDidFocusEditorText);this._register(Lt(f=>{this._enabled.read(f)&&(p.read(f),this.getInlineEdit(e,!0))}));let g=this._register(mf());this._register(Lt(f=>{let _=this._fontFamily.read(f);g.setStyle(_===""||_==="default"?"":`
.monaco-editor .inline-edit-decoration,
.monaco-editor .inline-edit-decoration-preview,
.monaco-editor .inline-edit {
	font-family: ${_};
}`)})),this._register(new Rb(this.editor,this._currentEdit,this.instantiationService))}checkCursorPosition(e){var t;if(!this._currentEdit){this._isCursorAtInlineEditContext.set(!1);return}let o=(t=this._currentEdit.get())===null||t===void 0?void 0:t.edit;if(!o){this._isCursorAtInlineEditContext.set(!1);return}this._isCursorAtInlineEditContext.set(T.containsPosition(o.range,e))}validateInlineEdit(e,t){var o,r;if(t.text.includes(`
`)&&t.range.startLineNumber!==t.range.endLineNumber&&t.range.startColumn!==t.range.endColumn){if(t.range.startColumn!==1)return!1;let s=t.range.endLineNumber,a=t.range.endColumn,c=(r=(o=e.getModel())===null||o===void 0?void 0:o.getLineLength(s))!==null&&r!==void 0?r:0;if(a!==c+1)return!1}return!0}async fetchInlineEdit(e,t){this._currentRequestCts&&this._currentRequestCts.dispose(!0);let o=e.getModel();if(!o)return;let r=o.getVersionId(),n=this.languageFeaturesService.inlineEditProvider.all(o);if(n.length===0)return;let s=n[0];this._currentRequestCts=new _t;let a=this._currentRequestCts.token,c=t?RC.Automatic:RC.Invoke;if(t&&await d9(50,a),a.isCancellationRequested||o.isDisposed()||o.getVersionId()!==r)return;let p=await s.provideInlineEdit(o,{triggerKind:c},a);if(p&&!(a.isCancellationRequested||o.isDisposed()||o.getVersionId()!==r)&&this.validateInlineEdit(e,p))return p}async getInlineEdit(e,t){var o;this._isCursorAtInlineEditContext.set(!1),await this.clear();let r=await this.fetchInlineEdit(e,t);if(!r)return;let n=r.range.endLineNumber,s=r.range.endColumn,a=r.text.endsWith(`
`)&&!(r.range.startLineNumber===r.range.endLineNumber&&r.range.startColumn===r.range.endColumn)?r.text.slice(0,-1):r.text,c=new Hn(n,[new Ya(s,a,!1)]),h=this.instantiationService.createInstance(Mb,this.editor,{ghostText:jr(c),minReservedLineCount:jr(0),targetTextModel:jr((o=this.editor.getModel())!==null&&o!==void 0?o:void 0),range:jr(r.range),backgroundColoring:this._backgroundColoring});this._currentEdit.set(new N1(h,r),void 0)}async trigger(){await this.getInlineEdit(this.editor,!1)}async jumpBack(){this._jumpBackPosition&&(this.editor.setPosition(this._jumpBackPosition),this.editor.revealPositionInCenterIfOutsideViewport(this._jumpBackPosition))}async accept(){var e;this._isAccepting.set(!0,void 0);let t=(e=this._currentEdit.get())===null||e===void 0?void 0:e.edit;if(!t)return;let o=t.text;t.text.startsWith(`
`)&&(o=t.text.substring(1)),this.editor.pushUndoStop(),this.editor.executeEdits("acceptCurrent",[ct.replace(T.lift(t.range),o)]),t.accepted&&await this._commandService.executeCommand(t.accepted.id,...t.accepted.arguments||[]).then(void 0,$e),this.freeEdit(t),wi(r=>{this._currentEdit.set(void 0,r),this._isAccepting.set(!1,r)})}jumpToCurrent(){var e,t;this._jumpBackPosition=(e=this.editor.getSelection())===null||e===void 0?void 0:e.getStartPosition();let o=(t=this._currentEdit.get())===null||t===void 0?void 0:t.edit;if(!o)return;let r=Y.lift({lineNumber:o.range.startLineNumber,column:o.range.startColumn});this.editor.setPosition(r),this.editor.revealPositionInCenterIfOutsideViewport(r)}async clear(e=!0){var t;let o=(t=this._currentEdit.get())===null||t===void 0?void 0:t.edit;o&&o?.rejected&&e&&await this._commandService.executeCommand(o.rejected.id,...o.rejected.arguments||[]).then(void 0,$e),o&&this.freeEdit(o),this._currentEdit.set(void 0,void 0)}freeEdit(e){let t=this.editor.getModel();if(!t)return;let o=this.languageFeaturesService.inlineEditProvider.all(t);o.length!==0&&o[0].freeInlineEdit(e)}shouldShowHoverAt(e){let t=this._currentEdit.get();if(!t)return!1;let o=t.edit,r=t.widget.model;if(T.containsPosition(o.range,e.getStartPosition())||T.containsPosition(o.range,e.getEndPosition()))return!0;let s=r.ghostText.get();return s?s.parts.some(a=>e.containsPosition(new Y(s.lineNumber,a.column))):!1}shouldShowHoverAtViewZone(e){var t,o;return(o=(t=this._currentEdit.get())===null||t===void 0?void 0:t.widget.ownsViewZone(e))!==null&&o!==void 0?o:!1}};jt.ID="editor.contrib.inlineEditController";jt.inlineEditVisibleKey="inlineEditVisible";jt.inlineEditVisibleContext=new Ee(Ac.inlineEditVisibleKey,!1);jt.cursorAtInlineEditKey="cursorAtInlineEdit";jt.cursorAtInlineEditContext=new Ee(Ac.cursorAtInlineEditKey,!1);jt=Ac=c9([$m(1,ce),$m(2,ve),$m(3,J),$m(4,ht),$m(5,Oe)],jt);function d9(i,e){return new Promise(t=>{let o,r=setTimeout(()=>{o&&o.dispose(),t()},i);e&&(o=e.onCancellationRequested(()=>{clearTimeout(r),o&&o.dispose(),t()}))})}Wt();Me();var Bb=class extends j{constructor(){super({id:wO,label:"Accept Inline Edit",alias:"Accept Inline Edit",precondition:W.and(A.writable,jt.inlineEditVisibleContext),kbOpts:[{weight:101,primary:2,kbExpr:W.and(A.writable,jt.inlineEditVisibleContext,jt.cursorAtInlineEditContext)}],menuOpts:[{menuId:Q.InlineEditToolbar,title:"Accept",group:"primary",order:1}]})}async run(e,t){let o=jt.get(t);await o?.accept()}},Wb=class extends j{constructor(){let e=W.and(A.writable,W.not(jt.inlineEditVisibleKey));super({id:"editor.action.inlineEdit.trigger",label:"Trigger Inline Edit",alias:"Trigger Inline Edit",precondition:e,kbOpts:{weight:101,primary:2646,kbExpr:e}})}async run(e,t){let o=jt.get(t);o?.trigger()}},Hb=class extends j{constructor(){let e=W.and(A.writable,jt.inlineEditVisibleContext,W.not(jt.cursorAtInlineEditKey));super({id:AO,label:"Jump to Inline Edit",alias:"Jump to Inline Edit",precondition:e,kbOpts:{weight:101,primary:2646,kbExpr:e},menuOpts:[{menuId:Q.InlineEditToolbar,title:"Jump To Edit",group:"primary",order:3,when:e}]})}async run(e,t){let o=jt.get(t);o?.jumpToCurrent()}},jb=class extends j{constructor(){let e=W.and(A.writable,jt.cursorAtInlineEditContext);super({id:TO,label:"Jump Back from Inline Edit",alias:"Jump Back from Inline Edit",precondition:e,kbOpts:{weight:110,primary:2646,kbExpr:e},menuOpts:[{menuId:Q.InlineEditToolbar,title:"Jump Back",group:"primary",order:3,when:e}]})}async run(e,t){let o=jt.get(t);o?.jumpBack()}},zb=class extends j{constructor(){let e=W.and(A.writable,jt.inlineEditVisibleContext);super({id:EO,label:"Reject Inline Edit",alias:"Reject Inline Edit",precondition:e,kbOpts:{weight:100,primary:9,kbExpr:e},menuOpts:[{menuId:Q.InlineEditToolbar,title:"Reject",group:"secondary",order:2}]})}async run(e,t){let o=jt.get(t);await o?.clear()}};X();Ao();Je();mr();var u9=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},IO=function(i,e){return function(t,o){e(t,o,i)}},M1=class{constructor(e,t,o){this.owner=e,this.range=t,this.controller=o}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}},Vb=class{constructor(e,t,o){this._editor=e,this._instantiationService=t,this._telemetryService=o,this.hoverOrdinal=5}suggestHoverAnchor(e){let t=jt.get(this._editor);if(!t)return null;let o=e.target;if(o.type===8){let r=o.detail;if(t.shouldShowHoverAtViewZone(r.viewZoneId)){let n=o.range;return new xr(1e3,this,n,e.event.posx,e.event.posy,!1)}}return o.type===7&&t.shouldShowHoverAt(o.range)?new xr(1e3,this,o.range,e.event.posx,e.event.posy,!1):o.type===6&&o.detail.mightBeForeignElement&&t.shouldShowHoverAt(o.range)?new xr(1e3,this,o.range,e.event.posx,e.event.posy,!1):null}computeSync(e,t){if(this._editor.getOption(63).showToolbar!=="onHover")return[];let o=jt.get(this._editor);return o&&o.shouldShowHoverAt(e.range)?[new M1(this,e.range,o)]:[]}renderHoverParts(e,t){let o=new H;this._telemetryService.publicLog2("inlineEditHover.shown");let r=this._instantiationService.createInstance(Ec,this._editor,!1,jr(null));return e.fragment.appendChild(r.getDomNode()),o.add(r),o}};Vb=u9([IO(1,ce),IO(2,Zt)],Vb);M(Bb);M(zb);M(Hb);M(jb);M(Wb);le(jt.ID,jt,3);Po.register(Vb);BC();X();xe();it();Jt();Ge();Xe();Ze();nt();X();QC();Jt();yt();Ze();Di();Ci();pt();Jt();Ge();fn();Rt();Me();var Gs={Visible:new Ee("parameterHintsVisible",!1),MultipleSignatures:new Ee("parameterHintsMultipleSignatures",!1)};async function O1(i,e,t,o,r){let n=i.ordered(e);for(let s of n)try{let a=await s.provideSignatureHelp(e,t,r,o);if(a)return a}catch(a){$e(a)}}Ue.registerCommand("_executeSignatureHelpProvider",async(i,...e)=>{let[t,o,r]=e;He(We.isUri(t)),He(Y.isIPosition(o)),He(typeof r=="string"||!r);let n=i.get(J),s=await i.get(Si).createModelReference(t);try{let a=await O1(n.signatureHelpProvider,s.object.textEditorModel,Y.lift(o),{triggerKind:Nr.Invoke,isRetrigger:!1,triggerCharacter:r},we.None);return a?(setTimeout(()=>a.dispose(),0),a.value):void 0}finally{s.dispose()}});var al;(function(i){i.Default={type:0};class e{constructor(r,n){this.request=r,this.previouslyActiveHints=n,this.type=2}}i.Pending=e;class t{constructor(r){this.hints=r,this.type=1}}i.Active=t})(al||(al={}));var PO=(()=>{class i extends B{constructor(t,o,r=i.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new fe),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=al.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new Ut),this.triggerChars=new jl,this.retriggerChars=new jl,this.triggerId=0,this.editor=t,this.providers=o,this.throttledDelayer=new Yo(r),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(n=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(n=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(n=>this.onCursorChange(n))),this._register(this.editor.onDidChangeModelContent(n=>this.onModelContentChange())),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(n=>this.onDidType(n))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(t){this._state.type===2&&this._state.request.cancel(),this._state=t}cancel(t=!1){this.state=al.Default,this.throttledDelayer.cancel(),t||this._onChangedHints.fire(void 0)}trigger(t,o){let r=this.editor.getModel();if(!r||!this.providers.has(r))return;let n=++this.triggerId;this._pendingTriggers.push(t),this.throttledDelayer.trigger(()=>this.doTrigger(n),o).catch(Fe)}next(){if(this.state.type!==1)return;let t=this.state.hints.signatures.length,o=this.state.hints.activeSignature,r=o%t===t-1,n=this.editor.getOption(86).cycle;if((t<2||r)&&!n){this.cancel();return}this.updateActiveSignature(r&&n?0:o+1)}previous(){if(this.state.type!==1)return;let t=this.state.hints.signatures.length,o=this.state.hints.activeSignature,r=o===0,n=this.editor.getOption(86).cycle;if((t<2||r)&&!n){this.cancel();return}this.updateActiveSignature(r&&n?t-1:o-1)}updateActiveSignature(t){this.state.type===1&&(this.state=new al.Active(he(U({},this.state.hints),{activeSignature:t})),this._onChangedHints.fire(this.state.hints))}async doTrigger(t){let o=this.state.type===1||this.state.type===2,r=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;let n=this._pendingTriggers.reduce(h9);this._pendingTriggers=[];let s={triggerKind:n.triggerKind,triggerCharacter:n.triggerCharacter,isRetrigger:o,activeSignatureHelp:r};if(!this.editor.hasModel())return!1;let a=this.editor.getModel(),c=this.editor.getPosition();this.state=new al.Pending(mt(h=>O1(this.providers,a,c,s,h)),r);try{let h=await this.state.request;return t!==this.triggerId?(h?.dispose(),!1):!h||!h.value.signatures||h.value.signatures.length===0?(h?.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new al.Active(h.value),this._lastSignatureHelpResult.value=h,this._onChangedHints.fire(this.state.hints),!0)}catch(h){return t===this.triggerId&&(this.state=al.Default),Fe(h),!1}}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars.clear(),this.retriggerChars.clear();let t=this.editor.getModel();if(t)for(let o of this.providers.ordered(t)){for(let r of o.signatureHelpTriggerCharacters||[])if(r.length){let n=r.charCodeAt(0);this.triggerChars.add(n),this.retriggerChars.add(n)}for(let r of o.signatureHelpRetriggerCharacters||[])r.length&&this.retriggerChars.add(r.charCodeAt(0))}}onDidType(t){if(!this.triggerOnType)return;let o=t.length-1,r=t.charCodeAt(o);(this.triggerChars.has(r)||this.isTriggered&&this.retriggerChars.has(r))&&this.trigger({triggerKind:Nr.TriggerCharacter,triggerCharacter:t.charAt(o)})}onCursorChange(t){t.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:Nr.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:Nr.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(86).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}return i.DEFAULT_DELAY=120,i})();function h9(i,e){switch(e.triggerKind){case Nr.Invoke:return e;case Nr.ContentChange:return i;case Nr.TriggerCharacter:default:return e}}re();Me();Je();ze();xi();nt();X();Tt();Di();Rr();re();Me();Ri();to();Lr();mr();var p9=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Ub=function(i,e){return function(t,o){e(t,o,i)}},R1,zo=te,m9=kt("parameter-hints-next",be.chevronDown,b("parameterHintsNextIcon","Icon for show next parameter hint.")),g9=kt("parameter-hints-previous",be.chevronUp,b("parameterHintsPreviousIcon","Icon for show previous parameter hint.")),Gm=R1=class extends B{constructor(e,t,o,r,n,s){super(),this.editor=e,this.model=t,this.telemetryService=s,this.renderDisposeables=this._register(new H),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new vr({editor:e},n,r)),this.keyVisible=Gs.Visible.bindTo(o),this.keyMultipleSignatures=Gs.MultipleSignatures.bindTo(o)}createParameterHintDOMNodes(){let e=zo(".editor-widget.parameter-hints-widget"),t=Z(e,zo(".phwrapper"));t.tabIndex=-1;let o=Z(t,zo(".controls")),r=Z(o,zo(".button"+je.asCSSSelector(g9))),n=Z(o,zo(".overloads")),s=Z(o,zo(".button"+je.asCSSSelector(m9)));this._register(Ne(r,"click",f=>{Rl.stop(f),this.previous()})),this._register(Ne(s,"click",f=>{Rl.stop(f),this.next()}));let a=zo(".body"),c=new Ff(a,{alwaysConsumeMouseWheel:!0});this._register(c),t.appendChild(c.getDomNode());let h=Z(a,zo(".signature")),p=Z(a,zo(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:h,overloads:n,docs:p,scrollbar:c},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(f=>{this.visible&&this.editor.layoutContentWidget(this)}));let g=()=>{if(!this.domNodes)return;let f=this.editor.getOption(50);this.domNodes.element.style.fontSize=`${f.fontSize}px`,this.domNodes.element.style.lineHeight=`${f.lineHeight/f.fontSize}`};g(),this._register(ft.chain(this.editor.onDidChangeConfiguration.bind(this.editor),f=>f.filter(_=>_.hasChanged(50)))(g)),this._register(this.editor.onDidLayoutChange(f=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{var e;(e=this.domNodes)===null||e===void 0||e.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){var e;this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,(e=this.domNodes)===null||e===void 0||e.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){var t;if(this.renderDisposeables.clear(),!this.domNodes)return;let o=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",o),this.keyMultipleSignatures.set(o),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";let r=e.signatures[e.activeSignature];if(!r)return;let n=Z(this.domNodes.signature,zo(".code")),s=this.editor.getOption(50);n.style.fontSize=`${s.fontSize}px`,n.style.fontFamily=s.fontFamily;let a=r.parameters.length>0,c=(t=r.activeParameter)!==null&&t!==void 0?t:e.activeParameter;if(a)this.renderParameters(n,r,c);else{let g=Z(n,zo("span"));g.textContent=r.label}let h=r.parameters[c];if(h?.documentation){let g=zo("span.documentation");if(typeof h.documentation=="string")g.textContent=h.documentation;else{let f=this.renderMarkdownDocs(h.documentation);g.appendChild(f.element)}Z(this.domNodes.docs,zo("p",{},g))}if(r.documentation!==void 0)if(typeof r.documentation=="string")Z(this.domNodes.docs,zo("p",{},r.documentation));else{let g=this.renderMarkdownDocs(r.documentation);Z(this.domNodes.docs,g.element)}let p=this.hasDocs(r,h);if(this.domNodes.signature.classList.toggle("has-docs",p),this.domNodes.docs.classList.toggle("empty",!p),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,h){let g="",f=r.parameters[c];Array.isArray(f.label)?g=r.label.substring(f.label[0],f.label[1]):g=f.label,f.documentation&&(g+=typeof f.documentation=="string"?`, ${f.documentation}`:`, ${f.documentation.value}`),r.documentation&&(g+=typeof r.documentation=="string"?`, ${r.documentation}`:`, ${r.documentation.value}`),this.announcedLabel!==g&&(ai(b("hint","{0}, hint",g)),this.announcedLabel=g)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){let t=new qt,o=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var n;(n=this.domNodes)===null||n===void 0||n.scrollbar.scanDomNode()}}));o.element.classList.add("markdown-docs");let r=t.elapsed();return r>300&&this.telemetryService.publicLog2("parameterHints.parseMarkdown",{renderDuration:r}),o}hasDocs(e,t){return!!(t&&typeof t.documentation=="string"&&ba(t.documentation).length>0||t&&typeof t.documentation=="object"&&ba(t.documentation).value.length>0||e.documentation&&typeof e.documentation=="string"&&ba(e.documentation).length>0||e.documentation&&typeof e.documentation=="object"&&ba(e.documentation.value).length>0)}renderParameters(e,t,o){let[r,n]=this.getParameterLabelOffsets(t,o),s=document.createElement("span");s.textContent=t.label.substring(0,r);let a=document.createElement("span");a.textContent=t.label.substring(r,n),a.className="parameter active";let c=document.createElement("span");c.textContent=t.label.substring(n),Z(e,s,a,c)}getParameterLabelOffsets(e,t){let o=e.parameters[t];if(o){if(Array.isArray(o.label))return o.label;if(o.label.length){let r=new RegExp(`(\\W|^)${us(o.label)}(?=\\W|$)`,"g");r.test(e.label);let n=r.lastIndex-o.label.length;return n>=0?[n,r.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return R1.ID}updateMaxHeight(){if(!this.domNodes)return;let t=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=t;let o=this.domNodes.element.getElementsByClassName("phwrapper");o.length&&(o[0].style.maxHeight=t)}};Gm.ID="editor.widget.parameterHintsWidget";Gm=R1=p9([Ub(2,ve),Ub(3,Pi),Ub(4,pi),Ub(5,Zt)],Gm);ue("editorHoverWidget.highlightForeground",{dark:wn,light:wn,hcDark:wn,hcLight:wn},b("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));var f9=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},kO=function(i,e){return function(t,o){e(t,o,i)}},B1,Tc=B1=class extends B{static get(e){return e.getContribution(B1.ID)}constructor(e,t,o){super(),this.editor=e,this.model=this._register(new PO(e,o.signatureHelpProvider)),this._register(this.model.onChangedHints(r=>{var n;r?(this.widget.value.show(),this.widget.value.render(r)):(n=this.widget.rawValue)===null||n===void 0||n.hide()})),this.widget=new gd(()=>this._register(t.createInstance(Gm,this.editor,this.model)))}cancel(){this.model.cancel()}previous(){var e;(e=this.widget.rawValue)===null||e===void 0||e.previous()}next(){var e;(e=this.widget.rawValue)===null||e===void 0||e.next()}trigger(e){this.model.trigger(e,0)}};Tc.ID="editor.controller.parameterHints";Tc=B1=f9([kO(1,ce),kO(2,J)],Tc);var W1=class extends j{constructor(){super({id:"editor.action.triggerParameterHints",label:b("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:A.hasSignatureHelpProvider,kbOpts:{kbExpr:A.editorTextFocus,primary:3082,weight:100}})}run(e,t){let o=Tc.get(t);o?.trigger({triggerKind:Nr.Invoke})}};le(Tc.ID,Tc,2);M(W1);var H1=175,j1=Bt.bindToContribution(Tc.get);de(new j1({id:"closeParameterHints",precondition:Gs.Visible,handler:i=>i.cancel(),kbOpts:{weight:H1,kbExpr:A.focus,primary:9,secondary:[1033]}}));de(new j1({id:"showPrevParameterHint",precondition:W.and(Gs.Visible,Gs.MultipleSignatures),handler:i=>i.previous(),kbOpts:{weight:H1,kbExpr:A.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}}));de(new j1({id:"showNextParameterHint",precondition:W.and(Gs.Visible,Gs.MultipleSignatures),handler:i=>i.next(),kbOpts:{weight:H1,kbExpr:A.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));Xe();yt();Ze();yr();X();Di();Ci();xe();Vi();pt();ge();it();Jt();Ge();Xl();re();Wt();YC();Me();Je();bd();ms();mr();ze();_k();cL();bt();Xe();yt();xi();nt();X();Lr();Di();pt();ge();Jt();re();re();Me();bd();Ri();Bi();var _9=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},qb=function(i,e){return function(t,o){e(t,o,i)}},y9=!1,Ic=new Ee("renameInputVisible",!1,b("renameInputVisible","Whether the rename input widget is visible")),qBe=new Ee("renameInputFocused",!1,b("renameInputFocused","Whether the rename input widget is focused")),Kb=class{constructor(e,t,o,r,n,s){this._editor=e,this._acceptKeybindings=t,this._themeService=o,this._keybindingService=r,this._logService=s,this.allowEditorOverflow=!0,this._disposables=new H,this._visibleContextKey=Ic.bindTo(n),this._isEditingRenameCandidate=!1,this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,this._candidates=new Set,this._beforeFirstInputFieldEditSW=new qt,this._inputWithButton=new V1,this._disposables.add(this._inputWithButton),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(a=>{a.hasChanged(50)&&this._updateFont()})),this._disposables.add(o.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._domNode.appendChild(this._inputWithButton.domNode),this._renameCandidateListView=this._disposables.add(new z1(this._domNode,{fontInfo:this._editor.getOption(50),onFocusChange:e=>{this._inputWithButton.input.value=e,this._isEditingRenameCandidate=!1},onSelectionChange:()=>{this._isEditingRenameCandidate=!1,this.acceptInput(!1)}})),this._disposables.add(this._inputWithButton.onDidInputChange(()=>{var e,t,o,r;((e=this._renameCandidateListView)===null||e===void 0?void 0:e.focusedCandidate)!==void 0&&(this._isEditingRenameCandidate=!0),(t=this._timeBeforeFirstInputFieldEdit)!==null&&t!==void 0||(this._timeBeforeFirstInputFieldEdit=this._beforeFirstInputFieldEditSW.elapsed()),((o=this._renameCandidateProvidersCts)===null||o===void 0?void 0:o.token.isCancellationRequested)===!1&&this._renameCandidateProvidersCts.cancel(),(r=this._renameCandidateListView)===null||r===void 0||r.clearFocus()})),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())),this._domNode}_updateStyles(e){var t,o,r,n,s;if(!this._domNode)return;let a=e.getColor(SF),c=e.getColor(wF);this._domNode.style.backgroundColor=String((t=e.getColor(Vl))!==null&&t!==void 0?t:""),this._domNode.style.boxShadow=a?` 0 0 8px 2px ${a}`:"",this._domNode.style.border=c?`1px solid ${c}`:"",this._domNode.style.color=String((o=e.getColor(EF))!==null&&o!==void 0?o:"");let h=e.getColor(AF);this._inputWithButton.domNode.style.backgroundColor=String((r=e.getColor(a0))!==null&&r!==void 0?r:""),this._inputWithButton.input.style.backgroundColor=String((n=e.getColor(a0))!==null&&n!==void 0?n:""),this._inputWithButton.domNode.style.borderWidth=h?"1px":"0px",this._inputWithButton.domNode.style.borderStyle=h?"solid":"none",this._inputWithButton.domNode.style.borderColor=(s=h?.toString())!==null&&s!==void 0?s:"none"}_updateFont(){if(this._domNode===void 0)return;He(this._label!==void 0,"RenameWidget#_updateFont: _label must not be undefined given _domNode is defined"),this._editor.applyFontInfo(this._inputWithButton.input);let e=this._editor.getOption(50);this._label.style.fontSize=`${this._computeLabelFontSize(e.fontSize)}px`}_computeLabelFontSize(e){return e*.8}getPosition(){if(!this._visible||!this._editor.hasModel()||!this._editor.getDomNode())return null;let e=gn(this.getDomNode().ownerDocument.body),t=$t(this._editor.getDomNode()),o=this._getTopForPosition();this._nPxAvailableAbove=o+t.top,this._nPxAvailableBelow=e.height-this._nPxAvailableAbove;let r=this._editor.getOption(67),{totalHeight:n}=U1.getLayoutInfo({lineHeight:r}),s=this._nPxAvailableBelow>n*6?[2,1]:[1,2];return{position:this._position,preference:s}}beforeRender(){var e,t;let[o,r]=this._acceptKeybindings;return this._label.innerText=b({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",(e=this._keybindingService.lookupKeybinding(o))===null||e===void 0?void 0:e.getLabel(),(t=this._keybindingService.lookupKeybinding(r))===null||t===void 0?void 0:t.getLabel()),this._domNode.style.minWidth="200px",null}afterRender(e){if(this._trace("invoking afterRender, position: ",e?"not null":"null"),e===null){this.cancelInput(!0,"afterRender (because position is null)");return}if(!this._editor.hasModel()||!this._editor.getDomNode())return;He(this._renameCandidateListView),He(this._nPxAvailableAbove!==void 0),He(this._nPxAvailableBelow!==void 0);let t=Sa(this._inputWithButton.domNode),o=Sa(this._label),r;e===2?r=this._nPxAvailableBelow:r=this._nPxAvailableAbove,this._renameCandidateListView.layout({height:r-o-t,width:xo(this._inputWithButton.domNode)})}acceptInput(e){var t;this._trace("invoking acceptInput"),(t=this._currentAcceptInput)===null||t===void 0||t.call(this,e)}cancelInput(e,t){var o;this._trace(`invoking cancelInput, caller: ${t}, _currentCancelInput: ${this._currentAcceptInput?"not undefined":"undefined"}`),(o=this._currentCancelInput)===null||o===void 0||o.call(this,e)}focusNextRenameSuggestion(){var e;!((e=this._renameCandidateListView)===null||e===void 0)&&e.focusNext()||(this._inputWithButton.input.value=this._currentName)}focusPreviousRenameSuggestion(){var e;!((e=this._renameCandidateListView)===null||e===void 0)&&e.focusPrevious()||(this._inputWithButton.input.value=this._currentName)}getInput(e,t,o,r,n){let{start:s,end:a}=this._getSelection(e,t);this._renameCts=n;let c=new H;this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,r===void 0?this._inputWithButton.button.style.display="none":(this._inputWithButton.button.style.display="flex",this._requestRenameCandidatesOnce=r,this._requestRenameCandidates(t,!1),c.add(Ne(this._inputWithButton.button,"click",()=>this._requestRenameCandidates(t,!0))),c.add(Ne(this._inputWithButton.button,at.KEY_DOWN,p=>{let g=new Vh(p);(g.equals(3)||g.equals(10))&&(g.stopPropagation(),g.preventDefault(),this._requestRenameCandidates(t,!0))}))),this._isEditingRenameCandidate=!1,this._domNode.classList.toggle("preview",o),this._position=new Y(e.startLineNumber,e.startColumn),this._currentName=t,this._inputWithButton.input.value=t,this._inputWithButton.input.setAttribute("selectionStart",s.toString()),this._inputWithButton.input.setAttribute("selectionEnd",a.toString()),this._inputWithButton.input.size=Math.max((e.endColumn-e.startColumn)*1.1,20),this._beforeFirstInputFieldEditSW.reset(),c.add(Ve(()=>{this._renameCts=void 0,n.dispose(!0)})),c.add(Ve(()=>{this._renameCandidateProvidersCts!==void 0&&(this._renameCandidateProvidersCts.dispose(!0),this._renameCandidateProvidersCts=void 0)})),c.add(Ve(()=>this._candidates.clear()));let h=new yd;return h.p.finally(()=>{c.dispose(),this._hide()}),this._currentCancelInput=p=>{var g;return this._trace("invoking _currentCancelInput"),this._currentAcceptInput=void 0,this._currentCancelInput=void 0,(g=this._renameCandidateListView)===null||g===void 0||g.clearCandidates(),h.complete(p),!0},this._currentAcceptInput=p=>{this._trace("invoking _currentAcceptInput"),He(this._renameCandidateListView!==void 0);let g=this._renameCandidateListView.nCandidates,f,_,y=this._renameCandidateListView.focusedCandidate;if(y!==void 0?(this._trace("using new name from renameSuggestion"),f=y,_={k:"renameSuggestion"}):(this._trace("using new name from inputField"),f=this._inputWithButton.input.value,_=this._isEditingRenameCandidate?{k:"userEditedRenameSuggestion"}:{k:"inputField"}),f===t||f.trim().length===0){this.cancelInput(!0,"_currentAcceptInput (because newName === value || newName.trim().length === 0)");return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,this._renameCandidateListView.clearCandidates(),h.complete({newName:f,wantsPreview:o&&p,stats:{source:_,nRenameSuggestions:g,timeBeforeFirstInputFieldEdit:this._timeBeforeFirstInputFieldEdit,nRenameSuggestionsInvocations:this._nRenameSuggestionsInvocations,hadAutomaticRenameSuggestionsInvocation:this._hadAutomaticRenameSuggestionsInvocation}})},c.add(n.token.onCancellationRequested(()=>this.cancelInput(!0,"cts.token.onCancellationRequested"))),y9||c.add(this._editor.onDidBlurEditorWidget(()=>{var p;return this.cancelInput(!(!((p=this._domNode)===null||p===void 0)&&p.ownerDocument.hasFocus()),"editor.onDidBlurEditorWidget")})),this._show(),h.p}_requestRenameCandidates(e,t){if(this._requestRenameCandidatesOnce!==void 0&&(this._renameCandidateProvidersCts!==void 0&&this._renameCandidateProvidersCts.dispose(!0),He(this._renameCts),this._inputWithButton.buttonState!=="stop")){this._renameCandidateProvidersCts=new _t;let o=t?jh.Invoke:jh.Automatic,r=this._requestRenameCandidatesOnce(o,this._renameCandidateProvidersCts.token);if(r.length===0){this._inputWithButton.setSparkleButton();return}t||(this._hadAutomaticRenameSuggestionsInvocation=!0),this._nRenameSuggestionsInvocations+=1,this._inputWithButton.setStopButton(),this._updateRenameCandidates(r,e,this._renameCts.token)}}_getSelection(e,t){He(this._editor.hasModel());let o=this._editor.getSelection(),r=0,n=t.length;return!T.isEmpty(o)&&!T.spansMultipleLines(o)&&T.containsRange(e,o)&&(r=Math.max(0,o.startColumn-e.startColumn),n=Math.min(e.endColumn,o.endColumn)-e.startColumn),{start:r,end:n}}_show(){this._trace("invoking _show"),this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._inputWithButton.input.focus(),this._inputWithButton.input.setSelectionRange(parseInt(this._inputWithButton.input.getAttribute("selectionStart")),parseInt(this._inputWithButton.input.getAttribute("selectionEnd")))},100)}async _updateRenameCandidates(e,t,o){let r=(...h)=>this._trace("_updateRenameCandidates",...h);r("start");let n=await pn(Promise.allSettled(e),o);if(this._inputWithButton.setSparkleButton(),n===void 0){r("returning early - received updateRenameCandidates results - undefined");return}let s=n.flatMap(h=>h.status==="fulfilled"&&ad(h.value)?h.value:[]);r(`received updateRenameCandidates results - total (unfiltered) ${s.length} candidates.`);let a=Xg(s,h=>h.newSymbolName);r(`distinct candidates - ${a.length} candidates.`);let c=a.filter(({newSymbolName:h})=>h.trim().length>0&&h!==this._inputWithButton.input.value&&h!==t&&!this._candidates.has(h));if(r(`valid distinct candidates - ${s.length} candidates.`),c.forEach(h=>this._candidates.add(h.newSymbolName)),c.length<1){r("returning early - no valid distinct candidates");return}r("setting candidates"),this._renameCandidateListView.setCandidates(c),r("asking editor to re-layout"),this._editor.layoutContentWidget(this)}_hide(){this._trace("invoked _hide"),this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}_getTopForPosition(){let e=this._editor.getVisibleRanges(),t;return e.length>0?t=e[0].startLineNumber:(this._logService.warn("RenameWidget#_getTopForPosition: this should not happen - visibleRanges is empty"),t=Math.max(1,this._position.lineNumber-5)),this._editor.getTopForLineNumber(this._position.lineNumber)-this._editor.getTopForLineNumber(t)}_trace(...e){this._logService.trace("RenameWidget",...e)}};Kb=_9([qb(2,mi),qb(3,qe),qb(4,ve),qb(5,er)],Kb);var z1=class i{constructor(e,t){this._disposables=new H,this._availableHeight=0,this._minimumWidth=0,this._lineHeight=t.fontInfo.lineHeight,this._typicalHalfwidthCharacterWidth=t.fontInfo.typicalHalfwidthCharacterWidth,this._listContainer=document.createElement("div"),this._listContainer.className="rename-box rename-candidate-list-container",e.appendChild(this._listContainer),this._listWidget=i._createListWidget(this._listContainer,this._candidateViewHeight,t.fontInfo),this._listWidget.onDidChangeFocus(o=>{o.elements.length===1&&t.onFocusChange(o.elements[0].newSymbolName)},this._disposables),this._listWidget.onDidChangeSelection(o=>{o.elements.length===1&&t.onSelectionChange()},this._disposables),this._disposables.add(this._listWidget.onDidBlur(o=>{this._listWidget.setFocus([])})),this._listWidget.style(Xf({listInactiveFocusForeground:Ul,listInactiveFocusBackground:ql}))}dispose(){this._listWidget.dispose(),this._disposables.dispose()}layout({height:e,width:t}){this._availableHeight=e,this._minimumWidth=t}setCandidates(e){this._listWidget.splice(0,0,e);let t=this._pickListHeight(this._listWidget.length),o=this._pickListWidth(e);this._listWidget.layout(t,o),this._listContainer.style.height=`${t}px`,this._listContainer.style.width=`${o}px`,Wr(b("renameSuggestionsReceivedAria","Received {0} rename suggestions",e.length))}clearCandidates(){this._listContainer.style.height="0px",this._listContainer.style.width="0px",this._listWidget.splice(0,this._listWidget.length,[])}get nCandidates(){return this._listWidget.length}get focusedCandidate(){if(this._listWidget.length===0)return;let e=this._listWidget.getSelectedElements()[0];if(e!==void 0)return e.newSymbolName;let t=this._listWidget.getFocusedElements()[0];if(t!==void 0)return t.newSymbolName}focusNext(){if(this._listWidget.length===0)return!1;let e=this._listWidget.getFocus();if(e.length===0)return this._listWidget.focusFirst(),this._listWidget.reveal(0),!0;if(e[0]===this._listWidget.length-1)return this._listWidget.setFocus([]),this._listWidget.reveal(0),!1;{this._listWidget.focusNext();let t=this._listWidget.getFocus()[0];return this._listWidget.reveal(t),!0}}focusPrevious(){if(this._listWidget.length===0)return!1;let e=this._listWidget.getFocus();if(e.length===0){this._listWidget.focusLast();let t=this._listWidget.getFocus()[0];return this._listWidget.reveal(t),!0}else{if(e[0]===0)return this._listWidget.setFocus([]),!1;{this._listWidget.focusPrevious();let t=this._listWidget.getFocus()[0];return this._listWidget.reveal(t),!0}}}clearFocus(){this._listWidget.setFocus([])}get _candidateViewHeight(){let{totalHeight:e}=U1.getLayoutInfo({lineHeight:this._lineHeight});return e}_pickListHeight(e){let t=this._candidateViewHeight*e;return Math.min(t,this._availableHeight,this._candidateViewHeight*7)}_pickListWidth(e){let t=Math.ceil(Math.max(...e.map(r=>r.newSymbolName.length))*this._typicalHalfwidthCharacterWidth);return Math.max(this._minimumWidth,25+t+10)}static _createListWidget(e,t,o){let r=new class{getTemplateId(s){return"candidate"}getHeight(s){return t}},n=new class{constructor(){this.templateId="candidate"}renderTemplate(s){return new U1(s,o)}renderElement(s,a,c){c.populate(s)}disposeTemplate(s){s.dispose()}};return new Fd("NewSymbolNameCandidates",e,r,[n],{keyboardSupport:!1,mouseSupport:!0,multipleSelectionSupport:!1})}},V1=class{constructor(){this._onDidInputChange=new fe,this.onDidInputChange=this._onDidInputChange.event,this._disposables=new H}get domNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="rename-input-with-button",this._domNode.style.display="flex",this._domNode.style.flexDirection="row",this._domNode.style.alignItems="center",this._inputNode=document.createElement("input"),this._inputNode.className="rename-input",this._inputNode.type="text",this._inputNode.style.border="none",this._inputNode.setAttribute("aria-label",b("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._inputNode),this._buttonNode=document.createElement("div"),this._buttonNode.className="rename-suggestions-button",this._buttonNode.setAttribute("tabindex","0"),this._buttonGenHoverText=b("generateRenameSuggestionsButton","Generate new name suggestions"),this._buttonCancelHoverText=b("cancelRenameSuggestionsButton","Cancel"),this._buttonHover=FL().setupUpdatableHover(Na("element"),this._buttonNode,this._buttonGenHoverText),this._disposables.add(this._buttonHover),this._domNode.appendChild(this._buttonNode),this._disposables.add(Ne(this.input,at.INPUT,()=>this._onDidInputChange.fire())),this._disposables.add(Ne(this.input,at.KEY_DOWN,e=>{let t=new Vh(e);(t.keyCode===15||t.keyCode===17)&&this._onDidInputChange.fire()})),this._disposables.add(Ne(this.input,at.CLICK,()=>this._onDidInputChange.fire())),this._disposables.add(Ne(this.input,at.FOCUS,()=>{this.domNode.style.outlineWidth="1px",this.domNode.style.outlineStyle="solid",this.domNode.style.outlineOffset="-1px",this.domNode.style.outlineColor="var(--vscode-focusBorder)"})),this._disposables.add(Ne(this.input,at.BLUR,()=>{this.domNode.style.outline="none"}))),this._domNode}get input(){return He(this._inputNode),this._inputNode}get button(){return He(this._buttonNode),this._buttonNode}get buttonState(){return this._buttonState}setSparkleButton(){var e,t;this._buttonState="sparkle",(e=this._sparkleIcon)!==null&&e!==void 0||(this._sparkleIcon=Vf(be.sparkle)),Co(this.button),this.button.appendChild(this._sparkleIcon),this.button.setAttribute("aria-label","Generating new name suggestions"),(t=this._buttonHover)===null||t===void 0||t.update(this._buttonGenHoverText),this.input.focus()}setStopButton(){var e,t;this._buttonState="stop",(e=this._stopIcon)!==null&&e!==void 0||(this._stopIcon=Vf(be.primitiveSquare)),Co(this.button),this.button.appendChild(this._stopIcon),this.button.setAttribute("aria-label","Cancel generating new name suggestions"),(t=this._buttonHover)===null||t===void 0||t.update(this._buttonCancelHoverText),this.input.focus()}dispose(){this._disposables.dispose()}},U1=(()=>{class i{constructor(t,o){this._domNode=document.createElement("div"),this._domNode.className="rename-box rename-candidate",this._domNode.style.display="flex",this._domNode.style.columnGap="5px",this._domNode.style.alignItems="center",this._domNode.style.height=`${o.lineHeight}px`,this._domNode.style.padding=`${i._PADDING}px`;let r=document.createElement("div");r.style.display="flex",r.style.alignItems="center",r.style.width=r.style.height=`${o.lineHeight*.8}px`,this._domNode.appendChild(r),this._icon=Vf(be.sparkle),this._icon.style.display="none",r.appendChild(this._icon),this._label=document.createElement("div"),gf(this._label,o),this._domNode.appendChild(this._label),t.appendChild(this._domNode)}populate(t){this._updateIcon(t),this._updateLabel(t)}_updateIcon(t){var o;let r=!!(!((o=t.tags)===null||o===void 0)&&o.includes(ok.AIGenerated));this._icon.style.display=r?"inherit":"none"}_updateLabel(t){this._label.innerText=t.newSymbolName}static getLayoutInfo({lineHeight:t}){return{totalHeight:t+i._PADDING*2}}dispose(){}}return i._PADDING=2,i})();var v9=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},ll=function(i,e){return function(t,o){e(t,o,i)}},q1,Jm=class{constructor(e,t,o){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=o.ordered(e)}hasProvider(){return this._providers.length>0}async resolveRenameLocation(e){let t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){let r=this._providers[this._providerRenameIdx];if(!r.resolveRenameLocation)break;let n=await r.resolveRenameLocation(this.model,this.position,e);if(n){if(n.rejectReason){t.push(n.rejectReason);continue}return n}}this._providerRenameIdx=0;let o=this.model.getWordAtPosition(this.position);return o?{range:new T(this.position.lineNumber,o.startColumn,this.position.lineNumber,o.endColumn),text:o.word,rejectReason:t.length>0?t.join(`
`):void 0}:{range:T.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join(`
`):void 0}}async provideRenameEdits(e,t){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)}async _provideRenameEdits(e,t,o,r){let n=this._providers[t];if(!n)return{edits:[],rejectReason:o.join(`
`)};let s=await n.provideRenameEdits(this.model,this.position,e,r);if(s){if(s.rejectReason)return this._provideRenameEdits(e,t+1,o.concat(s.rejectReason),r)}else return this._provideRenameEdits(e,t+1,o.concat(b("no result","No result.")),r);return s}};async function b9(i,e,t,o){let r=new Jm(e,t,i),n=await r.resolveRenameLocation(we.None);return n?.rejectReason?{edits:[],rejectReason:n.rejectReason}:r.provideRenameEdits(o,we.None)}var Js=q1=class{static get(e){return e.getContribution(q1.ID)}constructor(e,t,o,r,n,s,a,c,h){this.editor=e,this._instaService=t,this._notificationService=o,this._bulkEditService=r,this._progressService=n,this._logService=s,this._configService=a,this._languageFeaturesService=c,this._telemetryService=h,this._disposableStore=new H,this._cts=new _t,this._renameWidget=this._disposableStore.add(this._instaService.createInstance(Kb,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}async run(){var e,t;let o=this._logService.trace.bind(this._logService,"[rename]");if(this._cts.dispose(!0),this._cts=new _t,!this.editor.hasModel()){o("editor has no model");return}let r=this.editor.getPosition(),n=new Jm(this.editor.getModel(),r,this._languageFeaturesService.renameProvider);if(!n.hasProvider()){o("skeleton has no provider");return}let s=new In(this.editor,5,void 0,this._cts.token),a;try{o("resolving rename location");let x=n.resolveRenameLocation(s.token);this._progressService.showWhile(x,250),a=await x,o("resolved rename location")}catch(x){x instanceof dd?o("resolve rename location cancelled",JSON.stringify(x,null,"	")):(o("resolve rename location failed",x instanceof Error?x:JSON.stringify(x,null,"	")),(typeof x=="string"||Pd(x))&&((e=fi.get(this.editor))===null||e===void 0||e.showMessage(x||b("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),r)));return}finally{s.dispose()}if(!a){o("returning early - no loc");return}if(a.rejectReason){o(`returning early - rejected with reason: ${a.rejectReason}`,a.rejectReason),(t=fi.get(this.editor))===null||t===void 0||t.showMessage(a.rejectReason,r);return}if(s.token.isCancellationRequested){o("returning early - cts1 cancelled");return}let c=new In(this.editor,5,a.range,this._cts.token),h=this.editor.getModel(),p=this._languageFeaturesService.newSymbolNamesProvider.all(h),g=await Promise.all(p.map(async x=>{var D;return[x,(D=await x.supportsAutomaticNewSymbolNamesTriggerKind)!==null&&D!==void 0?D:!1]})),f=(x,D)=>{let E=g.slice();return x===jh.Automatic&&(E=E.filter(([I,k])=>k)),E.map(([I])=>I.provideNewSymbolNames(h,a.range,x,D))};o("creating rename input field and awaiting its result");let _=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),y=await this._renameWidget.getInput(a.range,a.text,_,p.length>0?f:void 0,c);if(o("received response from rename input field"),p.length>0&&this._reportTelemetry(p.length,h.getLanguageId(),y),typeof y=="boolean"){o(`returning early - rename input field response - ${y}`),y&&this.editor.focus(),c.dispose();return}this.editor.focus(),o("requesting rename edits");let C=pn(n.provideRenameEdits(y.newName,c.token),c.token).then(async x=>{if(!x){o("returning early - no rename edits result");return}if(!this.editor.hasModel()){o("returning early - no model after rename edits are provided");return}if(x.rejectReason){o(`returning early - rejected with reason: ${x.rejectReason}`),this._notificationService.info(x.rejectReason);return}this.editor.setSelection(T.fromPositions(this.editor.getSelection().getPosition())),o("applying edits"),this._bulkEditService.apply(x,{editor:this.editor,showPreview:y.wantsPreview,label:b("label","Renaming '{0}' to '{1}'",a?.text,y.newName),code:"undoredo.rename",quotableLabel:b("quotableLabel","Renaming {0} to {1}",a?.text,y.newName),respectAutoSaveConfig:!0}).then(D=>{o("edits applied"),D.ariaSummary&&ai(b("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",a.text,y.newName,D.ariaSummary))}).catch(D=>{o(`error when applying edits ${JSON.stringify(D,null,"	")}`),this._notificationService.error(b("rename.failedApply","Rename failed to apply edits")),this._logService.error(D)})},x=>{o("error when providing rename edits",JSON.stringify(x,null,"	")),this._notificationService.error(b("rename.failed","Rename failed to compute edits")),this._logService.error(x)}).finally(()=>{c.dispose()});return o("returning rename operation"),this._progressService.showWhile(C,250),C}acceptRenameInput(e){this._renameWidget.acceptInput(e)}cancelRenameInput(){this._renameWidget.cancelInput(!0,"cancelRenameInput command")}focusNextRenameSuggestion(){this._renameWidget.focusNextRenameSuggestion()}focusPreviousRenameSuggestion(){this._renameWidget.focusPreviousRenameSuggestion()}_reportTelemetry(e,t,o){let r=typeof o=="boolean"?{kind:"cancelled",languageId:t,nRenameSuggestionProviders:e}:{kind:"accepted",languageId:t,nRenameSuggestionProviders:e,source:o.stats.source.k,nRenameSuggestions:o.stats.nRenameSuggestions,timeBeforeFirstInputFieldEdit:o.stats.timeBeforeFirstInputFieldEdit,wantsPreview:o.wantsPreview,nRenameSuggestionsInvocations:o.stats.nRenameSuggestionsInvocations,hadAutomaticRenameSuggestionsInvocation:o.stats.hadAutomaticRenameSuggestionsInvocation};this._telemetryService.publicLog2("renameInvokedEvent",r)}};Js.ID="editor.contrib.renameController";Js=q1=v9([ll(1,ce),ll(2,Pt),ll(3,La),ll(4,Es),ll(5,er),ll(6,Yk),ll(7,J),ll(8,Zt)],Js);var K1=class extends j{constructor(){super({id:"editor.action.rename",label:b("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:W.and(A.writable,A.hasRenameProvider),kbOpts:{kbExpr:A.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){let o=e.get(tt),[r,n]=Array.isArray(t)&&t||[void 0,void 0];return We.isUri(r)&&Y.isIPosition(n)?o.openCodeEditor({resource:r},o.getActiveCodeEditor()).then(s=>{s&&(s.setPosition(n),s.invokeWithinContext(a=>(this.reportTelemetry(a,s),this.run(a,s))))},Fe):super.runCommand(e,t)}run(e,t){let o=e.get(er),r=Js.get(t);return r?(o.trace("[RenameAction] got controller, running..."),r.run()):(o.trace("[RenameAction] returning early - controller missing"),Promise.resolve())}};le(Js.ID,Js,4);M(K1);var $1=Bt.bindToContribution(Js.get);de(new $1({id:"acceptRenameInput",precondition:Ic,handler:i=>i.acceptRenameInput(!1),kbOpts:{weight:199,kbExpr:W.and(A.focus,W.not("isComposing")),primary:3}}));de(new $1({id:"acceptRenameInputWithPreview",precondition:W.and(Ic,W.has("config.editor.rename.enablePreview")),handler:i=>i.acceptRenameInput(!0),kbOpts:{weight:199,kbExpr:W.and(A.focus,W.not("isComposing")),primary:2051}}));de(new $1({id:"cancelRenameInput",precondition:Ic,handler:i=>i.cancelRenameInput(),kbOpts:{weight:199,kbExpr:A.focus,primary:9,secondary:[1033]}}));et(class extends hi{constructor(){super({id:"focusNextRenameSuggestion",title:U({},pe("focusNextRenameSuggestion","Focus Next Rename Suggestion")),precondition:Ic,keybinding:[{primary:18,weight:199}]})}run(e){let t=e.get(tt).getFocusedCodeEditor();if(!t)return;let o=Js.get(t);o&&o.focusNextRenameSuggestion()}});et(class extends hi{constructor(){super({id:"focusPreviousRenameSuggestion",title:U({},pe("focusPreviousRenameSuggestion","Focus Previous Rename Suggestion")),precondition:Ic,keybinding:[{primary:16,weight:199}]})}run(e){let t=e.get(tt).getFocusedCodeEditor();if(!t)return;let o=Js.get(t);o&&o.focusPreviousRenameSuggestion()}});wo("_executeDocumentRenameProvider",function(i,e,t,...o){let[r]=o;He(typeof r=="string");let{renameProvider:n}=i.get(J);return b9(n,e,t,r)});wo("_executePrepareRename",async function(i,e,t){let{renameProvider:o}=i.get(J),n=await new Jm(e,t,o).resolveRenameLocation(we.None);if(n?.rejectReason)throw new Error(n.rejectReason);return n});Oi.as(Hl.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:b("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});Xe();X();xe();Ii();gi();pp();var D9=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},FO=function(i,e){return function(t,o){e(t,o,i)}},Xm=class extends B{constructor(e,t,o){super(),this.editor=e,this.languageConfigurationService=t,this.editorWorkerService=o,this.decorations=this.editor.createDecorationsCollection(),this.options=this.createOptions(e.getOption(73)),this.computePromise=null,this.currentOccurrences={},this._register(e.onDidChangeModel(r=>{this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0)})),this._register(e.onDidChangeModelLanguage(r=>{this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0)})),this._register(t.onDidChange(r=>{var n;let s=(n=this.editor.getModel())===null||n===void 0?void 0:n.getLanguageId();s&&r.affects(s)&&(this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0))})),this._register(e.onDidChangeConfiguration(r=>{this.options&&!r.hasChanged(73)||(this.options=this.createOptions(e.getOption(73)),this.updateDecorations([]),this.stop(),this.computeSectionHeaders.schedule(0))})),this._register(this.editor.onDidChangeModelContent(r=>{this.computeSectionHeaders.schedule()})),this._register(e.onDidChangeModelTokens(r=>{this.computeSectionHeaders.isScheduled()||this.computeSectionHeaders.schedule(1e3)})),this.computeSectionHeaders=this._register(new ut(()=>{this.findSectionHeaders()},250)),this.computeSectionHeaders.schedule(0)}createOptions(e){if(!e||!this.editor.hasModel())return;let t=this.editor.getModel().getLanguageId();if(!t)return;let o=this.languageConfigurationService.getLanguageConfiguration(t).comments,r=this.languageConfigurationService.getLanguageConfiguration(t).foldingRules;if(!(!o&&!r?.markers))return{foldingRules:r,findMarkSectionHeaders:e.showMarkSectionHeaders,findRegionSectionHeaders:e.showRegionSectionHeaders}}findSectionHeaders(){var e,t;if(!this.editor.hasModel()||!(!((e=this.options)===null||e===void 0)&&e.findMarkSectionHeaders)&&!(!((t=this.options)===null||t===void 0)&&t.findRegionSectionHeaders))return;let o=this.editor.getModel();if(o.isDisposed()||o.isTooLargeForSyncing())return;let r=o.getVersionId();this.editorWorkerService.findSectionHeaders(o.uri,this.options).then(n=>{o.isDisposed()||o.getVersionId()!==r||this.updateDecorations(n)})}updateDecorations(e){let t=this.editor.getModel();t&&(e=e.filter(n=>{if(!n.shouldBeInComments)return!0;let s=t.validateRange(n.range),a=t.tokenization.getLineTokens(s.startLineNumber),c=a.findTokenIndexAtOffset(s.startColumn-1),h=a.getStandardTokenType(c);return a.getLanguageId(c)===t.getLanguageId()&&h===1}));let o=Object.values(this.currentOccurrences).map(n=>n.decorationId),r=e.map(n=>C9(n));this.editor.changeDecorations(n=>{let s=n.deltaDecorations(o,r);this.currentOccurrences={};for(let a=0,c=s.length;a<c;a++){let h={sectionHeader:e[a],decorationId:s[a]};this.currentOccurrences[h.decorationId]=h}})}stop(){this.computeSectionHeaders.cancel(),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop(),this.decorations.clear()}};Xm.ID="editor.sectionHeaderDetector";Xm=D9([FO(1,Ye),FO(2,zr)],Xm);function C9(i){return{range:i.range,options:ke.createDynamic({description:"section-header",stickiness:3,collapseOnReplaceEdit:!0,minimap:{color:void 0,position:1,sectionHeaderStyle:i.hasSeparatorLine?2:1,sectionHeaderText:i.text}})}}le(Xm.ID,Xm,1);X();Ze();hr();ei();Xe();yt();Bi();yt();Ze();Ci();hr();Rt();Di();y6();Zi();function x9(i){for(let e=0,t=i.length;e<t;e+=4){let o=i[e+0],r=i[e+1],n=i[e+2],s=i[e+3];i[e+0]=s,i[e+1]=n,i[e+2]=r,i[e+3]=o}}function S9(i){let e=new Uint8Array(i.buffer,i.byteOffset,i.length*4);return KP()||x9(e),jk.wrap(e)}function G1(i){let e=new Uint32Array(w9(i)),t=0;if(e[t++]=i.id,i.type==="full")e[t++]=1,e[t++]=i.data.length,e.set(i.data,t),t+=i.data.length;else{e[t++]=2,e[t++]=i.deltas.length;for(let o of i.deltas)e[t++]=o.start,e[t++]=o.deleteCount,o.data?(e[t++]=o.data.length,e.set(o.data,t),t+=o.data.length):e[t++]=0}return S9(e)}function w9(i){let e=0;if(e+=2,i.type==="full")e+=1+i.data.length;else{e+=1,e+=3*i.deltas.length;for(let t of i.deltas)t.data&&(e+=t.data.length)}return e}ge();Ge();function Ym(i){return i&&!!i.data}function Y1(i){return i&&Array.isArray(i.edits)}var J1=class{constructor(e,t,o){this.provider=e,this.tokens=t,this.error=o}};function Q1(i,e){return i.has(e)}function E9(i,e){let t=i.orderedGroups(e);return t.length>0?t[0]:[]}async function Z1(i,e,t,o,r){let n=E9(i,e),s=await Promise.all(n.map(async a=>{let c,h=null;try{c=await a.provideDocumentSemanticTokens(e,a===t?o:null,r)}catch(p){h=p,c=null}return(!c||!Ym(c)&&!Y1(c))&&(c=null),new J1(a,c,h)}));for(let a of s){if(a.error)throw a.error;if(a.tokens)return a}return s.length>0?s[0]:null}function A9(i,e){let t=i.orderedGroups(e);return t.length>0?t[0]:null}var X1=class{constructor(e,t){this.provider=e,this.tokens=t}};function LO(i,e){return i.has(e)}function NO(i,e){let t=i.orderedGroups(e);return t.length>0?t[0]:[]}async function $b(i,e,t,o){let r=NO(i,e),n=await Promise.all(r.map(async s=>{let a;try{a=await s.provideDocumentRangeSemanticTokens(e,t,o)}catch(c){$e(c),a=null}return(!a||!Ym(a))&&(a=null),new X1(s,a)}));for(let s of n)if(s.tokens)return s;return n.length>0?n[0]:null}Ue.registerCommand("_provideDocumentSemanticTokensLegend",async(i,...e)=>{let[t]=e;He(t instanceof We);let o=i.get(Ot).getModel(t);if(!o)return;let{documentSemanticTokensProvider:r}=i.get(J),n=A9(r,o);return n?n[0].getLegend():i.get(ht).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)});Ue.registerCommand("_provideDocumentSemanticTokens",async(i,...e)=>{let[t]=e;He(t instanceof We);let o=i.get(Ot).getModel(t);if(!o)return;let{documentSemanticTokensProvider:r}=i.get(J);if(!Q1(r,o))return i.get(ht).executeCommand("_provideDocumentRangeSemanticTokens",t,o.getFullModelRange());let n=await Z1(r,o,null,null,we.None);if(!n)return;let{provider:s,tokens:a}=n;if(!a||!Ym(a))return;let c=G1({id:0,type:"full",data:a.data});return a.resultId&&s.releaseDocumentSemanticTokens(a.resultId),c});Ue.registerCommand("_provideDocumentRangeSemanticTokensLegend",async(i,...e)=>{let[t,o]=e;He(t instanceof We);let r=i.get(Ot).getModel(t);if(!r)return;let{documentRangeSemanticTokensProvider:n}=i.get(J),s=NO(n,r);if(s.length===0)return;if(s.length===1)return s[0].getLegend();if(!o||!T.isIRange(o))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),s[0].getLegend();let a=await $b(n,r,T.lift(o),we.None);if(a)return a.provider.getLegend()});Ue.registerCommand("_provideDocumentRangeSemanticTokens",async(i,...e)=>{let[t,o]=e;He(t instanceof We),He(T.isIRange(o));let r=i.get(Ot).getModel(t);if(!r)return;let{documentRangeSemanticTokensProvider:n}=i.get(J),s=await $b(n,r,T.lift(o),we.None);if(!(!s||!s.tokens))return G1({id:0,type:"full",data:s.tokens.data})});Hr();Lr();Ge();var Qm="editor.semanticHighlighting";function qu(i,e,t){var o;let r=(o=t.getValue(Qm,{overrideIdentifier:i.getLanguageId(),resource:i.uri}))===null||o===void 0?void 0:o.enabled;return typeof r=="boolean"?r:e.getColorTheme().semanticHighlighting}var MO=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},$n=function(i,e){return function(t,o){e(t,o,i)}},cl,eA=class extends B{constructor(e,t,o,r,n,s){super(),this._watchers=Object.create(null);let a=p=>{this._watchers[p.uri.toString()]=new Zm(p,e,o,n,s)},c=(p,g)=>{g.dispose(),delete this._watchers[p.uri.toString()]},h=()=>{for(let p of t.getModels()){let g=this._watchers[p.uri.toString()];qu(p,o,r)?g||a(p):g&&c(p,g)}};t.getModels().forEach(p=>{qu(p,o,r)&&a(p)}),this._register(t.onModelAdded(p=>{qu(p,o,r)&&a(p)})),this._register(t.onModelRemoved(p=>{let g=this._watchers[p.uri.toString()];g&&c(p,g)})),this._register(r.onDidChangeConfiguration(p=>{p.affectsConfiguration(Qm)&&h()})),this._register(o.onDidColorThemeChange(h))}dispose(){for(let e of Object.values(this._watchers))e.dispose();super.dispose()}};eA=MO([$n(0,lp),$n(1,Ot),$n(2,mi),$n(3,Oe),$n(4,li),$n(5,J)],eA);var Zm=cl=class extends B{constructor(e,t,o,r,n){super(),this._semanticTokensStylingService=t,this._isDisposed=!1,this._model=e,this._provider=n.documentSemanticTokensProvider,this._debounceInformation=r.for(this._provider,"DocumentSemanticTokens",{min:cl.REQUEST_MIN_DELAY,max:cl.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new ut(()=>this._fetchDocumentSemanticTokensNow(),cl.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._providersChangedDuringRequest=!1,this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeAttached(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));let s=()=>{Vt(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(let a of this._provider.all(e))typeof a.onDidChange=="function"&&this._documentProvidersChangeListeners.push(a.onDidChange(()=>{if(this._currentDocumentRequestCancellationTokenSource){this._providersChangedDuringRequest=!0;return}this._fetchDocumentSemanticTokens.schedule(0)}))};s(),this._register(this._provider.onDidChange(()=>{s(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(o.onDidColorThemeChange(a=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),Vt(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[],this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!Q1(this._provider,this._model)){this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1);return}if(!this._model.isAttachedToEditor())return;let e=new _t,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,o=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,r=Z1(this._provider,this._model,t,o,e.token);this._currentDocumentRequestCancellationTokenSource=e,this._providersChangedDuringRequest=!1;let n=[],s=this._model.onDidChangeContent(c=>{n.push(c)}),a=new qt(!1);r.then(c=>{if(this._debounceInformation.update(this._model,a.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,s.dispose(),!c)this._setDocumentSemanticTokens(null,null,null,n);else{let{provider:h,tokens:p}=c,g=this._semanticTokensStylingService.getStyling(h);this._setDocumentSemanticTokens(h,p||null,g,n)}},c=>{c&&(Ro(c)||typeof c.message=="string"&&c.message.indexOf("busy")!==-1)||Fe(c),this._currentDocumentRequestCancellationTokenSource=null,s.dispose(),(n.length>0||this._providersChangedDuringRequest)&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))})}static _copy(e,t,o,r,n){n=Math.min(n,o.length-r,e.length-t);for(let s=0;s<n;s++)o[r+s]=e[t+s]}_setDocumentSemanticTokens(e,t,o,r){let n=this._currentDocumentResponse,s=()=>{(r.length>0||this._providersChangedDuringRequest)&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!o){this._model.tokenization.setSemanticTokens(null,!1);return}if(!t){this._model.tokenization.setSemanticTokens(null,!0),s();return}if(Y1(t)){if(!n){this._model.tokenization.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:n.data};else{let a=0;for(let f of t.edits)a+=(f.data?f.data.length:0)-f.deleteCount;let c=n.data,h=new Uint32Array(c.length+a),p=c.length,g=h.length;for(let f=t.edits.length-1;f>=0;f--){let _=t.edits[f];if(_.start>c.length){o.warnInvalidEditStart(n.resultId,t.resultId,f,_.start,c.length),this._model.tokenization.setSemanticTokens(null,!0);return}let y=p-(_.start+_.deleteCount);y>0&&(cl._copy(c,p-y,h,g-y,y),g-=y),_.data&&(cl._copy(_.data,0,h,g-_.data.length,_.data.length),g-=_.data.length),p=_.start}p>0&&cl._copy(c,0,h,0,p),t={resultId:t.resultId,data:h}}}if(Ym(t)){this._currentDocumentResponse=new tA(e,t.resultId,t.data);let a=jf(t,o,this._model.getLanguageId());if(r.length>0)for(let c of r)for(let h of a)for(let p of c.changes)h.applyEdit(p.range,p.text);this._model.tokenization.setSemanticTokens(a,!0)}else this._model.tokenization.setSemanticTokens(null,!0);s()}};Zm.REQUEST_MIN_DELAY=300;Zm.REQUEST_MAX_DELAY=2e3;Zm=cl=MO([$n(1,lp),$n(2,mi),$n(3,li),$n(4,J)],Zm);var tA=class{constructor(e,t,o){this.provider=e,this.resultId=t,this.data=o}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}};An(eA);Xe();X();xe();ei();Bi();Hr();Lr();Ge();var T9=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},eg=function(i,e){return function(t,o){e(t,o,i)}},tg=class extends B{constructor(e,t,o,r,n,s){super(),this._semanticTokensStylingService=t,this._themeService=o,this._configurationService=r,this._editor=e,this._provider=s.documentRangeSemanticTokensProvider,this._debounceInformation=n.for(this._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),this._tokenizeViewport=this._register(new ut(()=>this._tokenizeViewportNow(),100)),this._outstandingRequests=[];let a=()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))};this._register(this._editor.onDidScrollChange(()=>{a()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),a()})),this._register(this._editor.onDidChangeModelContent(c=>{this._cancelAll(),a()})),this._register(this._provider.onDidChange(()=>{this._cancelAll(),a()})),this._register(this._configurationService.onDidChangeConfiguration(c=>{c.affectsConfiguration(Qm)&&(this._cancelAll(),a())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),a()})),a()}_cancelAll(){for(let e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,o=this._outstandingRequests.length;t<o;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;let e=this._editor.getModel();if(e.tokenization.hasCompleteSemanticTokens())return;if(!qu(e,this._themeService,this._configurationService)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}if(!LO(this._provider,e)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}let t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(o=>this._requestRange(e,o)))}_requestRange(e,t){let o=e.getVersionId(),r=mt(s=>Promise.resolve($b(this._provider,e,t,s))),n=new qt(!1);return r.then(s=>{if(this._debounceInformation.update(e,n.elapsed()),!s||!s.tokens||e.isDisposed()||e.getVersionId()!==o)return;let{provider:a,tokens:c}=s,h=this._semanticTokensStylingService.getStyling(a);e.tokenization.setPartialSemanticTokens(t,jf(c,h,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(r),()=>this._removeOutstandingRequest(r)),r}};tg.ID="editor.contrib.viewportSemanticTokens";tg=T9([eg(1,lp),eg(2,mi),eg(3,Oe),eg(4,li),eg(5,J)],tg);le(tg.ID,tg,1);bt();yt();Ze();xe();pt();ge();ui();it();Tt();ge();var Gb=class{constructor(e=!0){this.selectSubwords=e}provideSelectionRanges(e,t){let o=[];for(let r of t){let n=[];o.push(n),this.selectSubwords&&this._addInWordRanges(n,e,r),this._addWordRanges(n,e,r),this._addWhitespaceLine(n,e,r),n.push({range:e.getFullModelRange()})}return o}_addInWordRanges(e,t,o){let r=t.getWordAtPosition(o);if(!r)return;let{word:n,startColumn:s}=r,a=o.column-s,c=a,h=a,p=0;for(;c>=0;c--){let g=n.charCodeAt(c);if(c!==a&&(g===95||g===45))break;if(HC(g)&&jC(p))break;p=g}for(c+=1;h<n.length;h++){let g=n.charCodeAt(h);if(jC(g)&&HC(p))break;if(g===95||g===45)break;p=g}c<h&&e.push({range:new T(o.lineNumber,s+c,o.lineNumber,s+h)})}_addWordRanges(e,t,o){let r=t.getWordAtPosition(o);r&&e.push({range:new T(o.lineNumber,r.startColumn,o.lineNumber,r.endColumn)})}_addWhitespaceLine(e,t,o){t.getLineLength(o.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(o.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(o.lineNumber)===0&&e.push({range:new T(o.lineNumber,1,o.lineNumber,t.getLineMaxColumn(o.lineNumber))})}};re();Wt();Rt();Ge();fn();Di();Ci();var I9=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},P9=function(i,e){return function(t,o){e(t,o,i)}},iA,oA=class i{constructor(e,t){this.index=e,this.ranges=t}mov(e){let t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;let o=new i(t,this.ranges);return o.ranges[t].equalsRange(this.ranges[this.index])?o.mov(e):o}},Ku=iA=class{static get(e){return e.getContribution(iA.ID)}constructor(e,t){this._editor=e,this._languageFeaturesService=t,this._ignoreSelection=!1}dispose(){var e;(e=this._selectionListener)===null||e===void 0||e.dispose()}async run(e){if(!this._editor.hasModel())return;let t=this._editor.getSelections(),o=this._editor.getModel();if(this._state||await OO(this._languageFeaturesService.selectionRangeProvider,o,t.map(n=>n.getPosition()),this._editor.getOption(113),we.None).then(n=>{var s;if(!(!zt(n)||n.length!==t.length)&&!(!this._editor.hasModel()||!Yi(this._editor.getSelections(),t,(a,c)=>a.equalsSelection(c)))){for(let a=0;a<n.length;a++)n[a]=n[a].filter(c=>c.containsPosition(t[a].getStartPosition())&&c.containsPosition(t[a].getEndPosition())),n[a].unshift(t[a]);this._state=n.map(a=>new oA(0,a)),(s=this._selectionListener)===null||s===void 0||s.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var a;this._ignoreSelection||((a=this._selectionListener)===null||a===void 0||a.dispose(),this._state=void 0)})}}),!this._state)return;this._state=this._state.map(n=>n.mov(e));let r=this._state.map(n=>me.fromPositions(n.ranges[n.index].getStartPosition(),n.ranges[n.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(r)}finally{this._ignoreSelection=!1}}};Ku.ID="editor.contrib.smartSelectController";Ku=iA=I9([P9(1,J)],Ku);var Jb=class extends j{constructor(e,t){super(t),this._forward=e}async run(e,t){let o=Ku.get(t);o&&await o.run(this._forward)}},rA=class extends Jb{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:b("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:Q.MenubarSelectionMenu,group:"1_basic",title:b({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}};Ue.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");var nA=class extends Jb{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:b("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:A.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:Q.MenubarSelectionMenu,group:"1_basic",title:b({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}};le(Ku.ID,Ku,4);M(rA);M(nA);async function OO(i,e,t,o,r){let n=i.all(e).concat(new Gb(o.selectSubwords));n.length===1&&n.unshift(new Mv);let s=[],a=[];for(let c of n)s.push(Promise.resolve(c.provideSelectionRanges(e,t,r)).then(h=>{if(zt(h)&&h.length===t.length)for(let p=0;p<t.length;p++){a[p]||(a[p]=[]);for(let g of h[p])T.isIRange(g.range)&&T.containsPosition(g.range,t[p])&&a[p].push(T.lift(g.range))}},$e));return await Promise.all(s),a.map(c=>{if(c.length===0)return[];c.sort((f,_)=>Y.isBefore(f.getStartPosition(),_.getStartPosition())?1:Y.isBefore(_.getStartPosition(),f.getStartPosition())||Y.isBefore(f.getEndPosition(),_.getEndPosition())?-1:Y.isBefore(_.getEndPosition(),f.getEndPosition())?1:0);let h=[],p;for(let f of c)(!p||T.containsRange(f,p)&&!T.equalsRange(f,p))&&(h.push(f),p=f);if(!o.selectLeadingAndTrailingWhitespace)return h;let g=[h[0]];for(let f=1;f<h.length;f++){let _=h[f-1],y=h[f];if(y.startLineNumber!==_.startLineNumber||y.endLineNumber!==_.endLineNumber){let C=new T(_.startLineNumber,e.getLineFirstNonWhitespaceColumn(_.startLineNumber),_.endLineNumber,e.getLineLastNonWhitespaceColumn(_.endLineNumber));C.containsRange(_)&&!C.equalsRange(_)&&y.containsRange(C)&&!y.equalsRange(C)&&g.push(C);let x=new T(_.startLineNumber,1,_.endLineNumber,e.getLineMaxColumn(_.endLineNumber));x.containsRange(_)&&!x.equalsRange(C)&&y.containsRange(x)&&!y.equalsRange(x)&&g.push(x)}g.push(y)}return g})}Ue.registerCommand("_executeSelectionRangeProvider",async function(i,...e){let[t,o]=e;He(We.isUri(t));let r=i.get(J).selectionRangeProvider,n=await i.get(Si).createModelReference(t);try{return OO(r,n.object.textEditorModel,o,{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},we.None)}finally{n.dispose()}});xe();xe();re();re();var RO=Object.freeze({View:pe("view","View"),Help:pe("help","Help"),Test:pe("test","Test"),File:pe("file","File"),Preferences:pe("preferences","Preferences"),Developer:pe({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer")});Wt();ei();Me();it();X();Ge();ze();bt();X();to();pt();zk();var ig=class{constructor(e,t,o,r=null){this.startLineNumbers=e,this.endLineNumbers=t,this.lastLineRelativePosition=o,this.showEndForLine=r}equals(e){return!!e&&this.lastLineRelativePosition===e.lastLineRelativePosition&&this.showEndForLine===e.showEndForLine&&Yi(this.startLineNumbers,e.startLineNumbers)&&Yi(this.endLineNumbers,e.endLineNumbers)}},BO=_f("stickyScrollViewLayer",{createHTML:i=>i}),sA="data-sticky-line-index",WO="data-sticky-is-line",k9="data-sticky-is-line-number",HO="data-sticky-is-folding-icon",Xb=class extends B{constructor(e){super(),this._editor=e,this._foldingIconStore=new H,this._rootDomNode=document.createElement("div"),this._lineNumbersDomNode=document.createElement("div"),this._linesDomNodeScrollable=document.createElement("div"),this._linesDomNode=document.createElement("div"),this._lineHeight=this._editor.getOption(67),this._renderedStickyLines=[],this._lineNumbers=[],this._lastLineRelativePosition=0,this._minContentWidthInPx=0,this._isOnGlyphMargin=!1,this._lineNumbersDomNode.className="sticky-widget-line-numbers",this._lineNumbersDomNode.setAttribute("role","none"),this._linesDomNode.className="sticky-widget-lines",this._linesDomNode.setAttribute("role","list"),this._linesDomNodeScrollable.className="sticky-widget-lines-scrollable",this._linesDomNodeScrollable.appendChild(this._linesDomNode),this._rootDomNode.className="sticky-widget",this._rootDomNode.classList.toggle("peek",e instanceof nr),this._rootDomNode.appendChild(this._lineNumbersDomNode),this._rootDomNode.appendChild(this._linesDomNodeScrollable);let t=()=>{this._linesDomNode.style.left=this._editor.getOption(115).scrollWithEditor?`-${this._editor.getScrollLeft()}px`:"0px"};this._register(this._editor.onDidChangeConfiguration(o=>{o.hasChanged(115)&&t(),o.hasChanged(67)&&(this._lineHeight=this._editor.getOption(67))})),this._register(this._editor.onDidScrollChange(o=>{o.scrollLeftChanged&&t(),o.scrollWidthChanged&&this._updateWidgetWidth()})),this._register(this._editor.onDidChangeModel(()=>{t(),this._updateWidgetWidth()})),this._register(this._foldingIconStore),t(),this._register(this._editor.onDidLayoutChange(o=>{this._updateWidgetWidth()})),this._updateWidgetWidth()}get lineNumbers(){return this._lineNumbers}get lineNumberCount(){return this._lineNumbers.length}getRenderedStickyLine(e){return this._renderedStickyLines.find(t=>t.lineNumber===e)}getCurrentLines(){return this._lineNumbers}setState(e,t,o){if(o===void 0&&(!this._previousState&&!e||this._previousState&&this._previousState.equals(e)))return;let r=this._isWidgetHeightZero(e),n=r?void 0:e,s=r?0:this._findLineToRebuildWidgetFrom(e,o);this._renderRootNode(n,t,s),this._previousState=e}_isWidgetHeightZero(e){if(!e)return!0;let t=e.startLineNumbers.length*this._lineHeight+e.lastLineRelativePosition;if(t>0){this._lastLineRelativePosition=e.lastLineRelativePosition;let o=[...e.startLineNumbers];e.showEndForLine!==null&&(o[e.showEndForLine]=e.endLineNumbers[e.showEndForLine]),this._lineNumbers=o}else this._lastLineRelativePosition=0,this._lineNumbers=[];return t===0}_findLineToRebuildWidgetFrom(e,t){if(!e||!this._previousState)return 0;if(t!==void 0)return t;let o=this._previousState,r=e.startLineNumbers.findIndex(n=>!o.startLineNumbers.includes(n));return r===-1?0:r}_updateWidgetWidth(){let e=this._editor.getLayoutInfo(),t=e.contentLeft;this._lineNumbersDomNode.style.width=`${t}px`,this._linesDomNodeScrollable.style.setProperty("--vscode-editorStickyScroll-scrollableWidth",`${this._editor.getScrollWidth()-e.verticalScrollbarWidth}px`),this._rootDomNode.style.width=`${e.width-e.verticalScrollbarWidth}px`}_clearStickyLinesFromLine(e){this._foldingIconStore.clear();for(let t=e;t<this._renderedStickyLines.length;t++){let o=this._renderedStickyLines[t];o.lineNumberDomNode.remove(),o.lineDomNode.remove()}this._renderedStickyLines=this._renderedStickyLines.slice(0,e),this._rootDomNode.style.display="none"}_useFoldingOpacityTransition(e){this._lineNumbersDomNode.style.setProperty("--vscode-editorStickyScroll-foldingOpacityTransition",`opacity ${e?.5:0}s`)}_setFoldingIconsVisibility(e){for(let t of this._renderedStickyLines){let o=t.foldingIcon;o&&o.setVisible(e?!0:o.isCollapsed)}}async _renderRootNode(e,t,o){if(this._clearStickyLinesFromLine(o),!e)return;for(let a of this._renderedStickyLines)this._updateTopAndZIndexOfStickyLine(a);let r=this._editor.getLayoutInfo(),n=this._lineNumbers.slice(o);for(let[a,c]of n.entries()){let h=this._renderChildNode(a+o,c,t,r);h&&(this._linesDomNode.appendChild(h.lineDomNode),this._lineNumbersDomNode.appendChild(h.lineNumberDomNode),this._renderedStickyLines.push(h))}t&&(this._setFoldingHoverListeners(),this._useFoldingOpacityTransition(!this._isOnGlyphMargin));let s=this._lineNumbers.length*this._lineHeight+this._lastLineRelativePosition;this._rootDomNode.style.display="block",this._lineNumbersDomNode.style.height=`${s}px`,this._linesDomNodeScrollable.style.height=`${s}px`,this._rootDomNode.style.height=`${s}px`,this._rootDomNode.style.marginLeft="0px",this._minContentWidthInPx=Math.max(...this._renderedStickyLines.map(a=>a.scrollWidth))+r.verticalScrollbarWidth,this._editor.layoutOverlayWidget(this)}_setFoldingHoverListeners(){this._editor.getOption(110)==="mouseover"&&(this._foldingIconStore.add(Ne(this._lineNumbersDomNode,at.MOUSE_ENTER,()=>{this._isOnGlyphMargin=!0,this._setFoldingIconsVisibility(!0)})),this._foldingIconStore.add(Ne(this._lineNumbersDomNode,at.MOUSE_LEAVE,()=>{this._isOnGlyphMargin=!1,this._useFoldingOpacityTransition(!0),this._setFoldingIconsVisibility(!1)})))}_renderChildNode(e,t,o,r){let n=this._editor._getViewModel();if(!n)return;let s=n.coordinatesConverter.convertModelPositionToViewPosition(new Y(t,1)).lineNumber,a=n.getViewLineRenderingData(s),c=this._editor.getOption(68),h;try{h=Ta.filter(a.inlineDecorations,s,a.minColumn,a.maxColumn)}catch{h=[]}let p=new Cf(!0,!0,a.content,a.continuesWithWrappedLine,a.isBasicASCII,a.containsRTL,0,a.tokens,h,a.tabSize,a.startVisibleColumn,1,1,1,500,"none",!0,!0,null),g=new yf(2e3),f=xf(p,g),_;BO?_=BO.createHTML(g.build()):_=g.build();let y=document.createElement("span");y.setAttribute(sA,String(e)),y.setAttribute(WO,""),y.setAttribute("role","listitem"),y.tabIndex=0,y.className="sticky-line-content",y.classList.add(`stickyLine${t}`),y.style.lineHeight=`${this._lineHeight}px`,y.innerHTML=_;let C=document.createElement("span");C.setAttribute(sA,String(e)),C.setAttribute(k9,""),C.className="sticky-line-number",C.style.lineHeight=`${this._lineHeight}px`;let x=r.contentLeft;C.style.width=`${x}px`;let D=document.createElement("span");c.renderType===1||c.renderType===3&&t%10===0?D.innerText=t.toString():c.renderType===2&&(D.innerText=Math.abs(t-this._editor.getPosition().lineNumber).toString()),D.className="sticky-line-number-inner",D.style.lineHeight=`${this._lineHeight}px`,D.style.width=`${r.lineNumbersWidth}px`,D.style.paddingLeft=`${r.lineNumbersLeft}px`,C.appendChild(D);let E=this._renderFoldingIconForLine(o,t);E&&C.appendChild(E.domNode),this._editor.applyFontInfo(y),this._editor.applyFontInfo(D),C.style.lineHeight=`${this._lineHeight}px`,y.style.lineHeight=`${this._lineHeight}px`,C.style.height=`${this._lineHeight}px`,y.style.height=`${this._lineHeight}px`;let I=new aA(e,t,y,C,E,f.characterMapping,y.scrollWidth);return this._updateTopAndZIndexOfStickyLine(I)}_updateTopAndZIndexOfStickyLine(e){var t;let o=e.index,r=e.lineDomNode,n=e.lineNumberDomNode,s=o===this._lineNumbers.length-1,a="0",c="1";r.style.zIndex=s?a:c,n.style.zIndex=s?a:c;let h=`${o*this._lineHeight+this._lastLineRelativePosition+(!((t=e.foldingIcon)===null||t===void 0)&&t.isCollapsed?1:0)}px`,p=`${o*this._lineHeight}px`;return r.style.top=s?h:p,n.style.top=s?h:p,e}_renderFoldingIconForLine(e,t){let o=this._editor.getOption(110);if(!e||o==="never")return;let r=e.regions,n=r.findRange(t),s=r.getStartLineNumber(n);if(!(t===s))return;let c=r.isCollapsed(n),h=new lA(c,s,r.getEndLineNumber(n),this._lineHeight);return h.setVisible(this._isOnGlyphMargin?!0:c||o==="always"),h.domNode.setAttribute(HO,""),h}getId(){return"editor.contrib.stickyScrollWidget"}getDomNode(){return this._rootDomNode}getPosition(){return{preference:2,stackOridinal:10}}getMinContentWidthInPx(){return this._minContentWidthInPx}focusLineWithIndex(e){0<=e&&e<this._renderedStickyLines.length&&this._renderedStickyLines[e].lineDomNode.focus()}getEditorPositionFromNode(e){if(!e||e.children.length>0)return null;let t=this._getRenderedStickyLineFromChildDomNode(e);if(!t)return null;let o=TF(t.characterMapping,e,0);return new Y(t.lineNumber,o)}getLineNumberFromChildDomNode(e){var t,o;return(o=(t=this._getRenderedStickyLineFromChildDomNode(e))===null||t===void 0?void 0:t.lineNumber)!==null&&o!==void 0?o:null}_getRenderedStickyLineFromChildDomNode(e){let t=this.getLineIndexFromChildDomNode(e);return t===null||t<0||t>=this._renderedStickyLines.length?null:this._renderedStickyLines[t]}getLineIndexFromChildDomNode(e){let t=this._getAttributeValue(e,sA);return t?parseInt(t,10):null}isInStickyLine(e){return this._getAttributeValue(e,WO)!==void 0}isInFoldingIconDomNode(e){return this._getAttributeValue(e,HO)!==void 0}_getAttributeValue(e,t){for(;e&&e!==this._rootDomNode;){let o=e.getAttribute(t);if(o!==null)return o;e=e.parentElement}}},aA=class{constructor(e,t,o,r,n,s,a){this.index=e,this.lineNumber=t,this.lineDomNode=o,this.lineNumberDomNode=r,this.foldingIcon=n,this.characterMapping=s,this.scrollWidth=a}},lA=class{constructor(e,t,o,r){this.isCollapsed=e,this.foldingStartLine=t,this.foldingEndLine=o,this.dimension=r,this.domNode=document.createElement("div"),this.domNode.style.width=`${r}px`,this.domNode.style.height=`${r}px`,this.domNode.className=je.asClassName(e?dm:cm)}setVisible(e){this.domNode.style.cursor=e?"pointer":"default",this.domNode.style.opacity=e?"1":"0"}};X();Ge();yt();Xe();bt();nt();Ii();X();Ge();Eu();Xe();Ii();Ze();var Xs=class{constructor(e,t){this.startLineNumber=e,this.endLineNumber=t}},Pc=class{constructor(e,t,o){this.range=e,this.children=t,this.parent=o}},og=class{constructor(e,t,o,r){this.uri=e,this.version=t,this.element=o,this.outlineProviderId=r}};Oh();Je();var tD=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},rg=function(i,e){return function(t,o){e(t,o,i)}},Yb=function(i){return i.OUTLINE_MODEL="outlineModel",i.FOLDING_PROVIDER_MODEL="foldingProviderModel",i.INDENTATION_MODEL="indentationModel",i}(Yb||{}),kc=function(i){return i[i.VALID=0]="VALID",i[i.INVALID=1]="INVALID",i[i.CANCELED=2]="CANCELED",i}(kc||{}),Qb=class extends B{constructor(e,t,o,r){switch(super(),this._editor=e,this._modelProviders=[],this._modelPromise=null,this._updateScheduler=this._register(new Yo(300)),this._updateOperation=this._register(new H),this._editor.getOption(115).defaultModel){case Yb.OUTLINE_MODEL:this._modelProviders.push(new cA(this._editor,r));case Yb.FOLDING_PROVIDER_MODEL:this._modelProviders.push(new uA(this._editor,t,r));case Yb.INDENTATION_MODEL:this._modelProviders.push(new dA(this._editor,o));break}}dispose(){this._modelProviders.forEach(e=>e.dispose()),this._updateOperation.clear(),this._cancelModelPromise(),super.dispose()}_cancelModelPromise(){this._modelPromise&&(this._modelPromise.cancel(),this._modelPromise=null)}async update(e){return this._updateOperation.clear(),this._updateOperation.add({dispose:()=>{this._cancelModelPromise(),this._updateScheduler.cancel()}}),this._cancelModelPromise(),await this._updateScheduler.trigger(async()=>{for(let t of this._modelProviders){let{statusPromise:o,modelPromise:r}=t.computeStickyModel(e);this._modelPromise=r;let n=await o;if(this._modelPromise!==r)return null;switch(n){case kc.CANCELED:return this._updateOperation.clear(),null;case kc.VALID:return t.stickyModel}}return null}).catch(t=>(Fe(t),null))}};Qb=tD([rg(2,ce),rg(3,J)],Qb);var Zb=class extends B{constructor(e){super(),this._editor=e,this._stickyModel=null}get stickyModel(){return this._stickyModel}_invalid(){return this._stickyModel=null,kc.INVALID}computeStickyModel(e){if(e.isCancellationRequested||!this.isProviderValid())return{statusPromise:this._invalid(),modelPromise:null};let t=mt(o=>this.createModelFromProvider(o));return{statusPromise:t.then(o=>this.isModelValid(o)?e.isCancellationRequested?kc.CANCELED:(this._stickyModel=this.createStickyModel(e,o),kc.VALID):this._invalid()).then(void 0,o=>(Fe(o),kc.CANCELED)),modelPromise:t}}isModelValid(e){return!0}isProviderValid(){return!0}},cA=class extends Zb{constructor(e,t){super(e),this._languageFeaturesService=t}createModelFromProvider(e){return _m.create(this._languageFeaturesService.documentSymbolProvider,this._editor.getModel(),e)}createStickyModel(e,t){var o;let{stickyOutlineElement:r,providerID:n}=this._stickyModelFromOutlineModel(t,(o=this._stickyModel)===null||o===void 0?void 0:o.outlineProviderId),s=this._editor.getModel();return new og(s.uri,s.getVersionId(),r,n)}isModelValid(e){return e&&e.children.size>0}_stickyModelFromOutlineModel(e,t){let o;if(Oo.first(e.children.values())instanceof fm){let a=Oo.find(e.children.values(),c=>c.id===t);if(a)o=a.children;else{let c="",h=-1,p;for(let[g,f]of e.children.entries()){let _=this._findSumOfRangesOfGroup(f);_>h&&(p=f,h=_,c=f.id)}t=c,o=p.children}}else o=e.children;let r=[],n=Array.from(o.values()).sort((a,c)=>{let h=new Xs(a.symbol.range.startLineNumber,a.symbol.range.endLineNumber),p=new Xs(c.symbol.range.startLineNumber,c.symbol.range.endLineNumber);return this._comparator(h,p)});for(let a of n)r.push(this._stickyModelFromOutlineElement(a,a.symbol.selectionRange.startLineNumber));return{stickyOutlineElement:new Pc(void 0,r,void 0),providerID:t}}_stickyModelFromOutlineElement(e,t){let o=[];for(let n of e.children.values())if(n.symbol.selectionRange.startLineNumber!==n.symbol.range.endLineNumber)if(n.symbol.selectionRange.startLineNumber!==t)o.push(this._stickyModelFromOutlineElement(n,n.symbol.selectionRange.startLineNumber));else for(let s of n.children.values())o.push(this._stickyModelFromOutlineElement(s,n.symbol.selectionRange.startLineNumber));o.sort((n,s)=>this._comparator(n.range,s.range));let r=new Xs(e.symbol.selectionRange.startLineNumber,e.symbol.range.endLineNumber);return new Pc(r,o,void 0)}_comparator(e,t){return e.startLineNumber!==t.startLineNumber?e.startLineNumber-t.startLineNumber:t.endLineNumber-e.endLineNumber}_findSumOfRangesOfGroup(e){let t=0;for(let o of e.children.values())t+=this._findSumOfRangesOfGroup(o);return e instanceof wu?t+e.symbol.range.endLineNumber-e.symbol.selectionRange.startLineNumber:t}};cA=tD([rg(1,J)],cA);var eD=class extends Zb{constructor(e){super(e),this._foldingLimitReporter=new hm(e)}createStickyModel(e,t){let o=this._fromFoldingRegions(t),r=this._editor.getModel();return new og(r.uri,r.getVersionId(),o,void 0)}isModelValid(e){return e!==null}_fromFoldingRegions(e){let t=e.length,o=[],r=new Pc(void 0,[],void 0);for(let n=0;n<t;n++){let s=e.getParentIndex(n),a;s!==-1?a=o[s]:a=r;let c=new Pc(new Xs(e.getStartLineNumber(n),e.getEndLineNumber(n)+1),[],a);a.children.push(c),o.push(c)}return r}},dA=class extends eD{constructor(e,t){super(e),this._languageConfigurationService=t,this.provider=this._register(new vc(e.getModel(),this._languageConfigurationService,this._foldingLimitReporter))}async createModelFromProvider(e){return this.provider.compute(e)}};dA=tD([rg(1,Ye)],dA);var uA=class extends eD{constructor(e,t,o){super(e),this._languageFeaturesService=o;let r=Qr.getFoldingRangeProviders(this._languageFeaturesService,e.getModel());r.length>0&&(this.provider=this._register(new bc(e.getModel(),r,t,this._foldingLimitReporter,void 0)))}isProviderValid(){return this.provider!==void 0}async createModelFromProvider(e){var t,o;return(o=(t=this.provider)===null||t===void 0?void 0:t.compute(e))!==null&&o!==void 0?o:null}};uA=tD([rg(2,J)],uA);var F9=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},jO=function(i,e){return function(t,o){e(t,o,i)}},hA=class{constructor(e,t,o){this.startLineNumber=e,this.endLineNumber=t,this.nestingDepth=o}},iD=class extends B{constructor(e,t,o){super(),this._languageFeaturesService=t,this._languageConfigurationService=o,this._onDidChangeStickyScroll=this._register(new fe),this.onDidChangeStickyScroll=this._onDidChangeStickyScroll.event,this._model=null,this._cts=null,this._stickyModelProvider=null,this._editor=e,this._sessionStore=this._register(new H),this._updateSoon=this._register(new ut(()=>this.update(),50)),this._register(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(115)&&this.readConfiguration()})),this.readConfiguration()}readConfiguration(){this._sessionStore.clear(),this._editor.getOption(115).enabled&&(this._sessionStore.add(this._editor.onDidChangeModel(()=>{this._model=null,this.updateStickyModelProvider(),this._onDidChangeStickyScroll.fire(),this.update()})),this._sessionStore.add(this._editor.onDidChangeHiddenAreas(()=>this.update())),this._sessionStore.add(this._editor.onDidChangeModelContent(()=>this._updateSoon.schedule())),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>this.update())),this._sessionStore.add(Ve(()=>{var t;(t=this._stickyModelProvider)===null||t===void 0||t.dispose(),this._stickyModelProvider=null})),this.updateStickyModelProvider(),this.update())}getVersionId(){var e;return(e=this._model)===null||e===void 0?void 0:e.version}updateStickyModelProvider(){var e;(e=this._stickyModelProvider)===null||e===void 0||e.dispose(),this._stickyModelProvider=null;let t=this._editor;t.hasModel()&&(this._stickyModelProvider=new Qb(t,()=>this._updateSoon.schedule(),this._languageConfigurationService,this._languageFeaturesService))}async update(){var e;(e=this._cts)===null||e===void 0||e.dispose(!0),this._cts=new _t,await this.updateStickyModel(this._cts.token),this._onDidChangeStickyScroll.fire()}async updateStickyModel(e){if(!this._editor.hasModel()||!this._stickyModelProvider||this._editor.getModel().isTooLargeForTokenization()){this._model=null;return}let t=await this._stickyModelProvider.update(e);e.isCancellationRequested||(this._model=t)}updateIndex(e){return e===-1?e=0:e<0&&(e=-e-2),e}getCandidateStickyLinesIntersectingFromStickyModel(e,t,o,r,n){if(t.children.length===0)return;let s=n,a=[];for(let p=0;p<t.children.length;p++){let g=t.children[p];g.range&&a.push(g.range.startLineNumber)}let c=this.updateIndex(kl(a,e.startLineNumber,(p,g)=>p-g)),h=this.updateIndex(kl(a,e.startLineNumber+r,(p,g)=>p-g));for(let p=c;p<=h;p++){let g=t.children[p];if(!g)return;if(g.range){let f=g.range.startLineNumber,_=g.range.endLineNumber;e.startLineNumber<=_+1&&f-1<=e.endLineNumber&&f!==s&&(s=f,o.push(new hA(f,_-1,r+1)),this.getCandidateStickyLinesIntersectingFromStickyModel(e,g,o,r+1,f))}else this.getCandidateStickyLinesIntersectingFromStickyModel(e,g,o,r,n)}}getCandidateStickyLinesIntersecting(e){var t,o;if(!(!((t=this._model)===null||t===void 0)&&t.element))return[];let r=[];this.getCandidateStickyLinesIntersectingFromStickyModel(e,this._model.element,r,0,-1);let n=(o=this._editor._getViewModel())===null||o===void 0?void 0:o.getHiddenAreas();if(n)for(let s of n)r=r.filter(a=>!(a.startLineNumber>=s.startLineNumber&&a.endLineNumber<=s.endLineNumber+1));return r}};iD=F9([jO(1,J),jO(2,Ye)],iD);Je();Wt();Me();it();ge();pt();yt();Ii();Hr();ze();g6();var L9=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},$u=function(i,e){return function(t,o){e(t,o,i)}},pA,Er=pA=class extends B{constructor(e,t,o,r,n,s,a){super(),this._editor=e,this._contextMenuService=t,this._languageFeaturesService=o,this._instaService=r,this._contextKeyService=a,this._sessionStore=new H,this._foldingModel=null,this._maxStickyLines=Number.MAX_SAFE_INTEGER,this._candidateDefinitionsLength=-1,this._focusedStickyElementIndex=-1,this._enabled=!1,this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1,this._endLineNumbers=[],this._showEndForLine=null,this._stickyScrollWidget=new Xb(this._editor),this._stickyLineCandidateProvider=new iD(this._editor,o,n),this._register(this._stickyScrollWidget),this._register(this._stickyLineCandidateProvider),this._widgetState=new ig([],[],0),this._onDidResize(),this._readConfiguration();let c=this._stickyScrollWidget.getDomNode();this._register(this._editor.onDidChangeConfiguration(p=>{this._readConfigurationChange(p)})),this._register(Ne(c,at.CONTEXT_MENU,async p=>{this._onContextMenu(Mr(c),p)})),this._stickyScrollFocusedContextKey=A.stickyScrollFocused.bindTo(this._contextKeyService),this._stickyScrollVisibleContextKey=A.stickyScrollVisible.bindTo(this._contextKeyService);let h=this._register(Or(c));this._register(h.onDidBlur(p=>{this._positionRevealed===!1&&c.clientHeight===0?(this._focusedStickyElementIndex=-1,this.focus()):this._disposeFocusStickyScrollStore()})),this._register(h.onDidFocus(p=>{this.focus()})),this._registerMouseListeners(),this._register(Ne(c,at.MOUSE_DOWN,p=>{this._onMouseDown=!0}))}static get(e){return e.getContribution(pA.ID)}_disposeFocusStickyScrollStore(){var e;this._stickyScrollFocusedContextKey.set(!1),(e=this._focusDisposableStore)===null||e===void 0||e.dispose(),this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1}focus(){if(this._onMouseDown){this._onMouseDown=!1,this._editor.focus();return}this._stickyScrollFocusedContextKey.get()!==!0&&(this._focused=!0,this._focusDisposableStore=new H,this._stickyScrollFocusedContextKey.set(!0),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumbers.length-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}focusNext(){this._focusedStickyElementIndex<this._stickyScrollWidget.lineNumberCount-1&&this._focusNav(!0)}focusPrevious(){this._focusedStickyElementIndex>0&&this._focusNav(!1)}selectEditor(){this._editor.focus()}_focusNav(e){this._focusedStickyElementIndex=e?this._focusedStickyElementIndex+1:this._focusedStickyElementIndex-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex)}goToFocused(){let e=this._stickyScrollWidget.lineNumbers;this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:e[this._focusedStickyElementIndex],column:1})}_revealPosition(e){this._reveaInEditor(e,()=>this._editor.revealPosition(e))}_revealLineInCenterIfOutsideViewport(e){this._reveaInEditor(e,()=>this._editor.revealLineInCenterIfOutsideViewport(e.lineNumber,0))}_reveaInEditor(e,t){this._focused&&this._disposeFocusStickyScrollStore(),this._positionRevealed=!0,t(),this._editor.setSelection(T.fromPositions(e)),this._editor.focus()}_registerMouseListeners(){let e=this._register(new H),t=this._register(new Ln(this._editor,{extractLineNumberFromMouseEvent:n=>{let s=this._stickyScrollWidget.getEditorPositionFromNode(n.target.element);return s?s.lineNumber:0}})),o=n=>{if(!this._editor.hasModel()||n.target.type!==12||n.target.detail!==this._stickyScrollWidget.getId())return null;let s=n.target.element;if(!s||s.innerText!==s.innerHTML)return null;let a=this._stickyScrollWidget.getEditorPositionFromNode(s);return a?{range:new T(a.lineNumber,a.column,a.lineNumber,a.column+s.innerText.length),textElement:s}:null},r=this._stickyScrollWidget.getDomNode();this._register(Qo(r,at.CLICK,n=>{if(n.ctrlKey||n.altKey||n.metaKey||!n.leftButton)return;if(n.shiftKey){let h=this._stickyScrollWidget.getLineIndexFromChildDomNode(n.target);if(h===null)return;let p=new Y(this._endLineNumbers[h],1);this._revealLineInCenterIfOutsideViewport(p);return}if(this._stickyScrollWidget.isInFoldingIconDomNode(n.target)){let h=this._stickyScrollWidget.getLineNumberFromChildDomNode(n.target);this._toggleFoldingRegionForLine(h);return}if(!this._stickyScrollWidget.isInStickyLine(n.target))return;let c=this._stickyScrollWidget.getEditorPositionFromNode(n.target);if(!c){let h=this._stickyScrollWidget.getLineNumberFromChildDomNode(n.target);if(h===null)return;c=new Y(h,1)}this._revealPosition(c)})),this._register(Qo(r,at.MOUSE_MOVE,n=>{if(n.shiftKey){let s=this._stickyScrollWidget.getLineIndexFromChildDomNode(n.target);if(s===null||this._showEndForLine!==null&&this._showEndForLine===s)return;this._showEndForLine=s,this._renderStickyScroll();return}this._showEndForLine!==null&&(this._showEndForLine=null,this._renderStickyScroll())})),this._register(Ne(r,at.MOUSE_LEAVE,n=>{this._showEndForLine!==null&&(this._showEndForLine=null,this._renderStickyScroll())})),this._register(t.onMouseMoveOrRelevantKeyDown(([n,s])=>{let a=o(n);if(!a||!n.hasTriggerModifier||!this._editor.hasModel()){e.clear();return}let{range:c,textElement:h}=a;if(!c.equalsRange(this._stickyRangeProjectedOnEditor))this._stickyRangeProjectedOnEditor=c,e.clear();else if(h.style.textDecoration==="underline")return;let p=new _t;e.add(Ve(()=>p.dispose(!0)));let g;pc(this._languageFeaturesService.definitionProvider,this._editor.getModel(),new Y(c.startLineNumber,c.startColumn+1),p.token).then(f=>{if(!p.token.isCancellationRequested)if(f.length!==0){this._candidateDefinitionsLength=f.length;let _=h;g!==_?(e.clear(),g=_,g.style.textDecoration="underline",e.add(Ve(()=>{g.style.textDecoration="none"}))):g||(g=_,g.style.textDecoration="underline",e.add(Ve(()=>{g.style.textDecoration="none"})))}else e.clear()})})),this._register(t.onCancel(()=>{e.clear()})),this._register(t.onExecute(async n=>{if(n.target.type!==12||n.target.detail!==this._stickyScrollWidget.getId())return;let s=this._stickyScrollWidget.getEditorPositionFromNode(n.target.element);s&&(!this._editor.hasModel()||!this._stickyRangeProjectedOnEditor||(this._candidateDefinitionsLength>1&&(this._focused&&this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:s.lineNumber,column:1})),this._instaService.invokeFunction(qy,n,this._editor,{uri:this._editor.getModel().uri,range:this._stickyRangeProjectedOnEditor})))}))}_onContextMenu(e,t){let o=new yk(e,t);this._contextMenuService.showContextMenu({menuId:Q.StickyScrollContext,getAnchor:()=>o})}_toggleFoldingRegionForLine(e){if(!this._foldingModel||e===null)return;let t=this._stickyScrollWidget.getRenderedStickyLine(e),o=t?.foldingIcon;if(!o)return;vv(this._foldingModel,Number.MAX_VALUE,[e]),o.isCollapsed=!o.isCollapsed;let r=(o.isCollapsed?this._editor.getTopForLineNumber(o.foldingEndLine):this._editor.getTopForLineNumber(o.foldingStartLine))-this._editor.getOption(67)*t.index+1;this._editor.setScrollTop(r),this._renderStickyScroll(e)}_readConfiguration(){let e=this._editor.getOption(115);if(e.enabled===!1){this._editor.removeOverlayWidget(this._stickyScrollWidget),this._sessionStore.clear(),this._enabled=!1;return}else e.enabled&&!this._enabled&&(this._editor.addOverlayWidget(this._stickyScrollWidget),this._sessionStore.add(this._editor.onDidScrollChange(o=>{o.scrollTopChanged&&(this._showEndForLine=null,this._renderStickyScroll())})),this._sessionStore.add(this._editor.onDidLayoutChange(()=>this._onDidResize())),this._sessionStore.add(this._editor.onDidChangeModelTokens(o=>this._onTokensChange(o))),this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(()=>{this._showEndForLine=null,this._renderStickyScroll()})),this._enabled=!0);this._editor.getOption(68).renderType===2&&this._sessionStore.add(this._editor.onDidChangeCursorPosition(()=>{this._showEndForLine=null,this._renderStickyScroll(0)}))}_readConfigurationChange(e){(e.hasChanged(115)||e.hasChanged(73)||e.hasChanged(67)||e.hasChanged(110)||e.hasChanged(68))&&this._readConfiguration(),e.hasChanged(68)&&this._renderStickyScroll(0)}_needsUpdate(e){let t=this._stickyScrollWidget.getCurrentLines();for(let o of t)for(let r of e.ranges)if(o>=r.fromLineNumber&&o<=r.toLineNumber)return!0;return!1}_onTokensChange(e){this._needsUpdate(e)&&this._renderStickyScroll(0)}_onDidResize(){let t=this._editor.getLayoutInfo().height/this._editor.getOption(67);this._maxStickyLines=Math.round(t*.25)}async _renderStickyScroll(e){var t,o;let r=this._editor.getModel();if(!r||r.isTooLargeForTokenization()){this._foldingModel=null,this._stickyScrollWidget.setState(void 0,null);return}let n=this._stickyLineCandidateProvider.getVersionId();if(n===void 0||n===r.getVersionId())if(this._foldingModel=(o=await((t=Qr.get(this._editor))===null||t===void 0?void 0:t.getFoldingModel()))!==null&&o!==void 0?o:null,this._widgetState=this.findScrollWidgetState(),this._stickyScrollVisibleContextKey.set(this._widgetState.startLineNumbers.length!==0),!this._focused)this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,e);else if(this._focusedStickyElementIndex===-1)this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,e),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1,this._focusedStickyElementIndex!==-1&&this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);else{let s=this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,e),this._stickyScrollWidget.lineNumberCount===0?this._focusedStickyElementIndex=-1:(this._stickyScrollWidget.lineNumbers.includes(s)||(this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1),this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}}findScrollWidgetState(){let e=this._editor.getOption(67),t=Math.min(this._maxStickyLines,this._editor.getOption(115).maxLineCount),o=this._editor.getScrollTop(),r=0,n=[],s=[],a=this._editor.getVisibleRanges();if(a.length!==0){let c=new Xs(a[0].startLineNumber,a[a.length-1].endLineNumber),h=this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(c);for(let p of h){let g=p.startLineNumber,f=p.endLineNumber,_=p.nestingDepth;if(f-g>0){let y=(_-1)*e,C=_*e,x=this._editor.getBottomForLineNumber(g)-o,D=this._editor.getTopForLineNumber(f)-o,E=this._editor.getBottomForLineNumber(f)-o;if(y>D&&y<=E){n.push(g),s.push(f+1),r=E-C;break}else C>x&&C<=E&&(n.push(g),s.push(f+1));if(n.length===t)break}}}return this._endLineNumbers=s,new ig(n,s,r,this._showEndForLine)}dispose(){super.dispose(),this._sessionStore.dispose()}};Er.ID="store.contrib.stickyScrollController";Er=pA=L9([$u(1,_r),$u(2,J),$u(3,ce),$u(4,Ye),$u(5,li),$u(6,ve)],Er);var oD=class extends hi{constructor(){super({id:"editor.action.toggleStickyScroll",title:he(U({},pe("toggleEditorStickyScroll","Toggle Editor Sticky Scroll")),{mnemonicTitle:b({key:"mitoggleStickyScroll",comment:["&& denotes a mnemonic"]},"&&Toggle Editor Sticky Scroll")}),metadata:{description:pe("toggleEditorStickyScroll.description","Toggle/enable the editor sticky scroll which shows the nested scopes at the top of the viewport")},category:RO.View,toggled:{condition:W.equals("config.editor.stickyScroll.enabled",!0),title:b("stickyScroll","Sticky Scroll"),mnemonicTitle:b({key:"miStickyScroll",comment:["&& denotes a mnemonic"]},"&&Sticky Scroll")},menu:[{id:Q.CommandPalette},{id:Q.MenubarAppearanceMenu,group:"4_editor",order:3},{id:Q.StickyScrollContext}]})}async run(e){let t=e.get(Oe),o=!t.getValue("editor.stickyScroll.enabled");return t.updateValue("editor.stickyScroll.enabled",o)}},cD=100,rD=class extends So{constructor(){super({id:"editor.action.focusStickyScroll",title:he(U({},pe("focusStickyScroll","Focus on the editor sticky scroll")),{mnemonicTitle:b({key:"mifocusStickyScroll",comment:["&& denotes a mnemonic"]},"&&Focus Sticky Scroll")}),precondition:W.and(W.has("config.editor.stickyScroll.enabled"),A.stickyScrollVisible),menu:[{id:Q.CommandPalette}]})}runEditorCommand(e,t){var o;(o=Er.get(t))===null||o===void 0||o.focus()}},nD=class extends So{constructor(){super({id:"editor.action.selectNextStickyScrollLine",title:pe("selectNextStickyScrollLine.title","Select the next editor sticky scroll line"),precondition:A.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:cD,primary:18}})}runEditorCommand(e,t){var o;(o=Er.get(t))===null||o===void 0||o.focusNext()}},sD=class extends So{constructor(){super({id:"editor.action.selectPreviousStickyScrollLine",title:pe("selectPreviousStickyScrollLine.title","Select the previous sticky scroll line"),precondition:A.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:cD,primary:16}})}runEditorCommand(e,t){var o;(o=Er.get(t))===null||o===void 0||o.focusPrevious()}},aD=class extends So{constructor(){super({id:"editor.action.goToFocusedStickyScrollLine",title:pe("goToFocusedStickyScrollLine.title","Go to the focused sticky scroll line"),precondition:A.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:cD,primary:3}})}runEditorCommand(e,t){var o;(o=Er.get(t))===null||o===void 0||o.goToFocused()}},lD=class extends So{constructor(){super({id:"editor.action.selectEditor",title:pe("selectEditor.title","Select Editor"),precondition:A.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:cD,primary:9}})}runEditorCommand(e,t){var o;(o=Er.get(t))===null||o===void 0||o.selectEditor()}};Wt();le(Er.ID,Er,1);et(oD);et(rD);et(sD);et(nD);et(aD);et(lD);yt();Ss();Oh();X();Vi();ge();Ge();var zO=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},ng=function(i,e){return function(t,o){e(t,o,i)}},mA=class{constructor(e,t,o,r,n,s){this.range=e,this.insertText=t,this.filterText=o,this.additionalTextEdits=r,this.command=n,this.completion=s}},gA=class extends XP{constructor(e,t,o,r,n,s){super(n.disposable),this.model=e,this.line=t,this.word=o,this.completionModel=r,this._suggestMemoryService=s}canBeReused(e,t,o){return this.model===e&&this.line===t&&this.word.word.length>0&&this.word.startColumn===o.startColumn&&this.word.endColumn<o.endColumn&&this.completionModel.getIncompleteProvider().size===0}get items(){var e;let t=[],{items:o}=this.completionModel,r=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},o),n=Oo.slice(o,r),s=Oo.slice(o,0,r),a=5;for(let c of Oo.concat(n,s)){if(c.score===xs.Default)continue;let h=new T(c.editStart.lineNumber,c.editStart.column,c.editInsertEnd.lineNumber,c.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),p=c.completion.insertTextRules&&c.completion.insertTextRules&4?{snippet:c.completion.insertText}:c.completion.insertText;t.push(new mA(h,p,(e=c.filterTextLow)!==null&&e!==void 0?e:c.labelLow,c.completion.additionalTextEdits,c.completion.command,c)),a-->=0&&c.resolve(we.None)}return t}};gA=zO([ng(5,Fu)],gA);var fA=class extends B{constructor(e,t,o,r){super(),this._languageFeatureService=e,this._clipboardService=t,this._suggestMemoryService=o,this._editorService=r,this._store.add(e.inlineCompletionsProvider.register("*",this))}async provideInlineCompletions(e,t,o,r){var n;if(o.selectedSuggestionInfo)return;let s;for(let y of this._editorService.listCodeEditors())if(y.getModel()===e){s=y;break}if(!s)return;let a=s.getOption(89);if(Vn.isAllOff(a))return;e.tokenization.tokenizeIfCheap(t.lineNumber);let c=e.tokenization.getLineTokens(t.lineNumber),h=c.getStandardTokenType(c.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(Vn.valueFor(a,h)!=="inline")return;let p=e.getWordAtPosition(t),g;if(p?.word||(g=this._getTriggerCharacterInfo(e,t)),!p?.word&&!g||(p||(p=e.getWordUntilPosition(t)),p.endColumn!==t.column))return;let f,_=e.getValueInRange(new T(t.lineNumber,1,t.lineNumber,t.column));if(!g&&(!((n=this._lastResult)===null||n===void 0)&&n.canBeReused(e,t.lineNumber,p))){let y=new Fm(_,t.column-this._lastResult.word.endColumn);this._lastResult.completionModel.lineContext=y,this._lastResult.acquire(),f=this._lastResult}else{let y=await vm(this._languageFeatureService.completionProvider,e,t,new zs(void 0,Mu.createSuggestFilter(s).itemKind,g?.providers),g&&{triggerKind:1,triggerCharacter:g.ch},r),C;y.needsClipboard&&(C=await this._clipboardService.readText());let x=new Nu(y.items,t.column,new Fm(_,0),Za.None,s.getOption(118),s.getOption(112),{boostFullMatch:!1,firstMatchCanBeWeak:!1},C);f=new gA(e,t.lineNumber,p,x,y,this._suggestMemoryService)}return this._lastResult=f,f}handleItemDidShow(e,t){t.completion.resolve(we.None)}freeInlineCompletions(e){e.release()}_getTriggerCharacterInfo(e,t){var o;let r=e.getValueInRange(T.fromPositions({lineNumber:t.lineNumber,column:t.column-1},t)),n=new Set;for(let s of this._languageFeatureService.completionProvider.all(e))!((o=s.triggerCharacters)===null||o===void 0)&&o.includes(r)&&n.add(s);if(n.size!==0)return{providers:n,ch:r}}};fA=zO([ng(0,J),ng(1,Vr),ng(2,Fu),ng(3,tt)],fA);An(fA);Lr();xe();re();var _A=class extends j{constructor(){super({id:"editor.action.forceRetokenize",label:b("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,t){if(!t.hasModel())return;let o=t.getModel();o.tokenization.resetTokenization();let r=new qt;o.tokenization.forceTokenization(o.getLineCount()),r.stop(),console.log(`tokenization took ${r.elapsed()}`)}};M(_A);re();Wt();var N9=(()=>{class i extends hi{constructor(){super({id:i.ID,title:pe({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),precondition:void 0,keybinding:{primary:2091,mac:{primary:1323},weight:100},metadata:{description:pe("tabMovesFocusDescriptions","Determines whether the tab key moves focus around the workbench or inserts the tab character in the current editor. This is also called tab trapping, tab navigation, or tab focus mode.")},f1:!0})}run(){let o=!i0.getTabFocusMode();i0.setTabFocusMode(o),o?ai(b("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element")):ai(b("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}}return i.ID="editor.action.toggleTabFocusMode",i})();et(N9);Xe();xi();yr();X();Zi();Tt();xe();gi();pp();Rr();ze();Wl();X();Je();ze();_k();nt();X();var M9=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},VO=function(i,e){return function(t,o){e(t,o,i)}},dD=class extends B{get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}constructor(e,t,o={},r,n){var s,a;super(),this._link=t,this._hoverService=r,this._enabled=!0,this.el=Z(e,te("a.monaco-link",{tabIndex:(s=t.tabIndex)!==null&&s!==void 0?s:0,href:t.href},t.label)),this.hoverDelegate=(a=o.hoverDelegate)!==null&&a!==void 0?a:Na("mouse"),this.setTooltip(t.title),this.el.setAttribute("role","button");let c=this._register(new Lf(this.el,"click")),h=this._register(new Lf(this.el,"keypress")),p=ft.chain(h.event,_=>_.map(y=>new Vh(y)).filter(y=>y.keyCode===3)),g=this._register(new Lf(this.el,PF.Tap)).event;this._register(kf.addTarget(this.el));let f=ft.any(c.event,p,g);this._register(f(_=>{this.enabled&&(Rl.stop(_,!0),o?.opener?o.opener(this._link.href):n.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}setTooltip(e){this.hoverDelegate.showNativeHover?this.el.title=e??"":!this.hover&&e?this.hover=this._register(this._hoverService.setupUpdatableHover(this.hoverDelegate,this.el,e)):this.hover&&this.hover.update(e)}};dD=M9([VO(3,Cs),VO(4,Pi)],dD);to();var UO=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},qO=function(i,e){return function(t,o){e(t,o,i)}},O9=26,uD=class extends B{constructor(e,t){super(),this._editor=e,this.instantiationService=t,this.banner=this._register(this.instantiationService.createInstance(yA))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show(he(U({},e),{onClose:()=>{var t;this.hide(),(t=e.onClose)===null||t===void 0||t.call(e)}})),this._editor.setBanner(this.banner.element,O9)}};uD=UO([qO(1,ce)],uD);var yA=class extends B{constructor(e){super(),this.instantiationService=e,this.markdownRenderer=this.instantiationService.createInstance(vr,{}),this.element=te("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message=="string")return e.message}getBannerMessage(e){if(typeof e=="string"){let t=te("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}clear(){Co(this.element)}show(e){Co(this.element);let t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);let o=Z(this.element,te("div.icon-container"));o.setAttribute("aria-hidden","true"),e.icon&&o.appendChild(te(`div${je.asCSSSelector(e.icon)}`));let r=Z(this.element,te("div.message-container"));if(r.setAttribute("aria-hidden","true"),r.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=Z(this.element,te("div.message-actions-container")),e.actions)for(let s of e.actions)this._register(this.instantiationService.createInstance(dD,this.messageActionsContainer,he(U({},s),{tabIndex:-1}),{}));let n=Z(this.element,te("div.action-container"));this.actionBar=this._register(new Is(n)),this.actionBar.push(this._register(new _n("banner.close","Close Banner",je.asClassName(t_),!0,()=>{typeof e.onClose=="function"&&e.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};yA=UO([qO(0,ce)],yA);re();ei();Je();var EA=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Gu=function(i,e){return function(t,o){e(t,o,i)}},R9=kt("extensions-warning-message",be.warning,b("warningIcon","Icon shown with a warning message in the extensions editor.")),Ju=class extends B{constructor(e,t,o,r){super(),this._editor=e,this._editorWorkerService=t,this._workspaceTrustService=o,this._highlighter=null,this._bannerClosed=!1,this._updateState=n=>{if(n&&n.hasMore){if(this._bannerClosed)return;let s=Math.max(n.ambiguousCharacterCount,n.nonBasicAsciiCharacterCount,n.invisibleCharacterCount),a;if(n.nonBasicAsciiCharacterCount>=s)a={message:b("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new TA};else if(n.ambiguousCharacterCount>=s)a={message:b("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new sg};else if(n.invisibleCharacterCount>=s)a={message:b("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new AA};else throw new Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:a.message,icon:R9,actions:[{label:a.command.shortLabel,href:`command:${a.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(r.createInstance(uD,e)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=e.getOption(125),this._register(o.onDidChangeTrust(n=>{this._updateHighlighter()})),this._register(e.onDidChangeConfiguration(n=>{n.hasChanged(125)&&(this._options=e.getOption(125),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;let e=B9(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every(o=>o===!1))return;let t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,includeStrings:e.includeStrings,allowedCodePoints:Object.keys(e.allowedCharacters).map(o=>o.codePointAt(0)),allowedLocales:Object.keys(e.allowedLocales).map(o=>o==="_os"?new Intl.NumberFormat().resolvedOptions().locale:o==="_vscode"?qP:o)};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new bA(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new DA(this._editor,t,this._updateState)}getDecorationInfo(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}};Ju.ID="editor.contrib.unicodeHighlighter";Ju=EA([Gu(1,zr),Gu(2,kL),Gu(3,ce)],Ju);function B9(i,e){return{nonBasicASCII:e.nonBasicASCII===rf?!i:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments===rf?!i:e.includeComments,includeStrings:e.includeStrings===rf?!i:e.includeStrings,allowedCharacters:e.allowedCharacters,allowedLocales:e.allowedLocales}}var bA=class extends B{constructor(e,t,o,r){super(),this._editor=e,this._options=t,this._updateState=o,this._editorWorkerService=r,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new ut(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}let e=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(t=>{if(this._model.isDisposed()||this._model.getVersionId()!==e)return;this._updateState(t);let o=[];if(!t.hasMore)for(let r of t.ranges)o.push({range:r,options:Xu.instance.getDecorationFromOptions(this._options)});this._decorations.set(o)})}getDecorationInfo(e){if(!this._decorations.has(e))return null;let t=this._editor.getModel();if(!h0(t,e))return null;let o=t.getValueInRange(e.range);return{reason:$O(o,this._options),inComment:p0(t,e),inString:m0(t,e)}}};bA=EA([Gu(3,zr)],bA);var DA=class extends B{constructor(e,t,o){super(),this._editor=e,this._options=t,this._updateState=o,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new ut(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}let e=this._editor.getVisibleRanges(),t=[],o={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(let r of e){let n=e0.computeUnicodeHighlights(this._model,this._options,r);for(let s of n.ranges)o.ranges.push(s);o.ambiguousCharacterCount+=o.ambiguousCharacterCount,o.invisibleCharacterCount+=o.invisibleCharacterCount,o.nonBasicAsciiCharacterCount+=o.nonBasicAsciiCharacterCount,o.hasMore=o.hasMore||n.hasMore}if(!o.hasMore)for(let r of o.ranges)t.push({range:r,options:Xu.instance.getDecorationFromOptions(this._options)});this._updateState(o),this._decorations.set(t)}getDecorationInfo(e){if(!this._decorations.has(e))return null;let t=this._editor.getModel(),o=t.getValueInRange(e.range);return h0(t,e)?{reason:$O(o,this._options),inComment:p0(t,e),inString:m0(t,e)}:null}},KO=b("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options"),CA=class{constructor(e,t,o){this._editor=e,this._languageService=t,this._openerService=o,this.hoverOrdinal=5}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];let o=this._editor.getModel(),r=this._editor.getContribution(Ju.ID);if(!r)return[];let n=[],s=new Set,a=300;for(let c of t){let h=r.getDecorationInfo(c);if(!h)continue;let g=o.getValueInRange(c.range).codePointAt(0),f=vA(g),_;switch(h.reason.kind){case 0:{cf(h.reason.confusableWith)?_=b("unicodeHighlight.characterIsAmbiguousASCII","The character {0} could be confused with the ASCII character {1}, which is more common in source code.",f,vA(h.reason.confusableWith.codePointAt(0))):_=b("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",f,vA(h.reason.confusableWith.codePointAt(0)));break}case 1:_=b("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",f);break;case 2:_=b("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",f);break}if(s.has(_))continue;s.add(_);let y={codePoint:g,reason:h.reason,inComment:h.inComment,inString:h.inString},C=b("unicodeHighlight.adjustSettings","Adjust settings"),x=`command:${GO.ID}?${encodeURIComponent(JSON.stringify(y))}`,D=new Gt("",!0).appendMarkdown(_).appendText(" ").appendLink(x,C,KO);n.push(new ko(this,c.range,[D],!1,a++))}return n}renderHoverParts(e,t){return RM(e,t,this._editor,this._languageService,this._openerService)}};CA=EA([Gu(1,pi),Gu(2,Pi)],CA);function xA(i){return`U+${i.toString(16).padStart(4,"0")}`}function vA(i){let e=`\`${xA(i)}\``;return zC.isInvisibleCharacter(i)||(e+=` "${`${W9(i)}`}"`),e}function W9(i){return i===96?"`` ` ``":"`"+String.fromCodePoint(i)+"`"}function $O(i,e){return e0.computeUnicodeHighlightReason(i,e)}var Xu=class{constructor(){this.map=new Map}getDecorationFromOptions(e){return this.getDecoration(!e.includeComments,!e.includeStrings)}getDecoration(e,t){let o=`${e}${t}`,r=this.map.get(o);return r||(r=ke.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:e,hideInStringTokens:t}),this.map.set(o,r)),r}};Xu.instance=new Xu;var SA=class extends j{constructor(){super({id:sg.ID,label:b("action.unicodeHighlight.disableHighlightingInComments","Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0}),this.shortLabel=b("unicodeHighlight.disableHighlightingInComments.shortLabel","Disable Highlight In Comments")}async run(e,t,o){let r=e?.get(Oe);r&&this.runAction(r)}async runAction(e){await e.updateValue(dn.includeComments,!1,2)}},wA=class extends j{constructor(){super({id:sg.ID,label:b("action.unicodeHighlight.disableHighlightingInStrings","Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0}),this.shortLabel=b("unicodeHighlight.disableHighlightingInStrings.shortLabel","Disable Highlight In Strings")}async run(e,t,o){let r=e?.get(Oe);r&&this.runAction(r)}async runAction(e){await e.updateValue(dn.includeStrings,!1,2)}},sg=(()=>{class i extends j{constructor(){super({id:i.ID,label:b("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=b("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}async run(t,o,r){let n=t?.get(Oe);n&&this.runAction(n)}async runAction(t){await t.updateValue(dn.ambiguousCharacters,!1,2)}}return i.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters",i})(),AA=(()=>{class i extends j{constructor(){super({id:i.ID,label:b("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=b("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}async run(t,o,r){let n=t?.get(Oe);n&&this.runAction(n)}async runAction(t){await t.updateValue(dn.invisibleCharacters,!1,2)}}return i.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters",i})(),TA=(()=>{class i extends j{constructor(){super({id:i.ID,label:b("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=b("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}async run(t,o,r){let n=t?.get(Oe);n&&this.runAction(n)}async runAction(t){await t.updateValue(dn.nonBasicASCII,!1,2)}}return i.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters",i})(),GO=(()=>{class i extends j{constructor(){super({id:i.ID,label:b("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}async run(t,o,r){let{codePoint:n,reason:s,inString:a,inComment:c}=r,h=String.fromCodePoint(n),p=t.get(qi),g=t.get(Oe);function f(C){return zC.isInvisibleCharacter(C)?b("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",xA(C)):b("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`${xA(C)} "${h}"`)}let _=[];if(s.kind===0)for(let C of s.notAmbiguousInLocales)_.push({label:b("unicodeHighlight.allowCommonCharactersInLanguage",'Allow unicode characters that are more common in the language "{0}".',C),run:async()=>{j9(g,[C])}});if(_.push({label:f(n),run:()=>H9(g,[n])}),c){let C=new SA;_.push({label:C.label,run:async()=>C.runAction(g)})}else if(a){let C=new wA;_.push({label:C.label,run:async()=>C.runAction(g)})}if(s.kind===0){let C=new sg;_.push({label:C.label,run:async()=>C.runAction(g)})}else if(s.kind===1){let C=new AA;_.push({label:C.label,run:async()=>C.runAction(g)})}else if(s.kind===2){let C=new TA;_.push({label:C.label,run:async()=>C.runAction(g)})}else z9(s);let y=await p.pick(_,{title:KO});y&&await y.run()}}return i.ID="editor.action.unicodeHighlight.showExcludeOptions",i})();async function H9(i,e){let t=i.getValue(dn.allowedCharacters),o;typeof t=="object"&&t?o=t:o={};for(let r of e)o[String.fromCodePoint(r)]=!0;await i.updateValue(dn.allowedCharacters,o,2)}async function j9(i,e){var t;let o=(t=i.inspect(dn.allowedLocales).user)===null||t===void 0?void 0:t.value,r;typeof o=="object"&&o?r=Object.assign({},o):r={};for(let n of e)r[n]=!0;await i.updateValue(dn.allowedLocales,r,2)}function z9(i){throw new Error(`Unexpected value: ${i}`)}M(sg);M(AA);M(TA);M(GO);le(Ju.ID,Ju,1);Po.register(CA);X();ir();xe();Vi();re();var V9=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},JO=function(i,e){return function(t,o){e(t,o,i)}},XO="ignoreUnusualLineTerminators";function U9(i,e,t){i.setModelProperty(e.uri,XO,t)}function q9(i,e){return i.getModelProperty(e.uri,XO)}var ag=class extends B{constructor(e,t,o){super(),this._editor=e,this._dialogService=t,this._codeEditorService=o,this._isPresentingDialog=!1,this._config=this._editor.getOption(126),this._register(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(126)&&(this._config=this._editor.getOption(126),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(r=>{r.isUndoing||this._checkForUnusualLineTerminators()})),this._checkForUnusualLineTerminators()}async _checkForUnusualLineTerminators(){if(this._config==="off"||!this._editor.hasModel())return;let e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators()||q9(this._codeEditorService,e)===!0||this._editor.getOption(91))return;if(this._config==="auto"){e.removeUnusualLineTerminators(this._editor.getSelections());return}if(this._isPresentingDialog)return;let o;try{this._isPresentingDialog=!0,o=await this._dialogService.confirm({title:b("unusualLineTerminators.title","Unusual Line Terminators"),message:b("unusualLineTerminators.message","Detected unusual line terminators"),detail:b("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",fo(e.uri)),primaryButton:b({key:"unusualLineTerminators.fix",comment:["&& denotes a mnemonic"]},"&&Remove Unusual Line Terminators"),cancelButton:b("unusualLineTerminators.ignore","Ignore")})}finally{this._isPresentingDialog=!1}if(!o.confirmed){U9(this._codeEditorService,e,!0);return}e.removeUnusualLineTerminators(this._editor.getSelections())}};ag.ID="editor.contrib.unusualLineTerminatorsDetector";ag=V9([JO(1,Id),JO(2,tt)],ag);le(ag.ID,ag,1);re();bt();Xe();yt();Ze();X();xe();Vi();ge();it();Jt();bn();Ge();Me();Ol();Ea();var YO=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},hD=function(i,e){return function(t,o){e(t,o,i)}},ii,IA,gD=new Ee("hasWordHighlights",!1);function QO(i,e,t,o){let r=i.ordered(e);return Uh(r.map(n=>()=>Promise.resolve(n.provideDocumentHighlights(e,t,o)).then(void 0,$e)),zt).then(n=>{if(n){let s=new gr;return s.set(e.uri,n),s}return new gr})}function K9(i,e,t,o,r,n){let s=i.ordered(e);return Uh(s.map(a=>()=>{let c=n.filter(h=>Kk(h)).filter(h=>iL(a.selector,h.uri,h.getLanguageId(),!0,void 0,void 0)>0);return Promise.resolve(a.provideMultiDocumentHighlights(e,t,c,r)).then(void 0,$e)}),a=>a instanceof gr&&a.size>0)}var lg=class{constructor(e,t,o){this._model=e,this._selection=t,this._wordSeparators=o,this._wordRange=this._getCurrentWordRange(e,t),this._result=null}get result(){return this._result||(this._result=mt(e=>this._compute(this._model,this._selection,this._wordSeparators,e))),this._result}_getCurrentWordRange(e,t){let o=e.getWordAtPosition(t.getPosition());return o?new T(t.startLineNumber,o.startColumn,t.startLineNumber,o.endColumn):null}isValid(e,t,o){let r=t.startLineNumber,n=t.startColumn,s=t.endColumn,a=this._getCurrentWordRange(e,t),c=!!(this._wordRange&&this._wordRange.equalsRange(a));for(let h=0,p=o.length;!c&&h<p;h++){let g=o.getRange(h);g&&g.startLineNumber===r&&g.startColumn<=n&&g.endColumn>=s&&(c=!0)}return c}cancel(){this.result.cancel()}},PA=class extends lg{constructor(e,t,o,r){super(e,t,o),this._providers=r}_compute(e,t,o,r){return QO(this._providers,e,t.getPosition(),r).then(n=>n||new gr)}},kA=class extends lg{constructor(e,t,o,r,n){super(e,t,o),this._providers=r,this._otherModels=n}_compute(e,t,o,r){return K9(this._providers,e,t.getPosition(),o,r,this._otherModels).then(n=>n||new gr)}},pD=class extends lg{constructor(e,t,o,r,n){super(e,t,r),this._otherModels=n,this._selectionIsEmpty=t.isEmpty(),this._word=o}_compute(e,t,o,r){return xa(250,r).then(()=>{let n=new gr,s;if(this._word?s=this._word:s=e.getWordAtPosition(t.getPosition()),!s)return new gr;let a=[e,...this._otherModels];for(let c of a){if(c.isDisposed())continue;let p=c.findMatches(s.word,!0,!1,!0,o,!1).map(g=>({range:g.range,kind:Hh.Text}));p&&n.set(c.uri,p)}return n})}isValid(e,t,o){let r=t.isEmpty();return this._selectionIsEmpty!==r?!1:super.isValid(e,t,o)}};function $9(i,e,t,o,r){return i.has(e)?new PA(e,t,r,i):new pD(e,t,o,r,[])}function G9(i,e,t,o,r,n){return i.has(e)?new kA(e,t,r,i,n):new pD(e,t,o,r,n)}wo("_executeDocumentHighlights",async(i,e,t)=>{let o=i.get(J),r=await QO(o.documentHighlightProvider,e,t,we.None);return r?.get(e.uri)});var cg=ii=class{constructor(e,t,o,r,n){this.toUnhook=new H,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=new gr,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this.providers=t,this.multiDocumentProviders=o,this.codeEditorService=n,this._hasWordHighlights=gD.bindTo(r),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(81),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(s=>{this._ignorePositionChangeEvent||this.occurrencesHighlight!=="off"&&this._onPositionChanged(s)})),this.toUnhook.add(e.onDidFocusEditorText(s=>{this.occurrencesHighlight!=="off"&&(this.workerRequest||this._run())})),this.toUnhook.add(e.onDidChangeModelContent(s=>{this._stopAll()})),this.toUnhook.add(e.onDidChangeModel(s=>{!s.newModelUrl&&s.oldModelUrl?this._stopSingular():ii.query&&this._run()})),this.toUnhook.add(e.onDidChangeConfiguration(s=>{let a=this.editor.getOption(81);this.occurrencesHighlight!==a&&(this.occurrencesHighlight=a,this._stopAll())})),this.decorations=this.editor.createDecorationsCollection(),this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,ii.query&&this._run()}hasDecorations(){return this.decorations.length>0}restore(){this.occurrencesHighlight!=="off"&&this._run()}_getSortedHighlights(){return this.decorations.getRanges().sort(T.compareRangesUsingStarts)}moveNext(){let e=this._getSortedHighlights(),o=(e.findIndex(n=>n.containsPosition(this.editor.getPosition()))+1)%e.length,r=e[o];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(r.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(r);let n=this._getWord();if(n){let s=this.editor.getModel().getLineContent(r.startLineNumber);ai(`${s}, ${o+1} of ${e.length} for '${n.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){let e=this._getSortedHighlights(),o=(e.findIndex(n=>n.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,r=e[o];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(r.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(r);let n=this._getWord();if(n){let s=this.editor.getModel().getLineContent(r.startLineNumber);ai(`${s}, ${o+1} of ${e.length} for '${n.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeSingleDecorations(){if(!this.editor.hasModel())return;let e=ii.storedDecorations.get(this.editor.getModel().uri);e&&(this.editor.removeDecorations(e),ii.storedDecorations.delete(this.editor.getModel().uri),this.decorations.length>0&&(this.decorations.clear(),this._hasWordHighlights.set(!1)))}_removeAllDecorations(){let e=this.codeEditorService.listCodeEditors(),t=[];for(let o of e){if(!o.hasModel())continue;let r=ii.storedDecorations.get(o.getModel().uri);if(!r)continue;o.removeDecorations(r),t.push(o.getModel().uri);let n=Ys.get(o);n?.wordHighlighter&&n.wordHighlighter.decorations.length>0&&(n.wordHighlighter.decorations.clear(),n.wordHighlighter.workerRequest=null,n.wordHighlighter._hasWordHighlights.set(!1))}for(let o of t)ii.storedDecorations.delete(o)}_stopSingular(){var e,t,o,r;this._removeSingleDecorations(),this.editor.hasTextFocus()&&(((e=this.editor.getModel())===null||e===void 0?void 0:e.uri.scheme)!==Qt.vscodeNotebookCell&&((o=(t=ii.query)===null||t===void 0?void 0:t.modelInfo)===null||o===void 0?void 0:o.model.uri.scheme)!==Qt.vscodeNotebookCell?(ii.query=null,this._run()):!((r=ii.query)===null||r===void 0)&&r.modelInfo&&(ii.query.modelInfo=null)),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_stopAll(){this._removeAllDecorations(),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){var t;if(this.occurrencesHighlight==="off"){this._stopAll();return}if(e.reason!==3&&((t=this.editor.getModel())===null||t===void 0?void 0:t.uri.scheme)!==Qt.vscodeNotebookCell){this._stopAll();return}this._run()}_getWord(){let e=this.editor.getSelection(),t=e.startLineNumber,o=e.startColumn;return this.model.isDisposed()?null:this.model.getWordAtPosition({lineNumber:t,column:o})}getOtherModelsToHighlight(e){if(!e)return[];if(e.uri.scheme===Qt.vscodeNotebookCell){let n=[],s=this.codeEditorService.listCodeEditors();for(let a of s){let c=a.getModel();c&&c!==e&&c.uri.scheme===Qt.vscodeNotebookCell&&n.push(c)}return n}let o=[],r=this.codeEditorService.listCodeEditors();for(let n of r){if(!a_(n))continue;let s=n.getModel();s&&e===s.modified&&o.push(s.modified)}if(o.length)return o;if(this.occurrencesHighlight==="singleFile")return[];for(let n of r){let s=n.getModel();s&&s!==e&&o.push(s)}return o}_run(){var e;let t;if(this.editor.hasTextFocus()){let r=this.editor.getSelection();if(!r||r.startLineNumber!==r.endLineNumber){ii.query=null,this._stopAll();return}let n=r.startColumn,s=r.endColumn,a=this._getWord();if(!a||a.startColumn>n||a.endColumn<s){ii.query=null,this._stopAll();return}t=this.workerRequest&&this.workerRequest.isValid(this.model,r,this.decorations),ii.query={modelInfo:{model:this.model,selection:r},word:a}}else if(!ii.query)return;if(this.lastCursorPositionChangeTime=new Date().getTime(),t)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();let r=++this.workerRequestTokenId;this.workerRequestCompleted=!1;let n=this.getOtherModelsToHighlight(this.editor.getModel());if(!ii.query.modelInfo||ii.query.modelInfo.model.isDisposed())return;this.workerRequest=this.computeWithModel(ii.query.modelInfo.model,ii.query.modelInfo.selection,ii.query.word,n),(e=this.workerRequest)===null||e===void 0||e.result.then(s=>{r===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=s||[],this._beginRenderDecorations())},Fe)}}computeWithModel(e,t,o,r){return r.length?G9(this.multiDocumentProviders,e,t,o,this.editor.getOption(131),r):$9(this.providers,e,t,o,this.editor.getOption(131))}_beginRenderDecorations(){let e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){var e,t,o;this.renderDecorationsTimer=-1;let r=this.codeEditorService.listCodeEditors();for(let n of r){let s=Ys.get(n);if(!s)continue;let a=[],c=(e=n.getModel())===null||e===void 0?void 0:e.uri;if(c&&this.workerRequestValue.has(c)){let h=ii.storedDecorations.get(c),p=this.workerRequestValue.get(c);if(p)for(let f of p)f.range&&a.push({range:f.range,options:DO(f.kind)});let g=[];n.changeDecorations(f=>{g=f.deltaDecorations(h??[],a)}),ii.storedDecorations=ii.storedDecorations.set(c,g),a.length>0&&((t=s.wordHighlighter)===null||t===void 0||t.decorations.set(a),(o=s.wordHighlighter)===null||o===void 0||o._hasWordHighlights.set(!0))}}}dispose(){this._stopSingular(),this.toUnhook.dispose()}};cg.storedDecorations=new gr;cg.query=null;cg=ii=YO([hD(4,tt)],cg);var Ys=IA=class extends B{static get(e){return e.getContribution(IA.ID)}constructor(e,t,o,r){super(),this._wordHighlighter=null;let n=()=>{e.hasModel()&&!e.getModel().isTooLargeForTokenization()&&(this._wordHighlighter=new cg(e,o.documentHighlightProvider,o.multiDocumentHighlightProvider,t,r))};this._register(e.onDidChangeModel(s=>{this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),n()})),n()}get wordHighlighter(){return this._wordHighlighter}saveViewState(){return!!(this._wordHighlighter&&this._wordHighlighter.hasDecorations())}moveNext(){var e;(e=this._wordHighlighter)===null||e===void 0||e.moveNext()}moveBack(){var e;(e=this._wordHighlighter)===null||e===void 0||e.moveBack()}restoreViewState(e){this._wordHighlighter&&e&&this._wordHighlighter.restore()}dispose(){this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),super.dispose()}};Ys.ID="editor.contrib.wordHighlighter";Ys=IA=YO([hD(1,ve),hD(2,J),hD(3,tt)],Ys);var mD=class extends j{constructor(e,t){super(t),this._isNext=e}run(e,t){let o=Ys.get(t);o&&(this._isNext?o.moveNext():o.moveBack())}},FA=class extends mD{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:b("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:gD,kbOpts:{kbExpr:A.editorTextFocus,primary:65,weight:100}})}},LA=class extends mD{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:b("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:gD,kbOpts:{kbExpr:A.editorTextFocus,primary:1089,weight:100}})}},NA=class extends j{constructor(){super({id:"editor.action.wordHighlight.trigger",label:b("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:gD.toNegated(),kbOpts:{kbExpr:A.editorTextFocus,primary:0,weight:100}})}run(e,t,o){let r=Ys.get(t);r&&r.restoreViewState(!0)}};le(Ys.ID,Ys,0);M(FA);M(LA);M(NA);xe();v6();pt();ge();ui();it();Ii();re();Me();var Fc=class extends Bt{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,o){if(!t.hasModel())return;let r=Aa(t.getOption(131),t.getOption(130)),n=t.getModel(),a=t.getSelections().map(c=>{let h=new Y(c.positionLineNumber,c.positionColumn),p=this._move(r,n,h,this._wordNavigationType);return this._moveTo(c,p,this._inSelectionMode)});if(n.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,a.map(c=>OF.fromModelSelection(c))),a.length===1){let c=new Y(a[0].positionLineNumber,a[0].positionColumn);t.revealPosition(c,0)}}_moveTo(e,t,o){return o?new me(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new me(t.lineNumber,t.column,t.lineNumber,t.column)}},Gn=class extends Fc{_move(e,t,o,r){return xd.moveWordLeft(e,t,o,r)}},Jn=class extends Fc{_move(e,t,o,r){return xd.moveWordRight(e,t,o,r)}},MA=class extends Gn{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}},OA=class extends Gn{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}},RA=class extends Gn{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:W.and(A.textInputFocus,(e=W.and(Jh,gp))===null||e===void 0?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}},BA=class extends Gn{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}},WA=class extends Gn{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}},HA=class extends Gn{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:W.and(A.textInputFocus,(e=W.and(Jh,gp))===null||e===void 0?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}},jA=class extends Gn{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,o,r){return super._move(Aa(Rh.wordSeparators.defaultValue,e.intlSegmenterLocales),t,o,r)}},zA=class extends Gn{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,o,r){return super._move(Aa(Rh.wordSeparators.defaultValue,e.intlSegmenterLocales),t,o,r)}},VA=class extends Jn{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}},UA=class extends Jn{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:W.and(A.textInputFocus,(e=W.and(Jh,gp))===null||e===void 0?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}},qA=class extends Jn{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}},KA=class extends Jn{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}},$A=class extends Jn{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:W.and(A.textInputFocus,(e=W.and(Jh,gp))===null||e===void 0?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}},GA=class extends Jn{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}},JA=class extends Jn{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,o,r){return super._move(Aa(Rh.wordSeparators.defaultValue,e.intlSegmenterLocales),t,o,r)}},XA=class extends Jn{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,o,r){return super._move(Aa(Rh.wordSeparators.defaultValue,e.intlSegmenterLocales),t,o,r)}},Lc=class extends Bt{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,o){let r=e.get(Ye);if(!t.hasModel())return;let n=Aa(t.getOption(131),t.getOption(130)),s=t.getModel(),a=t.getSelections(),c=t.getOption(6),h=t.getOption(11),p=r.getLanguageConfiguration(s.getLanguageId()).getAutoClosingPairs(),g=t._getViewModel(),f=a.map(_=>{let y=this._delete({wordSeparators:n,model:s,selection:_,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(9),autoClosingBrackets:c,autoClosingQuotes:h,autoClosingPairs:p,autoClosedCharacters:g.getCursorAutoClosedCharacters()},this._wordNavigationType);return new bs(y,"")});t.pushUndoStop(),t.executeCommands(this.id,f),t.pushUndoStop()}},dg=class extends Lc{_delete(e,t){let o=xd.deleteWordLeft(e,t);return o||new T(1,1,1,1)}},ug=class extends Lc{_delete(e,t){let o=xd.deleteWordRight(e,t);if(o)return o;let r=e.model.getLineCount(),n=e.model.getLineMaxColumn(r);return new T(r,n,r,n)}},YA=class extends dg{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:A.writable})}},QA=class extends dg{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:A.writable})}},ZA=class extends dg{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}},eT=class extends ug{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:A.writable})}},tT=class extends ug{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:A.writable})}},iT=class extends ug{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}},oT=class extends j{constructor(){super({id:"deleteInsideWord",precondition:A.writable,label:b("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,o){if(!t.hasModel())return;let r=Aa(t.getOption(131),t.getOption(130)),n=t.getModel(),a=t.getSelections().map(c=>{let h=xd.deleteInsideWord(r,n,c);return new bs(h,"")});t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}};de(new MA);de(new OA);de(new RA);de(new BA);de(new WA);de(new HA);de(new VA);de(new UA);de(new qA);de(new KA);de(new $A);de(new GA);de(new jA);de(new zA);de(new JA);de(new XA);de(new YA);de(new QA);de(new ZA);de(new eT);de(new tT);de(new iT);M(oT);xe();ge();it();Rt();var rT=class extends Lc{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){let o=op.deleteWordPartLeft(e);return o||new T(1,1,1,1)}},nT=class extends Lc{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:A.writable,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){let o=op.deleteWordPartRight(e);if(o)return o;let r=e.model.getLineCount(),n=e.model.getLineMaxColumn(r);return new T(r,n,r,n)}},fD=class extends Fc{_move(e,t,o,r){return op.moveWordPartLeft(e,t,o)}},sT=class extends fD{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:783},weight:100}})}};Ue.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");var aT=class extends fD{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}};Ue.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");var _D=class extends Fc{_move(e,t,o,r){return op.moveWordPartRight(e,t,o)}},lT=class extends _D{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:785},weight:100}})}},cT=class extends _D{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:A.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}};de(new rT);de(new nT);de(new sT);de(new aT);de(new lT);de(new cT);yr();X();xe();re();var ZO=(()=>{class i extends B{constructor(t){super(),this.editor=t,this._register(this.editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit()))}_onDidAttemptReadOnlyEdit(){let t=fi.get(this.editor);if(t&&this.editor.hasModel()){let o=this.editor.getOptions().get(92);o||(this.editor.isSimpleWidget?o=new Gt(b("editor.simple.readonly","Cannot edit in read-only input")):o=new Gt(b("editor.readonly","Cannot edit in read-only editor"))),t.showMessage(o,this.editor.getPosition())}}}return i.ID="editor.contrib.readOnlyMessageController",i})();le(ZO.ID,ZO,2);var dze=IC(tR());Gl();ze();X();xe();Zi();var iR=(()=>{class i extends B{constructor(t){super(),this.editor=t,this.widget=null,Mh&&(this._register(t.onDidChangeConfiguration(()=>this.update())),this.update())}update(){let t=!this.editor.getOption(91);!this.widget&&t?this.widget=new X9(this.editor):this.widget&&!t&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}}return i.ID="editor.contrib.iPadShowKeyboard",i})(),X9=(()=>{class i extends B{constructor(t){super(),this.editor=t,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(Ne(this._domNode,"touchstart",o=>{this.editor.focus()})),this._register(Ne(this._domNode,"focus",o=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return i.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}}return i.ID="editor.contrib.ShowKeyboardWidget",i})();le(iR.ID,iR,3);var d7e=IC(nR());ms();Gl();re();ms();X();var t7=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},sR=function(i,e){return function(t,o){e(t,o,i)}},mg,gg=mg=class{constructor(e,t){this.quickInputService=e,this.keybindingService=t,this.registry=Oi.as(En.Quickaccess)}provide(e){let t=new H;return t.add(e.onDidAccept(()=>{let[o]=e.selectedItems;o&&this.quickInputService.quickAccess.show(o.prefix,{preserveValue:!0})})),t.add(e.onDidChangeValue(o=>{let r=this.registry.getQuickAccessProvider(o.substr(mg.PREFIX.length));r&&r.prefix&&r.prefix!==mg.PREFIX&&this.quickInputService.quickAccess.show(r.prefix,{preserveValue:!0})})),e.items=this.getQuickAccessProviders().filter(o=>o.prefix!==mg.PREFIX),t}getQuickAccessProviders(){return this.registry.getQuickAccessProviders().sort((t,o)=>t.prefix.localeCompare(o.prefix)).flatMap(t=>this.createPicks(t))}createPicks(e){return e.helpEntries.map(t=>{let o=t.prefix||e.prefix,r=o||"\u2026";return{prefix:o,label:r,keybinding:t.commandId?this.keybindingService.lookupKeybinding(t.commandId):void 0,ariaLabel:b("helpPickAriaLabel","{0}, {1}",r,t.description),description:t.description}})}};gg.PREFIX="?";gg=mg=t7([sR(0,qi),sR(1,qe)],gg);Oi.as(En.Quickaccess).registerQuickAccessProvider({ctor:gg,prefix:"",helpEntries:[{description:IL.helpQuickAccessActionLabel}]});X();JP();X();bn();NF();Bi();var Qu=class{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t,o){var r;let n=new H;e.canAcceptInBackground=!!(!((r=this.options)===null||r===void 0)&&r.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let s=n.add(new Ut);return s.value=this.doProvide(e,t,o),n.add(this.onDidActiveTextEditorControlChange(()=>{s.value=void 0,s.value=this.doProvide(e,t)})),n}doProvide(e,t,o){var r;let n=new H,s=this.activeTextEditorControl;if(s&&this.canProvideWithTextEditor(s)){let a={editor:s},c=l_(s);if(c){let h=(r=s.saveViewState())!==null&&r!==void 0?r:void 0;n.add(c.onDidChangeCursorPosition(()=>{var p;h=(p=s.saveViewState())!==null&&p!==void 0?p:void 0})),a.restoreViewState=()=>{h&&s===this.activeTextEditorControl&&s.restoreViewState(h)},n.add(sf(t.onCancellationRequested)(()=>{var p;return(p=a.restoreViewState)===null||p===void 0?void 0:p.call(a)}))}n.add(Ve(()=>this.clearDecorations(s))),n.add(this.provideWithTextEditor(a,e,t,o))}else n.add(this.provideWithoutTextEditor(e,t));return n}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range,"code.jump"),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus();let o=e.getModel();o&&"getLineContent"in o&&Wr(`${o.getLineContent(t.range.startLineNumber)}`)}getModel(e){var t;return a_(e)?(t=e.getModel())===null||t===void 0?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations(o=>{let r=[];this.rangeHighlightDecorationId&&(r.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),r.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);let n=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:It(Nf),position:Eo.Full}}}],[s,a]=o.deltaDecorations(r,n);this.rangeHighlightDecorationId={rangeHighlightId:s,overviewRulerDecorationId:a}})}clearDecorations(e){let t=this.rangeHighlightDecorationId;t&&(e.changeDecorations(o=>{o.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}};re();var aR=(()=>{class i extends Qu{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(t){let o=b("cannotRunGotoLine","Open a text editor first to go to a line.");return t.items=[{label:o}],t.ariaLabel=o,B.None}provideWithTextEditor(t,o,r){let n=t.editor,s=new H;s.add(o.onDidAccept(h=>{let[p]=o.selectedItems;if(p){if(!this.isValidLineNumber(n,p.lineNumber))return;this.gotoLocation(t,{range:this.toRange(p.lineNumber,p.column),keyMods:o.keyMods,preserveFocus:h.inBackground}),h.inBackground||o.hide()}}));let a=()=>{let h=this.parsePosition(n,o.value.trim().substr(i.PREFIX.length)),p=this.getPickLabel(n,h.lineNumber,h.column);if(o.items=[{lineNumber:h.lineNumber,column:h.column,label:p}],o.ariaLabel=p,!this.isValidLineNumber(n,h.lineNumber)){this.clearDecorations(n);return}let g=this.toRange(h.lineNumber,h.column);n.revealRangeInCenter(g,0),this.addDecorations(n,g)};a(),s.add(o.onDidChangeValue(()=>a()));let c=l_(n);return c&&c.getOptions().get(68).renderType===2&&(c.updateOptions({lineNumbers:"on"}),s.add(Ve(()=>c.updateOptions({lineNumbers:"relative"})))),s}toRange(t=1,o=1){return{startLineNumber:t,startColumn:o,endLineNumber:t,endColumn:o}}parsePosition(t,o){let r=o.split(/,|:|#/).map(s=>parseInt(s,10)).filter(s=>!isNaN(s)),n=this.lineCount(t)+1;return{lineNumber:r[0]>0?r[0]:n+r[0],column:r[1]}}getPickLabel(t,o,r){if(this.isValidLineNumber(t,o))return this.isValidColumn(t,o,r)?b("gotoLineColumnLabel","Go to line {0} and character {1}.",o,r):b("gotoLineLabel","Go to line {0}.",o);let n=t.getPosition()||{lineNumber:1,column:1},s=this.lineCount(t);return s>1?b("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",n.lineNumber,n.column,s):b("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",n.lineNumber,n.column)}isValidLineNumber(t,o){return!o||typeof o!="number"?!1:o>0&&o<=this.lineCount(t)}isValidColumn(t,o,r){if(!r||typeof r!="number")return!1;let n=this.getModel(t);if(!n)return!1;let s={lineNumber:o,column:r};return n.validatePosition(s).equals(s)}lineCount(t){var o,r;return(r=(o=this.getModel(t))===null||o===void 0?void 0:o.getLineCount())!==null&&r!==void 0?r:0}}return i.PREFIX=":",i})();ms();Vi();Gl();nt();xe();it();var i7=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},o7=function(i,e){return function(t,o){e(t,o,i)}},fg=class extends aR{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=ft.None}get activeTextEditorControl(){var e;return(e=this.editorService.getFocusedCodeEditor())!==null&&e!==void 0?e:void 0}};fg=i7([o7(0,tt)],fg);var lR=(()=>{class i extends j{constructor(){super({id:i.ID,label:_0.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:2085,mac:{primary:293},weight:100}})}run(t){t.get(qi).quickAccess.show(fg.PREFIX)}}return i.ID="editor.action.gotoLine",i})();M(lR);Oi.as(En.Quickaccess).registerQuickAccessProvider({ctor:fg,prefix:fg.PREFIX,helpEntries:[{description:_0.gotoLineActionLabel,commandId:lR.ID}]});Xe();yt();xi();to();Ss();QP();Zi();Tt();var uR=[void 0,[]];function vD(i,e,t=0,o=0){let r=e;return r.values&&r.values.length>1?r7(i,r.values,t,o):hR(i,e,t,o)}function r7(i,e,t,o){let r=0,n=[];for(let s of e){let[a,c]=hR(i,s,t,o);if(typeof a!="number")return uR;r+=a,n.push(...c)}return[r,n7(n)]}function hR(i,e,t,o){let r=qf(e.original,e.originalLowercase,t,i,i.toLowerCase(),o,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return r?[r[0],$l(r)]:uR}var D5e=Object.freeze({score:0});function n7(i){let e=i.sort((r,n)=>r.start-n.start),t=[],o;for(let r of e)!o||!s7(o,r)?(o=r,t.push(r)):(o.start=Math.min(o.start,r.start),o.end=Math.max(o.end,r.end));return t}function s7(i,e){return!(i.end<e.start||e.end<i.start)}function cR(i){return i.startsWith('"')&&i.endsWith('"')}var pR=" ";function yD(i){typeof i!="string"&&(i="");let e=i.toLowerCase(),{pathNormalized:t,normalized:o,normalizedLowercase:r}=dR(i),n=t.indexOf(lf)>=0,s=cR(i),a,c=i.split(pR);if(c.length>1)for(let h of c){let p=cR(h),{pathNormalized:g,normalized:f,normalizedLowercase:_}=dR(h);f&&(a||(a=[]),a.push({original:h,originalLowercase:h.toLowerCase(),pathNormalized:g,normalized:f,normalizedLowercase:_,expectContiguousMatch:p}))}return{original:i,originalLowercase:e,pathNormalized:t,normalized:o,normalizedLowercase:r,values:a,containsPathSeparator:n,expectContiguousMatch:s}}function dR(i){let e;Da?e=i.replace(/\//g,lf):e=i.replace(/\\/g,lf);let t=lk(e).replace(/\s|"/g,"");return{pathNormalized:e,normalized:t,normalizedLowercase:t.toLowerCase()}}function pT(i){return Array.isArray(i)?yD(i.map(e=>e.original).join(pR)):yD(i.original)}X();Tt();ge();Jt();Eu();re();Ge();$h();var a7=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},mR=function(i,e){return function(t,o){e(t,o,i)}},Zu,on=Zu=class extends Qu{constructor(e,t,o=Object.create(null)){super(o),this._languageFeaturesService=e,this._outlineModelService=t,this.options=o,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,b("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),B.None}provideWithTextEditor(e,t,o,r){let n=e.editor,s=this.getModel(n);return s?this._languageFeaturesService.documentSymbolProvider.has(s)?this.doProvideWithEditorSymbols(e,s,t,o,r):this.doProvideWithoutEditorSymbols(e,s,t,o):B.None}doProvideWithoutEditorSymbols(e,t,o,r){let n=new H;return this.provideLabelPick(o,b("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),(async()=>!await this.waitForLanguageSymbolRegistry(t,n)||r.isCancellationRequested||n.add(this.doProvideWithEditorSymbols(e,t,o,r)))(),n}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}async waitForLanguageSymbolRegistry(e,t){if(this._languageFeaturesService.documentSymbolProvider.has(e))return!0;let o=new yd,r=t.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>{this._languageFeaturesService.documentSymbolProvider.has(e)&&(r.dispose(),o.complete(!0))}));return t.add(Ve(()=>o.complete(!1))),o.p}doProvideWithEditorSymbols(e,t,o,r,n){var s;let a=e.editor,c=new H;c.add(o.onDidAccept(f=>{var _;let[y]=o.selectedItems;y&&y.range&&(this.gotoLocation(e,{range:y.range.selection,keyMods:o.keyMods,preserveFocus:f.inBackground}),(_=n?.handleAccept)===null||_===void 0||_.call(n,y),f.inBackground||o.hide())})),c.add(o.onDidTriggerItemButton(({item:f})=>{f&&f.range&&(this.gotoLocation(e,{range:f.range.selection,keyMods:o.keyMods,forceSideBySide:!0}),o.hide())}));let h=this.getDocumentSymbols(t,r),p,g=async f=>{p?.dispose(!0),o.busy=!1,p=new _t(r),o.busy=!0;try{let _=yD(o.value.substr(Zu.PREFIX.length).trim()),y=await this.doGetSymbolPicks(h,_,void 0,p.token,t);if(r.isCancellationRequested)return;if(y.length>0){if(o.items=y,f&&_.original.length===0){let C=Gk(y,x=>!!(x.type!=="separator"&&x.range&&T.containsPosition(x.range.decoration,f)));C&&(o.activeItems=[C])}}else _.original.length>0?this.provideLabelPick(o,b("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(o,b("noSymbolResults","No editor symbols"))}finally{r.isCancellationRequested||(o.busy=!1)}};return c.add(o.onDidChangeValue(()=>g(void 0))),g((s=a.getSelection())===null||s===void 0?void 0:s.getPosition()),c.add(o.onDidChangeActive(()=>{let[f]=o.activeItems;f&&f.range&&(a.revealRangeInCenter(f.range.selection,0),this.addDecorations(a,f.range.decoration))})),c}async doGetSymbolPicks(e,t,o,r,n){var s,a;let c=await e;if(r.isCancellationRequested)return[];let h=t.original.indexOf(Zu.SCOPE_PREFIX)===0,p=h?1:0,g,f;t.values&&t.values.length>1?(g=pT(t.values[0]),f=pT(t.values.slice(1))):g=t;let _,y=(a=(s=this.options)===null||s===void 0?void 0:s.openSideBySideDirection)===null||a===void 0?void 0:a.call(s);y&&(_=[{iconClass:y==="right"?je.asClassName(be.splitHorizontal):je.asClassName(be.splitVertical),tooltip:y==="right"?b("openToSide","Open to the Side"):b("openToBottom","Open to the Bottom")}]);let C=[];for(let I=0;I<c.length;I++){let k=c[I],N=ak(k.name),O=`$(${ik.toIcon(k.kind).id}) ${N}`,V=O.length-N.length,K=k.containerName;o?.extraContainerLabel&&(K?K=`${o.extraContainerLabel} \u2022 ${K}`:K=o.extraContainerLabel);let $,ae,q,ji;if(t.original.length>p){let De=!1;if(g!==t&&([$,ae]=vD(O,he(U({},t),{values:void 0}),p,V),typeof $=="number"&&(De=!0)),typeof $!="number"&&([$,ae]=vD(O,g,p,V),typeof $!="number"))continue;if(!De&&f){if(K&&f.original.length>0&&([q,ji]=vD(K,f)),typeof q!="number")continue;typeof $=="number"&&($+=q)}}let Mt=k.tags&&k.tags.indexOf(1)>=0;C.push({index:I,kind:k.kind,score:$,label:O,ariaLabel:tk(k.name,k.kind),description:K,highlights:Mt?void 0:{label:ae,description:ji},range:{selection:T.collapseToStart(k.selectionRange),decoration:k.range},uri:n.uri,symbolName:N,strikethrough:Mt,buttons:_})}let x=C.sort((I,k)=>h?this.compareByKindAndScore(I,k):this.compareByScore(I,k)),D=[];if(h){let O=function(){k&&typeof I=="number"&&N>0&&(k.label=fd(gT[I]||mT,N))};var E=O;let I,k,N=0;for(let V of x)I!==V.kind?(O(),I=V.kind,N=1,k={type:"separator"},D.push(k)):N++,D.push(V);O()}else x.length>0&&(D=[{label:b("symbols","symbols ({0})",C.length),type:"separator"},...x]);return D}compareByScore(e,t){if(typeof e.score!="number"&&typeof t.score=="number")return 1;if(typeof e.score=="number"&&typeof t.score!="number")return-1;if(typeof e.score=="number"&&typeof t.score=="number"){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){let o=gT[e.kind]||mT,r=gT[t.kind]||mT,n=o.localeCompare(r);return n===0?this.compareByScore(e,t):n}async getDocumentSymbols(e,t){let o=await this._outlineModelService.getOrCreate(e,t);return t.isCancellationRequested?[]:o.asListOfDocumentSymbols()}};on.PREFIX="@";on.SCOPE_PREFIX=":";on.PREFIX_BY_CATEGORY=`${Zu.PREFIX}${Zu.SCOPE_PREFIX}`;on=Zu=a7([mR(0,J),mR(1,js)],on);var mT=b("property","properties ({0})"),gT={5:b("method","methods ({0})"),11:b("function","functions ({0})"),8:b("_constructor","constructors ({0})"),12:b("variable","variables ({0})"),4:b("class","classes ({0})"),22:b("struct","structs ({0})"),23:b("event","events ({0})"),24:b("operator","operators ({0})"),10:b("interface","interfaces ({0})"),2:b("namespace","namespaces ({0})"),3:b("package","packages ({0})"),25:b("typeParameter","type parameters ({0})"),1:b("modules","modules ({0})"),6:b("property","properties ({0})"),9:b("enum","enumerations ({0})"),21:b("enumMember","enumeration members ({0})"),14:b("string","strings ({0})"),0:b("file","files ({0})"),17:b("array","arrays ({0})"),15:b("number","numbers ({0})"),16:b("boolean","booleans ({0})"),18:b("object","objects ({0})"),19:b("key","keys ({0})"),7:b("field","fields ({0})"),13:b("constant","constants ({0})")};ms();Vi();Gl();nt();xe();it();Eu();Ge();var l7=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},fT=function(i,e){return function(t,o){e(t,o,i)}},_T=class extends on{constructor(e,t,o){super(t,o),this.editorService=e,this.onDidActiveTextEditorControlChange=ft.None}get activeTextEditorControl(){var e;return(e=this.editorService.getFocusedCodeEditor())!==null&&e!==void 0?e:void 0}};_T=l7([fT(0,tt),fT(1,J),fT(2,js)],_T);var gR=(()=>{class i extends j{constructor(){super({id:i.ID,label:Kf.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:A.hasDocumentSymbolProvider,kbOpts:{kbExpr:A.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(t){t.get(qi).quickAccess.show(on.PREFIX,{itemActivation:JL.NONE})}}return i.ID="editor.action.quickOutline",i})();M(gR);Oi.as(En.Quickaccess).registerQuickAccessProvider({ctor:_T,prefix:on.PREFIX,helpEntries:[{description:Kf.quickOutlineActionLabel,prefix:on.PREFIX,commandId:gR.ID},{description:Kf.quickOutlineByCategoryActionLabel,prefix:on.PREFIX_BY_CATEGORY}]});ms();Gl();Vi();M6();Ze();Ss();JP();X();Ea();function c7(i){var e;let t=new Map;for(let o of i)t.set(o,((e=t.get(o))!==null&&e!==void 0?e:0)+1);return t}var bD=class i{constructor(){this.chunkCount=0,this.chunkOccurrences=new Map,this.documents=new Map}calculateScores(e,t){let o=this.computeEmbedding(e),r=new Map,n=[];for(let[s,a]of this.documents){if(t.isCancellationRequested)return[];for(let c of a.chunks){let h=this.computeSimilarityScore(c,o,r);h>0&&n.push({key:s,score:h})}}return n}static termFrequencies(e){return c7(i.splitTerms(e))}static*splitTerms(e){let t=o=>o.toLowerCase();for(let[o]of e.matchAll(new RegExp("\\b\\p{Letter}[\\p{Letter}\\d]{2,}\\b","gu"))){yield t(o);let r=o.replace(/([a-z])([A-Z])/g,"$1 $2").split(/\s+/g);if(r.length>1)for(let n of r)n.length>2&&new RegExp("\\p{Letter}{3,}","gu").test(n)&&(yield t(n))}}updateDocuments(e){var t;for(let{key:o}of e)this.deleteDocument(o);for(let o of e){let r=[];for(let n of o.textChunks){let s=i.termFrequencies(n);for(let a of s.keys())this.chunkOccurrences.set(a,((t=this.chunkOccurrences.get(a))!==null&&t!==void 0?t:0)+1);r.push({text:n,tf:s})}this.chunkCount+=r.length,this.documents.set(o.key,{chunks:r})}return this}deleteDocument(e){let t=this.documents.get(e);if(t){this.documents.delete(e),this.chunkCount-=t.chunks.length;for(let o of t.chunks)for(let r of o.tf.keys()){let n=this.chunkOccurrences.get(r);if(typeof n=="number"){let s=n-1;s<=0?this.chunkOccurrences.delete(r):this.chunkOccurrences.set(r,s)}}}}computeSimilarityScore(e,t,o){let r=0;for(let[n,s]of Object.entries(t)){let a=e.tf.get(n);if(!a)continue;let c=o.get(n);typeof c!="number"&&(c=this.computeIdf(n),o.set(n,c));let h=a*c;r+=h*s}return r}computeEmbedding(e){let t=i.termFrequencies(e);return this.computeTfidf(t)}computeIdf(e){var t;let o=(t=this.chunkOccurrences.get(e))!==null&&t!==void 0?t:0;return o>0?Math.log((this.chunkCount+1)/o):0}computeTfidf(e){let t=Object.create(null);for(let[o,r]of e){let n=this.computeIdf(o);n>0&&(t[o]=r*n)}return t}};function fR(i){var e,t;let o=i.slice(0);o.sort((n,s)=>s.score-n.score);let r=(t=(e=o[0])===null||e===void 0?void 0:e.score)!==null&&t!==void 0?t:0;if(r>0)for(let n of o)n.score/=r;return o}re();Rt();ei();Je();bd();Xe();yt();X();Di();var _g=function(i){return i[i.NO_ACTION=0]="NO_ACTION",i[i.CLOSE_PICKER=1]="CLOSE_PICKER",i[i.REFRESH_PICKER=2]="REFRESH_PICKER",i[i.REMOVE_ITEM=3]="REMOVE_ITEM",i}(_g||{});function yT(i){let e=i;return Array.isArray(e.items)}function _R(i){let e=i;return!!e.picks&&e.additionalPicks instanceof Promise}var DD=class extends B{constructor(e,t){super(),this.prefix=e,this.options=t}provide(e,t,o){var r;let n=new H;e.canAcceptInBackground=!!(!((r=this.options)===null||r===void 0)&&r.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let s,a=n.add(new Ut),c=async()=>{var p;let g=a.value=new H;s?.dispose(!0),e.busy=!1,s=new _t(t);let f=s.token,_=e.value.substring(this.prefix.length);!((p=this.options)===null||p===void 0)&&p.shouldSkipTrimPickFilter||(_=_.trim());let y=this._getPicks(_,g,f,o),C=(D,E)=>{var I;let k,N;if(yT(D)?(k=D.items,N=D.active):k=D,k.length===0){if(E)return!1;(_.length>0||e.hideInput)&&(!((I=this.options)===null||I===void 0)&&I.noResultsPick)&&(zP(this.options.noResultsPick)?k=[this.options.noResultsPick(_)]:k=[this.options.noResultsPick])}return e.items=k,N&&(e.activeItems=[N]),!0},x=async D=>{let E=!1,I=!1;await Promise.all([(async()=>{typeof D.mergeDelay=="number"&&(await xa(D.mergeDelay),f.isCancellationRequested)||I||(E=C(D.picks,!0))})(),(async()=>{e.busy=!0;try{let k=await D.additionalPicks;if(f.isCancellationRequested)return;let N,O;yT(D.picks)?(N=D.picks.items,O=D.picks.active):N=D.picks;let V,K;if(yT(k)?(V=k.items,K=k.active):V=k,V.length>0||!E){let $;if(!O&&!K){let ae=e.activeItems[0];ae&&N.indexOf(ae)!==-1&&($=ae)}C({items:[...N,...V],active:O||K||$})}}finally{f.isCancellationRequested||(e.busy=!1),I=!0}})()])};if(y!==null)if(_R(y))await x(y);else if(!(y instanceof Promise))C(y);else{e.busy=!0;try{let D=await y;if(f.isCancellationRequested)return;_R(D)?await x(D):C(D)}finally{f.isCancellationRequested||(e.busy=!1)}}};n.add(e.onDidChangeValue(()=>c())),c(),n.add(e.onDidAccept(p=>{var g;if(o?.handleAccept){p.inBackground||e.hide(),(g=o.handleAccept)===null||g===void 0||g.call(o,e.activeItems[0]);return}let[f]=e.selectedItems;typeof f?.accept=="function"&&(p.inBackground||e.hide(),f.accept(e.keyMods,p))}));let h=async(p,g)=>{var f,_;if(typeof g.trigger!="function")return;let y=(_=(f=g.buttons)===null||f===void 0?void 0:f.indexOf(p))!==null&&_!==void 0?_:-1;if(y>=0){let C=g.trigger(y,e.keyMods),x=typeof C=="number"?C:await C;if(t.isCancellationRequested)return;switch(x){case _g.NO_ACTION:break;case _g.CLOSE_PICKER:e.hide();break;case _g.REFRESH_PICKER:c();break;case _g.REMOVE_ITEM:{let D=e.items.indexOf(g);if(D!==-1){let E=e.items.slice(),I=E.splice(D,1),k=e.activeItems.filter(O=>O!==I[0]),N=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=E,k&&(e.activeItems=k),e.keepScrollPosition=N}break}}}};return n.add(e.onDidTriggerItemButton(({button:p,item:g})=>h(p,g))),n.add(e.onDidTriggerSeparatorButton(({button:p,separator:g})=>h(p,g))),n}};mr();var yR=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},dl=function(i,e){return function(t,o){e(t,o,i)}},Nc,Xt,ul=Nc=class extends DD{constructor(e,t,o,r,n,s){super(Nc.PREFIX,e),this.instantiationService=t,this.keybindingService=o,this.commandService=r,this.telemetryService=n,this.dialogService=s,this.commandsHistory=this._register(this.instantiationService.createInstance(hl)),this.options=e}async _getPicks(e,t,o,r){var n,s,a,c;let h=await this.getCommandPicks(o);if(o.isCancellationRequested)return[];let p=sf(()=>{let D=new bD;D.updateDocuments(h.map(I=>({key:I.commandId,textChunks:[this.getTfIdfChunk(I)]})));let E=D.calculateScores(e,o);return fR(E).filter(I=>I.score>Nc.TFIDF_THRESHOLD).slice(0,Nc.TFIDF_MAX_RESULTS)}),g=[];for(let D of h){let E=(n=Nc.WORD_FILTER(e,D.label))!==null&&n!==void 0?n:void 0,I=D.commandAlias&&(s=Nc.WORD_FILTER(e,D.commandAlias))!==null&&s!==void 0?s:void 0;if(E||I)D.highlights={label:E,detail:this.options.showAlias?I:void 0},g.push(D);else if(e===D.commandId)g.push(D);else if(e.length>=3){let k=p();if(o.isCancellationRequested)return[];let N=k.find(O=>O.key===D.commandId);N&&(D.tfIdfScore=N.score,g.push(D))}}let f=new Map;for(let D of g){let E=f.get(D.label);E?(D.description=D.commandId,E.description=E.commandId):f.set(D.label,D)}g.sort((D,E)=>{if(D.tfIdfScore&&E.tfIdfScore)return D.tfIdfScore===E.tfIdfScore?D.label.localeCompare(E.label):E.tfIdfScore-D.tfIdfScore;if(D.tfIdfScore)return 1;if(E.tfIdfScore)return-1;let I=this.commandsHistory.peek(D.commandId),k=this.commandsHistory.peek(E.commandId);if(I&&k)return I>k?-1:1;if(I)return-1;if(k)return 1;if(this.options.suggestedCommandIds){let N=this.options.suggestedCommandIds.has(D.commandId),O=this.options.suggestedCommandIds.has(E.commandId);if(N&&O)return 0;if(N)return-1;if(O)return 1}return D.label.localeCompare(E.label)});let _=[],y=!1,C=!0,x=!!this.options.suggestedCommandIds;for(let D=0;D<g.length;D++){let E=g[D];D===0&&this.commandsHistory.peek(E.commandId)&&(_.push({type:"separator",label:b("recentlyUsed","recently used")}),y=!0),C&&E.tfIdfScore!==void 0&&(_.push({type:"separator",label:b("suggested","similar commands")}),C=!1),x&&E.tfIdfScore===void 0&&!this.commandsHistory.peek(E.commandId)&&(!((a=this.options.suggestedCommandIds)===null||a===void 0)&&a.has(E.commandId))&&(_.push({type:"separator",label:b("commonlyUsed","commonly used")}),y=!0,x=!1),y&&E.tfIdfScore===void 0&&!this.commandsHistory.peek(E.commandId)&&!(!((c=this.options.suggestedCommandIds)===null||c===void 0)&&c.has(E.commandId))&&(_.push({type:"separator",label:b("morecCommands","other commands")}),y=!1),_.push(this.toCommandPick(E,r))}return this.hasAdditionalCommandPicks(e,o)?{picks:_,additionalPicks:(async()=>{var D;let E=await this.getAdditionalCommandPicks(h,g,e,o);if(o.isCancellationRequested)return[];let I=E.map(k=>this.toCommandPick(k,r));return C&&((D=I[0])===null||D===void 0?void 0:D.type)!=="separator"&&I.unshift({type:"separator",label:b("suggested","similar commands")}),I})()}:_}toCommandPick(e,t){if(e.type==="separator")return e;let o=this.keybindingService.lookupKeybinding(e.commandId),r=o?b("commandPickAriaLabelWithKeybinding","{0}, {1}",e.label,o.getAriaLabel()):e.label;return he(U({},e),{ariaLabel:r,detail:this.options.showAlias&&e.commandAlias!==e.label?e.commandAlias:void 0,keybinding:o,accept:async()=>{var n,s;this.commandsHistory.push(e.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.commandId,from:(n=t?.from)!==null&&n!==void 0?n:"quick open"});try{!((s=e.args)===null||s===void 0)&&s.length?await this.commandService.executeCommand(e.commandId,...e.args):await this.commandService.executeCommand(e.commandId)}catch(a){Ro(a)||this.dialogService.error(b("canNotRun","Command '{0}' resulted in an error",e.label),$d(a))}}})}getTfIdfChunk({label:e,commandAlias:t,commandDescription:o}){let r=e;return t&&t!==e&&(r+=` - ${t}`),o&&o.value!==e&&(r+=` - ${o.value===o.original?o.value:`${o.value} (${o.original})`}`),r}};ul.PREFIX=">";ul.TFIDF_THRESHOLD=.5;ul.TFIDF_MAX_RESULTS=5;ul.WORD_FILTER=dL(uL,mL,hL);ul=Nc=yR([dl(1,ce),dl(2,qe),dl(3,ht),dl(4,Zt),dl(5,Id)],ul);var hl=Xt=class extends B{constructor(e,t,o){super(),this.storageService=e,this.configurationService=t,this.logService=o,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>this.updateConfiguration(e))),this._register(this.storageService.onWillSaveState(e=>{e.reason===Ld.SHUTDOWN&&this.saveState()}))}updateConfiguration(e){e&&!e.affectsConfiguration("workbench.commandPalette.history")||(this.configuredCommandsHistoryLength=Xt.getConfiguredCommandHistoryLength(this.configurationService),Xt.cache&&Xt.cache.limit!==this.configuredCommandsHistoryLength&&(Xt.cache.limit=this.configuredCommandsHistoryLength,Xt.hasChanges=!0))}load(){let e=this.storageService.get(Xt.PREF_KEY_CACHE,0),t;if(e)try{t=JSON.parse(e)}catch(r){this.logService.error(`[CommandsHistory] invalid data: ${r}`)}let o=Xt.cache=new vn(this.configuredCommandsHistoryLength,1);if(t){let r;t.usesLRU?r=t.entries:r=t.entries.sort((n,s)=>n.value-s.value),r.forEach(n=>o.set(n.key,n.value))}Xt.counter=this.storageService.getNumber(Xt.PREF_KEY_COUNTER,0,Xt.counter)}push(e){Xt.cache&&(Xt.cache.set(e,Xt.counter++),Xt.hasChanges=!0)}peek(e){var t;return(t=Xt.cache)===null||t===void 0?void 0:t.peek(e)}saveState(){if(!Xt.cache||!Xt.hasChanges)return;let e={usesLRU:!0,entries:[]};Xt.cache.forEach((t,o)=>e.entries.push({key:o,value:t})),this.storageService.store(Xt.PREF_KEY_CACHE,JSON.stringify(e),0,0),this.storageService.store(Xt.PREF_KEY_COUNTER,Xt.counter,0,0),Xt.hasChanges=!1}static getConfiguredCommandHistoryLength(e){var t,o;let n=(o=(t=e.getValue().workbench)===null||t===void 0?void 0:t.commandPalette)===null||o===void 0?void 0:o.history;return typeof n=="number"?n:Xt.DEFAULT_COMMANDS_HISTORY_LENGTH}};hl.DEFAULT_COMMANDS_HISTORY_LENGTH=50;hl.PREF_KEY_CACHE="commandPalette.mru.cache";hl.PREF_KEY_COUNTER="commandPalette.mru.counter";hl.counter=1;hl.hasChanges=!1;hl=Xt=yR([dl(0,To),dl(1,Oe),dl(2,er)],hl);var CD=class extends ul{constructor(e,t,o,r,n,s){super(e,t,o,r,n,s)}getCodeEditorCommandPicks(){var e;let t=this.activeTextEditorControl;if(!t)return[];let o=[];for(let r of t.getSupportedActions()){let n;!((e=r.metadata)===null||e===void 0)&&e.description&&(qL(r.metadata.description)?n=r.metadata.description:n={original:r.metadata.description,value:r.metadata.description}),o.push({commandId:r.id,commandAlias:r.alias,commandDescription:n,label:_L(r.label)||r.id})}return o}};Je();Rt();mr();xe();it();var d7=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},eh=function(i,e){return function(t,o){e(t,o,i)}},yg=class extends CD{get activeTextEditorControl(){var e;return(e=this.codeEditorService.getFocusedCodeEditor())!==null&&e!==void 0?e:void 0}constructor(e,t,o,r,n,s){super({showAlias:!1},e,o,r,n,s),this.codeEditorService=t}async getCommandPicks(){return this.getCodeEditorCommandPicks()}hasAdditionalCommandPicks(){return!1}async getAdditionalCommandPicks(){return[]}};yg=d7([eh(0,ce),eh(1,tt),eh(2,qe),eh(3,ht),eh(4,Zt),eh(5,Id)],yg);var vR=(()=>{class i extends j{constructor(){super({id:i.ID,label:y0.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:A.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(t){t.get(qi).quickAccess.show(yg.PREFIX)}}return i.ID="editor.action.quickCommand",i})();M(vR);Oi.as(En.Quickaccess).registerQuickAccessProvider({ctor:yg,prefix:yg.PREFIX,helpEntries:[{description:y0.quickCommandHelp,commandId:vR.ID}]});xe();Vi();ei();Me();Je();var u7=function(i,e,t,o){var r=arguments.length,n=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,t):o,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,e,t,o);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},th=function(i,e){return function(t,o){e(t,o,i)}},vT=class extends Nn{constructor(e,t,o,r,n,s,a){super(!0,e,t,o,r,n,s,a)}};vT=u7([th(1,ve),th(2,tt),th(3,Pt),th(4,ce),th(5,To),th(6,Oe)],vT);le(Nn.ID,vT,4);xe();uN();Gl();Pf();var bT=class extends j{constructor(){super({id:"editor.action.toggleHighContrast",label:PL.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(e,t){let o=e.get(i_),r=o.getColorTheme();ys(r.type)?(o.setTheme(this._originalThemeName||(l0(r.type)?lN:aN)),this._originalThemeName=null):(o.setTheme(l0(r.type)?cN:dN),this._originalThemeName=r.themeName)}};M(bT);var EV={};OP(EV,{default:()=>wV,parsers:()=>VR});var h7=Object.create,ET=Object.defineProperty,p7=Object.getOwnPropertyDescriptor,m7=Object.getOwnPropertyNames,g7=Object.getPrototypeOf,f7=Object.prototype.hasOwnProperty,_7=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),y7=(i,e)=>{for(var t in e)ET(i,t,{get:e[t],enumerable:!0})},v7=(i,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of m7(e))!f7.call(i,r)&&r!==t&&ET(i,r,{get:()=>e[r],enumerable:!(o=p7(e,r))||o.enumerable});return i},kR=(i,e,t)=>(t=i!=null?h7(g7(i)):{},v7(e||!i||!i.__esModule?ET(t,"default",{value:i,enumerable:!0}):t,i)),FR=_7(i=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});function e(d,l){if(d==null)return{};var u={};for(var m in d)if({}.hasOwnProperty.call(d,m)){if(l.includes(m))continue;u[m]=d[m]}return u}var t=class{constructor(d,l,u){this.line=void 0,this.column=void 0,this.index=void 0,this.line=d,this.column=l,this.index=u}},o=class{constructor(d,l){this.start=void 0,this.end=void 0,this.filename=void 0,this.identifierName=void 0,this.start=d,this.end=l}};function r(d,l){let{line:u,column:m,index:v}=d;return new t(u,m+l,v+l)}var n="BABEL_PARSER_SOURCETYPE_MODULE_REQUIRED",s={ImportMetaOutsideModule:{message:`import.meta may appear only with 'sourceType: "module"'`,code:n},ImportOutsideModule:{message:`'import' and 'export' may appear only with 'sourceType: "module"'`,code:n}},a={ArrayPattern:"array destructuring pattern",AssignmentExpression:"assignment expression",AssignmentPattern:"assignment expression",ArrowFunctionExpression:"arrow function expression",ConditionalExpression:"conditional expression",CatchClause:"catch clause",ForOfStatement:"for-of statement",ForInStatement:"for-in statement",ForStatement:"for-loop",FormalParameters:"function parameter list",Identifier:"identifier",ImportSpecifier:"import specifier",ImportDefaultSpecifier:"import default specifier",ImportNamespaceSpecifier:"import namespace specifier",ObjectPattern:"object destructuring pattern",ParenthesizedExpression:"parenthesized expression",RestElement:"rest element",UpdateExpression:{true:"prefix operation",false:"postfix operation"},VariableDeclarator:"variable declaration",YieldExpression:"yield expression"},c=d=>d.type==="UpdateExpression"?a.UpdateExpression[`${d.prefix}`]:a[d.type],h={AccessorIsGenerator:({kind:d})=>`A ${d}ter cannot be a generator.`,ArgumentsInClass:"'arguments' is only allowed in functions and class methods.",AsyncFunctionInSingleStatementContext:"Async functions can only be declared at the top level or inside a block.",AwaitBindingIdentifier:"Can not use 'await' as identifier inside an async function.",AwaitBindingIdentifierInStaticBlock:"Can not use 'await' as identifier inside a static block.",AwaitExpressionFormalParameter:"'await' is not allowed in async function parameters.",AwaitUsingNotInAsyncContext:"'await using' is only allowed within async functions and at the top levels of modules.",AwaitNotInAsyncContext:"'await' is only allowed within async functions and at the top levels of modules.",AwaitNotInAsyncFunction:"'await' is only allowed within async functions.",BadGetterArity:"A 'get' accessor must not have any formal parameters.",BadSetterArity:"A 'set' accessor must have exactly one formal parameter.",BadSetterRestParameter:"A 'set' accessor function argument must not be a rest parameter.",ConstructorClassField:"Classes may not have a field named 'constructor'.",ConstructorClassPrivateField:"Classes may not have a private field named '#constructor'.",ConstructorIsAccessor:"Class constructor may not be an accessor.",ConstructorIsAsync:"Constructor can't be an async function.",ConstructorIsGenerator:"Constructor can't be a generator.",DeclarationMissingInitializer:({kind:d})=>`Missing initializer in ${d} declaration.`,DecoratorArgumentsOutsideParentheses:"Decorator arguments must be moved inside parentheses: use '@(decorator(args))' instead of '@(decorator)(args)'.",DecoratorBeforeExport:"Decorators must be placed *before* the 'export' keyword. Remove the 'decoratorsBeforeExport: true' option to use the 'export @decorator class {}' syntax.",DecoratorsBeforeAfterExport:"Decorators can be placed *either* before or after the 'export' keyword, but not in both locations at the same time.",DecoratorConstructor:"Decorators can't be used with a constructor. Did you mean '@dec class { ... }'?",DecoratorExportClass:"Decorators must be placed *after* the 'export' keyword. Remove the 'decoratorsBeforeExport: false' option to use the '@decorator export class {}' syntax.",DecoratorSemicolon:"Decorators must not be followed by a semicolon.",DecoratorStaticBlock:"Decorators can't be used with a static block.",DeferImportRequiresNamespace:'Only `import defer * as x from "./module"` is valid.',DeletePrivateField:"Deleting a private field is not allowed.",DestructureNamedImport:"ES2015 named imports do not destructure. Use another statement for destructuring after the import.",DuplicateConstructor:"Duplicate constructor in the same class.",DuplicateDefaultExport:"Only one default export allowed per module.",DuplicateExport:({exportName:d})=>`\`${d}\` has already been exported. Exported identifiers must be unique.`,DuplicateProto:"Redefinition of __proto__ property.",DuplicateRegExpFlags:"Duplicate regular expression flag.",DynamicImportPhaseRequiresImportExpressions:({phase:d})=>`'import.${d}(...)' can only be parsed when using the 'createImportExpressions' option.`,ElementAfterRest:"Rest element must be last element.",EscapedCharNotAnIdentifier:"Invalid Unicode escape.",ExportBindingIsString:({localName:d,exportName:l})=>`A string literal cannot be used as an exported binding without \`from\`.
- Did you mean \`export { '${d}' as '${l}' } from 'some-module'\`?`,ExportDefaultFromAsIdentifier:"'from' is not allowed as an identifier after 'export default'.",ForInOfLoopInitializer:({type:d})=>`'${d==="ForInStatement"?"for-in":"for-of"}' loop variable declaration may not have an initializer.`,ForInUsing:"For-in loop may not start with 'using' declaration.",ForOfAsync:"The left-hand side of a for-of loop may not be 'async'.",ForOfLet:"The left-hand side of a for-of loop may not start with 'let'.",GeneratorInSingleStatementContext:"Generators can only be declared at the top level or inside a block.",IllegalBreakContinue:({type:d})=>`Unsyntactic ${d==="BreakStatement"?"break":"continue"}.`,IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list.",IllegalReturn:"'return' outside of function.",ImportAttributesUseAssert:"The `assert` keyword in import attributes is deprecated and it has been replaced by the `with` keyword. You can enable the `deprecatedImportAssert` parser plugin to suppress this error.",ImportBindingIsString:({importName:d})=>`A string literal cannot be used as an imported binding.
- Did you mean \`import { "${d}" as foo }\`?`,ImportCallArity:"`import()` requires exactly one or two arguments.",ImportCallNotNewExpression:"Cannot use new with import(...).",ImportCallSpreadArgument:"`...` is not allowed in `import()`.",ImportJSONBindingNotDefault:"A JSON module can only be imported with `default`.",ImportReflectionHasAssertion:"`import module x` cannot have assertions.",ImportReflectionNotBinding:'Only `import module x from "./module"` is valid.',IncompatibleRegExpUVFlags:"The 'u' and 'v' regular expression flags cannot be enabled at the same time.",InvalidBigIntLiteral:"Invalid BigIntLiteral.",InvalidCodePoint:"Code point out of bounds.",InvalidCoverInitializedName:"Invalid shorthand property initializer.",InvalidDecimal:"Invalid decimal.",InvalidDigit:({radix:d})=>`Expected number in radix ${d}.`,InvalidEscapeSequence:"Bad character escape sequence.",InvalidEscapeSequenceTemplate:"Invalid escape sequence in template.",InvalidEscapedReservedWord:({reservedWord:d})=>`Escape sequence in keyword ${d}.`,InvalidIdentifier:({identifierName:d})=>`Invalid identifier ${d}.`,InvalidLhs:({ancestor:d})=>`Invalid left-hand side in ${c(d)}.`,InvalidLhsBinding:({ancestor:d})=>`Binding invalid left-hand side in ${c(d)}.`,InvalidLhsOptionalChaining:({ancestor:d})=>`Invalid optional chaining in the left-hand side of ${c(d)}.`,InvalidNumber:"Invalid number.",InvalidOrMissingExponent:"Floating-point numbers require a valid exponent after the 'e'.",InvalidOrUnexpectedToken:({unexpected:d})=>`Unexpected character '${d}'.`,InvalidParenthesizedAssignment:"Invalid parenthesized assignment pattern.",InvalidPrivateFieldResolution:({identifierName:d})=>`Private name #${d} is not defined.`,InvalidPropertyBindingPattern:"Binding member expression.",InvalidRecordProperty:"Only properties and spread elements are allowed in record definitions.",InvalidRestAssignmentPattern:"Invalid rest operator's argument.",LabelRedeclaration:({labelName:d})=>`Label '${d}' is already declared.`,LetInLexicalBinding:"'let' is disallowed as a lexically bound name.",LineTerminatorBeforeArrow:"No line break is allowed before '=>'.",MalformedRegExpFlags:"Invalid regular expression flag.",MissingClassName:"A class name is required.",MissingEqInAssignment:"Only '=' operator can be used for specifying default value.",MissingSemicolon:"Missing semicolon.",MissingPlugin:({missingPlugin:d})=>`This experimental syntax requires enabling the parser plugin: ${d.map(l=>JSON.stringify(l)).join(", ")}.`,MissingOneOfPlugins:({missingPlugin:d})=>`This experimental syntax requires enabling one of the following parser plugin(s): ${d.map(l=>JSON.stringify(l)).join(", ")}.`,MissingUnicodeEscape:"Expecting Unicode escape sequence \\uXXXX.",MixingCoalesceWithLogical:"Nullish coalescing operator(??) requires parens when mixing with logical operators.",ModuleAttributeDifferentFromType:"The only accepted module attribute is `type`.",ModuleAttributeInvalidValue:"Only string literals are allowed as module attribute values.",ModuleAttributesWithDuplicateKeys:({key:d})=>`Duplicate key "${d}" is not allowed in module attributes.`,ModuleExportNameHasLoneSurrogate:({surrogateCharCode:d})=>`An export name cannot include a lone surrogate, found '\\u${d.toString(16)}'.`,ModuleExportUndefined:({localName:d})=>`Export '${d}' is not defined.`,MultipleDefaultsInSwitch:"Multiple default clauses.",NewlineAfterThrow:"Illegal newline after throw.",NoCatchOrFinally:"Missing catch or finally clause.",NumberIdentifier:"Identifier directly after number.",NumericSeparatorInEscapeSequence:"Numeric separators are not allowed inside unicode escape sequences or hex escape sequences.",ObsoleteAwaitStar:"'await*' has been removed from the async functions proposal. Use Promise.all() instead.",OptionalChainingNoNew:"Constructors in/after an Optional Chain are not allowed.",OptionalChainingNoTemplate:"Tagged Template Literals are not allowed in optionalChain.",OverrideOnConstructor:"'override' modifier cannot appear on a constructor declaration.",ParamDupe:"Argument name clash.",PatternHasAccessor:"Object pattern can't contain getter or setter.",PatternHasMethod:"Object pattern can't contain methods.",PrivateInExpectedIn:({identifierName:d})=>`Private names are only allowed in property accesses (\`obj.#${d}\`) or in \`in\` expressions (\`#${d} in obj\`).`,PrivateNameRedeclaration:({identifierName:d})=>`Duplicate private name #${d}.`,RecordExpressionBarIncorrectEndSyntaxType:"Record expressions ending with '|}' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",RecordExpressionBarIncorrectStartSyntaxType:"Record expressions starting with '{|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",RecordExpressionHashIncorrectStartSyntaxType:"Record expressions starting with '#{' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'.",RecordNoProto:"'__proto__' is not allowed in Record expressions.",RestTrailingComma:"Unexpected trailing comma after rest element.",SloppyFunction:"In non-strict mode code, functions can only be declared at top level or inside a block.",SloppyFunctionAnnexB:"In non-strict mode code, functions can only be declared at top level, inside a block, or as the body of an if statement.",SourcePhaseImportRequiresDefault:'Only `import source x from "./module"` is valid.',StaticPrototype:"Classes may not have static property named prototype.",SuperNotAllowed:"`super()` is only valid inside a class constructor of a subclass. Maybe a typo in the method name ('constructor') or not extending another class?",SuperPrivateField:"Private fields can't be accessed on super.",TrailingDecorator:"Decorators must be attached to a class element.",TupleExpressionBarIncorrectEndSyntaxType:"Tuple expressions ending with '|]' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",TupleExpressionBarIncorrectStartSyntaxType:"Tuple expressions starting with '[|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",TupleExpressionHashIncorrectStartSyntaxType:"Tuple expressions starting with '#[' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'.",UnexpectedArgumentPlaceholder:"Unexpected argument placeholder.",UnexpectedAwaitAfterPipelineBody:'Unexpected "await" after pipeline body; await must have parentheses in minimal proposal.',UnexpectedDigitAfterHash:"Unexpected digit after hash token.",UnexpectedImportExport:"'import' and 'export' may only appear at the top level.",UnexpectedKeyword:({keyword:d})=>`Unexpected keyword '${d}'.`,UnexpectedLeadingDecorator:"Leading decorators must be attached to a class declaration.",UnexpectedLexicalDeclaration:"Lexical declaration cannot appear in a single-statement context.",UnexpectedNewTarget:"`new.target` can only be used in functions or class properties.",UnexpectedNumericSeparator:"A numeric separator is only allowed between two digits.",UnexpectedPrivateField:"Unexpected private name.",UnexpectedReservedWord:({reservedWord:d})=>`Unexpected reserved word '${d}'.`,UnexpectedSuper:"'super' is only allowed in object methods and classes.",UnexpectedToken:({expected:d,unexpected:l})=>`Unexpected token${l?` '${l}'.`:""}${d?`, expected "${d}"`:""}`,UnexpectedTokenUnaryExponentiation:"Illegal expression. Wrap left hand side or entire exponentiation in parentheses.",UnexpectedUsingDeclaration:"Using declaration cannot appear in the top level when source type is `script`.",UnsupportedBind:"Binding should be performed on object property.",UnsupportedDecoratorExport:"A decorated export must export a class declaration.",UnsupportedDefaultExport:"Only expressions, functions or classes are allowed as the `default` export.",UnsupportedImport:"`import` can only be used in `import()` or `import.meta`.",UnsupportedMetaProperty:({target:d,onlyValidPropertyName:l})=>`The only valid meta property for ${d} is ${d}.${l}.`,UnsupportedParameterDecorator:"Decorators cannot be used to decorate parameters.",UnsupportedPropertyDecorator:"Decorators cannot be used to decorate object literal properties.",UnsupportedSuper:"'super' can only be used with function calls (i.e. super()) or in property accesses (i.e. super.prop or super[prop]).",UnterminatedComment:"Unterminated comment.",UnterminatedRegExp:"Unterminated regular expression.",UnterminatedString:"Unterminated string constant.",UnterminatedTemplate:"Unterminated template.",UsingDeclarationExport:"Using declaration cannot be exported.",UsingDeclarationHasBindingPattern:"Using declaration cannot have destructuring patterns.",VarRedeclaration:({identifierName:d})=>`Identifier '${d}' has already been declared.`,YieldBindingIdentifier:"Can not use 'yield' as identifier inside a generator.",YieldInParameter:"Yield expression is not allowed in formal parameters.",ZeroDigitNumericSeparator:"Numeric separator can not be used after leading 0."},p={StrictDelete:"Deleting local variable in strict mode.",StrictEvalArguments:({referenceName:d})=>`Assigning to '${d}' in strict mode.`,StrictEvalArgumentsBinding:({bindingName:d})=>`Binding '${d}' in strict mode.`,StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block.",StrictNumericEscape:"The only valid numeric escape in strict mode is '\\0'.",StrictOctalLiteral:"Legacy octal literals are not allowed in strict mode.",StrictWith:"'with' in strict mode."},g=new Set(["ArrowFunctionExpression","AssignmentExpression","ConditionalExpression","YieldExpression"]),f=Object.assign({PipeBodyIsTighter:"Unexpected yield after pipeline body; any yield expression acting as Hack-style pipe body must be parenthesized due to its loose operator precedence.",PipeTopicRequiresHackPipes:'Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.',PipeTopicUnbound:"Topic reference is unbound; it must be inside a pipe body.",PipeTopicUnconfiguredToken:({token:d})=>`Invalid topic token ${d}. In order to use ${d} as a topic reference, the pipelineOperator plugin must be configured with { "proposal": "hack", "topicToken": "${d}" }.`,PipeTopicUnused:"Hack-style pipe body does not contain a topic reference; Hack-style pipes must use topic at least once.",PipeUnparenthesizedBody:({type:d})=>`Hack-style pipe body cannot be an unparenthesized ${c({type:d})}; please wrap it in parentheses.`},{PipelineBodyNoArrow:'Unexpected arrow "=>" after pipeline body; arrow function in pipeline body must be parenthesized.',PipelineBodySequenceExpression:"Pipeline body may not be a comma-separated sequence expression.",PipelineHeadSequenceExpression:"Pipeline head should not be a comma-separated sequence expression.",PipelineTopicUnused:"Pipeline is in topic style but does not use topic reference.",PrimaryTopicNotAllowed:"Topic reference was used in a lexical context without topic binding.",PrimaryTopicRequiresSmartPipeline:'Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.'}),_=["message"];function y(d,l,u){Object.defineProperty(d,l,{enumerable:!1,configurable:!0,value:u})}function C({toMessage:d,code:l,reasonCode:u,syntaxPlugin:m}){let v=u==="MissingPlugin"||u==="MissingOneOfPlugins";{let S={AccessorCannotDeclareThisParameter:"AccesorCannotDeclareThisParameter",AccessorCannotHaveTypeParameters:"AccesorCannotHaveTypeParameters",ConstInitializerMustBeStringOrNumericLiteralOrLiteralEnumReference:"ConstInitiailizerMustBeStringOrNumericLiteralOrLiteralEnumReference",SetAccessorCannotHaveOptionalParameter:"SetAccesorCannotHaveOptionalParameter",SetAccessorCannotHaveRestParameter:"SetAccesorCannotHaveRestParameter",SetAccessorCannotHaveReturnType:"SetAccesorCannotHaveReturnType"};S[u]&&(u=S[u])}return function S(w,P){let L=new SyntaxError;return L.code=l,L.reasonCode=u,L.loc=w,L.pos=w.index,L.syntaxPlugin=m,v&&(L.missingPlugin=P.missingPlugin),y(L,"clone",function(F={}){var G;let{line:se,column:ye,index:Ie}=(G=F.loc)!=null?G:w;return S(new t(se,ye,Ie),Object.assign({},P,F.details))}),y(L,"details",P),Object.defineProperty(L,"message",{configurable:!0,get(){let F=`${d(P)} (${w.line}:${w.column})`;return this.message=F,F},set(F){Object.defineProperty(this,"message",{value:F,writable:!0})}}),L}}function x(d,l){if(Array.isArray(d))return m=>x(m,d[0]);let u={};for(let m of Object.keys(d)){let v=d[m],S=typeof v=="string"?{message:()=>v}:typeof v=="function"?{message:v}:v,{message:w}=S,P=e(S,_),L=typeof w=="string"?()=>w:w;u[m]=C(Object.assign({code:"BABEL_PARSER_SYNTAX_ERROR",reasonCode:m,toMessage:L},l?{syntaxPlugin:l}:{},P))}return u}var D=Object.assign({},x(s),x(h),x(p),x`pipelineOperator`(f));function E(){return{sourceType:"script",sourceFilename:void 0,startIndex:0,startColumn:0,startLine:1,allowAwaitOutsideFunction:!1,allowReturnOutsideFunction:!1,allowNewTargetOutsideFunction:!1,allowImportExportEverywhere:!1,allowSuperOutsideMethod:!1,allowUndeclaredExports:!1,plugins:[],strictMode:null,ranges:!1,tokens:!1,createImportExpressions:!1,createParenthesizedExpressions:!1,errorRecovery:!1,attachComment:!0,annexB:!0}}function I(d){let l=E();if(d==null)return l;if(d.annexB!=null&&d.annexB!==!1)throw new Error("The `annexB` option can only be set to `false`.");for(let u of Object.keys(l))d[u]!=null&&(l[u]=d[u]);if(l.startLine===1)d.startIndex==null&&l.startColumn>0?l.startIndex=l.startColumn:d.startColumn==null&&l.startIndex>0&&(l.startColumn=l.startIndex);else if((d.startColumn==null||d.startIndex==null)&&d.startIndex!=null)throw new Error("With a `startLine > 1` you must also specify `startIndex` and `startColumn`.");return l}var{defineProperty:k}=Object,N=(d,l)=>{d&&k(d,l,{enumerable:!1,value:d[l]})};function O(d){return N(d.loc.start,"index"),N(d.loc.end,"index"),d}var V=d=>class extends d{parse(){let l=O(super.parse());return this.optionFlags&128&&(l.tokens=l.tokens.map(O)),l}parseRegExpLiteral({pattern:l,flags:u}){let m=null;try{m=new RegExp(l,u)}catch{}let v=this.estreeParseLiteral(m);return v.regex={pattern:l,flags:u},v}parseBigIntLiteral(l){let u;try{u=BigInt(l)}catch{u=null}let m=this.estreeParseLiteral(u);return m.bigint=String(m.value||l),m}parseDecimalLiteral(l){let u=this.estreeParseLiteral(null);return u.decimal=String(u.value||l),u}estreeParseLiteral(l){return this.parseLiteral(l,"Literal")}parseStringLiteral(l){return this.estreeParseLiteral(l)}parseNumericLiteral(l){return this.estreeParseLiteral(l)}parseNullLiteral(){return this.estreeParseLiteral(null)}parseBooleanLiteral(l){return this.estreeParseLiteral(l)}directiveToStmt(l){let u=l.value;delete l.value,u.type="Literal",u.raw=u.extra.raw,u.value=u.extra.expressionValue;let m=l;return m.type="ExpressionStatement",m.expression=u,m.directive=u.extra.rawValue,delete u.extra,m}initFunction(l,u){super.initFunction(l,u),l.expression=!1}checkDeclaration(l){l!=null&&this.isObjectProperty(l)?this.checkDeclaration(l.value):super.checkDeclaration(l)}getObjectOrClassMethodParams(l){return l.value.params}isValidDirective(l){var u;return l.type==="ExpressionStatement"&&l.expression.type==="Literal"&&typeof l.expression.value=="string"&&!((u=l.expression.extra)!=null&&u.parenthesized)}parseBlockBody(l,u,m,v,S){super.parseBlockBody(l,u,m,v,S);let w=l.directives.map(P=>this.directiveToStmt(P));l.body=w.concat(l.body),delete l.directives}parsePrivateName(){let l=super.parsePrivateName();return this.getPluginOption("estree","classFeatures")?this.convertPrivateNameToPrivateIdentifier(l):l}convertPrivateNameToPrivateIdentifier(l){let u=super.getPrivateNameSV(l);return l=l,delete l.id,l.name=u,l.type="PrivateIdentifier",l}isPrivateName(l){return this.getPluginOption("estree","classFeatures")?l.type==="PrivateIdentifier":super.isPrivateName(l)}getPrivateNameSV(l){return this.getPluginOption("estree","classFeatures")?l.name:super.getPrivateNameSV(l)}parseLiteral(l,u){let m=super.parseLiteral(l,u);return m.raw=m.extra.raw,delete m.extra,m}parseFunctionBody(l,u,m=!1){super.parseFunctionBody(l,u,m),l.expression=l.body.type!=="BlockStatement"}parseMethod(l,u,m,v,S,w,P=!1){let L=this.startNode();L.kind=l.kind,L=super.parseMethod(L,u,m,v,S,w,P),L.type="FunctionExpression",delete L.kind,l.value=L;let{typeParameters:F}=l;return F&&(delete l.typeParameters,L.typeParameters=F,this.resetStartLocationFromNode(L,F)),w==="ClassPrivateMethod"&&(l.computed=!1),this.finishNode(l,"MethodDefinition")}nameIsConstructor(l){return l.type==="Literal"?l.value==="constructor":super.nameIsConstructor(l)}parseClassProperty(...l){let u=super.parseClassProperty(...l);return this.getPluginOption("estree","classFeatures")&&(u.type="PropertyDefinition"),u}parseClassPrivateProperty(...l){let u=super.parseClassPrivateProperty(...l);return this.getPluginOption("estree","classFeatures")&&(u.type="PropertyDefinition",u.computed=!1),u}parseObjectMethod(l,u,m,v,S){let w=super.parseObjectMethod(l,u,m,v,S);return w&&(w.type="Property",w.kind==="method"&&(w.kind="init"),w.shorthand=!1),w}parseObjectProperty(l,u,m,v){let S=super.parseObjectProperty(l,u,m,v);return S&&(S.kind="init",S.type="Property"),S}isValidLVal(l,u,m){return l==="Property"?"value":super.isValidLVal(l,u,m)}isAssignable(l,u){return l!=null&&this.isObjectProperty(l)?this.isAssignable(l.value,u):super.isAssignable(l,u)}toAssignable(l,u=!1){if(l!=null&&this.isObjectProperty(l)){let{key:m,value:v}=l;this.isPrivateName(m)&&this.classScope.usePrivateName(this.getPrivateNameSV(m),m.loc.start),this.toAssignable(v,u)}else super.toAssignable(l,u)}toAssignableObjectExpressionProp(l,u,m){l.type==="Property"&&(l.kind==="get"||l.kind==="set")?this.raise(D.PatternHasAccessor,l.key):l.type==="Property"&&l.method?this.raise(D.PatternHasMethod,l.key):super.toAssignableObjectExpressionProp(l,u,m)}finishCallExpression(l,u){let m=super.finishCallExpression(l,u);if(m.callee.type==="Import"){var v,S;m.type="ImportExpression",m.source=m.arguments[0],m.options=(v=m.arguments[1])!=null?v:null,m.attributes=(S=m.arguments[1])!=null?S:null,delete m.arguments,delete m.callee}return m}toReferencedArguments(l){l.type!=="ImportExpression"&&super.toReferencedArguments(l)}parseExport(l,u){let m=this.state.lastTokStartLoc,v=super.parseExport(l,u);switch(v.type){case"ExportAllDeclaration":v.exported=null;break;case"ExportNamedDeclaration":v.specifiers.length===1&&v.specifiers[0].type==="ExportNamespaceSpecifier"&&(v.type="ExportAllDeclaration",v.exported=v.specifiers[0].exported,delete v.specifiers);case"ExportDefaultDeclaration":{var S;let{declaration:w}=v;w?.type==="ClassDeclaration"&&((S=w.decorators)==null?void 0:S.length)>0&&w.start===v.start&&this.resetStartLocation(v,m)}break}return v}parseSubscript(l,u,m,v){let S=super.parseSubscript(l,u,m,v);if(v.optionalChainMember){if((S.type==="OptionalMemberExpression"||S.type==="OptionalCallExpression")&&(S.type=S.type.substring(8)),v.stop){let w=this.startNodeAtNode(S);return w.expression=S,this.finishNode(w,"ChainExpression")}}else(S.type==="MemberExpression"||S.type==="CallExpression")&&(S.optional=!1);return S}isOptionalMemberExpression(l){return l.type==="ChainExpression"?l.expression.type==="MemberExpression":super.isOptionalMemberExpression(l)}hasPropertyAsPrivateName(l){return l.type==="ChainExpression"&&(l=l.expression),super.hasPropertyAsPrivateName(l)}isObjectProperty(l){return l.type==="Property"&&l.kind==="init"&&!l.method}isObjectMethod(l){return l.type==="Property"&&(l.method||l.kind==="get"||l.kind==="set")}finishNodeAt(l,u,m){return O(super.finishNodeAt(l,u,m))}resetStartLocation(l,u){super.resetStartLocation(l,u),O(l)}resetEndLocation(l,u=this.state.lastTokEndLoc){super.resetEndLocation(l,u),O(l)}},K=class{constructor(d,l){this.token=void 0,this.preserveSpace=void 0,this.token=d,this.preserveSpace=!!l}},$={brace:new K("{"),j_oTag:new K("<tag"),j_cTag:new K("</tag"),j_expr:new K("<tag>...</tag>",!0)};$.template=new K("`",!0);var ae=!0,q=!0,ji=!0,Mt=!0,De=!0,Ht=!0,Ti=class{constructor(d,l={}){this.label=void 0,this.keyword=void 0,this.beforeExpr=void 0,this.startsExpr=void 0,this.rightAssociative=void 0,this.isLoop=void 0,this.isAssign=void 0,this.prefix=void 0,this.postfix=void 0,this.binop=void 0,this.label=d,this.keyword=l.keyword,this.beforeExpr=!!l.beforeExpr,this.startsExpr=!!l.startsExpr,this.rightAssociative=!!l.rightAssociative,this.isLoop=!!l.isLoop,this.isAssign=!!l.isAssign,this.prefix=!!l.prefix,this.postfix=!!l.postfix,this.binop=l.binop!=null?l.binop:null,this.updateContext=null}},bo=new Map;function Qe(d,l={}){l.keyword=d;let u=Pe(d,l);return bo.set(d,u),u}function Yt(d,l){return Pe(d,{beforeExpr:ae,binop:l})}var Mo=-1,Xi=[],Th=[],fa=[],Ih=[],od=[],Ph=[];function Pe(d,l={}){var u,m,v,S;return++Mo,Th.push(d),fa.push((u=l.binop)!=null?u:-1),Ih.push((m=l.beforeExpr)!=null?m:!1),od.push((v=l.startsExpr)!=null?v:!1),Ph.push((S=l.prefix)!=null?S:!1),Xi.push(new Ti(d,l)),Mo}function rt(d,l={}){var u,m,v,S;return++Mo,bo.set(d,Mo),Th.push(d),fa.push((u=l.binop)!=null?u:-1),Ih.push((m=l.beforeExpr)!=null?m:!1),od.push((v=l.startsExpr)!=null?v:!1),Ph.push((S=l.prefix)!=null?S:!1),Xi.push(new Ti("name",l)),Mo}var kh={bracketL:Pe("[",{beforeExpr:ae,startsExpr:q}),bracketHashL:Pe("#[",{beforeExpr:ae,startsExpr:q}),bracketBarL:Pe("[|",{beforeExpr:ae,startsExpr:q}),bracketR:Pe("]"),bracketBarR:Pe("|]"),braceL:Pe("{",{beforeExpr:ae,startsExpr:q}),braceBarL:Pe("{|",{beforeExpr:ae,startsExpr:q}),braceHashL:Pe("#{",{beforeExpr:ae,startsExpr:q}),braceR:Pe("}"),braceBarR:Pe("|}"),parenL:Pe("(",{beforeExpr:ae,startsExpr:q}),parenR:Pe(")"),comma:Pe(",",{beforeExpr:ae}),semi:Pe(";",{beforeExpr:ae}),colon:Pe(":",{beforeExpr:ae}),doubleColon:Pe("::",{beforeExpr:ae}),dot:Pe("."),question:Pe("?",{beforeExpr:ae}),questionDot:Pe("?."),arrow:Pe("=>",{beforeExpr:ae}),template:Pe("template"),ellipsis:Pe("...",{beforeExpr:ae}),backQuote:Pe("`",{startsExpr:q}),dollarBraceL:Pe("${",{beforeExpr:ae,startsExpr:q}),templateTail:Pe("...`",{startsExpr:q}),templateNonTail:Pe("...${",{beforeExpr:ae,startsExpr:q}),at:Pe("@"),hash:Pe("#",{startsExpr:q}),interpreterDirective:Pe("#!..."),eq:Pe("=",{beforeExpr:ae,isAssign:Mt}),assign:Pe("_=",{beforeExpr:ae,isAssign:Mt}),slashAssign:Pe("_=",{beforeExpr:ae,isAssign:Mt}),xorAssign:Pe("_=",{beforeExpr:ae,isAssign:Mt}),moduloAssign:Pe("_=",{beforeExpr:ae,isAssign:Mt}),incDec:Pe("++/--",{prefix:De,postfix:Ht,startsExpr:q}),bang:Pe("!",{beforeExpr:ae,prefix:De,startsExpr:q}),tilde:Pe("~",{beforeExpr:ae,prefix:De,startsExpr:q}),doubleCaret:Pe("^^",{startsExpr:q}),doubleAt:Pe("@@",{startsExpr:q}),pipeline:Yt("|>",0),nullishCoalescing:Yt("??",1),logicalOR:Yt("||",1),logicalAND:Yt("&&",2),bitwiseOR:Yt("|",3),bitwiseXOR:Yt("^",4),bitwiseAND:Yt("&",5),equality:Yt("==/!=/===/!==",6),lt:Yt("</>/<=/>=",7),gt:Yt("</>/<=/>=",7),relational:Yt("</>/<=/>=",7),bitShift:Yt("<</>>/>>>",8),bitShiftL:Yt("<</>>/>>>",8),bitShiftR:Yt("<</>>/>>>",8),plusMin:Pe("+/-",{beforeExpr:ae,binop:9,prefix:De,startsExpr:q}),modulo:Pe("%",{binop:10,startsExpr:q}),star:Pe("*",{binop:10}),slash:Yt("/",10),exponent:Pe("**",{beforeExpr:ae,binop:11,rightAssociative:!0}),_in:Qe("in",{beforeExpr:ae,binop:7}),_instanceof:Qe("instanceof",{beforeExpr:ae,binop:7}),_break:Qe("break"),_case:Qe("case",{beforeExpr:ae}),_catch:Qe("catch"),_continue:Qe("continue"),_debugger:Qe("debugger"),_default:Qe("default",{beforeExpr:ae}),_else:Qe("else",{beforeExpr:ae}),_finally:Qe("finally"),_function:Qe("function",{startsExpr:q}),_if:Qe("if"),_return:Qe("return",{beforeExpr:ae}),_switch:Qe("switch"),_throw:Qe("throw",{beforeExpr:ae,prefix:De,startsExpr:q}),_try:Qe("try"),_var:Qe("var"),_const:Qe("const"),_with:Qe("with"),_new:Qe("new",{beforeExpr:ae,startsExpr:q}),_this:Qe("this",{startsExpr:q}),_super:Qe("super",{startsExpr:q}),_class:Qe("class",{startsExpr:q}),_extends:Qe("extends",{beforeExpr:ae}),_export:Qe("export"),_import:Qe("import",{startsExpr:q}),_null:Qe("null",{startsExpr:q}),_true:Qe("true",{startsExpr:q}),_false:Qe("false",{startsExpr:q}),_typeof:Qe("typeof",{beforeExpr:ae,prefix:De,startsExpr:q}),_void:Qe("void",{beforeExpr:ae,prefix:De,startsExpr:q}),_delete:Qe("delete",{beforeExpr:ae,prefix:De,startsExpr:q}),_do:Qe("do",{isLoop:ji,beforeExpr:ae}),_for:Qe("for",{isLoop:ji}),_while:Qe("while",{isLoop:ji}),_as:rt("as",{startsExpr:q}),_assert:rt("assert",{startsExpr:q}),_async:rt("async",{startsExpr:q}),_await:rt("await",{startsExpr:q}),_defer:rt("defer",{startsExpr:q}),_from:rt("from",{startsExpr:q}),_get:rt("get",{startsExpr:q}),_let:rt("let",{startsExpr:q}),_meta:rt("meta",{startsExpr:q}),_of:rt("of",{startsExpr:q}),_sent:rt("sent",{startsExpr:q}),_set:rt("set",{startsExpr:q}),_source:rt("source",{startsExpr:q}),_static:rt("static",{startsExpr:q}),_using:rt("using",{startsExpr:q}),_yield:rt("yield",{startsExpr:q}),_asserts:rt("asserts",{startsExpr:q}),_checks:rt("checks",{startsExpr:q}),_exports:rt("exports",{startsExpr:q}),_global:rt("global",{startsExpr:q}),_implements:rt("implements",{startsExpr:q}),_intrinsic:rt("intrinsic",{startsExpr:q}),_infer:rt("infer",{startsExpr:q}),_is:rt("is",{startsExpr:q}),_mixins:rt("mixins",{startsExpr:q}),_proto:rt("proto",{startsExpr:q}),_require:rt("require",{startsExpr:q}),_satisfies:rt("satisfies",{startsExpr:q}),_keyof:rt("keyof",{startsExpr:q}),_readonly:rt("readonly",{startsExpr:q}),_unique:rt("unique",{startsExpr:q}),_abstract:rt("abstract",{startsExpr:q}),_declare:rt("declare",{startsExpr:q}),_enum:rt("enum",{startsExpr:q}),_module:rt("module",{startsExpr:q}),_namespace:rt("namespace",{startsExpr:q}),_interface:rt("interface",{startsExpr:q}),_type:rt("type",{startsExpr:q}),_opaque:rt("opaque",{startsExpr:q}),name:Pe("name",{startsExpr:q}),placeholder:Pe("%%",{startsExpr:!0}),string:Pe("string",{startsExpr:q}),num:Pe("num",{startsExpr:q}),bigint:Pe("bigint",{startsExpr:q}),decimal:Pe("decimal",{startsExpr:q}),regexp:Pe("regexp",{startsExpr:q}),privateName:Pe("#name",{startsExpr:q}),eof:Pe("eof"),jsxName:Pe("jsxName"),jsxText:Pe("jsxText",{beforeExpr:!0}),jsxTagStart:Pe("jsxTagStart",{startsExpr:!0}),jsxTagEnd:Pe("jsxTagEnd")};function vt(d){return d>=93&&d<=133}function Tl(d){return d<=92}function ni(d){return d>=58&&d<=133}function lP(d){return d>=58&&d<=137}function K4(d){return Ih[d]}function hC(d){return od[d]}function $4(d){return d>=29&&d<=33}function cP(d){return d>=129&&d<=131}function G4(d){return d>=90&&d<=92}function pC(d){return d>=58&&d<=92}function J4(d){return d>=39&&d<=59}function X4(d){return d===34}function Y4(d){return Ph[d]}function Q4(d){return d>=121&&d<=123}function Z4(d){return d>=124&&d<=130}function _a(d){return Th[d]}function jg(d){return fa[d]}function eW(d){return d===57}function zg(d){return d>=24&&d<=25}function as(d){return Xi[d]}Xi[8].updateContext=d=>{d.pop()},Xi[5].updateContext=Xi[7].updateContext=Xi[23].updateContext=d=>{d.push($.brace)},Xi[22].updateContext=d=>{d[d.length-1]===$.template?d.pop():d.push($.template)},Xi[143].updateContext=d=>{d.push($.j_expr,$.j_oTag)};var mC="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",dP="\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u200C\u200D\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\u30FB\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F\uFF65",tW=new RegExp("["+mC+"]"),iW=new RegExp("["+mC+dP+"]");mC=dP=null;var uP=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],oW=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239];function gC(d,l){let u=65536;for(let m=0,v=l.length;m<v;m+=2){if(u+=l[m],u>d)return!1;if(u+=l[m+1],u>=d)return!0}return!1}function ls(d){return d<65?d===36:d<=90?!0:d<97?d===95:d<=122?!0:d<=65535?d>=170&&tW.test(String.fromCharCode(d)):gC(d,uP)}function rd(d){return d<48?d===36:d<58?!0:d<65?!1:d<=90?!0:d<97?d===95:d<=122?!0:d<=65535?d>=170&&iW.test(String.fromCharCode(d)):gC(d,uP)||gC(d,oW)}var fC={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"],strictBind:["eval","arguments"]},rW=new Set(fC.keyword),nW=new Set(fC.strict),sW=new Set(fC.strictBind);function hP(d,l){return l&&d==="await"||d==="enum"}function pP(d,l){return hP(d,l)||nW.has(d)}function mP(d){return sW.has(d)}function gP(d,l){return pP(d,l)||mP(d)}function aW(d){return rW.has(d)}function lW(d,l,u){return d===64&&l===64&&ls(u)}var cW=new Set(["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete","implements","interface","let","package","private","protected","public","static","yield","eval","arguments","enum","await"]);function dW(d){return cW.has(d)}var _C=class{constructor(d){this.flags=0,this.names=new Map,this.firstLexicalName="",this.flags=d}},yC=class{constructor(d,l){this.parser=void 0,this.scopeStack=[],this.inModule=void 0,this.undefinedExports=new Map,this.parser=d,this.inModule=l}get inTopLevel(){return(this.currentScope().flags&1)>0}get inFunction(){return(this.currentVarScopeFlags()&2)>0}get allowSuper(){return(this.currentThisScopeFlags()&16)>0}get allowDirectSuper(){return(this.currentThisScopeFlags()&32)>0}get inClass(){return(this.currentThisScopeFlags()&64)>0}get inClassAndNotInNonArrowFunction(){let d=this.currentThisScopeFlags();return(d&64)>0&&(d&2)===0}get inStaticBlock(){for(let d=this.scopeStack.length-1;;d--){let{flags:l}=this.scopeStack[d];if(l&128)return!0;if(l&451)return!1}}get inNonArrowFunction(){return(this.currentThisScopeFlags()&2)>0}get treatFunctionsAsVar(){return this.treatFunctionsAsVarInScope(this.currentScope())}createScope(d){return new _C(d)}enter(d){this.scopeStack.push(this.createScope(d))}exit(){return this.scopeStack.pop().flags}treatFunctionsAsVarInScope(d){return!!(d.flags&130||!this.parser.inModule&&d.flags&1)}declareName(d,l,u){let m=this.currentScope();if(l&8||l&16){this.checkRedeclarationInScope(m,d,l,u);let v=m.names.get(d)||0;l&16?v=v|4:(m.firstLexicalName||(m.firstLexicalName=d),v=v|2),m.names.set(d,v),l&8&&this.maybeExportDefined(m,d)}else if(l&4)for(let v=this.scopeStack.length-1;v>=0&&(m=this.scopeStack[v],this.checkRedeclarationInScope(m,d,l,u),m.names.set(d,(m.names.get(d)||0)|1),this.maybeExportDefined(m,d),!(m.flags&387));--v);this.parser.inModule&&m.flags&1&&this.undefinedExports.delete(d)}maybeExportDefined(d,l){this.parser.inModule&&d.flags&1&&this.undefinedExports.delete(l)}checkRedeclarationInScope(d,l,u,m){this.isRedeclaredInScope(d,l,u)&&this.parser.raise(D.VarRedeclaration,m,{identifierName:l})}isRedeclaredInScope(d,l,u){if(!(u&1))return!1;if(u&8)return d.names.has(l);let m=d.names.get(l);return u&16?(m&2)>0||!this.treatFunctionsAsVarInScope(d)&&(m&1)>0:(m&2)>0&&!(d.flags&8&&d.firstLexicalName===l)||!this.treatFunctionsAsVarInScope(d)&&(m&4)>0}checkLocalExport(d){let{name:l}=d;this.scopeStack[0].names.has(l)||this.undefinedExports.set(l,d.loc.start)}currentScope(){return this.scopeStack[this.scopeStack.length-1]}currentVarScopeFlags(){for(let d=this.scopeStack.length-1;;d--){let{flags:l}=this.scopeStack[d];if(l&387)return l}}currentThisScopeFlags(){for(let d=this.scopeStack.length-1;;d--){let{flags:l}=this.scopeStack[d];if(l&451&&!(l&4))return l}}},uW=class extends _C{constructor(...d){super(...d),this.declareFunctions=new Set}},hW=class extends yC{createScope(d){return new uW(d)}declareName(d,l,u){let m=this.currentScope();if(l&2048){this.checkRedeclarationInScope(m,d,l,u),this.maybeExportDefined(m,d),m.declareFunctions.add(d);return}super.declareName(d,l,u)}isRedeclaredInScope(d,l,u){if(super.isRedeclaredInScope(d,l,u))return!0;if(u&2048&&!d.declareFunctions.has(l)){let m=d.names.get(l);return(m&4)>0||(m&2)>0}return!1}checkLocalExport(d){this.scopeStack[0].declareFunctions.has(d.name)||super.checkLocalExport(d)}},pW=class{constructor(){this.sawUnambiguousESM=!1,this.ambiguousScriptDifferentAst=!1}sourceToOffsetPos(d){return d+this.startIndex}offsetToSourcePos(d){return d-this.startIndex}hasPlugin(d){if(typeof d=="string")return this.plugins.has(d);{let[l,u]=d;if(!this.hasPlugin(l))return!1;let m=this.plugins.get(l);for(let v of Object.keys(u))if(m?.[v]!==u[v])return!1;return!0}}getPluginOption(d,l){var u;return(u=this.plugins.get(d))==null?void 0:u[l]}};function fP(d,l){d.trailingComments===void 0?d.trailingComments=l:d.trailingComments.unshift(...l)}function mW(d,l){d.leadingComments===void 0?d.leadingComments=l:d.leadingComments.unshift(...l)}function Fh(d,l){d.innerComments===void 0?d.innerComments=l:d.innerComments.unshift(...l)}function Il(d,l,u){let m=null,v=l.length;for(;m===null&&v>0;)m=l[--v];m===null||m.start>u.start?Fh(d,u.comments):fP(m,u.comments)}var gW=class extends pW{addComment(d){this.filename&&(d.loc.filename=this.filename);let{commentsLen:l}=this.state;this.comments.length!==l&&(this.comments.length=l),this.comments.push(d),this.state.commentsLen++}processComment(d){let{commentStack:l}=this.state,u=l.length;if(u===0)return;let m=u-1,v=l[m];v.start===d.end&&(v.leadingNode=d,m--);let{start:S}=d;for(;m>=0;m--){let w=l[m],P=w.end;if(P>S)w.containingNode=d,this.finalizeComment(w),l.splice(m,1);else{P===S&&(w.trailingNode=d);break}}}finalizeComment(d){let{comments:l}=d;if(d.leadingNode!==null||d.trailingNode!==null)d.leadingNode!==null&&fP(d.leadingNode,l),d.trailingNode!==null&&mW(d.trailingNode,l);else{let{containingNode:u,start:m}=d;if(this.input.charCodeAt(this.offsetToSourcePos(m)-1)===44)switch(u.type){case"ObjectExpression":case"ObjectPattern":case"RecordExpression":Il(u,u.properties,d);break;case"CallExpression":case"OptionalCallExpression":Il(u,u.arguments,d);break;case"FunctionDeclaration":case"FunctionExpression":case"ArrowFunctionExpression":case"ObjectMethod":case"ClassMethod":case"ClassPrivateMethod":Il(u,u.params,d);break;case"ArrayExpression":case"ArrayPattern":case"TupleExpression":Il(u,u.elements,d);break;case"ExportNamedDeclaration":case"ImportDeclaration":Il(u,u.specifiers,d);break;case"TSEnumDeclaration":Il(u,u.members,d);break;case"TSEnumBody":Il(u,u.members,d);break;default:Fh(u,l)}else Fh(u,l)}}finalizeRemainingComments(){let{commentStack:d}=this.state;for(let l=d.length-1;l>=0;l--)this.finalizeComment(d[l]);this.state.commentStack=[]}resetPreviousNodeTrailingComments(d){let{commentStack:l}=this.state,{length:u}=l;if(u===0)return;let m=l[u-1];m.leadingNode===d&&(m.leadingNode=null)}resetPreviousIdentifierLeadingComments(d){let{commentStack:l}=this.state,{length:u}=l;u!==0&&(l[u-1].trailingNode===d?l[u-1].trailingNode=null:u>=2&&l[u-2].trailingNode===d&&(l[u-2].trailingNode=null))}takeSurroundingComments(d,l,u){let{commentStack:m}=this.state,v=m.length;if(v===0)return;let S=v-1;for(;S>=0;S--){let w=m[S],P=w.end;if(w.start===u)w.leadingNode=d;else if(P===l)w.trailingNode=d;else if(P<l)break}}},fW=/\r\n|[\r\n\u2028\u2029]/,Vg=new RegExp(fW.source,"g");function nd(d){switch(d){case 10:case 13:case 8232:case 8233:return!0;default:return!1}}function _P(d,l,u){for(let m=l;m<u;m++)if(nd(d.charCodeAt(m)))return!0;return!1}var vC=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,bC=/(?:[^\S\n\r\u2028\u2029]|\/\/.*|\/\*.*?\*\/)*/g;function _W(d){switch(d){case 9:case 11:case 12:case 32:case 160:case 5760:case 8192:case 8193:case 8194:case 8195:case 8196:case 8197:case 8198:case 8199:case 8200:case 8201:case 8202:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}var yW=class LR{constructor(){this.flags=1024,this.startIndex=void 0,this.curLine=void 0,this.lineStart=void 0,this.startLoc=void 0,this.endLoc=void 0,this.errors=[],this.potentialArrowAt=-1,this.noArrowAt=[],this.noArrowParamsConversionAt=[],this.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null},this.labels=[],this.commentsLen=0,this.commentStack=[],this.pos=0,this.type=140,this.value=null,this.start=0,this.end=0,this.lastTokEndLoc=null,this.lastTokStartLoc=null,this.context=[$.brace],this.firstInvalidTemplateEscapePos=null,this.strictErrors=new Map,this.tokensLength=0}get strict(){return(this.flags&1)>0}set strict(l){l?this.flags|=1:this.flags&=-2}init({strictMode:l,sourceType:u,startIndex:m,startLine:v,startColumn:S}){this.strict=l===!1?!1:l===!0?!0:u==="module",this.startIndex=m,this.curLine=v,this.lineStart=-S,this.startLoc=this.endLoc=new t(v,S,m)}get maybeInArrowParameters(){return(this.flags&2)>0}set maybeInArrowParameters(l){l?this.flags|=2:this.flags&=-3}get inType(){return(this.flags&4)>0}set inType(l){l?this.flags|=4:this.flags&=-5}get noAnonFunctionType(){return(this.flags&8)>0}set noAnonFunctionType(l){l?this.flags|=8:this.flags&=-9}get hasFlowComment(){return(this.flags&16)>0}set hasFlowComment(l){l?this.flags|=16:this.flags&=-17}get isAmbientContext(){return(this.flags&32)>0}set isAmbientContext(l){l?this.flags|=32:this.flags&=-33}get inAbstractClass(){return(this.flags&64)>0}set inAbstractClass(l){l?this.flags|=64:this.flags&=-65}get inDisallowConditionalTypesContext(){return(this.flags&128)>0}set inDisallowConditionalTypesContext(l){l?this.flags|=128:this.flags&=-129}get soloAwait(){return(this.flags&256)>0}set soloAwait(l){l?this.flags|=256:this.flags&=-257}get inFSharpPipelineDirectBody(){return(this.flags&512)>0}set inFSharpPipelineDirectBody(l){l?this.flags|=512:this.flags&=-513}get canStartJSXElement(){return(this.flags&1024)>0}set canStartJSXElement(l){l?this.flags|=1024:this.flags&=-1025}get containsEsc(){return(this.flags&2048)>0}set containsEsc(l){l?this.flags|=2048:this.flags&=-2049}get hasTopLevelAwait(){return(this.flags&4096)>0}set hasTopLevelAwait(l){l?this.flags|=4096:this.flags&=-4097}curPosition(){return new t(this.curLine,this.pos-this.lineStart,this.pos+this.startIndex)}clone(){let l=new LR;return l.flags=this.flags,l.startIndex=this.startIndex,l.curLine=this.curLine,l.lineStart=this.lineStart,l.startLoc=this.startLoc,l.endLoc=this.endLoc,l.errors=this.errors.slice(),l.potentialArrowAt=this.potentialArrowAt,l.noArrowAt=this.noArrowAt.slice(),l.noArrowParamsConversionAt=this.noArrowParamsConversionAt.slice(),l.topicContext=this.topicContext,l.labels=this.labels.slice(),l.commentsLen=this.commentsLen,l.commentStack=this.commentStack.slice(),l.pos=this.pos,l.type=this.type,l.value=this.value,l.start=this.start,l.end=this.end,l.lastTokEndLoc=this.lastTokEndLoc,l.lastTokStartLoc=this.lastTokStartLoc,l.context=this.context.slice(),l.firstInvalidTemplateEscapePos=this.firstInvalidTemplateEscapePos,l.strictErrors=this.strictErrors,l.tokensLength=this.tokensLength,l}},vW=function(d){return d>=48&&d<=57},yP={decBinOct:new Set([46,66,69,79,95,98,101,111]),hex:new Set([46,88,95,120])},Ug={bin:d=>d===48||d===49,oct:d=>d>=48&&d<=55,dec:d=>d>=48&&d<=57,hex:d=>d>=48&&d<=57||d>=65&&d<=70||d>=97&&d<=102};function vP(d,l,u,m,v,S){let w=u,P=m,L=v,F="",G=null,se=u,{length:ye}=l;for(;;){if(u>=ye){S.unterminated(w,P,L),F+=l.slice(se,u);break}let Ie=l.charCodeAt(u);if(bW(d,Ie,l,u)){F+=l.slice(se,u);break}if(Ie===92){F+=l.slice(se,u);let dt=DW(l,u,m,v,d==="template",S);dt.ch===null&&!G?G={pos:u,lineStart:m,curLine:v}:F+=dt.ch,{pos:u,lineStart:m,curLine:v}=dt,se=u}else Ie===8232||Ie===8233?(++u,++v,m=u):Ie===10||Ie===13?d==="template"?(F+=l.slice(se,u)+`
`,++u,Ie===13&&l.charCodeAt(u)===10&&++u,++v,se=m=u):S.unterminated(w,P,L):++u}return{pos:u,str:F,firstInvalidLoc:G,lineStart:m,curLine:v,containsInvalid:!!G}}function bW(d,l,u,m){return d==="template"?l===96||l===36&&u.charCodeAt(m+1)===123:l===(d==="double"?34:39)}function DW(d,l,u,m,v,S){let w=!v;l++;let P=F=>({pos:l,ch:F,lineStart:u,curLine:m}),L=d.charCodeAt(l++);switch(L){case 110:return P(`
`);case 114:return P("\r");case 120:{let F;return{code:F,pos:l}=DC(d,l,u,m,2,!1,w,S),P(F===null?null:String.fromCharCode(F))}case 117:{let F;return{code:F,pos:l}=DP(d,l,u,m,w,S),P(F===null?null:String.fromCodePoint(F))}case 116:return P("	");case 98:return P("\b");case 118:return P("\v");case 102:return P("\f");case 13:d.charCodeAt(l)===10&&++l;case 10:u=l,++m;case 8232:case 8233:return P("");case 56:case 57:if(v)return P(null);S.strictNumericEscape(l-1,u,m);default:if(L>=48&&L<=55){let F=l-1,G=/^[0-7]+/.exec(d.slice(F,l+2))[0],se=parseInt(G,8);se>255&&(G=G.slice(0,-1),se=parseInt(G,8)),l+=G.length-1;let ye=d.charCodeAt(l);if(G!=="0"||ye===56||ye===57){if(v)return P(null);S.strictNumericEscape(F,u,m)}return P(String.fromCharCode(se))}return P(String.fromCharCode(L))}}function DC(d,l,u,m,v,S,w,P){let L=l,F;return{n:F,pos:l}=bP(d,l,u,m,16,v,S,!1,P,!w),F===null&&(w?P.invalidEscapeSequence(L,u,m):l=L-1),{code:F,pos:l}}function bP(d,l,u,m,v,S,w,P,L,F){let G=l,se=v===16?yP.hex:yP.decBinOct,ye=v===16?Ug.hex:v===10?Ug.dec:v===8?Ug.oct:Ug.bin,Ie=!1,dt=0;for(let vi=0,At=S??1/0;vi<At;++vi){let bi=d.charCodeAt(l),Jo;if(bi===95&&P!=="bail"){let wC=d.charCodeAt(l-1),EC=d.charCodeAt(l+1);if(P){if(Number.isNaN(EC)||!ye(EC)||se.has(wC)||se.has(EC)){if(F)return{n:null,pos:l};L.unexpectedNumericSeparator(l,u,m)}}else{if(F)return{n:null,pos:l};L.numericSeparatorInEscapeSequence(l,u,m)}++l;continue}if(bi>=97?Jo=bi-97+10:bi>=65?Jo=bi-65+10:vW(bi)?Jo=bi-48:Jo=1/0,Jo>=v){if(Jo<=9&&F)return{n:null,pos:l};if(Jo<=9&&L.invalidDigit(l,u,m,v))Jo=0;else if(w)Jo=0,Ie=!0;else break}++l,dt=dt*v+Jo}return l===G||S!=null&&l-G!==S||Ie?{n:null,pos:l}:{n:dt,pos:l}}function DP(d,l,u,m,v,S){let w=d.charCodeAt(l),P;if(w===123){if(++l,{code:P,pos:l}=DC(d,l,u,m,d.indexOf("}",l)-l,!0,v,S),++l,P!==null&&P>1114111)if(v)S.invalidCodePoint(l,u,m);else return{code:null,pos:l}}else({code:P,pos:l}=DC(d,l,u,m,4,!1,v,S));return{code:P,pos:l}}function Lh(d,l,u){return new t(u,d-l,d)}var CW=new Set([103,109,115,105,121,117,100,118]),ya=class{constructor(d){let l=d.startIndex||0;this.type=d.type,this.value=d.value,this.start=l+d.start,this.end=l+d.end,this.loc=new o(d.startLoc,d.endLoc)}},xW=class extends gW{constructor(d,l){super(),this.isLookahead=void 0,this.tokens=[],this.errorHandlers_readInt={invalidDigit:(u,m,v,S)=>this.optionFlags&1024?(this.raise(D.InvalidDigit,Lh(u,m,v),{radix:S}),!0):!1,numericSeparatorInEscapeSequence:this.errorBuilder(D.NumericSeparatorInEscapeSequence),unexpectedNumericSeparator:this.errorBuilder(D.UnexpectedNumericSeparator)},this.errorHandlers_readCodePoint=Object.assign({},this.errorHandlers_readInt,{invalidEscapeSequence:this.errorBuilder(D.InvalidEscapeSequence),invalidCodePoint:this.errorBuilder(D.InvalidCodePoint)}),this.errorHandlers_readStringContents_string=Object.assign({},this.errorHandlers_readCodePoint,{strictNumericEscape:(u,m,v)=>{this.recordStrictModeErrors(D.StrictNumericEscape,Lh(u,m,v))},unterminated:(u,m,v)=>{throw this.raise(D.UnterminatedString,Lh(u-1,m,v))}}),this.errorHandlers_readStringContents_template=Object.assign({},this.errorHandlers_readCodePoint,{strictNumericEscape:this.errorBuilder(D.StrictNumericEscape),unterminated:(u,m,v)=>{throw this.raise(D.UnterminatedTemplate,Lh(u,m,v))}}),this.state=new yW,this.state.init(d),this.input=l,this.length=l.length,this.comments=[],this.isLookahead=!1}pushToken(d){this.tokens.length=this.state.tokensLength,this.tokens.push(d),++this.state.tokensLength}next(){this.checkKeywordEscapes(),this.optionFlags&128&&this.pushToken(new ya(this.state)),this.state.lastTokEndLoc=this.state.endLoc,this.state.lastTokStartLoc=this.state.startLoc,this.nextToken()}eat(d){return this.match(d)?(this.next(),!0):!1}match(d){return this.state.type===d}createLookaheadState(d){return{pos:d.pos,value:null,type:d.type,start:d.start,end:d.end,context:[this.curContext()],inType:d.inType,startLoc:d.startLoc,lastTokEndLoc:d.lastTokEndLoc,curLine:d.curLine,lineStart:d.lineStart,curPosition:d.curPosition}}lookahead(){let d=this.state;this.state=this.createLookaheadState(d),this.isLookahead=!0,this.nextToken(),this.isLookahead=!1;let l=this.state;return this.state=d,l}nextTokenStart(){return this.nextTokenStartSince(this.state.pos)}nextTokenStartSince(d){return vC.lastIndex=d,vC.test(this.input)?vC.lastIndex:d}lookaheadCharCode(){return this.input.charCodeAt(this.nextTokenStart())}nextTokenInLineStart(){return this.nextTokenInLineStartSince(this.state.pos)}nextTokenInLineStartSince(d){return bC.lastIndex=d,bC.test(this.input)?bC.lastIndex:d}lookaheadInLineCharCode(){return this.input.charCodeAt(this.nextTokenInLineStart())}codePointAtPos(d){let l=this.input.charCodeAt(d);if((l&64512)===55296&&++d<this.input.length){let u=this.input.charCodeAt(d);(u&64512)===56320&&(l=65536+((l&1023)<<10)+(u&1023))}return l}setStrict(d){this.state.strict=d,d&&(this.state.strictErrors.forEach(([l,u])=>this.raise(l,u)),this.state.strictErrors.clear())}curContext(){return this.state.context[this.state.context.length-1]}nextToken(){if(this.skipSpace(),this.state.start=this.state.pos,this.isLookahead||(this.state.startLoc=this.state.curPosition()),this.state.pos>=this.length){this.finishToken(140);return}this.getTokenFromCode(this.codePointAtPos(this.state.pos))}skipBlockComment(d){let l;this.isLookahead||(l=this.state.curPosition());let u=this.state.pos,m=this.input.indexOf(d,u+2);if(m===-1)throw this.raise(D.UnterminatedComment,this.state.curPosition());for(this.state.pos=m+d.length,Vg.lastIndex=u+2;Vg.test(this.input)&&Vg.lastIndex<=m;)++this.state.curLine,this.state.lineStart=Vg.lastIndex;if(this.isLookahead)return;let v={type:"CommentBlock",value:this.input.slice(u+2,m),start:this.sourceToOffsetPos(u),end:this.sourceToOffsetPos(m+d.length),loc:new o(l,this.state.curPosition())};return this.optionFlags&128&&this.pushToken(v),v}skipLineComment(d){let l=this.state.pos,u;this.isLookahead||(u=this.state.curPosition());let m=this.input.charCodeAt(this.state.pos+=d);if(this.state.pos<this.length)for(;!nd(m)&&++this.state.pos<this.length;)m=this.input.charCodeAt(this.state.pos);if(this.isLookahead)return;let v=this.state.pos,S={type:"CommentLine",value:this.input.slice(l+d,v),start:this.sourceToOffsetPos(l),end:this.sourceToOffsetPos(v),loc:new o(u,this.state.curPosition())};return this.optionFlags&128&&this.pushToken(S),S}skipSpace(){let d=this.state.pos,l=this.optionFlags&2048?[]:null;e:for(;this.state.pos<this.length;){let u=this.input.charCodeAt(this.state.pos);switch(u){case 32:case 160:case 9:++this.state.pos;break;case 13:this.input.charCodeAt(this.state.pos+1)===10&&++this.state.pos;case 10:case 8232:case 8233:++this.state.pos,++this.state.curLine,this.state.lineStart=this.state.pos;break;case 47:switch(this.input.charCodeAt(this.state.pos+1)){case 42:{let m=this.skipBlockComment("*/");m!==void 0&&(this.addComment(m),l?.push(m));break}case 47:{let m=this.skipLineComment(2);m!==void 0&&(this.addComment(m),l?.push(m));break}default:break e}break;default:if(_W(u))++this.state.pos;else if(u===45&&!this.inModule&&this.optionFlags&4096){let m=this.state.pos;if(this.input.charCodeAt(m+1)===45&&this.input.charCodeAt(m+2)===62&&(d===0||this.state.lineStart>d)){let v=this.skipLineComment(3);v!==void 0&&(this.addComment(v),l?.push(v))}else break e}else if(u===60&&!this.inModule&&this.optionFlags&4096){let m=this.state.pos;if(this.input.charCodeAt(m+1)===33&&this.input.charCodeAt(m+2)===45&&this.input.charCodeAt(m+3)===45){let v=this.skipLineComment(4);v!==void 0&&(this.addComment(v),l?.push(v))}else break e}else break e}}if(l?.length>0){let u=this.state.pos,m={start:this.sourceToOffsetPos(d),end:this.sourceToOffsetPos(u),comments:l,leadingNode:null,trailingNode:null,containingNode:null};this.state.commentStack.push(m)}}finishToken(d,l){this.state.end=this.state.pos,this.state.endLoc=this.state.curPosition();let u=this.state.type;this.state.type=d,this.state.value=l,this.isLookahead||this.updateContext(u)}replaceToken(d){this.state.type=d,this.updateContext()}readToken_numberSign(){if(this.state.pos===0&&this.readToken_interpreter())return;let d=this.state.pos+1,l=this.codePointAtPos(d);if(l>=48&&l<=57)throw this.raise(D.UnexpectedDigitAfterHash,this.state.curPosition());if(l===123||l===91&&this.hasPlugin("recordAndTuple")){if(this.expectPlugin("recordAndTuple"),this.getPluginOption("recordAndTuple","syntaxType")==="bar")throw this.raise(l===123?D.RecordExpressionHashIncorrectStartSyntaxType:D.TupleExpressionHashIncorrectStartSyntaxType,this.state.curPosition());this.state.pos+=2,l===123?this.finishToken(7):this.finishToken(1)}else ls(l)?(++this.state.pos,this.finishToken(139,this.readWord1(l))):l===92?(++this.state.pos,this.finishToken(139,this.readWord1())):this.finishOp(27,1)}readToken_dot(){let d=this.input.charCodeAt(this.state.pos+1);if(d>=48&&d<=57){this.readNumber(!0);return}d===46&&this.input.charCodeAt(this.state.pos+2)===46?(this.state.pos+=3,this.finishToken(21)):(++this.state.pos,this.finishToken(16))}readToken_slash(){this.input.charCodeAt(this.state.pos+1)===61?this.finishOp(31,2):this.finishOp(56,1)}readToken_interpreter(){if(this.state.pos!==0||this.length<2)return!1;let d=this.input.charCodeAt(this.state.pos+1);if(d!==33)return!1;let l=this.state.pos;for(this.state.pos+=1;!nd(d)&&++this.state.pos<this.length;)d=this.input.charCodeAt(this.state.pos);let u=this.input.slice(l+2,this.state.pos);return this.finishToken(28,u),!0}readToken_mult_modulo(d){let l=d===42?55:54,u=1,m=this.input.charCodeAt(this.state.pos+1);d===42&&m===42&&(u++,m=this.input.charCodeAt(this.state.pos+2),l=57),m===61&&!this.state.inType&&(u++,l=d===37?33:30),this.finishOp(l,u)}readToken_pipe_amp(d){let l=this.input.charCodeAt(this.state.pos+1);if(l===d){this.input.charCodeAt(this.state.pos+2)===61?this.finishOp(30,3):this.finishOp(d===124?41:42,2);return}if(d===124){if(l===62){this.finishOp(39,2);return}if(this.hasPlugin("recordAndTuple")&&l===125){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(D.RecordExpressionBarIncorrectEndSyntaxType,this.state.curPosition());this.state.pos+=2,this.finishToken(9);return}if(this.hasPlugin("recordAndTuple")&&l===93){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(D.TupleExpressionBarIncorrectEndSyntaxType,this.state.curPosition());this.state.pos+=2,this.finishToken(4);return}}if(l===61){this.finishOp(30,2);return}this.finishOp(d===124?43:45,1)}readToken_caret(){let d=this.input.charCodeAt(this.state.pos+1);d===61&&!this.state.inType?this.finishOp(32,2):d===94&&this.hasPlugin(["pipelineOperator",{proposal:"hack",topicToken:"^^"}])?(this.finishOp(37,2),this.input.codePointAt(this.state.pos)===94&&this.unexpected()):this.finishOp(44,1)}readToken_atSign(){this.input.charCodeAt(this.state.pos+1)===64&&this.hasPlugin(["pipelineOperator",{proposal:"hack",topicToken:"@@"}])?this.finishOp(38,2):this.finishOp(26,1)}readToken_plus_min(d){let l=this.input.charCodeAt(this.state.pos+1);if(l===d){this.finishOp(34,2);return}l===61?this.finishOp(30,2):this.finishOp(53,1)}readToken_lt(){let{pos:d}=this.state,l=this.input.charCodeAt(d+1);if(l===60){if(this.input.charCodeAt(d+2)===61){this.finishOp(30,3);return}this.finishOp(51,2);return}if(l===61){this.finishOp(49,2);return}this.finishOp(47,1)}readToken_gt(){let{pos:d}=this.state,l=this.input.charCodeAt(d+1);if(l===62){let u=this.input.charCodeAt(d+2)===62?3:2;if(this.input.charCodeAt(d+u)===61){this.finishOp(30,u+1);return}this.finishOp(52,u);return}if(l===61){this.finishOp(49,2);return}this.finishOp(48,1)}readToken_eq_excl(d){let l=this.input.charCodeAt(this.state.pos+1);if(l===61){this.finishOp(46,this.input.charCodeAt(this.state.pos+2)===61?3:2);return}if(d===61&&l===62){this.state.pos+=2,this.finishToken(19);return}this.finishOp(d===61?29:35,1)}readToken_question(){let d=this.input.charCodeAt(this.state.pos+1),l=this.input.charCodeAt(this.state.pos+2);d===63?l===61?this.finishOp(30,3):this.finishOp(40,2):d===46&&!(l>=48&&l<=57)?(this.state.pos+=2,this.finishToken(18)):(++this.state.pos,this.finishToken(17))}getTokenFromCode(d){switch(d){case 46:this.readToken_dot();return;case 40:++this.state.pos,this.finishToken(10);return;case 41:++this.state.pos,this.finishToken(11);return;case 59:++this.state.pos,this.finishToken(13);return;case 44:++this.state.pos,this.finishToken(12);return;case 91:if(this.hasPlugin("recordAndTuple")&&this.input.charCodeAt(this.state.pos+1)===124){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(D.TupleExpressionBarIncorrectStartSyntaxType,this.state.curPosition());this.state.pos+=2,this.finishToken(2)}else++this.state.pos,this.finishToken(0);return;case 93:++this.state.pos,this.finishToken(3);return;case 123:if(this.hasPlugin("recordAndTuple")&&this.input.charCodeAt(this.state.pos+1)===124){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(D.RecordExpressionBarIncorrectStartSyntaxType,this.state.curPosition());this.state.pos+=2,this.finishToken(6)}else++this.state.pos,this.finishToken(5);return;case 125:++this.state.pos,this.finishToken(8);return;case 58:this.hasPlugin("functionBind")&&this.input.charCodeAt(this.state.pos+1)===58?this.finishOp(15,2):(++this.state.pos,this.finishToken(14));return;case 63:this.readToken_question();return;case 96:this.readTemplateToken();return;case 48:{let l=this.input.charCodeAt(this.state.pos+1);if(l===120||l===88){this.readRadixNumber(16);return}if(l===111||l===79){this.readRadixNumber(8);return}if(l===98||l===66){this.readRadixNumber(2);return}}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:this.readNumber(!1);return;case 34:case 39:this.readString(d);return;case 47:this.readToken_slash();return;case 37:case 42:this.readToken_mult_modulo(d);return;case 124:case 38:this.readToken_pipe_amp(d);return;case 94:this.readToken_caret();return;case 43:case 45:this.readToken_plus_min(d);return;case 60:this.readToken_lt();return;case 62:this.readToken_gt();return;case 61:case 33:this.readToken_eq_excl(d);return;case 126:this.finishOp(36,1);return;case 64:this.readToken_atSign();return;case 35:this.readToken_numberSign();return;case 92:this.readWord();return;default:if(ls(d)){this.readWord(d);return}}throw this.raise(D.InvalidOrUnexpectedToken,this.state.curPosition(),{unexpected:String.fromCodePoint(d)})}finishOp(d,l){let u=this.input.slice(this.state.pos,this.state.pos+l);this.state.pos+=l,this.finishToken(d,u)}readRegexp(){let d=this.state.startLoc,l=this.state.start+1,u,m,{pos:v}=this.state;for(;;++v){if(v>=this.length)throw this.raise(D.UnterminatedRegExp,r(d,1));let L=this.input.charCodeAt(v);if(nd(L))throw this.raise(D.UnterminatedRegExp,r(d,1));if(u)u=!1;else{if(L===91)m=!0;else if(L===93&&m)m=!1;else if(L===47&&!m)break;u=L===92}}let S=this.input.slice(l,v);++v;let w="",P=()=>r(d,v+2-l);for(;v<this.length;){let L=this.codePointAtPos(v),F=String.fromCharCode(L);if(CW.has(L))L===118?w.includes("u")&&this.raise(D.IncompatibleRegExpUVFlags,P()):L===117&&w.includes("v")&&this.raise(D.IncompatibleRegExpUVFlags,P()),w.includes(F)&&this.raise(D.DuplicateRegExpFlags,P());else if(rd(L)||L===92)this.raise(D.MalformedRegExpFlags,P());else break;++v,w+=F}this.state.pos=v,this.finishToken(138,{pattern:S,flags:w})}readInt(d,l,u=!1,m=!0){let{n:v,pos:S}=bP(this.input,this.state.pos,this.state.lineStart,this.state.curLine,d,l,u,m,this.errorHandlers_readInt,!1);return this.state.pos=S,v}readRadixNumber(d){let l=this.state.pos,u=this.state.curPosition(),m=!1;this.state.pos+=2;let v=this.readInt(d);v==null&&this.raise(D.InvalidDigit,r(u,2),{radix:d});let S=this.input.charCodeAt(this.state.pos);if(S===110)++this.state.pos,m=!0;else if(S===109)throw this.raise(D.InvalidDecimal,u);if(ls(this.codePointAtPos(this.state.pos)))throw this.raise(D.NumberIdentifier,this.state.curPosition());if(m){let w=this.input.slice(l,this.state.pos).replace(/[_n]/g,"");this.finishToken(136,w);return}this.finishToken(135,v)}readNumber(d){let l=this.state.pos,u=this.state.curPosition(),m=!1,v=!1,S=!1,w=!1;!d&&this.readInt(10)===null&&this.raise(D.InvalidNumber,this.state.curPosition());let P=this.state.pos-l>=2&&this.input.charCodeAt(l)===48;if(P){let ye=this.input.slice(l,this.state.pos);if(this.recordStrictModeErrors(D.StrictOctalLiteral,u),!this.state.strict){let Ie=ye.indexOf("_");Ie>0&&this.raise(D.ZeroDigitNumericSeparator,r(u,Ie))}w=P&&!/[89]/.test(ye)}let L=this.input.charCodeAt(this.state.pos);if(L===46&&!w&&(++this.state.pos,this.readInt(10),m=!0,L=this.input.charCodeAt(this.state.pos)),(L===69||L===101)&&!w&&(L=this.input.charCodeAt(++this.state.pos),(L===43||L===45)&&++this.state.pos,this.readInt(10)===null&&this.raise(D.InvalidOrMissingExponent,u),m=!0,S=!0,L=this.input.charCodeAt(this.state.pos)),L===110&&((m||P)&&this.raise(D.InvalidBigIntLiteral,u),++this.state.pos,v=!0),L===109){this.expectPlugin("decimal",this.state.curPosition()),(S||P)&&this.raise(D.InvalidDecimal,u),++this.state.pos;var F=!0}if(ls(this.codePointAtPos(this.state.pos)))throw this.raise(D.NumberIdentifier,this.state.curPosition());let G=this.input.slice(l,this.state.pos).replace(/[_mn]/g,"");if(v){this.finishToken(136,G);return}if(F){this.finishToken(137,G);return}let se=w?parseInt(G,8):parseFloat(G);this.finishToken(135,se)}readCodePoint(d){let{code:l,pos:u}=DP(this.input,this.state.pos,this.state.lineStart,this.state.curLine,d,this.errorHandlers_readCodePoint);return this.state.pos=u,l}readString(d){let{str:l,pos:u,curLine:m,lineStart:v}=vP(d===34?"double":"single",this.input,this.state.pos+1,this.state.lineStart,this.state.curLine,this.errorHandlers_readStringContents_string);this.state.pos=u+1,this.state.lineStart=v,this.state.curLine=m,this.finishToken(134,l)}readTemplateContinuation(){this.match(8)||this.unexpected(null,8),this.state.pos--,this.readTemplateToken()}readTemplateToken(){let d=this.input[this.state.pos],{str:l,firstInvalidLoc:u,pos:m,curLine:v,lineStart:S}=vP("template",this.input,this.state.pos+1,this.state.lineStart,this.state.curLine,this.errorHandlers_readStringContents_template);this.state.pos=m+1,this.state.lineStart=S,this.state.curLine=v,u&&(this.state.firstInvalidTemplateEscapePos=new t(u.curLine,u.pos-u.lineStart,this.sourceToOffsetPos(u.pos))),this.input.codePointAt(m)===96?this.finishToken(24,u?null:d+l+"`"):(this.state.pos++,this.finishToken(25,u?null:d+l+"${"))}recordStrictModeErrors(d,l){let u=l.index;this.state.strict&&!this.state.strictErrors.has(u)?this.raise(d,l):this.state.strictErrors.set(u,[d,l])}readWord1(d){this.state.containsEsc=!1;let l="",u=this.state.pos,m=this.state.pos;for(d!==void 0&&(this.state.pos+=d<=65535?1:2);this.state.pos<this.length;){let v=this.codePointAtPos(this.state.pos);if(rd(v))this.state.pos+=v<=65535?1:2;else if(v===92){this.state.containsEsc=!0,l+=this.input.slice(m,this.state.pos);let S=this.state.curPosition(),w=this.state.pos===u?ls:rd;if(this.input.charCodeAt(++this.state.pos)!==117){this.raise(D.MissingUnicodeEscape,this.state.curPosition()),m=this.state.pos-1;continue}++this.state.pos;let P=this.readCodePoint(!0);P!==null&&(w(P)||this.raise(D.EscapedCharNotAnIdentifier,S),l+=String.fromCodePoint(P)),m=this.state.pos}else break}return l+this.input.slice(m,this.state.pos)}readWord(d){let l=this.readWord1(d),u=bo.get(l);u!==void 0?this.finishToken(u,_a(u)):this.finishToken(132,l)}checkKeywordEscapes(){let{type:d}=this.state;pC(d)&&this.state.containsEsc&&this.raise(D.InvalidEscapedReservedWord,this.state.startLoc,{reservedWord:_a(d)})}raise(d,l,u={}){let m=l instanceof t?l:l.loc.start,v=d(m,u);if(!(this.optionFlags&1024))throw v;return this.isLookahead||this.state.errors.push(v),v}raiseOverwrite(d,l,u={}){let m=l instanceof t?l:l.loc.start,v=m.index,S=this.state.errors;for(let w=S.length-1;w>=0;w--){let P=S[w];if(P.loc.index===v)return S[w]=d(m,u);if(P.loc.index<v)break}return this.raise(d,l,u)}updateContext(d){}unexpected(d,l){throw this.raise(D.UnexpectedToken,d??this.state.startLoc,{expected:l?_a(l):null})}expectPlugin(d,l){if(this.hasPlugin(d))return!0;throw this.raise(D.MissingPlugin,l??this.state.startLoc,{missingPlugin:[d]})}expectOnePlugin(d){if(!d.some(l=>this.hasPlugin(l)))throw this.raise(D.MissingOneOfPlugins,this.state.startLoc,{missingPlugin:d})}errorBuilder(d){return(l,u,m)=>{this.raise(d,Lh(l,u,m))}}},SW=class{constructor(){this.privateNames=new Set,this.loneAccessors=new Map,this.undefinedPrivateNames=new Map}},wW=class{constructor(d){this.parser=void 0,this.stack=[],this.undefinedPrivateNames=new Map,this.parser=d}current(){return this.stack[this.stack.length-1]}enter(){this.stack.push(new SW)}exit(){let d=this.stack.pop(),l=this.current();for(let[u,m]of Array.from(d.undefinedPrivateNames))l?l.undefinedPrivateNames.has(u)||l.undefinedPrivateNames.set(u,m):this.parser.raise(D.InvalidPrivateFieldResolution,m,{identifierName:u})}declarePrivateName(d,l,u){let{privateNames:m,loneAccessors:v,undefinedPrivateNames:S}=this.current(),w=m.has(d);if(l&3){let P=w&&v.get(d);if(P){let L=P&4,F=l&4,G=P&3,se=l&3;w=G===se||L!==F,w||v.delete(d)}else w||v.set(d,l)}w&&this.parser.raise(D.PrivateNameRedeclaration,u,{identifierName:d}),m.add(d),S.delete(d)}usePrivateName(d,l){let u;for(u of this.stack)if(u.privateNames.has(d))return;u?u.undefinedPrivateNames.set(d,l):this.parser.raise(D.InvalidPrivateFieldResolution,l,{identifierName:d})}},qg=class{constructor(d=0){this.type=d}canBeArrowParameterDeclaration(){return this.type===2||this.type===1}isCertainlyParameterDeclaration(){return this.type===3}},CP=class extends qg{constructor(d){super(d),this.declarationErrors=new Map}recordDeclarationError(d,l){let u=l.index;this.declarationErrors.set(u,[d,l])}clearDeclarationError(d){this.declarationErrors.delete(d)}iterateErrors(d){this.declarationErrors.forEach(d)}},EW=class{constructor(d){this.parser=void 0,this.stack=[new qg],this.parser=d}enter(d){this.stack.push(d)}exit(){this.stack.pop()}recordParameterInitializerError(d,l){let u=l.loc.start,{stack:m}=this,v=m.length-1,S=m[v];for(;!S.isCertainlyParameterDeclaration();){if(S.canBeArrowParameterDeclaration())S.recordDeclarationError(d,u);else return;S=m[--v]}this.parser.raise(d,u)}recordArrowParameterBindingError(d,l){let{stack:u}=this,m=u[u.length-1],v=l.loc.start;if(m.isCertainlyParameterDeclaration())this.parser.raise(d,v);else if(m.canBeArrowParameterDeclaration())m.recordDeclarationError(d,v);else return}recordAsyncArrowParametersError(d){let{stack:l}=this,u=l.length-1,m=l[u];for(;m.canBeArrowParameterDeclaration();)m.type===2&&m.recordDeclarationError(D.AwaitBindingIdentifier,d),m=l[--u]}validateAsPattern(){let{stack:d}=this,l=d[d.length-1];l.canBeArrowParameterDeclaration()&&l.iterateErrors(([u,m])=>{this.parser.raise(u,m);let v=d.length-2,S=d[v];for(;S.canBeArrowParameterDeclaration();)S.clearDeclarationError(m.index),S=d[--v]})}};function AW(){return new qg(3)}function TW(){return new CP(1)}function IW(){return new CP(2)}function xP(){return new qg}var PW=class{constructor(){this.stacks=[]}enter(d){this.stacks.push(d)}exit(){this.stacks.pop()}currentFlags(){return this.stacks[this.stacks.length-1]}get hasAwait(){return(this.currentFlags()&2)>0}get hasYield(){return(this.currentFlags()&1)>0}get hasReturn(){return(this.currentFlags()&4)>0}get hasIn(){return(this.currentFlags()&8)>0}};function Kg(d,l){return(d?2:0)|(l?1:0)}var kW=class extends xW{addExtra(d,l,u,m=!0){if(!d)return;let{extra:v}=d;v==null&&(v={},d.extra=v),m?v[l]=u:Object.defineProperty(v,l,{enumerable:m,value:u})}isContextual(d){return this.state.type===d&&!this.state.containsEsc}isUnparsedContextual(d,l){let u=d+l.length;if(this.input.slice(d,u)===l){let m=this.input.charCodeAt(u);return!(rd(m)||(m&64512)===55296)}return!1}isLookaheadContextual(d){let l=this.nextTokenStart();return this.isUnparsedContextual(l,d)}eatContextual(d){return this.isContextual(d)?(this.next(),!0):!1}expectContextual(d,l){if(!this.eatContextual(d)){if(l!=null)throw this.raise(l,this.state.startLoc);this.unexpected(null,d)}}canInsertSemicolon(){return this.match(140)||this.match(8)||this.hasPrecedingLineBreak()}hasPrecedingLineBreak(){return _P(this.input,this.offsetToSourcePos(this.state.lastTokEndLoc.index),this.state.start)}hasFollowingLineBreak(){return _P(this.input,this.state.end,this.nextTokenStart())}isLineTerminator(){return this.eat(13)||this.canInsertSemicolon()}semicolon(d=!0){(d?this.isLineTerminator():this.eat(13))||this.raise(D.MissingSemicolon,this.state.lastTokEndLoc)}expect(d,l){this.eat(d)||this.unexpected(l,d)}tryParse(d,l=this.state.clone()){let u={node:null};try{let m=d((v=null)=>{throw u.node=v,u});if(this.state.errors.length>l.errors.length){let v=this.state;return this.state=l,this.state.tokensLength=v.tokensLength,{node:m,error:v.errors[l.errors.length],thrown:!1,aborted:!1,failState:v}}return{node:m,error:null,thrown:!1,aborted:!1,failState:null}}catch(m){let v=this.state;if(this.state=l,m instanceof SyntaxError)return{node:null,error:m,thrown:!0,aborted:!1,failState:v};if(m===u)return{node:u.node,error:null,thrown:!1,aborted:!0,failState:v};throw m}}checkExpressionErrors(d,l){if(!d)return!1;let{shorthandAssignLoc:u,doubleProtoLoc:m,privateKeyLoc:v,optionalParametersLoc:S}=d,w=!!u||!!m||!!S||!!v;if(!l)return w;u!=null&&this.raise(D.InvalidCoverInitializedName,u),m!=null&&this.raise(D.DuplicateProto,m),v!=null&&this.raise(D.UnexpectedPrivateField,v),S!=null&&this.unexpected(S)}isLiteralPropertyName(){return lP(this.state.type)}isPrivateName(d){return d.type==="PrivateName"}getPrivateNameSV(d){return d.id.name}hasPropertyAsPrivateName(d){return(d.type==="MemberExpression"||d.type==="OptionalMemberExpression")&&this.isPrivateName(d.property)}isObjectProperty(d){return d.type==="ObjectProperty"}isObjectMethod(d){return d.type==="ObjectMethod"}initializeScopes(d=this.options.sourceType==="module"){let l=this.state.labels;this.state.labels=[];let u=this.exportedIdentifiers;this.exportedIdentifiers=new Set;let m=this.inModule;this.inModule=d;let v=this.scope,S=this.getScopeHandler();this.scope=new S(this,d);let w=this.prodParam;this.prodParam=new PW;let P=this.classScope;this.classScope=new wW(this);let L=this.expressionScope;return this.expressionScope=new EW(this),()=>{this.state.labels=l,this.exportedIdentifiers=u,this.inModule=m,this.scope=v,this.prodParam=w,this.classScope=P,this.expressionScope=L}}enterInitialScopes(){let d=0;this.inModule&&(d|=2),this.scope.enter(1),this.prodParam.enter(d)}checkDestructuringPrivate(d){let{privateKeyLoc:l}=d;l!==null&&this.expectPlugin("destructuringPrivate",l)}},$g=class{constructor(){this.shorthandAssignLoc=null,this.doubleProtoLoc=null,this.privateKeyLoc=null,this.optionalParametersLoc=null}},Gg=class{constructor(d,l,u){this.type="",this.start=l,this.end=0,this.loc=new o(u),d?.optionFlags&64&&(this.range=[l,0]),d!=null&&d.filename&&(this.loc.filename=d.filename)}},CC=Gg.prototype;CC.__clone=function(){let d=new Gg(void 0,this.start,this.loc.start),l=Object.keys(this);for(let u=0,m=l.length;u<m;u++){let v=l[u];v!=="leadingComments"&&v!=="trailingComments"&&v!=="innerComments"&&(d[v]=this[v])}return d};function FW(d){return cs(d)}function cs(d){let{type:l,start:u,end:m,loc:v,range:S,extra:w,name:P}=d,L=Object.create(CC);return L.type=l,L.start=u,L.end=m,L.loc=v,L.range=S,L.extra=w,L.name=P,l==="Placeholder"&&(L.expectedNode=d.expectedNode),L}function LW(d){let{type:l,start:u,end:m,loc:v,range:S,extra:w}=d;if(l==="Placeholder")return FW(d);let P=Object.create(CC);return P.type=l,P.start=u,P.end=m,P.loc=v,P.range=S,d.raw!==void 0?P.raw=d.raw:P.extra=w,P.value=d.value,P}var NW=class extends kW{startNode(){let d=this.state.startLoc;return new Gg(this,d.index,d)}startNodeAt(d){return new Gg(this,d.index,d)}startNodeAtNode(d){return this.startNodeAt(d.loc.start)}finishNode(d,l){return this.finishNodeAt(d,l,this.state.lastTokEndLoc)}finishNodeAt(d,l,u){return d.type=l,d.end=u.index,d.loc.end=u,this.optionFlags&64&&(d.range[1]=u.index),this.optionFlags&2048&&this.processComment(d),d}resetStartLocation(d,l){d.start=l.index,d.loc.start=l,this.optionFlags&64&&(d.range[0]=l.index)}resetEndLocation(d,l=this.state.lastTokEndLoc){d.end=l.index,d.loc.end=l,this.optionFlags&64&&(d.range[1]=l.index)}resetStartLocationFromNode(d,l){this.resetStartLocation(d,l.loc.start)}},MW=new Set(["_","any","bool","boolean","empty","extends","false","interface","mixed","null","number","static","string","true","typeof","void"]),Be=x`flow`({AmbiguousConditionalArrow:"Ambiguous expression: wrap the arrow functions in parentheses to disambiguate.",AmbiguousDeclareModuleKind:"Found both `declare module.exports` and `declare export` in the same module. Modules can only have 1 since they are either an ES module or they are a CommonJS module.",AssignReservedType:({reservedType:d})=>`Cannot overwrite reserved type ${d}.`,DeclareClassElement:"The `declare` modifier can only appear on class fields.",DeclareClassFieldInitializer:"Initializers are not allowed in fields with the `declare` modifier.",DuplicateDeclareModuleExports:"Duplicate `declare module.exports` statement.",EnumBooleanMemberNotInitialized:({memberName:d,enumName:l})=>`Boolean enum members need to be initialized. Use either \`${d} = true,\` or \`${d} = false,\` in enum \`${l}\`.`,EnumDuplicateMemberName:({memberName:d,enumName:l})=>`Enum member names need to be unique, but the name \`${d}\` has already been used before in enum \`${l}\`.`,EnumInconsistentMemberValues:({enumName:d})=>`Enum \`${d}\` has inconsistent member initializers. Either use no initializers, or consistently use literals (either booleans, numbers, or strings) for all member initializers.`,EnumInvalidExplicitType:({invalidEnumType:d,enumName:l})=>`Enum type \`${d}\` is not valid. Use one of \`boolean\`, \`number\`, \`string\`, or \`symbol\` in enum \`${l}\`.`,EnumInvalidExplicitTypeUnknownSupplied:({enumName:d})=>`Supplied enum type is not valid. Use one of \`boolean\`, \`number\`, \`string\`, or \`symbol\` in enum \`${d}\`.`,EnumInvalidMemberInitializerPrimaryType:({enumName:d,memberName:l,explicitType:u})=>`Enum \`${d}\` has type \`${u}\`, so the initializer of \`${l}\` needs to be a ${u} literal.`,EnumInvalidMemberInitializerSymbolType:({enumName:d,memberName:l})=>`Symbol enum members cannot be initialized. Use \`${l},\` in enum \`${d}\`.`,EnumInvalidMemberInitializerUnknownType:({enumName:d,memberName:l})=>`The enum member initializer for \`${l}\` needs to be a literal (either a boolean, number, or string) in enum \`${d}\`.`,EnumInvalidMemberName:({enumName:d,memberName:l,suggestion:u})=>`Enum member names cannot start with lowercase 'a' through 'z'. Instead of using \`${l}\`, consider using \`${u}\`, in enum \`${d}\`.`,EnumNumberMemberNotInitialized:({enumName:d,memberName:l})=>`Number enum members need to be initialized, e.g. \`${l} = 1\` in enum \`${d}\`.`,EnumStringMemberInconsistentlyInitialized:({enumName:d})=>`String enum members need to consistently either all use initializers, or use no initializers, in enum \`${d}\`.`,GetterMayNotHaveThisParam:"A getter cannot have a `this` parameter.",ImportReflectionHasImportType:"An `import module` declaration can not use `type` or `typeof` keyword.",ImportTypeShorthandOnlyInPureImport:"The `type` and `typeof` keywords on named imports can only be used on regular `import` statements. It cannot be used with `import type` or `import typeof` statements.",InexactInsideExact:"Explicit inexact syntax cannot appear inside an explicit exact object type.",InexactInsideNonObject:"Explicit inexact syntax cannot appear in class or interface definitions.",InexactVariance:"Explicit inexact syntax cannot have variance.",InvalidNonTypeImportInDeclareModule:"Imports within a `declare module` body must always be `import type` or `import typeof`.",MissingTypeParamDefault:"Type parameter declaration needs a default, since a preceding type parameter declaration has a default.",NestedDeclareModule:"`declare module` cannot be used inside another `declare module`.",NestedFlowComment:"Cannot have a flow comment inside another flow comment.",PatternIsOptional:Object.assign({message:"A binding pattern parameter cannot be optional in an implementation signature."},{reasonCode:"OptionalBindingPattern"}),SetterMayNotHaveThisParam:"A setter cannot have a `this` parameter.",SpreadVariance:"Spread properties cannot have variance.",ThisParamAnnotationRequired:"A type annotation is required for the `this` parameter.",ThisParamBannedInConstructor:"Constructors cannot have a `this` parameter; constructors don't bind `this` like other functions.",ThisParamMayNotBeOptional:"The `this` parameter cannot be optional.",ThisParamMustBeFirst:"The `this` parameter must be the first function parameter.",ThisParamNoDefault:"The `this` parameter may not have a default value.",TypeBeforeInitializer:"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`.",TypeCastInPattern:"The type cast expression is expected to be wrapped with parenthesis.",UnexpectedExplicitInexactInObject:"Explicit inexact syntax must appear at the end of an inexact object.",UnexpectedReservedType:({reservedType:d})=>`Unexpected reserved type ${d}.`,UnexpectedReservedUnderscore:"`_` is only allowed as a type argument to call or new.",UnexpectedSpaceBetweenModuloChecks:"Spaces between `%` and `checks` are not allowed here.",UnexpectedSpreadType:"Spread operator cannot appear in class or interface definitions.",UnexpectedSubtractionOperand:'Unexpected token, expected "number" or "bigint".',UnexpectedTokenAfterTypeParameter:"Expected an arrow function after this type parameter declaration.",UnexpectedTypeParameterBeforeAsyncArrowFunction:"Type parameters must come after the async keyword, e.g. instead of `<T> async () => {}`, use `async <T>() => {}`.",UnsupportedDeclareExportKind:({unsupportedExportKind:d,suggestion:l})=>`\`declare export ${d}\` is not supported. Use \`${l}\` instead.`,UnsupportedStatementInDeclareModule:"Only declares and type imports are allowed inside declare module.",UnterminatedFlowComment:"Unterminated flow-comment."});function OW(d){return d.type==="DeclareExportAllDeclaration"||d.type==="DeclareExportDeclaration"&&(!d.declaration||d.declaration.type!=="TypeAlias"&&d.declaration.type!=="InterfaceDeclaration")}function SP(d){return d.importKind==="type"||d.importKind==="typeof"}var RW={const:"declare export var",let:"declare export var",type:"export type",interface:"export interface"};function BW(d,l){let u=[],m=[];for(let v=0;v<d.length;v++)(l(d[v],v,d)?u:m).push(d[v]);return[u,m]}var WW=/\*?\s*@((?:no)?flow)\b/,HW=d=>class extends d{constructor(...l){super(...l),this.flowPragma=void 0}getScopeHandler(){return hW}shouldParseTypes(){return this.getPluginOption("flow","all")||this.flowPragma==="flow"}finishToken(l,u){l!==134&&l!==13&&l!==28&&this.flowPragma===void 0&&(this.flowPragma=null),super.finishToken(l,u)}addComment(l){if(this.flowPragma===void 0){let u=WW.exec(l.value);if(u)if(u[1]==="flow")this.flowPragma="flow";else if(u[1]==="noflow")this.flowPragma="noflow";else throw new Error("Unexpected flow pragma")}super.addComment(l)}flowParseTypeInitialiser(l){let u=this.state.inType;this.state.inType=!0,this.expect(l||14);let m=this.flowParseType();return this.state.inType=u,m}flowParsePredicate(){let l=this.startNode(),u=this.state.startLoc;return this.next(),this.expectContextual(110),this.state.lastTokStartLoc.index>u.index+1&&this.raise(Be.UnexpectedSpaceBetweenModuloChecks,u),this.eat(10)?(l.value=super.parseExpression(),this.expect(11),this.finishNode(l,"DeclaredPredicate")):this.finishNode(l,"InferredPredicate")}flowParseTypeAndPredicateInitialiser(){let l=this.state.inType;this.state.inType=!0,this.expect(14);let u=null,m=null;return this.match(54)?(this.state.inType=l,m=this.flowParsePredicate()):(u=this.flowParseType(),this.state.inType=l,this.match(54)&&(m=this.flowParsePredicate())),[u,m]}flowParseDeclareClass(l){return this.next(),this.flowParseInterfaceish(l,!0),this.finishNode(l,"DeclareClass")}flowParseDeclareFunction(l){this.next();let u=l.id=this.parseIdentifier(),m=this.startNode(),v=this.startNode();this.match(47)?m.typeParameters=this.flowParseTypeParameterDeclaration():m.typeParameters=null,this.expect(10);let S=this.flowParseFunctionTypeParams();return m.params=S.params,m.rest=S.rest,m.this=S._this,this.expect(11),[m.returnType,l.predicate]=this.flowParseTypeAndPredicateInitialiser(),v.typeAnnotation=this.finishNode(m,"FunctionTypeAnnotation"),u.typeAnnotation=this.finishNode(v,"TypeAnnotation"),this.resetEndLocation(u),this.semicolon(),this.scope.declareName(l.id.name,2048,l.id.loc.start),this.finishNode(l,"DeclareFunction")}flowParseDeclare(l,u){if(this.match(80))return this.flowParseDeclareClass(l);if(this.match(68))return this.flowParseDeclareFunction(l);if(this.match(74))return this.flowParseDeclareVariable(l);if(this.eatContextual(127))return this.match(16)?this.flowParseDeclareModuleExports(l):(u&&this.raise(Be.NestedDeclareModule,this.state.lastTokStartLoc),this.flowParseDeclareModule(l));if(this.isContextual(130))return this.flowParseDeclareTypeAlias(l);if(this.isContextual(131))return this.flowParseDeclareOpaqueType(l);if(this.isContextual(129))return this.flowParseDeclareInterface(l);if(this.match(82))return this.flowParseDeclareExportDeclaration(l,u);this.unexpected()}flowParseDeclareVariable(l){return this.next(),l.id=this.flowParseTypeAnnotatableIdentifier(!0),this.scope.declareName(l.id.name,5,l.id.loc.start),this.semicolon(),this.finishNode(l,"DeclareVariable")}flowParseDeclareModule(l){this.scope.enter(0),this.match(134)?l.id=super.parseExprAtom():l.id=this.parseIdentifier();let u=l.body=this.startNode(),m=u.body=[];for(this.expect(5);!this.match(8);){let w=this.startNode();this.match(83)?(this.next(),!this.isContextual(130)&&!this.match(87)&&this.raise(Be.InvalidNonTypeImportInDeclareModule,this.state.lastTokStartLoc),super.parseImport(w)):(this.expectContextual(125,Be.UnsupportedStatementInDeclareModule),w=this.flowParseDeclare(w,!0)),m.push(w)}this.scope.exit(),this.expect(8),this.finishNode(u,"BlockStatement");let v=null,S=!1;return m.forEach(w=>{OW(w)?(v==="CommonJS"&&this.raise(Be.AmbiguousDeclareModuleKind,w),v="ES"):w.type==="DeclareModuleExports"&&(S&&this.raise(Be.DuplicateDeclareModuleExports,w),v==="ES"&&this.raise(Be.AmbiguousDeclareModuleKind,w),v="CommonJS",S=!0)}),l.kind=v||"CommonJS",this.finishNode(l,"DeclareModule")}flowParseDeclareExportDeclaration(l,u){if(this.expect(82),this.eat(65))return this.match(68)||this.match(80)?l.declaration=this.flowParseDeclare(this.startNode()):(l.declaration=this.flowParseType(),this.semicolon()),l.default=!0,this.finishNode(l,"DeclareExportDeclaration");if(this.match(75)||this.isLet()||(this.isContextual(130)||this.isContextual(129))&&!u){let m=this.state.value;throw this.raise(Be.UnsupportedDeclareExportKind,this.state.startLoc,{unsupportedExportKind:m,suggestion:RW[m]})}if(this.match(74)||this.match(68)||this.match(80)||this.isContextual(131))return l.declaration=this.flowParseDeclare(this.startNode()),l.default=!1,this.finishNode(l,"DeclareExportDeclaration");if(this.match(55)||this.match(5)||this.isContextual(129)||this.isContextual(130)||this.isContextual(131))return l=this.parseExport(l,null),l.type==="ExportNamedDeclaration"&&(l.type="ExportDeclaration",l.default=!1,delete l.exportKind),l.type="Declare"+l.type,l;this.unexpected()}flowParseDeclareModuleExports(l){return this.next(),this.expectContextual(111),l.typeAnnotation=this.flowParseTypeAnnotation(),this.semicolon(),this.finishNode(l,"DeclareModuleExports")}flowParseDeclareTypeAlias(l){this.next();let u=this.flowParseTypeAlias(l);return u.type="DeclareTypeAlias",u}flowParseDeclareOpaqueType(l){this.next();let u=this.flowParseOpaqueType(l,!0);return u.type="DeclareOpaqueType",u}flowParseDeclareInterface(l){return this.next(),this.flowParseInterfaceish(l,!1),this.finishNode(l,"DeclareInterface")}flowParseInterfaceish(l,u){if(l.id=this.flowParseRestrictedIdentifier(!u,!0),this.scope.declareName(l.id.name,u?17:8201,l.id.loc.start),this.match(47)?l.typeParameters=this.flowParseTypeParameterDeclaration():l.typeParameters=null,l.extends=[],this.eat(81))do l.extends.push(this.flowParseInterfaceExtends());while(!u&&this.eat(12));if(u){if(l.implements=[],l.mixins=[],this.eatContextual(117))do l.mixins.push(this.flowParseInterfaceExtends());while(this.eat(12));if(this.eatContextual(113))do l.implements.push(this.flowParseInterfaceExtends());while(this.eat(12))}l.body=this.flowParseObjectType({allowStatic:u,allowExact:!1,allowSpread:!1,allowProto:u,allowInexact:!1})}flowParseInterfaceExtends(){let l=this.startNode();return l.id=this.flowParseQualifiedTypeIdentifier(),this.match(47)?l.typeParameters=this.flowParseTypeParameterInstantiation():l.typeParameters=null,this.finishNode(l,"InterfaceExtends")}flowParseInterface(l){return this.flowParseInterfaceish(l,!1),this.finishNode(l,"InterfaceDeclaration")}checkNotUnderscore(l){l==="_"&&this.raise(Be.UnexpectedReservedUnderscore,this.state.startLoc)}checkReservedType(l,u,m){MW.has(l)&&this.raise(m?Be.AssignReservedType:Be.UnexpectedReservedType,u,{reservedType:l})}flowParseRestrictedIdentifier(l,u){return this.checkReservedType(this.state.value,this.state.startLoc,u),this.parseIdentifier(l)}flowParseTypeAlias(l){return l.id=this.flowParseRestrictedIdentifier(!1,!0),this.scope.declareName(l.id.name,8201,l.id.loc.start),this.match(47)?l.typeParameters=this.flowParseTypeParameterDeclaration():l.typeParameters=null,l.right=this.flowParseTypeInitialiser(29),this.semicolon(),this.finishNode(l,"TypeAlias")}flowParseOpaqueType(l,u){return this.expectContextual(130),l.id=this.flowParseRestrictedIdentifier(!0,!0),this.scope.declareName(l.id.name,8201,l.id.loc.start),this.match(47)?l.typeParameters=this.flowParseTypeParameterDeclaration():l.typeParameters=null,l.supertype=null,this.match(14)&&(l.supertype=this.flowParseTypeInitialiser(14)),l.impltype=null,u||(l.impltype=this.flowParseTypeInitialiser(29)),this.semicolon(),this.finishNode(l,"OpaqueType")}flowParseTypeParameter(l=!1){let u=this.state.startLoc,m=this.startNode(),v=this.flowParseVariance(),S=this.flowParseTypeAnnotatableIdentifier();return m.name=S.name,m.variance=v,m.bound=S.typeAnnotation,this.match(29)?(this.eat(29),m.default=this.flowParseType()):l&&this.raise(Be.MissingTypeParamDefault,u),this.finishNode(m,"TypeParameter")}flowParseTypeParameterDeclaration(){let l=this.state.inType,u=this.startNode();u.params=[],this.state.inType=!0,this.match(47)||this.match(143)?this.next():this.unexpected();let m=!1;do{let v=this.flowParseTypeParameter(m);u.params.push(v),v.default&&(m=!0),this.match(48)||this.expect(12)}while(!this.match(48));return this.expect(48),this.state.inType=l,this.finishNode(u,"TypeParameterDeclaration")}flowInTopLevelContext(l){if(this.curContext()!==$.brace){let u=this.state.context;this.state.context=[u[0]];try{return l()}finally{this.state.context=u}}else return l()}flowParseTypeParameterInstantiationInExpression(){if(this.reScan_lt()===47)return this.flowParseTypeParameterInstantiation()}flowParseTypeParameterInstantiation(){let l=this.startNode(),u=this.state.inType;return this.state.inType=!0,l.params=[],this.flowInTopLevelContext(()=>{this.expect(47);let m=this.state.noAnonFunctionType;for(this.state.noAnonFunctionType=!1;!this.match(48);)l.params.push(this.flowParseType()),this.match(48)||this.expect(12);this.state.noAnonFunctionType=m}),this.state.inType=u,!this.state.inType&&this.curContext()===$.brace&&this.reScan_lt_gt(),this.expect(48),this.finishNode(l,"TypeParameterInstantiation")}flowParseTypeParameterInstantiationCallOrNew(){if(this.reScan_lt()!==47)return;let l=this.startNode(),u=this.state.inType;for(l.params=[],this.state.inType=!0,this.expect(47);!this.match(48);)l.params.push(this.flowParseTypeOrImplicitInstantiation()),this.match(48)||this.expect(12);return this.expect(48),this.state.inType=u,this.finishNode(l,"TypeParameterInstantiation")}flowParseInterfaceType(){let l=this.startNode();if(this.expectContextual(129),l.extends=[],this.eat(81))do l.extends.push(this.flowParseInterfaceExtends());while(this.eat(12));return l.body=this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!1,allowProto:!1,allowInexact:!1}),this.finishNode(l,"InterfaceTypeAnnotation")}flowParseObjectPropertyKey(){return this.match(135)||this.match(134)?super.parseExprAtom():this.parseIdentifier(!0)}flowParseObjectTypeIndexer(l,u,m){return l.static=u,this.lookahead().type===14?(l.id=this.flowParseObjectPropertyKey(),l.key=this.flowParseTypeInitialiser()):(l.id=null,l.key=this.flowParseType()),this.expect(3),l.value=this.flowParseTypeInitialiser(),l.variance=m,this.finishNode(l,"ObjectTypeIndexer")}flowParseObjectTypeInternalSlot(l,u){return l.static=u,l.id=this.flowParseObjectPropertyKey(),this.expect(3),this.expect(3),this.match(47)||this.match(10)?(l.method=!0,l.optional=!1,l.value=this.flowParseObjectTypeMethodish(this.startNodeAt(l.loc.start))):(l.method=!1,this.eat(17)&&(l.optional=!0),l.value=this.flowParseTypeInitialiser()),this.finishNode(l,"ObjectTypeInternalSlot")}flowParseObjectTypeMethodish(l){for(l.params=[],l.rest=null,l.typeParameters=null,l.this=null,this.match(47)&&(l.typeParameters=this.flowParseTypeParameterDeclaration()),this.expect(10),this.match(78)&&(l.this=this.flowParseFunctionTypeParam(!0),l.this.name=null,this.match(11)||this.expect(12));!this.match(11)&&!this.match(21);)l.params.push(this.flowParseFunctionTypeParam(!1)),this.match(11)||this.expect(12);return this.eat(21)&&(l.rest=this.flowParseFunctionTypeParam(!1)),this.expect(11),l.returnType=this.flowParseTypeInitialiser(),this.finishNode(l,"FunctionTypeAnnotation")}flowParseObjectTypeCallProperty(l,u){let m=this.startNode();return l.static=u,l.value=this.flowParseObjectTypeMethodish(m),this.finishNode(l,"ObjectTypeCallProperty")}flowParseObjectType({allowStatic:l,allowExact:u,allowSpread:m,allowProto:v,allowInexact:S}){let w=this.state.inType;this.state.inType=!0;let P=this.startNode();P.callProperties=[],P.properties=[],P.indexers=[],P.internalSlots=[];let L,F,G=!1;for(u&&this.match(6)?(this.expect(6),L=9,F=!0):(this.expect(5),L=8,F=!1),P.exact=F;!this.match(L);){let ye=!1,Ie=null,dt=null,vi=this.startNode();if(v&&this.isContextual(118)){let bi=this.lookahead();bi.type!==14&&bi.type!==17&&(this.next(),Ie=this.state.startLoc,l=!1)}if(l&&this.isContextual(106)){let bi=this.lookahead();bi.type!==14&&bi.type!==17&&(this.next(),ye=!0)}let At=this.flowParseVariance();if(this.eat(0))Ie!=null&&this.unexpected(Ie),this.eat(0)?(At&&this.unexpected(At.loc.start),P.internalSlots.push(this.flowParseObjectTypeInternalSlot(vi,ye))):P.indexers.push(this.flowParseObjectTypeIndexer(vi,ye,At));else if(this.match(10)||this.match(47))Ie!=null&&this.unexpected(Ie),At&&this.unexpected(At.loc.start),P.callProperties.push(this.flowParseObjectTypeCallProperty(vi,ye));else{let bi="init";if(this.isContextual(99)||this.isContextual(104)){let wC=this.lookahead();lP(wC.type)&&(bi=this.state.value,this.next())}let Jo=this.flowParseObjectTypeProperty(vi,ye,Ie,At,bi,m,S??!F);Jo===null?(G=!0,dt=this.state.lastTokStartLoc):P.properties.push(Jo)}this.flowObjectTypeSemicolon(),dt&&!this.match(8)&&!this.match(9)&&this.raise(Be.UnexpectedExplicitInexactInObject,dt)}this.expect(L),m&&(P.inexact=G);let se=this.finishNode(P,"ObjectTypeAnnotation");return this.state.inType=w,se}flowParseObjectTypeProperty(l,u,m,v,S,w,P){if(this.eat(21))return this.match(12)||this.match(13)||this.match(8)||this.match(9)?(w?P||this.raise(Be.InexactInsideExact,this.state.lastTokStartLoc):this.raise(Be.InexactInsideNonObject,this.state.lastTokStartLoc),v&&this.raise(Be.InexactVariance,v),null):(w||this.raise(Be.UnexpectedSpreadType,this.state.lastTokStartLoc),m!=null&&this.unexpected(m),v&&this.raise(Be.SpreadVariance,v),l.argument=this.flowParseType(),this.finishNode(l,"ObjectTypeSpreadProperty"));{l.key=this.flowParseObjectPropertyKey(),l.static=u,l.proto=m!=null,l.kind=S;let L=!1;return this.match(47)||this.match(10)?(l.method=!0,m!=null&&this.unexpected(m),v&&this.unexpected(v.loc.start),l.value=this.flowParseObjectTypeMethodish(this.startNodeAt(l.loc.start)),(S==="get"||S==="set")&&this.flowCheckGetterSetterParams(l),!w&&l.key.name==="constructor"&&l.value.this&&this.raise(Be.ThisParamBannedInConstructor,l.value.this)):(S!=="init"&&this.unexpected(),l.method=!1,this.eat(17)&&(L=!0),l.value=this.flowParseTypeInitialiser(),l.variance=v),l.optional=L,this.finishNode(l,"ObjectTypeProperty")}}flowCheckGetterSetterParams(l){let u=l.kind==="get"?0:1,m=l.value.params.length+(l.value.rest?1:0);l.value.this&&this.raise(l.kind==="get"?Be.GetterMayNotHaveThisParam:Be.SetterMayNotHaveThisParam,l.value.this),m!==u&&this.raise(l.kind==="get"?D.BadGetterArity:D.BadSetterArity,l),l.kind==="set"&&l.value.rest&&this.raise(D.BadSetterRestParameter,l)}flowObjectTypeSemicolon(){!this.eat(13)&&!this.eat(12)&&!this.match(8)&&!this.match(9)&&this.unexpected()}flowParseQualifiedTypeIdentifier(l,u){var m;(m=l)!=null||(l=this.state.startLoc);let v=u||this.flowParseRestrictedIdentifier(!0);for(;this.eat(16);){let S=this.startNodeAt(l);S.qualification=v,S.id=this.flowParseRestrictedIdentifier(!0),v=this.finishNode(S,"QualifiedTypeIdentifier")}return v}flowParseGenericType(l,u){let m=this.startNodeAt(l);return m.typeParameters=null,m.id=this.flowParseQualifiedTypeIdentifier(l,u),this.match(47)&&(m.typeParameters=this.flowParseTypeParameterInstantiation()),this.finishNode(m,"GenericTypeAnnotation")}flowParseTypeofType(){let l=this.startNode();return this.expect(87),l.argument=this.flowParsePrimaryType(),this.finishNode(l,"TypeofTypeAnnotation")}flowParseTupleType(){let l=this.startNode();for(l.types=[],this.expect(0);this.state.pos<this.length&&!this.match(3)&&(l.types.push(this.flowParseType()),!this.match(3));)this.expect(12);return this.expect(3),this.finishNode(l,"TupleTypeAnnotation")}flowParseFunctionTypeParam(l){let u=null,m=!1,v=null,S=this.startNode(),w=this.lookahead(),P=this.state.type===78;return w.type===14||w.type===17?(P&&!l&&this.raise(Be.ThisParamMustBeFirst,S),u=this.parseIdentifier(P),this.eat(17)&&(m=!0,P&&this.raise(Be.ThisParamMayNotBeOptional,S)),v=this.flowParseTypeInitialiser()):v=this.flowParseType(),S.name=u,S.optional=m,S.typeAnnotation=v,this.finishNode(S,"FunctionTypeParam")}reinterpretTypeAsFunctionTypeParam(l){let u=this.startNodeAt(l.loc.start);return u.name=null,u.optional=!1,u.typeAnnotation=l,this.finishNode(u,"FunctionTypeParam")}flowParseFunctionTypeParams(l=[]){let u=null,m=null;for(this.match(78)&&(m=this.flowParseFunctionTypeParam(!0),m.name=null,this.match(11)||this.expect(12));!this.match(11)&&!this.match(21);)l.push(this.flowParseFunctionTypeParam(!1)),this.match(11)||this.expect(12);return this.eat(21)&&(u=this.flowParseFunctionTypeParam(!1)),{params:l,rest:u,_this:m}}flowIdentToTypeAnnotation(l,u,m){switch(m.name){case"any":return this.finishNode(u,"AnyTypeAnnotation");case"bool":case"boolean":return this.finishNode(u,"BooleanTypeAnnotation");case"mixed":return this.finishNode(u,"MixedTypeAnnotation");case"empty":return this.finishNode(u,"EmptyTypeAnnotation");case"number":return this.finishNode(u,"NumberTypeAnnotation");case"string":return this.finishNode(u,"StringTypeAnnotation");case"symbol":return this.finishNode(u,"SymbolTypeAnnotation");default:return this.checkNotUnderscore(m.name),this.flowParseGenericType(l,m)}}flowParsePrimaryType(){let l=this.state.startLoc,u=this.startNode(),m,v,S=!1,w=this.state.noAnonFunctionType;switch(this.state.type){case 5:return this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!0,allowProto:!1,allowInexact:!0});case 6:return this.flowParseObjectType({allowStatic:!1,allowExact:!0,allowSpread:!0,allowProto:!1,allowInexact:!1});case 0:return this.state.noAnonFunctionType=!1,v=this.flowParseTupleType(),this.state.noAnonFunctionType=w,v;case 47:{let P=this.startNode();return P.typeParameters=this.flowParseTypeParameterDeclaration(),this.expect(10),m=this.flowParseFunctionTypeParams(),P.params=m.params,P.rest=m.rest,P.this=m._this,this.expect(11),this.expect(19),P.returnType=this.flowParseType(),this.finishNode(P,"FunctionTypeAnnotation")}case 10:{let P=this.startNode();if(this.next(),!this.match(11)&&!this.match(21))if(vt(this.state.type)||this.match(78)){let L=this.lookahead().type;S=L!==17&&L!==14}else S=!0;if(S){if(this.state.noAnonFunctionType=!1,v=this.flowParseType(),this.state.noAnonFunctionType=w,this.state.noAnonFunctionType||!(this.match(12)||this.match(11)&&this.lookahead().type===19))return this.expect(11),v;this.eat(12)}return v?m=this.flowParseFunctionTypeParams([this.reinterpretTypeAsFunctionTypeParam(v)]):m=this.flowParseFunctionTypeParams(),P.params=m.params,P.rest=m.rest,P.this=m._this,this.expect(11),this.expect(19),P.returnType=this.flowParseType(),P.typeParameters=null,this.finishNode(P,"FunctionTypeAnnotation")}case 134:return this.parseLiteral(this.state.value,"StringLiteralTypeAnnotation");case 85:case 86:return u.value=this.match(85),this.next(),this.finishNode(u,"BooleanLiteralTypeAnnotation");case 53:if(this.state.value==="-"){if(this.next(),this.match(135))return this.parseLiteralAtNode(-this.state.value,"NumberLiteralTypeAnnotation",u);if(this.match(136))return this.parseLiteralAtNode(-this.state.value,"BigIntLiteralTypeAnnotation",u);throw this.raise(Be.UnexpectedSubtractionOperand,this.state.startLoc)}this.unexpected();return;case 135:return this.parseLiteral(this.state.value,"NumberLiteralTypeAnnotation");case 136:return this.parseLiteral(this.state.value,"BigIntLiteralTypeAnnotation");case 88:return this.next(),this.finishNode(u,"VoidTypeAnnotation");case 84:return this.next(),this.finishNode(u,"NullLiteralTypeAnnotation");case 78:return this.next(),this.finishNode(u,"ThisTypeAnnotation");case 55:return this.next(),this.finishNode(u,"ExistsTypeAnnotation");case 87:return this.flowParseTypeofType();default:if(pC(this.state.type)){let P=_a(this.state.type);return this.next(),super.createIdentifier(u,P)}else if(vt(this.state.type))return this.isContextual(129)?this.flowParseInterfaceType():this.flowIdentToTypeAnnotation(l,u,this.parseIdentifier())}this.unexpected()}flowParsePostfixType(){let l=this.state.startLoc,u=this.flowParsePrimaryType(),m=!1;for(;(this.match(0)||this.match(18))&&!this.canInsertSemicolon();){let v=this.startNodeAt(l),S=this.eat(18);m=m||S,this.expect(0),!S&&this.match(3)?(v.elementType=u,this.next(),u=this.finishNode(v,"ArrayTypeAnnotation")):(v.objectType=u,v.indexType=this.flowParseType(),this.expect(3),m?(v.optional=S,u=this.finishNode(v,"OptionalIndexedAccessType")):u=this.finishNode(v,"IndexedAccessType"))}return u}flowParsePrefixType(){let l=this.startNode();return this.eat(17)?(l.typeAnnotation=this.flowParsePrefixType(),this.finishNode(l,"NullableTypeAnnotation")):this.flowParsePostfixType()}flowParseAnonFunctionWithoutParens(){let l=this.flowParsePrefixType();if(!this.state.noAnonFunctionType&&this.eat(19)){let u=this.startNodeAt(l.loc.start);return u.params=[this.reinterpretTypeAsFunctionTypeParam(l)],u.rest=null,u.this=null,u.returnType=this.flowParseType(),u.typeParameters=null,this.finishNode(u,"FunctionTypeAnnotation")}return l}flowParseIntersectionType(){let l=this.startNode();this.eat(45);let u=this.flowParseAnonFunctionWithoutParens();for(l.types=[u];this.eat(45);)l.types.push(this.flowParseAnonFunctionWithoutParens());return l.types.length===1?u:this.finishNode(l,"IntersectionTypeAnnotation")}flowParseUnionType(){let l=this.startNode();this.eat(43);let u=this.flowParseIntersectionType();for(l.types=[u];this.eat(43);)l.types.push(this.flowParseIntersectionType());return l.types.length===1?u:this.finishNode(l,"UnionTypeAnnotation")}flowParseType(){let l=this.state.inType;this.state.inType=!0;let u=this.flowParseUnionType();return this.state.inType=l,u}flowParseTypeOrImplicitInstantiation(){if(this.state.type===132&&this.state.value==="_"){let l=this.state.startLoc,u=this.parseIdentifier();return this.flowParseGenericType(l,u)}else return this.flowParseType()}flowParseTypeAnnotation(){let l=this.startNode();return l.typeAnnotation=this.flowParseTypeInitialiser(),this.finishNode(l,"TypeAnnotation")}flowParseTypeAnnotatableIdentifier(l){let u=l?this.parseIdentifier():this.flowParseRestrictedIdentifier();return this.match(14)&&(u.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(u)),u}typeCastToParameter(l){return l.expression.typeAnnotation=l.typeAnnotation,this.resetEndLocation(l.expression,l.typeAnnotation.loc.end),l.expression}flowParseVariance(){let l=null;return this.match(53)?(l=this.startNode(),this.state.value==="+"?l.kind="plus":l.kind="minus",this.next(),this.finishNode(l,"Variance")):l}parseFunctionBody(l,u,m=!1){if(u){this.forwardNoArrowParamsConversionAt(l,()=>super.parseFunctionBody(l,!0,m));return}super.parseFunctionBody(l,!1,m)}parseFunctionBodyAndFinish(l,u,m=!1){if(this.match(14)){let v=this.startNode();[v.typeAnnotation,l.predicate]=this.flowParseTypeAndPredicateInitialiser(),l.returnType=v.typeAnnotation?this.finishNode(v,"TypeAnnotation"):null}return super.parseFunctionBodyAndFinish(l,u,m)}parseStatementLike(l){if(this.state.strict&&this.isContextual(129)){let m=this.lookahead();if(ni(m.type)){let v=this.startNode();return this.next(),this.flowParseInterface(v)}}else if(this.isContextual(126)){let m=this.startNode();return this.next(),this.flowParseEnumDeclaration(m)}let u=super.parseStatementLike(l);return this.flowPragma===void 0&&!this.isValidDirective(u)&&(this.flowPragma=null),u}parseExpressionStatement(l,u,m){if(u.type==="Identifier"){if(u.name==="declare"){if(this.match(80)||vt(this.state.type)||this.match(68)||this.match(74)||this.match(82))return this.flowParseDeclare(l)}else if(vt(this.state.type)){if(u.name==="interface")return this.flowParseInterface(l);if(u.name==="type")return this.flowParseTypeAlias(l);if(u.name==="opaque")return this.flowParseOpaqueType(l,!1)}}return super.parseExpressionStatement(l,u,m)}shouldParseExportDeclaration(){let{type:l}=this.state;return l===126||cP(l)?!this.state.containsEsc:super.shouldParseExportDeclaration()}isExportDefaultSpecifier(){let{type:l}=this.state;return l===126||cP(l)?this.state.containsEsc:super.isExportDefaultSpecifier()}parseExportDefaultExpression(){if(this.isContextual(126)){let l=this.startNode();return this.next(),this.flowParseEnumDeclaration(l)}return super.parseExportDefaultExpression()}parseConditional(l,u,m){if(!this.match(17))return l;if(this.state.maybeInArrowParameters){let se=this.lookaheadCharCode();if(se===44||se===61||se===58||se===41)return this.setOptionalParametersError(m),l}this.expect(17);let v=this.state.clone(),S=this.state.noArrowAt,w=this.startNodeAt(u),{consequent:P,failed:L}=this.tryParseConditionalConsequent(),[F,G]=this.getArrowLikeExpressions(P);if(L||G.length>0){let se=[...S];if(G.length>0){this.state=v,this.state.noArrowAt=se;for(let ye=0;ye<G.length;ye++)se.push(G[ye].start);({consequent:P,failed:L}=this.tryParseConditionalConsequent()),[F,G]=this.getArrowLikeExpressions(P)}L&&F.length>1&&this.raise(Be.AmbiguousConditionalArrow,v.startLoc),L&&F.length===1&&(this.state=v,se.push(F[0].start),this.state.noArrowAt=se,{consequent:P,failed:L}=this.tryParseConditionalConsequent())}return this.getArrowLikeExpressions(P,!0),this.state.noArrowAt=S,this.expect(14),w.test=l,w.consequent=P,w.alternate=this.forwardNoArrowParamsConversionAt(w,()=>this.parseMaybeAssign(void 0,void 0)),this.finishNode(w,"ConditionalExpression")}tryParseConditionalConsequent(){this.state.noArrowParamsConversionAt.push(this.state.start);let l=this.parseMaybeAssignAllowIn(),u=!this.match(14);return this.state.noArrowParamsConversionAt.pop(),{consequent:l,failed:u}}getArrowLikeExpressions(l,u){let m=[l],v=[];for(;m.length!==0;){let S=m.pop();S.type==="ArrowFunctionExpression"&&S.body.type!=="BlockStatement"?(S.typeParameters||!S.returnType?this.finishArrowValidation(S):v.push(S),m.push(S.body)):S.type==="ConditionalExpression"&&(m.push(S.consequent),m.push(S.alternate))}return u?(v.forEach(S=>this.finishArrowValidation(S)),[v,[]]):BW(v,S=>S.params.every(w=>this.isAssignable(w,!0)))}finishArrowValidation(l){var u;this.toAssignableList(l.params,(u=l.extra)==null?void 0:u.trailingCommaLoc,!1),this.scope.enter(6),super.checkParams(l,!1,!0),this.scope.exit()}forwardNoArrowParamsConversionAt(l,u){let m;return this.state.noArrowParamsConversionAt.includes(this.offsetToSourcePos(l.start))?(this.state.noArrowParamsConversionAt.push(this.state.start),m=u(),this.state.noArrowParamsConversionAt.pop()):m=u(),m}parseParenItem(l,u){let m=super.parseParenItem(l,u);if(this.eat(17)&&(m.optional=!0,this.resetEndLocation(l)),this.match(14)){let v=this.startNodeAt(u);return v.expression=m,v.typeAnnotation=this.flowParseTypeAnnotation(),this.finishNode(v,"TypeCastExpression")}return m}assertModuleNodeAllowed(l){l.type==="ImportDeclaration"&&(l.importKind==="type"||l.importKind==="typeof")||l.type==="ExportNamedDeclaration"&&l.exportKind==="type"||l.type==="ExportAllDeclaration"&&l.exportKind==="type"||super.assertModuleNodeAllowed(l)}parseExportDeclaration(l){if(this.isContextual(130)){l.exportKind="type";let u=this.startNode();return this.next(),this.match(5)?(l.specifiers=this.parseExportSpecifiers(!0),super.parseExportFrom(l),null):this.flowParseTypeAlias(u)}else if(this.isContextual(131)){l.exportKind="type";let u=this.startNode();return this.next(),this.flowParseOpaqueType(u,!1)}else if(this.isContextual(129)){l.exportKind="type";let u=this.startNode();return this.next(),this.flowParseInterface(u)}else if(this.isContextual(126)){l.exportKind="value";let u=this.startNode();return this.next(),this.flowParseEnumDeclaration(u)}else return super.parseExportDeclaration(l)}eatExportStar(l){return super.eatExportStar(l)?!0:this.isContextual(130)&&this.lookahead().type===55?(l.exportKind="type",this.next(),this.next(),!0):!1}maybeParseExportNamespaceSpecifier(l){let{startLoc:u}=this.state,m=super.maybeParseExportNamespaceSpecifier(l);return m&&l.exportKind==="type"&&this.unexpected(u),m}parseClassId(l,u,m){super.parseClassId(l,u,m),this.match(47)&&(l.typeParameters=this.flowParseTypeParameterDeclaration())}parseClassMember(l,u,m){let{startLoc:v}=this.state;if(this.isContextual(125)){if(super.parseClassMemberFromModifier(l,u))return;u.declare=!0}super.parseClassMember(l,u,m),u.declare&&(u.type!=="ClassProperty"&&u.type!=="ClassPrivateProperty"&&u.type!=="PropertyDefinition"?this.raise(Be.DeclareClassElement,v):u.value&&this.raise(Be.DeclareClassFieldInitializer,u.value))}isIterator(l){return l==="iterator"||l==="asyncIterator"}readIterator(){let l=super.readWord1(),u="@@"+l;(!this.isIterator(l)||!this.state.inType)&&this.raise(D.InvalidIdentifier,this.state.curPosition(),{identifierName:u}),this.finishToken(132,u)}getTokenFromCode(l){let u=this.input.charCodeAt(this.state.pos+1);l===123&&u===124?this.finishOp(6,2):this.state.inType&&(l===62||l===60)?this.finishOp(l===62?48:47,1):this.state.inType&&l===63?u===46?this.finishOp(18,2):this.finishOp(17,1):lW(l,u,this.input.charCodeAt(this.state.pos+2))?(this.state.pos+=2,this.readIterator()):super.getTokenFromCode(l)}isAssignable(l,u){return l.type==="TypeCastExpression"?this.isAssignable(l.expression,u):super.isAssignable(l,u)}toAssignable(l,u=!1){!u&&l.type==="AssignmentExpression"&&l.left.type==="TypeCastExpression"&&(l.left=this.typeCastToParameter(l.left)),super.toAssignable(l,u)}toAssignableList(l,u,m){for(let v=0;v<l.length;v++){let S=l[v];S?.type==="TypeCastExpression"&&(l[v]=this.typeCastToParameter(S))}super.toAssignableList(l,u,m)}toReferencedList(l,u){for(let v=0;v<l.length;v++){var m;let S=l[v];S&&S.type==="TypeCastExpression"&&!((m=S.extra)!=null&&m.parenthesized)&&(l.length>1||!u)&&this.raise(Be.TypeCastInPattern,S.typeAnnotation)}return l}parseArrayLike(l,u,m,v){let S=super.parseArrayLike(l,u,m,v);return u&&!this.state.maybeInArrowParameters&&this.toReferencedList(S.elements),S}isValidLVal(l,u,m){return l==="TypeCastExpression"||super.isValidLVal(l,u,m)}parseClassProperty(l){return this.match(14)&&(l.typeAnnotation=this.flowParseTypeAnnotation()),super.parseClassProperty(l)}parseClassPrivateProperty(l){return this.match(14)&&(l.typeAnnotation=this.flowParseTypeAnnotation()),super.parseClassPrivateProperty(l)}isClassMethod(){return this.match(47)||super.isClassMethod()}isClassProperty(){return this.match(14)||super.isClassProperty()}isNonstaticConstructor(l){return!this.match(14)&&super.isNonstaticConstructor(l)}pushClassMethod(l,u,m,v,S,w){if(u.variance&&this.unexpected(u.variance.loc.start),delete u.variance,this.match(47)&&(u.typeParameters=this.flowParseTypeParameterDeclaration()),super.pushClassMethod(l,u,m,v,S,w),u.params&&S){let P=u.params;P.length>0&&this.isThisParam(P[0])&&this.raise(Be.ThisParamBannedInConstructor,u)}else if(u.type==="MethodDefinition"&&S&&u.value.params){let P=u.value.params;P.length>0&&this.isThisParam(P[0])&&this.raise(Be.ThisParamBannedInConstructor,u)}}pushClassPrivateMethod(l,u,m,v){u.variance&&this.unexpected(u.variance.loc.start),delete u.variance,this.match(47)&&(u.typeParameters=this.flowParseTypeParameterDeclaration()),super.pushClassPrivateMethod(l,u,m,v)}parseClassSuper(l){if(super.parseClassSuper(l),l.superClass&&(this.match(47)||this.match(51))&&(l.superTypeParameters=this.flowParseTypeParameterInstantiationInExpression()),this.isContextual(113)){this.next();let u=l.implements=[];do{let m=this.startNode();m.id=this.flowParseRestrictedIdentifier(!0),this.match(47)?m.typeParameters=this.flowParseTypeParameterInstantiation():m.typeParameters=null,u.push(this.finishNode(m,"ClassImplements"))}while(this.eat(12))}}checkGetterSetterParams(l){super.checkGetterSetterParams(l);let u=this.getObjectOrClassMethodParams(l);if(u.length>0){let m=u[0];this.isThisParam(m)&&l.kind==="get"?this.raise(Be.GetterMayNotHaveThisParam,m):this.isThisParam(m)&&this.raise(Be.SetterMayNotHaveThisParam,m)}}parsePropertyNamePrefixOperator(l){l.variance=this.flowParseVariance()}parseObjPropValue(l,u,m,v,S,w,P){l.variance&&this.unexpected(l.variance.loc.start),delete l.variance;let L;this.match(47)&&!w&&(L=this.flowParseTypeParameterDeclaration(),this.match(10)||this.unexpected());let F=super.parseObjPropValue(l,u,m,v,S,w,P);return L&&((F.value||F).typeParameters=L),F}parseFunctionParamType(l){return this.eat(17)&&(l.type!=="Identifier"&&this.raise(Be.PatternIsOptional,l),this.isThisParam(l)&&this.raise(Be.ThisParamMayNotBeOptional,l),l.optional=!0),this.match(14)?l.typeAnnotation=this.flowParseTypeAnnotation():this.isThisParam(l)&&this.raise(Be.ThisParamAnnotationRequired,l),this.match(29)&&this.isThisParam(l)&&this.raise(Be.ThisParamNoDefault,l),this.resetEndLocation(l),l}parseMaybeDefault(l,u){let m=super.parseMaybeDefault(l,u);return m.type==="AssignmentPattern"&&m.typeAnnotation&&m.right.start<m.typeAnnotation.start&&this.raise(Be.TypeBeforeInitializer,m.typeAnnotation),m}checkImportReflection(l){super.checkImportReflection(l),l.module&&l.importKind!=="value"&&this.raise(Be.ImportReflectionHasImportType,l.specifiers[0].loc.start)}parseImportSpecifierLocal(l,u,m){u.local=SP(l)?this.flowParseRestrictedIdentifier(!0,!0):this.parseIdentifier(),l.specifiers.push(this.finishImportSpecifier(u,m))}isPotentialImportPhase(l){if(super.isPotentialImportPhase(l))return!0;if(this.isContextual(130)){if(!l)return!0;let u=this.lookaheadCharCode();return u===123||u===42}return!l&&this.isContextual(87)}applyImportPhase(l,u,m,v){if(super.applyImportPhase(l,u,m,v),u){if(!m&&this.match(65))return;l.exportKind=m==="type"?m:"value"}else m==="type"&&this.match(55)&&this.unexpected(),l.importKind=m==="type"||m==="typeof"?m:"value"}parseImportSpecifier(l,u,m,v,S){let w=l.imported,P=null;w.type==="Identifier"&&(w.name==="type"?P="type":w.name==="typeof"&&(P="typeof"));let L=!1;if(this.isContextual(93)&&!this.isLookaheadContextual("as")){let G=this.parseIdentifier(!0);P!==null&&!ni(this.state.type)?(l.imported=G,l.importKind=P,l.local=cs(G)):(l.imported=w,l.importKind=null,l.local=this.parseIdentifier())}else{if(P!==null&&ni(this.state.type))l.imported=this.parseIdentifier(!0),l.importKind=P;else{if(u)throw this.raise(D.ImportBindingIsString,l,{importName:w.value});l.imported=w,l.importKind=null}this.eatContextual(93)?l.local=this.parseIdentifier():(L=!0,l.local=cs(l.imported))}let F=SP(l);return m&&F&&this.raise(Be.ImportTypeShorthandOnlyInPureImport,l),(m||F)&&this.checkReservedType(l.local.name,l.local.loc.start,!0),L&&!m&&!F&&this.checkReservedWord(l.local.name,l.loc.start,!0,!0),this.finishImportSpecifier(l,"ImportSpecifier")}parseBindingAtom(){switch(this.state.type){case 78:return this.parseIdentifier(!0);default:return super.parseBindingAtom()}}parseFunctionParams(l,u){let m=l.kind;m!=="get"&&m!=="set"&&this.match(47)&&(l.typeParameters=this.flowParseTypeParameterDeclaration()),super.parseFunctionParams(l,u)}parseVarId(l,u){super.parseVarId(l,u),this.match(14)&&(l.id.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(l.id))}parseAsyncArrowFromCallExpression(l,u){if(this.match(14)){let m=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0,l.returnType=this.flowParseTypeAnnotation(),this.state.noAnonFunctionType=m}return super.parseAsyncArrowFromCallExpression(l,u)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}parseMaybeAssign(l,u){var m;let v=null,S;if(this.hasPlugin("jsx")&&(this.match(143)||this.match(47))){if(v=this.state.clone(),S=this.tryParse(()=>super.parseMaybeAssign(l,u),v),!S.error)return S.node;let{context:L}=this.state,F=L[L.length-1];(F===$.j_oTag||F===$.j_expr)&&L.pop()}if((m=S)!=null&&m.error||this.match(47)){var w,P;v=v||this.state.clone();let L,F=this.tryParse(se=>{var ye;L=this.flowParseTypeParameterDeclaration();let Ie=this.forwardNoArrowParamsConversionAt(L,()=>{let vi=super.parseMaybeAssign(l,u);return this.resetStartLocationFromNode(vi,L),vi});(ye=Ie.extra)!=null&&ye.parenthesized&&se();let dt=this.maybeUnwrapTypeCastExpression(Ie);return dt.type!=="ArrowFunctionExpression"&&se(),dt.typeParameters=L,this.resetStartLocationFromNode(dt,L),Ie},v),G=null;if(F.node&&this.maybeUnwrapTypeCastExpression(F.node).type==="ArrowFunctionExpression"){if(!F.error&&!F.aborted)return F.node.async&&this.raise(Be.UnexpectedTypeParameterBeforeAsyncArrowFunction,L),F.node;G=F.node}if((w=S)!=null&&w.node)return this.state=S.failState,S.node;if(G)return this.state=F.failState,G;throw(P=S)!=null&&P.thrown?S.error:F.thrown?F.error:this.raise(Be.UnexpectedTokenAfterTypeParameter,L)}return super.parseMaybeAssign(l,u)}parseArrow(l){if(this.match(14)){let u=this.tryParse(()=>{let m=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0;let v=this.startNode();return[v.typeAnnotation,l.predicate]=this.flowParseTypeAndPredicateInitialiser(),this.state.noAnonFunctionType=m,this.canInsertSemicolon()&&this.unexpected(),this.match(19)||this.unexpected(),v});if(u.thrown)return null;u.error&&(this.state=u.failState),l.returnType=u.node.typeAnnotation?this.finishNode(u.node,"TypeAnnotation"):null}return super.parseArrow(l)}shouldParseArrow(l){return this.match(14)||super.shouldParseArrow(l)}setArrowFunctionParameters(l,u){this.state.noArrowParamsConversionAt.includes(this.offsetToSourcePos(l.start))?l.params=u:super.setArrowFunctionParameters(l,u)}checkParams(l,u,m,v=!0){if(!(m&&this.state.noArrowParamsConversionAt.includes(this.offsetToSourcePos(l.start)))){for(let S=0;S<l.params.length;S++)this.isThisParam(l.params[S])&&S>0&&this.raise(Be.ThisParamMustBeFirst,l.params[S]);super.checkParams(l,u,m,v)}}parseParenAndDistinguishExpression(l){return super.parseParenAndDistinguishExpression(l&&!this.state.noArrowAt.includes(this.sourceToOffsetPos(this.state.start)))}parseSubscripts(l,u,m){if(l.type==="Identifier"&&l.name==="async"&&this.state.noArrowAt.includes(u.index)){this.next();let v=this.startNodeAt(u);v.callee=l,v.arguments=super.parseCallExpressionArguments(11),l=this.finishNode(v,"CallExpression")}else if(l.type==="Identifier"&&l.name==="async"&&this.match(47)){let v=this.state.clone(),S=this.tryParse(P=>this.parseAsyncArrowWithTypeParameters(u)||P(),v);if(!S.error&&!S.aborted)return S.node;let w=this.tryParse(()=>super.parseSubscripts(l,u,m),v);if(w.node&&!w.error)return w.node;if(S.node)return this.state=S.failState,S.node;if(w.node)return this.state=w.failState,w.node;throw S.error||w.error}return super.parseSubscripts(l,u,m)}parseSubscript(l,u,m,v){if(this.match(18)&&this.isLookaheadToken_lt()){if(v.optionalChainMember=!0,m)return v.stop=!0,l;this.next();let S=this.startNodeAt(u);return S.callee=l,S.typeArguments=this.flowParseTypeParameterInstantiationInExpression(),this.expect(10),S.arguments=this.parseCallExpressionArguments(11),S.optional=!0,this.finishCallExpression(S,!0)}else if(!m&&this.shouldParseTypes()&&(this.match(47)||this.match(51))){let S=this.startNodeAt(u);S.callee=l;let w=this.tryParse(()=>(S.typeArguments=this.flowParseTypeParameterInstantiationCallOrNew(),this.expect(10),S.arguments=super.parseCallExpressionArguments(11),v.optionalChainMember&&(S.optional=!1),this.finishCallExpression(S,v.optionalChainMember)));if(w.node)return w.error&&(this.state=w.failState),w.node}return super.parseSubscript(l,u,m,v)}parseNewCallee(l){super.parseNewCallee(l);let u=null;this.shouldParseTypes()&&this.match(47)&&(u=this.tryParse(()=>this.flowParseTypeParameterInstantiationCallOrNew()).node),l.typeArguments=u}parseAsyncArrowWithTypeParameters(l){let u=this.startNodeAt(l);if(this.parseFunctionParams(u,!1),!!this.parseArrow(u))return super.parseArrowExpression(u,void 0,!0)}readToken_mult_modulo(l){let u=this.input.charCodeAt(this.state.pos+1);if(l===42&&u===47&&this.state.hasFlowComment){this.state.hasFlowComment=!1,this.state.pos+=2,this.nextToken();return}super.readToken_mult_modulo(l)}readToken_pipe_amp(l){let u=this.input.charCodeAt(this.state.pos+1);if(l===124&&u===125){this.finishOp(9,2);return}super.readToken_pipe_amp(l)}parseTopLevel(l,u){let m=super.parseTopLevel(l,u);return this.state.hasFlowComment&&this.raise(Be.UnterminatedFlowComment,this.state.curPosition()),m}skipBlockComment(){if(this.hasPlugin("flowComments")&&this.skipFlowComment()){if(this.state.hasFlowComment)throw this.raise(Be.NestedFlowComment,this.state.startLoc);this.hasFlowCommentCompletion();let l=this.skipFlowComment();l&&(this.state.pos+=l,this.state.hasFlowComment=!0);return}return super.skipBlockComment(this.state.hasFlowComment?"*-/":"*/")}skipFlowComment(){let{pos:l}=this.state,u=2;for(;[32,9].includes(this.input.charCodeAt(l+u));)u++;let m=this.input.charCodeAt(u+l),v=this.input.charCodeAt(u+l+1);return m===58&&v===58?u+2:this.input.slice(u+l,u+l+12)==="flow-include"?u+12:m===58&&v!==58?u:!1}hasFlowCommentCompletion(){if(this.input.indexOf("*/",this.state.pos)===-1)throw this.raise(D.UnterminatedComment,this.state.curPosition())}flowEnumErrorBooleanMemberNotInitialized(l,{enumName:u,memberName:m}){this.raise(Be.EnumBooleanMemberNotInitialized,l,{memberName:m,enumName:u})}flowEnumErrorInvalidMemberInitializer(l,u){return this.raise(u.explicitType?u.explicitType==="symbol"?Be.EnumInvalidMemberInitializerSymbolType:Be.EnumInvalidMemberInitializerPrimaryType:Be.EnumInvalidMemberInitializerUnknownType,l,u)}flowEnumErrorNumberMemberNotInitialized(l,u){this.raise(Be.EnumNumberMemberNotInitialized,l,u)}flowEnumErrorStringMemberInconsistentlyInitialized(l,u){this.raise(Be.EnumStringMemberInconsistentlyInitialized,l,u)}flowEnumMemberInit(){let l=this.state.startLoc,u=()=>this.match(12)||this.match(8);switch(this.state.type){case 135:{let m=this.parseNumericLiteral(this.state.value);return u()?{type:"number",loc:m.loc.start,value:m}:{type:"invalid",loc:l}}case 134:{let m=this.parseStringLiteral(this.state.value);return u()?{type:"string",loc:m.loc.start,value:m}:{type:"invalid",loc:l}}case 85:case 86:{let m=this.parseBooleanLiteral(this.match(85));return u()?{type:"boolean",loc:m.loc.start,value:m}:{type:"invalid",loc:l}}default:return{type:"invalid",loc:l}}}flowEnumMemberRaw(){let l=this.state.startLoc,u=this.parseIdentifier(!0),m=this.eat(29)?this.flowEnumMemberInit():{type:"none",loc:l};return{id:u,init:m}}flowEnumCheckExplicitTypeMismatch(l,u,m){let{explicitType:v}=u;v!==null&&v!==m&&this.flowEnumErrorInvalidMemberInitializer(l,u)}flowEnumMembers({enumName:l,explicitType:u}){let m=new Set,v={booleanMembers:[],numberMembers:[],stringMembers:[],defaultedMembers:[]},S=!1;for(;!this.match(8);){if(this.eat(21)){S=!0;break}let w=this.startNode(),{id:P,init:L}=this.flowEnumMemberRaw(),F=P.name;if(F==="")continue;/^[a-z]/.test(F)&&this.raise(Be.EnumInvalidMemberName,P,{memberName:F,suggestion:F[0].toUpperCase()+F.slice(1),enumName:l}),m.has(F)&&this.raise(Be.EnumDuplicateMemberName,P,{memberName:F,enumName:l}),m.add(F);let G={enumName:l,explicitType:u,memberName:F};switch(w.id=P,L.type){case"boolean":{this.flowEnumCheckExplicitTypeMismatch(L.loc,G,"boolean"),w.init=L.value,v.booleanMembers.push(this.finishNode(w,"EnumBooleanMember"));break}case"number":{this.flowEnumCheckExplicitTypeMismatch(L.loc,G,"number"),w.init=L.value,v.numberMembers.push(this.finishNode(w,"EnumNumberMember"));break}case"string":{this.flowEnumCheckExplicitTypeMismatch(L.loc,G,"string"),w.init=L.value,v.stringMembers.push(this.finishNode(w,"EnumStringMember"));break}case"invalid":throw this.flowEnumErrorInvalidMemberInitializer(L.loc,G);case"none":switch(u){case"boolean":this.flowEnumErrorBooleanMemberNotInitialized(L.loc,G);break;case"number":this.flowEnumErrorNumberMemberNotInitialized(L.loc,G);break;default:v.defaultedMembers.push(this.finishNode(w,"EnumDefaultedMember"))}}this.match(8)||this.expect(12)}return{members:v,hasUnknownMembers:S}}flowEnumStringMembers(l,u,{enumName:m}){if(l.length===0)return u;if(u.length===0)return l;if(u.length>l.length){for(let v of l)this.flowEnumErrorStringMemberInconsistentlyInitialized(v,{enumName:m});return u}else{for(let v of u)this.flowEnumErrorStringMemberInconsistentlyInitialized(v,{enumName:m});return l}}flowEnumParseExplicitType({enumName:l}){if(!this.eatContextual(102))return null;if(!vt(this.state.type))throw this.raise(Be.EnumInvalidExplicitTypeUnknownSupplied,this.state.startLoc,{enumName:l});let{value:u}=this.state;return this.next(),u!=="boolean"&&u!=="number"&&u!=="string"&&u!=="symbol"&&this.raise(Be.EnumInvalidExplicitType,this.state.startLoc,{enumName:l,invalidEnumType:u}),u}flowEnumBody(l,u){let m=u.name,v=u.loc.start,S=this.flowEnumParseExplicitType({enumName:m});this.expect(5);let{members:w,hasUnknownMembers:P}=this.flowEnumMembers({enumName:m,explicitType:S});switch(l.hasUnknownMembers=P,S){case"boolean":return l.explicitType=!0,l.members=w.booleanMembers,this.expect(8),this.finishNode(l,"EnumBooleanBody");case"number":return l.explicitType=!0,l.members=w.numberMembers,this.expect(8),this.finishNode(l,"EnumNumberBody");case"string":return l.explicitType=!0,l.members=this.flowEnumStringMembers(w.stringMembers,w.defaultedMembers,{enumName:m}),this.expect(8),this.finishNode(l,"EnumStringBody");case"symbol":return l.members=w.defaultedMembers,this.expect(8),this.finishNode(l,"EnumSymbolBody");default:{let L=()=>(l.members=[],this.expect(8),this.finishNode(l,"EnumStringBody"));l.explicitType=!1;let F=w.booleanMembers.length,G=w.numberMembers.length,se=w.stringMembers.length,ye=w.defaultedMembers.length;if(!F&&!G&&!se&&!ye)return L();if(!F&&!G)return l.members=this.flowEnumStringMembers(w.stringMembers,w.defaultedMembers,{enumName:m}),this.expect(8),this.finishNode(l,"EnumStringBody");if(!G&&!se&&F>=ye){for(let Ie of w.defaultedMembers)this.flowEnumErrorBooleanMemberNotInitialized(Ie.loc.start,{enumName:m,memberName:Ie.id.name});return l.members=w.booleanMembers,this.expect(8),this.finishNode(l,"EnumBooleanBody")}else if(!F&&!se&&G>=ye){for(let Ie of w.defaultedMembers)this.flowEnumErrorNumberMemberNotInitialized(Ie.loc.start,{enumName:m,memberName:Ie.id.name});return l.members=w.numberMembers,this.expect(8),this.finishNode(l,"EnumNumberBody")}else return this.raise(Be.EnumInconsistentMemberValues,v,{enumName:m}),L()}}}flowParseEnumDeclaration(l){let u=this.parseIdentifier();return l.id=u,l.body=this.flowEnumBody(this.startNode(),u),this.finishNode(l,"EnumDeclaration")}jsxParseOpeningElementAfterName(l){return this.shouldParseTypes()&&(this.match(47)||this.match(51))&&(l.typeArguments=this.flowParseTypeParameterInstantiationInExpression()),super.jsxParseOpeningElementAfterName(l)}isLookaheadToken_lt(){let l=this.nextTokenStart();if(this.input.charCodeAt(l)===60){let u=this.input.charCodeAt(l+1);return u!==60&&u!==61}return!1}reScan_lt_gt(){let{type:l}=this.state;l===47?(this.state.pos-=1,this.readToken_lt()):l===48&&(this.state.pos-=1,this.readToken_gt())}reScan_lt(){let{type:l}=this.state;return l===51?(this.state.pos-=2,this.finishOp(47,1),47):l}maybeUnwrapTypeCastExpression(l){return l.type==="TypeCastExpression"?l.expression:l}},Pl=x`jsx`({AttributeIsEmpty:"JSX attributes must only be assigned a non-empty expression.",MissingClosingTagElement:({openingTagName:d})=>`Expected corresponding JSX closing tag for <${d}>.`,MissingClosingTagFragment:"Expected corresponding JSX closing tag for <>.",UnexpectedSequenceExpression:"Sequence expressions cannot be directly nested inside JSX. Did you mean to wrap it in parentheses (...)?",UnexpectedToken:({unexpected:d,HTMLEntity:l})=>`Unexpected token \`${d}\`. Did you mean \`${l}\` or \`{'${d}'}\`?`,UnsupportedJsxValue:"JSX value should be either an expression or a quoted JSX text.",UnterminatedJsxContent:"Unterminated JSX contents.",UnwrappedAdjacentJSXElements:"Adjacent JSX elements must be wrapped in an enclosing tag. Did you want a JSX fragment <>...</>?"});function va(d){return d?d.type==="JSXOpeningFragment"||d.type==="JSXClosingFragment":!1}function sd(d){if(d.type==="JSXIdentifier")return d.name;if(d.type==="JSXNamespacedName")return d.namespace.name+":"+d.name.name;if(d.type==="JSXMemberExpression")return sd(d.object)+"."+sd(d.property);throw new Error("Node had unexpected type: "+d.type)}var jW=d=>class extends d{jsxReadToken(){let l="",u=this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(Pl.UnterminatedJsxContent,this.state.startLoc);let m=this.input.charCodeAt(this.state.pos);switch(m){case 60:case 123:if(this.state.pos===this.state.start){m===60&&this.state.canStartJSXElement?(++this.state.pos,this.finishToken(143)):super.getTokenFromCode(m);return}l+=this.input.slice(u,this.state.pos),this.finishToken(142,l);return;case 38:l+=this.input.slice(u,this.state.pos),l+=this.jsxReadEntity(),u=this.state.pos;break;case 62:case 125:default:nd(m)?(l+=this.input.slice(u,this.state.pos),l+=this.jsxReadNewLine(!0),u=this.state.pos):++this.state.pos}}}jsxReadNewLine(l){let u=this.input.charCodeAt(this.state.pos),m;return++this.state.pos,u===13&&this.input.charCodeAt(this.state.pos)===10?(++this.state.pos,m=l?`
`:`\r
`):m=String.fromCharCode(u),++this.state.curLine,this.state.lineStart=this.state.pos,m}jsxReadString(l){let u="",m=++this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(D.UnterminatedString,this.state.startLoc);let v=this.input.charCodeAt(this.state.pos);if(v===l)break;v===38?(u+=this.input.slice(m,this.state.pos),u+=this.jsxReadEntity(),m=this.state.pos):nd(v)?(u+=this.input.slice(m,this.state.pos),u+=this.jsxReadNewLine(!1),m=this.state.pos):++this.state.pos}u+=this.input.slice(m,this.state.pos++),this.finishToken(134,u)}jsxReadEntity(){let l=++this.state.pos;if(this.codePointAtPos(this.state.pos)===35){++this.state.pos;let u=10;this.codePointAtPos(this.state.pos)===120&&(u=16,++this.state.pos);let m=this.readInt(u,void 0,!1,"bail");if(m!==null&&this.codePointAtPos(this.state.pos)===59)return++this.state.pos,String.fromCodePoint(m)}else{let u=0,m=!1;for(;u++<10&&this.state.pos<this.length&&!(m=this.codePointAtPos(this.state.pos)===59);)++this.state.pos;if(m){let v=this.input.slice(l,this.state.pos),S;if(++this.state.pos,S)return S}}return this.state.pos=l,"&"}jsxReadWord(){let l,u=this.state.pos;do l=this.input.charCodeAt(++this.state.pos);while(rd(l)||l===45);this.finishToken(141,this.input.slice(u,this.state.pos))}jsxParseIdentifier(){let l=this.startNode();return this.match(141)?l.name=this.state.value:pC(this.state.type)?l.name=_a(this.state.type):this.unexpected(),this.next(),this.finishNode(l,"JSXIdentifier")}jsxParseNamespacedName(){let l=this.state.startLoc,u=this.jsxParseIdentifier();if(!this.eat(14))return u;let m=this.startNodeAt(l);return m.namespace=u,m.name=this.jsxParseIdentifier(),this.finishNode(m,"JSXNamespacedName")}jsxParseElementName(){let l=this.state.startLoc,u=this.jsxParseNamespacedName();if(u.type==="JSXNamespacedName")return u;for(;this.eat(16);){let m=this.startNodeAt(l);m.object=u,m.property=this.jsxParseIdentifier(),u=this.finishNode(m,"JSXMemberExpression")}return u}jsxParseAttributeValue(){let l;switch(this.state.type){case 5:return l=this.startNode(),this.setContext($.brace),this.next(),l=this.jsxParseExpressionContainer(l,$.j_oTag),l.expression.type==="JSXEmptyExpression"&&this.raise(Pl.AttributeIsEmpty,l),l;case 143:case 134:return this.parseExprAtom();default:throw this.raise(Pl.UnsupportedJsxValue,this.state.startLoc)}}jsxParseEmptyExpression(){let l=this.startNodeAt(this.state.lastTokEndLoc);return this.finishNodeAt(l,"JSXEmptyExpression",this.state.startLoc)}jsxParseSpreadChild(l){return this.next(),l.expression=this.parseExpression(),this.setContext($.j_expr),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(l,"JSXSpreadChild")}jsxParseExpressionContainer(l,u){if(this.match(8))l.expression=this.jsxParseEmptyExpression();else{let m=this.parseExpression();l.expression=m}return this.setContext(u),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(l,"JSXExpressionContainer")}jsxParseAttribute(){let l=this.startNode();return this.match(5)?(this.setContext($.brace),this.next(),this.expect(21),l.argument=this.parseMaybeAssignAllowIn(),this.setContext($.j_oTag),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(l,"JSXSpreadAttribute")):(l.name=this.jsxParseNamespacedName(),l.value=this.eat(29)?this.jsxParseAttributeValue():null,this.finishNode(l,"JSXAttribute"))}jsxParseOpeningElementAt(l){let u=this.startNodeAt(l);return this.eat(144)?this.finishNode(u,"JSXOpeningFragment"):(u.name=this.jsxParseElementName(),this.jsxParseOpeningElementAfterName(u))}jsxParseOpeningElementAfterName(l){let u=[];for(;!this.match(56)&&!this.match(144);)u.push(this.jsxParseAttribute());return l.attributes=u,l.selfClosing=this.eat(56),this.expect(144),this.finishNode(l,"JSXOpeningElement")}jsxParseClosingElementAt(l){let u=this.startNodeAt(l);return this.eat(144)?this.finishNode(u,"JSXClosingFragment"):(u.name=this.jsxParseElementName(),this.expect(144),this.finishNode(u,"JSXClosingElement"))}jsxParseElementAt(l){let u=this.startNodeAt(l),m=[],v=this.jsxParseOpeningElementAt(l),S=null;if(!v.selfClosing){e:for(;;)switch(this.state.type){case 143:if(l=this.state.startLoc,this.next(),this.eat(56)){S=this.jsxParseClosingElementAt(l);break e}m.push(this.jsxParseElementAt(l));break;case 142:m.push(this.parseLiteral(this.state.value,"JSXText"));break;case 5:{let w=this.startNode();this.setContext($.brace),this.next(),this.match(21)?m.push(this.jsxParseSpreadChild(w)):m.push(this.jsxParseExpressionContainer(w,$.j_expr));break}default:this.unexpected()}va(v)&&!va(S)&&S!==null?this.raise(Pl.MissingClosingTagFragment,S):!va(v)&&va(S)?this.raise(Pl.MissingClosingTagElement,S,{openingTagName:sd(v.name)}):!va(v)&&!va(S)&&sd(S.name)!==sd(v.name)&&this.raise(Pl.MissingClosingTagElement,S,{openingTagName:sd(v.name)})}if(va(v)?(u.openingFragment=v,u.closingFragment=S):(u.openingElement=v,u.closingElement=S),u.children=m,this.match(47))throw this.raise(Pl.UnwrappedAdjacentJSXElements,this.state.startLoc);return va(v)?this.finishNode(u,"JSXFragment"):this.finishNode(u,"JSXElement")}jsxParseElement(){let l=this.state.startLoc;return this.next(),this.jsxParseElementAt(l)}setContext(l){let{context:u}=this.state;u[u.length-1]=l}parseExprAtom(l){return this.match(143)?this.jsxParseElement():this.match(47)&&this.input.charCodeAt(this.state.pos)!==33?(this.replaceToken(143),this.jsxParseElement()):super.parseExprAtom(l)}skipSpace(){this.curContext().preserveSpace||super.skipSpace()}getTokenFromCode(l){let u=this.curContext();if(u===$.j_expr){this.jsxReadToken();return}if(u===$.j_oTag||u===$.j_cTag){if(ls(l)){this.jsxReadWord();return}if(l===62){++this.state.pos,this.finishToken(144);return}if((l===34||l===39)&&u===$.j_oTag){this.jsxReadString(l);return}}if(l===60&&this.state.canStartJSXElement&&this.input.charCodeAt(this.state.pos+1)!==33){++this.state.pos,this.finishToken(143);return}super.getTokenFromCode(l)}updateContext(l){let{context:u,type:m}=this.state;if(m===56&&l===143)u.splice(-2,2,$.j_cTag),this.state.canStartJSXElement=!1;else if(m===143)u.push($.j_oTag);else if(m===144){let v=u[u.length-1];v===$.j_oTag&&l===56||v===$.j_cTag?(u.pop(),this.state.canStartJSXElement=u[u.length-1]===$.j_expr):(this.setContext($.j_expr),this.state.canStartJSXElement=!0)}else this.state.canStartJSXElement=K4(m)}},zW=class extends _C{constructor(...d){super(...d),this.tsNames=new Map}},VW=class extends yC{constructor(...d){super(...d),this.importsStack=[]}createScope(d){return this.importsStack.push(new Set),new zW(d)}enter(d){d===256&&this.importsStack.push(new Set),super.enter(d)}exit(){let d=super.exit();return d===256&&this.importsStack.pop(),d}hasImport(d,l){let u=this.importsStack.length;if(this.importsStack[u-1].has(d))return!0;if(!l&&u>1){for(let m=0;m<u-1;m++)if(this.importsStack[m].has(d))return!0}return!1}declareName(d,l,u){if(l&4096){this.hasImport(d,!0)&&this.parser.raise(D.VarRedeclaration,u,{identifierName:d}),this.importsStack[this.importsStack.length-1].add(d);return}let m=this.currentScope(),v=m.tsNames.get(d)||0;if(l&1024){this.maybeExportDefined(m,d),m.tsNames.set(d,v|16);return}super.declareName(d,l,u),l&2&&(l&1||(this.checkRedeclarationInScope(m,d,l,u),this.maybeExportDefined(m,d)),v=v|1),l&256&&(v=v|2),l&512&&(v=v|4),l&128&&(v=v|8),v&&m.tsNames.set(d,v)}isRedeclaredInScope(d,l,u){let m=d.tsNames.get(l);if((m&2)>0){if(u&256){let v=!!(u&512),S=(m&4)>0;return v!==S}return!0}return u&128&&(m&8)>0?d.names.get(l)&2?!!(u&1):!1:u&2&&(m&1)>0?!0:super.isRedeclaredInScope(d,l,u)}checkLocalExport(d){let{name:l}=d;if(this.hasImport(l))return;let u=this.scopeStack.length;for(let m=u-1;m>=0;m--){let v=this.scopeStack[m].tsNames.get(l);if((v&1)>0||(v&16)>0)return}super.checkLocalExport(d)}},wP=d=>d.type==="ParenthesizedExpression"?wP(d.expression):d,UW=class extends NW{toAssignable(d,l=!1){var u,m;let v;switch((d.type==="ParenthesizedExpression"||(u=d.extra)!=null&&u.parenthesized)&&(v=wP(d),l?v.type==="Identifier"?this.expressionScope.recordArrowParameterBindingError(D.InvalidParenthesizedAssignment,d):v.type!=="MemberExpression"&&!this.isOptionalMemberExpression(v)&&this.raise(D.InvalidParenthesizedAssignment,d):this.raise(D.InvalidParenthesizedAssignment,d)),d.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":d.type="ObjectPattern";for(let w=0,P=d.properties.length,L=P-1;w<P;w++){var S;let F=d.properties[w],G=w===L;this.toAssignableObjectExpressionProp(F,G,l),G&&F.type==="RestElement"&&(S=d.extra)!=null&&S.trailingCommaLoc&&this.raise(D.RestTrailingComma,d.extra.trailingCommaLoc)}break;case"ObjectProperty":{let{key:w,value:P}=d;this.isPrivateName(w)&&this.classScope.usePrivateName(this.getPrivateNameSV(w),w.loc.start),this.toAssignable(P,l);break}case"SpreadElement":throw new Error("Internal @babel/parser error (this is a bug, please report it). SpreadElement should be converted by .toAssignable's caller.");case"ArrayExpression":d.type="ArrayPattern",this.toAssignableList(d.elements,(m=d.extra)==null?void 0:m.trailingCommaLoc,l);break;case"AssignmentExpression":d.operator!=="="&&this.raise(D.MissingEqInAssignment,d.left.loc.end),d.type="AssignmentPattern",delete d.operator,this.toAssignable(d.left,l);break;case"ParenthesizedExpression":this.toAssignable(v,l);break}}toAssignableObjectExpressionProp(d,l,u){if(d.type==="ObjectMethod")this.raise(d.kind==="get"||d.kind==="set"?D.PatternHasAccessor:D.PatternHasMethod,d.key);else if(d.type==="SpreadElement"){d.type="RestElement";let m=d.argument;this.checkToRestConversion(m,!1),this.toAssignable(m,u),l||this.raise(D.RestTrailingComma,d)}else this.toAssignable(d,u)}toAssignableList(d,l,u){let m=d.length-1;for(let v=0;v<=m;v++){let S=d[v];if(S){if(S.type==="SpreadElement"){S.type="RestElement";let w=S.argument;this.checkToRestConversion(w,!0),this.toAssignable(w,u)}else this.toAssignable(S,u);S.type==="RestElement"&&(v<m?this.raise(D.RestTrailingComma,S):l&&this.raise(D.RestTrailingComma,l))}}}isAssignable(d,l){switch(d.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":return!0;case"ObjectExpression":{let u=d.properties.length-1;return d.properties.every((m,v)=>m.type!=="ObjectMethod"&&(v===u||m.type!=="SpreadElement")&&this.isAssignable(m))}case"ObjectProperty":return this.isAssignable(d.value);case"SpreadElement":return this.isAssignable(d.argument);case"ArrayExpression":return d.elements.every(u=>u===null||this.isAssignable(u));case"AssignmentExpression":return d.operator==="=";case"ParenthesizedExpression":return this.isAssignable(d.expression);case"MemberExpression":case"OptionalMemberExpression":return!l;default:return!1}}toReferencedList(d,l){return d}toReferencedListDeep(d,l){this.toReferencedList(d,l);for(let u of d)u?.type==="ArrayExpression"&&this.toReferencedListDeep(u.elements)}parseSpread(d){let l=this.startNode();return this.next(),l.argument=this.parseMaybeAssignAllowIn(d,void 0),this.finishNode(l,"SpreadElement")}parseRestBinding(){let d=this.startNode();return this.next(),d.argument=this.parseBindingAtom(),this.finishNode(d,"RestElement")}parseBindingAtom(){switch(this.state.type){case 0:{let d=this.startNode();return this.next(),d.elements=this.parseBindingList(3,93,1),this.finishNode(d,"ArrayPattern")}case 5:return this.parseObjectLike(8,!0)}return this.parseIdentifier()}parseBindingList(d,l,u){let m=u&1,v=[],S=!0;for(;!this.eat(d);)if(S?S=!1:this.expect(12),m&&this.match(12))v.push(null);else{if(this.eat(d))break;if(this.match(21)){let w=this.parseRestBinding();if((this.hasPlugin("flow")||u&2)&&(w=this.parseFunctionParamType(w)),v.push(w),!this.checkCommaAfterRest(l)){this.expect(d);break}}else{let w=[];for(this.match(26)&&this.hasPlugin("decorators")&&this.raise(D.UnsupportedParameterDecorator,this.state.startLoc);this.match(26);)w.push(this.parseDecorator());v.push(this.parseAssignableListItem(u,w))}}return v}parseBindingRestProperty(d){return this.next(),d.argument=this.parseIdentifier(),this.checkCommaAfterRest(125),this.finishNode(d,"RestElement")}parseBindingProperty(){let{type:d,startLoc:l}=this.state;if(d===21)return this.parseBindingRestProperty(this.startNode());let u=this.startNode();return d===139?(this.expectPlugin("destructuringPrivate",l),this.classScope.usePrivateName(this.state.value,l),u.key=this.parsePrivateName()):this.parsePropertyName(u),u.method=!1,this.parseObjPropValue(u,l,!1,!1,!0,!1)}parseAssignableListItem(d,l){let u=this.parseMaybeDefault();(this.hasPlugin("flow")||d&2)&&this.parseFunctionParamType(u);let m=this.parseMaybeDefault(u.loc.start,u);return l.length&&(u.decorators=l),m}parseFunctionParamType(d){return d}parseMaybeDefault(d,l){var u,m;if((u=d)!=null||(d=this.state.startLoc),l=(m=l)!=null?m:this.parseBindingAtom(),!this.eat(29))return l;let v=this.startNodeAt(d);return v.left=l,v.right=this.parseMaybeAssignAllowIn(),this.finishNode(v,"AssignmentPattern")}isValidLVal(d,l,u){switch(d){case"AssignmentPattern":return"left";case"RestElement":return"argument";case"ObjectProperty":return"value";case"ParenthesizedExpression":return"expression";case"ArrayPattern":return"elements";case"ObjectPattern":return"properties"}return!1}isOptionalMemberExpression(d){return d.type==="OptionalMemberExpression"}checkLVal(d,l,u=64,m=!1,v=!1,S=!1){var w;let P=d.type;if(this.isObjectMethod(d))return;let L=this.isOptionalMemberExpression(d);if(L||P==="MemberExpression"){L&&(this.expectPlugin("optionalChainingAssign",d.loc.start),l.type!=="AssignmentExpression"&&this.raise(D.InvalidLhsOptionalChaining,d,{ancestor:l})),u!==64&&this.raise(D.InvalidPropertyBindingPattern,d);return}if(P==="Identifier"){this.checkIdentifier(d,u,v);let{name:dt}=d;m&&(m.has(dt)?this.raise(D.ParamDupe,d):m.add(dt));return}let F=this.isValidLVal(P,!(S||(w=d.extra)!=null&&w.parenthesized)&&l.type==="AssignmentExpression",u);if(F===!0)return;if(F===!1){let dt=u===64?D.InvalidLhs:D.InvalidLhsBinding;this.raise(dt,d,{ancestor:l});return}let G,se;typeof F=="string"?(G=F,se=P==="ParenthesizedExpression"):[G,se]=F;let ye=P==="ArrayPattern"||P==="ObjectPattern"?{type:P}:l,Ie=d[G];if(Array.isArray(Ie))for(let dt of Ie)dt&&this.checkLVal(dt,ye,u,m,v,se);else Ie&&this.checkLVal(Ie,ye,u,m,v,se)}checkIdentifier(d,l,u=!1){this.state.strict&&(u?gP(d.name,this.inModule):mP(d.name))&&(l===64?this.raise(D.StrictEvalArguments,d,{referenceName:d.name}):this.raise(D.StrictEvalArgumentsBinding,d,{bindingName:d.name})),l&8192&&d.name==="let"&&this.raise(D.LetInLexicalBinding,d),l&64||this.declareNameFromIdentifier(d,l)}declareNameFromIdentifier(d,l){this.scope.declareName(d.name,l,d.loc.start)}checkToRestConversion(d,l){switch(d.type){case"ParenthesizedExpression":this.checkToRestConversion(d.expression,l);break;case"Identifier":case"MemberExpression":break;case"ArrayExpression":case"ObjectExpression":if(l)break;default:this.raise(D.InvalidRestAssignmentPattern,d)}}checkCommaAfterRest(d){return this.match(12)?(this.raise(this.lookaheadCharCode()===d?D.RestTrailingComma:D.ElementAfterRest,this.state.startLoc),!0):!1}};function qW(d){if(d==null)throw new Error(`Unexpected ${d} value.`);return d}function EP(d){if(!d)throw new Error("Assert fail")}var Te=x`typescript`({AbstractMethodHasImplementation:({methodName:d})=>`Method '${d}' cannot have an implementation because it is marked abstract.`,AbstractPropertyHasInitializer:({propertyName:d})=>`Property '${d}' cannot have an initializer because it is marked abstract.`,AccessorCannotBeOptional:"An 'accessor' property cannot be declared optional.",AccessorCannotDeclareThisParameter:"'get' and 'set' accessors cannot declare 'this' parameters.",AccessorCannotHaveTypeParameters:"An accessor cannot have type parameters.",ClassMethodHasDeclare:"Class methods cannot have the 'declare' modifier.",ClassMethodHasReadonly:"Class methods cannot have the 'readonly' modifier.",ConstInitializerMustBeStringOrNumericLiteralOrLiteralEnumReference:"A 'const' initializer in an ambient context must be a string or numeric literal or literal enum reference.",ConstructorHasTypeParameters:"Type parameters cannot appear on a constructor declaration.",DeclareAccessor:({kind:d})=>`'declare' is not allowed in ${d}ters.`,DeclareClassFieldHasInitializer:"Initializers are not allowed in ambient contexts.",DeclareFunctionHasImplementation:"An implementation cannot be declared in ambient contexts.",DuplicateAccessibilityModifier:({modifier:d})=>"Accessibility modifier already seen.",DuplicateModifier:({modifier:d})=>`Duplicate modifier: '${d}'.`,EmptyHeritageClauseType:({token:d})=>`'${d}' list cannot be empty.`,EmptyTypeArguments:"Type argument list cannot be empty.",EmptyTypeParameters:"Type parameter list cannot be empty.",ExpectedAmbientAfterExportDeclare:"'export declare' must be followed by an ambient declaration.",ImportAliasHasImportType:"An import alias can not use 'import type'.",ImportReflectionHasImportType:"An `import module` declaration can not use `type` modifier",IncompatibleModifiers:({modifiers:d})=>`'${d[0]}' modifier cannot be used with '${d[1]}' modifier.`,IndexSignatureHasAbstract:"Index signatures cannot have the 'abstract' modifier.",IndexSignatureHasAccessibility:({modifier:d})=>`Index signatures cannot have an accessibility modifier ('${d}').`,IndexSignatureHasDeclare:"Index signatures cannot have the 'declare' modifier.",IndexSignatureHasOverride:"'override' modifier cannot appear on an index signature.",IndexSignatureHasStatic:"Index signatures cannot have the 'static' modifier.",InitializerNotAllowedInAmbientContext:"Initializers are not allowed in ambient contexts.",InvalidModifierOnTypeMember:({modifier:d})=>`'${d}' modifier cannot appear on a type member.`,InvalidModifierOnTypeParameter:({modifier:d})=>`'${d}' modifier cannot appear on a type parameter.`,InvalidModifierOnTypeParameterPositions:({modifier:d})=>`'${d}' modifier can only appear on a type parameter of a class, interface or type alias.`,InvalidModifiersOrder:({orderedModifiers:d})=>`'${d[0]}' modifier must precede '${d[1]}' modifier.`,InvalidPropertyAccessAfterInstantiationExpression:"Invalid property access after an instantiation expression. You can either wrap the instantiation expression in parentheses, or delete the type arguments.",InvalidTupleMemberLabel:"Tuple members must be labeled with a simple identifier.",MissingInterfaceName:"'interface' declarations must be followed by an identifier.",NonAbstractClassHasAbstractMethod:"Abstract methods can only appear within an abstract class.",NonClassMethodPropertyHasAbstractModifer:"'abstract' modifier can only appear on a class, method, or property declaration.",OptionalTypeBeforeRequired:"A required element cannot follow an optional element.",OverrideNotInSubClass:"This member cannot have an 'override' modifier because its containing class does not extend another class.",PatternIsOptional:"A binding pattern parameter cannot be optional in an implementation signature.",PrivateElementHasAbstract:"Private elements cannot have the 'abstract' modifier.",PrivateElementHasAccessibility:({modifier:d})=>`Private elements cannot have an accessibility modifier ('${d}').`,ReadonlyForMethodSignature:"'readonly' modifier can only appear on a property declaration or index signature.",ReservedArrowTypeParam:"This syntax is reserved in files with the .mts or .cts extension. Add a trailing comma, as in `<T,>() => ...`.",ReservedTypeAssertion:"This syntax is reserved in files with the .mts or .cts extension. Use an `as` expression instead.",SetAccessorCannotHaveOptionalParameter:"A 'set' accessor cannot have an optional parameter.",SetAccessorCannotHaveRestParameter:"A 'set' accessor cannot have rest parameter.",SetAccessorCannotHaveReturnType:"A 'set' accessor cannot have a return type annotation.",SingleTypeParameterWithoutTrailingComma:({typeParameterName:d})=>`Single type parameter ${d} should have a trailing comma. Example usage: <${d},>.`,StaticBlockCannotHaveModifier:"Static class blocks cannot have any modifier.",TupleOptionalAfterType:"A labeled tuple optional element must be declared using a question mark after the name and before the colon (`name?: type`), rather than after the type (`name: type?`).",TypeAnnotationAfterAssign:"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`.",TypeImportCannotSpecifyDefaultAndNamed:"A type-only import can specify a default import or named bindings, but not both.",TypeModifierIsUsedInTypeExports:"The 'type' modifier cannot be used on a named export when 'export type' is used on its export statement.",TypeModifierIsUsedInTypeImports:"The 'type' modifier cannot be used on a named import when 'import type' is used on its import statement.",UnexpectedParameterModifier:"A parameter property is only allowed in a constructor implementation.",UnexpectedReadonly:"'readonly' type modifier is only permitted on array and tuple literal types.",UnexpectedTypeAnnotation:"Did not expect a type annotation here.",UnexpectedTypeCastInParameter:"Unexpected type cast in parameter position.",UnsupportedImportTypeArgument:"Argument in a type import must be a string literal.",UnsupportedParameterPropertyKind:"A parameter property may not be declared using a binding pattern.",UnsupportedSignatureParameterKind:({type:d})=>`Name in a signature must be an Identifier, ObjectPattern or ArrayPattern, instead got ${d}.`});function KW(d){switch(d){case"any":return"TSAnyKeyword";case"boolean":return"TSBooleanKeyword";case"bigint":return"TSBigIntKeyword";case"never":return"TSNeverKeyword";case"number":return"TSNumberKeyword";case"object":return"TSObjectKeyword";case"string":return"TSStringKeyword";case"symbol":return"TSSymbolKeyword";case"undefined":return"TSUndefinedKeyword";case"unknown":return"TSUnknownKeyword";default:return}}function AP(d){return d==="private"||d==="public"||d==="protected"}function $W(d){return d==="in"||d==="out"}var GW=d=>class extends d{constructor(...l){super(...l),this.tsParseInOutModifiers=this.tsParseModifiers.bind(this,{allowedModifiers:["in","out"],disallowedModifiers:["const","public","private","protected","readonly","declare","abstract","override"],errorTemplate:Te.InvalidModifierOnTypeParameter}),this.tsParseConstModifier=this.tsParseModifiers.bind(this,{allowedModifiers:["const"],disallowedModifiers:["in","out"],errorTemplate:Te.InvalidModifierOnTypeParameterPositions}),this.tsParseInOutConstModifiers=this.tsParseModifiers.bind(this,{allowedModifiers:["in","out","const"],disallowedModifiers:["public","private","protected","readonly","declare","abstract","override"],errorTemplate:Te.InvalidModifierOnTypeParameter})}getScopeHandler(){return VW}tsIsIdentifier(){return vt(this.state.type)}tsTokenCanFollowModifier(){return this.match(0)||this.match(5)||this.match(55)||this.match(21)||this.match(139)||this.isLiteralPropertyName()}tsNextTokenOnSameLineAndCanFollowModifier(){return this.next(),this.hasPrecedingLineBreak()?!1:this.tsTokenCanFollowModifier()}tsNextTokenCanFollowModifier(){return this.match(106)?(this.next(),this.tsTokenCanFollowModifier()):this.tsNextTokenOnSameLineAndCanFollowModifier()}tsParseModifier(l,u){if(!vt(this.state.type)&&this.state.type!==58&&this.state.type!==75)return;let m=this.state.value;if(l.includes(m)){if(u&&this.tsIsStartOfStaticBlocks())return;if(this.tsTryParse(this.tsNextTokenCanFollowModifier.bind(this)))return m}}tsParseModifiers({allowedModifiers:l,disallowedModifiers:u,stopOnStartOfClassStaticBlock:m,errorTemplate:v=Te.InvalidModifierOnTypeMember},S){let w=(L,F,G,se)=>{F===G&&S[se]&&this.raise(Te.InvalidModifiersOrder,L,{orderedModifiers:[G,se]})},P=(L,F,G,se)=>{(S[G]&&F===se||S[se]&&F===G)&&this.raise(Te.IncompatibleModifiers,L,{modifiers:[G,se]})};for(;;){let{startLoc:L}=this.state,F=this.tsParseModifier(l.concat(u??[]),m);if(!F)break;AP(F)?S.accessibility?this.raise(Te.DuplicateAccessibilityModifier,L,{modifier:F}):(w(L,F,F,"override"),w(L,F,F,"static"),w(L,F,F,"readonly"),S.accessibility=F):$W(F)?(S[F]&&this.raise(Te.DuplicateModifier,L,{modifier:F}),S[F]=!0,w(L,F,"in","out")):(hasOwnProperty.call(S,F)?this.raise(Te.DuplicateModifier,L,{modifier:F}):(w(L,F,"static","readonly"),w(L,F,"static","override"),w(L,F,"override","readonly"),w(L,F,"abstract","override"),P(L,F,"declare","override"),P(L,F,"static","abstract")),S[F]=!0),u!=null&&u.includes(F)&&this.raise(v,L,{modifier:F})}}tsIsListTerminator(l){switch(l){case"EnumMembers":case"TypeMembers":return this.match(8);case"HeritageClauseElement":return this.match(5);case"TupleElementTypes":return this.match(3);case"TypeParametersOrArguments":return this.match(48)}}tsParseList(l,u){let m=[];for(;!this.tsIsListTerminator(l);)m.push(u());return m}tsParseDelimitedList(l,u,m){return qW(this.tsParseDelimitedListWorker(l,u,!0,m))}tsParseDelimitedListWorker(l,u,m,v){let S=[],w=-1;for(;!this.tsIsListTerminator(l);){w=-1;let P=u();if(P==null)return;if(S.push(P),this.eat(12)){w=this.state.lastTokStartLoc.index;continue}if(this.tsIsListTerminator(l))break;m&&this.expect(12);return}return v&&(v.value=w),S}tsParseBracketedList(l,u,m,v,S){v||(m?this.expect(0):this.expect(47));let w=this.tsParseDelimitedList(l,u,S);return m?this.expect(3):this.expect(48),w}tsParseImportType(){let l=this.startNode();return this.expect(83),this.expect(10),this.match(134)?l.argument=this.parseStringLiteral(this.state.value):(this.raise(Te.UnsupportedImportTypeArgument,this.state.startLoc),l.argument=super.parseExprAtom()),this.eat(12)&&!this.match(11)?(l.options=super.parseMaybeAssignAllowIn(),this.eat(12)):l.options=null,this.expect(11),this.eat(16)&&(l.qualifier=this.tsParseEntityName(3)),this.match(47)&&(l.typeParameters=this.tsParseTypeArguments()),this.finishNode(l,"TSImportType")}tsParseEntityName(l){let u;if(l&1&&this.match(78))if(l&2)u=this.parseIdentifier(!0);else{let m=this.startNode();this.next(),u=this.finishNode(m,"ThisExpression")}else u=this.parseIdentifier(!!(l&1));for(;this.eat(16);){let m=this.startNodeAtNode(u);m.left=u,m.right=this.parseIdentifier(!!(l&1)),u=this.finishNode(m,"TSQualifiedName")}return u}tsParseTypeReference(){let l=this.startNode();return l.typeName=this.tsParseEntityName(1),!this.hasPrecedingLineBreak()&&this.match(47)&&(l.typeParameters=this.tsParseTypeArguments()),this.finishNode(l,"TSTypeReference")}tsParseThisTypePredicate(l){this.next();let u=this.startNodeAtNode(l);return u.parameterName=l,u.typeAnnotation=this.tsParseTypeAnnotation(!1),u.asserts=!1,this.finishNode(u,"TSTypePredicate")}tsParseThisTypeNode(){let l=this.startNode();return this.next(),this.finishNode(l,"TSThisType")}tsParseTypeQuery(){let l=this.startNode();return this.expect(87),this.match(83)?l.exprName=this.tsParseImportType():l.exprName=this.tsParseEntityName(3),!this.hasPrecedingLineBreak()&&this.match(47)&&(l.typeParameters=this.tsParseTypeArguments()),this.finishNode(l,"TSTypeQuery")}tsParseTypeParameter(l){let u=this.startNode();return l(u),u.name=this.tsParseTypeParameterName(),u.constraint=this.tsEatThenParseType(81),u.default=this.tsEatThenParseType(29),this.finishNode(u,"TSTypeParameter")}tsTryParseTypeParameters(l){if(this.match(47))return this.tsParseTypeParameters(l)}tsParseTypeParameters(l){let u=this.startNode();this.match(47)||this.match(143)?this.next():this.unexpected();let m={value:-1};return u.params=this.tsParseBracketedList("TypeParametersOrArguments",this.tsParseTypeParameter.bind(this,l),!1,!0,m),u.params.length===0&&this.raise(Te.EmptyTypeParameters,u),m.value!==-1&&this.addExtra(u,"trailingComma",m.value),this.finishNode(u,"TSTypeParameterDeclaration")}tsFillSignature(l,u){let m=l===19,v="parameters",S="typeAnnotation";u.typeParameters=this.tsTryParseTypeParameters(this.tsParseConstModifier),this.expect(10),u[v]=this.tsParseBindingListForSignature(),m?u[S]=this.tsParseTypeOrTypePredicateAnnotation(l):this.match(l)&&(u[S]=this.tsParseTypeOrTypePredicateAnnotation(l))}tsParseBindingListForSignature(){let l=super.parseBindingList(11,41,2);for(let u of l){let{type:m}=u;(m==="AssignmentPattern"||m==="TSParameterProperty")&&this.raise(Te.UnsupportedSignatureParameterKind,u,{type:m})}return l}tsParseTypeMemberSemicolon(){!this.eat(12)&&!this.isLineTerminator()&&this.expect(13)}tsParseSignatureMember(l,u){return this.tsFillSignature(14,u),this.tsParseTypeMemberSemicolon(),this.finishNode(u,l)}tsIsUnambiguouslyIndexSignature(){return this.next(),vt(this.state.type)?(this.next(),this.match(14)):!1}tsTryParseIndexSignature(l){if(!(this.match(0)&&this.tsLookAhead(this.tsIsUnambiguouslyIndexSignature.bind(this))))return;this.expect(0);let u=this.parseIdentifier();u.typeAnnotation=this.tsParseTypeAnnotation(),this.resetEndLocation(u),this.expect(3),l.parameters=[u];let m=this.tsTryParseTypeAnnotation();return m&&(l.typeAnnotation=m),this.tsParseTypeMemberSemicolon(),this.finishNode(l,"TSIndexSignature")}tsParsePropertyOrMethodSignature(l,u){this.eat(17)&&(l.optional=!0);let m=l;if(this.match(10)||this.match(47)){u&&this.raise(Te.ReadonlyForMethodSignature,l);let v=m;v.kind&&this.match(47)&&this.raise(Te.AccessorCannotHaveTypeParameters,this.state.curPosition()),this.tsFillSignature(14,v),this.tsParseTypeMemberSemicolon();let S="parameters",w="typeAnnotation";if(v.kind==="get")v[S].length>0&&(this.raise(D.BadGetterArity,this.state.curPosition()),this.isThisParam(v[S][0])&&this.raise(Te.AccessorCannotDeclareThisParameter,this.state.curPosition()));else if(v.kind==="set"){if(v[S].length!==1)this.raise(D.BadSetterArity,this.state.curPosition());else{let P=v[S][0];this.isThisParam(P)&&this.raise(Te.AccessorCannotDeclareThisParameter,this.state.curPosition()),P.type==="Identifier"&&P.optional&&this.raise(Te.SetAccessorCannotHaveOptionalParameter,this.state.curPosition()),P.type==="RestElement"&&this.raise(Te.SetAccessorCannotHaveRestParameter,this.state.curPosition())}v[w]&&this.raise(Te.SetAccessorCannotHaveReturnType,v[w])}else v.kind="method";return this.finishNode(v,"TSMethodSignature")}else{let v=m;u&&(v.readonly=!0);let S=this.tsTryParseTypeAnnotation();return S&&(v.typeAnnotation=S),this.tsParseTypeMemberSemicolon(),this.finishNode(v,"TSPropertySignature")}}tsParseTypeMember(){let l=this.startNode();if(this.match(10)||this.match(47))return this.tsParseSignatureMember("TSCallSignatureDeclaration",l);if(this.match(77)){let m=this.startNode();return this.next(),this.match(10)||this.match(47)?this.tsParseSignatureMember("TSConstructSignatureDeclaration",l):(l.key=this.createIdentifier(m,"new"),this.tsParsePropertyOrMethodSignature(l,!1))}return this.tsParseModifiers({allowedModifiers:["readonly"],disallowedModifiers:["declare","abstract","private","protected","public","static","override"]},l),this.tsTryParseIndexSignature(l)||(super.parsePropertyName(l),!l.computed&&l.key.type==="Identifier"&&(l.key.name==="get"||l.key.name==="set")&&this.tsTokenCanFollowModifier()&&(l.kind=l.key.name,super.parsePropertyName(l)),this.tsParsePropertyOrMethodSignature(l,!!l.readonly))}tsParseTypeLiteral(){let l=this.startNode();return l.members=this.tsParseObjectTypeMembers(),this.finishNode(l,"TSTypeLiteral")}tsParseObjectTypeMembers(){this.expect(5);let l=this.tsParseList("TypeMembers",this.tsParseTypeMember.bind(this));return this.expect(8),l}tsIsStartOfMappedType(){return this.next(),this.eat(53)?this.isContextual(122):(this.isContextual(122)&&this.next(),!this.match(0)||(this.next(),!this.tsIsIdentifier())?!1:(this.next(),this.match(58)))}tsParseMappedType(){let l=this.startNode();this.expect(5),this.match(53)?(l.readonly=this.state.value,this.next(),this.expectContextual(122)):this.eatContextual(122)&&(l.readonly=!0),this.expect(0);{let u=this.startNode();u.name=this.tsParseTypeParameterName(),u.constraint=this.tsExpectThenParseType(58),l.typeParameter=this.finishNode(u,"TSTypeParameter")}return l.nameType=this.eatContextual(93)?this.tsParseType():null,this.expect(3),this.match(53)?(l.optional=this.state.value,this.next(),this.expect(17)):this.eat(17)&&(l.optional=!0),l.typeAnnotation=this.tsTryParseType(),this.semicolon(),this.expect(8),this.finishNode(l,"TSMappedType")}tsParseTupleType(){let l=this.startNode();l.elementTypes=this.tsParseBracketedList("TupleElementTypes",this.tsParseTupleElementType.bind(this),!0,!1);let u=!1;return l.elementTypes.forEach(m=>{let{type:v}=m;u&&v!=="TSRestType"&&v!=="TSOptionalType"&&!(v==="TSNamedTupleMember"&&m.optional)&&this.raise(Te.OptionalTypeBeforeRequired,m),u||(u=v==="TSNamedTupleMember"&&m.optional||v==="TSOptionalType")}),this.finishNode(l,"TSTupleType")}tsParseTupleElementType(){let l=this.state.startLoc,u=this.eat(21),{startLoc:m}=this.state,v,S,w,P,L=ni(this.state.type)?this.lookaheadCharCode():null;if(L===58)v=!0,w=!1,S=this.parseIdentifier(!0),this.expect(14),P=this.tsParseType();else if(L===63){w=!0;let F=this.state.value,G=this.tsParseNonArrayType();this.lookaheadCharCode()===58?(v=!0,S=this.createIdentifier(this.startNodeAt(m),F),this.expect(17),this.expect(14),P=this.tsParseType()):(v=!1,P=G,this.expect(17))}else P=this.tsParseType(),w=this.eat(17),v=this.eat(14);if(v){let F;S?(F=this.startNodeAt(m),F.optional=w,F.label=S,F.elementType=P,this.eat(17)&&(F.optional=!0,this.raise(Te.TupleOptionalAfterType,this.state.lastTokStartLoc))):(F=this.startNodeAt(m),F.optional=w,this.raise(Te.InvalidTupleMemberLabel,P),F.label=P,F.elementType=this.tsParseType()),P=this.finishNode(F,"TSNamedTupleMember")}else if(w){let F=this.startNodeAt(m);F.typeAnnotation=P,P=this.finishNode(F,"TSOptionalType")}if(u){let F=this.startNodeAt(l);F.typeAnnotation=P,P=this.finishNode(F,"TSRestType")}return P}tsParseParenthesizedType(){let l=this.startNode();return this.expect(10),l.typeAnnotation=this.tsParseType(),this.expect(11),this.finishNode(l,"TSParenthesizedType")}tsParseFunctionOrConstructorType(l,u){let m=this.startNode();return l==="TSConstructorType"&&(m.abstract=!!u,u&&this.next(),this.next()),this.tsInAllowConditionalTypesContext(()=>this.tsFillSignature(19,m)),this.finishNode(m,l)}tsParseLiteralTypeNode(){let l=this.startNode();switch(this.state.type){case 135:case 136:case 134:case 85:case 86:l.literal=super.parseExprAtom();break;default:this.unexpected()}return this.finishNode(l,"TSLiteralType")}tsParseTemplateLiteralType(){{let l=this.startNode();return l.literal=super.parseTemplate(!1),this.finishNode(l,"TSLiteralType")}}parseTemplateSubstitution(){return this.state.inType?this.tsParseType():super.parseTemplateSubstitution()}tsParseThisTypeOrThisTypePredicate(){let l=this.tsParseThisTypeNode();return this.isContextual(116)&&!this.hasPrecedingLineBreak()?this.tsParseThisTypePredicate(l):l}tsParseNonArrayType(){switch(this.state.type){case 134:case 135:case 136:case 85:case 86:return this.tsParseLiteralTypeNode();case 53:if(this.state.value==="-"){let l=this.startNode(),u=this.lookahead();return u.type!==135&&u.type!==136&&this.unexpected(),l.literal=this.parseMaybeUnary(),this.finishNode(l,"TSLiteralType")}break;case 78:return this.tsParseThisTypeOrThisTypePredicate();case 87:return this.tsParseTypeQuery();case 83:return this.tsParseImportType();case 5:return this.tsLookAhead(this.tsIsStartOfMappedType.bind(this))?this.tsParseMappedType():this.tsParseTypeLiteral();case 0:return this.tsParseTupleType();case 10:return this.tsParseParenthesizedType();case 25:case 24:return this.tsParseTemplateLiteralType();default:{let{type:l}=this.state;if(vt(l)||l===88||l===84){let u=l===88?"TSVoidKeyword":l===84?"TSNullKeyword":KW(this.state.value);if(u!==void 0&&this.lookaheadCharCode()!==46){let m=this.startNode();return this.next(),this.finishNode(m,u)}return this.tsParseTypeReference()}}}this.unexpected()}tsParseArrayTypeOrHigher(){let{startLoc:l}=this.state,u=this.tsParseNonArrayType();for(;!this.hasPrecedingLineBreak()&&this.eat(0);)if(this.match(3)){let m=this.startNodeAt(l);m.elementType=u,this.expect(3),u=this.finishNode(m,"TSArrayType")}else{let m=this.startNodeAt(l);m.objectType=u,m.indexType=this.tsParseType(),this.expect(3),u=this.finishNode(m,"TSIndexedAccessType")}return u}tsParseTypeOperator(){let l=this.startNode(),u=this.state.value;return this.next(),l.operator=u,l.typeAnnotation=this.tsParseTypeOperatorOrHigher(),u==="readonly"&&this.tsCheckTypeAnnotationForReadOnly(l),this.finishNode(l,"TSTypeOperator")}tsCheckTypeAnnotationForReadOnly(l){switch(l.typeAnnotation.type){case"TSTupleType":case"TSArrayType":return;default:this.raise(Te.UnexpectedReadonly,l)}}tsParseInferType(){let l=this.startNode();this.expectContextual(115);let u=this.startNode();return u.name=this.tsParseTypeParameterName(),u.constraint=this.tsTryParse(()=>this.tsParseConstraintForInferType()),l.typeParameter=this.finishNode(u,"TSTypeParameter"),this.finishNode(l,"TSInferType")}tsParseConstraintForInferType(){if(this.eat(81)){let l=this.tsInDisallowConditionalTypesContext(()=>this.tsParseType());if(this.state.inDisallowConditionalTypesContext||!this.match(17))return l}}tsParseTypeOperatorOrHigher(){return Q4(this.state.type)&&!this.state.containsEsc?this.tsParseTypeOperator():this.isContextual(115)?this.tsParseInferType():this.tsInAllowConditionalTypesContext(()=>this.tsParseArrayTypeOrHigher())}tsParseUnionOrIntersectionType(l,u,m){let v=this.startNode(),S=this.eat(m),w=[];do w.push(u());while(this.eat(m));return w.length===1&&!S?w[0]:(v.types=w,this.finishNode(v,l))}tsParseIntersectionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSIntersectionType",this.tsParseTypeOperatorOrHigher.bind(this),45)}tsParseUnionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSUnionType",this.tsParseIntersectionTypeOrHigher.bind(this),43)}tsIsStartOfFunctionType(){return this.match(47)?!0:this.match(10)&&this.tsLookAhead(this.tsIsUnambiguouslyStartOfFunctionType.bind(this))}tsSkipParameterStart(){if(vt(this.state.type)||this.match(78))return this.next(),!0;if(this.match(5)){let{errors:l}=this.state,u=l.length;try{return this.parseObjectLike(8,!0),l.length===u}catch{return!1}}if(this.match(0)){this.next();let{errors:l}=this.state,u=l.length;try{return super.parseBindingList(3,93,1),l.length===u}catch{return!1}}return!1}tsIsUnambiguouslyStartOfFunctionType(){return this.next(),!!(this.match(11)||this.match(21)||this.tsSkipParameterStart()&&(this.match(14)||this.match(12)||this.match(17)||this.match(29)||this.match(11)&&(this.next(),this.match(19))))}tsParseTypeOrTypePredicateAnnotation(l){return this.tsInType(()=>{let u=this.startNode();this.expect(l);let m=this.startNode(),v=!!this.tsTryParse(this.tsParseTypePredicateAsserts.bind(this));if(v&&this.match(78)){let P=this.tsParseThisTypeOrThisTypePredicate();return P.type==="TSThisType"?(m.parameterName=P,m.asserts=!0,m.typeAnnotation=null,P=this.finishNode(m,"TSTypePredicate")):(this.resetStartLocationFromNode(P,m),P.asserts=!0),u.typeAnnotation=P,this.finishNode(u,"TSTypeAnnotation")}let S=this.tsIsIdentifier()&&this.tsTryParse(this.tsParseTypePredicatePrefix.bind(this));if(!S)return v?(m.parameterName=this.parseIdentifier(),m.asserts=v,m.typeAnnotation=null,u.typeAnnotation=this.finishNode(m,"TSTypePredicate"),this.finishNode(u,"TSTypeAnnotation")):this.tsParseTypeAnnotation(!1,u);let w=this.tsParseTypeAnnotation(!1);return m.parameterName=S,m.typeAnnotation=w,m.asserts=v,u.typeAnnotation=this.finishNode(m,"TSTypePredicate"),this.finishNode(u,"TSTypeAnnotation")})}tsTryParseTypeOrTypePredicateAnnotation(){if(this.match(14))return this.tsParseTypeOrTypePredicateAnnotation(14)}tsTryParseTypeAnnotation(){if(this.match(14))return this.tsParseTypeAnnotation()}tsTryParseType(){return this.tsEatThenParseType(14)}tsParseTypePredicatePrefix(){let l=this.parseIdentifier();if(this.isContextual(116)&&!this.hasPrecedingLineBreak())return this.next(),l}tsParseTypePredicateAsserts(){if(this.state.type!==109)return!1;let l=this.state.containsEsc;return this.next(),!vt(this.state.type)&&!this.match(78)?!1:(l&&this.raise(D.InvalidEscapedReservedWord,this.state.lastTokStartLoc,{reservedWord:"asserts"}),!0)}tsParseTypeAnnotation(l=!0,u=this.startNode()){return this.tsInType(()=>{l&&this.expect(14),u.typeAnnotation=this.tsParseType()}),this.finishNode(u,"TSTypeAnnotation")}tsParseType(){EP(this.state.inType);let l=this.tsParseNonConditionalType();if(this.state.inDisallowConditionalTypesContext||this.hasPrecedingLineBreak()||!this.eat(81))return l;let u=this.startNodeAtNode(l);return u.checkType=l,u.extendsType=this.tsInDisallowConditionalTypesContext(()=>this.tsParseNonConditionalType()),this.expect(17),u.trueType=this.tsInAllowConditionalTypesContext(()=>this.tsParseType()),this.expect(14),u.falseType=this.tsInAllowConditionalTypesContext(()=>this.tsParseType()),this.finishNode(u,"TSConditionalType")}isAbstractConstructorSignature(){return this.isContextual(124)&&this.lookahead().type===77}tsParseNonConditionalType(){return this.tsIsStartOfFunctionType()?this.tsParseFunctionOrConstructorType("TSFunctionType"):this.match(77)?this.tsParseFunctionOrConstructorType("TSConstructorType"):this.isAbstractConstructorSignature()?this.tsParseFunctionOrConstructorType("TSConstructorType",!0):this.tsParseUnionTypeOrHigher()}tsParseTypeAssertion(){this.getPluginOption("typescript","disallowAmbiguousJSXLike")&&this.raise(Te.ReservedTypeAssertion,this.state.startLoc);let l=this.startNode();return l.typeAnnotation=this.tsInType(()=>(this.next(),this.match(75)?this.tsParseTypeReference():this.tsParseType())),this.expect(48),l.expression=this.parseMaybeUnary(),this.finishNode(l,"TSTypeAssertion")}tsParseHeritageClause(l){let u=this.state.startLoc,m=this.tsParseDelimitedList("HeritageClauseElement",()=>{let v=this.startNode();return v.expression=this.tsParseEntityName(3),this.match(47)&&(v.typeParameters=this.tsParseTypeArguments()),this.finishNode(v,"TSExpressionWithTypeArguments")});return m.length||this.raise(Te.EmptyHeritageClauseType,u,{token:l}),m}tsParseInterfaceDeclaration(l,u={}){if(this.hasFollowingLineBreak())return null;this.expectContextual(129),u.declare&&(l.declare=!0),vt(this.state.type)?(l.id=this.parseIdentifier(),this.checkIdentifier(l.id,130)):(l.id=null,this.raise(Te.MissingInterfaceName,this.state.startLoc)),l.typeParameters=this.tsTryParseTypeParameters(this.tsParseInOutConstModifiers),this.eat(81)&&(l.extends=this.tsParseHeritageClause("extends"));let m=this.startNode();return m.body=this.tsInType(this.tsParseObjectTypeMembers.bind(this)),l.body=this.finishNode(m,"TSInterfaceBody"),this.finishNode(l,"TSInterfaceDeclaration")}tsParseTypeAliasDeclaration(l){return l.id=this.parseIdentifier(),this.checkIdentifier(l.id,2),l.typeAnnotation=this.tsInType(()=>{if(l.typeParameters=this.tsTryParseTypeParameters(this.tsParseInOutModifiers),this.expect(29),this.isContextual(114)&&this.lookahead().type!==16){let u=this.startNode();return this.next(),this.finishNode(u,"TSIntrinsicKeyword")}return this.tsParseType()}),this.semicolon(),this.finishNode(l,"TSTypeAliasDeclaration")}tsInTopLevelContext(l){if(this.curContext()!==$.brace){let u=this.state.context;this.state.context=[u[0]];try{return l()}finally{this.state.context=u}}else return l()}tsInType(l){let u=this.state.inType;this.state.inType=!0;try{return l()}finally{this.state.inType=u}}tsInDisallowConditionalTypesContext(l){let u=this.state.inDisallowConditionalTypesContext;this.state.inDisallowConditionalTypesContext=!0;try{return l()}finally{this.state.inDisallowConditionalTypesContext=u}}tsInAllowConditionalTypesContext(l){let u=this.state.inDisallowConditionalTypesContext;this.state.inDisallowConditionalTypesContext=!1;try{return l()}finally{this.state.inDisallowConditionalTypesContext=u}}tsEatThenParseType(l){if(this.match(l))return this.tsNextThenParseType()}tsExpectThenParseType(l){return this.tsInType(()=>(this.expect(l),this.tsParseType()))}tsNextThenParseType(){return this.tsInType(()=>(this.next(),this.tsParseType()))}tsParseEnumMember(){let l=this.startNode();return l.id=this.match(134)?super.parseStringLiteral(this.state.value):this.parseIdentifier(!0),this.eat(29)&&(l.initializer=super.parseMaybeAssignAllowIn()),this.finishNode(l,"TSEnumMember")}tsParseEnumDeclaration(l,u={}){return u.const&&(l.const=!0),u.declare&&(l.declare=!0),this.expectContextual(126),l.id=this.parseIdentifier(),this.checkIdentifier(l.id,l.const?8971:8459),this.expect(5),l.members=this.tsParseDelimitedList("EnumMembers",this.tsParseEnumMember.bind(this)),this.expect(8),this.finishNode(l,"TSEnumDeclaration")}tsParseEnumBody(){let l=this.startNode();return this.expect(5),l.members=this.tsParseDelimitedList("EnumMembers",this.tsParseEnumMember.bind(this)),this.expect(8),this.finishNode(l,"TSEnumBody")}tsParseModuleBlock(){let l=this.startNode();return this.scope.enter(0),this.expect(5),super.parseBlockOrModuleBlockBody(l.body=[],void 0,!0,8),this.scope.exit(),this.finishNode(l,"TSModuleBlock")}tsParseModuleOrNamespaceDeclaration(l,u=!1){if(l.id=this.parseIdentifier(),u||this.checkIdentifier(l.id,1024),this.eat(16)){let m=this.startNode();this.tsParseModuleOrNamespaceDeclaration(m,!0),l.body=m}else this.scope.enter(256),this.prodParam.enter(0),l.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit();return this.finishNode(l,"TSModuleDeclaration")}tsParseAmbientExternalModuleDeclaration(l){return this.isContextual(112)?(l.kind="global",l.global=!0,l.id=this.parseIdentifier()):this.match(134)?(l.kind="module",l.id=super.parseStringLiteral(this.state.value)):this.unexpected(),this.match(5)?(this.scope.enter(256),this.prodParam.enter(0),l.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit()):this.semicolon(),this.finishNode(l,"TSModuleDeclaration")}tsParseImportEqualsDeclaration(l,u,m){l.isExport=m||!1,l.id=u||this.parseIdentifier(),this.checkIdentifier(l.id,4096),this.expect(29);let v=this.tsParseModuleReference();return l.importKind==="type"&&v.type!=="TSExternalModuleReference"&&this.raise(Te.ImportAliasHasImportType,v),l.moduleReference=v,this.semicolon(),this.finishNode(l,"TSImportEqualsDeclaration")}tsIsExternalModuleReference(){return this.isContextual(119)&&this.lookaheadCharCode()===40}tsParseModuleReference(){return this.tsIsExternalModuleReference()?this.tsParseExternalModuleReference():this.tsParseEntityName(0)}tsParseExternalModuleReference(){let l=this.startNode();return this.expectContextual(119),this.expect(10),this.match(134)||this.unexpected(),l.expression=super.parseExprAtom(),this.expect(11),this.sawUnambiguousESM=!0,this.finishNode(l,"TSExternalModuleReference")}tsLookAhead(l){let u=this.state.clone(),m=l();return this.state=u,m}tsTryParseAndCatch(l){let u=this.tryParse(m=>l()||m());if(!(u.aborted||!u.node))return u.error&&(this.state=u.failState),u.node}tsTryParse(l){let u=this.state.clone(),m=l();if(m!==void 0&&m!==!1)return m;this.state=u}tsTryParseDeclare(l){if(this.isLineTerminator())return;let u=this.state.type,m;return this.isContextual(100)&&(u=74,m="let"),this.tsInAmbientContext(()=>{switch(u){case 68:return l.declare=!0,super.parseFunctionStatement(l,!1,!1);case 80:return l.declare=!0,this.parseClass(l,!0,!1);case 126:return this.tsParseEnumDeclaration(l,{declare:!0});case 112:return this.tsParseAmbientExternalModuleDeclaration(l);case 75:case 74:return!this.match(75)||!this.isLookaheadContextual("enum")?(l.declare=!0,this.parseVarStatement(l,m||this.state.value,!0)):(this.expect(75),this.tsParseEnumDeclaration(l,{const:!0,declare:!0}));case 129:{let v=this.tsParseInterfaceDeclaration(l,{declare:!0});if(v)return v}default:if(vt(u))return this.tsParseDeclaration(l,this.state.value,!0,null)}})}tsTryParseExportDeclaration(){return this.tsParseDeclaration(this.startNode(),this.state.value,!0,null)}tsParseExpressionStatement(l,u,m){switch(u.name){case"declare":{let v=this.tsTryParseDeclare(l);return v&&(v.declare=!0),v}case"global":if(this.match(5)){this.scope.enter(256),this.prodParam.enter(0);let v=l;return v.kind="global",l.global=!0,v.id=u,v.body=this.tsParseModuleBlock(),this.scope.exit(),this.prodParam.exit(),this.finishNode(v,"TSModuleDeclaration")}break;default:return this.tsParseDeclaration(l,u.name,!1,m)}}tsParseDeclaration(l,u,m,v){switch(u){case"abstract":if(this.tsCheckLineTerminator(m)&&(this.match(80)||vt(this.state.type)))return this.tsParseAbstractDeclaration(l,v);break;case"module":if(this.tsCheckLineTerminator(m)){if(this.match(134))return this.tsParseAmbientExternalModuleDeclaration(l);if(vt(this.state.type))return l.kind="module",this.tsParseModuleOrNamespaceDeclaration(l)}break;case"namespace":if(this.tsCheckLineTerminator(m)&&vt(this.state.type))return l.kind="namespace",this.tsParseModuleOrNamespaceDeclaration(l);break;case"type":if(this.tsCheckLineTerminator(m)&&vt(this.state.type))return this.tsParseTypeAliasDeclaration(l);break}}tsCheckLineTerminator(l){return l?this.hasFollowingLineBreak()?!1:(this.next(),!0):!this.isLineTerminator()}tsTryParseGenericAsyncArrowFunction(l){if(!this.match(47))return;let u=this.state.maybeInArrowParameters;this.state.maybeInArrowParameters=!0;let m=this.tsTryParseAndCatch(()=>{let v=this.startNodeAt(l);return v.typeParameters=this.tsParseTypeParameters(this.tsParseConstModifier),super.parseFunctionParams(v),v.returnType=this.tsTryParseTypeOrTypePredicateAnnotation(),this.expect(19),v});if(this.state.maybeInArrowParameters=u,!!m)return super.parseArrowExpression(m,null,!0)}tsParseTypeArgumentsInExpression(){if(this.reScan_lt()===47)return this.tsParseTypeArguments()}tsParseTypeArguments(){let l=this.startNode();return l.params=this.tsInType(()=>this.tsInTopLevelContext(()=>(this.expect(47),this.tsParseDelimitedList("TypeParametersOrArguments",this.tsParseType.bind(this))))),l.params.length===0?this.raise(Te.EmptyTypeArguments,l):!this.state.inType&&this.curContext()===$.brace&&this.reScan_lt_gt(),this.expect(48),this.finishNode(l,"TSTypeParameterInstantiation")}tsIsDeclarationStart(){return Z4(this.state.type)}isExportDefaultSpecifier(){return this.tsIsDeclarationStart()?!1:super.isExportDefaultSpecifier()}parseAssignableListItem(l,u){let m=this.state.startLoc,v={};this.tsParseModifiers({allowedModifiers:["public","private","protected","override","readonly"]},v);let S=v.accessibility,w=v.override,P=v.readonly;!(l&4)&&(S||P||w)&&this.raise(Te.UnexpectedParameterModifier,m);let L=this.parseMaybeDefault();l&2&&this.parseFunctionParamType(L);let F=this.parseMaybeDefault(L.loc.start,L);if(S||P||w){let G=this.startNodeAt(m);return u.length&&(G.decorators=u),S&&(G.accessibility=S),P&&(G.readonly=P),w&&(G.override=w),F.type!=="Identifier"&&F.type!=="AssignmentPattern"&&this.raise(Te.UnsupportedParameterPropertyKind,G),G.parameter=F,this.finishNode(G,"TSParameterProperty")}return u.length&&(L.decorators=u),F}isSimpleParameter(l){return l.type==="TSParameterProperty"&&super.isSimpleParameter(l.parameter)||super.isSimpleParameter(l)}tsDisallowOptionalPattern(l){for(let u of l.params)u.type!=="Identifier"&&u.optional&&!this.state.isAmbientContext&&this.raise(Te.PatternIsOptional,u)}setArrowFunctionParameters(l,u,m){super.setArrowFunctionParameters(l,u,m),this.tsDisallowOptionalPattern(l)}parseFunctionBodyAndFinish(l,u,m=!1){this.match(14)&&(l.returnType=this.tsParseTypeOrTypePredicateAnnotation(14));let v=u==="FunctionDeclaration"?"TSDeclareFunction":u==="ClassMethod"||u==="ClassPrivateMethod"?"TSDeclareMethod":void 0;return v&&!this.match(5)&&this.isLineTerminator()?this.finishNode(l,v):v==="TSDeclareFunction"&&this.state.isAmbientContext&&(this.raise(Te.DeclareFunctionHasImplementation,l),l.declare)?super.parseFunctionBodyAndFinish(l,v,m):(this.tsDisallowOptionalPattern(l),super.parseFunctionBodyAndFinish(l,u,m))}registerFunctionStatementId(l){!l.body&&l.id?this.checkIdentifier(l.id,1024):super.registerFunctionStatementId(l)}tsCheckForInvalidTypeCasts(l){l.forEach(u=>{u?.type==="TSTypeCastExpression"&&this.raise(Te.UnexpectedTypeAnnotation,u.typeAnnotation)})}toReferencedList(l,u){return this.tsCheckForInvalidTypeCasts(l),l}parseArrayLike(l,u,m,v){let S=super.parseArrayLike(l,u,m,v);return S.type==="ArrayExpression"&&this.tsCheckForInvalidTypeCasts(S.elements),S}parseSubscript(l,u,m,v){if(!this.hasPrecedingLineBreak()&&this.match(35)){this.state.canStartJSXElement=!1,this.next();let w=this.startNodeAt(u);return w.expression=l,this.finishNode(w,"TSNonNullExpression")}let S=!1;if(this.match(18)&&this.lookaheadCharCode()===60){if(m)return v.stop=!0,l;v.optionalChainMember=S=!0,this.next()}if(this.match(47)||this.match(51)){let w,P=this.tsTryParseAndCatch(()=>{if(!m&&this.atPossibleAsyncArrow(l)){let se=this.tsTryParseGenericAsyncArrowFunction(u);if(se)return se}let L=this.tsParseTypeArgumentsInExpression();if(!L)return;if(S&&!this.match(10)){w=this.state.curPosition();return}if(zg(this.state.type)){let se=super.parseTaggedTemplateExpression(l,u,v);return se.typeParameters=L,se}if(!m&&this.eat(10)){let se=this.startNodeAt(u);return se.callee=l,se.arguments=this.parseCallExpressionArguments(11),this.tsCheckForInvalidTypeCasts(se.arguments),se.typeParameters=L,v.optionalChainMember&&(se.optional=S),this.finishCallExpression(se,v.optionalChainMember)}let F=this.state.type;if(F===48||F===52||F!==10&&hC(F)&&!this.hasPrecedingLineBreak())return;let G=this.startNodeAt(u);return G.expression=l,G.typeParameters=L,this.finishNode(G,"TSInstantiationExpression")});if(w&&this.unexpected(w,10),P)return P.type==="TSInstantiationExpression"&&(this.match(16)||this.match(18)&&this.lookaheadCharCode()!==40)&&this.raise(Te.InvalidPropertyAccessAfterInstantiationExpression,this.state.startLoc),P}return super.parseSubscript(l,u,m,v)}parseNewCallee(l){var u;super.parseNewCallee(l);let{callee:m}=l;m.type==="TSInstantiationExpression"&&!((u=m.extra)!=null&&u.parenthesized)&&(l.typeParameters=m.typeParameters,l.callee=m.expression)}parseExprOp(l,u,m){let v;if(jg(58)>m&&!this.hasPrecedingLineBreak()&&(this.isContextual(93)||(v=this.isContextual(120)))){let S=this.startNodeAt(u);return S.expression=l,S.typeAnnotation=this.tsInType(()=>(this.next(),this.match(75)?(v&&this.raise(D.UnexpectedKeyword,this.state.startLoc,{keyword:"const"}),this.tsParseTypeReference()):this.tsParseType())),this.finishNode(S,v?"TSSatisfiesExpression":"TSAsExpression"),this.reScan_lt_gt(),this.parseExprOp(S,u,m)}return super.parseExprOp(l,u,m)}checkReservedWord(l,u,m,v){this.state.isAmbientContext||super.checkReservedWord(l,u,m,v)}checkImportReflection(l){super.checkImportReflection(l),l.module&&l.importKind!=="value"&&this.raise(Te.ImportReflectionHasImportType,l.specifiers[0].loc.start)}checkDuplicateExports(){}isPotentialImportPhase(l){if(super.isPotentialImportPhase(l))return!0;if(this.isContextual(130)){let u=this.lookaheadCharCode();return l?u===123||u===42:u!==61}return!l&&this.isContextual(87)}applyImportPhase(l,u,m,v){super.applyImportPhase(l,u,m,v),u?l.exportKind=m==="type"?"type":"value":l.importKind=m==="type"||m==="typeof"?m:"value"}parseImport(l){if(this.match(134))return l.importKind="value",super.parseImport(l);let u;if(vt(this.state.type)&&this.lookaheadCharCode()===61)return l.importKind="value",this.tsParseImportEqualsDeclaration(l);if(this.isContextual(130)){let m=this.parseMaybeImportPhase(l,!1);if(this.lookaheadCharCode()===61)return this.tsParseImportEqualsDeclaration(l,m);u=super.parseImportSpecifiersAndAfter(l,m)}else u=super.parseImport(l);return u.importKind==="type"&&u.specifiers.length>1&&u.specifiers[0].type==="ImportDefaultSpecifier"&&this.raise(Te.TypeImportCannotSpecifyDefaultAndNamed,u),u}parseExport(l,u){if(this.match(83)){let m=l;this.next();let v=null;return this.isContextual(130)&&this.isPotentialImportPhase(!1)?v=this.parseMaybeImportPhase(m,!1):m.importKind="value",this.tsParseImportEqualsDeclaration(m,v,!0)}else if(this.eat(29)){let m=l;return m.expression=super.parseExpression(),this.semicolon(),this.sawUnambiguousESM=!0,this.finishNode(m,"TSExportAssignment")}else if(this.eatContextual(93)){let m=l;return this.expectContextual(128),m.id=this.parseIdentifier(),this.semicolon(),this.finishNode(m,"TSNamespaceExportDeclaration")}else return super.parseExport(l,u)}isAbstractClass(){return this.isContextual(124)&&this.lookahead().type===80}parseExportDefaultExpression(){if(this.isAbstractClass()){let l=this.startNode();return this.next(),l.abstract=!0,this.parseClass(l,!0,!0)}if(this.match(129)){let l=this.tsParseInterfaceDeclaration(this.startNode());if(l)return l}return super.parseExportDefaultExpression()}parseVarStatement(l,u,m=!1){let{isAmbientContext:v}=this.state,S=super.parseVarStatement(l,u,m||v);if(!v)return S;for(let{id:w,init:P}of S.declarations)P&&(u!=="const"||w.typeAnnotation?this.raise(Te.InitializerNotAllowedInAmbientContext,P):XW(P,this.hasPlugin("estree"))||this.raise(Te.ConstInitializerMustBeStringOrNumericLiteralOrLiteralEnumReference,P));return S}parseStatementContent(l,u){if(this.match(75)&&this.isLookaheadContextual("enum")){let m=this.startNode();return this.expect(75),this.tsParseEnumDeclaration(m,{const:!0})}if(this.isContextual(126))return this.tsParseEnumDeclaration(this.startNode());if(this.isContextual(129)){let m=this.tsParseInterfaceDeclaration(this.startNode());if(m)return m}return super.parseStatementContent(l,u)}parseAccessModifier(){return this.tsParseModifier(["public","protected","private"])}tsHasSomeModifiers(l,u){return u.some(m=>AP(m)?l.accessibility===m:!!l[m])}tsIsStartOfStaticBlocks(){return this.isContextual(106)&&this.lookaheadCharCode()===123}parseClassMember(l,u,m){let v=["declare","private","public","protected","override","abstract","readonly","static"];this.tsParseModifiers({allowedModifiers:v,disallowedModifiers:["in","out"],stopOnStartOfClassStaticBlock:!0,errorTemplate:Te.InvalidModifierOnTypeParameterPositions},u);let S=()=>{this.tsIsStartOfStaticBlocks()?(this.next(),this.next(),this.tsHasSomeModifiers(u,v)&&this.raise(Te.StaticBlockCannotHaveModifier,this.state.curPosition()),super.parseClassStaticBlock(l,u)):this.parseClassMemberWithIsStatic(l,u,m,!!u.static)};u.declare?this.tsInAmbientContext(S):S()}parseClassMemberWithIsStatic(l,u,m,v){let S=this.tsTryParseIndexSignature(u);if(S){l.body.push(S),u.abstract&&this.raise(Te.IndexSignatureHasAbstract,u),u.accessibility&&this.raise(Te.IndexSignatureHasAccessibility,u,{modifier:u.accessibility}),u.declare&&this.raise(Te.IndexSignatureHasDeclare,u),u.override&&this.raise(Te.IndexSignatureHasOverride,u);return}!this.state.inAbstractClass&&u.abstract&&this.raise(Te.NonAbstractClassHasAbstractMethod,u),u.override&&(m.hadSuperClass||this.raise(Te.OverrideNotInSubClass,u)),super.parseClassMemberWithIsStatic(l,u,m,v)}parsePostMemberNameModifiers(l){this.eat(17)&&(l.optional=!0),l.readonly&&this.match(10)&&this.raise(Te.ClassMethodHasReadonly,l),l.declare&&this.match(10)&&this.raise(Te.ClassMethodHasDeclare,l)}parseExpressionStatement(l,u,m){return(u.type==="Identifier"?this.tsParseExpressionStatement(l,u,m):void 0)||super.parseExpressionStatement(l,u,m)}shouldParseExportDeclaration(){return this.tsIsDeclarationStart()?!0:super.shouldParseExportDeclaration()}parseConditional(l,u,m){if(!this.state.maybeInArrowParameters||!this.match(17))return super.parseConditional(l,u,m);let v=this.tryParse(()=>super.parseConditional(l,u));return v.node?(v.error&&(this.state=v.failState),v.node):(v.error&&super.setOptionalParametersError(m,v.error),l)}parseParenItem(l,u){let m=super.parseParenItem(l,u);if(this.eat(17)&&(m.optional=!0,this.resetEndLocation(l)),this.match(14)){let v=this.startNodeAt(u);return v.expression=l,v.typeAnnotation=this.tsParseTypeAnnotation(),this.finishNode(v,"TSTypeCastExpression")}return l}parseExportDeclaration(l){if(!this.state.isAmbientContext&&this.isContextual(125))return this.tsInAmbientContext(()=>this.parseExportDeclaration(l));let u=this.state.startLoc,m=this.eatContextual(125);if(m&&(this.isContextual(125)||!this.shouldParseExportDeclaration()))throw this.raise(Te.ExpectedAmbientAfterExportDeclare,this.state.startLoc);let v=vt(this.state.type)&&this.tsTryParseExportDeclaration()||super.parseExportDeclaration(l);return v?((v.type==="TSInterfaceDeclaration"||v.type==="TSTypeAliasDeclaration"||m)&&(l.exportKind="type"),m&&v.type!=="TSImportEqualsDeclaration"&&(this.resetStartLocation(v,u),v.declare=!0),v):null}parseClassId(l,u,m,v){if((!u||m)&&this.isContextual(113))return;super.parseClassId(l,u,m,l.declare?1024:8331);let S=this.tsTryParseTypeParameters(this.tsParseInOutConstModifiers);S&&(l.typeParameters=S)}parseClassPropertyAnnotation(l){l.optional||(this.eat(35)?l.definite=!0:this.eat(17)&&(l.optional=!0));let u=this.tsTryParseTypeAnnotation();u&&(l.typeAnnotation=u)}parseClassProperty(l){if(this.parseClassPropertyAnnotation(l),this.state.isAmbientContext&&!(l.readonly&&!l.typeAnnotation)&&this.match(29)&&this.raise(Te.DeclareClassFieldHasInitializer,this.state.startLoc),l.abstract&&this.match(29)){let{key:u}=l;this.raise(Te.AbstractPropertyHasInitializer,this.state.startLoc,{propertyName:u.type==="Identifier"&&!l.computed?u.name:`[${this.input.slice(this.offsetToSourcePos(u.start),this.offsetToSourcePos(u.end))}]`})}return super.parseClassProperty(l)}parseClassPrivateProperty(l){return l.abstract&&this.raise(Te.PrivateElementHasAbstract,l),l.accessibility&&this.raise(Te.PrivateElementHasAccessibility,l,{modifier:l.accessibility}),this.parseClassPropertyAnnotation(l),super.parseClassPrivateProperty(l)}parseClassAccessorProperty(l){return this.parseClassPropertyAnnotation(l),l.optional&&this.raise(Te.AccessorCannotBeOptional,l),super.parseClassAccessorProperty(l)}pushClassMethod(l,u,m,v,S,w){let P=this.tsTryParseTypeParameters(this.tsParseConstModifier);P&&S&&this.raise(Te.ConstructorHasTypeParameters,P);let{declare:L=!1,kind:F}=u;L&&(F==="get"||F==="set")&&this.raise(Te.DeclareAccessor,u,{kind:F}),P&&(u.typeParameters=P),super.pushClassMethod(l,u,m,v,S,w)}pushClassPrivateMethod(l,u,m,v){let S=this.tsTryParseTypeParameters(this.tsParseConstModifier);S&&(u.typeParameters=S),super.pushClassPrivateMethod(l,u,m,v)}declareClassPrivateMethodInScope(l,u){l.type!=="TSDeclareMethod"&&(l.type==="MethodDefinition"&&!hasOwnProperty.call(l.value,"body")||super.declareClassPrivateMethodInScope(l,u))}parseClassSuper(l){super.parseClassSuper(l),l.superClass&&(this.match(47)||this.match(51))&&(l.superTypeParameters=this.tsParseTypeArgumentsInExpression()),this.eatContextual(113)&&(l.implements=this.tsParseHeritageClause("implements"))}parseObjPropValue(l,u,m,v,S,w,P){let L=this.tsTryParseTypeParameters(this.tsParseConstModifier);return L&&(l.typeParameters=L),super.parseObjPropValue(l,u,m,v,S,w,P)}parseFunctionParams(l,u){let m=this.tsTryParseTypeParameters(this.tsParseConstModifier);m&&(l.typeParameters=m),super.parseFunctionParams(l,u)}parseVarId(l,u){super.parseVarId(l,u),l.id.type==="Identifier"&&!this.hasPrecedingLineBreak()&&this.eat(35)&&(l.definite=!0);let m=this.tsTryParseTypeAnnotation();m&&(l.id.typeAnnotation=m,this.resetEndLocation(l.id))}parseAsyncArrowFromCallExpression(l,u){return this.match(14)&&(l.returnType=this.tsParseTypeAnnotation()),super.parseAsyncArrowFromCallExpression(l,u)}parseMaybeAssign(l,u){var m,v,S,w,P;let L,F,G;if(this.hasPlugin("jsx")&&(this.match(143)||this.match(47))){if(L=this.state.clone(),F=this.tryParse(()=>super.parseMaybeAssign(l,u),L),!F.error)return F.node;let{context:Ie}=this.state,dt=Ie[Ie.length-1];(dt===$.j_oTag||dt===$.j_expr)&&Ie.pop()}if(!((m=F)!=null&&m.error)&&!this.match(47))return super.parseMaybeAssign(l,u);(!L||L===this.state)&&(L=this.state.clone());let se,ye=this.tryParse(Ie=>{var dt,vi;se=this.tsParseTypeParameters(this.tsParseConstModifier);let At=super.parseMaybeAssign(l,u);return(At.type!=="ArrowFunctionExpression"||(dt=At.extra)!=null&&dt.parenthesized)&&Ie(),((vi=se)==null?void 0:vi.params.length)!==0&&this.resetStartLocationFromNode(At,se),At.typeParameters=se,At},L);if(!ye.error&&!ye.aborted)return se&&this.reportReservedArrowTypeParam(se),ye.node;if(!F&&(EP(!this.hasPlugin("jsx")),G=this.tryParse(()=>super.parseMaybeAssign(l,u),L),!G.error))return G.node;if((v=F)!=null&&v.node)return this.state=F.failState,F.node;if(ye.node)return this.state=ye.failState,se&&this.reportReservedArrowTypeParam(se),ye.node;if((S=G)!=null&&S.node)return this.state=G.failState,G.node;throw((w=F)==null?void 0:w.error)||ye.error||((P=G)==null?void 0:P.error)}reportReservedArrowTypeParam(l){var u;l.params.length===1&&!l.params[0].constraint&&!((u=l.extra)!=null&&u.trailingComma)&&this.getPluginOption("typescript","disallowAmbiguousJSXLike")&&this.raise(Te.ReservedArrowTypeParam,l)}parseMaybeUnary(l,u){return!this.hasPlugin("jsx")&&this.match(47)?this.tsParseTypeAssertion():super.parseMaybeUnary(l,u)}parseArrow(l){if(this.match(14)){let u=this.tryParse(m=>{let v=this.tsParseTypeOrTypePredicateAnnotation(14);return(this.canInsertSemicolon()||!this.match(19))&&m(),v});if(u.aborted)return;u.thrown||(u.error&&(this.state=u.failState),l.returnType=u.node)}return super.parseArrow(l)}parseFunctionParamType(l){this.eat(17)&&(l.optional=!0);let u=this.tsTryParseTypeAnnotation();return u&&(l.typeAnnotation=u),this.resetEndLocation(l),l}isAssignable(l,u){switch(l.type){case"TSTypeCastExpression":return this.isAssignable(l.expression,u);case"TSParameterProperty":return!0;default:return super.isAssignable(l,u)}}toAssignable(l,u=!1){switch(l.type){case"ParenthesizedExpression":this.toAssignableParenthesizedExpression(l,u);break;case"TSAsExpression":case"TSSatisfiesExpression":case"TSNonNullExpression":case"TSTypeAssertion":u?this.expressionScope.recordArrowParameterBindingError(Te.UnexpectedTypeCastInParameter,l):this.raise(Te.UnexpectedTypeCastInParameter,l),this.toAssignable(l.expression,u);break;case"AssignmentExpression":!u&&l.left.type==="TSTypeCastExpression"&&(l.left=this.typeCastToParameter(l.left));default:super.toAssignable(l,u)}}toAssignableParenthesizedExpression(l,u){switch(l.expression.type){case"TSAsExpression":case"TSSatisfiesExpression":case"TSNonNullExpression":case"TSTypeAssertion":case"ParenthesizedExpression":this.toAssignable(l.expression,u);break;default:super.toAssignable(l,u)}}checkToRestConversion(l,u){switch(l.type){case"TSAsExpression":case"TSSatisfiesExpression":case"TSTypeAssertion":case"TSNonNullExpression":this.checkToRestConversion(l.expression,!1);break;default:super.checkToRestConversion(l,u)}}isValidLVal(l,u,m){switch(l){case"TSTypeCastExpression":return!0;case"TSParameterProperty":return"parameter";case"TSNonNullExpression":case"TSInstantiationExpression":return"expression";case"TSAsExpression":case"TSSatisfiesExpression":case"TSTypeAssertion":return(m!==64||!u)&&["expression",!0];default:return super.isValidLVal(l,u,m)}}parseBindingAtom(){return this.state.type===78?this.parseIdentifier(!0):super.parseBindingAtom()}parseMaybeDecoratorArguments(l,u){if(this.match(47)||this.match(51)){let m=this.tsParseTypeArgumentsInExpression();if(this.match(10)){let v=super.parseMaybeDecoratorArguments(l,u);return v.typeParameters=m,v}this.unexpected(null,10)}return super.parseMaybeDecoratorArguments(l,u)}checkCommaAfterRest(l){return this.state.isAmbientContext&&this.match(12)&&this.lookaheadCharCode()===l?(this.next(),!1):super.checkCommaAfterRest(l)}isClassMethod(){return this.match(47)||super.isClassMethod()}isClassProperty(){return this.match(35)||this.match(14)||super.isClassProperty()}parseMaybeDefault(l,u){let m=super.parseMaybeDefault(l,u);return m.type==="AssignmentPattern"&&m.typeAnnotation&&m.right.start<m.typeAnnotation.start&&this.raise(Te.TypeAnnotationAfterAssign,m.typeAnnotation),m}getTokenFromCode(l){if(this.state.inType){if(l===62){this.finishOp(48,1);return}if(l===60){this.finishOp(47,1);return}}super.getTokenFromCode(l)}reScan_lt_gt(){let{type:l}=this.state;l===47?(this.state.pos-=1,this.readToken_lt()):l===48&&(this.state.pos-=1,this.readToken_gt())}reScan_lt(){let{type:l}=this.state;return l===51?(this.state.pos-=2,this.finishOp(47,1),47):l}toAssignableList(l,u,m){for(let v=0;v<l.length;v++){let S=l[v];S?.type==="TSTypeCastExpression"&&(l[v]=this.typeCastToParameter(S))}super.toAssignableList(l,u,m)}typeCastToParameter(l){return l.expression.typeAnnotation=l.typeAnnotation,this.resetEndLocation(l.expression,l.typeAnnotation.loc.end),l.expression}shouldParseArrow(l){return this.match(14)?l.every(u=>this.isAssignable(u,!0)):super.shouldParseArrow(l)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}canHaveLeadingDecorator(){return super.canHaveLeadingDecorator()||this.isAbstractClass()}jsxParseOpeningElementAfterName(l){if(this.match(47)||this.match(51)){let u=this.tsTryParseAndCatch(()=>this.tsParseTypeArgumentsInExpression());u&&(l.typeParameters=u)}return super.jsxParseOpeningElementAfterName(l)}getGetterSetterExpectedParamCount(l){let u=super.getGetterSetterExpectedParamCount(l),m=this.getObjectOrClassMethodParams(l)[0];return m&&this.isThisParam(m)?u+1:u}parseCatchClauseParam(){let l=super.parseCatchClauseParam(),u=this.tsTryParseTypeAnnotation();return u&&(l.typeAnnotation=u,this.resetEndLocation(l)),l}tsInAmbientContext(l){let{isAmbientContext:u,strict:m}=this.state;this.state.isAmbientContext=!0,this.state.strict=!1;try{return l()}finally{this.state.isAmbientContext=u,this.state.strict=m}}parseClass(l,u,m){let v=this.state.inAbstractClass;this.state.inAbstractClass=!!l.abstract;try{return super.parseClass(l,u,m)}finally{this.state.inAbstractClass=v}}tsParseAbstractDeclaration(l,u){if(this.match(80))return l.abstract=!0,this.maybeTakeDecorators(u,this.parseClass(l,!0,!1));if(this.isContextual(129)){if(!this.hasFollowingLineBreak())return l.abstract=!0,this.raise(Te.NonClassMethodPropertyHasAbstractModifer,l),this.tsParseInterfaceDeclaration(l)}else this.unexpected(null,80)}parseMethod(l,u,m,v,S,w,P){let L=super.parseMethod(l,u,m,v,S,w,P);if(L.abstract&&(this.hasPlugin("estree")?L.value:L).body){let{key:F}=L;this.raise(Te.AbstractMethodHasImplementation,L,{methodName:F.type==="Identifier"&&!L.computed?F.name:`[${this.input.slice(this.offsetToSourcePos(F.start),this.offsetToSourcePos(F.end))}]`})}return L}tsParseTypeParameterName(){return this.parseIdentifier().name}shouldParseAsAmbientContext(){return!!this.getPluginOption("typescript","dts")}parse(){return this.shouldParseAsAmbientContext()&&(this.state.isAmbientContext=!0),super.parse()}getExpression(){return this.shouldParseAsAmbientContext()&&(this.state.isAmbientContext=!0),super.getExpression()}parseExportSpecifier(l,u,m,v){return!u&&v?(this.parseTypeOnlyImportExportSpecifier(l,!1,m),this.finishNode(l,"ExportSpecifier")):(l.exportKind="value",super.parseExportSpecifier(l,u,m,v))}parseImportSpecifier(l,u,m,v,S){return!u&&v?(this.parseTypeOnlyImportExportSpecifier(l,!0,m),this.finishNode(l,"ImportSpecifier")):(l.importKind="value",super.parseImportSpecifier(l,u,m,v,m?4098:4096))}parseTypeOnlyImportExportSpecifier(l,u,m){let v=u?"imported":"local",S=u?"local":"exported",w=l[v],P,L=!1,F=!0,G=w.loc.start;if(this.isContextual(93)){let ye=this.parseIdentifier();if(this.isContextual(93)){let Ie=this.parseIdentifier();ni(this.state.type)?(L=!0,w=ye,P=u?this.parseIdentifier():this.parseModuleExportName(),F=!1):(P=Ie,F=!1)}else ni(this.state.type)?(F=!1,P=u?this.parseIdentifier():this.parseModuleExportName()):(L=!0,w=ye)}else ni(this.state.type)&&(L=!0,u?(w=this.parseIdentifier(!0),this.isContextual(93)||this.checkReservedWord(w.name,w.loc.start,!0,!0)):w=this.parseModuleExportName());L&&m&&this.raise(u?Te.TypeModifierIsUsedInTypeImports:Te.TypeModifierIsUsedInTypeExports,G),l[v]=w,l[S]=P;let se=u?"importKind":"exportKind";l[se]=L?"type":"value",F&&this.eatContextual(93)&&(l[S]=u?this.parseIdentifier():this.parseModuleExportName()),l[S]||(l[S]=cs(l[v])),u&&this.checkIdentifier(l[S],L?4098:4096)}};function JW(d){if(d.type!=="MemberExpression")return!1;let{computed:l,property:u}=d;return l&&u.type!=="StringLiteral"&&(u.type!=="TemplateLiteral"||u.expressions.length>0)?!1:IP(d.object)}function XW(d,l){var u;let{type:m}=d;if((u=d.extra)!=null&&u.parenthesized)return!1;if(l){if(m==="Literal"){let{value:v}=d;if(typeof v=="string"||typeof v=="boolean")return!0}}else if(m==="StringLiteral"||m==="BooleanLiteral")return!0;return!!(TP(d,l)||YW(d,l)||m==="TemplateLiteral"&&d.expressions.length===0||JW(d))}function TP(d,l){return l?d.type==="Literal"&&(typeof d.value=="number"||"bigint"in d):d.type==="NumericLiteral"||d.type==="BigIntLiteral"}function YW(d,l){if(d.type==="UnaryExpression"){let{operator:u,argument:m}=d;if(u==="-"&&TP(m,l))return!0}return!1}function IP(d){return d.type==="Identifier"?!0:d.type!=="MemberExpression"||d.computed?!1:IP(d.object)}var PP=x`placeholders`({ClassNameIsRequired:"A class name is required.",UnexpectedSpace:"Unexpected space in placeholder."}),QW=d=>class extends d{parsePlaceholder(l){if(this.match(133)){let u=this.startNode();return this.next(),this.assertNoSpace(),u.name=super.parseIdentifier(!0),this.assertNoSpace(),this.expect(133),this.finishPlaceholder(u,l)}}finishPlaceholder(l,u){let m=l;return(!m.expectedNode||!m.type)&&(m=this.finishNode(m,"Placeholder")),m.expectedNode=u,m}getTokenFromCode(l){l===37&&this.input.charCodeAt(this.state.pos+1)===37?this.finishOp(133,2):super.getTokenFromCode(l)}parseExprAtom(l){return this.parsePlaceholder("Expression")||super.parseExprAtom(l)}parseIdentifier(l){return this.parsePlaceholder("Identifier")||super.parseIdentifier(l)}checkReservedWord(l,u,m,v){l!==void 0&&super.checkReservedWord(l,u,m,v)}parseBindingAtom(){return this.parsePlaceholder("Pattern")||super.parseBindingAtom()}isValidLVal(l,u,m){return l==="Placeholder"||super.isValidLVal(l,u,m)}toAssignable(l,u){l&&l.type==="Placeholder"&&l.expectedNode==="Expression"?l.expectedNode="Pattern":super.toAssignable(l,u)}chStartsBindingIdentifier(l,u){return!!(super.chStartsBindingIdentifier(l,u)||this.lookahead().type===133)}verifyBreakContinue(l,u){l.label&&l.label.type==="Placeholder"||super.verifyBreakContinue(l,u)}parseExpressionStatement(l,u){var m;if(u.type!=="Placeholder"||(m=u.extra)!=null&&m.parenthesized)return super.parseExpressionStatement(l,u);if(this.match(14)){let S=l;return S.label=this.finishPlaceholder(u,"Identifier"),this.next(),S.body=super.parseStatementOrSloppyAnnexBFunctionDeclaration(),this.finishNode(S,"LabeledStatement")}this.semicolon();let v=l;return v.name=u.name,this.finishPlaceholder(v,"Statement")}parseBlock(l,u,m){return this.parsePlaceholder("BlockStatement")||super.parseBlock(l,u,m)}parseFunctionId(l){return this.parsePlaceholder("Identifier")||super.parseFunctionId(l)}parseClass(l,u,m){let v=u?"ClassDeclaration":"ClassExpression";this.next();let S=this.state.strict,w=this.parsePlaceholder("Identifier");if(w)if(this.match(81)||this.match(133)||this.match(5))l.id=w;else{if(m||!u)return l.id=null,l.body=this.finishPlaceholder(w,"ClassBody"),this.finishNode(l,v);throw this.raise(PP.ClassNameIsRequired,this.state.startLoc)}else this.parseClassId(l,u,m);return super.parseClassSuper(l),l.body=this.parsePlaceholder("ClassBody")||super.parseClassBody(!!l.superClass,S),this.finishNode(l,v)}parseExport(l,u){let m=this.parsePlaceholder("Identifier");if(!m)return super.parseExport(l,u);let v=l;if(!this.isContextual(98)&&!this.match(12))return v.specifiers=[],v.source=null,v.declaration=this.finishPlaceholder(m,"Declaration"),this.finishNode(v,"ExportNamedDeclaration");this.expectPlugin("exportDefaultFrom");let S=this.startNode();return S.exported=m,v.specifiers=[this.finishNode(S,"ExportDefaultSpecifier")],super.parseExport(v,u)}isExportDefaultSpecifier(){if(this.match(65)){let l=this.nextTokenStart();if(this.isUnparsedContextual(l,"from")&&this.input.startsWith(_a(133),this.nextTokenStartSince(l+4)))return!0}return super.isExportDefaultSpecifier()}maybeParseExportDefaultSpecifier(l,u){var m;return(m=l.specifiers)!=null&&m.length?!0:super.maybeParseExportDefaultSpecifier(l,u)}checkExport(l){let{specifiers:u}=l;u!=null&&u.length&&(l.specifiers=u.filter(m=>m.exported.type==="Placeholder")),super.checkExport(l),l.specifiers=u}parseImport(l){let u=this.parsePlaceholder("Identifier");if(!u)return super.parseImport(l);if(l.specifiers=[],!this.isContextual(98)&&!this.match(12))return l.source=this.finishPlaceholder(u,"StringLiteral"),this.semicolon(),this.finishNode(l,"ImportDeclaration");let m=this.startNodeAtNode(u);return m.local=u,l.specifiers.push(this.finishNode(m,"ImportDefaultSpecifier")),this.eat(12)&&(this.maybeParseStarImportSpecifier(l)||this.parseNamedImportSpecifiers(l)),this.expectContextual(98),l.source=this.parseImportSource(),this.semicolon(),this.finishNode(l,"ImportDeclaration")}parseImportSource(){return this.parsePlaceholder("StringLiteral")||super.parseImportSource()}assertNoSpace(){this.state.start>this.offsetToSourcePos(this.state.lastTokEndLoc.index)&&this.raise(PP.UnexpectedSpace,this.state.lastTokEndLoc)}},ZW=d=>class extends d{parseV8Intrinsic(){if(this.match(54)){let l=this.state.startLoc,u=this.startNode();if(this.next(),vt(this.state.type)){let m=this.parseIdentifierName(),v=this.createIdentifier(u,m);if(v.type="V8IntrinsicIdentifier",this.match(10))return v}this.unexpected(l)}}parseExprAtom(l){return this.parseV8Intrinsic()||super.parseExprAtom(l)}},kP=["minimal","fsharp","hack","smart"],FP=["^^","@@","^","%","#"];function e6(d){if(d.has("decorators")){if(d.has("decorators-legacy"))throw new Error("Cannot use the decorators and decorators-legacy plugin together");let u=d.get("decorators").decoratorsBeforeExport;if(u!=null&&typeof u!="boolean")throw new Error("'decoratorsBeforeExport' must be a boolean, if specified.");let m=d.get("decorators").allowCallParenthesized;if(m!=null&&typeof m!="boolean")throw new Error("'allowCallParenthesized' must be a boolean.")}if(d.has("flow")&&d.has("typescript"))throw new Error("Cannot combine flow and typescript plugins.");if(d.has("placeholders")&&d.has("v8intrinsic"))throw new Error("Cannot combine placeholders and v8intrinsic plugins.");if(d.has("pipelineOperator")){var l;let u=d.get("pipelineOperator").proposal;if(!kP.includes(u)){let v=kP.map(S=>`"${S}"`).join(", ");throw new Error(`"pipelineOperator" requires "proposal" option whose value must be one of: ${v}.`)}let m=((l=d.get("recordAndTuple"))==null?void 0:l.syntaxType)==="hash";if(u==="hack"){if(d.has("placeholders"))throw new Error("Cannot combine placeholders plugin and Hack-style pipes.");if(d.has("v8intrinsic"))throw new Error("Cannot combine v8intrinsic plugin and Hack-style pipes.");let v=d.get("pipelineOperator").topicToken;if(!FP.includes(v)){let S=FP.map(w=>`"${w}"`).join(", ");throw new Error(`"pipelineOperator" in "proposal": "hack" mode also requires a "topicToken" option whose value must be one of: ${S}.`)}if(v==="#"&&m)throw new Error(`Plugin conflict between \`["pipelineOperator", { proposal: "hack", topicToken: "#" }]\` and \`${JSON.stringify(["recordAndTuple",d.get("recordAndTuple")])}\`.`)}else if(u==="smart"&&m)throw new Error(`Plugin conflict between \`["pipelineOperator", { proposal: "smart" }]\` and \`${JSON.stringify(["recordAndTuple",d.get("recordAndTuple")])}\`.`)}if(d.has("moduleAttributes")){if(d.has("deprecatedImportAssert")||d.has("importAssertions"))throw new Error("Cannot combine importAssertions, deprecatedImportAssert and moduleAttributes plugins.");if(d.get("moduleAttributes").version!=="may-2020")throw new Error("The 'moduleAttributes' plugin requires a 'version' option, representing the last proposal update. Currently, the only supported value is 'may-2020'.")}if(d.has("importAssertions")&&d.has("deprecatedImportAssert"))throw new Error("Cannot combine importAssertions and deprecatedImportAssert plugins.");if(!d.has("deprecatedImportAssert")&&d.has("importAttributes")&&d.get("importAttributes").deprecatedAssertSyntax&&d.set("deprecatedImportAssert",{}),d.has("recordAndTuple")){let u=d.get("recordAndTuple").syntaxType;if(u!=null){let m=["hash","bar"];if(!m.includes(u))throw new Error("The 'syntaxType' option of the 'recordAndTuple' plugin must be one of: "+m.map(v=>`'${v}'`).join(", "))}}if(d.has("asyncDoExpressions")&&!d.has("doExpressions")){let u=new Error("'asyncDoExpressions' requires 'doExpressions', please add 'doExpressions' to parser plugins.");throw u.missingPlugins="doExpressions",u}if(d.has("optionalChainingAssign")&&d.get("optionalChainingAssign").version!=="2023-07")throw new Error("The 'optionalChainingAssign' plugin requires a 'version' option, representing the last proposal update. Currently, the only supported value is '2023-07'.")}var LP={estree:V,jsx:jW,flow:HW,typescript:GW,v8intrinsic:ZW,placeholders:QW},t6=Object.keys(LP),i6=class extends UW{checkProto(d,l,u,m){if(d.type==="SpreadElement"||this.isObjectMethod(d)||d.computed||d.shorthand)return;let v=d.key;if((v.type==="Identifier"?v.name:v.value)==="__proto__"){if(l){this.raise(D.RecordNoProto,v);return}u.used&&(m?m.doubleProtoLoc===null&&(m.doubleProtoLoc=v.loc.start):this.raise(D.DuplicateProto,v)),u.used=!0}}shouldExitDescending(d,l){return d.type==="ArrowFunctionExpression"&&this.offsetToSourcePos(d.start)===l}getExpression(){this.enterInitialScopes(),this.nextToken();let d=this.parseExpression();return this.match(140)||this.unexpected(),this.finalizeRemainingComments(),d.comments=this.comments,d.errors=this.state.errors,this.optionFlags&128&&(d.tokens=this.tokens),d}parseExpression(d,l){return d?this.disallowInAnd(()=>this.parseExpressionBase(l)):this.allowInAnd(()=>this.parseExpressionBase(l))}parseExpressionBase(d){let l=this.state.startLoc,u=this.parseMaybeAssign(d);if(this.match(12)){let m=this.startNodeAt(l);for(m.expressions=[u];this.eat(12);)m.expressions.push(this.parseMaybeAssign(d));return this.toReferencedList(m.expressions),this.finishNode(m,"SequenceExpression")}return u}parseMaybeAssignDisallowIn(d,l){return this.disallowInAnd(()=>this.parseMaybeAssign(d,l))}parseMaybeAssignAllowIn(d,l){return this.allowInAnd(()=>this.parseMaybeAssign(d,l))}setOptionalParametersError(d,l){var u;d.optionalParametersLoc=(u=l?.loc)!=null?u:this.state.startLoc}parseMaybeAssign(d,l){let u=this.state.startLoc;if(this.isContextual(108)&&this.prodParam.hasYield){let w=this.parseYield();return l&&(w=l.call(this,w,u)),w}let m;d?m=!1:(d=new $g,m=!0);let{type:v}=this.state;(v===10||vt(v))&&(this.state.potentialArrowAt=this.state.start);let S=this.parseMaybeConditional(d);if(l&&(S=l.call(this,S,u)),$4(this.state.type)){let w=this.startNodeAt(u),P=this.state.value;if(w.operator=P,this.match(29)){this.toAssignable(S,!0),w.left=S;let L=u.index;d.doubleProtoLoc!=null&&d.doubleProtoLoc.index>=L&&(d.doubleProtoLoc=null),d.shorthandAssignLoc!=null&&d.shorthandAssignLoc.index>=L&&(d.shorthandAssignLoc=null),d.privateKeyLoc!=null&&d.privateKeyLoc.index>=L&&(this.checkDestructuringPrivate(d),d.privateKeyLoc=null)}else w.left=S;return this.next(),w.right=this.parseMaybeAssign(),this.checkLVal(S,this.finishNode(w,"AssignmentExpression")),w}else m&&this.checkExpressionErrors(d,!0);return S}parseMaybeConditional(d){let l=this.state.startLoc,u=this.state.potentialArrowAt,m=this.parseExprOps(d);return this.shouldExitDescending(m,u)?m:this.parseConditional(m,l,d)}parseConditional(d,l,u){if(this.eat(17)){let m=this.startNodeAt(l);return m.test=d,m.consequent=this.parseMaybeAssignAllowIn(),this.expect(14),m.alternate=this.parseMaybeAssign(),this.finishNode(m,"ConditionalExpression")}return d}parseMaybeUnaryOrPrivate(d){return this.match(139)?this.parsePrivateName():this.parseMaybeUnary(d)}parseExprOps(d){let l=this.state.startLoc,u=this.state.potentialArrowAt,m=this.parseMaybeUnaryOrPrivate(d);return this.shouldExitDescending(m,u)?m:this.parseExprOp(m,l,-1)}parseExprOp(d,l,u){if(this.isPrivateName(d)){let v=this.getPrivateNameSV(d);(u>=jg(58)||!this.prodParam.hasIn||!this.match(58))&&this.raise(D.PrivateInExpectedIn,d,{identifierName:v}),this.classScope.usePrivateName(v,d.loc.start)}let m=this.state.type;if(J4(m)&&(this.prodParam.hasIn||!this.match(58))){let v=jg(m);if(v>u){if(m===39){if(this.expectPlugin("pipelineOperator"),this.state.inFSharpPipelineDirectBody)return d;this.checkPipelineAtInfixOperator(d,l)}let S=this.startNodeAt(l);S.left=d,S.operator=this.state.value;let w=m===41||m===42,P=m===40;if(P&&(v=jg(42)),this.next(),m===39&&this.hasPlugin(["pipelineOperator",{proposal:"minimal"}])&&this.state.type===96&&this.prodParam.hasAwait)throw this.raise(D.UnexpectedAwaitAfterPipelineBody,this.state.startLoc);S.right=this.parseExprOpRightExpr(m,v);let L=this.finishNode(S,w||P?"LogicalExpression":"BinaryExpression"),F=this.state.type;if(P&&(F===41||F===42)||w&&F===40)throw this.raise(D.MixingCoalesceWithLogical,this.state.startLoc);return this.parseExprOp(L,l,u)}}return d}parseExprOpRightExpr(d,l){let u=this.state.startLoc;switch(d){case 39:switch(this.getPluginOption("pipelineOperator","proposal")){case"hack":return this.withTopicBindingContext(()=>this.parseHackPipeBody());case"fsharp":return this.withSoloAwaitPermittingContext(()=>this.parseFSharpPipelineBody(l))}if(this.getPluginOption("pipelineOperator","proposal")==="smart")return this.withTopicBindingContext(()=>{if(this.prodParam.hasYield&&this.isContextual(108))throw this.raise(D.PipeBodyIsTighter,this.state.startLoc);return this.parseSmartPipelineBodyInStyle(this.parseExprOpBaseRightExpr(d,l),u)});default:return this.parseExprOpBaseRightExpr(d,l)}}parseExprOpBaseRightExpr(d,l){let u=this.state.startLoc;return this.parseExprOp(this.parseMaybeUnaryOrPrivate(),u,eW(d)?l-1:l)}parseHackPipeBody(){var d;let{startLoc:l}=this.state,u=this.parseMaybeAssign();return g.has(u.type)&&!((d=u.extra)!=null&&d.parenthesized)&&this.raise(D.PipeUnparenthesizedBody,l,{type:u.type}),this.topicReferenceWasUsedInCurrentContext()||this.raise(D.PipeTopicUnused,l),u}checkExponentialAfterUnary(d){this.match(57)&&this.raise(D.UnexpectedTokenUnaryExponentiation,d.argument)}parseMaybeUnary(d,l){let u=this.state.startLoc,m=this.isContextual(96);if(m&&this.recordAwaitIfAllowed()){this.next();let P=this.parseAwait(u);return l||this.checkExponentialAfterUnary(P),P}let v=this.match(34),S=this.startNode();if(Y4(this.state.type)){S.operator=this.state.value,S.prefix=!0,this.match(72)&&this.expectPlugin("throwExpressions");let P=this.match(89);if(this.next(),S.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(d,!0),this.state.strict&&P){let L=S.argument;L.type==="Identifier"?this.raise(D.StrictDelete,S):this.hasPropertyAsPrivateName(L)&&this.raise(D.DeletePrivateField,S)}if(!v)return l||this.checkExponentialAfterUnary(S),this.finishNode(S,"UnaryExpression")}let w=this.parseUpdate(S,v,d);if(m){let{type:P}=this.state;if((this.hasPlugin("v8intrinsic")?hC(P):hC(P)&&!this.match(54))&&!this.isAmbiguousAwait())return this.raiseOverwrite(D.AwaitNotInAsyncContext,u),this.parseAwait(u)}return w}parseUpdate(d,l,u){if(l){let S=d;return this.checkLVal(S.argument,this.finishNode(S,"UpdateExpression")),d}let m=this.state.startLoc,v=this.parseExprSubscripts(u);if(this.checkExpressionErrors(u,!1))return v;for(;X4(this.state.type)&&!this.canInsertSemicolon();){let S=this.startNodeAt(m);S.operator=this.state.value,S.prefix=!1,S.argument=v,this.next(),this.checkLVal(v,v=this.finishNode(S,"UpdateExpression"))}return v}parseExprSubscripts(d){let l=this.state.startLoc,u=this.state.potentialArrowAt,m=this.parseExprAtom(d);return this.shouldExitDescending(m,u)?m:this.parseSubscripts(m,l)}parseSubscripts(d,l,u){let m={optionalChainMember:!1,maybeAsyncArrow:this.atPossibleAsyncArrow(d),stop:!1};do d=this.parseSubscript(d,l,u,m),m.maybeAsyncArrow=!1;while(!m.stop);return d}parseSubscript(d,l,u,m){let{type:v}=this.state;if(!u&&v===15)return this.parseBind(d,l,u,m);if(zg(v))return this.parseTaggedTemplateExpression(d,l,m);let S=!1;if(v===18){if(u&&(this.raise(D.OptionalChainingNoNew,this.state.startLoc),this.lookaheadCharCode()===40))return m.stop=!0,d;m.optionalChainMember=S=!0,this.next()}if(!u&&this.match(10))return this.parseCoverCallAndAsyncArrowHead(d,l,m,S);{let w=this.eat(0);return w||S||this.eat(16)?this.parseMember(d,l,m,w,S):(m.stop=!0,d)}}parseMember(d,l,u,m,v){let S=this.startNodeAt(l);return S.object=d,S.computed=m,m?(S.property=this.parseExpression(),this.expect(3)):this.match(139)?(d.type==="Super"&&this.raise(D.SuperPrivateField,l),this.classScope.usePrivateName(this.state.value,this.state.startLoc),S.property=this.parsePrivateName()):S.property=this.parseIdentifier(!0),u.optionalChainMember?(S.optional=v,this.finishNode(S,"OptionalMemberExpression")):this.finishNode(S,"MemberExpression")}parseBind(d,l,u,m){let v=this.startNodeAt(l);return v.object=d,this.next(),v.callee=this.parseNoCallExpr(),m.stop=!0,this.parseSubscripts(this.finishNode(v,"BindExpression"),l,u)}parseCoverCallAndAsyncArrowHead(d,l,u,m){let v=this.state.maybeInArrowParameters,S=null;this.state.maybeInArrowParameters=!0,this.next();let w=this.startNodeAt(l);w.callee=d;let{maybeAsyncArrow:P,optionalChainMember:L}=u;P&&(this.expressionScope.enter(IW()),S=new $g),L&&(w.optional=m),m?w.arguments=this.parseCallExpressionArguments(11):w.arguments=this.parseCallExpressionArguments(11,d.type!=="Super",w,S);let F=this.finishCallExpression(w,L);return P&&this.shouldParseAsyncArrow()&&!m?(u.stop=!0,this.checkDestructuringPrivate(S),this.expressionScope.validateAsPattern(),this.expressionScope.exit(),F=this.parseAsyncArrowFromCallExpression(this.startNodeAt(l),F)):(P&&(this.checkExpressionErrors(S,!0),this.expressionScope.exit()),this.toReferencedArguments(F)),this.state.maybeInArrowParameters=v,F}toReferencedArguments(d,l){this.toReferencedListDeep(d.arguments,l)}parseTaggedTemplateExpression(d,l,u){let m=this.startNodeAt(l);return m.tag=d,m.quasi=this.parseTemplate(!0),u.optionalChainMember&&this.raise(D.OptionalChainingNoTemplate,l),this.finishNode(m,"TaggedTemplateExpression")}atPossibleAsyncArrow(d){return d.type==="Identifier"&&d.name==="async"&&this.state.lastTokEndLoc.index===d.end&&!this.canInsertSemicolon()&&d.end-d.start===5&&this.offsetToSourcePos(d.start)===this.state.potentialArrowAt}finishCallExpression(d,l){if(d.callee.type==="Import")if(d.arguments.length===0||d.arguments.length>2)this.raise(D.ImportCallArity,d);else for(let u of d.arguments)u.type==="SpreadElement"&&this.raise(D.ImportCallSpreadArgument,u);return this.finishNode(d,l?"OptionalCallExpression":"CallExpression")}parseCallExpressionArguments(d,l,u,m){let v=[],S=!0,w=this.state.inFSharpPipelineDirectBody;for(this.state.inFSharpPipelineDirectBody=!1;!this.eat(d);){if(S)S=!1;else if(this.expect(12),this.match(d)){u&&this.addTrailingCommaExtraToNode(u),this.next();break}v.push(this.parseExprListItem(!1,m,l))}return this.state.inFSharpPipelineDirectBody=w,v}shouldParseAsyncArrow(){return this.match(19)&&!this.canInsertSemicolon()}parseAsyncArrowFromCallExpression(d,l){var u;return this.resetPreviousNodeTrailingComments(l),this.expect(19),this.parseArrowExpression(d,l.arguments,!0,(u=l.extra)==null?void 0:u.trailingCommaLoc),l.innerComments&&Fh(d,l.innerComments),l.callee.trailingComments&&Fh(d,l.callee.trailingComments),d}parseNoCallExpr(){let d=this.state.startLoc;return this.parseSubscripts(this.parseExprAtom(),d,!0)}parseExprAtom(d){let l,u=null,{type:m}=this.state;switch(m){case 79:return this.parseSuper();case 83:return l=this.startNode(),this.next(),this.match(16)?this.parseImportMetaProperty(l):this.match(10)?this.optionFlags&256?this.parseImportCall(l):this.finishNode(l,"Import"):(this.raise(D.UnsupportedImport,this.state.lastTokStartLoc),this.finishNode(l,"Import"));case 78:return l=this.startNode(),this.next(),this.finishNode(l,"ThisExpression");case 90:return this.parseDo(this.startNode(),!1);case 56:case 31:return this.readRegexp(),this.parseRegExpLiteral(this.state.value);case 135:return this.parseNumericLiteral(this.state.value);case 136:return this.parseBigIntLiteral(this.state.value);case 134:return this.parseStringLiteral(this.state.value);case 84:return this.parseNullLiteral();case 85:return this.parseBooleanLiteral(!0);case 86:return this.parseBooleanLiteral(!1);case 10:{let v=this.state.potentialArrowAt===this.state.start;return this.parseParenAndDistinguishExpression(v)}case 2:case 1:return this.parseArrayLike(this.state.type===2?4:3,!1,!0);case 0:return this.parseArrayLike(3,!0,!1,d);case 6:case 7:return this.parseObjectLike(this.state.type===6?9:8,!1,!0);case 5:return this.parseObjectLike(8,!1,!1,d);case 68:return this.parseFunctionOrFunctionSent();case 26:u=this.parseDecorators();case 80:return this.parseClass(this.maybeTakeDecorators(u,this.startNode()),!1);case 77:return this.parseNewOrNewTarget();case 25:case 24:return this.parseTemplate(!1);case 15:{l=this.startNode(),this.next(),l.object=null;let v=l.callee=this.parseNoCallExpr();if(v.type==="MemberExpression")return this.finishNode(l,"BindExpression");throw this.raise(D.UnsupportedBind,v)}case 139:return this.raise(D.PrivateInExpectedIn,this.state.startLoc,{identifierName:this.state.value}),this.parsePrivateName();case 33:return this.parseTopicReferenceThenEqualsSign(54,"%");case 32:return this.parseTopicReferenceThenEqualsSign(44,"^");case 37:case 38:return this.parseTopicReference("hack");case 44:case 54:case 27:{let v=this.getPluginOption("pipelineOperator","proposal");if(v)return this.parseTopicReference(v);this.unexpected();break}case 47:{let v=this.input.codePointAt(this.nextTokenStart());ls(v)||v===62?this.expectOnePlugin(["jsx","flow","typescript"]):this.unexpected();break}default:if(m===137)return this.parseDecimalLiteral(this.state.value);if(vt(m)){if(this.isContextual(127)&&this.lookaheadInLineCharCode()===123)return this.parseModuleExpression();let v=this.state.potentialArrowAt===this.state.start,S=this.state.containsEsc,w=this.parseIdentifier();if(!S&&w.name==="async"&&!this.canInsertSemicolon()){let{type:P}=this.state;if(P===68)return this.resetPreviousNodeTrailingComments(w),this.next(),this.parseAsyncFunctionExpression(this.startNodeAtNode(w));if(vt(P))return this.lookaheadCharCode()===61?this.parseAsyncArrowUnaryFunction(this.startNodeAtNode(w)):w;if(P===90)return this.resetPreviousNodeTrailingComments(w),this.parseDo(this.startNodeAtNode(w),!0)}return v&&this.match(19)&&!this.canInsertSemicolon()?(this.next(),this.parseArrowExpression(this.startNodeAtNode(w),[w],!1)):w}else this.unexpected()}}parseTopicReferenceThenEqualsSign(d,l){let u=this.getPluginOption("pipelineOperator","proposal");if(u)return this.state.type=d,this.state.value=l,this.state.pos--,this.state.end--,this.state.endLoc=r(this.state.endLoc,-1),this.parseTopicReference(u);this.unexpected()}parseTopicReference(d){let l=this.startNode(),u=this.state.startLoc,m=this.state.type;return this.next(),this.finishTopicReference(l,u,d,m)}finishTopicReference(d,l,u,m){if(this.testTopicReferenceConfiguration(u,l,m))return u==="hack"?(this.topicReferenceIsAllowedInCurrentContext()||this.raise(D.PipeTopicUnbound,l),this.registerTopicReference(),this.finishNode(d,"TopicReference")):(this.topicReferenceIsAllowedInCurrentContext()||this.raise(D.PrimaryTopicNotAllowed,l),this.registerTopicReference(),this.finishNode(d,"PipelinePrimaryTopicReference"));throw this.raise(D.PipeTopicUnconfiguredToken,l,{token:_a(m)})}testTopicReferenceConfiguration(d,l,u){switch(d){case"hack":return this.hasPlugin(["pipelineOperator",{topicToken:_a(u)}]);case"smart":return u===27;default:throw this.raise(D.PipeTopicRequiresHackPipes,l)}}parseAsyncArrowUnaryFunction(d){this.prodParam.enter(Kg(!0,this.prodParam.hasYield));let l=[this.parseIdentifier()];return this.prodParam.exit(),this.hasPrecedingLineBreak()&&this.raise(D.LineTerminatorBeforeArrow,this.state.curPosition()),this.expect(19),this.parseArrowExpression(d,l,!0)}parseDo(d,l){this.expectPlugin("doExpressions"),l&&this.expectPlugin("asyncDoExpressions"),d.async=l,this.next();let u=this.state.labels;return this.state.labels=[],l?(this.prodParam.enter(2),d.body=this.parseBlock(),this.prodParam.exit()):d.body=this.parseBlock(),this.state.labels=u,this.finishNode(d,"DoExpression")}parseSuper(){let d=this.startNode();return this.next(),this.match(10)&&!this.scope.allowDirectSuper&&!(this.optionFlags&16)?this.raise(D.SuperNotAllowed,d):!this.scope.allowSuper&&!(this.optionFlags&16)&&this.raise(D.UnexpectedSuper,d),!this.match(10)&&!this.match(0)&&!this.match(16)&&this.raise(D.UnsupportedSuper,d),this.finishNode(d,"Super")}parsePrivateName(){let d=this.startNode(),l=this.startNodeAt(r(this.state.startLoc,1)),u=this.state.value;return this.next(),d.id=this.createIdentifier(l,u),this.finishNode(d,"PrivateName")}parseFunctionOrFunctionSent(){let d=this.startNode();if(this.next(),this.prodParam.hasYield&&this.match(16)){let l=this.createIdentifier(this.startNodeAtNode(d),"function");return this.next(),this.match(103)?this.expectPlugin("functionSent"):this.hasPlugin("functionSent")||this.unexpected(),this.parseMetaProperty(d,l,"sent")}return this.parseFunction(d)}parseMetaProperty(d,l,u){d.meta=l;let m=this.state.containsEsc;return d.property=this.parseIdentifier(!0),(d.property.name!==u||m)&&this.raise(D.UnsupportedMetaProperty,d.property,{target:l.name,onlyValidPropertyName:u}),this.finishNode(d,"MetaProperty")}parseImportMetaProperty(d){let l=this.createIdentifier(this.startNodeAtNode(d),"import");if(this.next(),this.isContextual(101))this.inModule||this.raise(D.ImportMetaOutsideModule,l),this.sawUnambiguousESM=!0;else if(this.isContextual(105)||this.isContextual(97)){let u=this.isContextual(105);if(this.expectPlugin(u?"sourcePhaseImports":"deferredImportEvaluation"),!(this.optionFlags&256))throw this.raise(D.DynamicImportPhaseRequiresImportExpressions,this.state.startLoc,{phase:this.state.value});return this.next(),d.phase=u?"source":"defer",this.parseImportCall(d)}return this.parseMetaProperty(d,l,"meta")}parseLiteralAtNode(d,l,u){return this.addExtra(u,"rawValue",d),this.addExtra(u,"raw",this.input.slice(this.offsetToSourcePos(u.start),this.state.end)),u.value=d,this.next(),this.finishNode(u,l)}parseLiteral(d,l){let u=this.startNode();return this.parseLiteralAtNode(d,l,u)}parseStringLiteral(d){return this.parseLiteral(d,"StringLiteral")}parseNumericLiteral(d){return this.parseLiteral(d,"NumericLiteral")}parseBigIntLiteral(d){return this.parseLiteral(d,"BigIntLiteral")}parseDecimalLiteral(d){return this.parseLiteral(d,"DecimalLiteral")}parseRegExpLiteral(d){let l=this.startNode();return this.addExtra(l,"raw",this.input.slice(this.offsetToSourcePos(l.start),this.state.end)),l.pattern=d.pattern,l.flags=d.flags,this.next(),this.finishNode(l,"RegExpLiteral")}parseBooleanLiteral(d){let l=this.startNode();return l.value=d,this.next(),this.finishNode(l,"BooleanLiteral")}parseNullLiteral(){let d=this.startNode();return this.next(),this.finishNode(d,"NullLiteral")}parseParenAndDistinguishExpression(d){let l=this.state.startLoc,u;this.next(),this.expressionScope.enter(TW());let m=this.state.maybeInArrowParameters,v=this.state.inFSharpPipelineDirectBody;this.state.maybeInArrowParameters=!0,this.state.inFSharpPipelineDirectBody=!1;let S=this.state.startLoc,w=[],P=new $g,L=!0,F,G;for(;!this.match(11);){if(L)L=!1;else if(this.expect(12,P.optionalParametersLoc===null?null:P.optionalParametersLoc),this.match(11)){G=this.state.startLoc;break}if(this.match(21)){let Ie=this.state.startLoc;if(F=this.state.startLoc,w.push(this.parseParenItem(this.parseRestBinding(),Ie)),!this.checkCommaAfterRest(41))break}else w.push(this.parseMaybeAssignAllowIn(P,this.parseParenItem))}let se=this.state.lastTokEndLoc;this.expect(11),this.state.maybeInArrowParameters=m,this.state.inFSharpPipelineDirectBody=v;let ye=this.startNodeAt(l);return d&&this.shouldParseArrow(w)&&(ye=this.parseArrow(ye))?(this.checkDestructuringPrivate(P),this.expressionScope.validateAsPattern(),this.expressionScope.exit(),this.parseArrowExpression(ye,w,!1),ye):(this.expressionScope.exit(),w.length||this.unexpected(this.state.lastTokStartLoc),G&&this.unexpected(G),F&&this.unexpected(F),this.checkExpressionErrors(P,!0),this.toReferencedListDeep(w,!0),w.length>1?(u=this.startNodeAt(S),u.expressions=w,this.finishNode(u,"SequenceExpression"),this.resetEndLocation(u,se)):u=w[0],this.wrapParenthesis(l,u))}wrapParenthesis(d,l){if(!(this.optionFlags&512))return this.addExtra(l,"parenthesized",!0),this.addExtra(l,"parenStart",d.index),this.takeSurroundingComments(l,d.index,this.state.lastTokEndLoc.index),l;let u=this.startNodeAt(d);return u.expression=l,this.finishNode(u,"ParenthesizedExpression")}shouldParseArrow(d){return!this.canInsertSemicolon()}parseArrow(d){if(this.eat(19))return d}parseParenItem(d,l){return d}parseNewOrNewTarget(){let d=this.startNode();if(this.next(),this.match(16)){let l=this.createIdentifier(this.startNodeAtNode(d),"new");this.next();let u=this.parseMetaProperty(d,l,"target");return!this.scope.inNonArrowFunction&&!this.scope.inClass&&!(this.optionFlags&4)&&this.raise(D.UnexpectedNewTarget,u),u}return this.parseNew(d)}parseNew(d){if(this.parseNewCallee(d),this.eat(10)){let l=this.parseExprList(11);this.toReferencedList(l),d.arguments=l}else d.arguments=[];return this.finishNode(d,"NewExpression")}parseNewCallee(d){let l=this.match(83),u=this.parseNoCallExpr();d.callee=u,l&&(u.type==="Import"||u.type==="ImportExpression")&&this.raise(D.ImportCallNotNewExpression,u)}parseTemplateElement(d){let{start:l,startLoc:u,end:m,value:v}=this.state,S=l+1,w=this.startNodeAt(r(u,1));v===null&&(d||this.raise(D.InvalidEscapeSequenceTemplate,r(this.state.firstInvalidTemplateEscapePos,1)));let P=this.match(24),L=P?-1:-2,F=m+L;w.value={raw:this.input.slice(S,F).replace(/\r\n?/g,`
`),cooked:v===null?null:v.slice(1,L)},w.tail=P,this.next();let G=this.finishNode(w,"TemplateElement");return this.resetEndLocation(G,r(this.state.lastTokEndLoc,L)),G}parseTemplate(d){let l=this.startNode(),u=this.parseTemplateElement(d),m=[u],v=[];for(;!u.tail;)v.push(this.parseTemplateSubstitution()),this.readTemplateContinuation(),m.push(u=this.parseTemplateElement(d));return l.expressions=v,l.quasis=m,this.finishNode(l,"TemplateLiteral")}parseTemplateSubstitution(){return this.parseExpression()}parseObjectLike(d,l,u,m){u&&this.expectPlugin("recordAndTuple");let v=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;let S=Object.create(null),w=!0,P=this.startNode();for(P.properties=[],this.next();!this.match(d);){if(w)w=!1;else if(this.expect(12),this.match(d)){this.addTrailingCommaExtraToNode(P);break}let F;l?F=this.parseBindingProperty():(F=this.parsePropertyDefinition(m),this.checkProto(F,u,S,m)),u&&!this.isObjectProperty(F)&&F.type!=="SpreadElement"&&this.raise(D.InvalidRecordProperty,F),F.shorthand&&this.addExtra(F,"shorthand",!0),P.properties.push(F)}this.next(),this.state.inFSharpPipelineDirectBody=v;let L="ObjectExpression";return l?L="ObjectPattern":u&&(L="RecordExpression"),this.finishNode(P,L)}addTrailingCommaExtraToNode(d){this.addExtra(d,"trailingComma",this.state.lastTokStartLoc.index),this.addExtra(d,"trailingCommaLoc",this.state.lastTokStartLoc,!1)}maybeAsyncOrAccessorProp(d){return!d.computed&&d.key.type==="Identifier"&&(this.isLiteralPropertyName()||this.match(0)||this.match(55))}parsePropertyDefinition(d){let l=[];if(this.match(26))for(this.hasPlugin("decorators")&&this.raise(D.UnsupportedPropertyDecorator,this.state.startLoc);this.match(26);)l.push(this.parseDecorator());let u=this.startNode(),m=!1,v=!1,S;if(this.match(21))return l.length&&this.unexpected(),this.parseSpread();l.length&&(u.decorators=l,l=[]),u.method=!1,d&&(S=this.state.startLoc);let w=this.eat(55);this.parsePropertyNamePrefixOperator(u);let P=this.state.containsEsc;if(this.parsePropertyName(u,d),!w&&!P&&this.maybeAsyncOrAccessorProp(u)){let{key:L}=u,F=L.name;F==="async"&&!this.hasPrecedingLineBreak()&&(m=!0,this.resetPreviousNodeTrailingComments(L),w=this.eat(55),this.parsePropertyName(u)),(F==="get"||F==="set")&&(v=!0,this.resetPreviousNodeTrailingComments(L),u.kind=F,this.match(55)&&(w=!0,this.raise(D.AccessorIsGenerator,this.state.curPosition(),{kind:F}),this.next()),this.parsePropertyName(u))}return this.parseObjPropValue(u,S,w,m,!1,v,d)}getGetterSetterExpectedParamCount(d){return d.kind==="get"?0:1}getObjectOrClassMethodParams(d){return d.params}checkGetterSetterParams(d){var l;let u=this.getGetterSetterExpectedParamCount(d),m=this.getObjectOrClassMethodParams(d);m.length!==u&&this.raise(d.kind==="get"?D.BadGetterArity:D.BadSetterArity,d),d.kind==="set"&&((l=m[m.length-1])==null?void 0:l.type)==="RestElement"&&this.raise(D.BadSetterRestParameter,d)}parseObjectMethod(d,l,u,m,v){if(v){let S=this.parseMethod(d,l,!1,!1,!1,"ObjectMethod");return this.checkGetterSetterParams(S),S}if(u||l||this.match(10))return m&&this.unexpected(),d.kind="method",d.method=!0,this.parseMethod(d,l,u,!1,!1,"ObjectMethod")}parseObjectProperty(d,l,u,m){if(d.shorthand=!1,this.eat(14))return d.value=u?this.parseMaybeDefault(this.state.startLoc):this.parseMaybeAssignAllowIn(m),this.finishNode(d,"ObjectProperty");if(!d.computed&&d.key.type==="Identifier"){if(this.checkReservedWord(d.key.name,d.key.loc.start,!0,!1),u)d.value=this.parseMaybeDefault(l,cs(d.key));else if(this.match(29)){let v=this.state.startLoc;m!=null?m.shorthandAssignLoc===null&&(m.shorthandAssignLoc=v):this.raise(D.InvalidCoverInitializedName,v),d.value=this.parseMaybeDefault(l,cs(d.key))}else d.value=cs(d.key);return d.shorthand=!0,this.finishNode(d,"ObjectProperty")}}parseObjPropValue(d,l,u,m,v,S,w){let P=this.parseObjectMethod(d,u,m,v,S)||this.parseObjectProperty(d,l,v,w);return P||this.unexpected(),P}parsePropertyName(d,l){if(this.eat(0))d.computed=!0,d.key=this.parseMaybeAssignAllowIn(),this.expect(3);else{let{type:u,value:m}=this.state,v;if(ni(u))v=this.parseIdentifier(!0);else switch(u){case 135:v=this.parseNumericLiteral(m);break;case 134:v=this.parseStringLiteral(m);break;case 136:v=this.parseBigIntLiteral(m);break;case 139:{let S=this.state.startLoc;l!=null?l.privateKeyLoc===null&&(l.privateKeyLoc=S):this.raise(D.UnexpectedPrivateField,S),v=this.parsePrivateName();break}default:if(u===137){v=this.parseDecimalLiteral(m);break}this.unexpected()}d.key=v,u!==139&&(d.computed=!1)}}initFunction(d,l){d.id=null,d.generator=!1,d.async=l}parseMethod(d,l,u,m,v,S,w=!1){this.initFunction(d,u),d.generator=l,this.scope.enter(18|(w?64:0)|(v?32:0)),this.prodParam.enter(Kg(u,d.generator)),this.parseFunctionParams(d,m);let P=this.parseFunctionBodyAndFinish(d,S,!0);return this.prodParam.exit(),this.scope.exit(),P}parseArrayLike(d,l,u,m){u&&this.expectPlugin("recordAndTuple");let v=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;let S=this.startNode();return this.next(),S.elements=this.parseExprList(d,!u,m,S),this.state.inFSharpPipelineDirectBody=v,this.finishNode(S,u?"TupleExpression":"ArrayExpression")}parseArrowExpression(d,l,u,m){this.scope.enter(6);let v=Kg(u,!1);!this.match(5)&&this.prodParam.hasIn&&(v|=8),this.prodParam.enter(v),this.initFunction(d,u);let S=this.state.maybeInArrowParameters;return l&&(this.state.maybeInArrowParameters=!0,this.setArrowFunctionParameters(d,l,m)),this.state.maybeInArrowParameters=!1,this.parseFunctionBody(d,!0),this.prodParam.exit(),this.scope.exit(),this.state.maybeInArrowParameters=S,this.finishNode(d,"ArrowFunctionExpression")}setArrowFunctionParameters(d,l,u){this.toAssignableList(l,u,!1),d.params=l}parseFunctionBodyAndFinish(d,l,u=!1){return this.parseFunctionBody(d,!1,u),this.finishNode(d,l)}parseFunctionBody(d,l,u=!1){let m=l&&!this.match(5);if(this.expressionScope.enter(xP()),m)d.body=this.parseMaybeAssign(),this.checkParams(d,!1,l,!1);else{let v=this.state.strict,S=this.state.labels;this.state.labels=[],this.prodParam.enter(this.prodParam.currentFlags()|4),d.body=this.parseBlock(!0,!1,w=>{let P=!this.isSimpleParamList(d.params);w&&P&&this.raise(D.IllegalLanguageModeDirective,(d.kind==="method"||d.kind==="constructor")&&d.key?d.key.loc.end:d);let L=!v&&this.state.strict;this.checkParams(d,!this.state.strict&&!l&&!u&&!P,l,L),this.state.strict&&d.id&&this.checkIdentifier(d.id,65,L)}),this.prodParam.exit(),this.state.labels=S}this.expressionScope.exit()}isSimpleParameter(d){return d.type==="Identifier"}isSimpleParamList(d){for(let l=0,u=d.length;l<u;l++)if(!this.isSimpleParameter(d[l]))return!1;return!0}checkParams(d,l,u,m=!0){let v=!l&&new Set,S={type:"FormalParameters"};for(let w of d.params)this.checkLVal(w,S,5,v,m)}parseExprList(d,l,u,m){let v=[],S=!0;for(;!this.eat(d);){if(S)S=!1;else if(this.expect(12),this.match(d)){m&&this.addTrailingCommaExtraToNode(m),this.next();break}v.push(this.parseExprListItem(l,u))}return v}parseExprListItem(d,l,u){let m;if(this.match(12))d||this.raise(D.UnexpectedToken,this.state.curPosition(),{unexpected:","}),m=null;else if(this.match(21)){let v=this.state.startLoc;m=this.parseParenItem(this.parseSpread(l),v)}else if(this.match(17)){this.expectPlugin("partialApplication"),u||this.raise(D.UnexpectedArgumentPlaceholder,this.state.startLoc);let v=this.startNode();this.next(),m=this.finishNode(v,"ArgumentPlaceholder")}else m=this.parseMaybeAssignAllowIn(l,this.parseParenItem);return m}parseIdentifier(d){let l=this.startNode(),u=this.parseIdentifierName(d);return this.createIdentifier(l,u)}createIdentifier(d,l){return d.name=l,d.loc.identifierName=l,this.finishNode(d,"Identifier")}parseIdentifierName(d){let l,{startLoc:u,type:m}=this.state;ni(m)?l=this.state.value:this.unexpected();let v=Tl(m);return d?v&&this.replaceToken(132):this.checkReservedWord(l,u,v,!1),this.next(),l}checkReservedWord(d,l,u,m){if(!(d.length>10||!dW(d))){if(u&&aW(d)){this.raise(D.UnexpectedKeyword,l,{keyword:d});return}if((this.state.strict?m?gP:pP:hP)(d,this.inModule)){this.raise(D.UnexpectedReservedWord,l,{reservedWord:d});return}else if(d==="yield"){if(this.prodParam.hasYield){this.raise(D.YieldBindingIdentifier,l);return}}else if(d==="await"){if(this.prodParam.hasAwait){this.raise(D.AwaitBindingIdentifier,l);return}if(this.scope.inStaticBlock){this.raise(D.AwaitBindingIdentifierInStaticBlock,l);return}this.expressionScope.recordAsyncArrowParametersError(l)}else if(d==="arguments"&&this.scope.inClassAndNotInNonArrowFunction){this.raise(D.ArgumentsInClass,l);return}}}recordAwaitIfAllowed(){let d=this.prodParam.hasAwait||this.optionFlags&1&&!this.scope.inFunction;return d&&!this.scope.inFunction&&(this.state.hasTopLevelAwait=!0),d}parseAwait(d){let l=this.startNodeAt(d);return this.expressionScope.recordParameterInitializerError(D.AwaitExpressionFormalParameter,l),this.eat(55)&&this.raise(D.ObsoleteAwaitStar,l),!this.scope.inFunction&&!(this.optionFlags&1)&&(this.isAmbiguousAwait()?this.ambiguousScriptDifferentAst=!0:this.sawUnambiguousESM=!0),this.state.soloAwait||(l.argument=this.parseMaybeUnary(null,!0)),this.finishNode(l,"AwaitExpression")}isAmbiguousAwait(){if(this.hasPrecedingLineBreak())return!0;let{type:d}=this.state;return d===53||d===10||d===0||zg(d)||d===102&&!this.state.containsEsc||d===138||d===56||this.hasPlugin("v8intrinsic")&&d===54}parseYield(){let d=this.startNode();this.expressionScope.recordParameterInitializerError(D.YieldInParameter,d),this.next();let l=!1,u=null;if(!this.hasPrecedingLineBreak())switch(l=this.eat(55),this.state.type){case 13:case 140:case 8:case 11:case 3:case 9:case 14:case 12:if(!l)break;default:u=this.parseMaybeAssign()}return d.delegate=l,d.argument=u,this.finishNode(d,"YieldExpression")}parseImportCall(d){if(this.next(),d.source=this.parseMaybeAssignAllowIn(),d.options=null,this.eat(12)&&!this.match(11)&&(d.options=this.parseMaybeAssignAllowIn(),this.eat(12)&&!this.match(11))){do this.parseMaybeAssignAllowIn();while(this.eat(12)&&!this.match(11));this.raise(D.ImportCallArity,d)}return this.expect(11),this.finishNode(d,"ImportExpression")}checkPipelineAtInfixOperator(d,l){this.hasPlugin(["pipelineOperator",{proposal:"smart"}])&&d.type==="SequenceExpression"&&this.raise(D.PipelineHeadSequenceExpression,l)}parseSmartPipelineBodyInStyle(d,l){if(this.isSimpleReference(d)){let u=this.startNodeAt(l);return u.callee=d,this.finishNode(u,"PipelineBareFunction")}else{let u=this.startNodeAt(l);return this.checkSmartPipeTopicBodyEarlyErrors(l),u.expression=d,this.finishNode(u,"PipelineTopicExpression")}}isSimpleReference(d){switch(d.type){case"MemberExpression":return!d.computed&&this.isSimpleReference(d.object);case"Identifier":return!0;default:return!1}}checkSmartPipeTopicBodyEarlyErrors(d){if(this.match(19))throw this.raise(D.PipelineBodyNoArrow,this.state.startLoc);this.topicReferenceWasUsedInCurrentContext()||this.raise(D.PipelineTopicUnused,d)}withTopicBindingContext(d){let l=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:1,maxTopicIndex:null};try{return d()}finally{this.state.topicContext=l}}withSmartMixTopicForbiddingContext(d){if(this.hasPlugin(["pipelineOperator",{proposal:"smart"}])){let l=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null};try{return d()}finally{this.state.topicContext=l}}else return d()}withSoloAwaitPermittingContext(d){let l=this.state.soloAwait;this.state.soloAwait=!0;try{return d()}finally{this.state.soloAwait=l}}allowInAnd(d){let l=this.prodParam.currentFlags();if(8&~l){this.prodParam.enter(l|8);try{return d()}finally{this.prodParam.exit()}}return d()}disallowInAnd(d){let l=this.prodParam.currentFlags();if(8&l){this.prodParam.enter(l&-9);try{return d()}finally{this.prodParam.exit()}}return d()}registerTopicReference(){this.state.topicContext.maxTopicIndex=0}topicReferenceIsAllowedInCurrentContext(){return this.state.topicContext.maxNumOfResolvableTopics>=1}topicReferenceWasUsedInCurrentContext(){return this.state.topicContext.maxTopicIndex!=null&&this.state.topicContext.maxTopicIndex>=0}parseFSharpPipelineBody(d){let l=this.state.startLoc;this.state.potentialArrowAt=this.state.start;let u=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!0;let m=this.parseExprOp(this.parseMaybeUnaryOrPrivate(),l,d);return this.state.inFSharpPipelineDirectBody=u,m}parseModuleExpression(){this.expectPlugin("moduleBlocks");let d=this.startNode();this.next(),this.match(5)||this.unexpected(null,5);let l=this.startNodeAt(this.state.endLoc);this.next();let u=this.initializeScopes(!0);this.enterInitialScopes();try{d.body=this.parseProgram(l,8,"module")}finally{u()}return this.finishNode(d,"ModuleExpression")}parsePropertyNamePrefixOperator(d){}},xC={kind:1},o6={kind:2},r6=/[\uD800-\uDFFF]/u,SC=/in(?:stanceof)?/y;function n6(d,l,u){for(let m=0;m<d.length;m++){let v=d[m],{type:S}=v;if(typeof S=="number"){{if(S===139){let{loc:w,start:P,value:L,end:F}=v,G=P+1,se=r(w.start,1);d.splice(m,1,new ya({type:as(27),value:"#",start:P,end:G,startLoc:w.start,endLoc:se}),new ya({type:as(132),value:L,start:G,end:F,startLoc:se,endLoc:w.end})),m++;continue}if(zg(S)){let{loc:w,start:P,value:L,end:F}=v,G=P+1,se=r(w.start,1),ye;l.charCodeAt(P-u)===96?ye=new ya({type:as(22),value:"`",start:P,end:G,startLoc:w.start,endLoc:se}):ye=new ya({type:as(8),value:"}",start:P,end:G,startLoc:w.start,endLoc:se});let Ie,dt,vi,At;S===24?(dt=F-1,vi=r(w.end,-1),Ie=L===null?null:L.slice(1,-1),At=new ya({type:as(22),value:"`",start:dt,end:F,startLoc:vi,endLoc:w.end})):(dt=F-2,vi=r(w.end,-2),Ie=L===null?null:L.slice(1,-2),At=new ya({type:as(23),value:"${",start:dt,end:F,startLoc:vi,endLoc:w.end})),d.splice(m,1,ye,new ya({type:as(20),value:Ie,start:G,end:dt,startLoc:se,endLoc:vi}),At),m+=2;continue}}v.type=as(S)}}return d}var s6=class extends i6{parseTopLevel(d,l){return d.program=this.parseProgram(l),d.comments=this.comments,this.optionFlags&128&&(d.tokens=n6(this.tokens,this.input,this.startIndex)),this.finishNode(d,"File")}parseProgram(d,l=140,u=this.options.sourceType){if(d.sourceType=u,d.interpreter=this.parseInterpreterDirective(),this.parseBlockBody(d,!0,!0,l),this.inModule){if(!(this.optionFlags&32)&&this.scope.undefinedExports.size>0)for(let[v,S]of Array.from(this.scope.undefinedExports))this.raise(D.ModuleExportUndefined,S,{localName:v});this.addExtra(d,"topLevelAwait",this.state.hasTopLevelAwait)}let m;return l===140?m=this.finishNode(d,"Program"):m=this.finishNodeAt(d,"Program",r(this.state.startLoc,-1)),m}stmtToDirective(d){let l=d;l.type="Directive",l.value=l.expression,delete l.expression;let u=l.value,m=u.value,v=this.input.slice(this.offsetToSourcePos(u.start),this.offsetToSourcePos(u.end)),S=u.value=v.slice(1,-1);return this.addExtra(u,"raw",v),this.addExtra(u,"rawValue",S),this.addExtra(u,"expressionValue",m),u.type="DirectiveLiteral",l}parseInterpreterDirective(){if(!this.match(28))return null;let d=this.startNode();return d.value=this.state.value,this.next(),this.finishNode(d,"InterpreterDirective")}isLet(){return this.isContextual(100)?this.hasFollowingBindingAtom():!1}chStartsBindingIdentifier(d,l){if(ls(d)){if(SC.lastIndex=l,SC.test(this.input)){let u=this.codePointAtPos(SC.lastIndex);if(!rd(u)&&u!==92)return!1}return!0}else return d===92}chStartsBindingPattern(d){return d===91||d===123}hasFollowingBindingAtom(){let d=this.nextTokenStart(),l=this.codePointAtPos(d);return this.chStartsBindingPattern(l)||this.chStartsBindingIdentifier(l,d)}hasInLineFollowingBindingIdentifierOrBrace(){let d=this.nextTokenInLineStart(),l=this.codePointAtPos(d);return l===123||this.chStartsBindingIdentifier(l,d)}startsUsingForOf(){let{type:d,containsEsc:l}=this.lookahead();if(d===102&&!l)return!1;if(vt(d)&&!this.hasFollowingLineBreak())return this.expectPlugin("explicitResourceManagement"),!0}startsAwaitUsing(){let d=this.nextTokenInLineStart();if(this.isUnparsedContextual(d,"using")){d=this.nextTokenInLineStartSince(d+5);let l=this.codePointAtPos(d);if(this.chStartsBindingIdentifier(l,d))return this.expectPlugin("explicitResourceManagement"),!0}return!1}parseModuleItem(){return this.parseStatementLike(15)}parseStatementListItem(){return this.parseStatementLike(6|(!this.options.annexB||this.state.strict?0:8))}parseStatementOrSloppyAnnexBFunctionDeclaration(d=!1){let l=0;return this.options.annexB&&!this.state.strict&&(l|=4,d&&(l|=8)),this.parseStatementLike(l)}parseStatement(){return this.parseStatementLike(0)}parseStatementLike(d){let l=null;return this.match(26)&&(l=this.parseDecorators(!0)),this.parseStatementContent(d,l)}parseStatementContent(d,l){let u=this.state.type,m=this.startNode(),v=!!(d&2),S=!!(d&4),w=d&1;switch(u){case 60:return this.parseBreakContinueStatement(m,!0);case 63:return this.parseBreakContinueStatement(m,!1);case 64:return this.parseDebuggerStatement(m);case 90:return this.parseDoWhileStatement(m);case 91:return this.parseForStatement(m);case 68:if(this.lookaheadCharCode()===46)break;return S||this.raise(this.state.strict?D.StrictFunction:this.options.annexB?D.SloppyFunctionAnnexB:D.SloppyFunction,this.state.startLoc),this.parseFunctionStatement(m,!1,!v&&S);case 80:return v||this.unexpected(),this.parseClass(this.maybeTakeDecorators(l,m),!0);case 69:return this.parseIfStatement(m);case 70:return this.parseReturnStatement(m);case 71:return this.parseSwitchStatement(m);case 72:return this.parseThrowStatement(m);case 73:return this.parseTryStatement(m);case 96:if(!this.state.containsEsc&&this.startsAwaitUsing())return this.recordAwaitIfAllowed()?v||this.raise(D.UnexpectedLexicalDeclaration,m):this.raise(D.AwaitUsingNotInAsyncContext,m),this.next(),this.parseVarStatement(m,"await using");break;case 107:if(this.state.containsEsc||!this.hasInLineFollowingBindingIdentifierOrBrace())break;return this.expectPlugin("explicitResourceManagement"),!this.scope.inModule&&this.scope.inTopLevel?this.raise(D.UnexpectedUsingDeclaration,this.state.startLoc):v||this.raise(D.UnexpectedLexicalDeclaration,this.state.startLoc),this.parseVarStatement(m,"using");case 100:{if(this.state.containsEsc)break;let F=this.nextTokenStart(),G=this.codePointAtPos(F);if(G!==91&&(!v&&this.hasFollowingLineBreak()||!this.chStartsBindingIdentifier(G,F)&&G!==123))break}case 75:v||this.raise(D.UnexpectedLexicalDeclaration,this.state.startLoc);case 74:{let F=this.state.value;return this.parseVarStatement(m,F)}case 92:return this.parseWhileStatement(m);case 76:return this.parseWithStatement(m);case 5:return this.parseBlock();case 13:return this.parseEmptyStatement(m);case 83:{let F=this.lookaheadCharCode();if(F===40||F===46)break}case 82:{!(this.optionFlags&8)&&!w&&this.raise(D.UnexpectedImportExport,this.state.startLoc),this.next();let F;return u===83?(F=this.parseImport(m),F.type==="ImportDeclaration"&&(!F.importKind||F.importKind==="value")&&(this.sawUnambiguousESM=!0)):(F=this.parseExport(m,l),(F.type==="ExportNamedDeclaration"&&(!F.exportKind||F.exportKind==="value")||F.type==="ExportAllDeclaration"&&(!F.exportKind||F.exportKind==="value")||F.type==="ExportDefaultDeclaration")&&(this.sawUnambiguousESM=!0)),this.assertModuleNodeAllowed(F),F}default:if(this.isAsyncFunction())return v||this.raise(D.AsyncFunctionInSingleStatementContext,this.state.startLoc),this.next(),this.parseFunctionStatement(m,!0,!v&&S)}let P=this.state.value,L=this.parseExpression();return vt(u)&&L.type==="Identifier"&&this.eat(14)?this.parseLabeledStatement(m,P,L,d):this.parseExpressionStatement(m,L,l)}assertModuleNodeAllowed(d){!(this.optionFlags&8)&&!this.inModule&&this.raise(D.ImportOutsideModule,d)}decoratorsEnabledBeforeExport(){return this.hasPlugin("decorators-legacy")?!0:this.hasPlugin("decorators")&&this.getPluginOption("decorators","decoratorsBeforeExport")!==!1}maybeTakeDecorators(d,l,u){if(d){var m;(m=l.decorators)!=null&&m.length?(typeof this.getPluginOption("decorators","decoratorsBeforeExport")!="boolean"&&this.raise(D.DecoratorsBeforeAfterExport,l.decorators[0]),l.decorators.unshift(...d)):l.decorators=d,this.resetStartLocationFromNode(l,d[0]),u&&this.resetStartLocationFromNode(u,l)}return l}canHaveLeadingDecorator(){return this.match(80)}parseDecorators(d){let l=[];do l.push(this.parseDecorator());while(this.match(26));if(this.match(82))d||this.unexpected(),this.decoratorsEnabledBeforeExport()||this.raise(D.DecoratorExportClass,this.state.startLoc);else if(!this.canHaveLeadingDecorator())throw this.raise(D.UnexpectedLeadingDecorator,this.state.startLoc);return l}parseDecorator(){this.expectOnePlugin(["decorators","decorators-legacy"]);let d=this.startNode();if(this.next(),this.hasPlugin("decorators")){let l=this.state.startLoc,u;if(this.match(10)){let m=this.state.startLoc;this.next(),u=this.parseExpression(),this.expect(11),u=this.wrapParenthesis(m,u);let v=this.state.startLoc;d.expression=this.parseMaybeDecoratorArguments(u,m),this.getPluginOption("decorators","allowCallParenthesized")===!1&&d.expression!==u&&this.raise(D.DecoratorArgumentsOutsideParentheses,v)}else{for(u=this.parseIdentifier(!1);this.eat(16);){let m=this.startNodeAt(l);m.object=u,this.match(139)?(this.classScope.usePrivateName(this.state.value,this.state.startLoc),m.property=this.parsePrivateName()):m.property=this.parseIdentifier(!0),m.computed=!1,u=this.finishNode(m,"MemberExpression")}d.expression=this.parseMaybeDecoratorArguments(u,l)}}else d.expression=this.parseExprSubscripts();return this.finishNode(d,"Decorator")}parseMaybeDecoratorArguments(d,l){if(this.eat(10)){let u=this.startNodeAt(l);return u.callee=d,u.arguments=this.parseCallExpressionArguments(11),this.toReferencedList(u.arguments),this.finishNode(u,"CallExpression")}return d}parseBreakContinueStatement(d,l){return this.next(),this.isLineTerminator()?d.label=null:(d.label=this.parseIdentifier(),this.semicolon()),this.verifyBreakContinue(d,l),this.finishNode(d,l?"BreakStatement":"ContinueStatement")}verifyBreakContinue(d,l){let u;for(u=0;u<this.state.labels.length;++u){let m=this.state.labels[u];if((d.label==null||m.name===d.label.name)&&(m.kind!=null&&(l||m.kind===1)||d.label&&l))break}if(u===this.state.labels.length){let m=l?"BreakStatement":"ContinueStatement";this.raise(D.IllegalBreakContinue,d,{type:m})}}parseDebuggerStatement(d){return this.next(),this.semicolon(),this.finishNode(d,"DebuggerStatement")}parseHeaderExpression(){this.expect(10);let d=this.parseExpression();return this.expect(11),d}parseDoWhileStatement(d){return this.next(),this.state.labels.push(xC),d.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.state.labels.pop(),this.expect(92),d.test=this.parseHeaderExpression(),this.eat(13),this.finishNode(d,"DoWhileStatement")}parseForStatement(d){this.next(),this.state.labels.push(xC);let l=null;if(this.isContextual(96)&&this.recordAwaitIfAllowed()&&(l=this.state.startLoc,this.next()),this.scope.enter(0),this.expect(10),this.match(13))return l!==null&&this.unexpected(l),this.parseFor(d,null);let u=this.isContextual(100);{let P=this.isContextual(96)&&this.startsAwaitUsing(),L=P||this.isContextual(107)&&this.startsUsingForOf(),F=u&&this.hasFollowingBindingAtom()||L;if(this.match(74)||this.match(75)||F){let G=this.startNode(),se;P?(se="await using",this.recordAwaitIfAllowed()||this.raise(D.AwaitUsingNotInAsyncContext,this.state.startLoc),this.next()):se=this.state.value,this.next(),this.parseVar(G,!0,se);let ye=this.finishNode(G,"VariableDeclaration"),Ie=this.match(58);return Ie&&L&&this.raise(D.ForInUsing,ye),(Ie||this.isContextual(102))&&ye.declarations.length===1?this.parseForIn(d,ye,l):(l!==null&&this.unexpected(l),this.parseFor(d,ye))}}let m=this.isContextual(95),v=new $g,S=this.parseExpression(!0,v),w=this.isContextual(102);if(w&&(u&&this.raise(D.ForOfLet,S),l===null&&m&&S.type==="Identifier"&&this.raise(D.ForOfAsync,S)),w||this.match(58)){this.checkDestructuringPrivate(v),this.toAssignable(S,!0);let P=w?"ForOfStatement":"ForInStatement";return this.checkLVal(S,{type:P}),this.parseForIn(d,S,l)}else this.checkExpressionErrors(v,!0);return l!==null&&this.unexpected(l),this.parseFor(d,S)}parseFunctionStatement(d,l,u){return this.next(),this.parseFunction(d,1|(u?2:0)|(l?8:0))}parseIfStatement(d){return this.next(),d.test=this.parseHeaderExpression(),d.consequent=this.parseStatementOrSloppyAnnexBFunctionDeclaration(),d.alternate=this.eat(66)?this.parseStatementOrSloppyAnnexBFunctionDeclaration():null,this.finishNode(d,"IfStatement")}parseReturnStatement(d){return!this.prodParam.hasReturn&&!(this.optionFlags&2)&&this.raise(D.IllegalReturn,this.state.startLoc),this.next(),this.isLineTerminator()?d.argument=null:(d.argument=this.parseExpression(),this.semicolon()),this.finishNode(d,"ReturnStatement")}parseSwitchStatement(d){this.next(),d.discriminant=this.parseHeaderExpression();let l=d.cases=[];this.expect(5),this.state.labels.push(o6),this.scope.enter(0);let u;for(let m;!this.match(8);)if(this.match(61)||this.match(65)){let v=this.match(61);u&&this.finishNode(u,"SwitchCase"),l.push(u=this.startNode()),u.consequent=[],this.next(),v?u.test=this.parseExpression():(m&&this.raise(D.MultipleDefaultsInSwitch,this.state.lastTokStartLoc),m=!0,u.test=null),this.expect(14)}else u?u.consequent.push(this.parseStatementListItem()):this.unexpected();return this.scope.exit(),u&&this.finishNode(u,"SwitchCase"),this.next(),this.state.labels.pop(),this.finishNode(d,"SwitchStatement")}parseThrowStatement(d){return this.next(),this.hasPrecedingLineBreak()&&this.raise(D.NewlineAfterThrow,this.state.lastTokEndLoc),d.argument=this.parseExpression(),this.semicolon(),this.finishNode(d,"ThrowStatement")}parseCatchClauseParam(){let d=this.parseBindingAtom();return this.scope.enter(this.options.annexB&&d.type==="Identifier"?8:0),this.checkLVal(d,{type:"CatchClause"},9),d}parseTryStatement(d){if(this.next(),d.block=this.parseBlock(),d.handler=null,this.match(62)){let l=this.startNode();this.next(),this.match(10)?(this.expect(10),l.param=this.parseCatchClauseParam(),this.expect(11)):(l.param=null,this.scope.enter(0)),l.body=this.withSmartMixTopicForbiddingContext(()=>this.parseBlock(!1,!1)),this.scope.exit(),d.handler=this.finishNode(l,"CatchClause")}return d.finalizer=this.eat(67)?this.parseBlock():null,!d.handler&&!d.finalizer&&this.raise(D.NoCatchOrFinally,d),this.finishNode(d,"TryStatement")}parseVarStatement(d,l,u=!1){return this.next(),this.parseVar(d,!1,l,u),this.semicolon(),this.finishNode(d,"VariableDeclaration")}parseWhileStatement(d){return this.next(),d.test=this.parseHeaderExpression(),this.state.labels.push(xC),d.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.state.labels.pop(),this.finishNode(d,"WhileStatement")}parseWithStatement(d){return this.state.strict&&this.raise(D.StrictWith,this.state.startLoc),this.next(),d.object=this.parseHeaderExpression(),d.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.finishNode(d,"WithStatement")}parseEmptyStatement(d){return this.next(),this.finishNode(d,"EmptyStatement")}parseLabeledStatement(d,l,u,m){for(let S of this.state.labels)S.name===l&&this.raise(D.LabelRedeclaration,u,{labelName:l});let v=G4(this.state.type)?1:this.match(71)?2:null;for(let S=this.state.labels.length-1;S>=0;S--){let w=this.state.labels[S];if(w.statementStart===d.start)w.statementStart=this.sourceToOffsetPos(this.state.start),w.kind=v;else break}return this.state.labels.push({name:l,kind:v,statementStart:this.sourceToOffsetPos(this.state.start)}),d.body=m&8?this.parseStatementOrSloppyAnnexBFunctionDeclaration(!0):this.parseStatement(),this.state.labels.pop(),d.label=u,this.finishNode(d,"LabeledStatement")}parseExpressionStatement(d,l,u){return d.expression=l,this.semicolon(),this.finishNode(d,"ExpressionStatement")}parseBlock(d=!1,l=!0,u){let m=this.startNode();return d&&this.state.strictErrors.clear(),this.expect(5),l&&this.scope.enter(0),this.parseBlockBody(m,d,!1,8,u),l&&this.scope.exit(),this.finishNode(m,"BlockStatement")}isValidDirective(d){return d.type==="ExpressionStatement"&&d.expression.type==="StringLiteral"&&!d.expression.extra.parenthesized}parseBlockBody(d,l,u,m,v){let S=d.body=[],w=d.directives=[];this.parseBlockOrModuleBlockBody(S,l?w:void 0,u,m,v)}parseBlockOrModuleBlockBody(d,l,u,m,v){let S=this.state.strict,w=!1,P=!1;for(;!this.match(m);){let L=u?this.parseModuleItem():this.parseStatementListItem();if(l&&!P){if(this.isValidDirective(L)){let F=this.stmtToDirective(L);l.push(F),!w&&F.value.value==="use strict"&&(w=!0,this.setStrict(!0));continue}P=!0,this.state.strictErrors.clear()}d.push(L)}v?.call(this,w),S||this.setStrict(!1),this.next()}parseFor(d,l){return d.init=l,this.semicolon(!1),d.test=this.match(13)?null:this.parseExpression(),this.semicolon(!1),d.update=this.match(11)?null:this.parseExpression(),this.expect(11),d.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.scope.exit(),this.state.labels.pop(),this.finishNode(d,"ForStatement")}parseForIn(d,l,u){let m=this.match(58);return this.next(),m?u!==null&&this.unexpected(u):d.await=u!==null,l.type==="VariableDeclaration"&&l.declarations[0].init!=null&&(!m||!this.options.annexB||this.state.strict||l.kind!=="var"||l.declarations[0].id.type!=="Identifier")&&this.raise(D.ForInOfLoopInitializer,l,{type:m?"ForInStatement":"ForOfStatement"}),l.type==="AssignmentPattern"&&this.raise(D.InvalidLhs,l,{ancestor:{type:"ForStatement"}}),d.left=l,d.right=m?this.parseExpression():this.parseMaybeAssignAllowIn(),this.expect(11),d.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.scope.exit(),this.state.labels.pop(),this.finishNode(d,m?"ForInStatement":"ForOfStatement")}parseVar(d,l,u,m=!1){let v=d.declarations=[];for(d.kind=u;;){let S=this.startNode();if(this.parseVarId(S,u),S.init=this.eat(29)?l?this.parseMaybeAssignDisallowIn():this.parseMaybeAssignAllowIn():null,S.init===null&&!m&&(S.id.type!=="Identifier"&&!(l&&(this.match(58)||this.isContextual(102)))?this.raise(D.DeclarationMissingInitializer,this.state.lastTokEndLoc,{kind:"destructuring"}):(u==="const"||u==="using"||u==="await using")&&!(this.match(58)||this.isContextual(102))&&this.raise(D.DeclarationMissingInitializer,this.state.lastTokEndLoc,{kind:u})),v.push(this.finishNode(S,"VariableDeclarator")),!this.eat(12))break}return d}parseVarId(d,l){let u=this.parseBindingAtom();(l==="using"||l==="await using")&&(u.type==="ArrayPattern"||u.type==="ObjectPattern")&&this.raise(D.UsingDeclarationHasBindingPattern,u.loc.start),this.checkLVal(u,{type:"VariableDeclarator"},l==="var"?5:8201),d.id=u}parseAsyncFunctionExpression(d){return this.parseFunction(d,8)}parseFunction(d,l=0){let u=l&2,m=!!(l&1),v=m&&!(l&4),S=!!(l&8);this.initFunction(d,S),this.match(55)&&(u&&this.raise(D.GeneratorInSingleStatementContext,this.state.startLoc),this.next(),d.generator=!0),m&&(d.id=this.parseFunctionId(v));let w=this.state.maybeInArrowParameters;return this.state.maybeInArrowParameters=!1,this.scope.enter(2),this.prodParam.enter(Kg(S,d.generator)),m||(d.id=this.parseFunctionId()),this.parseFunctionParams(d,!1),this.withSmartMixTopicForbiddingContext(()=>{this.parseFunctionBodyAndFinish(d,m?"FunctionDeclaration":"FunctionExpression")}),this.prodParam.exit(),this.scope.exit(),m&&!u&&this.registerFunctionStatementId(d),this.state.maybeInArrowParameters=w,d}parseFunctionId(d){return d||vt(this.state.type)?this.parseIdentifier():null}parseFunctionParams(d,l){this.expect(10),this.expressionScope.enter(AW()),d.params=this.parseBindingList(11,41,2|(l?4:0)),this.expressionScope.exit()}registerFunctionStatementId(d){d.id&&this.scope.declareName(d.id.name,!this.options.annexB||this.state.strict||d.generator||d.async?this.scope.treatFunctionsAsVar?5:8201:17,d.id.loc.start)}parseClass(d,l,u){this.next();let m=this.state.strict;return this.state.strict=!0,this.parseClassId(d,l,u),this.parseClassSuper(d),d.body=this.parseClassBody(!!d.superClass,m),this.finishNode(d,l?"ClassDeclaration":"ClassExpression")}isClassProperty(){return this.match(29)||this.match(13)||this.match(8)}isClassMethod(){return this.match(10)}nameIsConstructor(d){return d.type==="Identifier"&&d.name==="constructor"||d.type==="StringLiteral"&&d.value==="constructor"}isNonstaticConstructor(d){return!d.computed&&!d.static&&this.nameIsConstructor(d.key)}parseClassBody(d,l){this.classScope.enter();let u={hadConstructor:!1,hadSuperClass:d},m=[],v=this.startNode();if(v.body=[],this.expect(5),this.withSmartMixTopicForbiddingContext(()=>{for(;!this.match(8);){if(this.eat(13)){if(m.length>0)throw this.raise(D.DecoratorSemicolon,this.state.lastTokEndLoc);continue}if(this.match(26)){m.push(this.parseDecorator());continue}let S=this.startNode();m.length&&(S.decorators=m,this.resetStartLocationFromNode(S,m[0]),m=[]),this.parseClassMember(v,S,u),S.kind==="constructor"&&S.decorators&&S.decorators.length>0&&this.raise(D.DecoratorConstructor,S)}}),this.state.strict=l,this.next(),m.length)throw this.raise(D.TrailingDecorator,this.state.startLoc);return this.classScope.exit(),this.finishNode(v,"ClassBody")}parseClassMemberFromModifier(d,l){let u=this.parseIdentifier(!0);if(this.isClassMethod()){let m=l;return m.kind="method",m.computed=!1,m.key=u,m.static=!1,this.pushClassMethod(d,m,!1,!1,!1,!1),!0}else if(this.isClassProperty()){let m=l;return m.computed=!1,m.key=u,m.static=!1,d.body.push(this.parseClassProperty(m)),!0}return this.resetPreviousNodeTrailingComments(u),!1}parseClassMember(d,l,u){let m=this.isContextual(106);if(m){if(this.parseClassMemberFromModifier(d,l))return;if(this.eat(5)){this.parseClassStaticBlock(d,l);return}}this.parseClassMemberWithIsStatic(d,l,u,m)}parseClassMemberWithIsStatic(d,l,u,m){let v=l,S=l,w=l,P=l,L=l,F=v,G=v;if(l.static=m,this.parsePropertyNamePrefixOperator(l),this.eat(55)){F.kind="method";let At=this.match(139);if(this.parseClassElementName(F),At){this.pushClassPrivateMethod(d,S,!0,!1);return}this.isNonstaticConstructor(v)&&this.raise(D.ConstructorIsGenerator,v.key),this.pushClassMethod(d,v,!0,!1,!1,!1);return}let se=!this.state.containsEsc&&vt(this.state.type),ye=this.parseClassElementName(l),Ie=se?ye.name:null,dt=this.isPrivateName(ye),vi=this.state.startLoc;if(this.parsePostMemberNameModifiers(G),this.isClassMethod()){if(F.kind="method",dt){this.pushClassPrivateMethod(d,S,!1,!1);return}let At=this.isNonstaticConstructor(v),bi=!1;At&&(v.kind="constructor",u.hadConstructor&&!this.hasPlugin("typescript")&&this.raise(D.DuplicateConstructor,ye),At&&this.hasPlugin("typescript")&&l.override&&this.raise(D.OverrideOnConstructor,ye),u.hadConstructor=!0,bi=u.hadSuperClass),this.pushClassMethod(d,v,!1,!1,At,bi)}else if(this.isClassProperty())dt?this.pushClassPrivateProperty(d,P):this.pushClassProperty(d,w);else if(Ie==="async"&&!this.isLineTerminator()){this.resetPreviousNodeTrailingComments(ye);let At=this.eat(55);G.optional&&this.unexpected(vi),F.kind="method";let bi=this.match(139);this.parseClassElementName(F),this.parsePostMemberNameModifiers(G),bi?this.pushClassPrivateMethod(d,S,At,!0):(this.isNonstaticConstructor(v)&&this.raise(D.ConstructorIsAsync,v.key),this.pushClassMethod(d,v,At,!0,!1,!1))}else if((Ie==="get"||Ie==="set")&&!(this.match(55)&&this.isLineTerminator())){this.resetPreviousNodeTrailingComments(ye),F.kind=Ie;let At=this.match(139);this.parseClassElementName(v),At?this.pushClassPrivateMethod(d,S,!1,!1):(this.isNonstaticConstructor(v)&&this.raise(D.ConstructorIsAccessor,v.key),this.pushClassMethod(d,v,!1,!1,!1,!1)),this.checkGetterSetterParams(v)}else if(Ie==="accessor"&&!this.isLineTerminator()){this.expectPlugin("decoratorAutoAccessors"),this.resetPreviousNodeTrailingComments(ye);let At=this.match(139);this.parseClassElementName(w),this.pushClassAccessorProperty(d,L,At)}else this.isLineTerminator()?dt?this.pushClassPrivateProperty(d,P):this.pushClassProperty(d,w):this.unexpected()}parseClassElementName(d){let{type:l,value:u}=this.state;if((l===132||l===134)&&d.static&&u==="prototype"&&this.raise(D.StaticPrototype,this.state.startLoc),l===139){u==="constructor"&&this.raise(D.ConstructorClassPrivateField,this.state.startLoc);let m=this.parsePrivateName();return d.key=m,m}return this.parsePropertyName(d),d.key}parseClassStaticBlock(d,l){var u;this.scope.enter(208);let m=this.state.labels;this.state.labels=[],this.prodParam.enter(0);let v=l.body=[];this.parseBlockOrModuleBlockBody(v,void 0,!1,8),this.prodParam.exit(),this.scope.exit(),this.state.labels=m,d.body.push(this.finishNode(l,"StaticBlock")),(u=l.decorators)!=null&&u.length&&this.raise(D.DecoratorStaticBlock,l)}pushClassProperty(d,l){!l.computed&&this.nameIsConstructor(l.key)&&this.raise(D.ConstructorClassField,l.key),d.body.push(this.parseClassProperty(l))}pushClassPrivateProperty(d,l){let u=this.parseClassPrivateProperty(l);d.body.push(u),this.classScope.declarePrivateName(this.getPrivateNameSV(u.key),0,u.key.loc.start)}pushClassAccessorProperty(d,l,u){!u&&!l.computed&&this.nameIsConstructor(l.key)&&this.raise(D.ConstructorClassField,l.key);let m=this.parseClassAccessorProperty(l);d.body.push(m),u&&this.classScope.declarePrivateName(this.getPrivateNameSV(m.key),0,m.key.loc.start)}pushClassMethod(d,l,u,m,v,S){d.body.push(this.parseMethod(l,u,m,v,S,"ClassMethod",!0))}pushClassPrivateMethod(d,l,u,m){let v=this.parseMethod(l,u,m,!1,!1,"ClassPrivateMethod",!0);d.body.push(v);let S=v.kind==="get"?v.static?6:2:v.kind==="set"?v.static?5:1:0;this.declareClassPrivateMethodInScope(v,S)}declareClassPrivateMethodInScope(d,l){this.classScope.declarePrivateName(this.getPrivateNameSV(d.key),l,d.key.loc.start)}parsePostMemberNameModifiers(d){}parseClassPrivateProperty(d){return this.parseInitializer(d),this.semicolon(),this.finishNode(d,"ClassPrivateProperty")}parseClassProperty(d){return this.parseInitializer(d),this.semicolon(),this.finishNode(d,"ClassProperty")}parseClassAccessorProperty(d){return this.parseInitializer(d),this.semicolon(),this.finishNode(d,"ClassAccessorProperty")}parseInitializer(d){this.scope.enter(80),this.expressionScope.enter(xP()),this.prodParam.enter(0),d.value=this.eat(29)?this.parseMaybeAssignAllowIn():null,this.expressionScope.exit(),this.prodParam.exit(),this.scope.exit()}parseClassId(d,l,u,m=8331){if(vt(this.state.type))d.id=this.parseIdentifier(),l&&this.declareNameFromIdentifier(d.id,m);else if(u||!l)d.id=null;else throw this.raise(D.MissingClassName,this.state.startLoc)}parseClassSuper(d){d.superClass=this.eat(81)?this.parseExprSubscripts():null}parseExport(d,l){let u=this.parseMaybeImportPhase(d,!0),m=this.maybeParseExportDefaultSpecifier(d,u),v=!m||this.eat(12),S=v&&this.eatExportStar(d),w=S&&this.maybeParseExportNamespaceSpecifier(d),P=v&&(!w||this.eat(12)),L=m||S;if(S&&!w){if(m&&this.unexpected(),l)throw this.raise(D.UnsupportedDecoratorExport,d);return this.parseExportFrom(d,!0),this.finishNode(d,"ExportAllDeclaration")}let F=this.maybeParseExportNamedSpecifiers(d);m&&v&&!S&&!F&&this.unexpected(null,5),w&&P&&this.unexpected(null,98);let G;if(L||F){if(G=!1,l)throw this.raise(D.UnsupportedDecoratorExport,d);this.parseExportFrom(d,L)}else G=this.maybeParseExportDeclaration(d);if(L||F||G){var se;let ye=d;if(this.checkExport(ye,!0,!1,!!ye.source),((se=ye.declaration)==null?void 0:se.type)==="ClassDeclaration")this.maybeTakeDecorators(l,ye.declaration,ye);else if(l)throw this.raise(D.UnsupportedDecoratorExport,d);return this.finishNode(ye,"ExportNamedDeclaration")}if(this.eat(65)){let ye=d,Ie=this.parseExportDefaultExpression();if(ye.declaration=Ie,Ie.type==="ClassDeclaration")this.maybeTakeDecorators(l,Ie,ye);else if(l)throw this.raise(D.UnsupportedDecoratorExport,d);return this.checkExport(ye,!0,!0),this.finishNode(ye,"ExportDefaultDeclaration")}this.unexpected(null,5)}eatExportStar(d){return this.eat(55)}maybeParseExportDefaultSpecifier(d,l){if(l||this.isExportDefaultSpecifier()){this.expectPlugin("exportDefaultFrom",l?.loc.start);let u=l||this.parseIdentifier(!0),m=this.startNodeAtNode(u);return m.exported=u,d.specifiers=[this.finishNode(m,"ExportDefaultSpecifier")],!0}return!1}maybeParseExportNamespaceSpecifier(d){if(this.isContextual(93)){var l,u;(u=(l=d).specifiers)!=null||(l.specifiers=[]);let m=this.startNodeAt(this.state.lastTokStartLoc);return this.next(),m.exported=this.parseModuleExportName(),d.specifiers.push(this.finishNode(m,"ExportNamespaceSpecifier")),!0}return!1}maybeParseExportNamedSpecifiers(d){if(this.match(5)){let l=d;l.specifiers||(l.specifiers=[]);let u=l.exportKind==="type";return l.specifiers.push(...this.parseExportSpecifiers(u)),l.source=null,l.declaration=null,this.hasPlugin("importAssertions")&&(l.assertions=[]),!0}return!1}maybeParseExportDeclaration(d){return this.shouldParseExportDeclaration()?(d.specifiers=[],d.source=null,this.hasPlugin("importAssertions")&&(d.assertions=[]),d.declaration=this.parseExportDeclaration(d),!0):!1}isAsyncFunction(){if(!this.isContextual(95))return!1;let d=this.nextTokenInLineStart();return this.isUnparsedContextual(d,"function")}parseExportDefaultExpression(){let d=this.startNode();if(this.match(68))return this.next(),this.parseFunction(d,5);if(this.isAsyncFunction())return this.next(),this.next(),this.parseFunction(d,13);if(this.match(80))return this.parseClass(d,!0,!0);if(this.match(26))return this.hasPlugin("decorators")&&this.getPluginOption("decorators","decoratorsBeforeExport")===!0&&this.raise(D.DecoratorBeforeExport,this.state.startLoc),this.parseClass(this.maybeTakeDecorators(this.parseDecorators(!1),this.startNode()),!0,!0);if(this.match(75)||this.match(74)||this.isLet())throw this.raise(D.UnsupportedDefaultExport,this.state.startLoc);let l=this.parseMaybeAssignAllowIn();return this.semicolon(),l}parseExportDeclaration(d){return this.match(80)?this.parseClass(this.startNode(),!0,!1):this.parseStatementListItem()}isExportDefaultSpecifier(){let{type:d}=this.state;if(vt(d)){if(d===95&&!this.state.containsEsc||d===100)return!1;if((d===130||d===129)&&!this.state.containsEsc){let{type:m}=this.lookahead();if(vt(m)&&m!==98||m===5)return this.expectOnePlugin(["flow","typescript"]),!1}}else if(!this.match(65))return!1;let l=this.nextTokenStart(),u=this.isUnparsedContextual(l,"from");if(this.input.charCodeAt(l)===44||vt(this.state.type)&&u)return!0;if(this.match(65)&&u){let m=this.input.charCodeAt(this.nextTokenStartSince(l+4));return m===34||m===39}return!1}parseExportFrom(d,l){this.eatContextual(98)?(d.source=this.parseImportSource(),this.checkExport(d),this.maybeParseImportAttributes(d),this.checkJSONModuleImport(d)):l&&this.unexpected(),this.semicolon()}shouldParseExportDeclaration(){let{type:d}=this.state;return d===26&&(this.expectOnePlugin(["decorators","decorators-legacy"]),this.hasPlugin("decorators"))?(this.getPluginOption("decorators","decoratorsBeforeExport")===!0&&this.raise(D.DecoratorBeforeExport,this.state.startLoc),!0):this.isContextual(107)?(this.raise(D.UsingDeclarationExport,this.state.startLoc),!0):this.isContextual(96)&&this.startsAwaitUsing()?(this.raise(D.UsingDeclarationExport,this.state.startLoc),!0):d===74||d===75||d===68||d===80||this.isLet()||this.isAsyncFunction()}checkExport(d,l,u,m){if(l){var v;if(u){if(this.checkDuplicateExports(d,"default"),this.hasPlugin("exportDefaultFrom")){var S;let w=d.declaration;w.type==="Identifier"&&w.name==="from"&&w.end-w.start===4&&!((S=w.extra)!=null&&S.parenthesized)&&this.raise(D.ExportDefaultFromAsIdentifier,w)}}else if((v=d.specifiers)!=null&&v.length)for(let w of d.specifiers){let{exported:P}=w,L=P.type==="Identifier"?P.name:P.value;if(this.checkDuplicateExports(w,L),!m&&w.local){let{local:F}=w;F.type!=="Identifier"?this.raise(D.ExportBindingIsString,w,{localName:F.value,exportName:L}):(this.checkReservedWord(F.name,F.loc.start,!0,!1),this.scope.checkLocalExport(F))}}else if(d.declaration){let w=d.declaration;if(w.type==="FunctionDeclaration"||w.type==="ClassDeclaration"){let{id:P}=w;if(!P)throw new Error("Assertion failure");this.checkDuplicateExports(d,P.name)}else if(w.type==="VariableDeclaration")for(let P of w.declarations)this.checkDeclaration(P.id)}}}checkDeclaration(d){if(d.type==="Identifier")this.checkDuplicateExports(d,d.name);else if(d.type==="ObjectPattern")for(let l of d.properties)this.checkDeclaration(l);else if(d.type==="ArrayPattern")for(let l of d.elements)l&&this.checkDeclaration(l);else d.type==="ObjectProperty"?this.checkDeclaration(d.value):d.type==="RestElement"?this.checkDeclaration(d.argument):d.type==="AssignmentPattern"&&this.checkDeclaration(d.left)}checkDuplicateExports(d,l){this.exportedIdentifiers.has(l)&&(l==="default"?this.raise(D.DuplicateDefaultExport,d):this.raise(D.DuplicateExport,d,{exportName:l})),this.exportedIdentifiers.add(l)}parseExportSpecifiers(d){let l=[],u=!0;for(this.expect(5);!this.eat(8);){if(u)u=!1;else if(this.expect(12),this.eat(8))break;let m=this.isContextual(130),v=this.match(134),S=this.startNode();S.local=this.parseModuleExportName(),l.push(this.parseExportSpecifier(S,v,d,m))}return l}parseExportSpecifier(d,l,u,m){return this.eatContextual(93)?d.exported=this.parseModuleExportName():l?d.exported=LW(d.local):d.exported||(d.exported=cs(d.local)),this.finishNode(d,"ExportSpecifier")}parseModuleExportName(){if(this.match(134)){let d=this.parseStringLiteral(this.state.value),l=r6.exec(d.value);return l&&this.raise(D.ModuleExportNameHasLoneSurrogate,d,{surrogateCharCode:l[0].charCodeAt(0)}),d}return this.parseIdentifier(!0)}isJSONModuleImport(d){return d.assertions!=null?d.assertions.some(({key:l,value:u})=>u.value==="json"&&(l.type==="Identifier"?l.name==="type":l.value==="type")):!1}checkImportReflection(d){let{specifiers:l}=d,u=l.length===1?l[0].type:null;if(d.phase==="source")u!=="ImportDefaultSpecifier"&&this.raise(D.SourcePhaseImportRequiresDefault,l[0].loc.start);else if(d.phase==="defer")u!=="ImportNamespaceSpecifier"&&this.raise(D.DeferImportRequiresNamespace,l[0].loc.start);else if(d.module){var m;u!=="ImportDefaultSpecifier"&&this.raise(D.ImportReflectionNotBinding,l[0].loc.start),((m=d.assertions)==null?void 0:m.length)>0&&this.raise(D.ImportReflectionHasAssertion,l[0].loc.start)}}checkJSONModuleImport(d){if(this.isJSONModuleImport(d)&&d.type!=="ExportAllDeclaration"){let{specifiers:l}=d;if(l!=null){let u=l.find(m=>{let v;if(m.type==="ExportSpecifier"?v=m.local:m.type==="ImportSpecifier"&&(v=m.imported),v!==void 0)return v.type==="Identifier"?v.name!=="default":v.value!=="default"});u!==void 0&&this.raise(D.ImportJSONBindingNotDefault,u.loc.start)}}}isPotentialImportPhase(d){return d?!1:this.isContextual(105)||this.isContextual(97)||this.isContextual(127)}applyImportPhase(d,l,u,m){l||(u==="module"?(this.expectPlugin("importReflection",m),d.module=!0):this.hasPlugin("importReflection")&&(d.module=!1),u==="source"?(this.expectPlugin("sourcePhaseImports",m),d.phase="source"):u==="defer"?(this.expectPlugin("deferredImportEvaluation",m),d.phase="defer"):this.hasPlugin("sourcePhaseImports")&&(d.phase=null))}parseMaybeImportPhase(d,l){if(!this.isPotentialImportPhase(l))return this.applyImportPhase(d,l,null),null;let u=this.parseIdentifier(!0),{type:m}=this.state;return(ni(m)?m!==98||this.lookaheadCharCode()===102:m!==12)?(this.resetPreviousIdentifierLeadingComments(u),this.applyImportPhase(d,l,u.name,u.loc.start),null):(this.applyImportPhase(d,l,null),u)}isPrecedingIdImportPhase(d){let{type:l}=this.state;return vt(l)?l!==98||this.lookaheadCharCode()===102:l!==12}parseImport(d){return this.match(134)?this.parseImportSourceAndAttributes(d):this.parseImportSpecifiersAndAfter(d,this.parseMaybeImportPhase(d,!1))}parseImportSpecifiersAndAfter(d,l){d.specifiers=[];let u=!this.maybeParseDefaultImportSpecifier(d,l)||this.eat(12),m=u&&this.maybeParseStarImportSpecifier(d);return u&&!m&&this.parseNamedImportSpecifiers(d),this.expectContextual(98),this.parseImportSourceAndAttributes(d)}parseImportSourceAndAttributes(d){var l;return(l=d.specifiers)!=null||(d.specifiers=[]),d.source=this.parseImportSource(),this.maybeParseImportAttributes(d),this.checkImportReflection(d),this.checkJSONModuleImport(d),this.semicolon(),this.finishNode(d,"ImportDeclaration")}parseImportSource(){return this.match(134)||this.unexpected(),this.parseExprAtom()}parseImportSpecifierLocal(d,l,u){l.local=this.parseIdentifier(),d.specifiers.push(this.finishImportSpecifier(l,u))}finishImportSpecifier(d,l,u=8201){return this.checkLVal(d.local,{type:l},u),this.finishNode(d,l)}parseImportAttributes(){this.expect(5);let d=[],l=new Set;do{if(this.match(8))break;let u=this.startNode(),m=this.state.value;if(l.has(m)&&this.raise(D.ModuleAttributesWithDuplicateKeys,this.state.startLoc,{key:m}),l.add(m),this.match(134)?u.key=this.parseStringLiteral(m):u.key=this.parseIdentifier(!0),this.expect(14),!this.match(134))throw this.raise(D.ModuleAttributeInvalidValue,this.state.startLoc);u.value=this.parseStringLiteral(this.state.value),d.push(this.finishNode(u,"ImportAttribute"))}while(this.eat(12));return this.expect(8),d}parseModuleAttributes(){let d=[],l=new Set;do{let u=this.startNode();if(u.key=this.parseIdentifier(!0),u.key.name!=="type"&&this.raise(D.ModuleAttributeDifferentFromType,u.key),l.has(u.key.name)&&this.raise(D.ModuleAttributesWithDuplicateKeys,u.key,{key:u.key.name}),l.add(u.key.name),this.expect(14),!this.match(134))throw this.raise(D.ModuleAttributeInvalidValue,this.state.startLoc);u.value=this.parseStringLiteral(this.state.value),d.push(this.finishNode(u,"ImportAttribute"))}while(this.eat(12));return d}maybeParseImportAttributes(d){let l;var u=!1;if(this.match(76)){if(this.hasPrecedingLineBreak()&&this.lookaheadCharCode()===40)return;this.next(),this.hasPlugin("moduleAttributes")?l=this.parseModuleAttributes():l=this.parseImportAttributes(),u=!0}else this.isContextual(94)&&!this.hasPrecedingLineBreak()?(!this.hasPlugin("deprecatedImportAssert")&&!this.hasPlugin("importAssertions")&&this.raise(D.ImportAttributesUseAssert,this.state.startLoc),this.hasPlugin("importAssertions")||this.addExtra(d,"deprecatedAssertSyntax",!0),this.next(),l=this.parseImportAttributes()):l=[];!u&&this.hasPlugin("importAssertions")?d.assertions=l:d.attributes=l}maybeParseDefaultImportSpecifier(d,l){if(l){let u=this.startNodeAtNode(l);return u.local=l,d.specifiers.push(this.finishImportSpecifier(u,"ImportDefaultSpecifier")),!0}else if(ni(this.state.type))return this.parseImportSpecifierLocal(d,this.startNode(),"ImportDefaultSpecifier"),!0;return!1}maybeParseStarImportSpecifier(d){if(this.match(55)){let l=this.startNode();return this.next(),this.expectContextual(93),this.parseImportSpecifierLocal(d,l,"ImportNamespaceSpecifier"),!0}return!1}parseNamedImportSpecifiers(d){let l=!0;for(this.expect(5);!this.eat(8);){if(l)l=!1;else{if(this.eat(14))throw this.raise(D.DestructureNamedImport,this.state.startLoc);if(this.expect(12),this.eat(8))break}let u=this.startNode(),m=this.match(134),v=this.isContextual(130);u.imported=this.parseModuleExportName();let S=this.parseImportSpecifier(u,m,d.importKind==="type"||d.importKind==="typeof",v,void 0);d.specifiers.push(S)}}parseImportSpecifier(d,l,u,m,v){if(this.eatContextual(93))d.local=this.parseIdentifier();else{let{imported:S}=d;if(l)throw this.raise(D.ImportBindingIsString,d,{importName:S.value});this.checkReservedWord(S.name,d.loc.start,!0,!0),d.local||(d.local=cs(S))}return this.finishImportSpecifier(d,"ImportSpecifier",v)}isThisParam(d){return d.type==="Identifier"&&d.name==="this"}},NP=class extends s6{constructor(d,l,u){d=I(d),super(d,l),this.options=d,this.initializeScopes(),this.plugins=u,this.filename=d.sourceFilename,this.startIndex=d.startIndex;let m=0;d.allowAwaitOutsideFunction&&(m|=1),d.allowReturnOutsideFunction&&(m|=2),d.allowImportExportEverywhere&&(m|=8),d.allowSuperOutsideMethod&&(m|=16),d.allowUndeclaredExports&&(m|=32),d.allowNewTargetOutsideFunction&&(m|=4),d.ranges&&(m|=64),d.tokens&&(m|=128),d.createImportExpressions&&(m|=256),d.createParenthesizedExpressions&&(m|=512),d.errorRecovery&&(m|=1024),d.attachComment&&(m|=2048),d.annexB&&(m|=4096),this.optionFlags=m}getScopeHandler(){return yC}parse(){this.enterInitialScopes();let d=this.startNode(),l=this.startNode();return this.nextToken(),d.errors=null,this.parseTopLevel(d,l),d.errors=this.state.errors,d.comments.length=this.state.commentsLen,d}};function a6(d,l){var u;if(((u=l)==null?void 0:u.sourceType)==="unambiguous"){l=Object.assign({},l);try{l.sourceType="module";let m=Nh(l,d),v=m.parse();if(m.sawUnambiguousESM)return v;if(m.ambiguousScriptDifferentAst)try{return l.sourceType="script",Nh(l,d).parse()}catch{}else v.program.sourceType="script";return v}catch(m){try{return l.sourceType="script",Nh(l,d).parse()}catch{}throw m}}else return Nh(l,d).parse()}function l6(d,l){let u=Nh(l,d);return u.options.strictMode&&(u.state.strict=!0),u.getExpression()}function c6(d){let l={};for(let u of Object.keys(d))l[u]=as(d[u]);return l}var d6=c6(kh);function Nh(d,l){let u=NP,m=new Map;if(d!=null&&d.plugins){for(let v of d.plugins){let S,w;typeof v=="string"?S=v:[S,w]=v,m.has(S)||m.set(S,w||{})}e6(m),u=u6(m)}return new u(d,l,m)}var MP=new Map;function u6(d){let l=[];for(let v of t6)d.has(v)&&l.push(v);let u=l.join("|"),m=MP.get(u);if(!m){m=NP;for(let v of l)m=LP[v](m);MP.set(u,m)}return m}i.parse=a6,i.parseExpression=l6,i.tokTypes=d6}),NR={};y7(NR,{parsers:()=>VR});var bR=kR(FR(),1);function SD(i){return(e,t,o)=>{let r=!!(o!=null&&o.backwards);if(t===!1)return!1;let{length:n}=e,s=t;for(;s>=0&&s<n;){let a=e.charAt(s);if(i instanceof RegExp){if(!i.test(a))return s}else if(!i.includes(a))return s;r?s--:s++}return s===-1||s===n?s:!1}}var E7e=SD(/\s/u),b7=SD(" 	"),A7e=SD(",; 	"),D7=SD(/[^\n\r]/u);function C7(i,e){if(e===!1)return!1;if(i.charAt(e)==="/"&&i.charAt(e+1)==="*"){for(let t=e+2;t<i.length;++t)if(i.charAt(t)==="*"&&i.charAt(t+1)==="/")return t+2}return e}var x7=C7;function S7(i,e,t){let o=!!(t!=null&&t.backwards);if(e===!1)return!1;let r=i.charAt(e);if(o){if(i.charAt(e-1)==="\r"&&r===`
`)return e-2;if(r===`
`||r==="\r"||r==="\u2028"||r==="\u2029")return e-1}else{if(r==="\r"&&i.charAt(e+1)===`
`)return e+2;if(r===`
`||r==="\r"||r==="\u2028"||r==="\u2029")return e+1}return e}var w7=S7;function E7(i,e){return e===!1?!1:i.charAt(e)==="/"&&i.charAt(e+1)==="/"?D7(i,e):e}var A7=E7;function T7(i,e){let t=null,o=e;for(;o!==t;)t=o,o=b7(i,o),o=x7(i,o),o=A7(i,o),o=w7(i,o);return o}var I7=T7;function P7(i){let e=[];for(let t of i)try{return t()}catch(o){e.push(o)}throw Object.assign(new Error("All combinations failed"),{errors:e})}var k7=P7;function F7(i){if(!i.startsWith("#!"))return"";let e=i.indexOf(`
`);return e===-1?i:i.slice(0,e)}var MR=F7,L7=(i,e,t)=>{if(!(i&&e==null))return Array.isArray(e)||typeof e=="string"?e[t<0?e.length+t:t]:e.at(t)},DR=L7;function N7(i){return Array.isArray(i)&&i.length>0}var AT=N7;function Xn(i){var e,t,o;let r=((e=i.range)==null?void 0:e[0])??i.start,n=(o=((t=i.declaration)==null?void 0:t.decorators)??i.decorators)==null?void 0:o[0];return n?Math.min(Xn(n),r):r}function Mc(i){var e;return((e=i.range)==null?void 0:e[1])??i.end}function M7(i){let e=new Set(i);return t=>e.has(t?.type)}var O7=M7,R7=O7(["Block","CommentBlock","MultiLine"]),xT=R7;function B7(i){let e=`*${i.value}*`.split(`
`);return e.length>1&&e.every(t=>t.trimStart()[0]==="*")}var CR=B7;function W7(i){return xT(i)&&i.value[0]==="*"&&/@(?:type|satisfies)\b/u.test(i.value)}var H7=W7,vg=null;function Dg(i){if(vg!==null&&typeof vg.property){let e=vg;return vg=Dg.prototype=null,e}return vg=Dg.prototype=i??Object.create(null),new Dg}var j7=10;for(let i=0;i<=j7;i++)Dg();function z7(i){return Dg(i)}function V7(i,e="type"){z7(i);function t(o){let r=o[e],n=i[r];if(!Array.isArray(n))throw Object.assign(new Error(`Missing visitor keys for '${r}'.`),{node:o});return n}return t}var U7=V7,q7={ArrayExpression:["elements"],AssignmentExpression:["left","right"],BinaryExpression:["left","right"],InterpreterDirective:[],Directive:["value"],DirectiveLiteral:[],BlockStatement:["directives","body"],BreakStatement:["label"],CallExpression:["callee","arguments","typeParameters","typeArguments"],CatchClause:["param","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExpressionStatement:["expression"],File:["program"],ForInStatement:["left","right","body"],ForStatement:["init","test","update","body"],FunctionDeclaration:["id","typeParameters","params","predicate","returnType","body"],FunctionExpression:["id","typeParameters","params","returnType","body"],Identifier:["typeAnnotation","decorators"],IfStatement:["test","consequent","alternate"],LabeledStatement:["label","body"],StringLiteral:[],NumericLiteral:[],NullLiteral:[],BooleanLiteral:[],RegExpLiteral:[],LogicalExpression:["left","right"],MemberExpression:["object","property"],NewExpression:["callee","arguments","typeParameters","typeArguments"],Program:["directives","body"],ObjectExpression:["properties"],ObjectMethod:["decorators","key","typeParameters","params","returnType","body"],ObjectProperty:["key","value","decorators"],RestElement:["argument","typeAnnotation","decorators"],ReturnStatement:["argument"],SequenceExpression:["expressions"],ParenthesizedExpression:["expression"],SwitchCase:["test","consequent"],SwitchStatement:["discriminant","cases"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],AssignmentPattern:["left","right","decorators","typeAnnotation"],ArrayPattern:["elements","typeAnnotation","decorators"],ArrowFunctionExpression:["typeParameters","params","predicate","returnType","body"],ClassBody:["body"],ClassExpression:["decorators","id","typeParameters","superClass","superTypeParameters","mixins","implements","body","superTypeArguments"],ClassDeclaration:["decorators","id","typeParameters","superClass","superTypeParameters","mixins","implements","body","superTypeArguments"],ExportAllDeclaration:["source","attributes","exported"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source","attributes"],ExportSpecifier:["local","exported"],ForOfStatement:["left","right","body"],ImportDeclaration:["specifiers","source","attributes"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],ImportExpression:["source","options"],MetaProperty:["meta","property"],ClassMethod:["decorators","key","typeParameters","params","returnType","body"],ObjectPattern:["properties","typeAnnotation","decorators"],SpreadElement:["argument"],Super:[],TaggedTemplateExpression:["tag","typeParameters","quasi","typeArguments"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],YieldExpression:["argument"],AwaitExpression:["argument"],BigIntLiteral:[],ExportNamespaceSpecifier:["exported"],OptionalMemberExpression:["object","property"],OptionalCallExpression:["callee","arguments","typeParameters","typeArguments"],ClassProperty:["decorators","variance","key","typeAnnotation","value"],ClassAccessorProperty:["decorators","key","typeAnnotation","value"],ClassPrivateProperty:["decorators","variance","key","typeAnnotation","value"],ClassPrivateMethod:["decorators","key","typeParameters","params","returnType","body"],PrivateName:["id"],StaticBlock:["body"],AnyTypeAnnotation:[],ArrayTypeAnnotation:["elementType"],BooleanTypeAnnotation:[],BooleanLiteralTypeAnnotation:[],NullLiteralTypeAnnotation:[],ClassImplements:["id","typeParameters"],DeclareClass:["id","typeParameters","extends","mixins","implements","body"],DeclareFunction:["id","predicate"],DeclareInterface:["id","typeParameters","extends","body"],DeclareModule:["id","body"],DeclareModuleExports:["typeAnnotation"],DeclareTypeAlias:["id","typeParameters","right"],DeclareOpaqueType:["id","typeParameters","supertype"],DeclareVariable:["id"],DeclareExportDeclaration:["declaration","specifiers","source","attributes"],DeclareExportAllDeclaration:["source","attributes"],DeclaredPredicate:["value"],ExistsTypeAnnotation:[],FunctionTypeAnnotation:["typeParameters","this","params","rest","returnType"],FunctionTypeParam:["name","typeAnnotation"],GenericTypeAnnotation:["id","typeParameters"],InferredPredicate:[],InterfaceExtends:["id","typeParameters"],InterfaceDeclaration:["id","typeParameters","extends","body"],InterfaceTypeAnnotation:["extends","body"],IntersectionTypeAnnotation:["types"],MixedTypeAnnotation:[],EmptyTypeAnnotation:[],NullableTypeAnnotation:["typeAnnotation"],NumberLiteralTypeAnnotation:[],NumberTypeAnnotation:[],ObjectTypeAnnotation:["properties","indexers","callProperties","internalSlots"],ObjectTypeInternalSlot:["id","value"],ObjectTypeCallProperty:["value"],ObjectTypeIndexer:["variance","id","key","value"],ObjectTypeProperty:["key","value","variance"],ObjectTypeSpreadProperty:["argument"],OpaqueType:["id","typeParameters","supertype","impltype"],QualifiedTypeIdentifier:["qualification","id"],StringLiteralTypeAnnotation:[],StringTypeAnnotation:[],SymbolTypeAnnotation:[],ThisTypeAnnotation:[],TupleTypeAnnotation:["types","elementTypes"],TypeofTypeAnnotation:["argument","typeArguments"],TypeAlias:["id","typeParameters","right"],TypeAnnotation:["typeAnnotation"],TypeCastExpression:["expression","typeAnnotation"],TypeParameter:["bound","default","variance"],TypeParameterDeclaration:["params"],TypeParameterInstantiation:["params"],UnionTypeAnnotation:["types"],Variance:[],VoidTypeAnnotation:[],EnumDeclaration:["id","body"],EnumBooleanBody:["members"],EnumNumberBody:["members"],EnumStringBody:["members"],EnumSymbolBody:["members"],EnumBooleanMember:["id","init"],EnumNumberMember:["id","init"],EnumStringMember:["id","init"],EnumDefaultedMember:["id"],IndexedAccessType:["objectType","indexType"],OptionalIndexedAccessType:["objectType","indexType"],JSXAttribute:["name","value"],JSXClosingElement:["name"],JSXElement:["openingElement","children","closingElement"],JSXEmptyExpression:[],JSXExpressionContainer:["expression"],JSXSpreadChild:["expression"],JSXIdentifier:[],JSXMemberExpression:["object","property"],JSXNamespacedName:["namespace","name"],JSXOpeningElement:["name","typeParameters","typeArguments","attributes"],JSXSpreadAttribute:["argument"],JSXText:[],JSXFragment:["openingFragment","children","closingFragment"],JSXOpeningFragment:[],JSXClosingFragment:[],Noop:[],Placeholder:[],V8IntrinsicIdentifier:[],ArgumentPlaceholder:[],BindExpression:["object","callee"],ImportAttribute:["key","value"],Decorator:["expression"],DoExpression:["body"],ExportDefaultSpecifier:["exported"],RecordExpression:["properties"],TupleExpression:["elements"],ModuleExpression:["body"],TopicReference:[],PipelineTopicExpression:["expression"],PipelineBareFunction:["callee"],PipelinePrimaryTopicReference:[],TSParameterProperty:["parameter","decorators"],TSDeclareFunction:["id","typeParameters","params","returnType","body"],TSDeclareMethod:["decorators","key","typeParameters","params","returnType"],TSQualifiedName:["left","right"],TSCallSignatureDeclaration:["typeParameters","parameters","typeAnnotation","params","returnType"],TSConstructSignatureDeclaration:["typeParameters","parameters","typeAnnotation","params","returnType"],TSPropertySignature:["key","typeAnnotation"],TSMethodSignature:["key","typeParameters","parameters","typeAnnotation","params","returnType"],TSIndexSignature:["parameters","typeAnnotation"],TSAnyKeyword:[],TSBooleanKeyword:[],TSBigIntKeyword:[],TSIntrinsicKeyword:[],TSNeverKeyword:[],TSNullKeyword:[],TSNumberKeyword:[],TSObjectKeyword:[],TSStringKeyword:[],TSSymbolKeyword:[],TSUndefinedKeyword:[],TSUnknownKeyword:[],TSVoidKeyword:[],TSThisType:[],TSFunctionType:["typeParameters","parameters","typeAnnotation","params","returnType"],TSConstructorType:["typeParameters","parameters","typeAnnotation","params","returnType"],TSTypeReference:["typeName","typeParameters","typeArguments"],TSTypePredicate:["parameterName","typeAnnotation"],TSTypeQuery:["exprName","typeParameters","typeArguments"],TSTypeLiteral:["members"],TSArrayType:["elementType"],TSTupleType:["elementTypes"],TSOptionalType:["typeAnnotation"],TSRestType:["typeAnnotation"],TSNamedTupleMember:["label","elementType"],TSUnionType:["types"],TSIntersectionType:["types"],TSConditionalType:["checkType","extendsType","trueType","falseType"],TSInferType:["typeParameter"],TSParenthesizedType:["typeAnnotation"],TSTypeOperator:["typeAnnotation"],TSIndexedAccessType:["objectType","indexType"],TSMappedType:["typeParameter","nameType","typeAnnotation"],TSTemplateLiteralType:["quasis","types"],TSLiteralType:["literal"],TSExpressionWithTypeArguments:["expression","typeParameters"],TSInterfaceDeclaration:["id","typeParameters","extends","body"],TSInterfaceBody:["body"],TSTypeAliasDeclaration:["id","typeParameters","typeAnnotation"],TSInstantiationExpression:["expression","typeParameters","typeArguments"],TSAsExpression:["expression","typeAnnotation"],TSSatisfiesExpression:["expression","typeAnnotation"],TSTypeAssertion:["typeAnnotation","expression"],TSEnumBody:["members"],TSEnumDeclaration:["id","members"],TSEnumMember:["id","initializer"],TSModuleDeclaration:["id","body"],TSModuleBlock:["body"],TSImportType:["argument","options","qualifier","typeParameters","typeArguments"],TSImportEqualsDeclaration:["id","moduleReference"],TSExternalModuleReference:["expression"],TSNonNullExpression:["expression"],TSExportAssignment:["expression"],TSNamespaceExportDeclaration:["id"],TSTypeAnnotation:["typeAnnotation"],TSTypeParameterInstantiation:["params"],TSTypeParameterDeclaration:["params"],TSTypeParameter:["constraint","default","name"],ChainExpression:["expression"],ExperimentalRestProperty:["argument"],ExperimentalSpreadProperty:["argument"],Literal:[],MethodDefinition:["decorators","key","value"],PrivateIdentifier:[],Property:["key","value"],PropertyDefinition:["decorators","key","typeAnnotation","value","variance"],AccessorProperty:["decorators","key","typeAnnotation","value"],TSAbstractAccessorProperty:["decorators","key","typeAnnotation"],TSAbstractKeyword:[],TSAbstractMethodDefinition:["key","value"],TSAbstractPropertyDefinition:["decorators","key","typeAnnotation"],TSAsyncKeyword:[],TSClassImplements:["expression","typeArguments","typeParameters"],TSDeclareKeyword:[],TSEmptyBodyFunctionExpression:["id","typeParameters","params","returnType"],TSExportKeyword:[],TSInterfaceHeritage:["expression","typeArguments","typeParameters"],TSPrivateKeyword:[],TSProtectedKeyword:[],TSPublicKeyword:[],TSReadonlyKeyword:[],TSStaticKeyword:[],AsConstExpression:["expression"],AsExpression:["expression","typeAnnotation"],BigIntLiteralTypeAnnotation:[],BigIntTypeAnnotation:[],ComponentDeclaration:["id","params","body","typeParameters","rendersType"],ComponentParameter:["name","local"],ComponentTypeAnnotation:["params","rest","typeParameters","rendersType"],ComponentTypeParameter:["name","typeAnnotation"],ConditionalTypeAnnotation:["checkType","extendsType","trueType","falseType"],DeclareComponent:["id","params","rest","typeParameters","rendersType"],DeclareEnum:["id","body"],DeclareHook:["id"],DeclareNamespace:["id","body"],EnumBigIntBody:["members"],EnumBigIntMember:["id","init"],HookDeclaration:["id","params","body","typeParameters","returnType"],HookTypeAnnotation:["params","returnType","rest","typeParameters"],InferTypeAnnotation:["typeParameter"],KeyofTypeAnnotation:["argument"],ObjectTypeMappedTypeProperty:["keyTparam","propType","sourceType","variance"],QualifiedTypeofIdentifier:["qualification","id"],TupleTypeLabeledElement:["label","elementType","variance"],TupleTypeSpreadElement:["label","typeAnnotation"],TypeOperator:["typeAnnotation"],TypePredicate:["parameterName","typeAnnotation","asserts"],NGRoot:["node"],NGPipeExpression:["left","right","arguments"],NGChainedExpression:["expressions"],NGEmptyExpression:[],NGMicrosyntax:["body"],NGMicrosyntaxKey:[],NGMicrosyntaxExpression:["expression","alias"],NGMicrosyntaxKeyedExpression:["key","expression"],NGMicrosyntaxLet:["key","value"],NGMicrosyntaxAs:["key","alias"],JsExpressionRoot:["node"],JsonRoot:["node"],TSJSDocAllType:[],TSJSDocUnknownType:[],TSJSDocNullableType:["typeAnnotation"],TSJSDocNonNullableType:["typeAnnotation"],NeverTypeAnnotation:[],UndefinedTypeAnnotation:[],UnknownTypeAnnotation:[],SatisfiesExpression:["expression","typeAnnotation"]},K7=U7(q7),$7=K7;function ST(i,e){if(!(i!==null&&typeof i=="object"))return i;if(Array.isArray(i)){for(let o=0;o<i.length;o++)i[o]=ST(i[o],e);return i}let t=$7(i);for(let o=0;o<t.length;o++)i[t[o]]=ST(i[t[o]],e);return e(i)||i}var DT=ST;function G7(i,e){let{parser:t,text:o}=e;if(i.type==="File"&&i.program.interpreter){let{program:{interpreter:r},comments:n}=i;delete i.program.interpreter,n.unshift(r)}if(t==="babel"){let r=new Set;i=DT(i,n=>{var s;(s=n.leadingComments)!=null&&s.some(H7)&&r.add(Xn(n))}),i=DT(i,n=>{if(n.type==="ParenthesizedExpression"){let{expression:s}=n;if(s.type==="TypeCastExpression")return s.range=[...n.range],s;let a=Xn(n);if(!r.has(a))return s.extra=he(U({},s.extra),{parenthesized:!0}),s}})}if(i=DT(i,r=>{switch(r.type){case"LogicalExpression":if(OR(r))return wT(r);break;case"VariableDeclaration":{let n=DR(!1,r.declarations,-1);n!=null&&n.init&&o[Mc(n)]!==";"&&(r.range=[Xn(r),Mc(n)]);break}case"TSParenthesizedType":return r.typeAnnotation;case"TSTypeParameter":if(typeof r.name=="string"){let n=Xn(r);r.name={type:"Identifier",name:r.name,range:[n,n+r.name.length]}}break;case"TopicReference":i.extra=he(U({},i.extra),{__isUsingHackPipeline:!0});break;case"TSUnionType":case"TSIntersectionType":if(r.types.length===1)return r.types[0];break}}),AT(i.comments)){let r=DR(!1,i.comments,-1);for(let n=i.comments.length-2;n>=0;n--){let s=i.comments[n];Mc(s)===Xn(r)&&xT(s)&&xT(r)&&CR(s)&&CR(r)&&(i.comments.splice(n+1,1),s.value+="*//*"+r.value,s.range=[Xn(s),Mc(r)]),r=s}}return i.type==="Program"&&(i.range=[0,o.length]),i}function OR(i){return i.type==="LogicalExpression"&&i.right.type==="LogicalExpression"&&i.operator===i.right.operator}function wT(i){return OR(i)?wT({type:"LogicalExpression",operator:i.operator,left:wT({type:"LogicalExpression",operator:i.operator,left:i.left,right:i.right.left,range:[Xn(i.left),Mc(i.right.left)]}),right:i.right.right,range:[Xn(i),Mc(i)]}):i}var J7=G7;function X7(i,e){let t=new SyntaxError(i+" ("+e.loc.start.line+":"+e.loc.start.column+")");return Object.assign(t,e)}var RR=X7;function Y7(i){let{message:e,loc:{line:t,column:o},reasonCode:r}=i,n=i;(r==="MissingPlugin"||r==="MissingOneOfPlugins")&&(e="Unexpected token.",n=void 0);let s=` (${t}:${o})`;return e.endsWith(s)&&(e=e.slice(0,-s.length)),RR(e,{loc:{start:{line:t,column:o+1}},cause:n})}var BR=Y7,Q7=(i,e,t,o)=>{if(!(i&&e==null))return e.replaceAll?e.replaceAll(t,o):t.global?e.replace(t,o):e.split(t).join(o)},xD=Q7,Z7=/\*\/$/,eV=/^\/\*\*?/,tV=/^\s*(\/\*\*?(.|\r?\n)*?\*\/)/,iV=/(^|\s+)\/\/([^\n\r]*)/g,xR=/^(\r?\n)+/,oV=/(?:^|\r?\n) *(@[^\n\r]*?) *\r?\n *(?![^\n\r@]*\/\/[^]*)([^\s@][^\n\r@]+?) *\r?\n/g,SR=/(?:^|\r?\n) *@(\S+) *([^\n\r]*)/g,rV=/(\r?\n|^) *\* ?/g,nV=[];function sV(i){let e=i.match(tV);return e?e[0].trimStart():""}function aV(i){let e=`
`;i=xD(!1,i.replace(eV,"").replace(Z7,""),rV,"$1");let t="";for(;t!==i;)t=i,i=xD(!1,i,oV,`${e}$1 $2${e}`);i=i.replace(xR,"").trimEnd();let o=Object.create(null),r=xD(!1,i,SR,"").replace(xR,"").trimEnd(),n;for(;n=SR.exec(i);){let s=xD(!1,n[2],iV,"");if(typeof o[n[1]]=="string"||Array.isArray(o[n[1]])){let a=o[n[1]];o[n[1]]=[...nV,...Array.isArray(a)?a:[a],s]}else o[n[1]]=s}return{comments:r,pragmas:o}}function lV(i){let e=MR(i);e&&(i=i.slice(e.length+1));let t=sV(i),{pragmas:o,comments:r}=aV(t);return{shebang:e,text:i,pragmas:o,comments:r}}function cV(i){let{pragmas:e}=lV(i);return Object.prototype.hasOwnProperty.call(e,"prettier")||Object.prototype.hasOwnProperty.call(e,"format")}function dV(i){return i=typeof i=="function"?{parse:i}:i,U({astFormat:"estree",hasPragma:cV,locStart:Xn,locEnd:Mc},i)}var bg=dV;function uV(i){let{filepath:e}=i;if(e){if(e=e.toLowerCase(),e.endsWith(".cjs")||e.endsWith(".cts"))return"script";if(e.endsWith(".mjs")||e.endsWith(".mts"))return"module"}}var hV=uV;function pV(i,e){let{type:t="JsExpressionRoot",rootMarker:o,text:r}=e,{tokens:n,comments:s}=i;return delete i.tokens,delete i.comments,{tokens:n,comments:s,type:t,node:i,range:[0,r.length],rootMarker:o}}var WR=pV,oh=i=>bg(yV(i)),mV={sourceType:"module",allowImportExportEverywhere:!0,allowReturnOutsideFunction:!0,allowNewTargetOutsideFunction:!0,allowSuperOutsideMethod:!0,allowUndeclaredExports:!0,errorRecovery:!0,createParenthesizedExpressions:!0,createImportExpressions:!0,plugins:["doExpressions","exportDefaultFrom","functionBind","functionSent","throwExpressions","partialApplication","decorators","moduleBlocks","asyncDoExpressions","destructuringPrivate","decoratorAutoAccessors","explicitResourceManagement","sourcePhaseImports","deferredImportEvaluation",["optionalChainingAssign",{version:"2023-07"}],"recordAndTuple"],tokens:!0,ranges:!0},wR="v8intrinsic",ER=[["pipelineOperator",{proposal:"hack",topicToken:"%"}],["pipelineOperator",{proposal:"fsharp"}]],Qs=(i,e=mV)=>he(U({},e),{plugins:[...e.plugins,...i]}),gV=/@(?:no)?flow\b/u;function fV(i,e){var t;if((t=e.filepath)!=null&&t.endsWith(".js.flow"))return!0;let o=MR(i);o&&(i=i.slice(o.length));let r=I7(i,0);return r!==!1&&(i=i.slice(0,r)),gV.test(i)}function _V(i,e,t){let o=i(e,t),r=o.errors.find(n=>!vV.has(n.reasonCode));if(r)throw r;return o}function yV({isExpression:i=!1,optionsCombinations:e}){return(t,o={})=>{if((o.parser==="babel"||o.parser==="__babel_estree")&&fV(t,o))return o.parser="babel-flow",jR.parse(t,o);let r=e;(o.__babelSourceType??hV(o))==="script"&&(r=r.map(c=>he(U({},c),{sourceType:"script"})));let n=/%[A-Z]/u.test(t);t.includes("|>")?r=(n?[...ER,wR]:ER).flatMap(c=>r.map(h=>Qs([c],h))):n&&(r=r.map(c=>Qs([wR],c)));let s=i?bR.parseExpression:bR.parse,a;try{a=k7(r.map(c=>()=>_V(s,t,c)))}catch({errors:[c]}){throw BR(c)}return i&&(a=WR(a,{text:t,rootMarker:o.rootMarker})),J7(a,{parser:"babel",text:t})}}var vV=new Set(["StrictNumericEscape","StrictWith","StrictOctalLiteral","StrictDelete","StrictEvalArguments","StrictEvalArgumentsBinding","StrictFunction","ForInOfLoopInitializer","EmptyTypeArguments","EmptyTypeParameters","ConstructorHasTypeParameters","UnsupportedParameterPropertyKind","DecoratorExportClass","ParamDupe","InvalidDecimal","RestTrailingComma","UnsupportedParameterDecorator","UnterminatedJsxContent","UnexpectedReservedWord","ModuleAttributesWithDuplicateKeys","LineTerminatorBeforeArrow","InvalidEscapeSequenceTemplate","NonAbstractClassHasAbstractMethod","OptionalTypeBeforeRequired","PatternIsOptional","OptionalBindingPattern","DeclareClassFieldHasInitializer","TypeImportCannotSpecifyDefaultAndNamed","ConstructorClassField","VarRedeclaration","InvalidPrivateFieldResolution","DuplicateExport","ImportAttributesUseAssert"]),HR=[Qs(["jsx"])],AR=oh({optionsCombinations:HR}),TR=oh({optionsCombinations:[Qs(["jsx","typescript"]),Qs(["typescript"])]}),IR=oh({isExpression:!0,optionsCombinations:[Qs(["jsx"])]}),PR=oh({isExpression:!0,optionsCombinations:[Qs(["typescript"])]}),jR=oh({optionsCombinations:[Qs(["jsx",["flow",{all:!0}],"flowComments"])]}),bV=oh({optionsCombinations:HR.map(i=>Qs(["estree"],i))}),DV={babel:AR,"babel-flow":jR,"babel-ts":TR,__js_expression:IR,__ts_expression:PR,__vue_expression:IR,__vue_ts_expression:PR,__vue_event_binding:AR,__vue_ts_event_binding:TR,__babel_estree:bV},CV=kR(FR(),1);function zR(i={}){let{allowComments:e=!0}=i;return function(t){let o;try{o=(0,CV.parseExpression)(t,{tokens:!0,ranges:!0,attachComment:!1})}catch(r){throw BR(r)}if(!e&&AT(o.comments))throw pl(o.comments[0],"Comment");return ih(o),WR(o,{type:"JsonRoot",text:t})}}function pl(i,e){let[t,o]=[i.loc.start,i.loc.end].map(({line:r,column:n})=>({line:r,column:n+1}));return RR(`${e} is not allowed in JSON.`,{loc:{start:t,end:o}})}function ih(i){switch(i.type){case"ArrayExpression":for(let e of i.elements)e!==null&&ih(e);return;case"ObjectExpression":for(let e of i.properties)ih(e);return;case"ObjectProperty":if(i.computed)throw pl(i.key,"Computed key");if(i.shorthand)throw pl(i.key,"Shorthand property");i.key.type!=="Identifier"&&ih(i.key),ih(i.value);return;case"UnaryExpression":{let{operator:e,argument:t}=i;if(e!=="+"&&e!=="-")throw pl(i,`Operator '${i.operator}'`);if(t.type==="NumericLiteral"||t.type==="Identifier"&&(t.name==="Infinity"||t.name==="NaN"))return;throw pl(t,`Operator '${e}' before '${t.type}'`)}case"Identifier":if(i.name!=="Infinity"&&i.name!=="NaN"&&i.name!=="undefined")throw pl(i,`Identifier '${i.name}'`);return;case"TemplateLiteral":if(AT(i.expressions))throw pl(i.expressions[0],"'TemplateLiteral' with expression");for(let e of i.quasis)ih(e);return;case"NullLiteral":case"BooleanLiteral":case"NumericLiteral":case"StringLiteral":case"TemplateElement":return;default:throw pl(i,`'${i.type}'`)}}var CT=zR(),xV={json:bg({parse:CT,hasPragma(){return!0}}),json5:bg(CT),jsonc:bg(CT),"json-stringify":bg({parse:zR({allowComments:!1}),astFormat:"estree-json"})},SV=xV,VR=U(U({},DV),SV),wV=NR;var RJ={};OP(RJ,{default:()=>OJ,languages:()=>A8,options:()=>w8,printers:()=>E8});var AV=Object.defineProperty,gB=i=>{throw TypeError(i)},BD=(i,e)=>{for(var t in e)AV(i,t,{get:e[t],enumerable:!0})},fB=(i,e,t)=>e.has(i)||gB("Cannot "+t),ml=(i,e,t)=>(fB(i,e,"read from private field"),t?t.call(i):e.get(i)),TV=(i,e,t)=>e.has(i)?gB("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),IV=(i,e,t,o)=>(fB(i,e,"write to private field"),o?o.call(i,t):e.set(i,t),t),_B={};BD(_B,{languages:()=>A8,options:()=>w8,printers:()=>E8});var PV=[{linguistLanguageId:183,name:"JavaScript",type:"programming",tmScope:"source.js",aceMode:"javascript",codemirrorMode:"javascript",codemirrorMimeType:"text/javascript",color:"#f1e05a",aliases:["js","node"],extensions:[".js","._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib",".wxs"],filenames:["Jakefile"],interpreters:["chakra","d8","gjs","js","node","nodejs","qjs","rhino","v8","v8-shell","zx"],parsers:["babel","acorn","espree","meriyah","babel-flow","babel-ts","flow","typescript"],vscodeLanguageIds:["javascript","mongo"]},{linguistLanguageId:183,name:"Flow",type:"programming",tmScope:"source.js",aceMode:"javascript",codemirrorMode:"javascript",codemirrorMimeType:"text/javascript",color:"#f1e05a",aliases:[],extensions:[".js.flow"],filenames:[],interpreters:["chakra","d8","gjs","js","node","nodejs","qjs","rhino","v8","v8-shell"],parsers:["flow","babel-flow"],vscodeLanguageIds:["javascript"]},{linguistLanguageId:183,name:"JSX",type:"programming",tmScope:"source.js.jsx",aceMode:"javascript",codemirrorMode:"jsx",codemirrorMimeType:"text/jsx",color:void 0,aliases:void 0,extensions:[".jsx"],filenames:void 0,interpreters:void 0,parsers:["babel","babel-flow","babel-ts","flow","typescript","espree","meriyah"],vscodeLanguageIds:["javascriptreact"],group:"JavaScript"},{linguistLanguageId:378,name:"TypeScript",type:"programming",color:"#3178c6",aliases:["ts"],interpreters:["deno","ts-node"],extensions:[".ts",".cts",".mts"],tmScope:"source.ts",aceMode:"typescript",codemirrorMode:"javascript",codemirrorMimeType:"application/typescript",parsers:["typescript","babel-ts"],vscodeLanguageIds:["typescript"]},{linguistLanguageId:94901924,name:"TSX",type:"programming",color:"#3178c6",group:"TypeScript",extensions:[".tsx"],tmScope:"source.tsx",aceMode:"javascript",codemirrorMode:"jsx",codemirrorMimeType:"text/jsx",parsers:["typescript","babel-ts"],vscodeLanguageIds:["typescriptreact"]}],yB={};BD(yB,{canAttachComment:()=>Oq,embed:()=>xK,experimentalFeatures:()=>AJ,getCommentChildNodes:()=>Rq,getVisitorKeys:()=>CB,handleComments:()=>VB,insertPragma:()=>OK,isBlockComment:()=>Pr,isGap:()=>Bq,massageAstNode:()=>MU,print:()=>EJ,printComment:()=>eq,willPrintOwnComments:()=>e3});var kV=(i,e,t,o)=>{if(!(i&&e==null))return e.replaceAll?e.replaceAll(t,o):t.global?e.replace(t,o):e.split(t).join(o)},ao=kV,FV=(i,e,t)=>{if(!(i&&e==null))return Array.isArray(e)||typeof e=="string"?e[t<0?e.length+t:t]:e.at(t)},Nt=FV;function LV(i){return i!==null&&typeof i=="object"}var NV=LV;function*MV(i,e){let{getVisitorKeys:t,filter:o=()=>!0}=e,r=n=>NV(n)&&o(n);for(let n of t(i)){let s=i[n];if(Array.isArray(s))for(let a of s)r(a)&&(yield a);else r(s)&&(yield s)}}function*OV(i,e){let t=[i];for(let o=0;o<t.length;o++){let r=t[o];for(let n of MV(r,e))yield n,t.push(n)}}function RV(i,{getVisitorKeys:e,predicate:t}){for(let o of OV(i,{getVisitorKeys:e}))if(t(o))return!0;return!1}var BV=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC2\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g;function WV(i){return i===12288||i>=65281&&i<=65376||i>=65504&&i<=65510}function HV(i){return i>=4352&&i<=4447||i===8986||i===8987||i===9001||i===9002||i>=9193&&i<=9196||i===9200||i===9203||i===9725||i===9726||i===9748||i===9749||i>=9776&&i<=9783||i>=9800&&i<=9811||i===9855||i>=9866&&i<=9871||i===9875||i===9889||i===9898||i===9899||i===9917||i===9918||i===9924||i===9925||i===9934||i===9940||i===9962||i===9970||i===9971||i===9973||i===9978||i===9981||i===9989||i===9994||i===9995||i===10024||i===10060||i===10062||i>=10067&&i<=10069||i===10071||i>=10133&&i<=10135||i===10160||i===10175||i===11035||i===11036||i===11088||i===11093||i>=11904&&i<=11929||i>=11931&&i<=12019||i>=12032&&i<=12245||i>=12272&&i<=12287||i>=12289&&i<=12350||i>=12353&&i<=12438||i>=12441&&i<=12543||i>=12549&&i<=12591||i>=12593&&i<=12686||i>=12688&&i<=12773||i>=12783&&i<=12830||i>=12832&&i<=12871||i>=12880&&i<=42124||i>=42128&&i<=42182||i>=43360&&i<=43388||i>=44032&&i<=55203||i>=63744&&i<=64255||i>=65040&&i<=65049||i>=65072&&i<=65106||i>=65108&&i<=65126||i>=65128&&i<=65131||i>=94176&&i<=94180||i===94192||i===94193||i>=94208&&i<=100343||i>=100352&&i<=101589||i>=101631&&i<=101640||i>=110576&&i<=110579||i>=110581&&i<=110587||i===110589||i===110590||i>=110592&&i<=110882||i===110898||i>=110928&&i<=110930||i===110933||i>=110948&&i<=110951||i>=110960&&i<=111355||i>=119552&&i<=119638||i>=119648&&i<=119670||i===126980||i===127183||i===127374||i>=127377&&i<=127386||i>=127488&&i<=127490||i>=127504&&i<=127547||i>=127552&&i<=127560||i===127568||i===127569||i>=127584&&i<=127589||i>=127744&&i<=127776||i>=127789&&i<=127797||i>=127799&&i<=127868||i>=127870&&i<=127891||i>=127904&&i<=127946||i>=127951&&i<=127955||i>=127968&&i<=127984||i===127988||i>=127992&&i<=128062||i===128064||i>=128066&&i<=128252||i>=128255&&i<=128317||i>=128331&&i<=128334||i>=128336&&i<=128359||i===128378||i===128405||i===128406||i===128420||i>=128507&&i<=128591||i>=128640&&i<=128709||i===128716||i>=128720&&i<=128722||i>=128725&&i<=128727||i>=128732&&i<=128735||i===128747||i===128748||i>=128756&&i<=128764||i>=128992&&i<=129003||i===129008||i>=129292&&i<=129338||i>=129340&&i<=129349||i>=129351&&i<=129535||i>=129648&&i<=129660||i>=129664&&i<=129673||i>=129679&&i<=129734||i>=129742&&i<=129756||i>=129759&&i<=129769||i>=129776&&i<=129784||i>=131072&&i<=196605||i>=196608&&i<=262141}var jV=i=>!(WV(i)||HV(i)),zV=/[^\x20-\x7F]/u;function VV(i){if(!i)return 0;if(!zV.test(i))return i.length;i=i.replace(BV(),"  ");let e=0;for(let t of i){let o=t.codePointAt(0);o<=31||o>=127&&o<=159||o>=768&&o<=879||(e+=jV(o)?1:2)}return e}var lh=VV;function WD(i){return(e,t,o)=>{let r=!!(o!=null&&o.backwards);if(t===!1)return!1;let{length:n}=e,s=t;for(;s>=0&&s<n;){let a=e.charAt(s);if(i instanceof RegExp){if(!i.test(a))return s}else if(!i.includes(a))return s;r?s--:s++}return s===-1||s===n?s:!1}}var cVe=WD(/\s/u),ch=WD(" 	"),UV=WD(",; 	"),qV=WD(/[^\n\r]/u);function KV(i,e,t){let o=!!(t!=null&&t.backwards);if(e===!1)return!1;let r=i.charAt(e);if(o){if(i.charAt(e-1)==="\r"&&r===`
`)return e-2;if(r===`
`||r==="\r"||r==="\u2028"||r==="\u2029")return e-1}else{if(r==="\r"&&i.charAt(e+1)===`
`)return e+2;if(r===`
`||r==="\r"||r==="\u2028"||r==="\u2029")return e+1}return e}var dh=KV;function $V(i,e,t={}){let o=ch(i,t.backwards?e-1:e,t),r=dh(i,o,t);return o!==r}var dr=$V;function GV(i,e){if(e===!1)return!1;if(i.charAt(e)==="/"&&i.charAt(e+1)==="*"){for(let t=e+2;t<i.length;++t)if(i.charAt(t)==="*"&&i.charAt(t+1)==="/")return t+2}return e}var tI=GV;function JV(i,e){return e===!1?!1:i.charAt(e)==="/"&&i.charAt(e+1)==="/"?qV(i,e):e}var iI=JV;function XV(i,e){let t=null,o=e;for(;o!==t;)t=o,o=UV(i,o),o=tI(i,o),o=ch(i,o);return o=iI(i,o),o=dh(i,o),o!==!1&&dr(i,o)}var oI=XV;function YV(i){return Array.isArray(i)&&i.length>0}var Et=YV,vB=new Proxy(()=>{},{get:()=>vB}),rI=vB,wD="'",UR='"';function QV(i,e){let t=e===!0||e===wD?wD:UR,o=t===wD?UR:wD,r=0,n=0;for(let s of i)s===t?r++:s===o&&n++;return r>n?o:t}var bB=QV;function ZV(i,e,t){let o=e==='"'?"'":'"',r=ao(!1,i,/\\(.)|(["'])/gsu,(n,s,a)=>s===o?s:a===e?"\\"+a:a||(t&&/^[^\n\r"'0-7\\bfnrt-vx\u2028\u2029]$/u.test(s)?s:"\\"+s));return e+r+e}var eU=ZV;function tU(i,e){rI.ok(/^(?<quote>["']).*\k<quote>$/su.test(i));let t=i.slice(1,-1),o=e.parser==="json"||e.parser==="jsonc"||e.parser==="json5"&&e.quoteProps==="preserve"&&!e.singleQuote?'"':e.__isInHtmlAttribute?"'":bB(t,e.singleQuote);return i.charAt(0)===o?i:eU(t,o,!1)}var uh=tU;function di(i){var e,t,o;let r=((e=i.range)==null?void 0:e[0])??i.start,n=(o=((t=i.declaration)==null?void 0:t.decorators)??i.decorators)==null?void 0:o[0];return n?Math.min(di(n),r):r}function Ct(i){var e;return((e=i.range)==null?void 0:e[1])??i.end}function HD(i,e){let t=di(i);return Number.isInteger(t)&&t===di(e)}function iU(i,e){let t=Ct(i);return Number.isInteger(t)&&t===Ct(e)}function oU(i,e){return HD(i,e)&&iU(i,e)}var Cg=null;function wg(i){if(Cg!==null&&typeof Cg.property){let e=Cg;return Cg=wg.prototype=null,e}return Cg=wg.prototype=i??Object.create(null),new wg}var rU=10;for(let i=0;i<=rU;i++)wg();function nU(i){return wg(i)}function sU(i,e="type"){nU(i);function t(o){let r=o[e],n=i[r];if(!Array.isArray(n))throw Object.assign(new Error(`Missing visitor keys for '${r}'.`),{node:o});return n}return t}var DB=sU,aU={ArrayExpression:["elements"],AssignmentExpression:["left","right"],BinaryExpression:["left","right"],InterpreterDirective:[],Directive:["value"],DirectiveLiteral:[],BlockStatement:["directives","body"],BreakStatement:["label"],CallExpression:["callee","arguments","typeParameters","typeArguments"],CatchClause:["param","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExpressionStatement:["expression"],File:["program"],ForInStatement:["left","right","body"],ForStatement:["init","test","update","body"],FunctionDeclaration:["id","typeParameters","params","predicate","returnType","body"],FunctionExpression:["id","typeParameters","params","returnType","body"],Identifier:["typeAnnotation","decorators"],IfStatement:["test","consequent","alternate"],LabeledStatement:["label","body"],StringLiteral:[],NumericLiteral:[],NullLiteral:[],BooleanLiteral:[],RegExpLiteral:[],LogicalExpression:["left","right"],MemberExpression:["object","property"],NewExpression:["callee","arguments","typeParameters","typeArguments"],Program:["directives","body"],ObjectExpression:["properties"],ObjectMethod:["decorators","key","typeParameters","params","returnType","body"],ObjectProperty:["key","value","decorators"],RestElement:["argument","typeAnnotation","decorators"],ReturnStatement:["argument"],SequenceExpression:["expressions"],ParenthesizedExpression:["expression"],SwitchCase:["test","consequent"],SwitchStatement:["discriminant","cases"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],AssignmentPattern:["left","right","decorators","typeAnnotation"],ArrayPattern:["elements","typeAnnotation","decorators"],ArrowFunctionExpression:["typeParameters","params","predicate","returnType","body"],ClassBody:["body"],ClassExpression:["decorators","id","typeParameters","superClass","superTypeParameters","mixins","implements","body","superTypeArguments"],ClassDeclaration:["decorators","id","typeParameters","superClass","superTypeParameters","mixins","implements","body","superTypeArguments"],ExportAllDeclaration:["source","attributes","exported"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source","attributes"],ExportSpecifier:["local","exported"],ForOfStatement:["left","right","body"],ImportDeclaration:["specifiers","source","attributes"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],ImportExpression:["source","options"],MetaProperty:["meta","property"],ClassMethod:["decorators","key","typeParameters","params","returnType","body"],ObjectPattern:["properties","typeAnnotation","decorators"],SpreadElement:["argument"],Super:[],TaggedTemplateExpression:["tag","typeParameters","quasi","typeArguments"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],YieldExpression:["argument"],AwaitExpression:["argument"],BigIntLiteral:[],ExportNamespaceSpecifier:["exported"],OptionalMemberExpression:["object","property"],OptionalCallExpression:["callee","arguments","typeParameters","typeArguments"],ClassProperty:["decorators","variance","key","typeAnnotation","value"],ClassAccessorProperty:["decorators","key","typeAnnotation","value"],ClassPrivateProperty:["decorators","variance","key","typeAnnotation","value"],ClassPrivateMethod:["decorators","key","typeParameters","params","returnType","body"],PrivateName:["id"],StaticBlock:["body"],AnyTypeAnnotation:[],ArrayTypeAnnotation:["elementType"],BooleanTypeAnnotation:[],BooleanLiteralTypeAnnotation:[],NullLiteralTypeAnnotation:[],ClassImplements:["id","typeParameters"],DeclareClass:["id","typeParameters","extends","mixins","implements","body"],DeclareFunction:["id","predicate"],DeclareInterface:["id","typeParameters","extends","body"],DeclareModule:["id","body"],DeclareModuleExports:["typeAnnotation"],DeclareTypeAlias:["id","typeParameters","right"],DeclareOpaqueType:["id","typeParameters","supertype"],DeclareVariable:["id"],DeclareExportDeclaration:["declaration","specifiers","source","attributes"],DeclareExportAllDeclaration:["source","attributes"],DeclaredPredicate:["value"],ExistsTypeAnnotation:[],FunctionTypeAnnotation:["typeParameters","this","params","rest","returnType"],FunctionTypeParam:["name","typeAnnotation"],GenericTypeAnnotation:["id","typeParameters"],InferredPredicate:[],InterfaceExtends:["id","typeParameters"],InterfaceDeclaration:["id","typeParameters","extends","body"],InterfaceTypeAnnotation:["extends","body"],IntersectionTypeAnnotation:["types"],MixedTypeAnnotation:[],EmptyTypeAnnotation:[],NullableTypeAnnotation:["typeAnnotation"],NumberLiteralTypeAnnotation:[],NumberTypeAnnotation:[],ObjectTypeAnnotation:["properties","indexers","callProperties","internalSlots"],ObjectTypeInternalSlot:["id","value"],ObjectTypeCallProperty:["value"],ObjectTypeIndexer:["variance","id","key","value"],ObjectTypeProperty:["key","value","variance"],ObjectTypeSpreadProperty:["argument"],OpaqueType:["id","typeParameters","supertype","impltype"],QualifiedTypeIdentifier:["qualification","id"],StringLiteralTypeAnnotation:[],StringTypeAnnotation:[],SymbolTypeAnnotation:[],ThisTypeAnnotation:[],TupleTypeAnnotation:["types","elementTypes"],TypeofTypeAnnotation:["argument","typeArguments"],TypeAlias:["id","typeParameters","right"],TypeAnnotation:["typeAnnotation"],TypeCastExpression:["expression","typeAnnotation"],TypeParameter:["bound","default","variance"],TypeParameterDeclaration:["params"],TypeParameterInstantiation:["params"],UnionTypeAnnotation:["types"],Variance:[],VoidTypeAnnotation:[],EnumDeclaration:["id","body"],EnumBooleanBody:["members"],EnumNumberBody:["members"],EnumStringBody:["members"],EnumSymbolBody:["members"],EnumBooleanMember:["id","init"],EnumNumberMember:["id","init"],EnumStringMember:["id","init"],EnumDefaultedMember:["id"],IndexedAccessType:["objectType","indexType"],OptionalIndexedAccessType:["objectType","indexType"],JSXAttribute:["name","value"],JSXClosingElement:["name"],JSXElement:["openingElement","children","closingElement"],JSXEmptyExpression:[],JSXExpressionContainer:["expression"],JSXSpreadChild:["expression"],JSXIdentifier:[],JSXMemberExpression:["object","property"],JSXNamespacedName:["namespace","name"],JSXOpeningElement:["name","typeParameters","typeArguments","attributes"],JSXSpreadAttribute:["argument"],JSXText:[],JSXFragment:["openingFragment","children","closingFragment"],JSXOpeningFragment:[],JSXClosingFragment:[],Noop:[],Placeholder:[],V8IntrinsicIdentifier:[],ArgumentPlaceholder:[],BindExpression:["object","callee"],ImportAttribute:["key","value"],Decorator:["expression"],DoExpression:["body"],ExportDefaultSpecifier:["exported"],RecordExpression:["properties"],TupleExpression:["elements"],ModuleExpression:["body"],TopicReference:[],PipelineTopicExpression:["expression"],PipelineBareFunction:["callee"],PipelinePrimaryTopicReference:[],TSParameterProperty:["parameter","decorators"],TSDeclareFunction:["id","typeParameters","params","returnType","body"],TSDeclareMethod:["decorators","key","typeParameters","params","returnType"],TSQualifiedName:["left","right"],TSCallSignatureDeclaration:["typeParameters","parameters","typeAnnotation","params","returnType"],TSConstructSignatureDeclaration:["typeParameters","parameters","typeAnnotation","params","returnType"],TSPropertySignature:["key","typeAnnotation"],TSMethodSignature:["key","typeParameters","parameters","typeAnnotation","params","returnType"],TSIndexSignature:["parameters","typeAnnotation"],TSAnyKeyword:[],TSBooleanKeyword:[],TSBigIntKeyword:[],TSIntrinsicKeyword:[],TSNeverKeyword:[],TSNullKeyword:[],TSNumberKeyword:[],TSObjectKeyword:[],TSStringKeyword:[],TSSymbolKeyword:[],TSUndefinedKeyword:[],TSUnknownKeyword:[],TSVoidKeyword:[],TSThisType:[],TSFunctionType:["typeParameters","parameters","typeAnnotation","params","returnType"],TSConstructorType:["typeParameters","parameters","typeAnnotation","params","returnType"],TSTypeReference:["typeName","typeParameters","typeArguments"],TSTypePredicate:["parameterName","typeAnnotation"],TSTypeQuery:["exprName","typeParameters","typeArguments"],TSTypeLiteral:["members"],TSArrayType:["elementType"],TSTupleType:["elementTypes"],TSOptionalType:["typeAnnotation"],TSRestType:["typeAnnotation"],TSNamedTupleMember:["label","elementType"],TSUnionType:["types"],TSIntersectionType:["types"],TSConditionalType:["checkType","extendsType","trueType","falseType"],TSInferType:["typeParameter"],TSParenthesizedType:["typeAnnotation"],TSTypeOperator:["typeAnnotation"],TSIndexedAccessType:["objectType","indexType"],TSMappedType:["typeParameter","nameType","typeAnnotation"],TSTemplateLiteralType:["quasis","types"],TSLiteralType:["literal"],TSExpressionWithTypeArguments:["expression","typeParameters"],TSInterfaceDeclaration:["id","typeParameters","extends","body"],TSInterfaceBody:["body"],TSTypeAliasDeclaration:["id","typeParameters","typeAnnotation"],TSInstantiationExpression:["expression","typeParameters","typeArguments"],TSAsExpression:["expression","typeAnnotation"],TSSatisfiesExpression:["expression","typeAnnotation"],TSTypeAssertion:["typeAnnotation","expression"],TSEnumBody:["members"],TSEnumDeclaration:["id","members"],TSEnumMember:["id","initializer"],TSModuleDeclaration:["id","body"],TSModuleBlock:["body"],TSImportType:["argument","options","qualifier","typeParameters","typeArguments"],TSImportEqualsDeclaration:["id","moduleReference"],TSExternalModuleReference:["expression"],TSNonNullExpression:["expression"],TSExportAssignment:["expression"],TSNamespaceExportDeclaration:["id"],TSTypeAnnotation:["typeAnnotation"],TSTypeParameterInstantiation:["params"],TSTypeParameterDeclaration:["params"],TSTypeParameter:["constraint","default","name"],ChainExpression:["expression"],ExperimentalRestProperty:["argument"],ExperimentalSpreadProperty:["argument"],Literal:[],MethodDefinition:["decorators","key","value"],PrivateIdentifier:[],Property:["key","value"],PropertyDefinition:["decorators","key","typeAnnotation","value","variance"],AccessorProperty:["decorators","key","typeAnnotation","value"],TSAbstractAccessorProperty:["decorators","key","typeAnnotation"],TSAbstractKeyword:[],TSAbstractMethodDefinition:["key","value"],TSAbstractPropertyDefinition:["decorators","key","typeAnnotation"],TSAsyncKeyword:[],TSClassImplements:["expression","typeArguments","typeParameters"],TSDeclareKeyword:[],TSEmptyBodyFunctionExpression:["id","typeParameters","params","returnType"],TSExportKeyword:[],TSInterfaceHeritage:["expression","typeArguments","typeParameters"],TSPrivateKeyword:[],TSProtectedKeyword:[],TSPublicKeyword:[],TSReadonlyKeyword:[],TSStaticKeyword:[],AsConstExpression:["expression"],AsExpression:["expression","typeAnnotation"],BigIntLiteralTypeAnnotation:[],BigIntTypeAnnotation:[],ComponentDeclaration:["id","params","body","typeParameters","rendersType"],ComponentParameter:["name","local"],ComponentTypeAnnotation:["params","rest","typeParameters","rendersType"],ComponentTypeParameter:["name","typeAnnotation"],ConditionalTypeAnnotation:["checkType","extendsType","trueType","falseType"],DeclareComponent:["id","params","rest","typeParameters","rendersType"],DeclareEnum:["id","body"],DeclareHook:["id"],DeclareNamespace:["id","body"],EnumBigIntBody:["members"],EnumBigIntMember:["id","init"],HookDeclaration:["id","params","body","typeParameters","returnType"],HookTypeAnnotation:["params","returnType","rest","typeParameters"],InferTypeAnnotation:["typeParameter"],KeyofTypeAnnotation:["argument"],ObjectTypeMappedTypeProperty:["keyTparam","propType","sourceType","variance"],QualifiedTypeofIdentifier:["qualification","id"],TupleTypeLabeledElement:["label","elementType","variance"],TupleTypeSpreadElement:["label","typeAnnotation"],TypeOperator:["typeAnnotation"],TypePredicate:["parameterName","typeAnnotation","asserts"],NGRoot:["node"],NGPipeExpression:["left","right","arguments"],NGChainedExpression:["expressions"],NGEmptyExpression:[],NGMicrosyntax:["body"],NGMicrosyntaxKey:[],NGMicrosyntaxExpression:["expression","alias"],NGMicrosyntaxKeyedExpression:["key","expression"],NGMicrosyntaxLet:["key","value"],NGMicrosyntaxAs:["key","alias"],JsExpressionRoot:["node"],JsonRoot:["node"],TSJSDocAllType:[],TSJSDocUnknownType:[],TSJSDocNullableType:["typeAnnotation"],TSJSDocNonNullableType:["typeAnnotation"],NeverTypeAnnotation:[],UndefinedTypeAnnotation:[],UnknownTypeAnnotation:[],SatisfiesExpression:["expression","typeAnnotation"]},lU=DB(aU),CB=lU;function cU(i){let e=new Set(i);return t=>e.has(t?.type)}var Ft=cU,dU=Ft(["Block","CommentBlock","MultiLine"]),Pr=dU,uU=Ft(["AnyTypeAnnotation","ThisTypeAnnotation","NumberTypeAnnotation","VoidTypeAnnotation","BooleanTypeAnnotation","BigIntTypeAnnotation","SymbolTypeAnnotation","StringTypeAnnotation","NeverTypeAnnotation","UndefinedTypeAnnotation","UnknownTypeAnnotation","EmptyTypeAnnotation","MixedTypeAnnotation"]),xB=uU;function hU(i,e){let t=e.split(".");for(let o=t.length-1;o>=0;o--){let r=t[o];if(o===0)return i.type==="Identifier"&&i.name===r;if(i.type!=="MemberExpression"||i.optional||i.computed||i.property.type!=="Identifier"||i.property.name!==r)return!1;i=i.object}}function pU(i,e){return e.some(t=>hU(i,t))}var mU=pU;function gU({type:i}){return i.startsWith("TS")&&i.endsWith("Keyword")}var SB=gU;function WT(i,e){return e(i)||RV(i,{getVisitorKeys:CB,predicate:e})}function nI(i){return i.type==="AssignmentExpression"||i.type==="BinaryExpression"||i.type==="LogicalExpression"||i.type==="NGPipeExpression"||i.type==="ConditionalExpression"||wt(i)||yi(i)||i.type==="SequenceExpression"||i.type==="TaggedTemplateExpression"||i.type==="BindExpression"||i.type==="UpdateExpression"&&!i.prefix||Qn(i)||i.type==="TSNonNullExpression"||i.type==="ChainExpression"}function fU(i){return i.expressions?i.expressions[0]:i.left??i.test??i.callee??i.object??i.tag??i.argument??i.expression}function wB(i){if(i.expressions)return["expressions",0];if(i.left)return["left"];if(i.test)return["test"];if(i.object)return["object"];if(i.callee)return["callee"];if(i.tag)return["tag"];if(i.argument)return["argument"];if(i.expression)return["expression"];throw new Error("Unexpected node has no left side.")}var mh=Ft(["Line","CommentLine","SingleLine","HashbangComment","HTMLOpen","HTMLClose","Hashbang","InterpreterDirective"]),_U=Ft(["ExportDefaultDeclaration","DeclareExportDeclaration","ExportNamedDeclaration","ExportAllDeclaration","DeclareExportAllDeclaration"]),co=Ft(["ArrayExpression","TupleExpression"]),an=Ft(["ObjectExpression","RecordExpression"]);function yU(i){return i.type==="LogicalExpression"&&i.operator==="??"}function Zs(i){return i.type==="NumericLiteral"||i.type==="Literal"&&typeof i.value=="number"}function EB(i){return i.type==="UnaryExpression"&&(i.operator==="+"||i.operator==="-")&&Zs(i.argument)}function Uo(i){return!!(i&&(i.type==="StringLiteral"||i.type==="Literal"&&typeof i.value=="string"))}function AB(i){return i.type==="RegExpLiteral"||i.type==="Literal"&&!!i.regex}var sI=Ft(["Literal","BooleanLiteral","BigIntLiteral","DirectiveLiteral","NullLiteral","NumericLiteral","RegExpLiteral","StringLiteral"]),vU=Ft(["Identifier","ThisExpression","Super","PrivateName","PrivateIdentifier"]),_l=Ft(["ObjectTypeAnnotation","TSTypeLiteral","TSMappedType"]),Tg=Ft(["FunctionExpression","ArrowFunctionExpression"]);function bU(i){return i.type==="FunctionExpression"||i.type==="ArrowFunctionExpression"&&i.body.type==="BlockStatement"}function TT(i){return wt(i)&&i.callee.type==="Identifier"&&["async","inject","fakeAsync","waitForAsync"].includes(i.callee.name)}var Gi=Ft(["JSXElement","JSXFragment"]);function jD(i){return i.method&&i.kind==="init"||i.kind==="get"||i.kind==="set"}function TB(i){return(i.type==="ObjectTypeProperty"||i.type==="ObjectTypeInternalSlot")&&!i.static&&!i.method&&i.kind!=="get"&&i.kind!=="set"&&i.value.type==="FunctionTypeAnnotation"}function DU(i){return(i.type==="TypeAnnotation"||i.type==="TSTypeAnnotation")&&i.typeAnnotation.type==="FunctionTypeAnnotation"&&!i.static&&!HD(i,i.typeAnnotation)}var ea=Ft(["BinaryExpression","LogicalExpression","NGPipeExpression"]);function nh(i){return yi(i)||i.type==="BindExpression"&&!!i.object}var CU=Ft(["TSThisType","NullLiteralTypeAnnotation","BooleanLiteralTypeAnnotation","StringLiteralTypeAnnotation","BigIntLiteralTypeAnnotation","NumberLiteralTypeAnnotation","TSLiteralType","TSTemplateLiteralType"]);function aI(i){return SB(i)||xB(i)||CU(i)||(i.type==="GenericTypeAnnotation"||i.type==="TSTypeReference")&&!i.typeParameters&&!i.typeArguments}function xU(i){return i.type==="Identifier"&&(i.name==="beforeEach"||i.name==="beforeAll"||i.name==="afterEach"||i.name==="afterAll")}var SU=["it","it.only","it.skip","describe","describe.only","describe.skip","test","test.only","test.skip","test.step","test.describe","test.describe.only","test.describe.parallel","test.describe.parallel.only","test.describe.serial","test.describe.serial.only","skip","xit","xdescribe","xtest","fit","fdescribe","ftest"];function wU(i){return mU(i,SU)}function zD(i,e){if(i?.type!=="CallExpression"||i.optional)return!1;let t=kr(i);if(t.length===1){if(TT(i)&&zD(e))return Tg(t[0]);if(xU(i.callee))return TT(t[0])}else if((t.length===2||t.length===3)&&(t[0].type==="TemplateLiteral"||Uo(t[0]))&&wU(i.callee))return t[2]&&!Zs(t[2])?!1:(t.length===2?Tg(t[1]):bU(t[1])&&vo(t[1]).length<=1)||TT(t[1]);return!1}var IB=i=>e=>(e?.type==="ChainExpression"&&(e=e.expression),i(e)),wt=IB(Ft(["CallExpression","OptionalCallExpression"])),yi=IB(Ft(["MemberExpression","OptionalMemberExpression"]));function qR(i,e=5){return PB(i,e)<=e}function PB(i,e){let t=0;for(let o in i){let r=i[o];if(r&&typeof r=="object"&&typeof r.type=="string"&&(t++,t+=PB(r,e-t)),t>e)return t}return t}var EU=.25;function lI(i,e){let{printWidth:t}=e;if(_e(i))return!1;let o=t*EU;if(i.type==="ThisExpression"||i.type==="Identifier"&&i.name.length<=o||EB(i)&&!_e(i.argument))return!0;let r=i.type==="Literal"&&"regex"in i&&i.regex.pattern||i.type==="RegExpLiteral"&&i.pattern;return r?r.length<=o:Uo(i)?uh(Ar(i),e).length<=o:i.type==="TemplateLiteral"?i.expressions.length===0&&i.quasis[0].value.raw.length<=o&&!i.quasis[0].value.raw.includes(`
`):i.type==="UnaryExpression"?lI(i.argument,{printWidth:t}):i.type==="CallExpression"&&i.arguments.length===0&&i.callee.type==="Identifier"?i.callee.name.length<=o-2:sI(i)}function yl(i,e){return Gi(e)?VD(e):_e(e,Se.Leading,t=>dr(i,Ct(t)))}function KR(i){return i.quasis.some(e=>e.value.raw.includes(`
`))}function kB(i,e){return(i.type==="TemplateLiteral"&&KR(i)||i.type==="TaggedTemplateExpression"&&KR(i.quasi))&&!dr(e,di(i),{backwards:!0})}function FB(i){if(!_e(i))return!1;let e=Nt(!1,ah(i,Se.Dangling),-1);return e&&!Pr(e)}function AU(i){if(i.length<=1)return!1;let e=0;for(let t of i)if(Tg(t)){if(e+=1,e>1)return!0}else if(wt(t)){for(let o of kr(t))if(Tg(o))return!0}return!1}function LB(i){let{node:e,parent:t,key:o}=i;return o==="callee"&&wt(e)&&wt(t)&&t.arguments.length>0&&e.arguments.length>t.arguments.length}var TU=new Set(["!","-","+","~"]);function nn(i,e=2){if(e<=0)return!1;if(i.type==="ChainExpression"||i.type==="TSNonNullExpression")return nn(i.expression,e);let t=o=>nn(o,e-1);if(AB(i))return lh(i.pattern??i.regex.pattern)<=5;if(sI(i)||vU(i)||i.type==="ArgumentPlaceholder")return!0;if(i.type==="TemplateLiteral")return i.quasis.every(o=>!o.value.raw.includes(`
`))&&i.expressions.every(t);if(an(i))return i.properties.every(o=>!o.computed&&(o.shorthand||o.value&&t(o.value)));if(co(i))return i.elements.every(o=>o===null||t(o));if(hh(i)){if(i.type==="ImportExpression"||nn(i.callee,e)){let o=kr(i);return o.length<=e&&o.every(t)}return!1}return yi(i)?nn(i.object,e)&&nn(i.property,e):i.type==="UnaryExpression"&&TU.has(i.operator)||i.type==="UpdateExpression"?nn(i.argument,e):!1}function Ar(i){var e;return((e=i.extra)==null?void 0:e.raw)??i.raw}function IU(i){return i}function oa(i,e="es5"){return i.trailingComma==="es5"&&e==="es5"||i.trailingComma==="all"&&(e==="all"||e==="es5")}function Fo(i,e){switch(i.type){case"BinaryExpression":case"LogicalExpression":case"AssignmentExpression":case"NGPipeExpression":return Fo(i.left,e);case"MemberExpression":case"OptionalMemberExpression":return Fo(i.object,e);case"TaggedTemplateExpression":return i.tag.type==="FunctionExpression"?!1:Fo(i.tag,e);case"CallExpression":case"OptionalCallExpression":return i.callee.type==="FunctionExpression"?!1:Fo(i.callee,e);case"ConditionalExpression":return Fo(i.test,e);case"UpdateExpression":return!i.prefix&&Fo(i.argument,e);case"BindExpression":return i.object&&Fo(i.object,e);case"SequenceExpression":return Fo(i.expressions[0],e);case"ChainExpression":case"TSSatisfiesExpression":case"TSAsExpression":case"TSNonNullExpression":case"AsExpression":case"AsConstExpression":case"SatisfiesExpression":return Fo(i.expression,e);default:return e(i)}}var $R={"==":!0,"!=":!0,"===":!0,"!==":!0},ED={"*":!0,"/":!0,"%":!0},HT={">>":!0,">>>":!0,"<<":!0};function cI(i,e){return!(LD(e)!==LD(i)||i==="**"||$R[i]&&$R[e]||e==="%"&&ED[i]||i==="%"&&ED[e]||e!==i&&ED[e]&&ED[i]||HT[i]&&HT[e])}var PU=new Map([["|>"],["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"],["**"]].flatMap((i,e)=>i.map(t=>[t,e])));function LD(i){return PU.get(i)}function kU(i){return!!HT[i]||i==="|"||i==="^"||i==="&"}function FU(i){var e;if(i.rest)return!0;let t=vo(i);return((e=Nt(!1,t,-1))==null?void 0:e.type)==="RestElement"}var IT=new WeakMap;function vo(i){if(IT.has(i))return IT.get(i);let e=[];return i.this&&e.push(i.this),Array.isArray(i.parameters)?e.push(...i.parameters):Array.isArray(i.params)&&e.push(...i.params),i.rest&&e.push(i.rest),IT.set(i,e),e}function LU(i,e){let{node:t}=i,o=0,r=n=>e(n,o++);t.this&&i.call(r,"this"),Array.isArray(t.parameters)?i.each(r,"parameters"):Array.isArray(t.params)&&i.each(r,"params"),t.rest&&i.call(r,"rest")}var PT=new WeakMap;function kr(i){if(PT.has(i))return PT.get(i);if(i.type==="ChainExpression")return kr(i.expression);let e=i.arguments;return i.type==="ImportExpression"&&(e=[i.source],i.options&&e.push(i.options)),PT.set(i,e),e}function ND(i,e){let{node:t}=i;if(t.type==="ChainExpression")return i.call(()=>ND(i,e),"expression");t.type==="ImportExpression"?(i.call(o=>e(o,0),"source"),t.options&&i.call(o=>e(o,1),"options")):i.each(e,"arguments")}function GR(i,e){let t=[];if(i.type==="ChainExpression"&&(i=i.expression,t.push("expression")),i.type==="ImportExpression"){if(e===0||e===(i.options?-2:-1))return[...t,"source"];if(i.options&&(e===1||e===-1))return[...t,"options"];throw new RangeError("Invalid argument index")}if(e<0&&(e=i.arguments.length+e),e<0||e>=i.arguments.length)throw new RangeError("Invalid argument index");return[...t,"arguments",e]}function MD(i){return i.value.trim()==="prettier-ignore"&&!i.unignore}function VD(i){return i?.prettierIgnore||_e(i,Se.PrettierIgnore)}var Se={Leading:2,Trailing:4,Dangling:8,Block:16,Line:32,PrettierIgnore:64,First:128,Last:256},NB=(i,e)=>{if(typeof i=="function"&&(e=i,i=0),i||e)return(t,o,r)=>!(i&Se.Leading&&!t.leading||i&Se.Trailing&&!t.trailing||i&Se.Dangling&&(t.leading||t.trailing)||i&Se.Block&&!Pr(t)||i&Se.Line&&!mh(t)||i&Se.First&&o!==0||i&Se.Last&&o!==r.length-1||i&Se.PrettierIgnore&&!MD(t)||e&&!e(t))};function _e(i,e,t){if(!Et(i?.comments))return!1;let o=NB(e,t);return o?i.comments.some(o):!0}function ah(i,e,t){if(!Array.isArray(i?.comments))return[];let o=NB(e,t);return o?i.comments.filter(o):i.comments}var ra=(i,{originalText:e})=>oI(e,Ct(i));function hh(i){return wt(i)||i.type==="NewExpression"||i.type==="ImportExpression"}function na(i){return i&&(i.type==="ObjectProperty"||i.type==="Property"&&!jD(i))}var Qn=Ft(["TSAsExpression","TSSatisfiesExpression","AsExpression","AsConstExpression","SatisfiesExpression"]),vl=Ft(["TSUnionType","UnionTypeAnnotation"]),dI=Ft(["TSIntersectionType","IntersectionTypeAnnotation"]),bl=Ft(["TSConditionalType","ConditionalTypeAnnotation"]),NU=new Set(["range","raw","comments","leadingComments","trailingComments","innerComments","extra","start","end","loc","flags","errors","tokens"]),rh=i=>{for(let e of i.quasis)delete e.value};function MB(i,e,t){var o,r;if(i.type==="Program"&&delete e.sourceType,(i.type==="BigIntLiteral"||i.type==="BigIntLiteralTypeAnnotation")&&i.value&&(e.value=i.value.toLowerCase()),(i.type==="BigIntLiteral"||i.type==="Literal")&&i.bigint&&(e.bigint=i.bigint.toLowerCase()),i.type==="EmptyStatement"||i.type==="JSXText"||i.type==="JSXExpressionContainer"&&(i.expression.type==="Literal"||i.expression.type==="StringLiteral")&&i.expression.value===" ")return null;if((i.type==="Property"||i.type==="ObjectProperty"||i.type==="MethodDefinition"||i.type==="ClassProperty"||i.type==="ClassMethod"||i.type==="PropertyDefinition"||i.type==="TSDeclareMethod"||i.type==="TSPropertySignature"||i.type==="ObjectTypeProperty"||i.type==="ImportAttribute")&&i.key&&!i.computed){let{key:s}=i;Uo(s)||Zs(s)?e.key=String(s.value):s.type==="Identifier"&&(e.key=s.name)}if(i.type==="JSXElement"&&i.openingElement.name.name==="style"&&i.openingElement.attributes.some(s=>s.type==="JSXAttribute"&&s.name.name==="jsx"))for(let{type:s,expression:a}of e.children)s==="JSXExpressionContainer"&&a.type==="TemplateLiteral"&&rh(a);i.type==="JSXAttribute"&&i.name.name==="css"&&i.value.type==="JSXExpressionContainer"&&i.value.expression.type==="TemplateLiteral"&&rh(e.value.expression),i.type==="JSXAttribute"&&((o=i.value)==null?void 0:o.type)==="Literal"&&/["']|&quot;|&apos;/u.test(i.value.value)&&(e.value.value=ao(!1,i.value.value,/["']|&quot;|&apos;/gu,'"'));let n=i.expression||i.callee;if(i.type==="Decorator"&&n.type==="CallExpression"&&n.callee.name==="Component"&&n.arguments.length===1){let s=i.expression.arguments[0].properties;for(let[a,c]of e.expression.arguments[0].properties.entries())switch(s[a].key.name){case"styles":co(c.value)&&rh(c.value.elements[0]);break;case"template":c.value.type==="TemplateLiteral"&&rh(c.value);break}}i.type==="TaggedTemplateExpression"&&(i.tag.type==="MemberExpression"||i.tag.type==="Identifier"&&(i.tag.name==="gql"||i.tag.name==="graphql"||i.tag.name==="css"||i.tag.name==="md"||i.tag.name==="markdown"||i.tag.name==="html")||i.tag.type==="CallExpression")&&rh(e.quasi),i.type==="TemplateLiteral"&&((r=i.leadingComments)!=null&&r.some(s=>Pr(s)&&["GraphQL","HTML"].some(a=>s.value===` ${a} `))||t.type==="CallExpression"&&t.callee.name==="graphql"||!i.leadingComments)&&rh(e),i.type==="ChainExpression"&&i.expression.type==="TSNonNullExpression"&&(e.type="TSNonNullExpression",e.expression.type="ChainExpression"),i.type==="TSMappedType"&&(delete e.key,delete e.constraint),i.type==="TSEnumDeclaration"&&delete e.body}MB.ignoredProperties=NU;var MU=MB,Wc="string",ta="array",gh="cursor",Hc="indent",jc="align",zc="trim",Tr="group",Cl="fill",Zn="if-break",Vc="indent-if-break",Uc="line-suffix",xl="line-suffix-boundary",Ko="line",sa="label",aa="break-parent",OB=new Set([gh,Hc,jc,zc,Tr,Cl,Zn,Vc,Uc,xl,Ko,sa,aa]);function OU(i){if(typeof i=="string")return Wc;if(Array.isArray(i))return ta;if(!i)return;let{type:e}=i;if(OB.has(e))return e}var Sl=OU,RU=i=>new Intl.ListFormat("en-US",{type:"disjunction"}).format(i);function BU(i){let e=i===null?"null":typeof i;if(e!=="string"&&e!=="object")return`Unexpected doc '${e}', 
Expected it to be 'string' or 'object'.`;if(Sl(i))throw new Error("doc is valid.");let t=Object.prototype.toString.call(i);if(t!=="[object Object]")return`Unexpected doc '${t}'.`;let o=RU([...OB].map(r=>`'${r}'`));return`Unexpected doc.type '${i.type}'.
Expected it to be ${o}.`}var WU=class extends Error{name="InvalidDocError";constructor(i){super(BU(i)),this.doc=i}},Ig=WU,JR={};function HU(i,e,t,o){let r=[i];for(;r.length>0;){let n=r.pop();if(n===JR){t(r.pop());continue}t&&r.push(n,JR);let s=Sl(n);if(!s)throw new Ig(n);if(e?.(n)!==!1)switch(s){case ta:case Cl:{let a=s===ta?n:n.parts;for(let c=a.length,h=c-1;h>=0;--h)r.push(a[h]);break}case Zn:r.push(n.flatContents,n.breakContents);break;case Tr:if(o&&n.expandedStates)for(let a=n.expandedStates.length,c=a-1;c>=0;--c)r.push(n.expandedStates[c]);else r.push(n.contents);break;case jc:case Hc:case Vc:case sa:case Uc:r.push(n.contents);break;case Wc:case gh:case zc:case xl:case Ko:case aa:break;default:throw new Ig(n)}}}var uI=HU;function fh(i,e){if(typeof i=="string")return e(i);let t=new Map;return o(i);function o(n){if(t.has(n))return t.get(n);let s=r(n);return t.set(n,s),s}function r(n){switch(Sl(n)){case ta:return e(n.map(o));case Cl:return e(he(U({},n),{parts:n.parts.map(o)}));case Zn:return e(he(U({},n),{breakContents:o(n.breakContents),flatContents:o(n.flatContents)}));case Tr:{let{expandedStates:s,contents:a}=n;return s?(s=s.map(o),a=s[0]):a=o(a),e(he(U({},n),{contents:a,expandedStates:s}))}case jc:case Hc:case Vc:case sa:case Uc:return e(he(U({},n),{contents:o(n.contents)}));case Wc:case gh:case zc:case xl:case Ko:case aa:return e(n);default:throw new Ig(n)}}}function RB(i,e,t){let o=t,r=!1;function n(s){if(r)return!1;let a=e(s);a!==void 0&&(r=!0,o=a)}return uI(i,n),o}function jU(i){if(i.type===Tr&&i.break||i.type===Ko&&i.hard||i.type===aa)return!0}function Lo(i){return RB(i,jU,!1)}function XR(i){if(i.length>0){let e=Nt(!1,i,-1);!e.expandedStates&&!e.break&&(e.break="propagated")}return null}function zU(i){let e=new Set,t=[];function o(n){if(n.type===aa&&XR(t),n.type===Tr){if(t.push(n),e.has(n))return!1;e.add(n)}}function r(n){n.type===Tr&&t.pop().break&&XR(t)}uI(i,o,r,!0)}function VU(i){return i.type===Ko&&!i.hard?i.soft?"":" ":i.type===Zn?i.flatContents:i}function jT(i){return fh(i,VU)}function UU(i){switch(Sl(i)){case Cl:if(i.parts.every(e=>e===""))return"";break;case Tr:if(!i.contents&&!i.id&&!i.break&&!i.expandedStates)return"";if(i.contents.type===Tr&&i.contents.id===i.id&&i.contents.break===i.break&&i.contents.expandedStates===i.expandedStates)return i.contents;break;case jc:case Hc:case Vc:case Uc:if(!i.contents)return"";break;case Zn:if(!i.flatContents&&!i.breakContents)return"";break;case ta:{let e=[];for(let t of i){if(!t)continue;let[o,...r]=Array.isArray(t)?t:[t];typeof o=="string"&&typeof Nt(!1,e,-1)=="string"?e[e.length-1]+=o:e.push(o),e.push(...r)}return e.length===0?"":e.length===1?e[0]:e}case Wc:case gh:case zc:case xl:case Ko:case sa:case aa:break;default:throw new Ig(i)}return i}function hI(i){return fh(i,e=>UU(e))}function Rc(i,e=zB){return fh(i,t=>typeof t=="string"?Dt(e,t.split(`
`)):t)}function qU(i){if(i.type===Ko)return!0}function KU(i){return RB(i,qU,!1)}function zT(i,e){return i.type===sa?he(U({},i),{contents:e(i.contents)}):e(i)}function $U(i){let e=!0;return uI(i,t=>{switch(Sl(t)){case Wc:if(t==="")break;case zc:case xl:case Ko:case aa:return e=!1,!1}}),e}var pI=()=>{},es=pI,BB=pI,GU=pI;function oe(i){return es(i),{type:Hc,contents:i}}function ts(i,e){return es(e),{type:jc,contents:e,n:i}}function z(i,e={}){return es(i),BB(e.expandedStates,!0),{type:Tr,id:e.id,contents:i,break:!!e.shouldBreak,expandedStates:e.expandedStates}}function JU(i){return ts(Number.NEGATIVE_INFINITY,i)}function WB(i){return ts(-1,i)}function Oc(i,e){return z(i[0],he(U({},e),{expandedStates:i}))}function HB(i){return GU(i),{type:Cl,parts:i}}function ot(i,e="",t={}){return es(i),e!==""&&es(e),{type:Zn,breakContents:i,flatContents:e,groupId:t.groupId}}function UD(i,e){return es(i),{type:Vc,contents:i,groupId:e.groupId,negate:e.negate}}function YR(i){return es(i),{type:Uc,contents:i}}var ia={type:xl},is={type:aa},jB={type:Ko,hard:!0},XU={type:Ko,hard:!0,literal:!0},Ce={type:Ko},ee={type:Ko,soft:!0},ie=[jB,is],zB=[XU,is],AD={type:gh};function Dt(i,e){es(i),BB(e);let t=[];for(let o=0;o<e.length;o++)o!==0&&t.push(i),t.push(e[o]);return t}function YU(i,e,t){es(i);let o=i;if(e>0){for(let r=0;r<Math.floor(e/t);++r)o=oe(o);o=ts(e%t,o),o=ts(Number.NEGATIVE_INFINITY,o)}return o}function Fg(i,e){return es(e),i?{type:sa,label:i,contents:e}:e}function QU(i){let e=`*${i.value}*`.split(`
`);return e.length>1&&e.every(t=>t.trimStart()[0]==="*")}var ZU=QU;function eq(i,e){let t=i.node;if(mh(t))return e.originalText.slice(di(t),Ct(t)).trimEnd();if(Pr(t))return ZU(t)?tq(t):["/*",Rc(t.value),"*/"];throw new Error("Not a comment: "+JSON.stringify(t))}function tq(i){let e=i.value.split(`
`);return["/*",Dt(ie,e.map((t,o)=>o===0?t.trimEnd():" "+(o<e.length-1?t.trim():t.trimStart()))),"*/"]}var VB={};BD(VB,{endOfLine:()=>lq,ownLine:()=>aq,remaining:()=>cq});function iq(i){let e=i.type||i.kind||"(unknown type)",t=String(i.name||i.id&&(typeof i.id=="object"?i.id.name:i.id)||i.key&&(typeof i.key=="object"?i.key.name:i.key)||i.value&&(typeof i.value=="object"?"":String(i.value))||i.operator||"");return t.length>20&&(t=t.slice(0,19)+"\u2026"),e+(t?" "+t:"")}function mI(i,e){(i.comments??(i.comments=[])).push(e),e.printed=!1,e.nodeDescription=iq(i)}function uo(i,e){e.leading=!0,e.trailing=!1,mI(i,e)}function Ir(i,e,t){e.leading=!1,e.trailing=!1,t&&(e.marker=t),mI(i,e)}function ri(i,e){e.leading=!1,e.trailing=!0,mI(i,e)}function oq(i,e){let t=null,o=e;for(;o!==t;)t=o,o=ch(i,o),o=tI(i,o),o=iI(i,o),o=dh(i,o);return o}var _h=oq;function rq(i,e){let t=_h(i,e);return t===!1?"":i.charAt(t)}var ln=rq;function nq(i,e,t){for(let o=e;o<t;++o)if(i.charAt(o)===`
`)return!0;return!1}var Dl=nq;function sq(i){return Pr(i)&&i.value[0]==="*"&&/@(?:type|satisfies)\b/u.test(i.value)}var UB=sq;function aq(i){return[QB,KB,JB,bq,uq,gI,fI,qB,$B,Sq,Cq,yI,YB,wq,GB,XB,_I,hq,Lq].some(e=>e(i))}function lq(i){return[dq,JB,KB,YB,gI,fI,qB,$B,XB,Dq,xq,yI,Tq,_I,kq,Fq,Nq].some(e=>e(i))}function cq(i){return[QB,gI,fI,pq,vq,GB,yI,yq,_q,Pq,_I,Iq].some(e=>e(i))}function qc(i,e){let t=(i.body||i.properties).find(({type:o})=>o!=="EmptyStatement");t?uo(t,e):Ir(i,e)}function VT(i,e){i.type==="BlockStatement"?qc(i,e):uo(i,e)}function dq({comment:i,followingNode:e}){return e&&UB(i)?(uo(e,i),!0):!1}function gI({comment:i,precedingNode:e,enclosingNode:t,followingNode:o,text:r}){if(t?.type!=="IfStatement"||!o)return!1;if(ln(r,Ct(i))===")")return ri(e,i),!0;if(e===t.consequent&&o===t.alternate){let n=_h(r,Ct(t.consequent));if(di(i)<n||t.alternate.type==="BlockStatement"){if(e.type==="BlockStatement")ri(e,i);else{let s=mh(i)||i.loc.start.line===i.loc.end.line,a=i.loc.start.line===e.loc.start.line;s&&a?ri(e,i):Ir(t,i)}return!0}}return o.type==="BlockStatement"?(qc(o,i),!0):o.type==="IfStatement"?(VT(o.consequent,i),!0):t.consequent===o?(uo(o,i),!0):!1}function fI({comment:i,precedingNode:e,enclosingNode:t,followingNode:o,text:r}){return t?.type!=="WhileStatement"||!o?!1:ln(r,Ct(i))===")"?(ri(e,i),!0):o.type==="BlockStatement"?(qc(o,i),!0):t.body===o?(uo(o,i),!0):!1}function qB({comment:i,precedingNode:e,enclosingNode:t,followingNode:o}){return t?.type!=="TryStatement"&&t?.type!=="CatchClause"||!o?!1:t.type==="CatchClause"&&e?(ri(e,i),!0):o.type==="BlockStatement"?(qc(o,i),!0):o.type==="TryStatement"?(VT(o.finalizer,i),!0):o.type==="CatchClause"?(VT(o.body,i),!0):!1}function uq({comment:i,enclosingNode:e,followingNode:t}){return yi(e)&&t?.type==="Identifier"?(uo(e,i),!0):!1}function hq({comment:i,enclosingNode:e,followingNode:t,options:o}){return!o.experimentalTernaries||!(e?.type==="ConditionalExpression"||bl(e))?!1:t?.type==="ConditionalExpression"||bl(t)?(Ir(e,i),!0):!1}function KB({comment:i,precedingNode:e,enclosingNode:t,followingNode:o,text:r,options:n}){let s=e&&!Dl(r,Ct(e),di(i));return(!e||!s)&&(t?.type==="ConditionalExpression"||bl(t))&&o?n.experimentalTernaries&&t.alternate===o&&!(Pr(i)&&!Dl(n.originalText,di(i),Ct(i)))?(Ir(t,i),!0):(uo(o,i),!0):!1}function pq({comment:i,precedingNode:e,enclosingNode:t}){return na(t)&&t.shorthand&&t.key===e&&t.value.type==="AssignmentPattern"?(ri(t.value.left,i),!0):!1}var mq=new Set(["ClassDeclaration","ClassExpression","DeclareClass","DeclareInterface","InterfaceDeclaration","TSInterfaceDeclaration"]);function $B({comment:i,precedingNode:e,enclosingNode:t,followingNode:o}){if(mq.has(t?.type)){if(Et(t.decorators)&&o?.type!=="Decorator")return ri(Nt(!1,t.decorators,-1),i),!0;if(t.body&&o===t.body)return qc(t.body,i),!0;if(o){if(t.superClass&&o===t.superClass&&e&&(e===t.id||e===t.typeParameters))return ri(e,i),!0;for(let r of["implements","extends","mixins"])if(t[r]&&o===t[r][0])return e&&(e===t.id||e===t.typeParameters||e===t.superClass)?ri(e,i):Ir(t,i,r),!0}}return!1}var gq=new Set(["ClassMethod","ClassProperty","PropertyDefinition","TSAbstractPropertyDefinition","TSAbstractMethodDefinition","TSDeclareMethod","MethodDefinition","ClassAccessorProperty","AccessorProperty","TSAbstractAccessorProperty","TSParameterProperty"]);function GB({comment:i,precedingNode:e,enclosingNode:t,text:o}){return t&&e&&ln(o,Ct(i))==="("&&(t.type==="Property"||t.type==="TSDeclareMethod"||t.type==="TSAbstractMethodDefinition")&&e.type==="Identifier"&&t.key===e&&ln(o,Ct(e))!==":"||e?.type==="Decorator"&&gq.has(t?.type)&&(mh(i)||i.placement==="ownLine")?(ri(e,i),!0):!1}var fq=new Set(["FunctionDeclaration","FunctionExpression","ClassMethod","MethodDefinition","ObjectMethod"]);function _q({comment:i,precedingNode:e,enclosingNode:t,text:o}){return ln(o,Ct(i))!=="("?!1:e&&fq.has(t?.type)?(ri(e,i),!0):!1}function yq({comment:i,enclosingNode:e,text:t}){if(e?.type!=="ArrowFunctionExpression")return!1;let o=_h(t,Ct(i));return o!==!1&&t.slice(o,o+2)==="=>"?(Ir(e,i),!0):!1}function vq({comment:i,enclosingNode:e,text:t}){return ln(t,Ct(i))!==")"?!1:e&&(ZB(e)&&vo(e).length===0||hh(e)&&kr(e).length===0)?(Ir(e,i),!0):(e?.type==="MethodDefinition"||e?.type==="TSAbstractMethodDefinition")&&vo(e.value).length===0?(Ir(e.value,i),!0):!1}function bq({comment:i,precedingNode:e,enclosingNode:t,followingNode:o,text:r}){return e?.type==="ComponentTypeParameter"&&(t?.type==="DeclareComponent"||t?.type==="ComponentTypeAnnotation")&&o?.type!=="ComponentTypeParameter"||(e?.type==="ComponentParameter"||e?.type==="RestElement")&&t?.type==="ComponentDeclaration"&&ln(r,Ct(i))===")"?(ri(e,i),!0):!1}function JB({comment:i,precedingNode:e,enclosingNode:t,followingNode:o,text:r}){return e?.type==="FunctionTypeParam"&&t?.type==="FunctionTypeAnnotation"&&o?.type!=="FunctionTypeParam"||(e?.type==="Identifier"||e?.type==="AssignmentPattern"||e?.type==="ObjectPattern"||e?.type==="ArrayPattern"||e?.type==="RestElement"||e?.type==="TSParameterProperty")&&ZB(t)&&ln(r,Ct(i))===")"?(ri(e,i),!0):!Pr(i)&&(t?.type==="FunctionDeclaration"||t?.type==="FunctionExpression"||t?.type==="ObjectMethod")&&o?.type==="BlockStatement"&&t.body===o&&_h(r,Ct(i))===di(o)?(qc(o,i),!0):!1}function XB({comment:i,enclosingNode:e}){return e?.type==="LabeledStatement"?(uo(e,i),!0):!1}function _I({comment:i,enclosingNode:e}){return(e?.type==="ContinueStatement"||e?.type==="BreakStatement")&&!e.label?(ri(e,i),!0):!1}function Dq({comment:i,precedingNode:e,enclosingNode:t}){return wt(t)&&e&&t.callee===e&&t.arguments.length>0?(uo(t.arguments[0],i),!0):!1}function Cq({comment:i,precedingNode:e,enclosingNode:t,followingNode:o}){return vl(t)?(MD(i)&&(o.prettierIgnore=!0,i.unignore=!0),e?(ri(e,i),!0):!1):(vl(o)&&MD(i)&&(o.types[0].prettierIgnore=!0,i.unignore=!0),!1)}function xq({comment:i,enclosingNode:e}){return na(e)?(uo(e,i),!0):!1}function yI({comment:i,enclosingNode:e,ast:t,isLastComment:o}){var r;return((r=t?.body)==null?void 0:r.length)===0?(o?Ir(t,i):uo(t,i),!0):e?.type==="Program"&&e.body.length===0&&!Et(e.directives)?(o?Ir(e,i):uo(e,i),!0):!1}function Sq({comment:i,enclosingNode:e}){return e?.type==="ForInStatement"||e?.type==="ForOfStatement"?(uo(e,i),!0):!1}function YB({comment:i,precedingNode:e,enclosingNode:t,text:o}){if(t?.type==="ImportSpecifier"||t?.type==="ExportSpecifier")return uo(t,i),!0;let r=e?.type==="ImportSpecifier"&&t?.type==="ImportDeclaration",n=e?.type==="ExportSpecifier"&&t?.type==="ExportNamedDeclaration";return(r||n)&&dr(o,Ct(i))?(ri(e,i),!0):!1}function wq({comment:i,enclosingNode:e}){return e?.type==="AssignmentPattern"?(uo(e,i),!0):!1}var Eq=new Set(["VariableDeclarator","AssignmentExpression","TypeAlias","TSTypeAliasDeclaration"]),Aq=new Set(["ObjectExpression","RecordExpression","ArrayExpression","TupleExpression","TemplateLiteral","TaggedTemplateExpression","ObjectTypeAnnotation","TSTypeLiteral"]);function Tq({comment:i,enclosingNode:e,followingNode:t}){return Eq.has(e?.type)&&t&&(Aq.has(t.type)||Pr(i))?(uo(t,i),!0):!1}function Iq({comment:i,enclosingNode:e,followingNode:t,text:o}){return!t&&(e?.type==="TSMethodSignature"||e?.type==="TSDeclareFunction"||e?.type==="TSAbstractMethodDefinition")&&ln(o,Ct(i))===";"?(ri(e,i),!0):!1}function QB({comment:i,enclosingNode:e,followingNode:t}){if(MD(i)&&e?.type==="TSMappedType"&&t?.type==="TSTypeParameter"&&t.constraint)return e.prettierIgnore=!0,i.unignore=!0,!0}function Pq({comment:i,precedingNode:e,enclosingNode:t,followingNode:o}){return t?.type!=="TSMappedType"?!1:o?.type==="TSTypeParameter"&&o.name?(uo(o.name,i),!0):e?.type==="TSTypeParameter"&&e.constraint?(ri(e.constraint,i),!0):!1}function kq({comment:i,enclosingNode:e,followingNode:t}){return!e||e.type!=="SwitchCase"||e.test||!t||t!==e.consequent[0]?!1:(t.type==="BlockStatement"&&mh(i)?qc(t,i):Ir(e,i),!0)}function Fq({comment:i,precedingNode:e,enclosingNode:t,followingNode:o}){return vl(e)&&((t.type==="TSArrayType"||t.type==="ArrayTypeAnnotation")&&!o||dI(t))?(ri(Nt(!1,e.types,-1),i),!0):!1}function Lq({comment:i,enclosingNode:e,precedingNode:t,followingNode:o}){if((e?.type==="ObjectPattern"||e?.type==="ArrayPattern")&&o?.type==="TSTypeAnnotation")return t?ri(t,i):Ir(e,i),!0}function Nq({comment:i,precedingNode:e,enclosingNode:t,followingNode:o}){var r;if(!o&&t?.type==="UnaryExpression"&&(e?.type==="LogicalExpression"||e?.type==="BinaryExpression")){let n=((r=t.argument.loc)==null?void 0:r.start.line)!==e.right.loc.start.line,s=mh(i)||i.loc.start.line===i.loc.end.line,a=i.loc.start.line===e.right.loc.start.line;if(n&&s&&a)return ri(e.right,i),!0}return!1}var ZB=Ft(["ArrowFunctionExpression","FunctionExpression","FunctionDeclaration","ObjectMethod","ClassMethod","TSDeclareFunction","TSCallSignatureDeclaration","TSConstructSignatureDeclaration","TSMethodSignature","TSConstructorType","TSFunctionType","TSDeclareMethod"]),Mq=new Set(["EmptyStatement","TemplateElement","TSEmptyBodyFunctionExpression","ChainExpression"]);function Oq(i){return!Mq.has(i.type)}function Rq(i,e){var t;if((e.parser==="typescript"||e.parser==="flow"||e.parser==="acorn"||e.parser==="espree"||e.parser==="meriyah"||e.parser==="__babel_estree")&&i.type==="MethodDefinition"&&((t=i.value)==null?void 0:t.type)==="FunctionExpression"&&vo(i.value).length===0&&!i.value.returnType&&!Et(i.value.typeParameters)&&i.value.body)return[...i.decorators||[],i.key,i.value.body]}function e3(i){let{node:e,parent:t}=i;return(Gi(e)||t&&(t.type==="JSXSpreadAttribute"||t.type==="JSXSpreadChild"||vl(t)||(t.type==="ClassDeclaration"||t.type==="ClassExpression")&&t.superClass===e))&&(!VD(e)||vl(t))}function Bq(i,{parser:e}){if(e==="flow"||e==="babel-flow")return i=ao(!1,i,/[\s(]/gu,""),i===""||i==="/*"||i==="/*::"}function Wq(i){switch(i){case"cr":return"\r";case"crlf":return`\r
`;default:return`
`}}var Vo=Symbol("MODE_BREAK"),Yn=Symbol("MODE_FLAT"),sh=Symbol("cursor"),UT=Symbol("DOC_FILL_PRINTED_LENGTH");function t3(){return{value:"",length:0,queue:[]}}function Hq(i,e){return qT(i,{type:"indent"},e)}function jq(i,e,t){return e===Number.NEGATIVE_INFINITY?i.root||t3():e<0?qT(i,{type:"dedent"},t):e?e.type==="root"?he(U({},i),{root:i}):qT(i,{type:typeof e=="string"?"stringAlign":"numberAlign",n:e},t):i}function qT(i,e,t){let o=e.type==="dedent"?i.queue.slice(0,-1):[...i.queue,e],r="",n=0,s=0,a=0;for(let y of o)switch(y.type){case"indent":p(),t.useTabs?c(1):h(t.tabWidth);break;case"stringAlign":p(),r+=y.n,n+=y.n.length;break;case"numberAlign":s+=1,a+=y.n;break;default:throw new Error(`Unexpected type '${y.type}'`)}return f(),he(U({},i),{value:r,length:n,queue:o});function c(y){r+="	".repeat(y),n+=t.tabWidth*y}function h(y){r+=" ".repeat(y),n+=y}function p(){t.useTabs?g():f()}function g(){s>0&&c(s),_()}function f(){a>0&&h(a),_()}function _(){s=0,a=0}}function KT(i){let e=0,t=0,o=i.length;e:for(;o--;){let r=i[o];if(r===sh){t++;continue}for(let n=r.length-1;n>=0;n--){let s=r[n];if(s===" "||s==="	")e++;else{i[o]=r.slice(0,n+1);break e}}}if(e>0||t>0)for(i.length=o+1;t-- >0;)i.push(sh);return e}function TD(i,e,t,o,r,n){if(t===Number.POSITIVE_INFINITY)return!0;let s=e.length,a=[i],c=[];for(;t>=0;){if(a.length===0){if(s===0)return!0;a.push(e[--s]);continue}let{mode:h,doc:p}=a.pop(),g=Sl(p);switch(g){case Wc:c.push(p),t-=lh(p);break;case ta:case Cl:{let f=g===ta?p:p.parts,_=p[UT]??0;for(let y=f.length-1;y>=_;y--)a.push({mode:h,doc:f[y]});break}case Hc:case jc:case Vc:case sa:a.push({mode:h,doc:p.contents});break;case zc:t+=KT(c);break;case Tr:{if(n&&p.break)return!1;let f=p.break?Vo:h,_=p.expandedStates&&f===Vo?Nt(!1,p.expandedStates,-1):p.contents;a.push({mode:f,doc:_});break}case Zn:{let f=(p.groupId?r[p.groupId]||Yn:h)===Vo?p.breakContents:p.flatContents;f&&a.push({mode:h,doc:f});break}case Ko:if(h===Vo||p.hard)return!0;p.soft||(c.push(" "),t--);break;case Uc:o=!0;break;case xl:if(o)return!1;break}}return!1}function i3(i,e){let t={},o=e.printWidth,r=Wq(e.endOfLine),n=0,s=[{ind:t3(),mode:Vo,doc:i}],a=[],c=!1,h=[],p=0;for(zU(i);s.length>0;){let{ind:f,mode:_,doc:y}=s.pop();switch(Sl(y)){case Wc:{let C=r!==`
`?ao(!1,y,`
`,r):y;a.push(C),s.length>0&&(n+=lh(C));break}case ta:for(let C=y.length-1;C>=0;C--)s.push({ind:f,mode:_,doc:y[C]});break;case gh:if(p>=2)throw new Error("There are too many 'cursor' in doc.");a.push(sh),p++;break;case Hc:s.push({ind:Hq(f,e),mode:_,doc:y.contents});break;case jc:s.push({ind:jq(f,y.n,e),mode:_,doc:y.contents});break;case zc:n-=KT(a);break;case Tr:switch(_){case Yn:if(!c){s.push({ind:f,mode:y.break?Vo:Yn,doc:y.contents});break}case Vo:{c=!1;let C={ind:f,mode:Yn,doc:y.contents},x=o-n,D=h.length>0;if(!y.break&&TD(C,s,x,D,t))s.push(C);else if(y.expandedStates){let E=Nt(!1,y.expandedStates,-1);if(y.break){s.push({ind:f,mode:Vo,doc:E});break}else for(let I=1;I<y.expandedStates.length+1;I++)if(I>=y.expandedStates.length){s.push({ind:f,mode:Vo,doc:E});break}else{let k=y.expandedStates[I],N={ind:f,mode:Yn,doc:k};if(TD(N,s,x,D,t)){s.push(N);break}}}else s.push({ind:f,mode:Vo,doc:y.contents});break}}y.id&&(t[y.id]=Nt(!1,s,-1).mode);break;case Cl:{let C=o-n,x=y[UT]??0,{parts:D}=y,E=D.length-x;if(E===0)break;let I=D[x+0],k=D[x+1],N={ind:f,mode:Yn,doc:I},O={ind:f,mode:Vo,doc:I},V=TD(N,[],C,h.length>0,t,!0);if(E===1){V?s.push(N):s.push(O);break}let K={ind:f,mode:Yn,doc:k},$={ind:f,mode:Vo,doc:k};if(E===2){V?s.push(K,N):s.push($,O);break}let ae=D[x+2],q={ind:f,mode:_,doc:he(U({},y),{[UT]:x+2})};TD({ind:f,mode:Yn,doc:[I,k,ae]},[],C,h.length>0,t,!0)?s.push(q,K,N):V?s.push(q,$,N):s.push(q,$,O);break}case Zn:case Vc:{let C=y.groupId?t[y.groupId]:_;if(C===Vo){let x=y.type===Zn?y.breakContents:y.negate?y.contents:oe(y.contents);x&&s.push({ind:f,mode:_,doc:x})}if(C===Yn){let x=y.type===Zn?y.flatContents:y.negate?oe(y.contents):y.contents;x&&s.push({ind:f,mode:_,doc:x})}break}case Uc:h.push({ind:f,mode:_,doc:y.contents});break;case xl:h.length>0&&s.push({ind:f,mode:_,doc:jB});break;case Ko:switch(_){case Yn:if(y.hard)c=!0;else{y.soft||(a.push(" "),n+=1);break}case Vo:if(h.length>0){s.push({ind:f,mode:_,doc:y},...h.reverse()),h.length=0;break}y.literal?f.root?(a.push(r,f.root.value),n=f.root.length):(a.push(r),n=0):(n-=KT(a),a.push(r+f.value),n=f.length);break}break;case sa:s.push({ind:f,mode:_,doc:y.contents});break;case aa:break;default:throw new Ig(y)}s.length===0&&h.length>0&&(s.push(...h.reverse()),h.length=0)}let g=a.indexOf(sh);if(g!==-1){let f=a.indexOf(sh,g+1);if(f===-1)return{formatted:a.filter(x=>x!==sh).join("")};let _=a.slice(0,g).join(""),y=a.slice(g+1,f).join(""),C=a.slice(f+1).join("");return{formatted:_+y+C,cursorNodeStart:_.length,cursorNodeText:y}}return{formatted:a.join("")}}function zq(i,e,t=0){let o=0;for(let r=t;r<i.length;++r)i[r]==="	"?o=o+e-o%e:o++;return o}var Vq=zq;function Uq(i,e){let t=i.lastIndexOf(`
`);return t===-1?0:Vq(i.slice(t+1).match(/^[\t ]*/u)[0],e)}var qq=Uq;function o3(i,e,t){let{node:o}=i;if(o.type==="TemplateLiteral"&&Jq(i)){let c=$q(i,t,e);if(c)return c}let r="expressions";o.type==="TSTemplateLiteralType"&&(r="types");let n=[],s=i.map(e,r);n.push(ia,"`");let a=0;return i.each(({index:c,node:h})=>{if(n.push(e()),h.tail)return;let{tabWidth:p}=t,g=h.value.raw,f=g.includes(`
`)?qq(g,p):a;a=f;let _=s[c],y=o[r][c],C=Dl(t.originalText,Ct(h),di(o.quasis[c+1]));if(!C){let D=i3(_,he(U({},t),{printWidth:Number.POSITIVE_INFINITY})).formatted;D.includes(`
`)?C=!0:_=D}C&&(_e(y)||y.type==="Identifier"||yi(y)||y.type==="ConditionalExpression"||y.type==="SequenceExpression"||Qn(y)||ea(y))&&(_=[oe([ee,_]),ee]);let x=f===0&&g.endsWith(`
`)?ts(Number.NEGATIVE_INFINITY,_):YU(_,f,p);n.push(z(["${",x,ia,"}"]))},"quasis"),n.push("`"),n}function Kq(i,e){let t=e("quasi");return Fg(t.label&&U({tagged:!0},t.label),[e("tag"),e(i.node.typeArguments?"typeArguments":"typeParameters"),ia,t])}function $q(i,e,t){let{node:o}=i,r=o.quasis[0].value.raw.trim().split(/\s*\|\s*/u);if(r.length>1||r.some(n=>n.length>0)){e.__inJestEach=!0;let n=i.map(t,"expressions");e.__inJestEach=!1;let s=[],a=n.map(f=>"${"+i3(f,he(U({},e),{printWidth:Number.POSITIVE_INFINITY,endOfLine:"lf"})).formatted+"}"),c=[{hasLineBreak:!1,cells:[]}];for(let f=1;f<o.quasis.length;f++){let _=Nt(!1,c,-1),y=a[f-1];_.cells.push(y),y.includes(`
`)&&(_.hasLineBreak=!0),o.quasis[f].value.raw.includes(`
`)&&c.push({hasLineBreak:!1,cells:[]})}let h=Math.max(r.length,...c.map(f=>f.cells.length)),p=Array.from({length:h}).fill(0),g=[{cells:r},...c.filter(f=>f.cells.length>0)];for(let{cells:f}of g.filter(_=>!_.hasLineBreak))for(let[_,y]of f.entries())p[_]=Math.max(p[_],lh(y));return s.push(ia,"`",oe([ie,Dt(ie,g.map(f=>Dt(" | ",f.cells.map((_,y)=>f.hasLineBreak?_:_+" ".repeat(p[y]-lh(_))))))]),ie,"`"),s}}function Gq(i,e){let{node:t}=i,o=e();return _e(t)&&(o=z([oe([ee,o]),ee])),["${",o,ia,"}"]}function vI(i,e){return i.map(t=>Gq(t,e),"expressions")}function r3(i,e){return fh(i,t=>typeof t=="string"?e?ao(!1,t,/(\\*)`/gu,"$1$1\\`"):n3(t):t)}function n3(i){return ao(!1,i,/([\\`]|\$\{)/gu,String.raw`\$1`)}function Jq({node:i,parent:e}){let t=/^[fx]?(?:describe|it|test)$/u;return e.type==="TaggedTemplateExpression"&&e.quasi===i&&e.tag.type==="MemberExpression"&&e.tag.property.type==="Identifier"&&e.tag.property.name==="each"&&(e.tag.object.type==="Identifier"&&t.test(e.tag.object.name)||e.tag.object.type==="MemberExpression"&&e.tag.object.property.type==="Identifier"&&(e.tag.object.property.name==="only"||e.tag.object.property.name==="skip")&&e.tag.object.object.type==="Identifier"&&t.test(e.tag.object.object.name))}var $T=[(i,e)=>i.type==="ObjectExpression"&&e==="properties",(i,e)=>i.type==="CallExpression"&&i.callee.type==="Identifier"&&i.callee.name==="Component"&&e==="arguments",(i,e)=>i.type==="Decorator"&&e==="expression"];function Xq(i){let e=o=>o.type==="TemplateLiteral",t=(o,r)=>na(o)&&!o.computed&&o.key.type==="Identifier"&&o.key.name==="styles"&&r==="value";return i.match(e,(o,r)=>co(o)&&r==="elements",t,...$T)||i.match(e,t,...$T)}function Yq(i){return i.match(e=>e.type==="TemplateLiteral",(e,t)=>na(e)&&!e.computed&&e.key.type==="Identifier"&&e.key.name==="template"&&t==="value",...$T)}function kT(i,e){return _e(i,Se.Block|Se.Leading,({value:t})=>t===` ${e} `)}function s3({node:i,parent:e},t){return kT(i,t)||Qq(e)&&kT(e,t)||e.type==="ExpressionStatement"&&kT(e,t)}function Qq(i){return i.type==="AsConstExpression"||i.type==="TSAsExpression"&&i.typeAnnotation.type==="TSTypeReference"&&i.typeAnnotation.typeName.type==="Identifier"&&i.typeAnnotation.typeName.name==="const"}async function Zq(i,e,t){let{node:o}=t,r=o.quasis.map(p=>p.value.raw),n=0,s=r.reduce((p,g,f)=>f===0?g:p+"@prettier-placeholder-"+n+++"-id"+g,""),a=await i(s,{parser:"scss"}),c=vI(t,e),h=eK(a,c);if(!h)throw new Error("Couldn't insert all the expressions");return["`",oe([ie,h]),ee,"`"]}function eK(i,e){if(!Et(e))return i;let t=0,o=fh(hI(i),r=>typeof r!="string"||!r.includes("@prettier-placeholder")?r:r.split(/@prettier-placeholder-(\d+)-id/u).map((n,s)=>s%2===0?Rc(n):(t++,e[n])));return e.length===t?o:null}function tK({node:i,parent:e,grandparent:t}){return t&&i.quasis&&e.type==="JSXExpressionContainer"&&t.type==="JSXElement"&&t.openingElement.name.name==="style"&&t.openingElement.attributes.some(o=>o.type==="JSXAttribute"&&o.name.name==="jsx")||e?.type==="TaggedTemplateExpression"&&e.tag.type==="Identifier"&&e.tag.name==="css"||e?.type==="TaggedTemplateExpression"&&e.tag.type==="MemberExpression"&&e.tag.object.name==="css"&&(e.tag.property.name==="global"||e.tag.property.name==="resolve")}function ID(i){return i.type==="Identifier"&&i.name==="styled"}function QR(i){return/^[A-Z]/u.test(i.object.name)&&i.property.name==="extend"}function iK({parent:i}){if(!i||i.type!=="TaggedTemplateExpression")return!1;let e=i.tag.type==="ParenthesizedExpression"?i.tag.expression:i.tag;switch(e.type){case"MemberExpression":return ID(e.object)||QR(e);case"CallExpression":return ID(e.callee)||e.callee.type==="MemberExpression"&&(e.callee.object.type==="MemberExpression"&&(ID(e.callee.object.object)||QR(e.callee.object))||e.callee.object.type==="CallExpression"&&ID(e.callee.object.callee));case"Identifier":return e.name==="css";default:return!1}}function oK({parent:i,grandparent:e}){return e?.type==="JSXAttribute"&&i.type==="JSXExpressionContainer"&&e.name.type==="JSXIdentifier"&&e.name.name==="css"}function rK(i){if(tK(i)||iK(i)||oK(i)||Xq(i))return Zq}var nK=rK;async function sK(i,e,t){let{node:o}=t,r=o.quasis.length,n=vI(t,e),s=[];for(let a=0;a<r;a++){let c=o.quasis[a],h=a===0,p=a===r-1,g=c.value.cooked,f=g.split(`
`),_=f.length,y=n[a],C=_>2&&f[0].trim()===""&&f[1].trim()==="",x=_>2&&f[_-1].trim()===""&&f[_-2].trim()==="",D=f.every(I=>/^\s*(?:#[^\n\r]*)?$/u.test(I));if(!p&&/#[^\n\r]*$/u.test(f[_-1]))return null;let E=null;D?E=aK(f):E=await i(g,{parser:"graphql"}),E?(E=r3(E,!1),!h&&C&&s.push(""),s.push(E),!p&&x&&s.push("")):!h&&!p&&C&&s.push(""),y&&s.push(y)}return["`",oe([ie,Dt(ie,s)]),ie,"`"]}function aK(i){let e=[],t=!1,o=i.map(r=>r.trim());for(let[r,n]of o.entries())n!==""&&(o[r-1]===""&&t?e.push([ie,n]):e.push(n),t=!0);return e.length===0?null:Dt(ie,e)}function lK({node:i,parent:e}){return s3({node:i,parent:e},"GraphQL")||e&&(e.type==="TaggedTemplateExpression"&&(e.tag.type==="MemberExpression"&&e.tag.object.name==="graphql"&&e.tag.property.name==="experimental"||e.tag.type==="Identifier"&&(e.tag.name==="gql"||e.tag.name==="graphql"))||e.type==="CallExpression"&&e.callee.type==="Identifier"&&e.callee.name==="graphql")}function cK(i){if(lK(i))return sK}var dK=cK,FT=0;async function a3(i,e,t,o,r){let{node:n}=o,s=FT;FT=FT+1>>>0;let a=D=>`PRETTIER_HTML_PLACEHOLDER_${D}_${s}_IN_JS`,c=n.quasis.map((D,E,I)=>E===I.length-1?D.value.cooked:D.value.cooked+a(E)).join(""),h=vI(o,t),p=new RegExp(a(String.raw`(\d+)`),"gu"),g=0,f=await e(c,{parser:i,__onHtmlRoot(D){g=D.children.length}}),_=fh(f,D=>{if(typeof D!="string")return D;let E=[],I=D.split(p);for(let k=0;k<I.length;k++){let N=I[k];if(k%2===0){N&&(N=n3(N),r.__embeddedInHtml&&(N=ao(!1,N,/<\/(?=script\b)/giu,String.raw`<\/`)),E.push(N));continue}let O=Number(N);E.push(h[O])}return E}),y=/^\s/u.test(c)?" ":"",C=/\s$/u.test(c)?" ":"",x=r.htmlWhitespaceSensitivity==="ignore"?ie:y&&C?Ce:null;return x?z(["`",oe([x,z(_)]),x,"`"]):Fg({hug:!1},z(["`",y,g>1?oe(z(_)):z(_),C,"`"]))}function uK(i){return s3(i,"HTML")||i.match(e=>e.type==="TemplateLiteral",(e,t)=>e.type==="TaggedTemplateExpression"&&e.tag.type==="Identifier"&&e.tag.name==="html"&&t==="quasi")}var hK=a3.bind(void 0,"html"),pK=a3.bind(void 0,"angular");function mK(i){if(uK(i))return hK;if(Yq(i))return pK}var gK=mK;async function fK(i,e,t){let{node:o}=t,r=ao(!1,o.quasis[0].value.raw,/((?:\\\\)*)\\`/gu,(c,h)=>"\\".repeat(h.length/2)+"`"),n=_K(r),s=n!=="";s&&(r=ao(!1,r,new RegExp(`^${n}`,"gmu"),""));let a=r3(await i(r,{parser:"markdown",__inJsTemplate:!0}),!0);return["`",s?oe([ee,a]):[zB,JU(a)],ee,"`"]}function _K(i){let e=i.match(/^([^\S\n]*)\S/mu);return e===null?"":e[1]}function yK(i){if(vK(i))return fK}function vK({node:i,parent:e}){return e?.type==="TaggedTemplateExpression"&&i.quasis.length===1&&e.tag.type==="Identifier"&&(e.tag.name==="md"||e.tag.name==="markdown")}var bK=yK;function DK(i){let{node:e}=i;if(e.type!=="TemplateLiteral"||CK(e))return;let t;for(let o of[nK,dK,gK,bK])if(t=o(i),!!t)return e.quasis.length===1&&e.quasis[0].value.raw.trim()===""?"``":async(...r)=>{let n=await t(...r);return n&&Fg(U({embed:!0},n.label),n)}}function CK({quasis:i}){return i.some(({value:{cooked:e}})=>e===null)}var xK=DK,SK=/\*\/$/,wK=/^\/\*\*?/,l3=/^\s*(\/\*\*?(.|\r?\n)*?\*\/)/,EK=/(^|\s+)\/\/([^\n\r]*)/g,ZR=/^(\r?\n)+/,AK=/(?:^|\r?\n) *(@[^\n\r]*?) *\r?\n *(?![^\n\r@]*\/\/[^]*)([^\s@][^\n\r@]+?) *\r?\n/g,eB=/(?:^|\r?\n) *@(\S+) *([^\n\r]*)/g,TK=/(\r?\n|^) *\* ?/g,c3=[];function IK(i){let e=i.match(l3);return e?e[0].trimStart():""}function PK(i){let e=i.match(l3),t=e?.[0];return t==null?i:i.slice(t.length)}function kK(i){let e=`
`;i=ao(!1,i.replace(wK,"").replace(SK,""),TK,"$1");let t="";for(;t!==i;)t=i,i=ao(!1,i,AK,`${e}$1 $2${e}`);i=i.replace(ZR,"").trimEnd();let o=Object.create(null),r=ao(!1,i,eB,"").replace(ZR,"").trimEnd(),n;for(;n=eB.exec(i);){let s=ao(!1,n[2],EK,"");if(typeof o[n[1]]=="string"||Array.isArray(o[n[1]])){let a=o[n[1]];o[n[1]]=[...c3,...Array.isArray(a)?a:[a],s]}else o[n[1]]=s}return{comments:r,pragmas:o}}function FK({comments:i="",pragmas:e={}}){let t=`
`,o="/**",r=" *",n=" */",s=Object.keys(e),a=s.flatMap(h=>tB(h,e[h])).map(h=>`${r} ${h}${t}`).join("");if(!i){if(s.length===0)return"";if(s.length===1&&!Array.isArray(e[s[0]])){let h=e[s[0]];return`${o} ${tB(s[0],h)[0]}${n}`}}let c=i.split(t).map(h=>`${r} ${h}`).join(t)+t;return o+t+(i?c:"")+(i&&s.length>0?r+t:"")+a+n}function tB(i,e){return[...c3,...Array.isArray(e)?e:[e]].map(t=>`@${i} ${t}`.trim())}function LK(i){if(!i.startsWith("#!"))return"";let e=i.indexOf(`
`);return e===-1?i:i.slice(0,e)}var NK=LK;function MK(i){let e=NK(i);e&&(i=i.slice(e.length+1));let t=IK(i),{pragmas:o,comments:r}=kK(t);return{shebang:e,text:i,pragmas:o,comments:r}}function OK(i){let{shebang:e,text:t,pragmas:o,comments:r}=MK(i),n=PK(t),s=FK({pragmas:U({format:""},o),comments:r.trimStart()});return(e?`${e}
`:"")+s+(n.startsWith(`
`)?`
`:`

`)+n}function RK(i,e){let{originalText:t,[Symbol.for("comments")]:o,locStart:r,locEnd:n,[Symbol.for("printedComments")]:s}=e,{node:a}=i,c=r(a),h=n(a);for(let p of o)r(p)>=c&&n(p)<=h&&s.add(p);return t.slice(c,h)}var BK=RK;function GT(i,e){var t,o,r,n,s,a,c,h,p;if(i.isRoot)return!1;let{node:g,key:f,parent:_}=i;if(e.__isInHtmlInterpolation&&!e.bracketSpacing&&zK(g)&&Sg(i))return!0;if(WK(g))return!1;if(g.type==="Identifier"){if((t=g.extra)!=null&&t.parenthesized&&/^PRETTIER_HTML_PLACEHOLDER_\d+_\d+_IN_JS$/u.test(g.name)||f==="left"&&(g.name==="async"&&!_.await||g.name==="let")&&_.type==="ForOfStatement")return!0;if(g.name==="let"){let y=(o=i.findAncestor(C=>C.type==="ForOfStatement"))==null?void 0:o.left;if(y&&Fo(y,C=>C===g))return!0}if(f==="object"&&g.name==="let"&&_.type==="MemberExpression"&&_.computed&&!_.optional){let y=i.findAncestor(x=>x.type==="ExpressionStatement"||x.type==="ForStatement"||x.type==="ForInStatement"),C=y?y.type==="ExpressionStatement"?y.expression:y.type==="ForStatement"?y.init:y.left:void 0;if(C&&Fo(C,x=>x===g))return!0}if(f==="expression")switch(g.name){case"await":case"interface":case"module":case"using":case"yield":case"let":case"component":case"hook":case"type":{let y=i.findAncestor(C=>!Qn(C));if(y!==_&&y.type==="ExpressionStatement")return!0}}return!1}if(g.type==="ObjectExpression"||g.type==="FunctionExpression"||g.type==="ClassExpression"||g.type==="DoExpression"){let y=(r=i.findAncestor(C=>C.type==="ExpressionStatement"))==null?void 0:r.expression;if(y&&Fo(y,C=>C===g))return!0}if(g.type==="ObjectExpression"){let y=(n=i.findAncestor(C=>C.type==="ArrowFunctionExpression"))==null?void 0:n.body;if(y&&y.type!=="SequenceExpression"&&y.type!=="AssignmentExpression"&&Fo(y,C=>C===g))return!0}switch(_.type){case"ParenthesizedExpression":return!1;case"ClassDeclaration":case"ClassExpression":if(f==="superClass"&&(g.type==="ArrowFunctionExpression"||g.type==="AssignmentExpression"||g.type==="AwaitExpression"||g.type==="BinaryExpression"||g.type==="ConditionalExpression"||g.type==="LogicalExpression"||g.type==="NewExpression"||g.type==="ObjectExpression"||g.type==="SequenceExpression"||g.type==="TaggedTemplateExpression"||g.type==="UnaryExpression"||g.type==="UpdateExpression"||g.type==="YieldExpression"||g.type==="TSNonNullExpression"||g.type==="ClassExpression"&&Et(g.decorators)))return!0;break;case"ExportDefaultDeclaration":return d3(i,e)||g.type==="SequenceExpression";case"Decorator":if(f==="expression"&&!UK(g))return!0;break;case"TypeAnnotation":if(i.match(void 0,void 0,(y,C)=>C==="returnType"&&y.type==="ArrowFunctionExpression")&&jK(g))return!0;break;case"BinaryExpression":if(f==="left"&&(_.operator==="in"||_.operator==="instanceof")&&g.type==="UnaryExpression")return!0;break;case"VariableDeclarator":if(f==="init"&&i.match(void 0,void 0,(y,C)=>C==="declarations"&&y.type==="VariableDeclaration",(y,C)=>C==="left"&&y.type==="ForInStatement"))return!0;break}switch(g.type){case"UpdateExpression":if(_.type==="UnaryExpression")return g.prefix&&(g.operator==="++"&&_.operator==="+"||g.operator==="--"&&_.operator==="-");case"UnaryExpression":switch(_.type){case"UnaryExpression":return g.operator===_.operator&&(g.operator==="+"||g.operator==="-");case"BindExpression":return!0;case"MemberExpression":case"OptionalMemberExpression":return f==="object";case"TaggedTemplateExpression":return!0;case"NewExpression":case"CallExpression":case"OptionalCallExpression":return f==="callee";case"BinaryExpression":return f==="left"&&_.operator==="**";case"TSNonNullExpression":return!0;default:return!1}case"BinaryExpression":if(_.type==="UpdateExpression"||g.operator==="in"&&HK(i))return!0;if(g.operator==="|>"&&(s=g.extra)!=null&&s.parenthesized){let y=i.grandparent;if(y.type==="BinaryExpression"&&y.operator==="|>")return!0}case"TSTypeAssertion":case"TSAsExpression":case"TSSatisfiesExpression":case"AsExpression":case"AsConstExpression":case"SatisfiesExpression":case"LogicalExpression":switch(_.type){case"TSAsExpression":case"TSSatisfiesExpression":case"AsExpression":case"AsConstExpression":case"SatisfiesExpression":return!Qn(g);case"ConditionalExpression":return Qn(g)||yU(g);case"CallExpression":case"NewExpression":case"OptionalCallExpression":return f==="callee";case"ClassExpression":case"ClassDeclaration":return f==="superClass";case"TSTypeAssertion":case"TaggedTemplateExpression":case"UnaryExpression":case"JSXSpreadAttribute":case"SpreadElement":case"BindExpression":case"AwaitExpression":case"TSNonNullExpression":case"UpdateExpression":return!0;case"MemberExpression":case"OptionalMemberExpression":return f==="object";case"AssignmentExpression":case"AssignmentPattern":return f==="left"&&(g.type==="TSTypeAssertion"||Qn(g));case"LogicalExpression":if(g.type==="LogicalExpression")return _.operator!==g.operator;case"BinaryExpression":{let{operator:y,type:C}=g;if(!y&&C!=="TSTypeAssertion")return!0;let x=LD(y),D=_.operator,E=LD(D);return E>x||f==="right"&&E===x||E===x&&!cI(D,y)?!0:E<x&&y==="%"?D==="+"||D==="-":!!kU(D)}default:return!1}case"SequenceExpression":switch(_.type){case"ReturnStatement":return!1;case"ForStatement":return!1;case"ExpressionStatement":return f!=="expression";case"ArrowFunctionExpression":return f!=="body";default:return!0}case"YieldExpression":if(_.type==="AwaitExpression"||_.type==="TSTypeAssertion")return!0;case"AwaitExpression":switch(_.type){case"TaggedTemplateExpression":case"UnaryExpression":case"LogicalExpression":case"SpreadElement":case"TSAsExpression":case"TSSatisfiesExpression":case"TSNonNullExpression":case"AsExpression":case"AsConstExpression":case"SatisfiesExpression":case"BindExpression":return!0;case"MemberExpression":case"OptionalMemberExpression":return f==="object";case"NewExpression":case"CallExpression":case"OptionalCallExpression":return f==="callee";case"ConditionalExpression":return f==="test";case"BinaryExpression":return!(!g.argument&&_.operator==="|>");default:return!1}case"TSFunctionType":if(i.match(y=>y.type==="TSFunctionType",(y,C)=>C==="typeAnnotation"&&y.type==="TSTypeAnnotation",(y,C)=>C==="returnType"&&y.type==="ArrowFunctionExpression"))return!0;case"TSConditionalType":case"TSConstructorType":case"ConditionalTypeAnnotation":if(f==="extendsType"&&bl(g)&&_.type===g.type||f==="checkType"&&bl(_))return!0;if(f==="extendsType"&&_.type==="TSConditionalType"){let{typeAnnotation:y}=g.returnType||g.typeAnnotation;if(y.type==="TSTypePredicate"&&y.typeAnnotation&&(y=y.typeAnnotation.typeAnnotation),y.type==="TSInferType"&&y.typeParameter.constraint)return!0}case"TSUnionType":case"TSIntersectionType":if((vl(_)||dI(_))&&_.types.length>1&&(!g.types||g.types.length>1))return!0;case"TSInferType":if(g.type==="TSInferType"){if(_.type==="TSRestType")return!1;if(f==="types"&&(_.type==="TSUnionType"||_.type==="TSIntersectionType")&&g.typeParameter.type==="TSTypeParameter"&&g.typeParameter.constraint)return!0}case"TSTypeOperator":return _.type==="TSArrayType"||_.type==="TSOptionalType"||_.type==="TSRestType"||f==="objectType"&&_.type==="TSIndexedAccessType"||_.type==="TSTypeOperator"||_.type==="TSTypeAnnotation"&&i.grandparent.type.startsWith("TSJSDoc");case"TSTypeQuery":return f==="objectType"&&_.type==="TSIndexedAccessType"||f==="elementType"&&_.type==="TSArrayType";case"TypeOperator":return _.type==="ArrayTypeAnnotation"||_.type==="NullableTypeAnnotation"||f==="objectType"&&(_.type==="IndexedAccessType"||_.type==="OptionalIndexedAccessType")||_.type==="TypeOperator";case"TypeofTypeAnnotation":return f==="objectType"&&(_.type==="IndexedAccessType"||_.type==="OptionalIndexedAccessType")||f==="elementType"&&_.type==="ArrayTypeAnnotation";case"ArrayTypeAnnotation":return _.type==="NullableTypeAnnotation";case"IntersectionTypeAnnotation":case"UnionTypeAnnotation":return _.type==="TypeOperator"||_.type==="ArrayTypeAnnotation"||_.type==="NullableTypeAnnotation"||_.type==="IntersectionTypeAnnotation"||_.type==="UnionTypeAnnotation"||f==="objectType"&&(_.type==="IndexedAccessType"||_.type==="OptionalIndexedAccessType");case"InferTypeAnnotation":case"NullableTypeAnnotation":return _.type==="ArrayTypeAnnotation"||f==="objectType"&&(_.type==="IndexedAccessType"||_.type==="OptionalIndexedAccessType");case"ComponentTypeAnnotation":case"FunctionTypeAnnotation":{if(g.type==="ComponentTypeAnnotation"&&(g.rendersType===null||g.rendersType===void 0))return!1;if(i.match(void 0,(C,x)=>x==="typeAnnotation"&&C.type==="TypeAnnotation",(C,x)=>x==="returnType"&&C.type==="ArrowFunctionExpression")||i.match(void 0,(C,x)=>x==="typeAnnotation"&&C.type==="TypePredicate",(C,x)=>x==="typeAnnotation"&&C.type==="TypeAnnotation",(C,x)=>x==="returnType"&&C.type==="ArrowFunctionExpression"))return!0;let y=_.type==="NullableTypeAnnotation"?i.grandparent:_;return y.type==="UnionTypeAnnotation"||y.type==="IntersectionTypeAnnotation"||y.type==="ArrayTypeAnnotation"||f==="objectType"&&(y.type==="IndexedAccessType"||y.type==="OptionalIndexedAccessType")||f==="checkType"&&_.type==="ConditionalTypeAnnotation"||f==="extendsType"&&_.type==="ConditionalTypeAnnotation"&&((a=g.returnType)==null?void 0:a.type)==="InferTypeAnnotation"&&((c=g.returnType)==null?void 0:c.typeParameter.bound)||y.type==="NullableTypeAnnotation"||_.type==="FunctionTypeParam"&&_.name===null&&vo(g).some(C=>{var x;return((x=C.typeAnnotation)==null?void 0:x.type)==="NullableTypeAnnotation"})}case"OptionalIndexedAccessType":return f==="objectType"&&_.type==="IndexedAccessType";case"StringLiteral":case"NumericLiteral":case"Literal":if(typeof g.value=="string"&&_.type==="ExpressionStatement"&&!_.directive){let y=i.grandparent;return y.type==="Program"||y.type==="BlockStatement"}return f==="object"&&_.type==="MemberExpression"&&typeof g.value=="number";case"AssignmentExpression":{let y=i.grandparent;return f==="body"&&_.type==="ArrowFunctionExpression"?!0:f==="key"&&(_.type==="ClassProperty"||_.type==="PropertyDefinition")&&_.computed||(f==="init"||f==="update")&&_.type==="ForStatement"?!1:_.type==="ExpressionStatement"?g.left.type==="ObjectPattern":!(f==="key"&&_.type==="TSPropertySignature"||_.type==="AssignmentExpression"||_.type==="SequenceExpression"&&y.type==="ForStatement"&&(y.init===_||y.update===_)||f==="value"&&_.type==="Property"&&y.type==="ObjectPattern"&&y.properties.includes(_)||_.type==="NGChainedExpression"||f==="node"&&_.type==="JsExpressionRoot")}case"ConditionalExpression":switch(_.type){case"TaggedTemplateExpression":case"UnaryExpression":case"SpreadElement":case"BinaryExpression":case"LogicalExpression":case"NGPipeExpression":case"ExportDefaultDeclaration":case"AwaitExpression":case"JSXSpreadAttribute":case"TSTypeAssertion":case"TypeCastExpression":case"TSAsExpression":case"TSSatisfiesExpression":case"AsExpression":case"AsConstExpression":case"SatisfiesExpression":case"TSNonNullExpression":return!0;case"NewExpression":case"CallExpression":case"OptionalCallExpression":return f==="callee";case"ConditionalExpression":return e.experimentalTernaries?!1:f==="test";case"MemberExpression":case"OptionalMemberExpression":return f==="object";default:return!1}case"FunctionExpression":switch(_.type){case"NewExpression":case"CallExpression":case"OptionalCallExpression":return f==="callee";case"TaggedTemplateExpression":return!0;default:return!1}case"ArrowFunctionExpression":switch(_.type){case"BinaryExpression":return _.operator!=="|>"||((h=g.extra)==null?void 0:h.parenthesized);case"NewExpression":case"CallExpression":case"OptionalCallExpression":return f==="callee";case"MemberExpression":case"OptionalMemberExpression":return f==="object";case"TSAsExpression":case"TSSatisfiesExpression":case"AsExpression":case"AsConstExpression":case"SatisfiesExpression":case"TSNonNullExpression":case"BindExpression":case"TaggedTemplateExpression":case"UnaryExpression":case"LogicalExpression":case"AwaitExpression":case"TSTypeAssertion":return!0;case"ConditionalExpression":return f==="test";default:return!1}case"ClassExpression":switch(_.type){case"NewExpression":return f==="callee";default:return!1}case"OptionalMemberExpression":case"OptionalCallExpression":case"CallExpression":case"MemberExpression":if(VK(i))return!0;case"TaggedTemplateExpression":case"TSNonNullExpression":if(f==="callee"&&(_.type==="BindExpression"||_.type==="NewExpression")){let y=g;for(;y;)switch(y.type){case"CallExpression":case"OptionalCallExpression":return!0;case"MemberExpression":case"OptionalMemberExpression":case"BindExpression":y=y.object;break;case"TaggedTemplateExpression":y=y.tag;break;case"TSNonNullExpression":y=y.expression;break;default:return!1}}return!1;case"BindExpression":return f==="callee"&&(_.type==="BindExpression"||_.type==="NewExpression")||f==="object"&&yi(_);case"NGPipeExpression":return!(_.type==="NGRoot"||_.type==="NGMicrosyntaxExpression"||_.type==="ObjectProperty"&&!((p=g.extra)!=null&&p.parenthesized)||co(_)||f==="arguments"&&wt(_)||f==="right"&&_.type==="NGPipeExpression"||f==="property"&&_.type==="MemberExpression"||_.type==="AssignmentExpression");case"JSXFragment":case"JSXElement":return f==="callee"||f==="left"&&_.type==="BinaryExpression"&&_.operator==="<"||!co(_)&&_.type!=="ArrowFunctionExpression"&&_.type!=="AssignmentExpression"&&_.type!=="AssignmentPattern"&&_.type!=="BinaryExpression"&&_.type!=="NewExpression"&&_.type!=="ConditionalExpression"&&_.type!=="ExpressionStatement"&&_.type!=="JsExpressionRoot"&&_.type!=="JSXAttribute"&&_.type!=="JSXElement"&&_.type!=="JSXExpressionContainer"&&_.type!=="JSXFragment"&&_.type!=="LogicalExpression"&&!wt(_)&&!na(_)&&_.type!=="ReturnStatement"&&_.type!=="ThrowStatement"&&_.type!=="TypeCastExpression"&&_.type!=="VariableDeclarator"&&_.type!=="YieldExpression";case"TSInstantiationExpression":return f==="object"&&yi(_)}return!1}var WK=Ft(["BlockStatement","BreakStatement","ComponentDeclaration","ClassBody","ClassDeclaration","ClassMethod","ClassProperty","PropertyDefinition","ClassPrivateProperty","ContinueStatement","DebuggerStatement","DeclareComponent","DeclareClass","DeclareExportAllDeclaration","DeclareExportDeclaration","DeclareFunction","DeclareHook","DeclareInterface","DeclareModule","DeclareModuleExports","DeclareNamespace","DeclareVariable","DeclareEnum","DoWhileStatement","EnumDeclaration","ExportAllDeclaration","ExportDefaultDeclaration","ExportNamedDeclaration","ExpressionStatement","ForInStatement","ForOfStatement","ForStatement","FunctionDeclaration","HookDeclaration","IfStatement","ImportDeclaration","InterfaceDeclaration","LabeledStatement","MethodDefinition","ReturnStatement","SwitchStatement","ThrowStatement","TryStatement","TSDeclareFunction","TSEnumDeclaration","TSImportEqualsDeclaration","TSInterfaceDeclaration","TSModuleDeclaration","TSNamespaceExportDeclaration","TypeAlias","VariableDeclaration","WhileStatement","WithStatement"]);function HK(i){let e=0,{node:t}=i;for(;t;){let o=i.getParentNode(e++);if(o?.type==="ForStatement"&&o.init===t)return!0;t=o}return!1}function jK(i){return WT(i,e=>e.type==="ObjectTypeAnnotation"&&WT(e,t=>t.type==="FunctionTypeAnnotation"))}function zK(i){return an(i)}function Sg(i){let{parent:e,key:t}=i;switch(e.type){case"NGPipeExpression":if(t==="arguments"&&i.isLast)return i.callParent(Sg);break;case"ObjectProperty":if(t==="value")return i.callParent(()=>i.key==="properties"&&i.isLast);break;case"BinaryExpression":case"LogicalExpression":if(t==="right")return i.callParent(Sg);break;case"ConditionalExpression":if(t==="alternate")return i.callParent(Sg);break;case"UnaryExpression":if(e.prefix)return i.callParent(Sg);break}return!1}function d3(i,e){let{node:t,parent:o}=i;return t.type==="FunctionExpression"||t.type==="ClassExpression"?o.type==="ExportDefaultDeclaration"||!GT(i,e):!nI(t)||o.type!=="ExportDefaultDeclaration"&&GT(i,e)?!1:i.call(()=>d3(i,e),...wB(t))}function VK(i){return!!(i.match(void 0,(e,t)=>t==="expression"&&e.type==="ChainExpression",(e,t)=>t==="tag"&&e.type==="TaggedTemplateExpression")||i.match(e=>e.type==="OptionalCallExpression"||e.type==="OptionalMemberExpression",(e,t)=>t==="tag"&&e.type==="TaggedTemplateExpression")||i.match(e=>e.type==="OptionalCallExpression"||e.type==="OptionalMemberExpression",(e,t)=>t==="expression"&&e.type==="TSNonNullExpression",(e,t)=>t==="tag"&&e.type==="TaggedTemplateExpression")||i.match(void 0,(e,t)=>t==="expression"&&e.type==="ChainExpression",(e,t)=>t==="expression"&&e.type==="TSNonNullExpression",(e,t)=>t==="tag"&&e.type==="TaggedTemplateExpression")||i.match(void 0,(e,t)=>t==="expression"&&e.type==="TSNonNullExpression",(e,t)=>t==="expression"&&e.type==="ChainExpression",(e,t)=>t==="tag"&&e.type==="TaggedTemplateExpression")||i.match(e=>e.type==="OptionalMemberExpression"||e.type==="OptionalCallExpression",(e,t)=>t==="object"&&e.type==="MemberExpression"||t==="callee"&&(e.type==="CallExpression"||e.type==="NewExpression"))||i.match(e=>e.type==="OptionalMemberExpression"||e.type==="OptionalCallExpression",(e,t)=>t==="expression"&&e.type==="TSNonNullExpression",(e,t)=>t==="object"&&e.type==="MemberExpression"||t==="callee"&&e.type==="CallExpression")||i.match(e=>e.type==="CallExpression"||e.type==="MemberExpression",(e,t)=>t==="expression"&&e.type==="ChainExpression")&&(i.match(void 0,void 0,(e,t)=>t==="callee"&&(e.type==="CallExpression"&&!e.optional||e.type==="NewExpression")||t==="object"&&e.type==="MemberExpression"&&!e.optional)||i.match(void 0,void 0,(e,t)=>t==="expression"&&e.type==="TSNonNullExpression",(e,t)=>t==="object"&&e.type==="MemberExpression"||t==="callee"&&e.type==="CallExpression"))||i.match(e=>e.type==="CallExpression"||e.type==="MemberExpression",(e,t)=>t==="expression"&&e.type==="TSNonNullExpression",(e,t)=>t==="expression"&&e.type==="ChainExpression",(e,t)=>t==="object"&&e.type==="MemberExpression"||t==="callee"&&e.type==="CallExpression"))}function JT(i){return i.type==="Identifier"?!0:yi(i)?!i.computed&&!i.optional&&i.property.type==="Identifier"&&JT(i.object):!1}function UK(i){return i.type==="ChainExpression"&&(i=i.expression),JT(i)||wt(i)&&!i.optional&&JT(i.callee)}var Kc=GT;function qK(i,e){let t=e-1;t=ch(i,t,{backwards:!0}),t=dh(i,t,{backwards:!0}),t=ch(i,t,{backwards:!0});let o=dh(i,t,{backwards:!0});return t!==o}var KK=qK,$K=()=>!0;function bI(i,e){let t=i.node;return t.printed=!0,e.printer.printComment(i,e)}function GK(i,e){var t;let o=i.node,r=[bI(i,e)],{printer:n,originalText:s,locStart:a,locEnd:c}=e;if((t=n.isBlockComment)!=null&&t.call(n,o)){let p=dr(s,c(o))?dr(s,a(o),{backwards:!0})?ie:Ce:" ";r.push(p)}else r.push(ie);let h=dh(s,ch(s,c(o)));return h!==!1&&dr(s,h)&&r.push(ie),r}function JK(i,e,t){var o;let r=i.node,n=bI(i,e),{printer:s,originalText:a,locStart:c}=e,h=(o=s.isBlockComment)==null?void 0:o.call(s,r);if(t!=null&&t.hasLineSuffix&&!(t!=null&&t.isBlock)||dr(a,c(r),{backwards:!0})){let p=KK(a,c(r));return{doc:YR([ie,p?ie:"",n]),isBlock:h,hasLineSuffix:!0}}return!h||t!=null&&t.hasLineSuffix?{doc:[YR([" ",n]),is],isBlock:h,hasLineSuffix:!0}:{doc:[" ",n],isBlock:h,hasLineSuffix:!1}}function oi(i,e,t={}){let{node:o}=i;if(!Et(o?.comments))return"";let{indent:r=!1,marker:n,filter:s=$K}=t,a=[];if(i.each(({node:h})=>{h.leading||h.trailing||h.marker!==n||!s(h)||a.push(bI(i,e))},"comments"),a.length===0)return"";let c=Dt(ie,a);return r?oe([ie,c]):c}function u3(i,e){let t=i.node;if(!t)return{};let o=e[Symbol.for("printedComments")];if((t.comments||[]).filter(a=>!o.has(a)).length===0)return{leading:"",trailing:""};let r=[],n=[],s;return i.each(()=>{let a=i.node;if(o!=null&&o.has(a))return;let{leading:c,trailing:h}=a;c?r.push(GK(i,e)):h&&(s=JK(i,e,s),n.push(s.doc))},"comments"),{leading:r,trailing:n}}function sn(i,e,t){let{leading:o,trailing:r}=u3(i,t);return!o&&!r?e:zT(e,n=>[o,n,r])}var XK=class extends Error{name="UnexpectedNodeError";constructor(i,e,t="type"){super(`Unexpected ${e} node ${t}: ${JSON.stringify(i[t])}.`),this.node=i}},yh=XK;function YK(i){if(typeof i!="string")throw new TypeError("Expected a string");return i.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}var rn,QK=class{constructor(i){TV(this,rn),IV(this,rn,new Set(i))}getLeadingWhitespaceCount(i){let e=ml(this,rn),t=0;for(let o=0;o<i.length&&e.has(i.charAt(o));o++)t++;return t}getTrailingWhitespaceCount(i){let e=ml(this,rn),t=0;for(let o=i.length-1;o>=0&&e.has(i.charAt(o));o--)t++;return t}getLeadingWhitespace(i){let e=this.getLeadingWhitespaceCount(i);return i.slice(0,e)}getTrailingWhitespace(i){let e=this.getTrailingWhitespaceCount(i);return i.slice(i.length-e)}hasLeadingWhitespace(i){return ml(this,rn).has(i.charAt(0))}hasTrailingWhitespace(i){return ml(this,rn).has(Nt(!1,i,-1))}trimStart(i){let e=this.getLeadingWhitespaceCount(i);return i.slice(e)}trimEnd(i){let e=this.getTrailingWhitespaceCount(i);return i.slice(0,i.length-e)}trim(i){return this.trimEnd(this.trimStart(i))}split(i,e=!1){let t=`[${YK([...ml(this,rn)].join(""))}]+`,o=new RegExp(e?`(${t})`:t,"u");return i.split(o)}hasWhitespaceCharacter(i){let e=ml(this,rn);return Array.prototype.some.call(i,t=>e.has(t))}hasNonWhitespaceCharacter(i){let e=ml(this,rn);return Array.prototype.some.call(i,t=>!e.has(t))}isWhitespaceOnly(i){let e=ml(this,rn);return Array.prototype.every.call(i,t=>e.has(t))}};rn=new WeakMap;var ZK=QK,PD=new ZK(` 
\r	`),LT=i=>i===""||i===Ce||i===ie||i===ee;function e$(i,e,t){var o,r,n,s,a;let{node:c}=i;if(c.type==="JSXElement"&&g$(c))return[t("openingElement"),t("closingElement")];let h=c.type==="JSXElement"?t("openingElement"):t("openingFragment"),p=c.type==="JSXElement"?t("closingElement"):t("closingFragment");if(c.children.length===1&&c.children[0].type==="JSXExpressionContainer"&&(c.children[0].expression.type==="TemplateLiteral"||c.children[0].expression.type==="TaggedTemplateExpression"))return[h,...i.map(t,"children"),p];c.children=c.children.map(K=>f$(K)?{type:"JSXText",value:" ",raw:" "}:K);let g=c.children.some(Gi),f=c.children.filter(K=>K.type==="JSXExpressionContainer").length>1,_=c.type==="JSXElement"&&c.openingElement.attributes.length>1,y=Lo(h)||g||_||f,C=i.parent.rootMarker==="mdx",x=e.singleQuote?"{' '}":'{" "}',D=C?Ce:ot([x,ee]," "),E=((r=(o=c.openingElement)==null?void 0:o.name)==null?void 0:r.name)==="fbt",I=t$(i,e,t,D,E),k=c.children.some(K=>Pg(K));for(let K=I.length-2;K>=0;K--){let $=I[K]===""&&I[K+1]==="",ae=I[K]===ie&&I[K+1]===""&&I[K+2]===ie,q=(I[K]===ee||I[K]===ie)&&I[K+1]===""&&I[K+2]===D,ji=I[K]===D&&I[K+1]===""&&(I[K+2]===ee||I[K+2]===ie),Mt=I[K]===D&&I[K+1]===""&&I[K+2]===D,De=I[K]===ee&&I[K+1]===""&&I[K+2]===ie||I[K]===ie&&I[K+1]===""&&I[K+2]===ee;ae&&k||$||q||Mt||De?I.splice(K,2):ji&&I.splice(K+1,2)}for(;I.length>0&&LT(Nt(!1,I,-1));)I.pop();for(;I.length>1&&LT(I[0])&&LT(I[1]);)I.shift(),I.shift();let N=[""];for(let[K,$]of I.entries()){if($===D){if(K===1&&$U(I[K-1])){if(I.length===2){N.push([N.pop(),x]);continue}N.push([x,ie],"");continue}else if(K===I.length-1){N.push([N.pop(),x]);continue}else if(I[K-1]===""&&I[K-2]===ie){N.push([N.pop(),x]);continue}}K%2===0?N.push([N.pop(),$]):N.push($,""),Lo($)&&(y=!0)}let O=k?HB(N):z(N,{shouldBreak:!0});if(((n=e.cursorNode)==null?void 0:n.type)==="JSXText"&&c.children.includes(e.cursorNode)?O=[AD,O,AD]:((s=e.nodeBeforeCursor)==null?void 0:s.type)==="JSXText"&&c.children.includes(e.nodeBeforeCursor)?O=[AD,O]:((a=e.nodeAfterCursor)==null?void 0:a.type)==="JSXText"&&c.children.includes(e.nodeAfterCursor)&&(O=[O,AD]),C)return O;let V=z([h,oe([ie,O]),ie,p]);return y?V:Oc([z([h,...I,p]),V])}function t$(i,e,t,o,r){let n="",s=[n];function a(h){n=h,s.push([s.pop(),h])}function c(h){h!==""&&(n=h,s.push(h,""))}return i.each(({node:h,next:p})=>{if(h.type==="JSXText"){let g=Ar(h);if(Pg(h)){let f=PD.split(g,!0);f[0]===""&&(f.shift(),/\n/u.test(f[0])?c(oB(r,f[1],h,p)):c(o),f.shift());let _;if(Nt(!1,f,-1)===""&&(f.pop(),_=f.pop()),f.length===0)return;for(let[y,C]of f.entries())y%2===1?c(Ce):a(C);_!==void 0?/\n/u.test(_)?c(oB(r,n,h,p)):c(o):c(iB(r,n,h,p))}else/\n/u.test(g)?g.match(/\n/gu).length>1&&c(ie):c(o)}else{let g=t();if(a(g),p&&Pg(p)){let f=PD.trim(Ar(p)),[_]=PD.split(f);c(iB(r,_,h,p))}else c(ie)}},"children"),s}function iB(i,e,t,o){return i?"":t.type==="JSXElement"&&!t.closingElement||o?.type==="JSXElement"&&!o.closingElement?e.length===1?ee:ie:ee}function oB(i,e,t,o){return i?ie:e.length===1?t.type==="JSXElement"&&!t.closingElement||o?.type==="JSXElement"&&!o.closingElement?ie:ee:ie}var i$=new Set(["ArrayExpression","TupleExpression","JSXAttribute","JSXElement","JSXExpressionContainer","JSXFragment","ExpressionStatement","CallExpression","OptionalCallExpression","ConditionalExpression","JsExpressionRoot"]);function o$(i,e,t){let{parent:o}=i;if(i$.has(o.type))return e;let r=i.match(void 0,s=>s.type==="ArrowFunctionExpression",wt,s=>s.type==="JSXExpressionContainer"),n=Kc(i,t);return z([n?"":ot("("),oe([ee,e]),ee,n?"":ot(")")],{shouldBreak:r})}function r$(i,e,t){let{node:o}=i,r=[];if(r.push(t("name")),o.value){let n;if(Uo(o.value)){let s=Ar(o.value),a=ao(!1,ao(!1,s.slice(1,-1),"&apos;","'"),"&quot;",'"'),c=bB(a,e.jsxSingleQuote);a=c==='"'?ao(!1,a,'"',"&quot;"):ao(!1,a,"'","&apos;"),n=i.call(()=>sn(i,Rc(c+a+c),e),"value")}else n=t("value");r.push("=",n)}return r}function n$(i,e,t){let{node:o}=i,r=(n,s)=>n.type==="JSXEmptyExpression"||!_e(n)&&(co(n)||an(n)||n.type==="ArrowFunctionExpression"||n.type==="AwaitExpression"&&(r(n.argument,n)||n.argument.type==="JSXElement")||wt(n)||n.type==="ChainExpression"&&wt(n.expression)||n.type==="FunctionExpression"||n.type==="TemplateLiteral"||n.type==="TaggedTemplateExpression"||n.type==="DoExpression"||Gi(s)&&(n.type==="ConditionalExpression"||ea(n)));return r(o.expression,i.parent)?z(["{",t("expression"),ia,"}"]):z(["{",oe([ee,t("expression")]),ee,ia,"}"])}function s$(i,e,t){var o,r;let{node:n}=i,s=_e(n.name)||_e(n.typeParameters)||_e(n.typeArguments);if(n.selfClosing&&n.attributes.length===0&&!s)return["<",t("name"),n.typeArguments?t("typeArguments"):t("typeParameters")," />"];if(((o=n.attributes)==null?void 0:o.length)===1&&Uo(n.attributes[0].value)&&!n.attributes[0].value.value.includes(`
`)&&!s&&!_e(n.attributes[0]))return z(["<",t("name"),n.typeArguments?t("typeArguments"):t("typeParameters")," ",...i.map(t,"attributes"),n.selfClosing?" />":">"]);let a=(r=n.attributes)==null?void 0:r.some(h=>Uo(h.value)&&h.value.value.includes(`
`)),c=e.singleAttributePerLine&&n.attributes.length>1?ie:Ce;return z(["<",t("name"),n.typeArguments?t("typeArguments"):t("typeParameters"),oe(i.map(()=>[c,t()],"attributes")),...a$(n,e,s)],{shouldBreak:a})}function a$(i,e,t){return i.selfClosing?[Ce,"/>"]:l$(i,e,t)?[">"]:[ee,">"]}function l$(i,e,t){let o=i.attributes.length>0&&_e(Nt(!1,i.attributes,-1),Se.Trailing);return i.attributes.length===0&&!t||(e.bracketSameLine||e.jsxBracketSameLine)&&(!t||i.attributes.length>0)&&!o}function c$(i,e,t){let{node:o}=i,r=[];r.push("</");let n=t("name");return _e(o.name,Se.Leading|Se.Line)?r.push(oe([ie,n]),ie):_e(o.name,Se.Leading|Se.Block)?r.push(" ",n):r.push(n),r.push(">"),r}function d$(i,e){let{node:t}=i,o=_e(t),r=_e(t,Se.Line),n=t.type==="JSXOpeningFragment";return[n?"<":"</",oe([r?ie:o&&!n?" ":"",oi(i,e)]),r?ie:"",">"]}function u$(i,e,t){let o=sn(i,e$(i,e,t),e);return o$(i,o,e)}function h$(i,e){let{node:t}=i,o=_e(t,Se.Line);return[oi(i,e,{indent:o}),o?ie:""]}function p$(i,e,t){let{node:o}=i;return["{",i.call(({node:r})=>{let n=["...",t()];return!_e(r)||!e3(i)?n:[oe([ee,sn(i,n,e)]),ee]},o.type==="JSXSpreadAttribute"?"argument":"expression"),"}"]}function m$(i,e,t){let{node:o}=i;if(o.type.startsWith("JSX"))switch(o.type){case"JSXAttribute":return r$(i,e,t);case"JSXIdentifier":return o.name;case"JSXNamespacedName":return Dt(":",[t("namespace"),t("name")]);case"JSXMemberExpression":return Dt(".",[t("object"),t("property")]);case"JSXSpreadAttribute":case"JSXSpreadChild":return p$(i,e,t);case"JSXExpressionContainer":return n$(i,e,t);case"JSXFragment":case"JSXElement":return u$(i,e,t);case"JSXOpeningElement":return s$(i,e,t);case"JSXClosingElement":return c$(i,e,t);case"JSXOpeningFragment":case"JSXClosingFragment":return d$(i,e);case"JSXEmptyExpression":return h$(i,e);case"JSXText":throw new Error("JSXText should be handled by JSXElement");default:throw new yh(o,"JSX")}}function g$(i){if(i.children.length===0)return!0;if(i.children.length>1)return!1;let e=i.children[0];return e.type==="JSXText"&&!Pg(e)}function Pg(i){return i.type==="JSXText"&&(PD.hasNonWhitespaceCharacter(Ar(i))||!/\n/u.test(Ar(i)))}function f$(i){return i.type==="JSXExpressionContainer"&&Uo(i.expression)&&i.expression.value===" "&&!_e(i.expression)}function _$(i){let{node:e,parent:t}=i;if(!Gi(e)||!Gi(t))return!1;let{index:o,siblings:r}=i,n;for(let s=o;s>0;s--){let a=r[s-1];if(!(a.type==="JSXText"&&!Pg(a))){n=a;break}}return n?.type==="JSXExpressionContainer"&&n.expression.type==="JSXEmptyExpression"&&VD(n.expression)}function y$(i){return VD(i.node)||_$(i)}var h3=y$,v$=0;function p3(i,e,t){var o;let{node:r,parent:n,grandparent:s,key:a}=i,c=a!=="body"&&(n.type==="IfStatement"||n.type==="WhileStatement"||n.type==="SwitchStatement"||n.type==="DoWhileStatement"),h=r.operator==="|>"&&((o=i.root.extra)==null?void 0:o.__isUsingHackPipeline),p=XT(i,t,e,!1,c);if(c)return p;if(h)return z(p);if(wt(n)&&n.callee===r||n.type==="UnaryExpression"||yi(n)&&!n.computed)return z([oe([ee,...p]),ee]);let g=n.type==="ReturnStatement"||n.type==="ThrowStatement"||n.type==="JSXExpressionContainer"&&s.type==="JSXAttribute"||r.operator!=="|"&&n.type==="JsExpressionRoot"||r.type!=="NGPipeExpression"&&(n.type==="NGRoot"&&e.parser==="__ng_binding"||n.type==="NGMicrosyntaxExpression"&&s.type==="NGMicrosyntax"&&s.body.length===1)||r===n.body&&n.type==="ArrowFunctionExpression"||r!==n.body&&n.type==="ForStatement"||n.type==="ConditionalExpression"&&s.type!=="ReturnStatement"&&s.type!=="ThrowStatement"&&!wt(s)||n.type==="TemplateLiteral",f=n.type==="AssignmentExpression"||n.type==="VariableDeclarator"||n.type==="ClassProperty"||n.type==="PropertyDefinition"||n.type==="TSAbstractPropertyDefinition"||n.type==="ClassPrivateProperty"||na(n),_=ea(r.left)&&cI(r.operator,r.left.operator);if(g||kg(r)&&!_||!kg(r)&&f)return z(p);if(p.length===0)return"";let y=Gi(r.right),C=p.findIndex(N=>typeof N!="string"&&!Array.isArray(N)&&N.type===Tr),x=p.slice(0,C===-1?1:C+1),D=p.slice(x.length,y?-1:void 0),E=Symbol("logicalChain-"+ ++v$),I=z([...x,oe(D)],{id:E});if(!y)return I;let k=Nt(!1,p,-1);return z([I,UD(k,{groupId:E})])}function XT(i,e,t,o,r){var n;let{node:s}=i;if(!ea(s))return[z(e())];let a=[];cI(s.operator,s.left.operator)?a=i.call(x=>XT(x,e,t,!0,r),"left"):a.push(z(e("left")));let c=kg(s),h=(s.operator==="|>"||s.type==="NGPipeExpression"||b$(i,t))&&!yl(t.originalText,s.right),p=!_e(s.right,Se.Leading,UB)&&yl(t.originalText,s.right),g=s.type==="NGPipeExpression"?"|":s.operator,f=s.type==="NGPipeExpression"&&s.arguments.length>0?z(oe([ee,": ",Dt([Ce,": "],i.map(()=>ts(2,z(e())),"arguments"))])):"",_;if(c)_=[g," ",e("right"),f];else{let x=g==="|>"&&((n=i.root.extra)!=null&&n.__isUsingHackPipeline)?i.call(D=>XT(D,e,t,!0,r),"right"):e("right");if(t.experimentalOperatorPosition==="start"){let D="";if(p)switch(Sl(x)){case ta:D=x.splice(0,1)[0];break;case sa:D=x.contents.splice(0,1)[0];break}_=[Ce,D,g," ",x,f]}else _=[h?Ce:"",g,h?" ":Ce,x,f]}let{parent:y}=i,C=_e(s.left,Se.Trailing|Se.Line);if((C||!(r&&s.type==="LogicalExpression")&&y.type!==s.type&&s.left.type!==s.type&&s.right.type!==s.type)&&(_=z(_,{shouldBreak:C})),t.experimentalOperatorPosition==="start"?a.push(c||p?" ":"",_):a.push(h?"":" ",_),o&&_e(s)){let x=hI(sn(i,a,t));return x.type===Cl?x.parts:Array.isArray(x)?x:[x]}return a}function kg(i){return i.type!=="LogicalExpression"?!1:!!(an(i.right)&&i.right.properties.length>0||co(i.right)&&i.right.elements.length>0||Gi(i.right))}var rB=i=>i.type==="BinaryExpression"&&i.operator==="|";function b$(i,e){return(e.parser==="__vue_expression"||e.parser==="__vue_ts_expression")&&rB(i.node)&&!i.hasAncestor(t=>!rB(t)&&t.type!=="JsExpressionRoot")}function D$(i,e,t){let{node:o}=i;if(o.type.startsWith("NG"))switch(o.type){case"NGRoot":return[t("node"),_e(o.node)?" //"+ah(o.node)[0].value.trimEnd():""];case"NGPipeExpression":return p3(i,e,t);case"NGChainedExpression":return z(Dt([";",Ce],i.map(()=>x$(i)?t():["(",t(),")"],"expressions")));case"NGEmptyExpression":return"";case"NGMicrosyntax":return i.map(()=>[i.isFirst?"":nB(i)?" ":[";",Ce],t()],"body");case"NGMicrosyntaxKey":return/^[$_a-z][\w$]*(?:-[$_a-z][\w$])*$/iu.test(o.name)?o.name:JSON.stringify(o.name);case"NGMicrosyntaxExpression":return[t("expression"),o.alias===null?"":[" as ",t("alias")]];case"NGMicrosyntaxKeyedExpression":{let{index:r,parent:n}=i,s=nB(i)||(r===1&&(o.key.name==="then"||o.key.name==="else"||o.key.name==="as")||(r===2||r===3)&&(o.key.name==="else"&&n.body[r-1].type==="NGMicrosyntaxKeyedExpression"&&n.body[r-1].key.name==="then"||o.key.name==="track"))&&n.body[0].type==="NGMicrosyntaxExpression";return[t("key"),s?" ":": ",t("expression")]}case"NGMicrosyntaxLet":return["let ",t("key"),o.value===null?"":[" = ",t("value")]];case"NGMicrosyntaxAs":return[t("key")," as ",t("alias")];default:throw new yh(o,"Angular")}}function nB({node:i,index:e}){return i.type==="NGMicrosyntaxKeyedExpression"&&i.key.name==="of"&&e===1}var C$=Ft(["CallExpression","OptionalCallExpression","AssignmentExpression"]);function x$({node:i}){return WT(i,C$)}function m3(i,e,t){let{node:o}=i;return z([Dt(Ce,i.map(t,"decorators")),g3(o,e)?ie:Ce])}function S$(i,e,t){return f3(i.node)?[Dt(ie,i.map(t,"declaration","decorators")),ie]:""}function w$(i,e,t){let{node:o,parent:r}=i,{decorators:n}=o;if(!Et(n)||f3(r)||h3(i))return"";let s=o.type==="ClassExpression"||o.type==="ClassDeclaration"||g3(o,e);return[i.key==="declaration"&&_U(r)?ie:s?is:"",Dt(Ce,i.map(t,"decorators")),Ce]}function g3(i,e){return i.decorators.some(t=>dr(e.originalText,Ct(t)))}function f3(i){var e;if(i.type!=="ExportDefaultDeclaration"&&i.type!=="ExportNamedDeclaration"&&i.type!=="DeclareExportDeclaration")return!1;let t=(e=i.declaration)==null?void 0:e.decorators;return Et(t)&&HD(i,t[0])}var OD=class extends Error{name="ArgExpansionBailout"};function E$(i,e,t){let{node:o}=i,r=kr(o);if(r.length===0)return["(",oi(i,e),")"];let n=r.length-1;if(I$(r)){let g=["("];return ND(i,(f,_)=>{g.push(t()),_!==n&&g.push(", ")}),g.push(")"),g}let s=!1,a=[];ND(i,({node:g},f)=>{let _=t();f===n||(ra(g,e)?(s=!0,_=[_,",",ie,ie]):_=[_,",",Ce]),a.push(_)});let c=!e.parser.startsWith("__ng_")&&o.type!=="ImportExpression"&&oa(e,"all")?",":"";function h(){return z(["(",oe([Ce,...a]),c,Ce,")"],{shouldBreak:!0})}if(s||i.parent.type!=="Decorator"&&AU(r))return h();if(T$(r)){let g=a.slice(1);if(g.some(Lo))return h();let f;try{f=t(GR(o,0),{expandFirstArg:!0})}catch(_){if(_ instanceof OD)return h();throw _}return Lo(f)?[is,Oc([["(",z(f,{shouldBreak:!0}),", ",...g,")"],h()])]:Oc([["(",f,", ",...g,")"],["(",z(f,{shouldBreak:!0}),", ",...g,")"],h()])}if(A$(r,a,e)){let g=a.slice(0,-1);if(g.some(Lo))return h();let f;try{f=t(GR(o,-1),{expandLastArg:!0})}catch(_){if(_ instanceof OD)return h();throw _}return Lo(f)?[is,Oc([["(",...g,z(f,{shouldBreak:!0}),")"],h()])]:Oc([["(",...g,f,")"],["(",...g,z(f,{shouldBreak:!0}),")"],h()])}let p=["(",oe([ee,...a]),ot(c),ee,")"];return LB(i)?p:z(p,{shouldBreak:a.some(Lo)||s})}function Eg(i,e=!1){return an(i)&&(i.properties.length>0||_e(i))||co(i)&&(i.elements.length>0||_e(i))||i.type==="TSTypeAssertion"&&Eg(i.expression)||Qn(i)&&Eg(i.expression)||i.type==="FunctionExpression"||i.type==="ArrowFunctionExpression"&&(!i.returnType||!i.returnType.typeAnnotation||i.returnType.typeAnnotation.type!=="TSTypeReference"||P$(i.body))&&(i.body.type==="BlockStatement"||i.body.type==="ArrowFunctionExpression"&&Eg(i.body,!0)||an(i.body)||co(i.body)||!e&&(wt(i.body)||i.body.type==="ConditionalExpression")||Gi(i.body))||i.type==="DoExpression"||i.type==="ModuleExpression"}function A$(i,e,t){var o,r;let n=Nt(!1,i,-1);if(i.length===1){let a=Nt(!1,e,-1);if((o=a.label)!=null&&o.embed&&((r=a.label)==null?void 0:r.hug)!==!1)return!0}let s=Nt(!1,i,-2);return!_e(n,Se.Leading)&&!_e(n,Se.Trailing)&&Eg(n)&&(!s||s.type!==n.type)&&(i.length!==2||s.type!=="ArrowFunctionExpression"||!co(n))&&!(i.length>1&&z3(n,t))}function T$(i){if(i.length!==2)return!1;let[e,t]=i;return e.type==="ModuleExpression"&&k$(t)?!0:!_e(e)&&(e.type==="FunctionExpression"||e.type==="ArrowFunctionExpression"&&e.body.type==="BlockStatement")&&t.type!=="FunctionExpression"&&t.type!=="ArrowFunctionExpression"&&t.type!=="ConditionalExpression"&&_3(t)&&!Eg(t)}function _3(i){if(i.type==="ParenthesizedExpression")return _3(i.expression);if(Qn(i)||i.type==="TypeCastExpression"){let{typeAnnotation:e}=i;if(e.type==="TypeAnnotation"&&(e=e.typeAnnotation),e.type==="TSArrayType"&&(e=e.elementType,e.type==="TSArrayType"&&(e=e.elementType)),e.type==="GenericTypeAnnotation"||e.type==="TSTypeReference"){let t=e.typeArguments??e.typeParameters;t?.params.length===1&&(e=t.params[0])}return aI(e)&&nn(i.expression,1)}return hh(i)&&kr(i).length>1?!1:ea(i)?nn(i.left,1)&&nn(i.right,1):AB(i)||nn(i)}function I$(i){return i.length===2?sB(i,0):i.length===3?i[0].type==="Identifier"&&sB(i,1):!1}function sB(i,e){let t=i[e],o=i[e+1];return t.type==="ArrowFunctionExpression"&&vo(t).length===0&&t.body.type==="BlockStatement"&&o.type==="ArrayExpression"&&!i.some(r=>_e(r))}function P$(i){return i.type==="BlockStatement"&&(i.body.some(e=>e.type!=="EmptyStatement")||_e(i,Se.Dangling))}function k$(i){return i.type==="ObjectExpression"&&i.properties.length===1&&na(i.properties[0])&&i.properties[0].key.type==="Identifier"&&i.properties[0].key.name==="type"&&Uo(i.properties[0].value)&&i.properties[0].value.value==="module"}var YT=E$,F$=i=>((i.type==="ChainExpression"||i.type==="TSNonNullExpression")&&(i=i.expression),wt(i)&&kr(i).length>0);function L$(i,e,t){var o;let r=t("object"),n=y3(i,e,t),{node:s}=i,a=i.findAncestor(p=>!(yi(p)||p.type==="TSNonNullExpression")),c=i.findAncestor(p=>!(p.type==="ChainExpression"||p.type==="TSNonNullExpression")),h=a&&(a.type==="NewExpression"||a.type==="BindExpression"||a.type==="AssignmentExpression"&&a.left.type!=="Identifier")||s.computed||s.object.type==="Identifier"&&s.property.type==="Identifier"&&!yi(c)||(c.type==="AssignmentExpression"||c.type==="VariableDeclarator")&&(F$(s.object)||((o=r.label)==null?void 0:o.memberChain));return Fg(r.label,[r,h?n:z(oe([ee,n]))])}function y3(i,e,t){let o=t("property"),{node:r}=i,n=No(i);return r.computed?!r.property||Zs(r.property)?[n,"[",o,"]"]:z([n,"[",oe([ee,o]),ee,"]"]):[n,".",o]}function v3(i,e,t){if(i.node.type==="ChainExpression")return i.call(()=>v3(i,e,t),"expression");let{parent:o}=i,r=!o||o.type==="ExpressionStatement",n=[];function s(De){let{originalText:Ht}=e,Ti=_h(Ht,Ct(De));return Ht.charAt(Ti)===")"?Ti!==!1&&oI(Ht,Ti+1):ra(De,e)}function a(){let{node:De}=i;if(De.type==="ChainExpression")return i.call(a,"expression");if(wt(De)&&(nh(De.callee)||wt(De.callee))){let Ht=s(De);n.unshift({node:De,hasTrailingEmptyLine:Ht,printed:[sn(i,[No(i),Bc(i,e,t),YT(i,e,t)],e),Ht?ie:""]}),i.call(a,"callee")}else nh(De)?(n.unshift({node:De,needsParens:Kc(i,e),printed:sn(i,yi(De)?y3(i,e,t):H3(i,e,t),e)}),i.call(a,"object")):De.type==="TSNonNullExpression"?(n.unshift({node:De,printed:sn(i,"!",e)}),i.call(a,"expression")):n.unshift({node:De,printed:t()})}let{node:c}=i;n.unshift({node:c,printed:[No(i),Bc(i,e,t),YT(i,e,t)]}),c.callee&&i.call(a,"callee");let h=[],p=[n[0]],g=1;for(;g<n.length&&(n[g].node.type==="TSNonNullExpression"||wt(n[g].node)||yi(n[g].node)&&n[g].node.computed&&Zs(n[g].node.property));++g)p.push(n[g]);if(!wt(n[0].node))for(;g+1<n.length&&nh(n[g].node)&&nh(n[g+1].node);++g)p.push(n[g]);h.push(p),p=[];let f=!1;for(;g<n.length;++g){if(f&&nh(n[g].node)){if(n[g].node.computed&&Zs(n[g].node.property)){p.push(n[g]);continue}h.push(p),p=[],f=!1}(wt(n[g].node)||n[g].node.type==="ImportExpression")&&(f=!0),p.push(n[g]),_e(n[g].node,Se.Trailing)&&(h.push(p),p=[],f=!1)}p.length>0&&h.push(p);function _(De){return/^[A-Z]|^[$_]+$/u.test(De)}function y(De){return De.length<=e.tabWidth}function C(De){var Ht;let Ti=(Ht=De[1][0])==null?void 0:Ht.node.computed;if(De[0].length===1){let Qe=De[0][0].node;return Qe.type==="ThisExpression"||Qe.type==="Identifier"&&(_(Qe.name)||r&&y(Qe.name)||Ti)}let bo=Nt(!1,De[0],-1).node;return yi(bo)&&bo.property.type==="Identifier"&&(_(bo.property.name)||Ti)}let x=h.length>=2&&!_e(h[1][0].node)&&C(h);function D(De){let Ht=De.map(Ti=>Ti.printed);return De.length>0&&Nt(!1,De,-1).needsParens?["(",...Ht,")"]:Ht}function E(De){return De.length===0?"":oe([ie,Dt(ie,De.map(D))])}let I=h.map(D),k=I,N=x?3:2,O=h.flat(),V=O.slice(1,-1).some(De=>_e(De.node,Se.Leading))||O.slice(0,-1).some(De=>_e(De.node,Se.Trailing))||h[N]&&_e(h[N][0].node,Se.Leading);if(h.length<=N&&!V&&!h.some(De=>Nt(!1,De,-1).hasTrailingEmptyLine))return LB(i)?k:z(k);let K=Nt(!1,h[x?1:0],-1).node,$=!wt(K)&&s(K),ae=[D(h[0]),x?h.slice(1,2).map(D):"",$?ie:"",E(h.slice(x?2:1))],q=n.map(({node:De})=>De).filter(wt);function ji(){let De=Nt(!1,Nt(!1,h,-1),-1).node,Ht=Nt(!1,I,-1);return wt(De)&&Lo(Ht)&&q.slice(0,-1).some(Ti=>Ti.arguments.some(Tg))}let Mt;return V||q.length>2&&q.some(De=>!De.arguments.every(Ht=>nn(Ht)))||I.slice(0,-1).some(Lo)||ji()?Mt=z(ae):Mt=[Lo(k)||$?is:"",Oc([k,ae])],Fg({memberChain:!0},Mt)}var N$=v3;function b3(i,e,t){var o;let{node:r}=i,n=r.type==="NewExpression",s=r.type==="ImportExpression",a=No(i),c=kr(r),h=c.length===1&&kB(c[0],e.originalText);if(h||M$(i)||zD(r,i.parent)){let g=[];if(ND(i,()=>{g.push(t())}),!(h&&(o=g[0].label)!=null&&o.embed))return[n?"new ":"",aB(i,t),a,Bc(i,e,t),"(",Dt(", ",g),")"]}if(!s&&!n&&nh(r.callee)&&!i.call(g=>Kc(g,e),"callee",...r.callee.type==="ChainExpression"?["expression"]:[]))return N$(i,e,t);let p=[n?"new ":"",aB(i,t),a,Bc(i,e,t),YT(i,e,t)];return s||wt(r.callee)?z(p):p}function aB(i,e){let{node:t}=i;return t.type==="ImportExpression"?`import${t.phase?`.${t.phase}`:""}`:e("callee")}function M$(i){let{node:e}=i;if(e.type!=="CallExpression"||e.optional||e.callee.type!=="Identifier")return!1;let t=kr(e);return e.callee.name==="require"?t.length===1&&Uo(t[0])||t.length>1:e.callee.name==="define"&&i.parent.type==="ExpressionStatement"?t.length===1||t.length===2&&t[0].type==="ArrayExpression"||t.length===3&&Uo(t[0])&&t[1].type==="ArrayExpression":!1}function Lg(i,e,t,o,r,n){let s=B$(i,e,t,o,n),a=n?t(n,{assignmentLayout:s}):"";switch(s){case"break-after-operator":return z([z(o),r,z(oe([Ce,a]))]);case"never-break-after-operator":return z([z(o),r," ",a]);case"fluid":{let c=Symbol("assignment");return z([z(o),r,z(oe(Ce),{id:c}),ia,UD(a,{groupId:c})])}case"break-lhs":return z([o,r," ",z(a)]);case"chain":return[z(o),r,Ce,a];case"chain-tail":return[z(o),r,oe([Ce,a])];case"chain-tail-arrow-chain":return[z(o),r,a];case"only-left":return o}}function O$(i,e,t){let{node:o}=i;return Lg(i,e,t,t("left"),[" ",o.operator],"right")}function R$(i,e,t){return Lg(i,e,t,t("id")," =","init")}function B$(i,e,t,o,r){let{node:n}=i,s=n[r];if(!s)return"only-left";let a=!kD(s);if(i.match(kD,D3,p=>!a||p.type!=="ExpressionStatement"&&p.type!=="VariableDeclaration"))return a?s.type==="ArrowFunctionExpression"&&s.body.type==="ArrowFunctionExpression"?"chain-tail-arrow-chain":"chain-tail":"chain";if(!a&&kD(s.right)||yl(e.originalText,s))return"break-after-operator";if(n.type==="ImportAttribute"||s.type==="CallExpression"&&s.callee.name==="require"||e.parser==="json5"||e.parser==="jsonc"||e.parser==="json")return"never-break-after-operator";let c=KU(o);if(H$(n)||U$(n)||C3(n)&&c)return"break-lhs";let h=K$(n,o,e);return i.call(()=>W$(i,e,t,h),r)?"break-after-operator":j$(n)?"break-lhs":!c&&(h||s.type==="TemplateLiteral"||s.type==="TaggedTemplateExpression"||s.type==="BooleanLiteral"||Zs(s)||s.type==="ClassExpression")?"never-break-after-operator":"fluid"}function W$(i,e,t,o){let r=i.node;if(ea(r)&&!kg(r))return!0;switch(r.type){case"StringLiteralTypeAnnotation":case"SequenceExpression":return!0;case"TSConditionalType":case"ConditionalTypeAnnotation":if(!e.experimentalTernaries&&!J$(r))break;return!0;case"ConditionalExpression":{if(!e.experimentalTernaries){let{test:h}=r;return ea(h)&&!kg(h)}let{consequent:a,alternate:c}=r;return a.type==="ConditionalExpression"||c.type==="ConditionalExpression"}case"ClassExpression":return Et(r.decorators)}if(o)return!1;let n=r,s=[];for(;;)if(n.type==="UnaryExpression"||n.type==="AwaitExpression"||n.type==="YieldExpression"&&n.argument!==null)n=n.argument,s.push("argument");else if(n.type==="TSNonNullExpression")n=n.expression,s.push("expression");else break;return!!(Uo(n)||i.call(()=>x3(i,e,t),...s))}function H$(i){if(D3(i)){let e=i.left||i.id;return e.type==="ObjectPattern"&&e.properties.length>2&&e.properties.some(t=>{var o;return na(t)&&(!t.shorthand||((o=t.value)==null?void 0:o.type)==="AssignmentPattern")})}return!1}function kD(i){return i.type==="AssignmentExpression"}function D3(i){return kD(i)||i.type==="VariableDeclarator"}function j$(i){let e=V$(i);if(Et(e)){let t=i.type==="TSTypeAliasDeclaration"?"constraint":"bound";if(e.length>1&&e.some(o=>o[t]||o.default))return!0}return!1}var z$=Ft(["TSTypeAliasDeclaration","TypeAlias"]);function V$(i){var e;if(z$(i))return(e=i.typeParameters)==null?void 0:e.params}function U$(i){if(i.type!=="VariableDeclarator")return!1;let{typeAnnotation:e}=i.id;if(!e||!e.typeAnnotation)return!1;let t=lB(e.typeAnnotation);return Et(t)&&t.length>1&&t.some(o=>Et(lB(o))||o.type==="TSConditionalType")}function C3(i){var e;return i.type==="VariableDeclarator"&&((e=i.init)==null?void 0:e.type)==="ArrowFunctionExpression"}var q$=Ft(["TSTypeReference","GenericTypeAnnotation"]);function lB(i){var e;if(q$(i))return(e=i.typeArguments??i.typeParameters)==null?void 0:e.params}function x3(i,e,t,o=!1){var r;let{node:n}=i,s=()=>x3(i,e,t,!0);if(n.type==="ChainExpression"||n.type==="TSNonNullExpression")return i.call(s,"expression");if(wt(n)){if((r=b3(i,e,t).label)!=null&&r.memberChain)return!1;let a=kr(n);return!(a.length===0||a.length===1&&lI(a[0],e))||$$(n,t)?!1:i.call(s,"callee")}return yi(n)?i.call(s,"object"):o&&(n.type==="Identifier"||n.type==="ThisExpression")}function K$(i,e,t){return na(i)?(e=hI(e),typeof e=="string"&&lh(e)<t.tabWidth+3):!1}function $$(i,e){let t=G$(i);if(Et(t)){if(t.length>1)return!0;if(t.length===1){let r=t[0];if(vl(r)||dI(r)||r.type==="TSTypeLiteral"||r.type==="ObjectTypeAnnotation")return!0}let o=i.typeParameters?"typeParameters":"typeArguments";if(Lo(e(o)))return!0}return!1}function G$(i){var e;return(e=i.typeParameters??i.typeArguments)==null?void 0:e.params}function J$(i){function e(t){switch(t.type){case"FunctionTypeAnnotation":case"GenericTypeAnnotation":case"TSFunctionType":return!!t.typeParameters;case"TSTypeReference":return!!(t.typeArguments??t.typeParameters);default:return!1}}return e(i.checkType)||e(i.extendsType)}function $c(i,e,t,o,r){let n=i.node,s=vo(n),a=r?Bc(i,t,e):"";if(s.length===0)return[a,"(",oi(i,t,{filter:_=>ln(t.originalText,Ct(_))===")"}),")"];let{parent:c}=i,h=zD(c),p=S3(n),g=[];if(LU(i,(_,y)=>{let C=y===s.length-1;C&&n.rest&&g.push("..."),g.push(e()),!C&&(g.push(","),h||p?g.push(" "):ra(s[y],t)?g.push(ie,ie):g.push(Ce))}),o&&!Y$(i)){if(Lo(a)||Lo(g))throw new OD;return z([jT(a),"(",jT(g),")"])}let f=s.every(_=>!Et(_.decorators));return p&&f?[a,"(",...g,")"]:h?[a,"(",...g,")"]:(TB(c)||DU(c)||c.type==="TypeAlias"||c.type==="UnionTypeAnnotation"||c.type==="IntersectionTypeAnnotation"||c.type==="FunctionTypeAnnotation"&&c.returnType===n)&&s.length===1&&s[0].name===null&&n.this!==s[0]&&s[0].typeAnnotation&&n.typeParameters===null&&aI(s[0].typeAnnotation)&&!n.rest?t.arrowParens==="always"||n.type==="HookTypeAnnotation"?["(",...g,")"]:g:[a,"(",oe([ee,...g]),ot(!FU(n)&&oa(t,"all")?",":""),ee,")"]}function S3(i){if(!i)return!1;let e=vo(i);if(e.length!==1)return!1;let[t]=e;return!_e(t)&&(t.type==="ObjectPattern"||t.type==="ArrayPattern"||t.type==="Identifier"&&t.typeAnnotation&&(t.typeAnnotation.type==="TypeAnnotation"||t.typeAnnotation.type==="TSTypeAnnotation")&&_l(t.typeAnnotation.typeAnnotation)||t.type==="FunctionTypeParam"&&_l(t.typeAnnotation)&&t!==i.rest||t.type==="AssignmentPattern"&&(t.left.type==="ObjectPattern"||t.left.type==="ArrayPattern")&&(t.right.type==="Identifier"||an(t.right)&&t.right.properties.length===0||co(t.right)&&t.right.elements.length===0))}function X$(i){let e;return i.returnType?(e=i.returnType,e.typeAnnotation&&(e=e.typeAnnotation)):i.typeAnnotation&&(e=i.typeAnnotation),e}function vh(i,e){var t;let o=X$(i);if(!o)return!1;let r=(t=i.typeParameters)==null?void 0:t.params;if(r){if(r.length>1)return!1;if(r.length===1){let n=r[0];if(n.constraint||n.default)return!1}}return vo(i).length===1&&(_l(o)||Lo(e))}function Y$(i){return i.match(e=>e.type==="ArrowFunctionExpression"&&e.body.type==="BlockStatement",(e,t)=>{if(e.type==="CallExpression"&&t==="arguments"&&e.arguments.length===1&&e.callee.type==="CallExpression"){let o=e.callee.callee;return o.type==="Identifier"||o.type==="MemberExpression"&&!o.computed&&o.object.type==="Identifier"&&o.property.type==="Identifier"}return!1},(e,t)=>e.type==="VariableDeclarator"&&t==="init"||e.type==="ExportDefaultDeclaration"&&t==="declaration"||e.type==="TSExportAssignment"&&t==="expression"||e.type==="AssignmentExpression"&&t==="right"&&e.left.type==="MemberExpression"&&e.left.object.type==="Identifier"&&e.left.object.name==="module"&&e.left.property.type==="Identifier"&&e.left.property.name==="exports",e=>e.type!=="VariableDeclaration"||e.kind==="const"&&e.declarations.length===1)}function Q$(i){let e=vo(i);return e.length>1&&e.some(t=>t.type==="TSParameterProperty")}var Z$=Ft(["VoidTypeAnnotation","TSVoidKeyword","NullLiteralTypeAnnotation","TSNullKeyword"]),eG=Ft(["ObjectTypeAnnotation","TSTypeLiteral","GenericTypeAnnotation","TSTypeReference"]);function tG(i){let{types:e}=i;if(e.some(o=>_e(o)))return!1;let t=e.find(o=>eG(o));return t?e.every(o=>o===t||Z$(o)):!1}function w3(i){return aI(i)||_l(i)?!0:vl(i)?tG(i):!1}function iG(i,e,t){let o=e.semi?";":"",{node:r}=i,n=[qo(i),"opaque type ",t("id"),t("typeParameters")];return r.supertype&&n.push(": ",t("supertype")),r.impltype&&n.push(" = ",t("impltype")),n.push(o),n}function E3(i,e,t){let o=e.semi?";":"",{node:r}=i,n=[qo(i)];n.push("type ",t("id"),t("typeParameters"));let s=r.type==="TSTypeAliasDeclaration"?"typeAnnotation":"right";return[Lg(i,e,t,n," =",s),o]}function A3(i,e,t){let o=!1;return z(i.map(({isFirst:r,previous:n,node:s,index:a})=>{let c=t();if(r)return c;let h=_l(s),p=_l(n);return p&&h?[" & ",o?oe(c):c]:!p&&!h?e.experimentalOperatorPosition==="start"?oe([Ce,"& ",c]):oe([" &",Ce,c]):(a>1&&(o=!0),[" & ",a>1?oe(c):c])},"types"))}function T3(i,e,t){let{node:o}=i,{parent:r}=i,n=r.type!=="TypeParameterInstantiation"&&(!bl(r)||!e.experimentalTernaries)&&r.type!=="TSTypeParameterInstantiation"&&r.type!=="GenericTypeAnnotation"&&r.type!=="TSTypeReference"&&r.type!=="TSTypeAssertion"&&r.type!=="TupleTypeAnnotation"&&r.type!=="TSTupleType"&&!(r.type==="FunctionTypeParam"&&!r.name&&i.grandparent.this!==r)&&!((r.type==="TypeAlias"||r.type==="VariableDeclarator"||r.type==="TSTypeAliasDeclaration")&&yl(e.originalText,o)),s=w3(o),a=i.map(p=>{let g=t();return s||(g=ts(2,g)),sn(p,g,e)},"types");if(s)return Dt(" | ",a);let c=n&&!yl(e.originalText,o),h=[ot([c?Ce:"","| "]),Dt([Ce,"| "],a)];return Kc(i,e)?z([oe(h),ee]):(r.type==="TupleTypeAnnotation"||r.type==="TSTupleType")&&r[r.type==="TupleTypeAnnotation"&&r.types?"types":"elementTypes"].length>1?z([oe([ot(["(",ee]),h]),ee,ot(")")]):z(n?oe(h):h)}function oG(i){var e;let{node:t,parent:o}=i;return t.type==="FunctionTypeAnnotation"&&(TB(o)||!((o.type==="ObjectTypeProperty"||o.type==="ObjectTypeInternalSlot")&&!o.variance&&!o.optional&&HD(o,t)||o.type==="ObjectTypeCallProperty"||((e=i.getParentNode(2))==null?void 0:e.type)==="DeclareFunction"))}function I3(i,e,t){let{node:o}=i,r=[qD(i)];(o.type==="TSConstructorType"||o.type==="TSConstructSignatureDeclaration")&&r.push("new ");let n=$c(i,t,e,!1,!0),s=[];return o.type==="FunctionTypeAnnotation"?s.push(oG(i)?" => ":": ",t("returnType")):s.push(lo(i,t,o.returnType?"returnType":"typeAnnotation")),vh(o,s)&&(n=z(n)),r.push(n,s),z(r)}function P3(i,e,t){return[t("objectType"),No(i),"[",t("indexType"),"]"]}function k3(i,e,t){return["infer ",t("typeParameter")]}function cB(i,e,t){let{node:o}=i;return[o.postfix?"":t,lo(i,e),o.postfix?t:""]}function F3(i,e,t){let{node:o}=i;return["...",...o.type==="TupleTypeSpreadElement"&&o.label?[t("label"),": "]:[],t("typeAnnotation")]}function L3(i,e,t){let{node:o}=i;return[o.variance?t("variance"):"",t("label"),o.optional?"?":"",": ",t("elementType")]}var rG=new WeakSet;function lo(i,e,t="typeAnnotation"){let{node:{[t]:o}}=i;if(!o)return"";let r=!1;if(o.type==="TSTypeAnnotation"||o.type==="TypeAnnotation"){let n=i.call(N3,t);(n==="=>"||n===":"&&_e(o,Se.Leading))&&(r=!0),rG.add(o)}return r?[" ",e(t)]:e(t)}var N3=i=>i.match(e=>e.type==="TSTypeAnnotation",(e,t)=>(t==="returnType"||t==="typeAnnotation")&&(e.type==="TSFunctionType"||e.type==="TSConstructorType"))?"=>":i.match(e=>e.type==="TSTypeAnnotation",(e,t)=>t==="typeAnnotation"&&(e.type==="TSJSDocNullableType"||e.type==="TSJSDocNonNullableType"||e.type==="TSTypePredicate"))||i.match(e=>e.type==="TypeAnnotation",(e,t)=>t==="typeAnnotation"&&e.type==="Identifier",(e,t)=>t==="id"&&e.type==="DeclareFunction")||i.match(e=>e.type==="TypeAnnotation",(e,t)=>t==="typeAnnotation"&&e.type==="Identifier",(e,t)=>t==="id"&&e.type==="DeclareHook")||i.match(e=>e.type==="TypeAnnotation",(e,t)=>t==="bound"&&e.type==="TypeParameter"&&e.usesExtendsBound)?"":":";function M3(i,e,t){let o=N3(i);return o?[o," ",t("typeAnnotation")]:t("typeAnnotation")}function O3(i){return[i("elementType"),"[]"]}function R3({node:i},e){let t=i.type==="TSTypeQuery"?"exprName":"argument",o=i.type==="TypeofTypeAnnotation"||i.typeArguments?"typeArguments":"typeParameters";return["typeof ",e(t),e(o)]}function B3(i,e){let{node:t}=i;return[t.type==="TSTypePredicate"&&t.asserts?"asserts ":t.type==="TypePredicate"&&t.kind?`${t.kind} `:"",e("parameterName"),t.typeAnnotation?[" is ",lo(i,e)]:""]}function No(i){let{node:e}=i;return!e.optional||e.type==="Identifier"&&e===i.parent.key?"":wt(e)||yi(e)&&e.computed||e.type==="OptionalIndexedAccessType"?"?.":"?"}function W3(i){return i.node.definite||i.match(void 0,(e,t)=>t==="id"&&e.type==="VariableDeclarator"&&e.definite)?"!":""}var nG=new Set(["DeclareClass","DeclareComponent","DeclareFunction","DeclareHook","DeclareVariable","DeclareExportDeclaration","DeclareExportAllDeclaration","DeclareOpaqueType","DeclareTypeAlias","DeclareEnum","DeclareInterface"]);function qo(i){let{node:e}=i;return e.declare||nG.has(e.type)&&i.parent.type!=="DeclareExportDeclaration"?"declare ":""}var sG=new Set(["TSAbstractMethodDefinition","TSAbstractPropertyDefinition","TSAbstractAccessorProperty"]);function qD({node:i}){return i.abstract||sG.has(i.type)?"abstract ":""}function Bc(i,e,t){let o=i.node;return o.typeArguments?t("typeArguments"):o.typeParameters?t("typeParameters"):""}function H3(i,e,t){return["::",t("callee")]}function gl(i,e,t){return i.type==="EmptyStatement"?";":i.type==="BlockStatement"||t?[" ",e]:oe([Ce,e])}function j3(i,e){return["...",e("argument"),lo(i,e)]}function RD(i){return i.accessibility?i.accessibility+" ":""}function aG(i,e,t,o){let{node:r}=i,n=r.inexact?"...":"";return _e(r,Se.Dangling)?z([t,n,oi(i,e,{indent:!0}),ee,o]):[t,n,o]}function DI(i,e,t){let{node:o}=i,r=[],n=o.type==="TupleExpression"?"#[":"[",s="]",a=o.type==="TupleTypeAnnotation"&&o.types?"types":o.type==="TSTupleType"||o.type==="TupleTypeAnnotation"?"elementTypes":"elements",c=o[a];if(c.length===0)r.push(aG(i,e,n,s));else{let h=Nt(!1,c,-1),p=h?.type!=="RestElement"&&!o.inexact,g=h===null,f=Symbol("array"),_=!e.__inJestEach&&c.length>1&&c.every((x,D,E)=>{let I=x?.type;if(!co(x)&&!an(x))return!1;let k=E[D+1];if(k&&I!==k.type)return!1;let N=co(x)?"elements":"properties";return x[N]&&x[N].length>1}),y=z3(o,e),C=p?g?",":oa(e)?y?ot(",","",{groupId:f}):ot(","):"":"";r.push(z([n,oe([ee,y?cG(i,e,t,C):[lG(i,e,a,o.inexact,t),C],oi(i,e)]),ee,s],{shouldBreak:_,id:f}))}return r.push(No(i),lo(i,t)),r}function z3(i,e){return co(i)&&i.elements.length>1&&i.elements.every(t=>t&&(Zs(t)||EB(t)&&!_e(t.argument))&&!_e(t,Se.Trailing|Se.Line,o=>!dr(e.originalText,di(o),{backwards:!0})))}function V3({node:i},{originalText:e}){let t=r=>tI(e,iI(e,r)),o=r=>e[r]===","?r:o(t(r+1));return oI(e,o(Ct(i)))}function lG(i,e,t,o,r){let n=[];return i.each(({node:s,isLast:a})=>{n.push(s?z(r()):""),(!a||o)&&n.push([",",Ce,s&&V3(i,e)?ee:""])},t),o&&n.push("..."),n}function cG(i,e,t,o){let r=[];return i.each(({isLast:n,next:s})=>{r.push([t(),n?o:","]),n||r.push(V3(i,e)?[ie,ie]:_e(s,Se.Leading|Se.Line)?ie:Ce)},"elements"),HB(r)}var dG=/^[\$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC][\$0-9A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]*$/,uG=i=>dG.test(i),hG=uG;function pG(i){return i.length===1?i:i.toLowerCase().replace(/^([+-]?[\d.]+e)(?:\+|(-))?0*(?=\d)/u,"$1$2").replace(/^([+-]?[\d.]+)e[+-]?0+$/u,"$1").replace(/^([+-])?\./u,"$10.").replace(/(\.\d+?)0+(?=e|$)/u,"$1").replace(/\.(?=e|$)/u,"")}var ph=pG,FD=new WeakMap;function U3(i){return/^(?:\d+|\d+\.\d+)$/u.test(i)}function dB(i,e){return e.parser==="json"||e.parser==="jsonc"||!Uo(i.key)||uh(Ar(i.key),e).slice(1,-1)!==i.key.value?!1:!!(hG(i.key.value)&&!(e.parser==="babel-ts"&&i.type==="ClassProperty"||e.parser==="typescript"&&i.type==="PropertyDefinition")||U3(i.key.value)&&String(Number(i.key.value))===i.key.value&&i.type!=="ImportAttribute"&&(e.parser==="babel"||e.parser==="acorn"||e.parser==="espree"||e.parser==="meriyah"||e.parser==="__babel_estree"))}function mG(i,e){let{key:t}=i.node;return(t.type==="Identifier"||Zs(t)&&U3(ph(Ar(t)))&&String(t.value)===ph(Ar(t))&&!(e.parser==="typescript"||e.parser==="babel-ts"))&&(e.parser==="json"||e.parser==="jsonc"||e.quoteProps==="consistent"&&FD.get(i.parent))}function Ng(i,e,t){let{node:o}=i;if(o.computed)return["[",t("key"),"]"];let{parent:r}=i,{key:n}=o;if(e.quoteProps==="consistent"&&!FD.has(r)){let s=i.siblings.some(a=>!a.computed&&Uo(a.key)&&!dB(a,e));FD.set(r,s)}if(mG(i,e)){let s=uh(JSON.stringify(n.type==="Identifier"?n.name:n.value.toString()),e);return i.call(a=>sn(a,s,e),"key")}return dB(o,e)&&(e.quoteProps==="as-needed"||e.quoteProps==="consistent"&&!FD.get(r))?i.call(s=>sn(s,/^\d/u.test(n.value)?ph(n.value):n.value,e),"key"):t("key")}function NT(i,e,t){let{node:o}=i;return o.shorthand?t("value"):Lg(i,e,t,Ng(i,e,t),":","value")}var gG=({node:i,key:e,parent:t})=>e==="value"&&i.type==="FunctionExpression"&&(t.type==="ObjectMethod"||t.type==="ClassMethod"||t.type==="ClassPrivateMethod"||t.type==="MethodDefinition"||t.type==="TSAbstractMethodDefinition"||t.type==="TSDeclareMethod"||t.type==="Property"&&jD(t));function q3(i,e,t,o){if(gG(i))return CI(i,t,e);let{node:r}=i,n=!1;if((r.type==="FunctionDeclaration"||r.type==="FunctionExpression")&&o!=null&&o.expandLastArg){let{parent:p}=i;wt(p)&&(kr(p).length>1||vo(r).every(g=>g.type==="Identifier"&&!g.typeAnnotation))&&(n=!0)}let s=[qo(i),r.async?"async ":"",`function${r.generator?"*":""} `,r.id?e("id"):""],a=$c(i,e,t,n),c=KD(i,e),h=vh(r,c);return s.push(Bc(i,t,e),z([h?z(a):a,c]),r.body?" ":"",e("body")),t.semi&&(r.declare||!r.body)&&s.push(";"),s}function QT(i,e,t){let{node:o}=i,{kind:r}=o,n=o.value||o,s=[];return!r||r==="init"||r==="method"||r==="constructor"?n.async&&s.push("async "):(rI.ok(r==="get"||r==="set"),s.push(r," ")),n.generator&&s.push("*"),s.push(Ng(i,e,t),o.optional||o.key.optional?"?":"",o===n?CI(i,e,t):t("value")),s}function CI(i,e,t){let{node:o}=i,r=$c(i,t,e),n=KD(i,t),s=Q$(o),a=vh(o,n),c=[Bc(i,e,t),z([s?z(r,{shouldBreak:!0}):a?z(r):r,n])];return o.body?c.push(" ",t("body")):c.push(e.semi?";":""),c}function fG(i){let e=vo(i);return e.length===1&&!i.typeParameters&&!_e(i,Se.Dangling)&&e[0].type==="Identifier"&&!e[0].typeAnnotation&&!_e(e[0])&&!e[0].optional&&!i.predicate&&!i.returnType}function K3(i,e){if(e.arrowParens==="always")return!1;if(e.arrowParens==="avoid"){let{node:t}=i;return fG(t)}return!1}function KD(i,e){let{node:t}=i,o=[lo(i,e,"returnType")];return t.predicate&&o.push(e("predicate")),o}function $3(i,e,t){let{node:o}=i,r=e.semi?";":"",n=[];if(o.argument){let c=t("argument");vG(e,o.argument)?c=["(",oe([ie,c]),ie,")"]:(ea(o.argument)||o.argument.type==="SequenceExpression"||e.experimentalTernaries&&o.argument.type==="ConditionalExpression"&&(o.argument.consequent.type==="ConditionalExpression"||o.argument.alternate.type==="ConditionalExpression"))&&(c=z([ot("("),oe([ee,c]),ee,ot(")")])),n.push(" ",c)}let s=_e(o,Se.Dangling),a=r&&s&&_e(o,Se.Last|Se.Line);return a&&n.push(r),s&&n.push(" ",oi(i,e)),a||n.push(r),n}function _G(i,e,t){return["return",$3(i,e,t)]}function yG(i,e,t){return["throw",$3(i,e,t)]}function vG(i,e){if(yl(i.originalText,e)||_e(e,Se.Leading,t=>Dl(i.originalText,di(t),Ct(t)))&&!Gi(e))return!0;if(nI(e)){let t=e,o;for(;o=fU(t);)if(t=o,yl(i.originalText,t))return!0}return!1}var MT=new WeakMap;function G3(i){return MT.has(i)||MT.set(i,i.type==="ConditionalExpression"&&!Fo(i,e=>e.type==="ObjectExpression")),MT.get(i)}var J3=i=>i.type==="SequenceExpression";function bG(i,e,t,o={}){let r=[],n,s=[],a=!1,c=!o.expandLastArg&&i.node.body.type==="ArrowFunctionExpression",h;(function D(){let{node:E}=i,I=DG(i,e,t,o);if(r.length===0)r.push(I);else{let{leading:k,trailing:N}=u3(i,e);r.push([k,I]),s.unshift(N)}c&&(a||(a=E.returnType&&vo(E).length>0||E.typeParameters||vo(E).some(k=>k.type!=="Identifier"))),!c||E.body.type!=="ArrowFunctionExpression"?(n=t("body",o),h=E.body):i.call(D,"body")})();let p=!yl(e.originalText,h)&&(J3(h)||CG(h,n,e)||!a&&G3(h)),g=i.key==="callee"&&hh(i.parent),f=Symbol("arrow-chain"),_=xG(i,o,{signatureDocs:r,shouldBreak:a}),y=!1,C=!1,x=!1;return c&&(g||o.assignmentLayout)&&(C=!0,x=!_e(i.node,Se.Leading&Se.Line),y=o.assignmentLayout==="chain-tail-arrow-chain"||g&&!p),n=SG(i,e,o,{bodyDoc:n,bodyComments:s,functionBody:h,shouldPutBodyOnSameLine:p}),z([z(C?oe([x?ee:"",_]):_,{shouldBreak:y,id:f})," =>",c?UD(n,{groupId:f}):z(n),c&&g?ot(ee,"",{groupId:f}):""])}function DG(i,e,t,o){let{node:r}=i,n=[];if(r.async&&n.push("async "),K3(i,e))n.push(t(["params",0]));else{let a=o.expandLastArg||o.expandFirstArg,c=KD(i,t);if(a){if(Lo(c))throw new OD;c=z(jT(c))}n.push(z([$c(i,t,e,a,!0),c]))}let s=oi(i,e,{filter(a){let c=_h(e.originalText,Ct(a));return c!==!1&&e.originalText.slice(c,c+2)==="=>"}});return s&&n.push(" ",s),n}function CG(i,e,t){var o,r;return co(i)||an(i)||i.type==="ArrowFunctionExpression"||i.type==="DoExpression"||i.type==="BlockStatement"||Gi(i)||((o=e.label)==null?void 0:o.hug)!==!1&&(((r=e.label)==null?void 0:r.embed)||kB(i,t.originalText))}function xG(i,e,{signatureDocs:t,shouldBreak:o}){if(t.length===1)return t[0];let{parent:r,key:n}=i;return n!=="callee"&&hh(r)||ea(r)?z([t[0]," =>",oe([Ce,Dt([" =>",Ce],t.slice(1))])],{shouldBreak:o}):n==="callee"&&hh(r)||e.assignmentLayout?z(Dt([" =>",Ce],t),{shouldBreak:o}):z(oe(Dt([" =>",Ce],t)),{shouldBreak:o})}function SG(i,e,t,{bodyDoc:o,bodyComments:r,functionBody:n,shouldPutBodyOnSameLine:s}){let{node:a,parent:c}=i,h=t.expandLastArg&&oa(e,"all")?ot(","):"",p=(t.expandLastArg||c.type==="JSXExpressionContainer")&&!_e(a)?ee:"";return s&&G3(n)?[" ",z([ot("","("),oe([ee,o]),ot("",")"),h,p]),r]:(J3(n)&&(o=z(["(",oe([ee,o]),ee,")"])),s?[" ",o,r]:[oe([Ce,o,r]),h,p])}var wG=(i,e,t)=>{if(!(i&&e==null)){if(e.findLast)return e.findLast(t);for(let o=e.length-1;o>=0;o--){let r=e[o];if(t(r,o,e))return r}}},EG=wG;function ZT(i,e,t,o){let{node:r}=i,n=[],s=EG(!1,r[o],a=>a.type!=="EmptyStatement");return i.each(({node:a})=>{a.type!=="EmptyStatement"&&(n.push(t()),a!==s&&(n.push(ie),ra(a,e)&&n.push(ie)))},o),n}function X3(i,e,t){let o=AG(i,e,t),{node:r,parent:n}=i;if(r.type==="Program"&&n?.type!=="ModuleExpression")return o?[o,ie]:"";let s=[];if(r.type==="StaticBlock"&&s.push("static "),s.push("{"),o)s.push(oe([ie,o]),ie);else{let a=i.grandparent;n.type==="ArrowFunctionExpression"||n.type==="FunctionExpression"||n.type==="FunctionDeclaration"||n.type==="ComponentDeclaration"||n.type==="HookDeclaration"||n.type==="ObjectMethod"||n.type==="ClassMethod"||n.type==="ClassPrivateMethod"||n.type==="ForStatement"||n.type==="WhileStatement"||n.type==="DoWhileStatement"||n.type==="DoExpression"||n.type==="ModuleExpression"||n.type==="CatchClause"&&!a.finalizer||n.type==="TSModuleDeclaration"||r.type==="StaticBlock"||s.push(ie)}return s.push("}"),s}function AG(i,e,t){let{node:o}=i,r=Et(o.directives),n=o.body.some(c=>c.type!=="EmptyStatement"),s=_e(o,Se.Dangling);if(!r&&!n&&!s)return"";let a=[];return r&&(a.push(ZT(i,e,t,"directives")),(n||s)&&(a.push(ie),ra(Nt(!1,o.directives,-1),e)&&a.push(ie))),n&&a.push(ZT(i,e,t,"body")),s&&a.push(oi(i,e)),a}function TG(i){let e=new WeakMap;return function(t){return e.has(t)||e.set(t,Symbol(i)),e.get(t)}}var Y3=TG;function IG(i){switch(i){case null:return"";case"PlusOptional":return"+?";case"MinusOptional":return"-?";case"Optional":return"?"}}function PG(i,e,t){let{node:o}=i;return z([o.variance?t("variance"):"","[",oe([t("keyTparam")," in ",t("sourceType")]),"]",IG(o.optional),": ",t("propType")])}function Q3(i,e){return i==="+"||i==="-"?i+e:e}function kG(i,e,t){let{node:o}=i,r=e.objectWrap==="preserve"&&Dl(e.originalText,di(o),di(o.typeParameter));return z(["{",oe([e.bracketSpacing?Ce:ee,z([t("typeParameter"),o.optional?Q3(o.optional,"?"):"",o.typeAnnotation?": ":"",t("typeAnnotation")]),e.semi?ot(";"):""]),oi(i,e),e.bracketSpacing?Ce:ee,"}"],{shouldBreak:r})}var xI=Y3("typeParameters");function FG(i,e,t){let{node:o}=i;return vo(o).length===1&&o.type.startsWith("TS")&&!o[t][0].constraint&&i.parent.type==="ArrowFunctionExpression"&&!(e.filepath&&/\.ts$/u.test(e.filepath))}function Ag(i,e,t,o){let{node:r}=i;if(!r[o])return"";if(!Array.isArray(r[o]))return t(o);let n=zD(i.grandparent),s=i.match(c=>!(c[o].length===1&&_l(c[o][0])),void 0,(c,h)=>h==="typeAnnotation",c=>c.type==="Identifier",C3);if(r[o].length===0||!s&&(n||r[o].length===1&&(r[o][0].type==="NullableTypeAnnotation"||w3(r[o][0]))))return["<",Dt(", ",i.map(t,o)),LG(i,e),">"];let a=r.type==="TSTypeParameterInstantiation"?"":FG(i,e,o)?",":oa(e)?ot(","):"";return z(["<",oe([ee,Dt([",",Ce],i.map(t,o))]),a,ee,">"],{id:xI(r)})}function LG(i,e){let{node:t}=i;if(!_e(t,Se.Dangling))return"";let o=!_e(t,Se.Line),r=oi(i,e,{indent:!o});return o?r:[r,ie]}function Z3(i,e,t){let{node:o,parent:r}=i,n=[o.const?"const ":""],s=o.type==="TSTypeParameter"?t("name"):o.name;if(r.type==="TSMappedType")return r.readonly&&n.push(Q3(r.readonly,"readonly")," "),n.push("[",s),o.constraint&&n.push(" in ",t("constraint")),r.nameType&&n.push(" as ",i.callParent(()=>t("nameType"))),n.push("]"),n;if(o.variance&&n.push(t("variance")),o.in&&n.push("in "),o.out&&n.push("out "),n.push(s),o.bound&&(o.usesExtendsBound&&n.push(" extends "),n.push(lo(i,t,"bound"))),o.constraint){let a=Symbol("constraint");n.push(" extends",z(oe(Ce),{id:a}),ia,UD(t("constraint"),{groupId:a}))}return o.default&&n.push(" = ",t("default")),z(n)}var e8=Ft(["ClassProperty","PropertyDefinition","ClassPrivateProperty","ClassAccessorProperty","AccessorProperty","TSAbstractPropertyDefinition","TSAbstractAccessorProperty"]);function t8(i,e,t){let{node:o}=i,r=[qo(i),qD(i),"class"],n=_e(o.id,Se.Trailing)||_e(o.typeParameters,Se.Trailing)||_e(o.superClass)||Et(o.extends)||Et(o.mixins)||Et(o.implements),s=[],a=[];if(o.id&&s.push(" ",t("id")),s.push(t("typeParameters")),o.superClass){let p=[OG(i,e,t),t(o.superTypeArguments?"superTypeArguments":"superTypeParameters")],g=i.call(f=>["extends ",sn(f,p,e)],"superClass");n?a.push(Ce,z(g)):a.push(" ",g)}else a.push(OT(i,e,t,"extends"));a.push(OT(i,e,t,"mixins"),OT(i,e,t,"implements"));let c;if(n){let p;o8(o)?p=[...s,oe(a)]:p=oe([...s,a]),c=i8(o),r.push(z(p,{id:c}))}else r.push(...s,...a);let h=o.body;return n&&Et(h.body)?r.push(ot(ie," ",{groupId:c})):r.push(" "),r.push(t("body")),r}var i8=Y3("heritageGroup");function NG(i){return ot(ie,"",{groupId:i8(i)})}function MG(i){return["extends","mixins","implements"].reduce((e,t)=>e+(Array.isArray(i[t])?i[t].length:0),i.superClass?1:0)>1}function o8(i){return i.typeParameters&&!_e(i.typeParameters,Se.Trailing|Se.Line)&&!MG(i)}function OT(i,e,t,o){let{node:r}=i;if(!Et(r[o]))return"";let n=oi(i,e,{marker:o});return[o8(r)?ot(" ",Ce,{groupId:xI(r.typeParameters)}):Ce,n,n&&ie,o,z(oe([Ce,Dt([",",Ce],i.map(t,o))]))]}function OG(i,e,t){let o=t("superClass"),{parent:r}=i;return r.type==="AssignmentExpression"?z(ot(["(",oe([ee,o]),ee,")"],o)):o}function r8(i,e,t){let{node:o}=i,r=[];return Et(o.decorators)&&r.push(m3(i,e,t)),r.push(RD(o)),o.static&&r.push("static "),r.push(qD(i)),o.override&&r.push("override "),r.push(QT(i,e,t)),r}function n8(i,e,t){let{node:o}=i,r=[],n=e.semi?";":"";Et(o.decorators)&&r.push(m3(i,e,t)),r.push(qo(i),RD(o)),o.static&&r.push("static "),r.push(qD(i)),o.override&&r.push("override "),o.readonly&&r.push("readonly "),o.variance&&r.push(t("variance")),(o.type==="ClassAccessorProperty"||o.type==="AccessorProperty"||o.type==="TSAbstractAccessorProperty")&&r.push("accessor "),r.push(Ng(i,e,t),No(i),W3(i),lo(i,t));let s=o.type==="TSAbstractPropertyDefinition"||o.type==="TSAbstractAccessorProperty";return[Lg(i,e,t,r," =",s?void 0:"value"),n]}function RG(i,e,t){let{node:o}=i,r=[];return i.each(({node:n,next:s,isLast:a})=>{r.push(t()),!e.semi&&e8(n)&&BG(n,s)&&r.push(";"),a||(r.push(ie),ra(n,e)&&r.push(ie))},"body"),_e(o,Se.Dangling)&&r.push(oi(i,e)),["{",r.length>0?[oe([ie,r]),ie]:"","}"]}function BG(i,e){var t;let{type:o,name:r}=i.key;if(!i.computed&&o==="Identifier"&&(r==="static"||r==="get"||r==="set")&&!i.value&&!i.typeAnnotation)return!0;if(!e||e.static||e.accessibility||e.readonly)return!1;if(!e.computed){let n=(t=e.key)==null?void 0:t.name;if(n==="in"||n==="instanceof")return!0}if(e8(e)&&e.variance&&!e.static&&!e.declare)return!0;switch(e.type){case"ClassProperty":case"PropertyDefinition":case"TSAbstractPropertyDefinition":return e.computed;case"MethodDefinition":case"TSAbstractMethodDefinition":case"ClassMethod":case"ClassPrivateMethod":{if((e.value?e.value.async:e.async)||e.kind==="get"||e.kind==="set")return!1;let n=e.value?e.value.generator:e.generator;return!!(e.computed||n)}case"TSIndexSignature":return!0}return!1}var WG=Ft(["TSAsExpression","TSTypeAssertion","TSNonNullExpression","TSInstantiationExpression","TSSatisfiesExpression"]);function s8(i){return WG(i)?s8(i.expression):i}var HG=Ft(["FunctionExpression","ArrowFunctionExpression"]);function jG(i){return i.type==="MemberExpression"||i.type==="OptionalMemberExpression"||i.type==="Identifier"&&i.name!=="undefined"}function zG(i,e){if(e.semi||l8(i,e)||c8(i,e))return!1;let{node:t,key:o,parent:r}=i;return!!(t.type==="ExpressionStatement"&&(o==="body"&&(r.type==="Program"||r.type==="BlockStatement"||r.type==="StaticBlock"||r.type==="TSModuleBlock")||o==="consequent"&&r.type==="SwitchCase")&&i.call(()=>a8(i,e),"expression"))}function a8(i,e){let{node:t}=i;switch(t.type){case"ParenthesizedExpression":case"TypeCastExpression":case"ArrayExpression":case"ArrayPattern":case"TemplateLiteral":case"TemplateElement":case"RegExpLiteral":return!0;case"ArrowFunctionExpression":if(!K3(i,e))return!0;break;case"UnaryExpression":{let{prefix:o,operator:r}=t;if(o&&(r==="+"||r==="-"))return!0;break}case"BindExpression":if(!t.object)return!0;break;case"Literal":if(t.regex)return!0;break;default:if(Gi(t))return!0}return Kc(i,e)?!0:nI(t)?i.call(()=>a8(i,e),...wB(t)):!1}function l8({node:i,parent:e},t){return(t.parentParser==="markdown"||t.parentParser==="mdx")&&i.type==="ExpressionStatement"&&Gi(i.expression)&&e.type==="Program"&&e.body.length===1}function c8({node:i,parent:e},t){return(t.parser==="__vue_event_binding"||t.parser==="__vue_ts_event_binding")&&i.type==="ExpressionStatement"&&e.type==="Program"&&e.body.length===1}function VG(i,e,t){let o=[t("expression")];if(c8(i,e)){let r=s8(i.node.expression);(HG(r)||jG(r))&&o.push(";")}else l8(i,e)||e.semi&&o.push(";");return o}function UG(i,e,t){if(e.__isVueBindings||e.__isVueForBindingLeft){let o=i.map(t,"program","body",0,"params");if(o.length===1)return o[0];let r=Dt([",",Ce],o);return e.__isVueForBindingLeft?["(",oe([ee,z(r)]),ee,")"]:r}if(e.__isEmbeddedTypescriptGenericParameters){let o=i.map(t,"program","body",0,"typeParameters","params");return Dt([",",Ce],o)}}function qG(i,e){let{node:t}=i;switch(t.type){case"RegExpLiteral":return uB(t);case"BigIntLiteral":return eI(t.extra.raw);case"NumericLiteral":return ph(t.extra.raw);case"StringLiteral":return Rc(uh(t.extra.raw,e));case"NullLiteral":return"null";case"BooleanLiteral":return String(t.value);case"DirectiveLiteral":return hB(t.extra.raw,e);case"Literal":{if(t.regex)return uB(t.regex);if(t.bigint)return eI(t.raw);let{value:o}=t;return typeof o=="number"?ph(t.raw):typeof o=="string"?KG(i)?hB(t.raw,e):Rc(uh(t.raw,e)):String(o)}}}function KG(i){if(i.key!=="expression")return;let{parent:e}=i;return e.type==="ExpressionStatement"&&e.directive}function eI(i){return i.toLowerCase()}function uB({pattern:i,flags:e}){return e=[...e].sort().join(""),`/${i}/${e}`}function hB(i,e){let t=i.slice(1,-1);if(t.includes('"')||t.includes("'"))return i;let o=e.singleQuote?"'":'"';return o+t+o}function $G(i,e,t){let o=i.originalText.slice(e,t);for(let r of i[Symbol.for("comments")]){let n=di(r);if(n>t)break;let s=Ct(r);if(s<e)continue;let a=s-n;o=o.slice(0,n-e)+" ".repeat(a)+o.slice(s-e)}return o}var d8=$G;function GG(i,e,t){let{node:o}=i;return["import",o.phase?` ${o.phase}`:"",p8(o),g8(i,e,t),m8(i,e,t),_8(i,e,t),e.semi?";":""]}var u8=i=>i.type==="ExportDefaultDeclaration"||i.type==="DeclareExportDeclaration"&&i.default;function h8(i,e,t){let{node:o}=i,r=[S$(i,e,t),qo(i),"export",u8(o)?" default":""],{declaration:n,exported:s}=o;return _e(o,Se.Dangling)&&(r.push(" ",oi(i,e)),FB(o)&&r.push(ie)),n?r.push(" ",t("declaration")):(r.push(YG(o)),o.type==="ExportAllDeclaration"||o.type==="DeclareExportAllDeclaration"?(r.push(" *"),s&&r.push(" as ",t("exported"))):r.push(g8(i,e,t)),r.push(m8(i,e,t),_8(i,e,t))),r.push(XG(o,e)),r}var JG=Ft(["ClassDeclaration","ComponentDeclaration","FunctionDeclaration","TSInterfaceDeclaration","DeclareClass","DeclareComponent","DeclareFunction","DeclareHook","HookDeclaration","TSDeclareFunction","EnumDeclaration"]);function XG(i,e){return e.semi&&(!i.declaration||u8(i)&&!JG(i.declaration))?";":""}function SI(i,e=!0){return i&&i!=="value"?`${e?" ":""}${i}${e?"":" "}`:""}function p8(i,e){return SI(i.importKind,e)}function YG(i){return SI(i.exportKind)}function m8(i,e,t){let{node:o}=i;if(!o.source)return"";let r=[];return f8(o,e)&&r.push(" from"),r.push(" ",t("source")),r}function g8(i,e,t){let{node:o}=i;if(!f8(o,e))return"";let r=[" "];if(Et(o.specifiers)){let n=[],s=[];i.each(()=>{let a=i.node.type;if(a==="ExportNamespaceSpecifier"||a==="ExportDefaultSpecifier"||a==="ImportNamespaceSpecifier"||a==="ImportDefaultSpecifier")n.push(t());else if(a==="ExportSpecifier"||a==="ImportSpecifier")s.push(t());else throw new yh(o,"specifier")},"specifiers"),r.push(Dt(", ",n)),s.length>0&&(n.length>0&&r.push(", "),s.length>1||n.length>0||o.specifiers.some(a=>_e(a))?r.push(z(["{",oe([e.bracketSpacing?Ce:ee,Dt([",",Ce],s)]),ot(oa(e)?",":""),e.bracketSpacing?Ce:ee,"}"])):r.push(["{",e.bracketSpacing?" ":"",...s,e.bracketSpacing?" ":"","}"]))}else r.push("{}");return r}function f8(i,e){return i.type!=="ImportDeclaration"||Et(i.specifiers)||i.importKind==="type"?!0:d8(e,di(i),di(i.source)).trimEnd().endsWith("from")}function QG(i,e){var t,o;if((t=i.extra)!=null&&t.deprecatedAssertSyntax)return"assert";let r=d8(e,Ct(i.source),(o=i.attributes)!=null&&o[0]?di(i.attributes[0]):Ct(i)).trimStart();return r.startsWith("assert")?"assert":r.startsWith("with")||Et(i.attributes)?"with":void 0}function _8(i,e,t){let{node:o}=i;if(!o.source)return"";let r=QG(o,e);if(!r)return"";let n=[` ${r} {`];return Et(o.attributes)&&(e.bracketSpacing&&n.push(" "),n.push(Dt(", ",i.map(t,"attributes"))),e.bracketSpacing&&n.push(" ")),n.push("}"),n}function ZG(i,e,t){let{node:o}=i,{type:r}=o,n=r.startsWith("Import"),s=n?"imported":"local",a=n?"local":"exported",c=o[s],h=o[a],p="",g="";return r==="ExportNamespaceSpecifier"||r==="ImportNamespaceSpecifier"?p="*":c&&(p=t(s)),h&&!eJ(o)&&(g=t(a)),[SI(r==="ImportSpecifier"?o.importKind:o.exportKind,!1),p,p&&g?" as ":"",g]}function eJ(i){if(i.type!=="ImportSpecifier"&&i.type!=="ExportSpecifier")return!1;let{local:e,[i.type==="ImportSpecifier"?"imported":"exported"]:t}=i;if(e.type!==t.type||!oU(e,t))return!1;if(Uo(e))return e.value===t.value&&Ar(e)===Ar(t);switch(e.type){case"Identifier":return e.name===t.name;default:return!1}}function $D(i,e,t){var o;let r=e.semi?";":"",{node:n}=i,s=n.type==="ObjectTypeAnnotation",a=n.type==="TSEnumDeclaration"||n.type==="EnumBooleanBody"||n.type==="EnumNumberBody"||n.type==="EnumBigIntBody"||n.type==="EnumStringBody"||n.type==="EnumSymbolBody",c=[n.type==="TSTypeLiteral"||a?"members":n.type==="TSInterfaceBody"?"body":"properties"];s&&c.push("indexers","callProperties","internalSlots");let h=c.flatMap(O=>i.map(({node:V})=>({node:V,printed:t(),loc:di(V)}),O));c.length>1&&h.sort((O,V)=>O.loc-V.loc);let{parent:p,key:g}=i,f=s&&g==="body"&&(p.type==="InterfaceDeclaration"||p.type==="DeclareInterface"||p.type==="DeclareClass"),_=n.type==="TSInterfaceBody"||a||f||n.type==="ObjectPattern"&&p.type!=="FunctionDeclaration"&&p.type!=="FunctionExpression"&&p.type!=="ArrowFunctionExpression"&&p.type!=="ObjectMethod"&&p.type!=="ClassMethod"&&p.type!=="ClassPrivateMethod"&&p.type!=="AssignmentPattern"&&p.type!=="CatchClause"&&n.properties.some(O=>O.value&&(O.value.type==="ObjectPattern"||O.value.type==="ArrayPattern"))||n.type!=="ObjectPattern"&&e.objectWrap==="preserve"&&h.length>0&&Dl(e.originalText,di(n),h[0].loc),y=f?";":n.type==="TSInterfaceBody"||n.type==="TSTypeLiteral"?ot(r,";"):",",C=n.type==="RecordExpression"?"#{":n.exact?"{|":"{",x=n.exact?"|}":"}",D=[],E=h.map(O=>{let V=[...D,z(O.printed)];return D=[y,Ce],(O.node.type==="TSPropertySignature"||O.node.type==="TSMethodSignature"||O.node.type==="TSConstructSignatureDeclaration"||O.node.type==="TSCallSignatureDeclaration")&&_e(O.node,Se.PrettierIgnore)&&D.shift(),ra(O.node,e)&&D.push(ie),V});if(n.inexact||n.hasUnknownMembers){let O;if(_e(n,Se.Dangling)){let V=_e(n,Se.Line);O=[oi(i,e),V||dr(e.originalText,Ct(Nt(!1,ah(n),-1)))?ie:Ce,"..."]}else O=["..."];E.push([...D,...O])}let I=(o=Nt(!1,h,-1))==null?void 0:o.node,k=!(n.inexact||n.hasUnknownMembers||I&&(I.type==="RestElement"||(I.type==="TSPropertySignature"||I.type==="TSCallSignatureDeclaration"||I.type==="TSMethodSignature"||I.type==="TSConstructSignatureDeclaration")&&_e(I,Se.PrettierIgnore))),N;if(E.length===0){if(!_e(n,Se.Dangling))return[C,x,lo(i,t)];N=z([C,oi(i,e,{indent:!0}),ee,x,No(i),lo(i,t)])}else N=[f&&Et(n.properties)?NG(p):"",C,oe([e.bracketSpacing?Ce:ee,...E]),ot(k&&(y!==","||oa(e))?y:""),e.bracketSpacing?Ce:ee,x,No(i),lo(i,t)];return i.match(O=>O.type==="ObjectPattern"&&!Et(O.decorators),RT)||_l(n)&&(i.match(void 0,(O,V)=>V==="typeAnnotation",(O,V)=>V==="typeAnnotation",RT)||i.match(void 0,(O,V)=>O.type==="FunctionTypeParam"&&V==="typeAnnotation",RT))||!_&&i.match(O=>O.type==="ObjectPattern",O=>O.type==="AssignmentExpression"||O.type==="VariableDeclarator")?N:z(N,{shouldBreak:_})}function RT(i,e){return(e==="params"||e==="parameters"||e==="this"||e==="rest")&&S3(i)}function tJ(i){let e=[i];for(let t=0;t<e.length;t++){let o=e[t];for(let r of["test","consequent","alternate"]){let n=o[r];if(Gi(n))return!0;n.type==="ConditionalExpression"&&e.push(n)}}return!1}function iJ(i,e,t){let{node:o}=i,r=o.type==="ConditionalExpression",n=r?"alternate":"falseType",{parent:s}=i,a=r?t("test"):[t("checkType")," ","extends"," ",t("extendsType")];return s.type===o.type&&s[n]===o?ts(2,a):a}var oJ=new Map([["AssignmentExpression","right"],["VariableDeclarator","init"],["ReturnStatement","argument"],["ThrowStatement","argument"],["UnaryExpression","argument"],["YieldExpression","argument"],["AwaitExpression","argument"]]);function rJ(i){let{node:e}=i;if(e.type!=="ConditionalExpression")return!1;let t,o=e;for(let r=0;!t;r++){let n=i.getParentNode(r);if(n.type==="ChainExpression"&&n.expression===o||wt(n)&&n.callee===o||yi(n)&&n.object===o||n.type==="TSNonNullExpression"&&n.expression===o){o=n;continue}n.type==="NewExpression"&&n.callee===o||Qn(n)&&n.expression===o?(t=i.getParentNode(r+1),o=n):t=n}return o===e?!1:t[oJ.get(t.type)]===o}function nJ(i,e,t){let{node:o}=i,r=o.type==="ConditionalExpression",n=r?"consequent":"trueType",s=r?"alternate":"falseType",a=r?["test"]:["checkType","extendsType"],c=o[n],h=o[s],p=[],g=!1,{parent:f}=i,_=f.type===o.type&&a.some($=>f[$]===o),y=f.type===o.type&&!_,C,x,D=0;do x=C||o,C=i.getParentNode(D),D++;while(C&&C.type===o.type&&a.every($=>C[$]!==x));let E=C||f,I=x;if(r&&(Gi(o[a[0]])||Gi(c)||Gi(h)||tJ(I))){g=!0,y=!0;let $=q=>[ot("("),oe([ee,q]),ee,ot(")")],ae=q=>q.type==="NullLiteral"||q.type==="Literal"&&q.value===null||q.type==="Identifier"&&q.name==="undefined";p.push(" ? ",ae(c)?t(n):$(t(n))," : ",h.type===o.type||ae(h)?t(s):$(t(s)))}else{let $=q=>e.useTabs?oe(t(q)):ts(2,t(q)),ae=[Ce,"? ",c.type===o.type?ot("","("):"",$(n),c.type===o.type?ot("",")"):"",Ce,": ",$(s)];p.push(f.type!==o.type||f[s]===o||_?ae:e.useTabs?WB(oe(ae)):ts(Math.max(0,e.tabWidth-2),ae))}let k=[n,s,...a].some($=>_e(o[$],ae=>Pr(ae)&&Dl(e.originalText,di(ae),Ct(ae)))),N=$=>f===E?z($,{shouldBreak:k}):k?[$,is]:$,O=!g&&(yi(f)||f.type==="NGPipeExpression"&&f.left===o)&&!f.computed,V=rJ(i),K=N([iJ(i,e,t),y?p:oe(p),r&&O&&!V?ee:""]);return _||V?z([oe([ee,K]),ee]):K}function sJ(i,e){return(yi(e)||e.type==="NGPipeExpression"&&e.left===i)&&!e.computed}function aJ(i,e,t,o){return[...i.map(r=>ah(r)),ah(e),ah(t)].flat().some(r=>Pr(r)&&Dl(o.originalText,di(r),Ct(r)))}var lJ=new Map([["AssignmentExpression","right"],["VariableDeclarator","init"],["ReturnStatement","argument"],["ThrowStatement","argument"],["UnaryExpression","argument"],["YieldExpression","argument"],["AwaitExpression","argument"]]);function cJ(i){let{node:e}=i;if(e.type!=="ConditionalExpression")return!1;let t,o=e;for(let r=0;!t;r++){let n=i.getParentNode(r);if(n.type==="ChainExpression"&&n.expression===o||wt(n)&&n.callee===o||yi(n)&&n.object===o||n.type==="TSNonNullExpression"&&n.expression===o){o=n;continue}n.type==="NewExpression"&&n.callee===o||Qn(n)&&n.expression===o?(t=i.getParentNode(r+1),o=n):t=n}return o===e?!1:t[lJ.get(t.type)]===o}var BT=i=>[ot("("),oe([ee,i]),ee,ot(")")];function wI(i,e,t,o){if(!e.experimentalTernaries)return nJ(i,e,t);let{node:r}=i,n=r.type==="ConditionalExpression",s=bl(r),a=n?"consequent":"trueType",c=n?"alternate":"falseType",h=n?["test"]:["checkType","extendsType"],p=r[a],g=r[c],f=h.map(ni=>r[ni]),{parent:_}=i,y=_.type===r.type,C=y&&h.some(ni=>_[ni]===r),x=y&&_[c]===r,D=p.type===r.type,E=g.type===r.type,I=E||x,k=e.tabWidth>2||e.useTabs,N,O,V=0;do O=N||r,N=i.getParentNode(V),V++;while(N&&N.type===r.type&&h.every(ni=>N[ni]!==O));let K=N||_,$=o&&o.assignmentLayout&&o.assignmentLayout!=="break-after-operator"&&(_.type==="AssignmentExpression"||_.type==="VariableDeclarator"||_.type==="ClassProperty"||_.type==="PropertyDefinition"||_.type==="ClassPrivateProperty"||_.type==="ObjectProperty"||_.type==="Property"),ae=(_.type==="ReturnStatement"||_.type==="ThrowStatement")&&!(D||E),q=n&&K.type==="JSXExpressionContainer"&&i.grandparent.type!=="JSXAttribute",ji=cJ(i),Mt=sJ(r,_),De=s&&Kc(i,e),Ht=k?e.useTabs?"	":" ".repeat(e.tabWidth-1):"",Ti=aJ(f,p,g,e)||D||E,bo=!I&&!y&&!s&&(q?p.type==="NullLiteral"||p.type==="Literal"&&p.value===null:lI(p,e)&&qR(r.test,3)),Qe=I||x||s&&!y||y&&n&&qR(r.test,1)||bo,Yt=[];!D&&_e(p,Se.Dangling)&&i.call(ni=>{Yt.push(oi(ni,e),ie)},"consequent");let Mo=[];_e(r.test,Se.Dangling)&&i.call(ni=>{Mo.push(oi(ni,e))},"test"),!E&&_e(g,Se.Dangling)&&i.call(ni=>{Mo.push(oi(ni,e))},"alternate"),_e(r,Se.Dangling)&&Mo.push(oi(i,e));let Xi=Symbol("test"),Th=Symbol("consequent"),fa=Symbol("test-and-consequent"),Ih=n?[BT(t("test")),r.test.type==="ConditionalExpression"?is:""]:[t("checkType")," ","extends"," ",bl(r.extendsType)||r.extendsType.type==="TSMappedType"?t("extendsType"):z(BT(t("extendsType")))],od=z([Ih," ?"],{id:Xi}),Ph=t(a),Pe=oe([D||q&&(Gi(p)||y||I)?ie:Ce,Yt,Ph]),rt=Qe?z([od,I?Pe:ot(Pe,z(Pe,{id:Th}),{groupId:Xi})],{id:fa}):[od,Pe],kh=t(c),vt=bo?ot(kh,WB(BT(kh)),{groupId:fa}):kh,Tl=[rt,Mo.length>0?[oe([ie,Mo]),ie]:E?ie:bo?ot(Ce," ",{groupId:fa}):Ce,":",E?" ":k?Qe?ot(Ht,ot(I||bo?" ":Ht," "),{groupId:fa}):ot(Ht," "):" ",E?vt:z([oe(vt),q&&!bo?ee:""]),Mt&&!ji?ee:"",Ti?is:""];return $&&!Ti?z(oe([ee,z(Tl)])):$||ae?z(oe(Tl)):ji||s&&C?z([oe([ee,Tl]),De?ee:""]):_===K?z(Tl):Tl}function dJ(i,e,t,o){let{node:r}=i;if(sI(r))return qG(i,e);let n=e.semi?";":"",s=[];switch(r.type){case"JsExpressionRoot":return t("node");case"JsonRoot":return[t("node"),ie];case"File":return UG(i,e,t)??t("program");case"EmptyStatement":return"";case"ExpressionStatement":return VG(i,e,t);case"ChainExpression":return t("expression");case"ParenthesizedExpression":return!_e(r.expression)&&(an(r.expression)||co(r.expression))?["(",t("expression"),")"]:z(["(",oe([ee,t("expression")]),ee,")"]);case"AssignmentExpression":return O$(i,e,t);case"VariableDeclarator":return R$(i,e,t);case"BinaryExpression":case"LogicalExpression":return p3(i,e,t);case"AssignmentPattern":return[t("left")," = ",t("right")];case"OptionalMemberExpression":case"MemberExpression":return L$(i,e,t);case"MetaProperty":return[t("meta"),".",t("property")];case"BindExpression":return r.object&&s.push(t("object")),s.push(z(oe([ee,H3(i,e,t)]))),s;case"Identifier":return[r.name,No(i),W3(i),lo(i,t)];case"V8IntrinsicIdentifier":return["%",r.name];case"SpreadElement":case"SpreadElementPattern":case"SpreadPropertyPattern":case"RestElement":return j3(i,t);case"FunctionDeclaration":case"FunctionExpression":return q3(i,t,e,o);case"ArrowFunctionExpression":return bG(i,e,t,o);case"YieldExpression":return s.push("yield"),r.delegate&&s.push("*"),r.argument&&s.push(" ",t("argument")),s;case"AwaitExpression":if(s.push("await"),r.argument){s.push(" ",t("argument"));let{parent:a}=i;if(wt(a)&&a.callee===r||yi(a)&&a.object===r){s=[oe([ee,...s]),ee];let c=i.findAncestor(h=>h.type==="AwaitExpression"||h.type==="BlockStatement");if(c?.type!=="AwaitExpression"||!Fo(c.argument,h=>h===r))return z(s)}}return s;case"ExportDefaultDeclaration":case"ExportNamedDeclaration":case"ExportAllDeclaration":return h8(i,e,t);case"ImportDeclaration":return GG(i,e,t);case"ImportSpecifier":case"ExportSpecifier":case"ImportNamespaceSpecifier":case"ExportNamespaceSpecifier":case"ImportDefaultSpecifier":case"ExportDefaultSpecifier":return ZG(i,e,t);case"ImportAttribute":return NT(i,e,t);case"Program":case"BlockStatement":case"StaticBlock":return X3(i,e,t);case"ClassBody":return RG(i,e,t);case"ThrowStatement":return yG(i,e,t);case"ReturnStatement":return _G(i,e,t);case"NewExpression":case"ImportExpression":case"OptionalCallExpression":case"CallExpression":return b3(i,e,t);case"ObjectExpression":case"ObjectPattern":case"RecordExpression":return $D(i,e,t);case"Property":return jD(r)?QT(i,e,t):NT(i,e,t);case"ObjectProperty":return NT(i,e,t);case"ObjectMethod":return QT(i,e,t);case"Decorator":return["@",t("expression")];case"ArrayExpression":case"ArrayPattern":case"TupleExpression":return DI(i,e,t);case"SequenceExpression":{let{parent:a}=i;if(a.type==="ExpressionStatement"||a.type==="ForStatement"){let c=[];return i.each(({isFirst:h})=>{h?c.push(t()):c.push(",",oe([Ce,t()]))},"expressions"),z(c)}return z(Dt([",",Ce],i.map(t,"expressions")))}case"ThisExpression":return"this";case"Super":return"super";case"Directive":return[t("value"),n];case"UnaryExpression":return s.push(r.operator),/[a-z]$/u.test(r.operator)&&s.push(" "),_e(r.argument)?s.push(z(["(",oe([ee,t("argument")]),ee,")"])):s.push(t("argument")),s;case"UpdateExpression":return[r.prefix?r.operator:"",t("argument"),r.prefix?"":r.operator];case"ConditionalExpression":return wI(i,e,t,o);case"VariableDeclaration":{let a=i.map(t,"declarations"),c=i.parent,h=c.type==="ForStatement"||c.type==="ForInStatement"||c.type==="ForOfStatement",p=r.declarations.some(f=>f.init),g;return a.length===1&&!_e(r.declarations[0])?g=a[0]:a.length>0&&(g=oe(a[0])),s=[qo(i),r.kind,g?[" ",g]:"",oe(a.slice(1).map(f=>[",",p&&!h?ie:Ce,f]))],h&&c.body!==r||s.push(n),z(s)}case"WithStatement":return z(["with (",t("object"),")",gl(r.body,t("body"))]);case"IfStatement":{let a=gl(r.consequent,t("consequent")),c=z(["if (",z([oe([ee,t("test")]),ee]),")",a]);if(s.push(c),r.alternate){let h=_e(r.consequent,Se.Trailing|Se.Line)||FB(r),p=r.consequent.type==="BlockStatement"&&!h;s.push(p?" ":ie),_e(r,Se.Dangling)&&s.push(oi(i,e),h?ie:" "),s.push("else",z(gl(r.alternate,t("alternate"),r.alternate.type==="IfStatement")))}return s}case"ForStatement":{let a=gl(r.body,t("body")),c=oi(i,e),h=c?[c,ee]:"";return!r.init&&!r.test&&!r.update?[h,z(["for (;;)",a])]:[h,z(["for (",z([oe([ee,t("init"),";",Ce,t("test"),";",Ce,t("update")]),ee]),")",a])]}case"WhileStatement":return z(["while (",z([oe([ee,t("test")]),ee]),")",gl(r.body,t("body"))]);case"ForInStatement":return z(["for (",t("left")," in ",t("right"),")",gl(r.body,t("body"))]);case"ForOfStatement":return z(["for",r.await?" await":""," (",t("left")," of ",t("right"),")",gl(r.body,t("body"))]);case"DoWhileStatement":{let a=gl(r.body,t("body"));return s=[z(["do",a])],r.body.type==="BlockStatement"?s.push(" "):s.push(ie),s.push("while (",z([oe([ee,t("test")]),ee]),")",n),s}case"DoExpression":return[r.async?"async ":"","do ",t("body")];case"BreakStatement":case"ContinueStatement":return s.push(r.type==="BreakStatement"?"break":"continue"),r.label&&s.push(" ",t("label")),s.push(n),s;case"LabeledStatement":return r.body.type==="EmptyStatement"?[t("label"),":;"]:[t("label"),": ",t("body")];case"TryStatement":return["try ",t("block"),r.handler?[" ",t("handler")]:"",r.finalizer?[" finally ",t("finalizer")]:""];case"CatchClause":if(r.param){let a=_e(r.param,h=>!Pr(h)||h.leading&&dr(e.originalText,Ct(h))||h.trailing&&dr(e.originalText,di(h),{backwards:!0})),c=t("param");return["catch ",a?["(",oe([ee,c]),ee,") "]:["(",c,") "],t("body")]}return["catch ",t("body")];case"SwitchStatement":return[z(["switch (",oe([ee,t("discriminant")]),ee,")"])," {",r.cases.length>0?oe([ie,Dt(ie,i.map(({node:a,isLast:c})=>[t(),!c&&ra(a,e)?ie:""],"cases"))]):"",ie,"}"];case"SwitchCase":{r.test?s.push("case ",t("test"),":"):s.push("default:"),_e(r,Se.Dangling)&&s.push(" ",oi(i,e));let a=r.consequent.filter(c=>c.type!=="EmptyStatement");if(a.length>0){let c=ZT(i,e,t,"consequent");s.push(a.length===1&&a[0].type==="BlockStatement"?[" ",c]:oe([ie,c]))}return s}case"DebuggerStatement":return["debugger",n];case"ClassDeclaration":case"ClassExpression":return t8(i,e,t);case"ClassMethod":case"ClassPrivateMethod":case"MethodDefinition":return r8(i,e,t);case"ClassProperty":case"PropertyDefinition":case"ClassPrivateProperty":case"ClassAccessorProperty":case"AccessorProperty":return n8(i,e,t);case"TemplateElement":return Rc(r.value.raw);case"TemplateLiteral":return o3(i,t,e);case"TaggedTemplateExpression":return Kq(i,t);case"PrivateIdentifier":return["#",r.name];case"PrivateName":return["#",t("id")];case"TopicReference":return"%";case"ArgumentPlaceholder":return"?";case"ModuleExpression":return["module ",t("body")];case"InterpreterDirective":default:throw new yh(r,"ESTree")}}function y8(i,e,t){let{parent:o,node:r,key:n}=i,s=[t("expression")];switch(r.type){case"AsConstExpression":s.push(" as const");break;case"AsExpression":case"TSAsExpression":s.push(" as ",t("typeAnnotation"));break;case"SatisfiesExpression":case"TSSatisfiesExpression":s.push(" satisfies ",t("typeAnnotation"));break}return n==="callee"&&wt(o)||n==="object"&&yi(o)?z([oe([ee,...s]),ee]):s}function uJ(i,e,t){let{node:o}=i,r=[qo(i),"component"];o.id&&r.push(" ",t("id")),r.push(t("typeParameters"));let n=hJ(i,t,e);return o.rendersType?r.push(z([n," ",t("rendersType")])):r.push(z([n])),o.body&&r.push(" ",t("body")),e.semi&&o.type==="DeclareComponent"&&r.push(";"),r}function hJ(i,e,t){let{node:o}=i,r=o.params;if(o.rest&&(r=[...r,o.rest]),r.length===0)return["(",oi(i,t,{filter:s=>ln(t.originalText,Ct(s))===")"}),")"];let n=[];return mJ(i,(s,a)=>{let c=a===r.length-1;c&&o.rest&&n.push("..."),n.push(e()),!c&&(n.push(","),ra(r[a],t)?n.push(ie,ie):n.push(Ce))}),["(",oe([ee,...n]),ot(oa(t,"all")&&!pJ(o,r)?",":""),ee,")"]}function pJ(i,e){var t;return i.rest||((t=Nt(!1,e,-1))==null?void 0:t.type)==="RestElement"}function mJ(i,e){let{node:t}=i,o=0,r=n=>e(n,o++);i.each(r,"params"),t.rest&&i.call(r,"rest")}function gJ(i,e,t){let{node:o}=i;return o.shorthand?t("local"):[t("name")," as ",t("local")]}function fJ(i,e,t){let{node:o}=i,r=[];return o.name&&r.push(t("name"),o.optional?"?: ":": "),r.push(t("typeAnnotation")),r}function v8(i,e,t){return $D(i,t,e)}function b8(i,e){let{node:t}=i,o=e("id");t.computed&&(o=["[",o,"]"]);let r="";return t.initializer&&(r=e("initializer")),t.init&&(r=e("init")),r?[o," = ",r]:o}function _J(i,e,t){let{node:o}=i,r;if(o.type==="EnumSymbolBody"||o.explicitType)switch(o.type){case"EnumBooleanBody":r="boolean";break;case"EnumNumberBody":r="number";break;case"EnumBigIntBody":r="bigint";break;case"EnumStringBody":r="string";break;case"EnumSymbolBody":r="symbol";break}return[r?`of ${r} `:"",v8(i,e,t)]}function D8(i,e,t){let{node:o}=i;return[qo(i),o.const?"const ":"","enum ",e("id")," ",o.type==="TSEnumDeclaration"?v8(i,e,t):e("body")]}function yJ(i,e,t){let{node:o}=i,r=["hook"];o.id&&r.push(" ",t("id"));let n=$c(i,t,e,!1,!0),s=KD(i,t),a=vh(o,s);return r.push(z([a?z(n):n,s]),o.body?" ":"",t("body")),r}function vJ(i,e,t){let{node:o}=i,r=[qo(i),"hook"];return o.id&&r.push(" ",t("id")),e.semi&&r.push(";"),r}function pB(i){var e;let{node:t}=i;return t.type==="HookTypeAnnotation"&&((e=i.getParentNode(2))==null?void 0:e.type)==="DeclareHook"}function bJ(i,e,t){let{node:o}=i,r=[];r.push(pB(i)?"":"hook ");let n=$c(i,t,e,!1,!0),s=[];return s.push(pB(i)?": ":" => ",t("returnType")),vh(o,s)&&(n=z(n)),r.push(n,s),z(r)}function C8(i,e,t){let{node:o}=i,r=[qo(i),"interface"],n=[],s=[];o.type!=="InterfaceTypeAnnotation"&&n.push(" ",t("id"),t("typeParameters"));let a=o.typeParameters&&!_e(o.typeParameters,Se.Trailing|Se.Line);return Et(o.extends)&&s.push(a?ot(" ",Ce,{groupId:xI(o.typeParameters)}):Ce,"extends ",(o.extends.length===1?IU:oe)(Dt([",",Ce],i.map(t,"extends")))),_e(o.id,Se.Trailing)||Et(o.extends)?a?r.push(z([...n,oe(s)])):r.push(z(oe([...n,...s]))):r.push(...n,...s),r.push(" ",t("body")),z(r)}function DJ(i,e,t){let{node:o}=i;if(xB(o))return o.type.slice(0,-14).toLowerCase();let r=e.semi?";":"";switch(o.type){case"ComponentDeclaration":case"DeclareComponent":case"ComponentTypeAnnotation":return uJ(i,e,t);case"ComponentParameter":return gJ(i,e,t);case"ComponentTypeParameter":return fJ(i,e,t);case"HookDeclaration":return yJ(i,e,t);case"DeclareHook":return vJ(i,e,t);case"HookTypeAnnotation":return bJ(i,e,t);case"DeclareClass":return t8(i,e,t);case"DeclareFunction":return[qo(i),"function ",t("id"),t("predicate"),r];case"DeclareModule":return["declare module ",t("id")," ",t("body")];case"DeclareModuleExports":return["declare module.exports",lo(i,t),r];case"DeclareNamespace":return["declare namespace ",t("id")," ",t("body")];case"DeclareVariable":return[qo(i),o.kind??"var"," ",t("id"),r];case"DeclareExportDeclaration":case"DeclareExportAllDeclaration":return h8(i,e,t);case"DeclareOpaqueType":case"OpaqueType":return iG(i,e,t);case"DeclareTypeAlias":case"TypeAlias":return E3(i,e,t);case"IntersectionTypeAnnotation":return A3(i,e,t);case"UnionTypeAnnotation":return T3(i,e,t);case"ConditionalTypeAnnotation":return wI(i,e,t);case"InferTypeAnnotation":return k3(i,e,t);case"FunctionTypeAnnotation":return I3(i,e,t);case"TupleTypeAnnotation":return DI(i,e,t);case"TupleTypeLabeledElement":return L3(i,e,t);case"TupleTypeSpreadElement":return F3(i,e,t);case"GenericTypeAnnotation":return[t("id"),Ag(i,e,t,"typeParameters")];case"IndexedAccessType":case"OptionalIndexedAccessType":return P3(i,e,t);case"TypeAnnotation":return M3(i,e,t);case"TypeParameter":return Z3(i,e,t);case"TypeofTypeAnnotation":return R3(i,t);case"ExistsTypeAnnotation":return"*";case"ArrayTypeAnnotation":return O3(t);case"DeclareEnum":case"EnumDeclaration":return D8(i,t,e);case"EnumBooleanBody":case"EnumNumberBody":case"EnumBigIntBody":case"EnumStringBody":case"EnumSymbolBody":return _J(i,t,e);case"EnumBooleanMember":case"EnumNumberMember":case"EnumBigIntMember":case"EnumStringMember":case"EnumDefaultedMember":return b8(i,t);case"FunctionTypeParam":{let n=o.name?t("name"):i.parent.this===o?"this":"";return[n,No(i),n?": ":"",t("typeAnnotation")]}case"DeclareInterface":case"InterfaceDeclaration":case"InterfaceTypeAnnotation":return C8(i,e,t);case"ClassImplements":case"InterfaceExtends":return[t("id"),t("typeParameters")];case"NullableTypeAnnotation":return["?",t("typeAnnotation")];case"Variance":{let{kind:n}=o;return rI.ok(n==="plus"||n==="minus"),n==="plus"?"+":"-"}case"KeyofTypeAnnotation":return["keyof ",t("argument")];case"ObjectTypeCallProperty":return[o.static?"static ":"",t("value")];case"ObjectTypeMappedTypeProperty":return PG(i,e,t);case"ObjectTypeIndexer":return[o.static?"static ":"",o.variance?t("variance"):"","[",t("id"),o.id?": ":"",t("key"),"]: ",t("value")];case"ObjectTypeProperty":{let n="";return o.proto?n="proto ":o.static&&(n="static "),[n,o.kind!=="init"?o.kind+" ":"",o.variance?t("variance"):"",Ng(i,e,t),No(i),jD(o)?"":": ",t("value")]}case"ObjectTypeAnnotation":return $D(i,e,t);case"ObjectTypeInternalSlot":return[o.static?"static ":"","[[",t("id"),"]]",No(i),o.method?"":": ",t("value")];case"ObjectTypeSpreadProperty":return j3(i,t);case"QualifiedTypeofIdentifier":case"QualifiedTypeIdentifier":return[t("qualification"),".",t("id")];case"NullLiteralTypeAnnotation":return"null";case"BooleanLiteralTypeAnnotation":return String(o.value);case"StringLiteralTypeAnnotation":return Rc(uh(Ar(o),e));case"NumberLiteralTypeAnnotation":return ph(o.raw??o.extra.raw);case"BigIntLiteralTypeAnnotation":return eI(o.raw??o.extra.raw);case"TypeCastExpression":return["(",t("expression"),lo(i,t),")"];case"TypePredicate":return B3(i,t);case"TypeOperator":return[o.operator," ",t("typeAnnotation")];case"TypeParameterDeclaration":case"TypeParameterInstantiation":return Ag(i,e,t,"params");case"InferredPredicate":case"DeclaredPredicate":return[i.key==="predicate"&&i.parent.type!=="DeclareFunction"&&!i.parent.returnType?": ":" ","%checks",...o.type==="DeclaredPredicate"?["(",t("value"),")"]:[]];case"AsExpression":case"AsConstExpression":case"SatisfiesExpression":return y8(i,e,t)}}function CJ(i,e,t){var o;let{node:r}=i;if(!r.type.startsWith("TS"))return;if(SB(r))return r.type.slice(2,-7).toLowerCase();let n=e.semi?";":"",s=[];switch(r.type){case"TSThisType":return"this";case"TSTypeAssertion":{let a=!(co(r.expression)||an(r.expression)),c=z(["<",oe([ee,t("typeAnnotation")]),ee,">"]),h=[ot("("),oe([ee,t("expression")]),ee,ot(")")];return a?Oc([[c,t("expression")],[c,z(h,{shouldBreak:!0})],[c,t("expression")]]):z([c,t("expression")])}case"TSDeclareFunction":return q3(i,t,e);case"TSExportAssignment":return["export = ",t("expression"),n];case"TSModuleBlock":return X3(i,e,t);case"TSInterfaceBody":case"TSTypeLiteral":return $D(i,e,t);case"TSTypeAliasDeclaration":return E3(i,e,t);case"TSQualifiedName":return[t("left"),".",t("right")];case"TSAbstractMethodDefinition":case"TSDeclareMethod":return r8(i,e,t);case"TSAbstractAccessorProperty":case"TSAbstractPropertyDefinition":return n8(i,e,t);case"TSInterfaceHeritage":case"TSClassImplements":case"TSExpressionWithTypeArguments":case"TSInstantiationExpression":return[t("expression"),t(r.typeArguments?"typeArguments":"typeParameters")];case"TSTemplateLiteralType":return o3(i,t,e);case"TSNamedTupleMember":return L3(i,e,t);case"TSRestType":return F3(i,e,t);case"TSOptionalType":return[t("typeAnnotation"),"?"];case"TSInterfaceDeclaration":return C8(i,e,t);case"TSTypeParameterDeclaration":case"TSTypeParameterInstantiation":return Ag(i,e,t,"params");case"TSTypeParameter":return Z3(i,e,t);case"TSAsExpression":case"TSSatisfiesExpression":return y8(i,e,t);case"TSArrayType":return O3(t);case"TSPropertySignature":return[r.readonly?"readonly ":"",Ng(i,e,t),No(i),lo(i,t)];case"TSParameterProperty":return[RD(r),r.static?"static ":"",r.override?"override ":"",r.readonly?"readonly ":"",t("parameter")];case"TSTypeQuery":return R3(i,t);case"TSIndexSignature":{let a=r.parameters.length>1?ot(oa(e)?",":""):"",c=z([oe([ee,Dt([", ",ee],i.map(t,"parameters"))]),a,ee]),h=i.parent.type==="ClassBody"&&i.key==="body";return[h&&r.static?"static ":"",r.readonly?"readonly ":"","[",r.parameters?c:"","]",lo(i,t),h?n:""]}case"TSTypePredicate":return B3(i,t);case"TSNonNullExpression":return[t("expression"),"!"];case"TSImportType":return["import(",t("argument"),")",r.qualifier?[".",t("qualifier")]:"",Ag(i,e,t,r.typeArguments?"typeArguments":"typeParameters")];case"TSLiteralType":return t("literal");case"TSIndexedAccessType":return P3(i,e,t);case"TSTypeOperator":return[r.operator," ",t("typeAnnotation")];case"TSMappedType":return kG(i,e,t);case"TSMethodSignature":{let a=r.kind&&r.kind!=="method"?`${r.kind} `:"";s.push(RD(r),a,r.computed?"[":"",t("key"),r.computed?"]":"",No(i));let c=$c(i,t,e,!1,!0),h=r.returnType?"returnType":"typeAnnotation",p=r[h],g=p?lo(i,t,h):"",f=vh(r,g);return s.push(f?z(c):c),p&&s.push(z(g)),z(s)}case"TSNamespaceExportDeclaration":return["export as namespace ",t("id"),e.semi?";":""];case"TSEnumDeclaration":return D8(i,t,e);case"TSEnumMember":return b8(i,t);case"TSImportEqualsDeclaration":return[r.isExport?"export ":"","import ",p8(r,!1),t("id")," = ",t("moduleReference"),e.semi?";":""];case"TSExternalModuleReference":return["require(",t("expression"),")"];case"TSModuleDeclaration":{let{parent:a}=i,c=a.type==="TSModuleDeclaration",h=((o=r.body)==null?void 0:o.type)==="TSModuleDeclaration";return c?s.push("."):(s.push(qo(i)),r.kind!=="global"&&s.push(r.kind," ")),s.push(t("id")),h?s.push(t("body")):r.body?s.push(" ",z(t("body"))):s.push(n),s}case"TSConditionalType":return wI(i,e,t);case"TSInferType":return k3(i,e,t);case"TSIntersectionType":return A3(i,e,t);case"TSUnionType":return T3(i,e,t);case"TSFunctionType":case"TSCallSignatureDeclaration":case"TSConstructorType":case"TSConstructSignatureDeclaration":return I3(i,e,t);case"TSTupleType":return DI(i,e,t);case"TSTypeReference":return[t("typeName"),Ag(i,e,t,r.typeArguments?"typeArguments":"typeParameters")];case"TSTypeAnnotation":return M3(i,e,t);case"TSEmptyBodyFunctionExpression":return CI(i,e,t);case"TSJSDocAllType":return"*";case"TSJSDocUnknownType":return"?";case"TSJSDocNullableType":return cB(i,t,"?");case"TSJSDocNonNullableType":return cB(i,t,"!");case"TSParenthesizedType":default:throw new yh(r,"TypeScript")}}function xJ(i,e,t,o){if(h3(i))return BK(i,e);for(let r of[D$,m$,DJ,CJ,dJ]){let n=r(i,e,t,o);if(n!==void 0)return n}}var SJ=Ft(["ClassMethod","ClassPrivateMethod","ClassProperty","ClassAccessorProperty","AccessorProperty","TSAbstractAccessorProperty","PropertyDefinition","TSAbstractPropertyDefinition","ClassPrivateProperty","MethodDefinition","TSAbstractMethodDefinition","TSDeclareMethod"]);function wJ(i,e,t,o){var r;i.isRoot&&((r=e.__onHtmlBindingRoot)==null||r.call(e,i.node,e));let n=xJ(i,e,t,o);if(!n)return"";let{node:s}=i;if(SJ(s))return n;let a=Et(s.decorators),c=w$(i,e,t),h=s.type==="ClassExpression";if(a&&!h)return zT(n,f=>z([c,f]));let p=Kc(i,e),g=zG(i,e);return!c&&!p&&!g?n:zT(n,f=>[g?";":"",p?"(":"",p&&h&&a?[oe([Ce,c,f]),Ce]:[c,f],p?")":""])}var EJ=wJ,AJ={avoidAstMutation:!0},TJ=[{linguistLanguageId:174,name:"JSON.stringify",type:"data",color:"#292929",tmScope:"source.json",aceMode:"json",codemirrorMode:"javascript",codemirrorMimeType:"application/json",aliases:["geojson","jsonl","topojson"],extensions:[".importmap"],filenames:["package.json","package-lock.json","composer.json"],parsers:["json-stringify"],vscodeLanguageIds:["json"]},{linguistLanguageId:174,name:"JSON",type:"data",color:"#292929",tmScope:"source.json",aceMode:"json",codemirrorMode:"javascript",codemirrorMimeType:"application/json",aliases:["geojson","jsonl","topojson"],extensions:[".json",".4DForm",".4DProject",".avsc",".geojson",".gltf",".har",".ice",".JSON-tmLanguage",".mcmeta",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","Pipfile.lock","composer.lock","flake.lock","mcmod.info",".babelrc",".jscsrc",".jshintrc",".jslintrc",".swcrc"],parsers:["json"],vscodeLanguageIds:["json"]},{linguistLanguageId:423,name:"JSON with Comments",type:"data",color:"#292929",group:"JSON",tmScope:"source.js",aceMode:"javascript",codemirrorMode:"javascript",codemirrorMimeType:"text/javascript",aliases:["jsonc"],extensions:[".jsonc",".code-snippets",".code-workspace",".sublime-build",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[],parsers:["jsonc"],vscodeLanguageIds:["jsonc"]},{linguistLanguageId:175,name:"JSON5",type:"data",color:"#267CB9",extensions:[".json5"],tmScope:"source.js",aceMode:"javascript",codemirrorMode:"javascript",codemirrorMimeType:"application/json",parsers:["json5"],vscodeLanguageIds:["json5"]}],x8={};BD(x8,{getVisitorKeys:()=>FJ,massageAstNode:()=>S8,print:()=>LJ});var IJ={JsonRoot:["node"],ArrayExpression:["elements"],ObjectExpression:["properties"],ObjectProperty:["key","value"],UnaryExpression:["argument"],NullLiteral:[],BooleanLiteral:[],StringLiteral:[],NumericLiteral:[],Identifier:[],TemplateLiteral:["quasis"],TemplateElement:[]},PJ=IJ,kJ=DB(PJ),FJ=kJ;function LJ(i,e,t){let{node:o}=i;switch(o.type){case"JsonRoot":return[t("node"),ie];case"ArrayExpression":{if(o.elements.length===0)return"[]";let r=i.map(()=>i.node===null?"null":t(),"elements");return["[",oe([ie,Dt([",",ie],r)]),ie,"]"]}case"ObjectExpression":return o.properties.length===0?"{}":["{",oe([ie,Dt([",",ie],i.map(t,"properties"))]),ie,"}"];case"ObjectProperty":return[t("key"),": ",t("value")];case"UnaryExpression":return[o.operator==="+"?"":o.operator,t("argument")];case"NullLiteral":return"null";case"BooleanLiteral":return o.value?"true":"false";case"StringLiteral":return JSON.stringify(o.value);case"NumericLiteral":return mB(i)?JSON.stringify(String(o.value)):JSON.stringify(o.value);case"Identifier":return mB(i)?JSON.stringify(o.name):o.name;case"TemplateLiteral":return t(["quasis",0]);case"TemplateElement":return JSON.stringify(o.value.cooked);default:throw new yh(o,"JSON")}}function mB(i){return i.key==="key"&&i.parent.type==="ObjectProperty"}var NJ=new Set(["start","end","extra","loc","comments","leadingComments","trailingComments","innerComments","errors","range","tokens"]);function S8(i,e){let{type:t}=i;if(t==="ObjectProperty"){let{key:o}=i;o.type==="Identifier"?e.key={type:"StringLiteral",value:o.name}:o.type==="NumericLiteral"&&(e.key={type:"StringLiteral",value:String(o.value)});return}if(t==="UnaryExpression"&&i.operator==="+")return e.argument;if(t==="ArrayExpression"){for(let[o,r]of i.elements.entries())r===null&&e.elements.splice(o,0,{type:"NullLiteral"});return}if(t==="TemplateLiteral")return{type:"StringLiteral",value:i.quasis[0].value.cooked}}S8.ignoredProperties=NJ;var xg={bracketSpacing:{category:"Common",type:"boolean",default:!0,description:"Print spaces between brackets.",oppositeDescription:"Do not print spaces between brackets."},objectWrap:{category:"Common",type:"choice",default:"preserve",description:"How to wrap object literals.",choices:[{value:"preserve",description:"Keep as multi-line, if there is a newline between the opening brace and first property."},{value:"collapse",description:"Fit to a single line when possible."}]},singleQuote:{category:"Common",type:"boolean",default:!1,description:"Use single quotes instead of double quotes."},proseWrap:{category:"Common",type:"choice",default:"preserve",description:"How to wrap prose.",choices:[{value:"always",description:"Wrap prose if it exceeds the print width."},{value:"never",description:"Do not wrap prose."},{value:"preserve",description:"Wrap prose as-is."}]},bracketSameLine:{category:"Common",type:"boolean",default:!1,description:"Put > of opening tags on the last line instead of on a new line."},singleAttributePerLine:{category:"Common",type:"boolean",default:!1,description:"Enforce single attribute per line in HTML, Vue and JSX."}},fl="JavaScript",MJ={arrowParens:{category:fl,type:"choice",default:"always",description:"Include parentheses around a sole arrow function parameter.",choices:[{value:"always",description:"Always include parens. Example: `(x) => x`"},{value:"avoid",description:"Omit parens when possible. Example: `x => x`"}]},bracketSameLine:xg.bracketSameLine,objectWrap:xg.objectWrap,bracketSpacing:xg.bracketSpacing,jsxBracketSameLine:{category:fl,type:"boolean",description:"Put > on the last line instead of at a new line.",deprecated:"2.4.0"},semi:{category:fl,type:"boolean",default:!0,description:"Print semicolons.",oppositeDescription:"Do not print semicolons, except at the beginning of lines which may need them."},experimentalOperatorPosition:{category:fl,type:"choice",default:"end",description:"Where to print operators when binary expressions wrap lines.",choices:[{value:"start",description:"Print operators at the start of new lines."},{value:"end",description:"Print operators at the end of previous lines."}]},experimentalTernaries:{category:fl,type:"boolean",default:!1,description:"Use curious ternaries, with the question mark after the condition.",oppositeDescription:"Default behavior of ternaries; keep question marks on the same line as the consequent."},singleQuote:xg.singleQuote,jsxSingleQuote:{category:fl,type:"boolean",default:!1,description:"Use single quotes in JSX."},quoteProps:{category:fl,type:"choice",default:"as-needed",description:"Change when properties in objects are quoted.",choices:[{value:"as-needed",description:"Only add quotes around object properties where required."},{value:"consistent",description:"If at least one property in an object requires quotes, quote all properties."},{value:"preserve",description:"Respect the input use of quotes in object properties."}]},trailingComma:{category:fl,type:"choice",default:"all",description:"Print trailing commas wherever possible when multi-line.",choices:[{value:"all",description:"Trailing commas wherever possible (including function arguments)."},{value:"es5",description:"Trailing commas where valid in ES5 (objects, arrays, etc.)"},{value:"none",description:"No trailing commas."}]},singleAttributePerLine:xg.singleAttributePerLine},w8=MJ,E8={estree:yB,"estree-json":x8},A8=[...PV,...TJ],OJ=_B;var BJ=Object.create,UI=Object.defineProperty,WJ=Object.getOwnPropertyDescriptor,HJ=Object.getOwnPropertyNames,jJ=Object.getPrototypeOf,zJ=Object.prototype.hasOwnProperty,n4=i=>{throw TypeError(i)},s4=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),qI=(i,e)=>{for(var t in e)UI(i,t,{get:e[t],enumerable:!0})},VJ=(i,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of HJ(e))!zJ.call(i,r)&&r!==t&&UI(i,r,{get:()=>e[r],enumerable:!(o=WJ(e,r))||o.enumerable});return i},oC=(i,e,t)=>(t=i!=null?BJ(jJ(i)):{},VJ(e||!i||!i.__esModule?UI(t,"default",{value:i,enumerable:!0}):t,i)),UJ=(i,e,t)=>e.has(i)||n4("Cannot "+t),qJ=(i,e,t)=>e.has(i)?n4("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),Mg=(i,e,t)=>(UJ(i,e,"access private method"),t),KI=s4((i,e)=>{"use strict";var t=new Proxy(String,{get:()=>t});e.exports=t}),KJ=s4(i=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});function e(){return new Proxy({},{get:()=>n=>n})}var t=/\r\n|[\n\r\u2028\u2029]/;function o(n,s,a){let c=Object.assign({column:0,line:-1},n.start),h=Object.assign({},c,n.end),{linesAbove:p=2,linesBelow:g=3}=a||{},f=c.line,_=c.column,y=h.line,C=h.column,x=Math.max(f-(p+1),0),D=Math.min(s.length,y+g);f===-1&&(x=0),y===-1&&(D=s.length);let E=y-f,I={};if(E)for(let k=0;k<=E;k++){let N=k+f;if(!_)I[N]=!0;else if(k===0){let O=s[N-1].length;I[N]=[_,O-_+1]}else if(k===E)I[N]=[0,C];else{let O=s[N-k].length;I[N]=[0,O]}}else _===C?_?I[f]=[_,0]:I[f]=!0:I[f]=[_,C-_];return{start:x,end:D,markerLines:I}}function r(n,s,a={}){let c=e(!1),h=n.split(t),{start:p,end:g,markerLines:f}=o(s,h,a),_=s.start&&typeof s.start.column=="number",y=String(g).length,C=n.split(t,g).slice(p,g).map((x,D)=>{let E=p+1+D,I=` ${` ${E}`.slice(-y)} |`,k=f[E],N=!f[E+1];if(k){let O="";if(Array.isArray(k)){let V=x.slice(0,Math.max(k[0]-1,0)).replace(/[^\t]/g," "),K=k[1]||1;O=[`
 `,c.gutter(I.replace(/\d/g," "))," ",V,c.marker("^").repeat(K)].join(""),N&&a.message&&(O+=" "+c.message(a.message))}return[c.marker(">"),c.gutter(I),x.length>0?` ${x}`:"",O].join("")}else return` ${c.gutter(I)}${x.length>0?` ${x}`:""}`}).join(`
`);return a.message&&!_&&(C=`${" ".repeat(y+1)}${a.message}
${C}`),C}i.codeFrameColumns=r}),$J={};qI($J,{__debug:()=>tZ,check:()=>ZQ,doc:()=>z4,format:()=>q4,formatWithCursor:()=>U4,getSupportInfo:()=>eZ,util:()=>V4,version:()=>AQ});var GJ=(i,e,t,o)=>{if(!(i&&e==null))return e.replaceAll?e.replaceAll(t,o):t.global?e.replace(t,o):e.split(t).join(o)},rC=GJ;function cn(){}cn.prototype={diff:function(i,e){var t,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=o.callback;typeof o=="function"&&(r=o,o={});var n=this;function s(I){return I=n.postProcess(I,o),r?(setTimeout(function(){r(I)},0),!0):I}i=this.castInput(i,o),e=this.castInput(e,o),i=this.removeEmpty(this.tokenize(i,o)),e=this.removeEmpty(this.tokenize(e,o));var a=e.length,c=i.length,h=1,p=a+c;o.maxEditLength!=null&&(p=Math.min(p,o.maxEditLength));var g=(t=o.timeout)!==null&&t!==void 0?t:1/0,f=Date.now()+g,_=[{oldPos:-1,lastComponent:void 0}],y=this.extractCommon(_[0],e,i,0,o);if(_[0].oldPos+1>=c&&y+1>=a)return s(T8(n,_[0].lastComponent,e,i,n.useLongestToken));var C=-1/0,x=1/0;function D(){for(var I=Math.max(C,-h);I<=Math.min(x,h);I+=2){var k=void 0,N=_[I-1],O=_[I+1];N&&(_[I-1]=void 0);var V=!1;if(O){var K=O.oldPos-I;V=O&&0<=K&&K<a}var $=N&&N.oldPos+1<c;if(!V&&!$){_[I]=void 0;continue}if(!$||V&&N.oldPos<O.oldPos?k=n.addToPath(O,!0,!1,0,o):k=n.addToPath(N,!1,!0,1,o),y=n.extractCommon(k,e,i,I,o),k.oldPos+1>=c&&y+1>=a)return s(T8(n,k.lastComponent,e,i,n.useLongestToken));_[I]=k,k.oldPos+1>=c&&(x=Math.min(x,I-1)),y+1>=a&&(C=Math.max(C,I+1))}h++}if(r)(function I(){setTimeout(function(){if(h>p||Date.now()>f)return r();D()||I()},0)})();else for(;h<=p&&Date.now()<=f;){var E=D();if(E)return E}},addToPath:function(i,e,t,o,r){var n=i.lastComponent;return n&&!r.oneChangePerToken&&n.added===e&&n.removed===t?{oldPos:i.oldPos+o,lastComponent:{count:n.count+1,added:e,removed:t,previousComponent:n.previousComponent}}:{oldPos:i.oldPos+o,lastComponent:{count:1,added:e,removed:t,previousComponent:n}}},extractCommon:function(i,e,t,o,r){for(var n=e.length,s=t.length,a=i.oldPos,c=a-o,h=0;c+1<n&&a+1<s&&this.equals(t[a+1],e[c+1],r);)c++,a++,h++,r.oneChangePerToken&&(i.lastComponent={count:1,previousComponent:i.lastComponent,added:!1,removed:!1});return h&&!r.oneChangePerToken&&(i.lastComponent={count:h,previousComponent:i.lastComponent,added:!1,removed:!1}),i.oldPos=a,c},equals:function(i,e,t){return t.comparator?t.comparator(i,e):i===e||t.ignoreCase&&i.toLowerCase()===e.toLowerCase()},removeEmpty:function(i){for(var e=[],t=0;t<i.length;t++)i[t]&&e.push(i[t]);return e},castInput:function(i){return i},tokenize:function(i){return Array.from(i)},join:function(i){return i.join("")},postProcess:function(i){return i}};function T8(i,e,t,o,r){for(var n=[],s;e;)n.push(e),s=e.previousComponent,delete e.previousComponent,e=s;n.reverse();for(var a=0,c=n.length,h=0,p=0;a<c;a++){var g=n[a];if(g.removed)g.value=i.join(o.slice(p,p+g.count)),p+=g.count;else{if(!g.added&&r){var f=t.slice(h,h+g.count);f=f.map(function(_,y){var C=o[p+y];return C.length>_.length?C:_}),g.value=i.join(f)}else g.value=i.join(t.slice(h,h+g.count));h+=g.count,g.added||(p+=g.count)}}return n}var gVe=new cn;function I8(i,e){var t;for(t=0;t<i.length&&t<e.length;t++)if(i[t]!=e[t])return i.slice(0,t);return i.slice(0,t)}function P8(i,e){var t;if(!i||!e||i[i.length-1]!=e[e.length-1])return"";for(t=0;t<i.length&&t<e.length;t++)if(i[i.length-(t+1)]!=e[e.length-(t+1)])return i.slice(-t);return i.slice(-t)}function FI(i,e,t){if(i.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(i)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return t+i.slice(e.length)}function LI(i,e,t){if(!e)return i+t;if(i.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(i)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return i.slice(0,-e.length)+t}function Og(i,e){return FI(i,e,"")}function GD(i,e){return LI(i,e,"")}function k8(i,e){return e.slice(0,JJ(i,e))}function JJ(i,e){var t=0;i.length>e.length&&(t=i.length-e.length);var o=e.length;i.length<e.length&&(o=i.length);var r=Array(o),n=0;r[0]=0;for(var s=1;s<o;s++){for(e[s]==e[n]?r[s]=r[n]:r[s]=n;n>0&&e[s]!=e[n];)n=r[n];e[s]==e[n]&&n++}n=0;for(var a=t;a<i.length;a++){for(;n>0&&i[a]!=e[n];)n=r[n];i[a]==e[n]&&n++}return n}var eC="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",XJ=new RegExp("[".concat(eC,"]+|\\s+|[^").concat(eC,"]"),"ug"),nC=new cn;nC.equals=function(i,e,t){return t.ignoreCase&&(i=i.toLowerCase(),e=e.toLowerCase()),i.trim()===e.trim()};nC.tokenize=function(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');t=Array.from(e.intlSegmenter.segment(i),function(n){return n.segment})}else t=i.match(XJ)||[];var o=[],r=null;return t.forEach(function(n){/\s/.test(n)?r==null?o.push(n):o.push(o.pop()+n):/\s/.test(r)?o[o.length-1]==r?o.push(o.pop()+n):o.push(r+n):o.push(n),r=n}),o};nC.join=function(i){return i.map(function(e,t){return t==0?e:e.replace(/^\s+/,"")}).join("")};nC.postProcess=function(i,e){if(!i||e.oneChangePerToken)return i;var t=null,o=null,r=null;return i.forEach(function(n){n.added?o=n:n.removed?r=n:((o||r)&&F8(t,r,o,n),t=n,o=null,r=null)}),(o||r)&&F8(t,r,o,null),i};function F8(i,e,t,o){if(e&&t){var r=e.value.match(/^\s*/)[0],n=e.value.match(/\s*$/)[0],s=t.value.match(/^\s*/)[0],a=t.value.match(/\s*$/)[0];if(i){var c=I8(r,s);i.value=LI(i.value,s,c),e.value=Og(e.value,c),t.value=Og(t.value,c)}if(o){var h=P8(n,a);o.value=FI(o.value,a,h),e.value=GD(e.value,h),t.value=GD(t.value,h)}}else if(t)i&&(t.value=t.value.replace(/^\s*/,"")),o&&(o.value=o.value.replace(/^\s*/,""));else if(i&&o){var p=o.value.match(/^\s*/)[0],g=e.value.match(/^\s*/)[0],f=e.value.match(/\s*$/)[0],_=I8(p,g);e.value=Og(e.value,_);var y=P8(Og(p,_),f);e.value=GD(e.value,y),o.value=FI(o.value,p,y),i.value=LI(i.value,p,p.slice(0,p.length-y.length))}else if(o){var C=o.value.match(/^\s*/)[0],x=e.value.match(/\s*$/)[0],D=k8(x,C);e.value=GD(e.value,D)}else if(i){var E=i.value.match(/\s*$/)[0],I=e.value.match(/^\s*/)[0],k=k8(E,I);e.value=Og(e.value,k)}}var YJ=new cn;YJ.tokenize=function(i){var e=new RegExp("(\\r?\\n)|[".concat(eC,"]+|[^\\S\\n\\r]+|[^").concat(eC,"]"),"ug");return i.match(e)||[]};var $I=new cn;$I.tokenize=function(i,e){e.stripTrailingCr&&(i=i.replace(/\r\n/g,`
`));var t=[],o=i.split(/(\n|\r\n)/);o[o.length-1]||o.pop();for(var r=0;r<o.length;r++){var n=o[r];r%2&&!e.newlineIsToken?t[t.length-1]+=n:t.push(n)}return t};$I.equals=function(i,e,t){return t.ignoreWhitespace?((!t.newlineIsToken||!i.includes(`
`))&&(i=i.trim()),(!t.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):t.ignoreNewlineAtEof&&!t.newlineIsToken&&(i.endsWith(`
`)&&(i=i.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),cn.prototype.equals.call(this,i,e,t)};var QJ=new cn;QJ.tokenize=function(i){return i.split(/(\S.+?[.!?])(?=\s+|$)/)};var ZJ=new cn;ZJ.tokenize=function(i){return i.split(/([{}:;,]|\s+)/)};function NI(i){"@babel/helpers - typeof";return NI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NI(i)}var Bg=new cn;Bg.useLongestToken=!0;Bg.tokenize=$I.tokenize;Bg.castInput=function(i,e){var t=e.undefinedReplacement,o=e.stringifyReplacer,r=o===void 0?function(n,s){return typeof s>"u"?t:s}:o;return typeof i=="string"?i:JSON.stringify(MI(i,null,null,r),r,"  ")};Bg.equals=function(i,e,t){return cn.prototype.equals.call(Bg,i.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),t)};function MI(i,e,t,o,r){e=e||[],t=t||[],o&&(i=o(r,i));var n;for(n=0;n<e.length;n+=1)if(e[n]===i)return t[n];var s;if(Object.prototype.toString.call(i)==="[object Array]"){for(e.push(i),s=new Array(i.length),t.push(s),n=0;n<i.length;n+=1)s[n]=MI(i[n],e,t,o,r);return e.pop(),t.pop(),s}if(i&&i.toJSON&&(i=i.toJSON()),NI(i)==="object"&&i!==null){e.push(i),s={},t.push(s);var a=[],c;for(c in i)Object.prototype.hasOwnProperty.call(i,c)&&a.push(c);for(a.sort(),n=0;n<a.length;n+=1)c=a[n],s[c]=MI(i[c],e,t,o,c);e.pop(),t.pop()}else s=i;return s}var tC=new cn;tC.tokenize=function(i){return i.slice()};tC.join=tC.removeEmpty=function(i){return i};function eX(i,e,t){return tC.diff(i,e,t)}function tX(i){let e=i.indexOf("\r");return e!==-1?i.charAt(e+1)===`
`?"crlf":"cr":"lf"}function GI(i){switch(i){case"cr":return"\r";case"crlf":return`\r
`;default:return`
`}}function a4(i,e){let t;switch(e){case`
`:t=/\n/gu;break;case"\r":t=/\r/gu;break;case`\r
`:t=/\r\n/gu;break;default:throw new Error(`Unexpected "eol" ${JSON.stringify(e)}.`)}let o=i.match(t);return o?o.length:0}function iX(i){return rC(!1,i,/\r\n?/gu,`
`)}var ed="string",ca="array",td="cursor",da="indent",ua="align",ha="trim",Go="group",ns="fill",ur="if-break",pa="indent-if-break",ma="line-suffix",ga="line-suffix-boundary",ho="line",ss="label",Fr="break-parent",l4=new Set([td,da,ua,ha,Go,ns,ur,pa,ma,ga,ho,ss,Fr]),oX=(i,e,t)=>{if(!(i&&e==null))return Array.isArray(e)||typeof e=="string"?e[t<0?e.length+t:t]:e.at(t)},Ji=oX;function rX(i){if(typeof i=="string")return ed;if(Array.isArray(i))return ca;if(!i)return;let{type:e}=i;if(l4.has(e))return e}var id=rX,nX=i=>new Intl.ListFormat("en-US",{type:"disjunction"}).format(i);function sX(i){let e=i===null?"null":typeof i;if(e!=="string"&&e!=="object")return`Unexpected doc '${e}', 
Expected it to be 'string' or 'object'.`;if(id(i))throw new Error("doc is valid.");let t=Object.prototype.toString.call(i);if(t!=="[object Object]")return`Unexpected doc '${t}'.`;let o=nX([...l4].map(r=>`'${r}'`));return`Unexpected doc.type '${i.type}'.
Expected it to be ${o}.`}var aX=class extends Error{name="InvalidDocError";constructor(i){super(sX(i)),this.doc=i}},wh=aX,L8={};function lX(i,e,t,o){let r=[i];for(;r.length>0;){let n=r.pop();if(n===L8){t(r.pop());continue}t&&r.push(n,L8);let s=id(n);if(!s)throw new wh(n);if(e?.(n)!==!1)switch(s){case ca:case ns:{let a=s===ca?n:n.parts;for(let c=a.length,h=c-1;h>=0;--h)r.push(a[h]);break}case ur:r.push(n.flatContents,n.breakContents);break;case Go:if(o&&n.expandedStates)for(let a=n.expandedStates.length,c=a-1;c>=0;--c)r.push(n.expandedStates[c]);else r.push(n.contents);break;case ua:case da:case pa:case ss:case ma:r.push(n.contents);break;case ed:case td:case ha:case ga:case ho:case Fr:break;default:throw new wh(n)}}}var JI=lX;function sC(i,e){if(typeof i=="string")return e(i);let t=new Map;return o(i);function o(n){if(t.has(n))return t.get(n);let s=r(n);return t.set(n,s),s}function r(n){switch(id(n)){case ca:return e(n.map(o));case ns:return e(he(U({},n),{parts:n.parts.map(o)}));case ur:return e(he(U({},n),{breakContents:o(n.breakContents),flatContents:o(n.flatContents)}));case Go:{let{expandedStates:s,contents:a}=n;return s?(s=s.map(o),a=s[0]):a=o(a),e(he(U({},n),{contents:a,expandedStates:s}))}case ua:case da:case pa:case ss:case ma:return e(he(U({},n),{contents:o(n.contents)}));case ed:case td:case ha:case ga:case ho:case Fr:return e(n);default:throw new wh(n)}}}function XI(i,e,t){let o=t,r=!1;function n(s){if(r)return!1;let a=e(s);a!==void 0&&(r=!0,o=a)}return JI(i,n),o}function cX(i){if(i.type===Go&&i.break||i.type===ho&&i.hard||i.type===Fr)return!0}function dX(i){return XI(i,cX,!1)}function N8(i){if(i.length>0){let e=Ji(!1,i,-1);!e.expandedStates&&!e.break&&(e.break="propagated")}return null}function uX(i){let e=new Set,t=[];function o(n){if(n.type===Fr&&N8(t),n.type===Go){if(t.push(n),e.has(n))return!1;e.add(n)}}function r(n){n.type===Go&&t.pop().break&&N8(t)}JI(i,o,r,!0)}function hX(i){return i.type===ho&&!i.hard?i.soft?"":" ":i.type===ur?i.flatContents:i}function pX(i){return sC(i,hX)}function M8(i){for(i=[...i];i.length>=2&&Ji(!1,i,-2).type===ho&&Ji(!1,i,-1).type===Fr;)i.length-=2;if(i.length>0){let e=Rg(Ji(!1,i,-1));i[i.length-1]=e}return i}function Rg(i){switch(id(i)){case da:case pa:case Go:case ma:case ss:{let e=Rg(i.contents);return he(U({},i),{contents:e})}case ur:return he(U({},i),{breakContents:Rg(i.breakContents),flatContents:Rg(i.flatContents)});case ns:return he(U({},i),{parts:M8(i.parts)});case ca:return M8(i);case ed:return i.replace(/[\n\r]*$/u,"");case ua:case td:case ha:case ga:case ho:case Fr:break;default:throw new wh(i)}return i}function c4(i){return Rg(gX(i))}function mX(i){switch(id(i)){case ns:if(i.parts.every(e=>e===""))return"";break;case Go:if(!i.contents&&!i.id&&!i.break&&!i.expandedStates)return"";if(i.contents.type===Go&&i.contents.id===i.id&&i.contents.break===i.break&&i.contents.expandedStates===i.expandedStates)return i.contents;break;case ua:case da:case pa:case ma:if(!i.contents)return"";break;case ur:if(!i.flatContents&&!i.breakContents)return"";break;case ca:{let e=[];for(let t of i){if(!t)continue;let[o,...r]=Array.isArray(t)?t:[t];typeof o=="string"&&typeof Ji(!1,e,-1)=="string"?e[e.length-1]+=o:e.push(o),e.push(...r)}return e.length===0?"":e.length===1?e[0]:e}case ed:case td:case ha:case ga:case ho:case ss:case Fr:break;default:throw new wh(i)}return i}function gX(i){return sC(i,e=>mX(e))}function fX(i,e=m4){return sC(i,t=>typeof t=="string"?g4(e,t.split(`
`)):t)}function _X(i){if(i.type===ho)return!0}function yX(i){return XI(i,_X,!1)}function YD(i,e){return i.type===ss?he(U({},i),{contents:e(i.contents)}):e(i)}var YI=()=>{},rs=YI,d4=YI,vX=YI;function iC(i){return rs(i),{type:da,contents:i}}function Eh(i,e){return rs(e),{type:ua,contents:e,n:i}}function u4(i,e={}){return rs(i),d4(e.expandedStates,!0),{type:Go,id:e.id,contents:i,break:!!e.shouldBreak,expandedStates:e.expandedStates}}function bX(i){return Eh(Number.NEGATIVE_INFINITY,i)}function DX(i){return Eh({type:"root"},i)}function CX(i){return Eh(-1,i)}function xX(i,e){return u4(i[0],he(U({},e),{expandedStates:i}))}function SX(i){return vX(i),{type:ns,parts:i}}function wX(i,e="",t={}){return rs(i),e!==""&&rs(e),{type:ur,breakContents:i,flatContents:e,groupId:t.groupId}}function EX(i,e){return rs(i),{type:pa,contents:i,groupId:e.groupId,negate:e.negate}}function OI(i){return rs(i),{type:ma,contents:i}}var AX={type:ga},aC={type:Fr},TX={type:ha},QI={type:ho,hard:!0},h4={type:ho,hard:!0,literal:!0},p4={type:ho},IX={type:ho,soft:!0},Qc=[QI,aC],m4=[h4,aC],Yc={type:td};function g4(i,e){rs(i),d4(e);let t=[];for(let o=0;o<e.length;o++)o!==0&&t.push(i),t.push(e[o]);return t}function f4(i,e,t){rs(i);let o=i;if(e>0){for(let r=0;r<Math.floor(e/t);++r)o=iC(o);o=Eh(e%t,o),o=Eh(Number.NEGATIVE_INFINITY,o)}return o}function PX(i,e){return rs(e),i?{type:ss,label:i,contents:e}:e}function la(i){var e;if(!i)return"";if(Array.isArray(i)){let t=[];for(let o of i)if(Array.isArray(o))t.push(...la(o));else{let r=la(o);r!==""&&t.push(r)}return t}return i.type===ur?he(U({},i),{breakContents:la(i.breakContents),flatContents:la(i.flatContents)}):i.type===Go?he(U({},i),{contents:la(i.contents),expandedStates:(e=i.expandedStates)==null?void 0:e.map(la)}):i.type===ns?{type:"fill",parts:i.parts.map(la)}:i.contents?he(U({},i),{contents:la(i.contents)}):i}function kX(i){let e=Object.create(null),t=new Set;return o(la(i));function o(n,s,a){var c,h;if(typeof n=="string")return JSON.stringify(n);if(Array.isArray(n)){let p=n.map(o).filter(Boolean);return p.length===1?p[0]:`[${p.join(", ")}]`}if(n.type===ho){let p=((c=a?.[s+1])==null?void 0:c.type)===Fr;return n.literal?p?"literalline":"literallineWithoutBreakParent":n.hard?p?"hardline":"hardlineWithoutBreakParent":n.soft?"softline":"line"}if(n.type===Fr)return((h=a?.[s-1])==null?void 0:h.type)===ho&&a[s-1].hard?void 0:"breakParent";if(n.type===ha)return"trim";if(n.type===da)return"indent("+o(n.contents)+")";if(n.type===ua)return n.n===Number.NEGATIVE_INFINITY?"dedentToRoot("+o(n.contents)+")":n.n<0?"dedent("+o(n.contents)+")":n.n.type==="root"?"markAsRoot("+o(n.contents)+")":"align("+JSON.stringify(n.n)+", "+o(n.contents)+")";if(n.type===ur)return"ifBreak("+o(n.breakContents)+(n.flatContents?", "+o(n.flatContents):"")+(n.groupId?(n.flatContents?"":', ""')+`, { groupId: ${r(n.groupId)} }`:"")+")";if(n.type===pa){let p=[];n.negate&&p.push("negate: true"),n.groupId&&p.push(`groupId: ${r(n.groupId)}`);let g=p.length>0?`, { ${p.join(", ")} }`:"";return`indentIfBreak(${o(n.contents)}${g})`}if(n.type===Go){let p=[];n.break&&n.break!=="propagated"&&p.push("shouldBreak: true"),n.id&&p.push(`id: ${r(n.id)}`);let g=p.length>0?`, { ${p.join(", ")} }`:"";return n.expandedStates?`conditionalGroup([${n.expandedStates.map(f=>o(f)).join(",")}]${g})`:`group(${o(n.contents)}${g})`}if(n.type===ns)return`fill([${n.parts.map(p=>o(p)).join(", ")}])`;if(n.type===ma)return"lineSuffix("+o(n.contents)+")";if(n.type===ga)return"lineSuffixBoundary";if(n.type===ss)return`label(${JSON.stringify(n.label)}, ${o(n.contents)})`;throw new Error("Unknown doc type "+n.type)}function r(n){if(typeof n!="symbol")return JSON.stringify(String(n));if(n in e)return e[n];let s=n.description||"symbol";for(let a=0;;a++){let c=s+(a>0?` #${a}`:"");if(!t.has(c))return t.add(c),e[n]=`Symbol.for(${JSON.stringify(c)})`}}}var FX=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC2\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g;function LX(i){return i===12288||i>=65281&&i<=65376||i>=65504&&i<=65510}function NX(i){return i>=4352&&i<=4447||i===8986||i===8987||i===9001||i===9002||i>=9193&&i<=9196||i===9200||i===9203||i===9725||i===9726||i===9748||i===9749||i>=9776&&i<=9783||i>=9800&&i<=9811||i===9855||i>=9866&&i<=9871||i===9875||i===9889||i===9898||i===9899||i===9917||i===9918||i===9924||i===9925||i===9934||i===9940||i===9962||i===9970||i===9971||i===9973||i===9978||i===9981||i===9989||i===9994||i===9995||i===10024||i===10060||i===10062||i>=10067&&i<=10069||i===10071||i>=10133&&i<=10135||i===10160||i===10175||i===11035||i===11036||i===11088||i===11093||i>=11904&&i<=11929||i>=11931&&i<=12019||i>=12032&&i<=12245||i>=12272&&i<=12287||i>=12289&&i<=12350||i>=12353&&i<=12438||i>=12441&&i<=12543||i>=12549&&i<=12591||i>=12593&&i<=12686||i>=12688&&i<=12773||i>=12783&&i<=12830||i>=12832&&i<=12871||i>=12880&&i<=42124||i>=42128&&i<=42182||i>=43360&&i<=43388||i>=44032&&i<=55203||i>=63744&&i<=64255||i>=65040&&i<=65049||i>=65072&&i<=65106||i>=65108&&i<=65126||i>=65128&&i<=65131||i>=94176&&i<=94180||i===94192||i===94193||i>=94208&&i<=100343||i>=100352&&i<=101589||i>=101631&&i<=101640||i>=110576&&i<=110579||i>=110581&&i<=110587||i===110589||i===110590||i>=110592&&i<=110882||i===110898||i>=110928&&i<=110930||i===110933||i>=110948&&i<=110951||i>=110960&&i<=111355||i>=119552&&i<=119638||i>=119648&&i<=119670||i===126980||i===127183||i===127374||i>=127377&&i<=127386||i>=127488&&i<=127490||i>=127504&&i<=127547||i>=127552&&i<=127560||i===127568||i===127569||i>=127584&&i<=127589||i>=127744&&i<=127776||i>=127789&&i<=127797||i>=127799&&i<=127868||i>=127870&&i<=127891||i>=127904&&i<=127946||i>=127951&&i<=127955||i>=127968&&i<=127984||i===127988||i>=127992&&i<=128062||i===128064||i>=128066&&i<=128252||i>=128255&&i<=128317||i>=128331&&i<=128334||i>=128336&&i<=128359||i===128378||i===128405||i===128406||i===128420||i>=128507&&i<=128591||i>=128640&&i<=128709||i===128716||i>=128720&&i<=128722||i>=128725&&i<=128727||i>=128732&&i<=128735||i===128747||i===128748||i>=128756&&i<=128764||i>=128992&&i<=129003||i===129008||i>=129292&&i<=129338||i>=129340&&i<=129349||i>=129351&&i<=129535||i>=129648&&i<=129660||i>=129664&&i<=129673||i>=129679&&i<=129734||i>=129742&&i<=129756||i>=129759&&i<=129769||i>=129776&&i<=129784||i>=131072&&i<=196605||i>=196608&&i<=262141}var MX=i=>!(LX(i)||NX(i)),OX=/[^\x20-\x7F]/u;function RX(i){if(!i)return 0;if(!OX.test(i))return i.length;i=i.replace(FX(),"  ");let e=0;for(let t of i){let o=t.codePointAt(0);o<=31||o>=127&&o<=159||o>=768&&o<=879||(e+=MX(o)?1:2)}return e}var ZI=RX,$o=Symbol("MODE_BREAK"),os=Symbol("MODE_FLAT"),bh=Symbol("cursor"),RI=Symbol("DOC_FILL_PRINTED_LENGTH");function _4(){return{value:"",length:0,queue:[]}}function BX(i,e){return BI(i,{type:"indent"},e)}function WX(i,e,t){return e===Number.NEGATIVE_INFINITY?i.root||_4():e<0?BI(i,{type:"dedent"},t):e?e.type==="root"?he(U({},i),{root:i}):BI(i,{type:typeof e=="string"?"stringAlign":"numberAlign",n:e},t):i}function BI(i,e,t){let o=e.type==="dedent"?i.queue.slice(0,-1):[...i.queue,e],r="",n=0,s=0,a=0;for(let y of o)switch(y.type){case"indent":p(),t.useTabs?c(1):h(t.tabWidth);break;case"stringAlign":p(),r+=y.n,n+=y.n.length;break;case"numberAlign":s+=1,a+=y.n;break;default:throw new Error(`Unexpected type '${y.type}'`)}return f(),he(U({},i),{value:r,length:n,queue:o});function c(y){r+="	".repeat(y),n+=t.tabWidth*y}function h(y){r+=" ".repeat(y),n+=y}function p(){t.useTabs?g():f()}function g(){s>0&&c(s),_()}function f(){a>0&&h(a),_()}function _(){s=0,a=0}}function WI(i){let e=0,t=0,o=i.length;e:for(;o--;){let r=i[o];if(r===bh){t++;continue}for(let n=r.length-1;n>=0;n--){let s=r[n];if(s===" "||s==="	")e++;else{i[o]=r.slice(0,n+1);break e}}}if(e>0||t>0)for(i.length=o+1;t-- >0;)i.push(bh);return e}function JD(i,e,t,o,r,n){if(t===Number.POSITIVE_INFINITY)return!0;let s=e.length,a=[i],c=[];for(;t>=0;){if(a.length===0){if(s===0)return!0;a.push(e[--s]);continue}let{mode:h,doc:p}=a.pop(),g=id(p);switch(g){case ed:c.push(p),t-=ZI(p);break;case ca:case ns:{let f=g===ca?p:p.parts,_=p[RI]??0;for(let y=f.length-1;y>=_;y--)a.push({mode:h,doc:f[y]});break}case da:case ua:case pa:case ss:a.push({mode:h,doc:p.contents});break;case ha:t+=WI(c);break;case Go:{if(n&&p.break)return!1;let f=p.break?$o:h,_=p.expandedStates&&f===$o?Ji(!1,p.expandedStates,-1):p.contents;a.push({mode:f,doc:_});break}case ur:{let f=(p.groupId?r[p.groupId]||os:h)===$o?p.breakContents:p.flatContents;f&&a.push({mode:h,doc:f});break}case ho:if(h===$o||p.hard)return!0;p.soft||(c.push(" "),t--);break;case ma:o=!0;break;case ga:if(o)return!1;break}}return!1}function lC(i,e){let t={},o=e.printWidth,r=GI(e.endOfLine),n=0,s=[{ind:_4(),mode:$o,doc:i}],a=[],c=!1,h=[],p=0;for(uX(i);s.length>0;){let{ind:f,mode:_,doc:y}=s.pop();switch(id(y)){case ed:{let C=r!==`
`?rC(!1,y,`
`,r):y;a.push(C),s.length>0&&(n+=ZI(C));break}case ca:for(let C=y.length-1;C>=0;C--)s.push({ind:f,mode:_,doc:y[C]});break;case td:if(p>=2)throw new Error("There are too many 'cursor' in doc.");a.push(bh),p++;break;case da:s.push({ind:BX(f,e),mode:_,doc:y.contents});break;case ua:s.push({ind:WX(f,y.n,e),mode:_,doc:y.contents});break;case ha:n-=WI(a);break;case Go:switch(_){case os:if(!c){s.push({ind:f,mode:y.break?$o:os,doc:y.contents});break}case $o:{c=!1;let C={ind:f,mode:os,doc:y.contents},x=o-n,D=h.length>0;if(!y.break&&JD(C,s,x,D,t))s.push(C);else if(y.expandedStates){let E=Ji(!1,y.expandedStates,-1);if(y.break){s.push({ind:f,mode:$o,doc:E});break}else for(let I=1;I<y.expandedStates.length+1;I++)if(I>=y.expandedStates.length){s.push({ind:f,mode:$o,doc:E});break}else{let k=y.expandedStates[I],N={ind:f,mode:os,doc:k};if(JD(N,s,x,D,t)){s.push(N);break}}}else s.push({ind:f,mode:$o,doc:y.contents});break}}y.id&&(t[y.id]=Ji(!1,s,-1).mode);break;case ns:{let C=o-n,x=y[RI]??0,{parts:D}=y,E=D.length-x;if(E===0)break;let I=D[x+0],k=D[x+1],N={ind:f,mode:os,doc:I},O={ind:f,mode:$o,doc:I},V=JD(N,[],C,h.length>0,t,!0);if(E===1){V?s.push(N):s.push(O);break}let K={ind:f,mode:os,doc:k},$={ind:f,mode:$o,doc:k};if(E===2){V?s.push(K,N):s.push($,O);break}let ae=D[x+2],q={ind:f,mode:_,doc:he(U({},y),{[RI]:x+2})};JD({ind:f,mode:os,doc:[I,k,ae]},[],C,h.length>0,t,!0)?s.push(q,K,N):V?s.push(q,$,N):s.push(q,$,O);break}case ur:case pa:{let C=y.groupId?t[y.groupId]:_;if(C===$o){let x=y.type===ur?y.breakContents:y.negate?y.contents:iC(y.contents);x&&s.push({ind:f,mode:_,doc:x})}if(C===os){let x=y.type===ur?y.flatContents:y.negate?iC(y.contents):y.contents;x&&s.push({ind:f,mode:_,doc:x})}break}case ma:h.push({ind:f,mode:_,doc:y.contents});break;case ga:h.length>0&&s.push({ind:f,mode:_,doc:QI});break;case ho:switch(_){case os:if(y.hard)c=!0;else{y.soft||(a.push(" "),n+=1);break}case $o:if(h.length>0){s.push({ind:f,mode:_,doc:y},...h.reverse()),h.length=0;break}y.literal?f.root?(a.push(r,f.root.value),n=f.root.length):(a.push(r),n=0):(n-=WI(a),a.push(r+f.value),n=f.length);break}break;case ss:s.push({ind:f,mode:_,doc:y.contents});break;case Fr:break;default:throw new wh(y)}s.length===0&&h.length>0&&(s.push(...h.reverse()),h.length=0)}let g=a.indexOf(bh);if(g!==-1){let f=a.indexOf(bh,g+1);if(f===-1)return{formatted:a.filter(x=>x!==bh).join("")};let _=a.slice(0,g).join(""),y=a.slice(g+1,f).join(""),C=a.slice(f+1).join("");return{formatted:_+y+C,cursorNodeStart:_.length,cursorNodeText:y}}return{formatted:a.join("")}}function HX(i,e,t=0){let o=0;for(let r=t;r<i.length;++r)i[r]==="	"?o=o+e-o%e:o++;return o}var eP=HX,Gc,HI,QD,jX=class{constructor(i){qJ(this,Gc),this.stack=[i]}get key(){let{stack:i,siblings:e}=this;return Ji(!1,i,e===null?-2:-4)??null}get index(){return this.siblings===null?null:Ji(!1,this.stack,-2)}get node(){return Ji(!1,this.stack,-1)}get parent(){return this.getNode(1)}get grandparent(){return this.getNode(2)}get isInArray(){return this.siblings!==null}get siblings(){let{stack:i}=this,e=Ji(!1,i,-3);return Array.isArray(e)?e:null}get next(){let{siblings:i}=this;return i===null?null:i[this.index+1]}get previous(){let{siblings:i}=this;return i===null?null:i[this.index-1]}get isFirst(){return this.index===0}get isLast(){let{siblings:i,index:e}=this;return i!==null&&e===i.length-1}get isRoot(){return this.stack.length===1}get root(){return this.stack[0]}get ancestors(){return[...Mg(this,Gc,QD).call(this)]}getName(){let{stack:i}=this,{length:e}=i;return e>1?Ji(!1,i,-2):null}getValue(){return Ji(!1,this.stack,-1)}getNode(i=0){let e=Mg(this,Gc,HI).call(this,i);return e===-1?null:this.stack[e]}getParentNode(i=0){return this.getNode(i+1)}call(i,...e){let{stack:t}=this,{length:o}=t,r=Ji(!1,t,-1);for(let n of e)r=r[n],t.push(n,r);try{return i(this)}finally{t.length=o}}callParent(i,e=0){let t=Mg(this,Gc,HI).call(this,e+1),o=this.stack.splice(t+1);try{return i(this)}finally{this.stack.push(...o)}}each(i,...e){let{stack:t}=this,{length:o}=t,r=Ji(!1,t,-1);for(let n of e)r=r[n],t.push(n,r);try{for(let n=0;n<r.length;++n)t.push(n,r[n]),i(this,n,r),t.length-=2}finally{t.length=o}}map(i,...e){let t=[];return this.each((o,r,n)=>{t[r]=i(o,r,n)},...e),t}match(...i){let e=this.stack.length-1,t=null,o=this.stack[e--];for(let r of i){if(o===void 0)return!1;let n=null;if(typeof t=="number"&&(n=t,t=this.stack[e--],o=this.stack[e--]),r&&!r(o,t,n))return!1;t=this.stack[e--],o=this.stack[e--]}return!0}findAncestor(i){for(let e of Mg(this,Gc,QD).call(this))if(i(e))return e}hasAncestor(i){for(let e of Mg(this,Gc,QD).call(this))if(i(e))return!0;return!1}};Gc=new WeakSet,HI=function(i){let{stack:e}=this;for(let t=e.length-1;t>=0;t-=2)if(!Array.isArray(e[t])&&--i<0)return t;return-1},QD=function*(){let{stack:i}=this;for(let e=i.length-3;e>=0;e-=2){let t=i[e];Array.isArray(t)||(yield t)}};var zX=jX,y4=new Proxy(()=>{},{get:()=>y4}),jI=y4;function VX(i){return i!==null&&typeof i=="object"}var UX=VX;function*cC(i,e){let{getVisitorKeys:t,filter:o=()=>!0}=e,r=n=>UX(n)&&o(n);for(let n of t(i)){let s=i[n];if(Array.isArray(s))for(let a of s)r(a)&&(yield a);else r(s)&&(yield s)}}function*qX(i,e){let t=[i];for(let o=0;o<t.length;o++){let r=t[o];for(let n of cC(r,e))yield n,t.push(n)}}function KX(i,e){return cC(i,e).next().done}function Wg(i){return(e,t,o)=>{let r=!!(o!=null&&o.backwards);if(t===!1)return!1;let{length:n}=e,s=t;for(;s>=0&&s<n;){let a=e.charAt(s);if(i instanceof RegExp){if(!i.test(a))return s}else if(!i.includes(a))return s;r?s--:s++}return s===-1||s===n?s:!1}}var $X=Wg(/\s/u),El=Wg(" 	"),v4=Wg(",; 	"),b4=Wg(/[^\n\r]/u);function GX(i,e,t){let o=!!(t!=null&&t.backwards);if(e===!1)return!1;let r=i.charAt(e);if(o){if(i.charAt(e-1)==="\r"&&r===`
`)return e-2;if(r===`
`||r==="\r"||r==="\u2028"||r==="\u2029")return e-1}else{if(r==="\r"&&i.charAt(e+1)===`
`)return e+2;if(r===`
`||r==="\r"||r==="\u2028"||r==="\u2029")return e+1}return e}var Zc=GX;function JX(i,e,t={}){let o=El(i,t.backwards?e-1:e,t),r=Zc(i,o,t);return o!==r}var wl=JX;function XX(i){return Array.isArray(i)&&i.length>0}var YX=XX,D4=new Set(["tokens","comments","parent","enclosingNode","precedingNode","followingNode"]),QX=i=>Object.keys(i).filter(e=>!D4.has(e));function ZX(i){return i?e=>i(e,D4):QX}var dC=ZX;function eY(i){let e=i.type||i.kind||"(unknown type)",t=String(i.name||i.id&&(typeof i.id=="object"?i.id.name:i.id)||i.key&&(typeof i.key=="object"?i.key.name:i.key)||i.value&&(typeof i.value=="object"?"":String(i.value))||i.operator||"");return t.length>20&&(t=t.slice(0,19)+"\u2026"),e+(t?" "+t:"")}function tP(i,e){(i.comments??(i.comments=[])).push(e),e.printed=!1,e.nodeDescription=eY(i)}function Dh(i,e){e.leading=!0,e.trailing=!1,tP(i,e)}function Jc(i,e,t){e.leading=!1,e.trailing=!1,t&&(e.marker=t),tP(i,e)}function Ch(i,e){e.leading=!1,e.trailing=!0,tP(i,e)}var EI=new WeakMap;function iP(i,e){if(EI.has(i))return EI.get(i);let{printer:{getCommentChildNodes:t,canAttachComment:o,getVisitorKeys:r},locStart:n,locEnd:s}=e;if(!o)return[];let a=(t?.(i,e)??[...cC(i,{getVisitorKeys:dC(r)})]).flatMap(c=>o(c)?[c]:iP(c,e));return a.sort((c,h)=>n(c)-n(h)||s(c)-s(h)),EI.set(i,a),a}function C4(i,e,t,o){let{locStart:r,locEnd:n}=t,s=r(e),a=n(e),c=iP(i,t),h,p,g=0,f=c.length;for(;g<f;){let _=g+f>>1,y=c[_],C=r(y),x=n(y);if(C<=s&&a<=x)return C4(y,e,t,y);if(x<=s){h=y,g=_+1;continue}if(a<=C){p=y,f=_;continue}throw new Error("Comment location overlaps with node location")}if(o?.type==="TemplateLiteral"){let{quasis:_}=o,y=TI(_,e,t);h&&TI(_,h,t)!==y&&(h=null),p&&TI(_,p,t)!==y&&(p=null)}return{enclosingNode:o,precedingNode:h,followingNode:p}}var AI=()=>!1;function tY(i,e){let{comments:t}=i;if(delete i.comments,!YX(t)||!e.printer.canAttachComment)return;let o=[],{locStart:r,locEnd:n,printer:{experimentalFeatures:{avoidAstMutation:s=!1}={},handleComments:a={}},originalText:c}=e,{ownLine:h=AI,endOfLine:p=AI,remaining:g=AI}=a,f=t.map((_,y)=>he(U({},C4(i,_,e)),{comment:_,text:c,options:e,ast:i,isLastComment:t.length-1===y}));for(let[_,y]of f.entries()){let{comment:C,precedingNode:x,enclosingNode:D,followingNode:E,text:I,options:k,ast:N,isLastComment:O}=y;if(k.parser==="json"||k.parser==="json5"||k.parser==="jsonc"||k.parser==="__js_expression"||k.parser==="__ts_expression"||k.parser==="__vue_expression"||k.parser==="__vue_ts_expression"){if(r(C)-r(N)<=0){Dh(N,C);continue}if(n(C)-n(N)>=0){Ch(N,C);continue}}let V;if(s?V=[y]:(C.enclosingNode=D,C.precedingNode=x,C.followingNode=E,V=[C,I,k,N,O]),iY(I,k,f,_))C.placement="ownLine",h(...V)||(E?Dh(E,C):x?Ch(x,C):Jc(D||N,C));else if(oY(I,k,f,_))C.placement="endOfLine",p(...V)||(x?Ch(x,C):E?Dh(E,C):Jc(D||N,C));else if(C.placement="remaining",!g(...V))if(x&&E){let K=o.length;K>0&&o[K-1].followingNode!==E&&O8(o,k),o.push(y)}else x?Ch(x,C):E?Dh(E,C):Jc(D||N,C)}if(O8(o,e),!s)for(let _ of t)delete _.precedingNode,delete _.enclosingNode,delete _.followingNode}var x4=i=>!/[\S\n\u2028\u2029]/u.test(i);function iY(i,e,t,o){let{comment:r,precedingNode:n}=t[o],{locStart:s,locEnd:a}=e,c=s(r);if(n)for(let h=o-1;h>=0;h--){let{comment:p,precedingNode:g}=t[h];if(g!==n||!x4(i.slice(a(p),c)))break;c=s(p)}return wl(i,c,{backwards:!0})}function oY(i,e,t,o){let{comment:r,followingNode:n}=t[o],{locStart:s,locEnd:a}=e,c=a(r);if(n)for(let h=o+1;h<t.length;h++){let{comment:p,followingNode:g}=t[h];if(g!==n||!x4(i.slice(c,s(p))))break;c=a(p)}return wl(i,c)}function O8(i,e){var t,o;let r=i.length;if(r===0)return;let{precedingNode:n,followingNode:s}=i[0],a=e.locStart(s),c;for(c=r;c>0;--c){let{comment:h,precedingNode:p,followingNode:g}=i[c-1];jI.strictEqual(p,n),jI.strictEqual(g,s);let f=e.originalText.slice(e.locEnd(h),a);if(((o=(t=e.printer).isGap)==null?void 0:o.call(t,f,e))??/^[\s(]*$/u.test(f))a=e.locStart(h);else break}for(let[h,{comment:p}]of i.entries())h<c?Ch(n,p):Dh(s,p);for(let h of[n,s])h.comments&&h.comments.length>1&&h.comments.sort((p,g)=>e.locStart(p)-e.locStart(g));i.length=0}function TI(i,e,t){let o=t.locStart(e)-1;for(let r=1;r<i.length;++r)if(o<t.locStart(i[r]))return r-1;return 0}function rY(i,e){let t=e-1;t=El(i,t,{backwards:!0}),t=Zc(i,t,{backwards:!0}),t=El(i,t,{backwards:!0});let o=Zc(i,t,{backwards:!0});return t!==o}var oP=rY;function S4(i,e){let t=i.node;return t.printed=!0,e.printer.printComment(i,e)}function nY(i,e){var t;let o=i.node,r=[S4(i,e)],{printer:n,originalText:s,locStart:a,locEnd:c}=e;if((t=n.isBlockComment)!=null&&t.call(n,o)){let p=wl(s,c(o))?wl(s,a(o),{backwards:!0})?Qc:p4:" ";r.push(p)}else r.push(Qc);let h=Zc(s,El(s,c(o)));return h!==!1&&wl(s,h)&&r.push(Qc),r}function sY(i,e,t){var o;let r=i.node,n=S4(i,e),{printer:s,originalText:a,locStart:c}=e,h=(o=s.isBlockComment)==null?void 0:o.call(s,r);if(t!=null&&t.hasLineSuffix&&!(t!=null&&t.isBlock)||wl(a,c(r),{backwards:!0})){let p=oP(a,c(r));return{doc:OI([Qc,p?Qc:"",n]),isBlock:h,hasLineSuffix:!0}}return!h||t!=null&&t.hasLineSuffix?{doc:[OI([" ",n]),aC],isBlock:h,hasLineSuffix:!0}:{doc:[" ",n],isBlock:h,hasLineSuffix:!1}}function aY(i,e){let t=i.node;if(!t)return{};let o=e[Symbol.for("printedComments")];if((t.comments||[]).filter(a=>!o.has(a)).length===0)return{leading:"",trailing:""};let r=[],n=[],s;return i.each(()=>{let a=i.node;if(o!=null&&o.has(a))return;let{leading:c,trailing:h}=a;c?r.push(nY(i,e)):h&&(s=sY(i,e,s),n.push(s.doc))},"comments"),{leading:r,trailing:n}}function lY(i,e,t){let{leading:o,trailing:r}=aY(i,t);return!o&&!r?e:YD(e,n=>[o,n,r])}function cY(i){let{[Symbol.for("comments")]:e,[Symbol.for("printedComments")]:t}=i;for(let o of e){if(!o.printed&&!t.has(o))throw new Error('Comment "'+o.value.trim()+'" was not printed. Please report this error!');delete o.printed}}function dY(i){return()=>{}}var uY=dY,w4=class extends Error{name="ConfigError"},R8=class extends Error{name="UndefinedParserError"},hY={cursorOffset:{category:"Special",type:"int",default:-1,range:{start:-1,end:1/0,step:1},description:"Print (to stderr) where a cursor at the given position would move to after formatting.",cliCategory:"Editor"},endOfLine:{category:"Global",type:"choice",default:"lf",description:"Which end of line characters to apply.",choices:[{value:"lf",description:"Line Feed only (\\n), common on Linux and macOS as well as inside git repos"},{value:"crlf",description:"Carriage Return + Line Feed characters (\\r\\n), common on Windows"},{value:"cr",description:"Carriage Return character only (\\r), used very rarely"},{value:"auto",description:`Maintain existing
(mixed values within one file are normalised by looking at what's used after the first line)`}]},filepath:{category:"Special",type:"path",description:"Specify the input filepath. This will be used to do parser inference.",cliName:"stdin-filepath",cliCategory:"Other",cliDescription:"Path to the file to pretend that stdin comes from."},insertPragma:{category:"Special",type:"boolean",default:!1,description:"Insert @format pragma into file's first docblock comment.",cliCategory:"Other"},parser:{category:"Global",type:"choice",default:void 0,description:"Which parser to use.",exception:i=>typeof i=="string"||typeof i=="function",choices:[{value:"flow",description:"Flow"},{value:"babel",description:"JavaScript"},{value:"babel-flow",description:"Flow"},{value:"babel-ts",description:"TypeScript"},{value:"typescript",description:"TypeScript"},{value:"acorn",description:"JavaScript"},{value:"espree",description:"JavaScript"},{value:"meriyah",description:"JavaScript"},{value:"css",description:"CSS"},{value:"less",description:"Less"},{value:"scss",description:"SCSS"},{value:"json",description:"JSON"},{value:"json5",description:"JSON5"},{value:"jsonc",description:"JSON with Comments"},{value:"json-stringify",description:"JSON.stringify"},{value:"graphql",description:"GraphQL"},{value:"markdown",description:"Markdown"},{value:"mdx",description:"MDX"},{value:"vue",description:"Vue"},{value:"yaml",description:"YAML"},{value:"glimmer",description:"Ember / Handlebars"},{value:"html",description:"HTML"},{value:"angular",description:"Angular"},{value:"lwc",description:"Lightning Web Components"}]},plugins:{type:"path",array:!0,default:[{value:[]}],category:"Global",description:"Add a plugin. Multiple plugins can be passed as separate `--plugin`s.",exception:i=>typeof i=="string"||typeof i=="object",cliName:"plugin",cliCategory:"Config"},printWidth:{category:"Global",type:"int",default:80,description:"The line length where Prettier will try wrap.",range:{start:0,end:1/0,step:1}},rangeEnd:{category:"Special",type:"int",default:1/0,range:{start:0,end:1/0,step:1},description:`Format code ending at a given character offset (exclusive).
The range will extend forwards to the end of the selected statement.`,cliCategory:"Editor"},rangeStart:{category:"Special",type:"int",default:0,range:{start:0,end:1/0,step:1},description:`Format code starting at a given character offset.
The range will extend backwards to the start of the first line containing the selected statement.`,cliCategory:"Editor"},requirePragma:{category:"Special",type:"boolean",default:!1,description:`Require either '@prettier' or '@format' to be present in the file's first docblock comment
in order for it to be formatted.`,cliCategory:"Other"},tabWidth:{type:"int",category:"Global",default:2,description:"Number of spaces per indentation level.",range:{start:0,end:1/0,step:1}},useTabs:{category:"Global",type:"boolean",default:!1,description:"Indent with tabs instead of spaces."},embeddedLanguageFormatting:{category:"Global",type:"choice",default:"auto",description:"Control how Prettier formats quoted code embedded in the file.",choices:[{value:"auto",description:"Format embedded code if Prettier can automatically identify it."},{value:"off",description:"Never automatically format embedded code."}]}};function E4({plugins:i=[],showDeprecated:e=!1}={}){let t=i.flatMap(r=>r.languages??[]),o=[];for(let r of mY(Object.assign({},...i.map(({options:n})=>n),hY)))!e&&r.deprecated||(Array.isArray(r.choices)&&(e||(r.choices=r.choices.filter(n=>!n.deprecated)),r.name==="parser"&&(r.choices=[...r.choices,...pY(r.choices,t,i)])),r.pluginDefaults=Object.fromEntries(i.filter(n=>{var s;return((s=n.defaultOptions)==null?void 0:s[r.name])!==void 0}).map(n=>[n.name,n.defaultOptions[r.name]])),o.push(r));return{languages:t,options:o}}function*pY(i,e,t){let o=new Set(i.map(r=>r.value));for(let r of e)if(r.parsers){for(let n of r.parsers)if(!o.has(n)){o.add(n);let s=t.find(c=>c.parsers&&Object.prototype.hasOwnProperty.call(c.parsers,n)),a=r.name;s!=null&&s.name&&(a+=` (plugin: ${s.name})`),yield{value:n,description:a}}}}function mY(i){let e=[];for(let[t,o]of Object.entries(i)){let r=U({name:t},o);Array.isArray(r.default)&&(r.default=Ji(!1,r.default,-1).value),e.push(r)}return e}var gY=i=>String(i).split(/[/\\]/u).pop();function B8(i,e){if(!e)return;let t=gY(e).toLowerCase();return i.find(({filenames:o})=>o?.some(r=>r.toLowerCase()===t))??i.find(({extensions:o})=>o?.some(r=>t.endsWith(r)))}function fY(i,e){if(e)return i.find(({name:t})=>t.toLowerCase()===e)??i.find(({aliases:t})=>t?.includes(e))??i.find(({extensions:t})=>t?.includes(`.${e}`))}function _Y(i,e){let t=i.plugins.flatMap(r=>r.languages??[]),o=fY(t,e.language)??B8(t,e.physicalFile)??B8(t,e.file)??(e.physicalFile,void 0);return o?.parsers[0]}var yY=_Y,xh={key:i=>/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(i)?i:JSON.stringify(i),value(i){if(i===null||typeof i!="object")return JSON.stringify(i);if(Array.isArray(i))return`[${i.map(t=>xh.value(t)).join(", ")}]`;let e=Object.keys(i);return e.length===0?"{}":`{ ${e.map(t=>`${xh.key(t)}: ${xh.value(i[t])}`).join(", ")} }`},pair:({key:i,value:e})=>xh.value({[i]:e})},W8=oC(KI(),1),vY=(i,e,{descriptor:t})=>{let o=[`${W8.default.yellow(typeof i=="string"?t.key(i):t.pair(i))} is deprecated`];return e&&o.push(`we now treat it as ${W8.default.blue(typeof e=="string"?t.key(e):t.pair(e))}`),o.join("; ")+"."},Sh=oC(KI(),1),A4=Symbol.for("vnopts.VALUE_NOT_EXIST"),ZD=Symbol.for("vnopts.VALUE_UNCHANGED"),H8=" ".repeat(2),bY=(i,e,t)=>{let{text:o,list:r}=t.normalizeExpectedResult(t.schemas[i].expected(t)),n=[];return o&&n.push(j8(i,e,o,t.descriptor)),r&&n.push([j8(i,e,r.title,t.descriptor)].concat(r.values.map(s=>T4(s,t.loggerPrintWidth))).join(`
`)),I4(n,t.loggerPrintWidth)};function j8(i,e,t,o){return[`Invalid ${Sh.default.red(o.key(i))} value.`,`Expected ${Sh.default.blue(t)},`,`but received ${e===A4?Sh.default.gray("nothing"):Sh.default.red(o.value(e))}.`].join(" ")}function T4({text:i,list:e},t){let o=[];return i&&o.push(`- ${Sh.default.blue(i)}`),e&&o.push([`- ${Sh.default.blue(e.title)}:`].concat(e.values.map(r=>T4(r,t-H8.length).replace(/^|\n/g,`$&${H8}`))).join(`
`)),I4(o,t)}function I4(i,e){if(i.length===1)return i[0];let[t,o]=i,[r,n]=i.map(s=>s.split(`
`,1)[0].length);return r>e&&r>n?o:t}var z8=oC(KI(),1),II=[],V8=[];function DY(i,e){if(i===e)return 0;let t=i;i.length>e.length&&(i=e,e=t);let o=i.length,r=e.length;for(;o>0&&i.charCodeAt(~-o)===e.charCodeAt(~-r);)o--,r--;let n=0;for(;n<o&&i.charCodeAt(n)===e.charCodeAt(n);)n++;if(o-=n,r-=n,o===0)return r;let s,a,c,h,p=0,g=0;for(;p<o;)V8[p]=i.charCodeAt(n+p),II[p]=++p;for(;g<r;)for(s=e.charCodeAt(n+g),c=g++,a=g,p=0;p<o;p++)h=s===V8[p]?c:c+1,c=II[p],a=II[p]=c>a?h>a?a+1:h:h>c?c+1:h;return a}var P4=(i,e,{descriptor:t,logger:o,schemas:r})=>{let n=[`Ignored unknown option ${z8.default.yellow(t.pair({key:i,value:e}))}.`],s=Object.keys(r).sort().find(a=>DY(i,a)<3);s&&n.push(`Did you mean ${z8.default.blue(t.key(s))}?`),o.warn(n.join(" "))},CY=["default","expected","validate","deprecated","forward","redirect","overlap","preprocess","postprocess"];function xY(i,e){let t=new i(e),o=Object.create(t);for(let r of CY)r in e&&(o[r]=SY(e[r],t,Al.prototype[r].length));return o}var Al=class{static create(i){return xY(this,i)}constructor(i){this.name=i.name}default(i){}expected(i){return"nothing"}validate(i,e){return!1}deprecated(i,e){return!1}forward(i,e){}redirect(i,e){}overlap(i,e,t){return i}preprocess(i,e){return i}postprocess(i,e){return ZD}};function SY(i,e,t){return typeof i=="function"?(...o)=>i(...o.slice(0,t-1),e,...o.slice(t-1)):()=>i}var wY=class extends Al{constructor(i){super(i),this._sourceName=i.sourceName}expected(i){return i.schemas[this._sourceName].expected(i)}validate(i,e){return e.schemas[this._sourceName].validate(i,e)}redirect(i,e){return this._sourceName}},EY=class extends Al{expected(){return"anything"}validate(){return!0}},AY=class extends Al{constructor(o){var r=o,{valueSchema:i,name:e=i.name}=r,t=AC(r,["valueSchema","name"]);super(he(U({},t),{name:e})),this._valueSchema=i}expected(i){let{text:e,list:t}=i.normalizeExpectedResult(this._valueSchema.expected(i));return{text:e&&`an array of ${e}`,list:t&&{title:"an array of the following values",values:[{list:t}]}}}validate(i,e){if(!Array.isArray(i))return!1;let t=[];for(let o of i){let r=e.normalizeValidateResult(this._valueSchema.validate(o,e),o);r!==!0&&t.push(r.value)}return t.length===0?!0:{value:t}}deprecated(i,e){let t=[];for(let o of i){let r=e.normalizeDeprecatedResult(this._valueSchema.deprecated(o,e),o);r!==!1&&t.push(...r.map(({value:n})=>({value:[n]})))}return t}forward(i,e){let t=[];for(let o of i){let r=e.normalizeForwardResult(this._valueSchema.forward(o,e),o);t.push(...r.map(U8))}return t}redirect(i,e){let t=[],o=[];for(let r of i){let n=e.normalizeRedirectResult(this._valueSchema.redirect(r,e),r);"remain"in n&&t.push(n.remain),o.push(...n.redirect.map(U8))}return t.length===0?{redirect:o}:{redirect:o,remain:t}}overlap(i,e){return i.concat(e)}};function U8({from:i,to:e}){return{from:[i],to:e}}var TY=class extends Al{expected(){return"true or false"}validate(i){return typeof i=="boolean"}};function IY(i,e){let t=Object.create(null);for(let o of i){let r=o[e];if(t[r])throw new Error(`Duplicate ${e} ${JSON.stringify(r)}`);t[r]=o}return t}function PY(i,e){let t=new Map;for(let o of i){let r=o[e];if(t.has(r))throw new Error(`Duplicate ${e} ${JSON.stringify(r)}`);t.set(r,o)}return t}function kY(){let i=Object.create(null);return e=>{let t=JSON.stringify(e);return i[t]?!0:(i[t]=!0,!1)}}function FY(i,e){let t=[],o=[];for(let r of i)e(r)?t.push(r):o.push(r);return[t,o]}function LY(i){return i===Math.floor(i)}function NY(i,e){if(i===e)return 0;let t=typeof i,o=typeof e,r=["undefined","object","boolean","number","string"];return t!==o?r.indexOf(t)-r.indexOf(o):t!=="string"?Number(i)-Number(e):i.localeCompare(e)}function MY(i){return(...e)=>{let t=i(...e);return typeof t=="string"?new Error(t):t}}function q8(i){return i===void 0?{}:i}function k4(i){if(typeof i=="string")return{text:i};let{text:e,list:t}=i;return OY((e||t)!==void 0,"Unexpected `expected` result, there should be at least one field."),t?{text:e,list:{title:t.title,values:t.values.map(k4)}}:{text:e}}function K8(i,e){return i===!0?!0:i===!1?{value:e}:i}function $8(i,e,t=!1){return i===!1?!1:i===!0?t?!0:[{value:e}]:"value"in i?[i]:i.length===0?!1:i}function G8(i,e){return typeof i=="string"||"key"in i?{from:e,to:i}:"from"in i?{from:i.from,to:i.to}:{from:e,to:i.to}}function zI(i,e){return i===void 0?[]:Array.isArray(i)?i.map(t=>G8(t,e)):[G8(i,e)]}function J8(i,e){let t=zI(typeof i=="object"&&"redirect"in i?i.redirect:i,e);return t.length===0?{remain:e,redirect:t}:typeof i=="object"&&"remain"in i?{remain:i.remain,redirect:t}:{redirect:t}}function OY(i,e){if(!i)throw new Error(e)}var RY=class extends Al{constructor(i){super(i),this._choices=PY(i.choices.map(e=>e&&typeof e=="object"?e:{value:e}),"value")}expected({descriptor:i}){let e=Array.from(this._choices.keys()).map(r=>this._choices.get(r)).filter(({hidden:r})=>!r).map(r=>r.value).sort(NY).map(i.value),t=e.slice(0,-2),o=e.slice(-2);return{text:t.concat(o.join(" or ")).join(", "),list:{title:"one of the following values",values:e}}}validate(i){return this._choices.has(i)}deprecated(i){let e=this._choices.get(i);return e&&e.deprecated?{value:i}:!1}forward(i){let e=this._choices.get(i);return e?e.forward:void 0}redirect(i){let e=this._choices.get(i);return e?e.redirect:void 0}},BY=class extends Al{expected(){return"a number"}validate(i,e){return typeof i=="number"}},WY=class extends BY{expected(){return"an integer"}validate(i,e){return e.normalizeValidateResult(super.validate(i,e),i)===!0&&LY(i)}},X8=class extends Al{expected(){return"a string"}validate(i){return typeof i=="string"}},HY=xh,jY=P4,zY=bY,VY=vY,UY=class{constructor(i,e){let{logger:t=console,loggerPrintWidth:o=80,descriptor:r=HY,unknown:n=jY,invalid:s=zY,deprecated:a=VY,missing:c=()=>!1,required:h=()=>!1,preprocess:p=f=>f,postprocess:g=()=>ZD}=e||{};this._utils={descriptor:r,logger:t||{warn:()=>{}},loggerPrintWidth:o,schemas:IY(i,"name"),normalizeDefaultResult:q8,normalizeExpectedResult:k4,normalizeDeprecatedResult:$8,normalizeForwardResult:zI,normalizeRedirectResult:J8,normalizeValidateResult:K8},this._unknownHandler=n,this._invalidHandler=MY(s),this._deprecatedHandler=a,this._identifyMissing=(f,_)=>!(f in _)||c(f,_),this._identifyRequired=h,this._preprocess=p,this._postprocess=g,this.cleanHistory()}cleanHistory(){this._hasDeprecationWarned=kY()}normalize(i){let e={},t=[this._preprocess(i,this._utils)],o=()=>{for(;t.length!==0;){let r=t.shift(),n=this._applyNormalization(r,e);t.push(...n)}};o();for(let r of Object.keys(this._utils.schemas)){let n=this._utils.schemas[r];if(!(r in e)){let s=q8(n.default(this._utils));"value"in s&&t.push({[r]:s.value})}}o();for(let r of Object.keys(this._utils.schemas)){if(!(r in e))continue;let n=this._utils.schemas[r],s=e[r],a=n.postprocess(s,this._utils);a!==ZD&&(this._applyValidation(a,r,n),e[r]=a)}return this._applyPostprocess(e),this._applyRequiredCheck(e),e}_applyNormalization(i,e){let t=[],{knownKeys:o,unknownKeys:r}=this._partitionOptionKeys(i);for(let n of o){let s=this._utils.schemas[n],a=s.preprocess(i[n],this._utils);this._applyValidation(a,n,s);let c=({from:g,to:f})=>{t.push(typeof f=="string"?{[f]:g}:{[f.key]:f.value})},h=({value:g,redirectTo:f})=>{let _=$8(s.deprecated(g,this._utils),a,!0);if(_!==!1)if(_===!0)this._hasDeprecationWarned(n)||this._utils.logger.warn(this._deprecatedHandler(n,f,this._utils));else for(let{value:y}of _){let C={key:n,value:y};if(!this._hasDeprecationWarned(C)){let x=typeof f=="string"?{key:f,value:y}:f;this._utils.logger.warn(this._deprecatedHandler(C,x,this._utils))}}};zI(s.forward(a,this._utils),a).forEach(c);let p=J8(s.redirect(a,this._utils),a);if(p.redirect.forEach(c),"remain"in p){let g=p.remain;e[n]=n in e?s.overlap(e[n],g,this._utils):g,h({value:g})}for(let{from:g,to:f}of p.redirect)h({value:g,redirectTo:f})}for(let n of r){let s=i[n];this._applyUnknownHandler(n,s,e,(a,c)=>{t.push({[a]:c})})}return t}_applyRequiredCheck(i){for(let e of Object.keys(this._utils.schemas))if(this._identifyMissing(e,i)&&this._identifyRequired(e))throw this._invalidHandler(e,A4,this._utils)}_partitionOptionKeys(i){let[e,t]=FY(Object.keys(i).filter(o=>!this._identifyMissing(o,i)),o=>o in this._utils.schemas);return{knownKeys:e,unknownKeys:t}}_applyValidation(i,e,t){let o=K8(t.validate(i,this._utils),i);if(o!==!0)throw this._invalidHandler(e,o.value,this._utils)}_applyUnknownHandler(i,e,t,o){let r=this._unknownHandler(i,e,this._utils);if(r)for(let n of Object.keys(r)){if(this._identifyMissing(n,r))continue;let s=r[n];n in this._utils.schemas?o(n,s):t[n]=s}}_applyPostprocess(i){let e=this._postprocess(i,this._utils);if(e!==ZD){if(e.delete)for(let t of e.delete)delete i[t];if(e.override){let{knownKeys:t,unknownKeys:o}=this._partitionOptionKeys(e.override);for(let r of t){let n=e.override[r];this._applyValidation(n,r,this._utils.schemas[r]),i[r]=n}for(let r of o){let n=e.override[r];this._applyUnknownHandler(r,n,i,(s,a)=>{let c=this._utils.schemas[s];this._applyValidation(a,s,c),i[s]=a})}}}}},PI;function qY(i,e,{logger:t=!1,isCLI:o=!1,passThrough:r=!1,FlagSchema:n,descriptor:s}={}){if(o){if(!n)throw new Error("'FlagSchema' option is required.");if(!s)throw new Error("'descriptor' option is required.")}else s=xh;let a=r?Array.isArray(r)?(f,_)=>r.includes(f)?{[f]:_}:void 0:(f,_)=>({[f]:_}):(f,_,y)=>{let D=y.schemas,{_:C}=D,x=AC(D,["_"]);return P4(f,_,he(U({},y),{schemas:x}))},c=KY(e,{isCLI:o,FlagSchema:n}),h=new UY(c,{logger:t,unknown:a,descriptor:s}),p=t!==!1;p&&PI&&(h._hasDeprecationWarned=PI);let g=h.normalize(i);return p&&(PI=h._hasDeprecationWarned),g}function KY(i,{isCLI:e,FlagSchema:t}){let o=[];e&&o.push(EY.create({name:"_"}));for(let r of i)o.push($Y(r,{isCLI:e,optionInfos:i,FlagSchema:t})),r.alias&&e&&o.push(wY.create({name:r.alias,sourceName:r.name}));return o}function $Y(i,{isCLI:e,optionInfos:t,FlagSchema:o}){let{name:r}=i,n={name:r},s,a={};switch(i.type){case"int":s=WY,e&&(n.preprocess=Number);break;case"string":s=X8;break;case"choice":s=RY,n.choices=i.choices.map(c=>c!=null&&c.redirect?he(U({},c),{redirect:{to:{key:i.name,value:c.redirect}}}):c);break;case"boolean":s=TY;break;case"flag":s=o,n.flags=t.flatMap(c=>[c.alias,c.description&&c.name,c.oppositeDescription&&`no-${c.name}`].filter(Boolean));break;case"path":s=X8;break;default:throw new Error(`Unexpected type ${i.type}`)}if(i.exception?n.validate=(c,h,p)=>i.exception(c)||h.validate(c,p):n.validate=(c,h,p)=>c===void 0||h.validate(c,p),i.redirect&&(a.redirect=c=>c?{to:typeof i.redirect=="string"?i.redirect:{key:i.redirect.option,value:i.redirect.value}}:void 0),i.deprecated&&(a.deprecated=!0),e&&!i.array){let c=n.preprocess||(h=>h);n.preprocess=(h,p,g)=>p.preprocess(c(Array.isArray(h)?Ji(!1,h,-1):h),g)}return i.array?AY.create(he(U(U({},e?{preprocess:c=>Array.isArray(c)?c:[c]}:{}),a),{valueSchema:s.create(n)})):s.create(U(U({},n),a))}var GY=qY,JY=(i,e,t)=>{if(!(i&&e==null)){if(e.findLast)return e.findLast(t);for(let o=e.length-1;o>=0;o--){let r=e[o];if(t(r,o,e))return r}}},F4=JY;function L4(i,e){if(!e)throw new Error("parserName is required.");let t=F4(!1,i,r=>r.parsers&&Object.prototype.hasOwnProperty.call(r.parsers,e));if(t)return t;let o=`Couldn't resolve parser "${e}".`;throw o+=" Plugins must be explicitly added to the standalone bundle.",new w4(o)}function XY(i,e){if(!e)throw new Error("astFormat is required.");let t=F4(!1,i,r=>r.printers&&Object.prototype.hasOwnProperty.call(r.printers,e));if(t)return t;let o=`Couldn't find plugin for AST format "${e}".`;throw o+=" Plugins must be explicitly added to the standalone bundle.",new w4(o)}function N4({plugins:i,parser:e}){let t=L4(i,e);return M4(t,e)}function M4(i,e){let t=i.parsers[e];return typeof t=="function"?t():t}function YY(i,e){let t=i.printers[e];return typeof t=="function"?t():t}var Y8={astFormat:"estree",printer:{},originalText:void 0,locStart:null,locEnd:null};async function QY(i,e={}){var t;let o=U({},i);if(!o.parser)if(o.filepath){if(o.parser=yY(o,{physicalFile:o.filepath}),!o.parser)throw new R8(`No parser could be inferred for file "${o.filepath}".`)}else throw new R8("No parser and no file path given, couldn't infer a parser.");let r=E4({plugins:i.plugins,showDeprecated:!0}).options,n=U(U({},Y8),Object.fromEntries(r.filter(f=>f.default!==void 0).map(f=>[f.name,f.default]))),s=L4(o.plugins,o.parser),a=await M4(s,o.parser);o.astFormat=a.astFormat,o.locEnd=a.locEnd,o.locStart=a.locStart;let c=(t=s.printers)!=null&&t[a.astFormat]?s:XY(o.plugins,a.astFormat),h=await YY(c,a.astFormat);o.printer=h;let p=c.defaultOptions?Object.fromEntries(Object.entries(c.defaultOptions).filter(([,f])=>f!==void 0)):{},g=U(U({},n),p);for(let[f,_]of Object.entries(g))(o[f]===null||o[f]===void 0)&&(o[f]=_);return o.parser==="json"&&(o.trailingComma="none"),GY(o,r,U({passThrough:Object.keys(Y8)},e))}var Ah=QY,ZY=oC(KJ(),1);async function eQ(i,e){let t=await N4(e),o=t.preprocess?t.preprocess(i,e):i;e.originalText=o;let r;try{r=await t.parse(o,e,e)}catch(n){tQ(n,i)}return{text:o,ast:r}}function tQ(i,e){let{loc:t}=i;if(t){let o=(0,ZY.codeFrameColumns)(e,t,{highlightCode:!0});throw i.message+=`
`+o,i.codeFrame=o,i}throw i}var Hg=eQ;async function iQ(i,e,t,o,r){let{embeddedLanguageFormatting:n,printer:{embed:s,hasPrettierIgnore:a=()=>!1,getVisitorKeys:c}}=t;if(!s||n!=="auto")return;if(s.length>2)throw new Error("printer.embed has too many parameters. The API changed in Prettier v3. Please update your plugin. See https://prettier.io/docs/plugins#optional-embed");let h=dC(s.getVisitorKeys??c),p=[];_();let g=i.stack;for(let{print:y,node:C,pathStack:x}of p)try{i.stack=x;let D=await y(f,e,i,t);D&&r.set(C,D)}catch(D){if(globalThis.PRETTIER_DEBUG)throw D}i.stack=g;function f(y,C){return oQ(y,C,t,o)}function _(){let{node:y}=i;if(y===null||typeof y!="object"||a(i))return;for(let x of h(y))Array.isArray(y[x])?i.each(_,x):i.call(_,x);let C=s(i,t);if(C){if(typeof C=="function"){p.push({print:C,node:y,pathStack:[...i.stack]});return}r.set(y,C)}}}async function oQ(i,e,t,o){let r=await Ah(he(U(U({},t),e),{parentParser:t.parser,originalText:i}),{passThrough:!0}),{ast:n}=await Hg(i,r),s=await o(n,r);return c4(s)}function rQ(i,e){let{originalText:t,[Symbol.for("comments")]:o,locStart:r,locEnd:n,[Symbol.for("printedComments")]:s}=e,{node:a}=i,c=r(a),h=n(a);for(let p of o)r(p)>=c&&n(p)<=h&&s.add(p);return t.slice(c,h)}var nQ=rQ;async function uC(i,e){({ast:i}=await O4(i,e));let t=new Map,o=new zX(i),r=uY(e),n=new Map;await iQ(o,a,e,uC,n);let s=await Q8(o,e,a,void 0,n);if(cY(e),e.nodeAfterCursor&&!e.nodeBeforeCursor)return[Yc,s];if(e.nodeBeforeCursor&&!e.nodeAfterCursor)return[s,Yc];return s;function a(h,p){return h===void 0||h===o?c(p):Array.isArray(h)?o.call(()=>c(p),...h):o.call(()=>c(p),h)}function c(h){r(o);let p=o.node;if(p==null)return"";let g=p&&typeof p=="object"&&h===void 0;if(g&&t.has(p))return t.get(p);let f=Q8(o,e,a,h,n);return g&&t.set(p,f),f}}function Q8(i,e,t,o,r){var n;let{node:s}=i,{printer:a}=e,c;switch((n=a.hasPrettierIgnore)!=null&&n.call(a,i)?c=nQ(i,e):r.has(s)?c=r.get(s):c=a.print(i,e,t,o),s){case e.cursorNode:c=YD(c,h=>[Yc,h,Yc]);break;case e.nodeBeforeCursor:c=YD(c,h=>[h,Yc]);break;case e.nodeAfterCursor:c=YD(c,h=>[Yc,h]);break}return a.printComment&&(!a.willPrintOwnComments||!a.willPrintOwnComments(i,e))&&(c=lY(i,c,e)),c}async function O4(i,e){let t=i.comments??[];e[Symbol.for("comments")]=t,e[Symbol.for("tokens")]=i.tokens??[],e[Symbol.for("printedComments")]=new Set,tY(i,e);let{printer:{preprocess:o}}=e;return i=o?await o(i,e):i,{ast:i,comments:t}}function sQ(i,e){let{cursorOffset:t,locStart:o,locEnd:r}=e,n=dC(e.printer.getVisitorKeys),s=_=>o(_)<=t&&r(_)>=t,a=i,c=[i];for(let _ of qX(i,{getVisitorKeys:n,filter:s}))c.push(_),a=_;if(KX(a,{getVisitorKeys:n}))return{cursorNode:a};let h,p,g=-1,f=Number.POSITIVE_INFINITY;for(;c.length>0&&(h===void 0||p===void 0);){a=c.pop();let _=h!==void 0,y=p!==void 0;for(let C of cC(a,{getVisitorKeys:n})){if(!_){let x=r(C);x<=t&&x>g&&(h=C,g=x)}if(!y){let x=o(C);x>=t&&x<f&&(p=C,f=x)}}}return{nodeBeforeCursor:h,nodeAfterCursor:p}}var aQ=sQ;function lQ(i,e){let{printer:{massageAstNode:t,getVisitorKeys:o}}=e;if(!t)return i;let r=dC(o),n=t.ignoredProperties??new Set;return s(i);function s(a,c){if(!(a!==null&&typeof a=="object"))return a;if(Array.isArray(a))return a.map(f=>s(f,c)).filter(Boolean);let h={},p=new Set(r(a));for(let f in a)!Object.prototype.hasOwnProperty.call(a,f)||n.has(f)||(p.has(f)?h[f]=s(a[f],a):h[f]=a[f]);let g=t(a,h,c);if(g!==null)return g??h}}var cQ=lQ,dQ=(i,e,t)=>{if(!(i&&e==null)){if(e.findLastIndex)return e.findLastIndex(t);for(let o=e.length-1;o>=0;o--){let r=e[o];if(t(r,o,e))return o}return-1}},uQ=dQ,hQ=({parser:i})=>i==="json"||i==="json5"||i==="jsonc"||i==="json-stringify";function pQ(i,e){let t=[i.node,...i.parentNodes],o=new Set([e.node,...e.parentNodes]);return t.find(r=>R4.has(r.type)&&o.has(r))}function Z8(i){let e=uQ(!1,i,t=>t.type!=="Program"&&t.type!=="File");return e===-1?i:i.slice(0,e+1)}function mQ(i,e,{locStart:t,locEnd:o}){let r=i.node,n=e.node;if(r===n)return{startNode:r,endNode:n};let s=t(i.node);for(let c of Z8(e.parentNodes))if(t(c)>=s)n=c;else break;let a=o(e.node);for(let c of Z8(i.parentNodes)){if(o(c)<=a)r=c;else break;if(r===n)break}return{startNode:r,endNode:n}}function VI(i,e,t,o,r=[],n){let{locStart:s,locEnd:a}=t,c=s(i),h=a(i);if(!(e>h||e<c||n==="rangeEnd"&&e===c||n==="rangeStart"&&e===h)){for(let p of iP(i,t)){let g=VI(p,e,t,o,[i,...r],n);if(g)return g}if(!o||o(i,r[0]))return{node:i,parentNodes:r}}}function gQ(i,e){return e!=="DeclareExportDeclaration"&&i!=="TypeParameterDeclaration"&&(i==="Directive"||i==="TypeAlias"||i==="TSExportAssignment"||i.startsWith("Declare")||i.startsWith("TSDeclare")||i.endsWith("Statement")||i.endsWith("Declaration"))}var R4=new Set(["JsonRoot","ObjectExpression","ArrayExpression","StringLiteral","NumericLiteral","BooleanLiteral","NullLiteral","UnaryExpression","TemplateLiteral"]),fQ=new Set(["OperationDefinition","FragmentDefinition","VariableDefinition","TypeExtensionDefinition","ObjectTypeDefinition","FieldDefinition","DirectiveDefinition","EnumTypeDefinition","EnumValueDefinition","InputValueDefinition","InputObjectTypeDefinition","SchemaDefinition","OperationTypeDefinition","InterfaceTypeDefinition","UnionTypeDefinition","ScalarTypeDefinition"]);function e4(i,e,t){if(!e)return!1;switch(i.parser){case"flow":case"babel":case"babel-flow":case"babel-ts":case"typescript":case"acorn":case"espree":case"meriyah":case"__babel_estree":return gQ(e.type,t?.type);case"json":case"json5":case"jsonc":case"json-stringify":return R4.has(e.type);case"graphql":return fQ.has(e.kind);case"vue":return e.tag!=="root"}return!1}function _Q(i,e,t){let{rangeStart:o,rangeEnd:r,locStart:n,locEnd:s}=e;jI.ok(r>o);let a=i.slice(o,r).search(/\S/u),c=a===-1;if(!c)for(o+=a;r>o&&!/\S/u.test(i[r-1]);--r);let h=VI(t,o,e,(_,y)=>e4(e,_,y),[],"rangeStart"),p=c?h:VI(t,r,e,_=>e4(e,_),[],"rangeEnd");if(!h||!p)return{rangeStart:0,rangeEnd:0};let g,f;if(hQ(e)){let _=pQ(h,p);g=_,f=_}else({startNode:g,endNode:f}=mQ(h,p,e));return{rangeStart:Math.min(n(g),n(f)),rangeEnd:Math.max(s(g),s(f))}}var B4="\uFEFF",t4=Symbol("cursor");async function W4(i,e,t=0){if(!i||i.trim().length===0)return{formatted:"",cursorOffset:-1,comments:[]};let{ast:o,text:r}=await Hg(i,e);e.cursorOffset>=0&&(e=U(U({},e),aQ(o,e)));let n=await uC(o,e,t);t>0&&(n=f4([Qc,n],t,e.tabWidth));let s=lC(n,e);if(t>0){let c=s.formatted.trim();s.cursorNodeStart!==void 0&&(s.cursorNodeStart-=s.formatted.indexOf(c),s.cursorNodeStart<0&&(s.cursorNodeStart=0,s.cursorNodeText=s.cursorNodeText.trimStart()),s.cursorNodeStart+s.cursorNodeText.length>c.length&&(s.cursorNodeText=s.cursorNodeText.trimEnd())),s.formatted=c+GI(e.endOfLine)}let a=e[Symbol.for("comments")];if(e.cursorOffset>=0){let c,h,p,g;if((e.cursorNode||e.nodeBeforeCursor||e.nodeAfterCursor)&&s.cursorNodeText)if(p=s.cursorNodeStart,g=s.cursorNodeText,e.cursorNode)c=e.locStart(e.cursorNode),h=r.slice(c,e.locEnd(e.cursorNode));else{if(!e.nodeBeforeCursor&&!e.nodeAfterCursor)throw new Error("Cursor location must contain at least one of cursorNode, nodeBeforeCursor, nodeAfterCursor");c=e.nodeBeforeCursor?e.locEnd(e.nodeBeforeCursor):0;let D=e.nodeAfterCursor?e.locStart(e.nodeAfterCursor):r.length;h=r.slice(c,D)}else c=0,h=r,p=0,g=s.formatted;let f=e.cursorOffset-c;if(h===g)return{formatted:s.formatted,cursorOffset:p+f,comments:a};let _=h.split("");_.splice(f,0,t4);let y=g.split(""),C=eX(_,y),x=p;for(let D of C)if(D.removed){if(D.value.includes(t4))break}else x+=D.count;return{formatted:s.formatted,cursorOffset:x,comments:a}}return{formatted:s.formatted,cursorOffset:-1,comments:a}}async function yQ(i,e){let{ast:t,text:o}=await Hg(i,e),{rangeStart:r,rangeEnd:n}=_Q(o,e,t),s=o.slice(r,n),a=Math.min(r,o.lastIndexOf(`
`,r)+1),c=o.slice(a,r).match(/^\s*/u)[0],h=eP(c,e.tabWidth),p=await W4(s,he(U({},e),{rangeStart:0,rangeEnd:Number.POSITIVE_INFINITY,cursorOffset:e.cursorOffset>r&&e.cursorOffset<=n?e.cursorOffset-r:-1,endOfLine:"lf"}),h),g=p.formatted.trimEnd(),{cursorOffset:f}=e;f>n?f+=g.length-s.length:p.cursorOffset>=0&&(f=p.cursorOffset+r);let _=o.slice(0,r)+g+o.slice(n);if(e.endOfLine!=="lf"){let y=GI(e.endOfLine);f>=0&&y===`\r
`&&(f+=a4(_.slice(0,f),`
`)),_=rC(!1,_,`
`,y)}return{formatted:_,cursorOffset:f,comments:p.comments}}function kI(i,e,t){return typeof e!="number"||Number.isNaN(e)||e<0||e>i.length?t:e}function i4(i,e){let{cursorOffset:t,rangeStart:o,rangeEnd:r}=e;return t=kI(i,t,-1),o=kI(i,o,0),r=kI(i,r,i.length),he(U({},e),{cursorOffset:t,rangeStart:o,rangeEnd:r})}function H4(i,e){let{cursorOffset:t,rangeStart:o,rangeEnd:r,endOfLine:n}=i4(i,e),s=i.charAt(0)===B4;if(s&&(i=i.slice(1),t--,o--,r--),n==="auto"&&(n=tX(i)),i.includes("\r")){let a=c=>a4(i.slice(0,Math.max(c,0)),`\r
`);t-=a(t),o-=a(o),r-=a(r),i=iX(i)}return{hasBOM:s,text:i,options:i4(i,he(U({},e),{cursorOffset:t,rangeStart:o,rangeEnd:r,endOfLine:n}))}}async function o4(i,e){let t=await N4(e);return!t.hasPragma||t.hasPragma(i)}async function j4(i,e){let{hasBOM:t,text:o,options:r}=H4(i,await Ah(e));if(r.rangeStart>=r.rangeEnd&&o!==""||r.requirePragma&&!await o4(o,r))return{formatted:i,cursorOffset:e.cursorOffset,comments:[]};let n;return r.rangeStart>0||r.rangeEnd<o.length?n=await yQ(o,r):(!r.requirePragma&&r.insertPragma&&r.printer.insertPragma&&!await o4(o,r)&&(o=r.printer.insertPragma(o)),n=await W4(o,r)),t&&(n.formatted=B4+n.formatted,n.cursorOffset>=0&&n.cursorOffset++),n}async function vQ(i,e,t){let{text:o,options:r}=H4(i,await Ah(e)),n=await Hg(o,r);return t&&(t.preprocessForPrint&&(n.ast=await O4(n.ast,r)),t.massage&&(n.ast=cQ(n.ast,r))),n}async function bQ(i,e){e=await Ah(e);let t=await uC(i,e);return lC(t,e)}async function DQ(i,e){let t=kX(i),{formatted:o}=await j4(t,he(U({},e),{parser:"__js_expression"}));return o}async function CQ(i,e){e=await Ah(e);let{ast:t}=await Hg(i,e);return uC(t,e)}async function xQ(i,e){return lC(i,await Ah(e))}var z4={};qI(z4,{builders:()=>SQ,printer:()=>wQ,utils:()=>EQ});var SQ={join:g4,line:p4,softline:IX,hardline:Qc,literalline:m4,group:u4,conditionalGroup:xX,fill:SX,lineSuffix:OI,lineSuffixBoundary:AX,cursor:Yc,breakParent:aC,ifBreak:wX,trim:TX,indent:iC,indentIfBreak:EX,align:Eh,addAlignmentToDoc:f4,markAsRoot:DX,dedentToRoot:bX,dedent:CX,hardlineWithoutBreakParent:QI,literallineWithoutBreakParent:h4,label:PX,concat:i=>i},wQ={printDocToString:lC},EQ={willBreak:dX,traverseDoc:JI,findInDoc:XI,mapDoc:sC,removeLines:pX,stripTrailingHardline:c4,replaceEndOfLine:fX,canBreak:yX},AQ="3.5.3",V4={};qI(V4,{addDanglingComment:()=>Jc,addLeadingComment:()=>Dh,addTrailingComment:()=>Ch,getAlignmentSize:()=>eP,getIndentSize:()=>LQ,getMaxContinuousCount:()=>OQ,getNextNonSpaceNonCommentCharacter:()=>BQ,getNextNonSpaceNonCommentCharacterIndex:()=>GQ,getPreferredQuote:()=>HQ,getStringWidth:()=>ZI,hasNewline:()=>wl,hasNewlineInRange:()=>zQ,hasSpaces:()=>UQ,isNextLineEmpty:()=>QQ,isNextLineEmptyAfterIndex:()=>aP,isPreviousLineEmpty:()=>XQ,makeString:()=>KQ,skip:()=>Wg,skipEverythingButNewLine:()=>b4,skipInlineComment:()=>rP,skipNewline:()=>Zc,skipSpaces:()=>El,skipToLineEnd:()=>v4,skipTrailingComment:()=>nP,skipWhitespace:()=>$X});function TQ(i,e){if(e===!1)return!1;if(i.charAt(e)==="/"&&i.charAt(e+1)==="*"){for(let t=e+2;t<i.length;++t)if(i.charAt(t)==="*"&&i.charAt(t+1)==="/")return t+2}return e}var rP=TQ;function IQ(i,e){return e===!1?!1:i.charAt(e)==="/"&&i.charAt(e+1)==="/"?b4(i,e):e}var nP=IQ;function PQ(i,e){let t=null,o=e;for(;o!==t;)t=o,o=El(i,o),o=rP(i,o),o=nP(i,o),o=Zc(i,o);return o}var sP=PQ;function kQ(i,e){let t=null,o=e;for(;o!==t;)t=o,o=v4(i,o),o=rP(i,o),o=El(i,o);return o=nP(i,o),o=Zc(i,o),o!==!1&&wl(i,o)}var aP=kQ;function FQ(i,e){let t=i.lastIndexOf(`
`);return t===-1?0:eP(i.slice(t+1).match(/^[\t ]*/u)[0],e)}var LQ=FQ;function NQ(i){if(typeof i!="string")throw new TypeError("Expected a string");return i.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function MQ(i,e){let t=i.match(new RegExp(`(${NQ(e)})+`,"gu"));return t===null?0:t.reduce((o,r)=>Math.max(o,r.length/e.length),0)}var OQ=MQ;function RQ(i,e){let t=sP(i,e);return t===!1?"":i.charAt(t)}var BQ=RQ,XD="'",r4='"';function WQ(i,e){let t=e===!0||e===XD?XD:r4,o=t===XD?r4:XD,r=0,n=0;for(let s of i)s===t?r++:s===o&&n++;return r>n?o:t}var HQ=WQ;function jQ(i,e,t){for(let o=e;o<t;++o)if(i.charAt(o)===`
`)return!0;return!1}var zQ=jQ;function VQ(i,e,t={}){return El(i,t.backwards?e-1:e,t)!==e}var UQ=VQ;function qQ(i,e,t){let o=e==='"'?"'":'"',r=rC(!1,i,/\\(.)|(["'])/gsu,(n,s,a)=>s===o?s:a===e?"\\"+a:a||(t&&/^[^\n\r"'0-7\\bfnrt-vx\u2028\u2029]$/u.test(s)?s:"\\"+s));return e+r+e}var KQ=qQ;function $Q(i,e,t){return sP(i,t(e))}function GQ(i,e){return arguments.length===2||typeof e=="number"?sP(i,e):$Q(...arguments)}function JQ(i,e,t){return oP(i,t(e))}function XQ(i,e){return arguments.length===2||typeof e=="number"?oP(i,e):JQ(...arguments)}function YQ(i,e,t){return aP(i,t(e))}function QQ(i,e){return arguments.length===2||typeof e=="number"?aP(i,e):YQ(...arguments)}function Xc(i,e=1){return async(...t)=>{let o=t[e]??{},r=o.plugins??[];return t[e]=he(U({},o),{plugins:Array.isArray(r)?r:Object.values(r)}),i(...t)}}var U4=Xc(j4);async function q4(i,e){let{formatted:t}=await U4(i,he(U({},e),{cursorOffset:-1}));return t}async function ZQ(i,e){return await q4(i,e)===i}var eZ=Xc(E4,0),tZ={parse:Xc(vQ),formatAST:Xc(bQ),formatDoc:Xc(DQ),printToDoc:Xc(CQ),printDocToString:Xc(xQ)};export{iZ as a,_Z as b,EV as c,RJ as d,q4 as e};
