@let errorState = errorStateSig();
@let codeEditorConfigs = codeEditorConfigsSig();

<p-dialog
  class="dialog-container"
  header="Editor"
  [closeOnEscape]="true"
  [dismissableMask]="true"
  [draggable]="false"
  [modal]="true"
  [resizable]="false"
  [visible]="isOpen()"
  (visibleChange)="editCancel.emit()"
>
  <section class="modal-content">
    @if (prettifiedJSONResource.isLoading() || isLoading() || !codeEditorConfigs) {
      <p-progress-spinner ariaLabel="loading" />
    } @else {
      <div class="modal-content__editor">
        <prime-ng-playground-shared-json-editor
          [configs]="codeEditorConfigs"
          (valueChanged)="codeSig.set($event)"
        ></prime-ng-playground-shared-json-editor>
      </div>
      <div class="modal-content__btn-container">
        <p-button
          [disabled]="errorState === 'isError'"
          [label]="errorState === 'isError' ? 'Error in JSON' : 'Save your changes'"
          [severity]="errorState === 'isError' ? 'danger' : 'primary'"
          (click)="save.emit(codeSig())"
        >
        </p-button>
        <p-button label="Cancel" severity="secondary" (click)="emitCancelAndResetToInitialCode()" />
      </div>
    }
  </section>
</p-dialog>
