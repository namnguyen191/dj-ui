import{b as Rt}from"./chunk-XPI5V6NI.js";import{a as Pt}from"./chunk-MBT7BLKF.js";import{a as N,d as kt}from"./chunk-QZTN465A.js";import{a as w,c as xt,e as Ct,u as Dt}from"./chunk-4JUAUIAF.js";import{Ac as d,Ba as ht,Bb as vt,Bc as X,Ca as L,Dc as Mt,E as U,Gb as St,Hb as Et,Ib as It,K as pt,U as g,Vb as Ot,Vc as At,W as $,Wb as jt,Yb as Tt,_ as y,_a as gt,a as c,b as f,ea as p,gb as yt,jb as wt,k as lt,ob as bt,p as K,ra as dt,u as l,w as j,ya as ft,za as mt,zc as b}from"./chunk-FB2JRMCH.js";var q=class{#t;constructor(e){this.configs=e,this.#t=new lt({status:"idle",conn:null}),this.db$=this.#t.asObservable().pipe(pt(2e3)),this.#e()}getRepo(e){return l(this.db$.pipe(U(n=>n.conn!==null),j(n=>new J(n.conn,e))))}#e(){let e=this.#t.getValue();if(e.status==="ready"||e.status==="initializing")return;let n=indexedDB.open(this.configs.dbName,this.configs.dbVersion);n.onupgradeneeded=r=>{let o=r.target.result;for(let i of this.configs.stores)o.objectStoreNames.contains(i)||o.createObjectStore(i,{keyPath:"id",autoIncrement:!1})},n.onsuccess=()=>{this.#t.next({status:"ready",conn:n.result})},n.onerror=()=>{this.#t.next({status:"error",conn:null})}}},J=class{#t;#e;constructor(e,n){this.getAll=()=>new Promise((r,o)=>{let s=this.#t.transaction(this.#e,"readonly").objectStore(this.#e).getAll();s.onsuccess=()=>{r(s.result)},s.onerror=()=>{o(s.error)}}),this.createOne=r=>new Promise((o,i)=>{let u=this.#t.transaction(this.#e,"readwrite").objectStore(this.#e).add(r);u.onsuccess=()=>{o(r)},u.onerror=()=>{i(u.error)}}),this.updateOne=r=>new Promise((o,i)=>{let u=this.#t.transaction(this.#e,"readwrite").objectStore(this.#e).put(r);u.onsuccess=()=>{o(r)},u.onerror=()=>{i(u.error)}}),this.#t=e,this.#e=n}getOne(e){return new Promise((n,r)=>{let a=this.#t.transaction(this.#e,"readonly").objectStore(this.#e).get(e);a.onsuccess=()=>{if(a.result===void 0){n(null);return}n(a.result)},a.onerror=()=>{r(a.error)}})}deleteOne(e){return new Promise((n,r)=>{let a=this.#t.transaction(this.#e,"readwrite").objectStore(this.#e).delete(e);a.onsuccess=()=>{if(a.result===void 0){n();return}n(a.result)},a.onerror=()=>{r(a.error)}})}clearAll(){return new Promise((e,n)=>{let i=this.#t.transaction(this.#e,"readwrite").objectStore(this.#e).clear();i.onsuccess=()=>{if(i.result===void 0){e();return}n(i.result)},i.onerror=()=>{n(i.error)}})}};function _t(t){let e=b(()=>t());return me(e)?new Proxy(t,{get(n,r){return r in e?(ht(n[r])||Object.defineProperty(n,r,{value:d(()=>n()[r]),configurable:!0}),_t(n[r])):n[r]}}):t}var fe=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function me(t){if(t===null||typeof t!="object"||he(t))return!1;let e=Object.getPrototypeOf(t);if(e===Object.prototype)return!0;for(;e&&e!==Object.prototype;){if(fe.includes(e.constructor))return!1;e=Object.getPrototypeOf(e)}return e===Object.prototype}function he(t){return typeof t?.[Symbol.iterator]=="function"}var ge=new WeakMap,m=Symbol("STATE_SOURCE");function h(t,...e){t[m].update(n=>e.reduce((r,o)=>c(c({},r),typeof o=="function"?o(r):o),n)),be(t)}function ye(t){return t[m]()}function we(t){return ge.get(t[m])||[]}function be(t){let e=we(t);for(let n of e){let r=b(()=>ye(t));n(r)}}function B(...t){let e=[...t],n=typeof e[0]=="function"?{}:e.shift(),r=e;return(()=>{class i{constructor(){let s=r.reduce((_,de)=>de(_),ve()),{stateSignals:u,props:O,methods:Y,hooks:pe}=s,st=c(c(c({},u),O),Y);this[m]=s[m];for(let _ of Reflect.ownKeys(st))this[_]=st[_];let{onInit:ct,onDestroy:ut}=pe;ct&&ct(),ut&&p(dt).onDestroy(ut)}static \u0275fac=function(u){return new(u||i)};static \u0275prov=y({token:i,factory:i.\u0275fac,providedIn:n.providedIn||null})}return i})()}function ve(){return{[m]:L({}),stateSignals:{},props:{},methods:{},hooks:{}}}function T(t,...e){let n=typeof t=="function"?[t,...e]:e;return r=>n.reduce((o,i)=>i(o),r)}function Se(t){return e=>{let n=t(c(c(c({[m]:e[m]},e.stateSignals),e.props),e.methods));return Reflect.ownKeys(n),f(c({},e),{props:c(c({},e.props),n)})}}function v(t){return Se(t)}function W(t){return e=>{let n=c(c(c({[m]:e[m]},e.stateSignals),e.props),e.methods),r=typeof t=="function"?t(n):t,o=i=>{let a=r[i],s=e.hooks[i];return a?()=>{s&&s(),a(n)}:s};return f(c({},e),{hooks:{onInit:o("onInit"),onDestroy:o("onDestroy")}})}}function M(t){return e=>{let n=t(c(c(c({[m]:e[m]},e.stateSignals),e.props),e.methods));return Reflect.ownKeys(n),f(c({},e),{methods:c(c({},e.methods),n)})}}function S(t){return e=>{let n=typeof t=="function"?t():t,r=Reflect.ownKeys(n);e[m].update(i=>c(c({},i),n));let o=r.reduce((i,a)=>{let s=d(()=>e[m]()[a]);return f(c({},i),{[a]:_t(s)})},{});return f(c({},e),{stateSignals:c(c({},e.stateSignals),o)})}}var I=function(t){return t[t.None=0]="None",t[t.Entities=1]="Entities",t[t.Both=2]="Both",t}(I||{}),Ee=t=>t.id;function Kt(t){return t?.selectId??Ee}function tt(t){let e=t?.collection,n=e===void 0?"entityMap":`${e}EntityMap`,r=e===void 0?"ids":`${e}Ids`,o=e===void 0?"entities":`${e}Entities`;return{entityMapKey:n,idsKey:r,entitiesKey:o}}function Ie(t,e){return{entityMap:c({},t[e.entityMapKey]),ids:[...t[e.idsKey]]}}function Oe(t,e,n){switch(n){case I.Both:return{[e.entityMapKey]:t.entityMap,[e.idsKey]:t.ids};case I.Entities:return{[e.entityMapKey]:t.entityMap};default:return{}}}function Ut(t,e,n){let r=n(e);return t.entityMap[r]?(t.entityMap[r]=e,I.Entities):(t.entityMap[r]=e,t.ids.push(r),I.Both)}function je(t,e,n){let r=I.None;for(let o of e){let i=Ut(t,o,n);r!==I.Both&&(r=i)}return r}function F(t,e){let n=Kt(e),r=tt(e);return o=>{let i=Ie(o,r),a=Ut(i,t,n);return Oe(i,r,a)}}function $t(t,e){let n=Kt(e),r=tt(e);return()=>{let o={entityMap:{},ids:[]};return je(o,t,n),{[r.entityMapKey]:o.entityMap,[r.idsKey]:o.ids}}}function Lt(t){let{entityMapKey:e,idsKey:n,entitiesKey:r}=tt(t);return T(S({[e]:{},[n]:[]}),v(o=>({[r]:d(()=>{let i=o[e]();return o[n]().map(s=>i[s])})})))}var P=()=>({requestStatus:"pending"}),A=()=>({requestStatus:"fulfilled"}),x=t=>({requestStatus:{error:t}}),Nt=()=>T(S({requestStatus:"idle"}),v(({requestStatus:t})=>({isPending:d(()=>t()==="pending"),isFulfilled:d(()=>t()==="fulfilled"),error:d(()=>{let e=t();return typeof e=="object"?e.error:null})})));var H=t=>T(Lt(),Nt(),M(e=>{let n=t();return{loadAll:async()=>{if(!n.fetchAll)throw Error("fetchAll loader was not provided");h(e,P());try{let o=await n.fetchAll();return h(e,$t(o),A()),o}catch(o){throw x("Something went wrong fetching all entities"),o}},get:async o=>{let a=b(e.entities).find(s=>s.id===o);if(a)return a;if(!n.fetch)throw Error("fetch loader was not provided");h(e,P());try{let s=await n.fetch(o);return h(e,F(s),A()),s}catch(s){let u=`Something went wrong fetching entity with id ${o}. Err: ${s}`;throw x(u),h(e,A()),Error(u)}},add:async o=>{if(!n.create)throw Error("create loader was not provided");h(e,P());try{let i=await n.create(o);return h(e,F(i),A()),i}catch(i){throw x("Something went wrong creating entity"),i}},change:async o=>{if(!n.update)throw Error("update loader was not provided");h(e,P());try{let i=await n.update(o);return h(e,F(i),A()),i}catch(i){throw x("Something went wrong updating entity"),i}}}}));var qt={id:"POKEMON_PAGINATION.REMOTE_RESOURCE",name:"Pokemon remote resource with pagination",description:"A remote resource that fetches pokemon data with support for pagination",createdAt:"2025-04-05T17:07:36.743Z",stateSubscription:{watchedScopes:{global:["pokemonPagination"]},variables:{currentPage:"<${ return this.state?.global?.pokemonPagination?.selectedPage ?? 0 }$>",currentItemPerPage:"<${ return this.state?.global?.pokemonPagination?.pageLength ?? 10 }$>"}},options:{requests:[{fetcherId:"httpFetcher",configs:{endpoint:"https://beta.pokeapi.co/graphql/v1beta",method:"POST",body:{operationName:"GetPokemons",query:`<\${ return \`query GetPokemons {
  totalCount: pokemon_v2_pokemon_aggregate {
    aggregate {
      count
    }
  }
  pokemons: pokemon_v2_pokemon(offset: \${(this.state.variables.currentPage) * (this.state.variables.currentItemPerPage)}, limit: \${this.state.variables.currentItemPerPage}) {
    name
    id
    height
    pokemon_v2_pokemonabilities {
      pokemon_v2_ability {
        name
      }
    }
    pokemon_v2_pokemontypes {
      pokemon_v2_type {
        name
      }
    }
  }
}\` }$>`}},interpolation:'<${ return{pokemons:this.$current.data.pokemons.map((rawPokemonData=>({id:rawPokemonData.id,name:rawPokemonData.name,height:rawPokemonData.height,abilities:rawPokemonData.pokemon_v2_pokemonabilities.map((abilityData=>abilityData.pokemon_v2_ability.name)).join(", "),types:rawPokemonData.pokemon_v2_pokemontypes.map((typeData=>typeData.pokemon_v2_type.name)).join(", ")}))),totalCount:this.$current.data.totalCount.aggregate.count}; }$>'}]}};var Bt={id:"pokemon-server-side-pagination-table.PRIME_NG_SIMPLE_TABLE",type:"SIMPLE_TABLE",remoteResourceIds:["POKEMON_PAGINATION.REMOTE_RESOURCE"],name:"Pokemon server-side pagination table",description:"A table that fetch a bunch of pokemon using server-side pagination",createdAt:"2025-04-05T17:07:36.743Z",updatedAt:"2025-04-05T17:07:36.743Z",stateSubscription:{watchedScopes:{global:["usPopPage"]}},options:{title:"Pokemon table with server-side pagination",stripes:!0,gridLines:!0,resizableColumns:!0,columns:[{id:"id",label:"Id",disableResizable:!0},{id:"name",label:"Name"},{id:"height",label:"Height"},{id:"abilities",label:"Abilities"},{id:"types",label:"Types"}],rows:'<${ return this.remoteResourcesStates?.results?.["POKEMON_PAGINATION.REMOTE_RESOURCE"]?.result?.pokemons ?? [] }$>',pagination:{totalDataLength:"<${ return this.remoteResourcesStates?.results?.['POKEMON_PAGINATION.REMOTE_RESOURCE']?.result?.totalCount ?? 0 }$>",pageSizes:[10,15,25,50]}},eventsHooks:{paginationChanged:[{type:"addToState",payload:{scope:"global",data:{pokemonPagination:"<${ return this.$eventOutput }$>"}}}]}};var Wt={id:"sample-layout.SIMPLE_GRID_LAYOUT",type:"SIMPLE_GRID_LAYOUT",name:"Sample layout",description:"A simple grid layout that displays a bunch of different UI elements",createdAt:"2025-04-05T17:07:36.743Z",updatedAt:"2025-04-05T17:07:36.743Z",options:{grid:{gap:"1rem",padding:"0 10vw",rowHeight:"auto"},uiElementInstances:[{id:"1",uiElementTemplateId:"pokemon-server-side-pagination-table.PRIME_NG_SIMPLE_TABLE",positionAndSize:{cols:16}}]}};var Ft=[Wt,Bt],Ht=[qt];var Re="PRIME_NG_PLAYGROUND_LOCAL_DB",Pe=1,xe=["appUIElementTemplates","appRemoteResourceTemplates"],V=(()=>{class t extends q{constructor(){super({stores:xe,dbName:Re,dbVersion:Pe})}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var et=(()=>{class t{constructor(){this.#t=p(kt),this.#e=p(V),this.#n=K(this.#e.getRepo("appRemoteResourceTemplates")),this.getAllRemoteResourceTemplates=()=>this.#n.pipe(g(n=>n.getAll())),this.createRemoteResourceTemplate=n=>{let r=f(c({},n),{createdAt:new Date().toISOString()});return this.#n.pipe(g(o=>o.createOne(r)))},this.updateRemoteResourceTemplate=n=>this.fetchRemoteResourceTemplate(n.id).pipe(g(r=>{let o=f(c({},n),{createdAt:r.createdAt,updatedAt:new Date().toISOString()});return this.#n.pipe(g(i=>i.updateOne(o)),$({next:()=>{this.#t.updateOrRegisterTemplate(o)}}))}))}#t;#e;#n;fetchRemoteResourceTemplate(n){return this.#n.pipe(g(r=>r.getOne(n)),j(r=>{if(r===null)throw new N({error:`Remote resource template with ID ${n} does not exist in indexed db`,status:404});return r}))}async resetExampleTemplates(){let n=await l(this.#n);for(let r of Ht){await n.deleteOne(r.id);let o=f(c({},r),{createdAt:new Date().toISOString()});await n.createOne(o)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Ce={query:{}},br=B({providedIn:"root"},S(Ce),H((t=p(et))=>({fetchAll:()=>l(t.getAllRemoteResourceTemplates()),fetch:e=>l(t.fetchRemoteResourceTemplate(e)),create:e=>l(t.createRemoteResourceTemplate(e)),update:e=>l(t.updateRemoteResourceTemplate(e))})),v(({entities:t,query:e})=>({allRemoteResourceTemplatesInfo:d(()=>t().map(({id:n,createdAt:r,updatedAt:o,name:i,description:a})=>({id:n,createdAt:r,updatedAt:o,name:i,description:a}))),filteredRemoteResourceTemplates:d(()=>{let{id:n}=e();return t().filter(r=>n?r.id===n:!1)})})),M((t,e=p(et))=>({updateQuery:n=>{h(t,{query:n})},resetMockTemplates:async()=>{await e.resetExampleTemplates(),await t.loadAll()}})),W({onInit:async({loadAll:t})=>{await t()}}));var nt=(()=>{class t{constructor(){this.#t=p(Dt),this.#e=p(V),this.#n=K(this.#e.getRepo("appUIElementTemplates")),this.getAllUIElementTemplates=()=>this.#n.pipe(g(n=>n.getAll())),this.createUIElementTemplate=n=>{let r=f(c({},n),{createdAt:new Date().toISOString()});return this.#n.pipe(g(o=>o.createOne(r)))},this.updateUIElementTemplate=n=>this.fetchUIElementTemplate(n.id).pipe(g(r=>{let o=f(c({},n),{createdAt:r.createdAt,updatedAt:new Date().toISOString()});return this.#n.pipe(g(i=>i.updateOne(o)),$({next:()=>{this.#t.updateOrRegisterTemplate(o)}}))}))}#t;#e;#n;fetchUIElementTemplate(n){return this.#n.pipe(g(r=>r.getOne(n)),j(r=>{if(r===null)throw new N({error:`UI element template with ID ${n} does not exist in indexed db`,status:404});return r}))}async resetExampleTemplates(){let n=await l(this.#n);for(let r of Ft){await n.deleteOne(r.id);let o=f(c({},r),{createdAt:new Date().toISOString()});await n.createOne(o)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ke={query:{}},rt=new Set([Pt]),$r=B({providedIn:"root"},S(ke),H((t=p(nt))=>({fetchAll:()=>l(t.getAllUIElementTemplates()),fetch:e=>l(t.fetchUIElementTemplate(e)),create:e=>l(t.createUIElementTemplate(e)),update:e=>l(t.updateUIElementTemplate(e))})),v(({entities:t,query:e})=>({allUIElementTemplatesInfo:d(()=>t().map(({id:n,createdAt:r,updatedAt:o,name:i,description:a,type:s})=>({id:n,type:s,createdAt:r,updatedAt:o,name:i,description:a}))),filteredUIElementTemplates:d(()=>{let{id:n,isLayout:r=!1}=e();return t().filter(o=>{let i=!0;return n&&(i=i&&o.id===n),r&&(i=i&&rt.has(o.type)),i})},{equal:Ct})})),M((t,e=p(nt))=>({updateQuery:n=>{h(t,{query:n})},resetMockTemplates:async()=>{await e.resetExampleTemplates(),await t.loadAll()}})),W({onInit:async({loadAll:t})=>{await t()}})),Lr=({id:t,isLayout:e})=>n=>{let r=!0;return t&&(r=r&&n.id===t),e?r=r&&rt.has(n.type):r=r&&!rt.has(n.type),r};var De=w.strictObject({createdAt:w.string(),updatedAt:w.string().optional()}),_e=w.strictObject({name:w.string(),description:w.string()}),Br=w.strictObject({id:w.string()}).merge(De).merge(_e);function Ke(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ot(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Vt(Object(n),!0).forEach(function(r){Ke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ue(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,i;for(i=0;i<r.length;i++)o=r[i],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function zt(t,e){if(t==null)return{};var n=Ue(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Zt(t,e){return $e(t)||Le(t,e)||Ne(t,e)||qe()}function $e(t){if(Array.isArray(t))return t}function Le(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,o=!1,i=void 0;try{for(var a=t[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(u){o=!0,i=u}finally{try{!r&&a.return!=null&&a.return()}finally{if(o)throw i}}return n}}function Ne(t,e){if(t){if(typeof t=="string")return Gt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gt(t,e)}}function Gt(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Be(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Yt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Qt(Object(n),!0).forEach(function(r){Be(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qt(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function We(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduceRight(function(o,i){return i(o)},r)}}function C(t){return function e(){for(var n=this,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return o.length>=t.length?t.apply(this,o):function(){for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return e.apply(n,[].concat(o,s))}}}function z(t){return{}.toString.call(t).includes("Object")}function Fe(t){return!Object.keys(t).length}function k(t){return typeof t=="function"}function He(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ve(t,e){return z(e)||E("changeType"),Object.keys(e).some(function(n){return!He(t,n)})&&E("changeField"),e}function Ge(t){k(t)||E("selectorType")}function ze(t){k(t)||z(t)||E("handlerType"),z(t)&&Object.values(t).some(function(e){return!k(e)})&&E("handlersType")}function Ze(t){t||E("initialIsRequired"),z(t)||E("initialType"),Fe(t)&&E("initialContent")}function Qe(t,e){throw new Error(t[e]||t.default)}var Ye={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},E=C(Qe)(Ye),G={changes:Ve,selector:Ge,handler:ze,initial:Ze};function Xe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};G.initial(t),G.handler(e);var n={current:t},r=C(en)(n,e),o=C(tn)(n),i=C(G.changes)(t),a=C(Je)(n);function s(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(Y){return Y};return G.selector(O),O(n.current)}function u(O){We(r,o,i,a)(O)}return[s,u]}function Je(t,e){return k(e)?e(t.current):e}function tn(t,e){return t.current=Yt(Yt({},t.current),e),e}function en(t,e,n){return k(e)?e(t.current):Object.keys(n).forEach(function(r){var o;return(o=e[r])===null||o===void 0?void 0:o.call(e,t.current[r])}),n}var nn={create:Xe},Xt=nn;var rn={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}},Jt=rn;function on(t){return function e(){for(var n=this,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return o.length>=t.length?t.apply(this,o):function(){for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return e.apply(n,[].concat(o,s))}}}var te=on;function an(t){return{}.toString.call(t).includes("Object")}var ee=an;function sn(t){return t||ne("configIsRequired"),ee(t)||ne("configType"),t.urls?(cn(),{paths:{vs:t.urls.monacoBase}}):t}function cn(){console.warn(re.deprecation)}function un(t,e){throw new Error(t[e]||t.default)}var re={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},ne=te(un)(re),ln={config:sn},oe=ln;var pn=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(o){return n.reduceRight(function(i,a){return a(i)},o)}},ie=pn;function ae(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],ae(t[n],e[n]))}),ot(ot({},t),e)}var se=ae;var dn={type:"cancelation",msg:"operation is manually canceled"};function fn(t){var e=!1,n=new Promise(function(r,o){t.then(function(i){return e?o(dn):r(i)}),t.catch(o)});return n.cancel=function(){return e=!0},n}var Z=fn;var mn=Xt.create({config:Jt,isInitialized:!1,resolve:null,reject:null,monaco:null}),ce=Zt(mn,2),D=ce[0],Q=ce[1];function hn(t){var e=oe.config(t),n=e.monaco,r=zt(e,["monaco"]);Q(function(o){return{config:se(o.config,r),monaco:n}})}function gn(){var t=D(function(e){var n=e.monaco,r=e.isInitialized,o=e.resolve;return{monaco:n,isInitialized:r,resolve:o}});if(!t.isInitialized){if(Q({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),Z(it);if(window.monaco&&window.monaco.editor)return ue(window.monaco),t.resolve(window.monaco),Z(it);ie(yn,bn)(vn)}return Z(it)}function yn(t){return document.body.appendChild(t)}function wn(t){var e=document.createElement("script");return t&&(e.src=t),e}function bn(t){var e=D(function(r){var o=r.config,i=r.reject;return{config:o,reject:i}}),n=wn("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function vn(){var t=D(function(n){var r=n.config,o=n.resolve,i=n.reject;return{config:r,resolve:o,reject:i}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){ue(n),t.resolve(n)},function(n){t.reject(n)})}function ue(t){D().monaco||Q({monaco:t})}function Sn(){return D(function(t){var e=t.monaco;return e})}var it=new Promise(function(t,e){return Q({resolve:t,reject:e})}),En={config:hn,init:gn,__getMonacoInstance:Sn},at=En;var le=(()=>{class t{#t=L(null);#e=Rt(this.#t).pipe(U(n=>n!==null));constructor(){this.#n()}#n(){at.init().then(n=>{this.#t.set(n)})}async createEditor(n,r){return(await l(this.#e)).editor.create(n,r)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var In=["editorContainer"];function On(t,e){t&1&&(St(0,"span"),Tt(1,"Loading..."),Et())}var Ao=(()=>{class t{constructor(){this.#t=p(le),this.configs=mt.required(),this.valueChanged=ft(),this.editorContainerSig=yt.required("editorContainer"),this.editorInstanceResource=Mt({request:()=>({configs:this.configs()}),loader:({request:n})=>this.#n(n.configs)}),this.#e=X(()=>{let n=this.editorInstanceResource.value();if(!n)return;let{valueChangeDebounceTime:r=500}=b(this.configs),o=xt(()=>{let i=n.getValue();this.valueChanged.emit(i)},r);n.onDidChangeModelContent(o)})}#t;#e;#n(n){let r=b(this.editorContainerSig).nativeElement;for(;r.hasChildNodes()&&r.firstChild;)r.removeChild(r.firstChild);let o=document.createElement("div");return o.style.width="100%",o.style.height="100%",r.appendChild(o),this.#t.createEditor(o,{language:n.language,value:n.initialValue??"",theme:"vs-dark",wordWrap:"on",minimap:{enabled:!1},automaticLayout:!0})}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=wt({type:t,selectors:[["prime-ng-playground-shared-code-editor"]],viewQuery:function(r,o){r&1&&Ot(o.editorContainerSig,In,5),r&2&&jt()},inputs:{configs:[1,"configs"]},outputs:{valueChanged:"valueChanged"},decls:3,vars:1,consts:[["editorContainer",""],[1,"editor-container"]],template:function(r,o){r&1&&(It(0,"div",1,0),bt(2,On,2,0,"span")),r&2&&(gt(2),vt(o.editorInstanceResource.isLoading()?2:-1))},dependencies:[At],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex}[_nghost-%COMP%]   .editor-container[_ngcontent-%COMP%]{flex-grow:1}"]})}}return t})();export{Ao as a,br as b,rt as c,$r as d,Lr as e};
