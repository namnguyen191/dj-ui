import{a as L}from"./chunk-O6NCSUHF.js";import{a as _}from"./chunk-FI4W5XJG.js";import{a as U}from"./chunk-63KTETU3.js";import{a as C}from"./chunk-CB73VGS7.js";import{a as T,b as w}from"./chunk-HAEKH4MG.js";import{p as N}from"./chunk-RNE5JESU.js";import{B as y,I,S as s,U as g,Y as l,ca as c,g as b,k as R,p as m,pa as E,r as u}from"./chunk-J33AFEAQ.js";import{a as i,b as n}from"./chunk-VKRCUX5N.js";var k={id:"TABLES_DEMO.LAYOUT",name:"Tables demo layout",description:"A simple layout with a bunch of tables to demo them",uiElementInstances:[{id:"instance-1",uiElementTemplateId:"SERVER_SIDE_PAGINATION.CARBON_TABLE",positionAndSize:{x:0,y:0,rows:20,cols:8}},{id:"instance-2",uiElementTemplateId:"POKEMON_PARALLEL_REQUEST.CARBON_TABLE"},{id:"instance-3",uiElementTemplateId:"MIX_REQUESTS.CARBON_TABLE"},{id:"instance-4",uiElementTemplateId:"IN_MEMORY_PAGINATION.CARBON_TABLE",positionAndSize:{x:0,y:20,rows:20,cols:8}}]};var $={id:"JOKE_API_REMOTE_RESOURCE",options:{requests:[{fetcherId:"httpFetcher",configs:{endpoint:"https://official-joke-api.appspot.com/random_joke",method:"GET"},interpolation:"<${ return this.$current }$>"}]}};var v={id:"POKEMON_PAGINATION.REMOTE_RESOURCE",stateSubscription:{watchedScopes:{global:["pokemonPage"]},variables:{currentPage:"<${ return this.state?.global?.pokemonPage?.selectedPage ?? 0 }$>",currentItemPerPage:"<${ return this.state?.global?.pokemonPage?.pageLength ?? 10 }$>"}},options:{requests:[{fetcherId:"httpFetcher",configs:{endpoint:"<${ return `https://pokeapi.co/api/v2/pokemon?offset=${(this.state.variables.currentPage) * (this.state.variables.currentItemPerPage)}&limit=${this.state.variables.currentItemPerPage}` }$>",method:"GET"},interpolation:"<${ return { pokemons: this.$current.results, totalCount: this.$current.count } }$>"}]}};var B={id:"POKEMON_PARALLEL.REMOTE_RESOURCE",stateSubscription:{watchedScopes:{global:["page"]}},options:{parallel:!0,requests:[{fetcherId:"httpFetcher",configs:{endpoint:"https://pokeapi.co/api/v2/pokemon/1",method:"GET"},interpolation:"<${ return this.$current }$>"},{fetcherId:"httpFetcher",configs:{endpoint:"https://pokeapi.co/api/v2/pokemon/2",method:"GET"},interpolation:"<${ return this.$current }$>"},{fetcherId:"httpFetcher",configs:{endpoint:"https://pokeapi.co/api/v2/pokemon/3",method:"GET"},interpolation:"<${ return this.$current }$>"}]}};var M={id:"US_POP.REMOTE_RESOURCE",options:{requests:[{fetcherId:"httpFetcher",configs:{endpoint:"https://datausa.io/api/data?drilldowns=State&measures=Population&year=2020",method:"GET"},interpolation:"<${ return this.$current.data }$>"}]}};var x={id:"US_POP_PAGINATION.REMOTE_RESOURCE",stateSubscription:{watchedScopes:{global:["page"]}},options:{requests:[{fetcherId:"httpFetcher",configs:{endpoint:"<${ return 'https://datausa.io/api/data?drilldowns=State&measures=Population&year=20' + (this.state.global.page?.pageSize ?? 20) }$>",method:"GET"},interpolation:"<${ return this.$current.data }$>"}],onSuccess:[{type:"addToState",payload:{scope:"global",data:{usPopulation:"<${ return [...this.state.global.usPopulation ?? [], ...this.$result] }$> "}}}]}};var D={id:"CAROUSEL_CARD_TEST.CARBON_CAROUSEL_CARD",type:"CARBON_CAROUSEL_CARD",name:"Carbon carousel card test",description:"A simple carousel card combine a carousel with a text card",options:{title:"Red cherry",description:"Red rili shrimp are a visually striking and easy-to-care-for addition to any freshwater aquarium. Their vibrant colors and clear midsection create a stunning contrast, making them a favorite for shrimp enthusiasts who enjoy breeding and maintaining colorful shrimp colonies. In addition to their beauty, they contribute to the overall cleanliness of the tank, helping to control algae and detritus",carouselId:"CAROUSEL_TEST.CARBON_CAROUSEL"}};var j={id:"CAROUSEL_TEST.CARBON_CAROUSEL",type:"CARBON_CAROUSEL",name:"Carbon carousel test",description:"A simple carousel that displays a bunch of shrimps",options:{imageUrls:["https://www.fishi-pedia.com/wp-content/uploads/2014/12/Caridina-woltareckae.jpg","https://www.fishi-pedia.com/wp-content/uploads/2017/10/Caridina-logemanni-Super-Crystal-Red-Double-Lines.jpg","https://aquaticarts.com/cdn/shop/files/SuperTigerShrimp_AABred3_1080x.jpg?v=1686854141","https://www.aquasabi.de/vcdn/images/item/large/TNqDLfnCz9/caridina-dennerli.jpg"]}};var q={id:"IN_MEMORY_PAGINATION.CARBON_TABLE",type:"CARBON_TABLE",name:"Carbon in memory pagination table",description:"A table with support for in-memory pagination",remoteResourceIds:["US_POP.REMOTE_RESOURCE"],stateSubscription:{watchedScopes:{global:["usPopPage"]}},options:{title:"In memory pagination table",headers:["State","Year","Population"],rows:'<${ const currentPage=this.state?.global?.usPopPage?.selectedPage??1;const currentPageLength=this.state?.global?.usPopPage?.pageLength??15;const startPageIndex=(currentPage-1)*currentPageLength;const endPageIndex=currentPage*currentPageLength;return this.remoteResourcesStates?.results?.["US_POP.REMOTE_RESOURCE"]?.result?.slice(startPageIndex,endPageIndex)?.map((({State:State,Year:Year,Population:Population})=>[State,Year,Population]))??[]; }$>',pagination:{totalDataLength:"<${ return this.remoteResourcesStates?.results?.['US_POP.REMOTE_RESOURCE']?.result?.length ?? 0 }$>",pageSizes:[15,20,25,50],pageInputDisabled:!1}},eventsHooks:{paginationChanged:[{type:"addToState",payload:{scope:"global",data:{usPopPage:"<${ return this.$eventOutput }$>"}}}]}};var F={id:"MIX_REQUESTS.CARBON_TABLE",type:"CARBON_TABLE",name:"Mix requests table",description:"A table that demonstrate how to combine multiple remote resources",remoteResourceIds:["POKEMON_PARALLEL.REMOTE_RESOURCE","US_POP_PAGINATION.REMOTE_RESOURCE"],options:{title:"US population over the year and pokemon data",headers:["State","Year","Population","ID","Name","Height","Weight","Types"],rows:`<\${ const pokemonRows=this.remoteResourcesStates?.results?.['POKEMON_PARALLEL.REMOTE_RESOURCE']?.result?.map((({id:id,name:name,height:height,weight:weight,types:types})=>[id,name,height,weight,types.map((typeObj=>typeObj.type.name)).join(", ")]))??[];const usPopulationRows=this.remoteResourcesStates?.results?.["US_POP_PAGINATION.REMOTE_RESOURCE"]?.result?.map((({State:State,Year:Year,Population:Population})=>[State,Year,Population]))??[];let combinedRows=usPopulationRows.map(((usPopRow,idx)=>{const matchingPokemonRow=pokemonRows[idx];if(matchingPokemonRow){return[...usPopRow,...matchingPokemonRow]}return[...usPopRow,"No data","No data","No data","No data","No data"]}));return combinedRows; }$>`}};var G={id:"POKEMON_PARALLEL_REQUEST.CARBON_TABLE",type:"CARBON_TABLE",name:"Parallalel requests table",description:"A table that demonstrate how to make requests in parallel",remoteResourceIds:["POKEMON_PARALLEL.REMOTE_RESOURCE"],options:{title:"Fetching pokemon data in parallel",headers:["ID","Name","Height","Weight","Types"],rows:"<${ return this.remoteResourcesStates?.results?.['POKEMON_PARALLEL.REMOTE_RESOURCE']?.result?.map(({ id, name, height, weight, types }) => ([id, name, height, weight, types.map(typeObj => typeObj.type.name).join(', ')])) ?? [] }$>"}};var K={id:"SERVER_SIDE_PAGINATION.CARBON_TABLE",type:"CARBON_TABLE",name:"Server side pagination table",description:"A table that demonstrate the server-side pagination pattern",remoteResourceIds:["POKEMON_PAGINATION.REMOTE_RESOURCE"],stateSubscription:{watchedScopes:{global:["usPopPage"]}},options:{title:"Server side pagination table",headers:["Name","Url"],rows:'<${ return this.remoteResourcesStates?.results?.["POKEMON_PAGINATION.REMOTE_RESOURCE"]?.result?.pokemons?.map(({name, url}) => ([name, url])) ?? [] }$>',pagination:{totalDataLength:"<${ return this.remoteResourcesStates?.results?.['POKEMON_PAGINATION.REMOTE_RESOURCE']?.result?.totalCount ?? 0 }$>",pageSizes:[10,15,25,50],pageInputDisabled:!1}},eventsHooks:{paginationChanged:[{type:"addToState",payload:{scope:"global",data:{pokemonPage:"<${ return this.$eventOutput }$>"}}},{type:"showTestNotification"}]}};var Y={id:" TEXT_CARD_TEST.CARBON_TEXT_CARD",type:"CARBON_TEXT_CARD",name:"Text card test",description:"A simple text card",remoteResourceIds:["JOKE_API_REMOTE_RESOURCE"],options:{title:"Neocaridina",subTitle:"Beginner level species",avatarUrl:"https://cdn-icons-png.flaticon.com/512/2347/2347004.png",imageUrl:"https://coburgaquarium.com.au/cdn/shop/files/CoburgAquariumBloodyMaryAquariumShrimp.jpg?v=1697349869",body:`Neocaridina shrimp are a popular species of freshwater shrimp often kept in aquariums due to their small size, vibrant colors, and ease of care. The most famous type is the Neocaridina davidi, commonly known as the Cherry Shrimp because of its bright red coloration, though they come in many colors, including blue, yellow, and green.

They reproduce easily in the right conditions, which makes them a favorite for hobbyists looking to create a self-sustaining shrimp colony.`,clickable:!0},eventsHooks:{onCardClicked:[{type:"showTestNotification"},{type:"navigate",payload:{navigationType:"internal",url:"/dui-e2e/button-patterns"}}]}};var H=[D,j,q,F,G,K,Y],z=[k],V=[$,v,B,x,M];var ce="DJ_UI_LOCAL_DB",le=2,me=["layoutTemplates","uiElementTemplates","remoteResourceTemplates"],f=(()=>{class o{#e;constructor(){this.#e=new b({status:"idle",conn:null}),this.db$=this.#e.asObservable().pipe(I(2e3)),this.#t()}getRepo(e){return m(this.db$.pipe(y(t=>t.conn!==null),u(t=>new P(t.conn,e))))}#t(){let e=this.#e.getValue();if(e.status==="ready"||e.status==="initializing")return;let t=indexedDB.open(ce,le);t.onupgradeneeded=r=>{let a=r.target.result;for(let p of me)a.objectStoreNames.contains(p)||a.createObjectStore(p,{keyPath:"id",autoIncrement:!1})},t.onsuccess=()=>{this.#e.next({status:"ready",conn:t.result})},t.onerror=()=>{this.#e.next({status:"error",conn:null})}}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),P=class{#e;#t;constructor(O,e){this.getAll=()=>new Promise((t,r)=>{let d=this.#e.transaction(this.#t,"readonly").objectStore(this.#t).getAll();d.onsuccess=()=>{t(d.result)},d.onerror=()=>{r(d.error)}}),this.createOne=t=>new Promise((r,a)=>{let h=this.#e.transaction(this.#t,"readwrite").objectStore(this.#t).add(t);h.onsuccess=()=>{r(t)},h.onerror=()=>{a(h.error)}}),this.updateOne=t=>new Promise((r,a)=>{let h=this.#e.transaction(this.#t,"readwrite").objectStore(this.#t).put(t);h.onsuccess=()=>{r(t)},h.onerror=()=>{a(h.error)}}),this.#e=O,this.#t=e}getOne(O){return new Promise((e,t)=>{let p=this.#e.transaction(this.#t,"readonly").objectStore(this.#t).get(O);p.onsuccess=()=>{if(p.result===void 0){e(null);return}e(p.result)},p.onerror=()=>{t(p.error)}})}clearAll(){return new Promise((O,e)=>{let a=this.#e.transaction(this.#t,"readwrite").objectStore(this.#t).clear();a.onsuccess=()=>{if(a.result===void 0){O();return}e(a.result)},a.onerror=()=>{e(a.error)}})}};var Xe=(()=>{class o extends L{constructor(){super(...arguments),this.#e=c(_),this.#t=c(f),this.#r=R(this.#t.getRepo("layoutTemplates")),this.getAllLayoutTemplates=()=>this.#r.pipe(s(e=>e.getAll())),this.createLayoutTemplate=e=>{let t=n(i({},e),{createdAt:new Date().toUTCString()});return this.#r.pipe(s(r=>r.createOne(t)))},this.updateLayoutTemplate=e=>this.fetchLayoutTemplate(e.id).pipe(s(t=>{let r=n(i({},e),{createdAt:t.createdAt,updatedAt:new Date().toUTCString()});return this.#r.pipe(s(a=>a.updateOne(r)),g({next:()=>{this.#e.updateOrRegisterTemplate(r)}}))}))}#e;#t;#r;fetchLayoutTemplate(e){return this.#r.pipe(s(t=>t.getOne(e)),u(t=>{if(t===null)throw new T({error:`Layout template with ID ${e} does not exist in indexed db`,status:404});return t}))}async resetTemplates(){let e=await m(this.#r);await e.clearAll();for(let t of z){let r=n(i({},t),{createdAt:new Date().toUTCString()});await e.createOne(r)}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=E(o)))(r||o)}})()}static{this.\u0275prov=l({token:o,factory:o.\u0275fac})}}return o})();var S="http://localhost:8080/remote-resource-templates",W=(()=>{class o{constructor(){this.#e=c(w),this.getAllRemoteResourceTemplates=()=>this.#e.get(S),this.createRemoteResourceTemplate=e=>this.#e.post(S,e),this.updateRemoteResourceTemplate=e=>this.#e.put(S,e)}#e;fetchRemoteResourceTemplate(e){return this.#e.get(`${S}/${e}`)}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var ut=(()=>{class o extends W{constructor(){super(...arguments),this.#e=c(C),this.#t=c(f),this.#r=R(this.#t.getRepo("remoteResourceTemplates")),this.getAllRemoteResourceTemplates=()=>this.#r.pipe(s(e=>e.getAll())),this.createRemoteResourceTemplate=e=>{let t=n(i({},e),{createdAt:new Date().toUTCString()});return this.#r.pipe(s(r=>r.createOne(t)))},this.updateRemoteResourceTemplate=e=>this.fetchRemoteResourceTemplate(e.id).pipe(s(t=>{let r=n(i({},e),{createdAt:t.createdAt,updatedAt:new Date().toUTCString()});return this.#r.pipe(s(a=>a.updateOne(r)),g({next:()=>{this.#e.updateTemplate(r)}}))}))}#e;#t;#r;fetchRemoteResourceTemplate(e){return this.#r.pipe(s(t=>t.getOne(e)),u(t=>{if(t===null)throw new T({error:`Remote resource template with ID ${e} does not exist in indexed db`,status:404});return t}))}async resetTemplates(){let e=await m(this.#r);await e.clearAll();for(let t of V){let r=n(i({},t),{createdAt:new Date().toUTCString()});await e.createOne(r)}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=E(o)))(r||o)}})()}static{this.\u0275prov=l({token:o,factory:o.\u0275fac})}}return o})();var bt=(()=>{class o extends U{constructor(){super(...arguments),this.#e=c(N),this.#t=c(f),this.#r=R(this.#t.getRepo("uiElementTemplates")),this.getAllUIElementTemplates=()=>this.#r.pipe(s(e=>e.getAll())),this.createUIElementTemplate=e=>{let t=n(i({},e),{createdAt:new Date().toUTCString()});return this.#r.pipe(s(r=>r.createOne(t)))},this.updateUIElementTemplate=e=>this.fetchUIElementTemplate(e.id).pipe(s(t=>{let r=n(i({},e),{createdAt:t.createdAt,updatedAt:new Date().toUTCString()});return this.#r.pipe(s(a=>a.updateOne(r)),g({next:()=>{this.#e.updateOrRegisterTemplate(r)}}))}))}#e;#t;#r;fetchUIElementTemplate(e){return this.#r.pipe(s(t=>t.getOne(e)),u(t=>{if(t===null)throw new T({error:`UI element template with ID ${e} does not exist in indexed db`,status:404});return t}))}async resetTemplates(){let e=await m(this.#r);await e.clearAll();for(let t of H){let r=n(i({},t),{createdAt:new Date().toUTCString()});await e.createOne(r)}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=E(o)))(r||o)}})()}static{this.\u0275prov=l({token:o,factory:o.\u0275fac})}}return o})();export{Xe as a,W as b,ut as c,bt as d};
