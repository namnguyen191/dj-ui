import{a as V}from"./chunk-QMDDZFVV.js";import{a as D,b as F,c as C,d as z}from"./chunk-IJWDW754.js";import{a as G}from"./chunk-QDACP3EQ.js";import{a as B}from"./chunk-HPV222VY.js";import{a as K}from"./chunk-6QAAQLBW.js";import{a as q}from"./chunk-XTFKQCFP.js";import{a as W}from"./chunk-DK32R33J.js";import{f as H}from"./chunk-4MFS4X54.js";import{b as S,d as k}from"./chunk-RSFIQMZT.js";import{a,g as x,j as Z,m as J,n as $,q as T,r as M,u as j}from"./chunk-DM5ORT33.js";import{E as U,Gb as v,Hb as E,Ic as A,W as h,Wc as I,Yb as y,_ as p,ba as w,ea as i,f as R,fa as f,j as N,jb as g,u as _,y as b}from"./chunk-Z6JASTJQ.js";var Q=new w("COMMON_SETUP_CONFIG");var X=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=g({type:e,selectors:[["dj-ui-common-default-ui-element-infinite-error-component"]],decls:2,vars:0,template:function(o,r){o&1&&(v(0,"p"),y(1,"Infinite loop detected in element rendering!"),E())},dependencies:[I],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}}return e})();var Y=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=g({type:e,selectors:[["dj-ui-common-default-ui-element-loading-component"]],decls:2,vars:0,template:function(o,r){o&1&&(v(0,"p"),y(1,"Loading UI Element..."),E())},dependencies:[I],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}}return e})();var ee=()=>R(U(e=>e.type==="MISSING_REMOTE_RESOURCE_TEMPLATE")),te=()=>R(U(e=>e.type==="MISSING_UI_ELEMENT_TEMPLATE"));var oe=(()=>{class e{constructor(){this.#t=i(S),this.singleFileUploadFetcher=t=>{let{endpoint:o,file:r,responseType:l="json"}=t,c=new FormData;return c.append("file",r),this.#t.post(o,c,{responseType:l})}}#t;static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var L=(()=>{class e{constructor(){this.#t=i(S),this.#e=t=>{let{endpoint:o,method:r,headers:l,body:c}=t;return this.#t.request(r,o,{headers:l,body:c})},this.httpFetcher=this.#e.bind(this)}#t;#e;static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ie=a.strictObject({remoteResourceId:a.string()},{errorMap:()=>({message:'Invalid triggerRemoteResource action hook payload, example: { "type": "triggerRemoteResource", "payload": { "remoteResourceId": "123" }  } '})}),re=a.strictObject({scope:$,data:V},{errorMap:()=>({message:'Invalid addToState action hook payload, example: { "type": "addToState", "payload": { "scope": "global", data: "{ "some": "data" }" }  } '})}),ne=a.strictObject({navigationType:a.union([a.literal("internal"),a.literal("external")]),url:a.string()},{errorMap:()=>({message:'Invalid navigate action hook payload, example: { "type": "navigate", "payload": { "navigationType": "internal", url: "/my/route" }  } '})}),O=(()=>{class e{constructor(){this.#t=i(F),this.#e=i(T),this.#o=i(H),this.handleTriggerRemoteResource=({remoteResourceId:t})=>{this.#t.triggerResource(t)},this.handleAddToState=t=>{this.#e.addToState(t)},this.navigate=({navigationType:t,url:o})=>{t==="internal"?this.#o.navigateByUrl(o):window.open(o,"_blank")?.focus()}}#t;#e;#o;static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var se=(()=>{class e{#t;#e;#o;#i;constructor(){this.#t=i(A),this.FILE_INPUT_ELE_ID="file_input_element",this.#e=null,this.#o=new N,this.#i=new Error("File input element has not been initialized"),this.#r()}selectFiles(t={}){if(!this.#e)throw new Error("File input element has not been initialized");let{single:o,extensions:r=[]}=t;return o?this.#n():this.#s(),this.#a(r),this.#e.click(),_(this.#o)}#r(){let t=this.#t.getElementById(this.FILE_INPUT_ELE_ID);if(t){this.#e=t;return}this.#e=this.#t.createElement("input"),this.#e.setAttribute("id",this.FILE_INPUT_ELE_ID),this.#e.setAttribute("type","file"),this.#e.setAttribute("multiple",""),this.#e.style.display="none",this.#t.body.append(this.#e),this.#e.addEventListener("change",o=>{let r=o.target.files;r&&this.#o.next(r)}),this.#e.addEventListener("cancel",()=>{this.#o.next(null)})}#n(){if(!this.#e)throw this.#i;this.#e.removeAttribute("multiple")}#s(){if(!this.#e)throw this.#i;this.#e.setAttribute("multiple","")}#a(t){if(!this.#e)throw this.#i;if(t.length===0){this.#e.removeAttribute("accept");return}let o=t.map(r=>`.${r}`).join(",");this.#e.setAttribute("accept",o)}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ae=()=>{let e=i(O),n=i(x),t={addToState:{handler:e.handleAddToState,payloadParser:re},triggerRemoteResource:{handler:e.handleTriggerRemoteResource,payloadParser:ie},navigate:{handler:e.navigate,payloadParser:ne}};n.registerHooks(t)},pe=()=>{let e=i(L).httpFetcher;i(D).registerFetcher("httpFetcher",e)};var ce=e=>{let{getUiElementTemplate:n,getRemoteResourceTemplate:t}=e,o=i(M),r=i(j),l=i(k),c=o.getEvents().pipe(G()),P=u=>h({next:s=>{s.id!==u&&console.warn(`Request for template with id ${u} but received ${s.id} instead. This might cause DJ-UI to register the wrong template, leading to missing UI. Please check your template configuration for mis-matching id`)}});n&&c.pipe(te(),b(s=>{let m=s.payload.id;return r.startRegisteringTemplate(m),n(m).pipe(P(m))}),h(s=>{r.registerTemplate(s)})).subscribe(),t&&c.pipe(ee(),b(s=>{let m=s.payload.id;return l.startRegisteringTemplate(m),t(m).pipe(P(m))}),h(s=>l.registerTemplate(s))).subscribe()},me=e=>{let n=i(C);for(let[t,o]of Object.entries(e))n.registerUIElement({type:t,component:o})},le=e=>{let n=i(C);for(let[t,o]of Object.entries(e))n.registerUIElementLoader({type:t,loader:o})},Ye=()=>{let e;try{e=i(Q)}catch{Z("No configs was provided for DJ-UI default setup, please provide values for the COMMON_SETUP_CONFIG token");return}ae(),pe();let{templatesHandlers:n,componentsMap:t,componentLoadersMap:o}=e;n&&ce(n),t&&me(t),o&&le(o)},et=()=>f([j,k,M,D,J,F,T,C,x]),tt=()=>f([oe,se,L,O]),ot=()=>f([{provide:z,useValue:{uiElementLoadingComponent:Y,uiElementInfiniteErrorComponent:X}}]);var nt={[B]:()=>import("./chunk-G7Y6R74K.js").then(e=>e.SimpleGridLayoutComponent)};var pt={[K]:()=>import("./chunk-IJXDP5PM.js").then(e=>e.SimpleTextComponent),[q]:()=>import("./chunk-SKB2ULB7.js").then(e=>e.SimpleImageComponent),[W]:()=>import("./chunk-PCAAEH37.js").then(e=>e.SimpleTableComponent)};export{Q as a,Ye as b,et as c,tt as d,ot as e,nt as f,pt as g};
