import{a as G}from"./chunk-KIUUS7A2.js";import{a as k}from"./chunk-XRMBQZWE.js";import{f as Z}from"./chunk-GGBZRRSG.js";import{d as E,e as M,g as R,h as I}from"./chunk-QKJLZVOY.js";import{b as y}from"./chunk-JY2GTDED.js";import{b as z}from"./chunk-BQJLUYBS.js";import{a as W,c as Y,e as K,g as Q,i as V,k as X}from"./chunk-P7QEISYO.js";import{a as s,e as $,g as P,j as B,k as q,n as S,p as O}from"./chunk-4RBRHGVV.js";import{b as J,d as x}from"./chunk-SFXEP7JI.js";import{B as T,C as N,F as w,V as f,Z as l,aa as D,b as g,da as r,ga as _,r as L,t as h,x as A}from"./chunk-AGCFPB43.js";var te=(()=>{class e{constructor(){this.#e=r(y),this.singleFileUploadFetcher=t=>{let{endpoint:o,file:c,responseType:d="json"}=t,m=new FormData;return m.append("file",c),this.#e.post(o,m,{responseType:d})}}#e;static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=l({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var oe=(()=>{class e{constructor(){this.#e=r(y),this.#t=t=>{let{endpoint:o,method:c,headers:d,body:m}=t;return this.#e.request(c,o,{headers:d,body:m})},this.httpFetcher=this.#t.bind(this)}#e;#t;static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=l({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var re=s.strictObject({remoteResourceId:s.string()},{errorMap:()=>({message:'Invalid triggerRemoteResource action hook payload, example: { "type": "triggerRemoteResource", "payload": { "remoteResourceId": "123" }  } '})}),ne=s.strictObject({scope:q,data:z},{errorMap:()=>({message:'Invalid addToState action hook payload, example: { "type": "addToState", "payload": { "scope": "global", data: "{ "some": "data" }" }  } '})}),ie=s.strictObject({navigationType:s.union([s.literal("internal"),s.literal("external")]),url:s.string()},{errorMap:()=>({message:'Invalid navigate action hook payload, example: { "type": "navigate", "payload": { "navigationType": "internal", url: "/my/route" }  } '})}),ae=(()=>{class e{constructor(){this.#e=r(R),this.#t=r(S),this.#o=r(Z),this.handleTriggerRemoteResource=({remoteResourceId:t})=>{this.#e.triggerResource(t)},this.handleAddToState=t=>{this.#t.addToState(t)},this.navigate=({navigationType:t,url:o})=>{t==="internal"?this.#o.navigateByUrl(o):window.open(o,"_blank")?.focus()}}#e;#t;#o;static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=l({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var se=()=>g(T(e=>e.type==="MISSING_LAYOUT_TEMPLATE")),pe=()=>g(T(e=>e.type==="MISSING_REMOTE_RESOURCE_TEMPLATE")),ce=()=>g(T(e=>e.type==="MISSING_UI_ELEMENT_TEMPLATE")),me=()=>g(T(e=>e.type==="UI_ELEMENT_REPOSITION"));var ue=new D("COMMON_SETUP_CONFIG"),ge=()=>{let e=r(ae),i=r(P),t={addToState:{handler:e.handleAddToState,payloadParser:ne},triggerRemoteResource:{handler:e.handleTriggerRemoteResource,payloadParser:re},navigate:{handler:e.navigate,payloadParser:ie}};i.registerHooks(t)},he=()=>{let e=r(oe).httpFetcher;r(E).registerFetcher("httpFetcher",e)},Be=()=>{let e=r(te).singleFileUploadFetcher;r(E).registerFetcher("singleFileUploadFetcher",e)},Te=e=>{let{getLayoutTemplate:i,getUiElementTemplate:t,getRemoteResourceTemplate:o,updateElementsPositionsHandler:c}=e,d=r(x),m=r(k),H=r(O),j=r(M),v=d.getEvents().pipe(G()),b=p=>f({next:n=>{n.id!==p&&console.warn(`Request for template with id ${p} but received ${n.id} instead. This might cause DJ-UI to register the wrong template, leading to missing UI. Please check your template configuration for mis-matching id`)}});if(i&&v.pipe(se(),h(n=>{let a=n.payload.id;return m.startRegisteringTemplate(a),i(a).pipe(b(a))}),f(n=>m.registerTemplate(n))).subscribe(),t&&v.pipe(ce(),h(n=>{let a=n.payload.id;return H.startRegisteringTemplate(a),t(a).pipe(b(a))}),f(n=>{H.registerTemplate(n)})).subscribe(),o&&v.pipe(pe(),h(n=>{let a=n.payload.id;return j.startRegisteringTemplate(a),o(a).pipe(b(a))}),f(n=>j.registerTemplate(n))).subscribe(),c){let p=v.pipe(me()),n=p.pipe(w(3e3));p.pipe(N(n),L(C=>C.reduce((u,F)=>{let{payload:{elementId:U,layoutId:le,newPositionAndSize:de}}=F;return u=$(u,`${le}.${U}`,de),u},{})),h(C=>{let u=Object.entries(C).map(([F,U])=>c(F,U));return A(u)})).subscribe()}},fe=e=>{let i=r(I);for(let[t,o]of Object.entries(e))i.registerUIElement({type:t,component:o})},ve=e=>{let i=r(I);for(let[t,o]of Object.entries(e))i.registerUIElementLoader({type:t,loader:o})},qe=()=>{let e;try{e=r(ue)}catch{J("No configs was provided for DJ-UI default setup, please provide values for the COMMON_SETUP_CONFIG token");return}ge(),he();let{templatesHandlers:i,componentsMap:t,componentLoadersMap:o}=e;i&&Te(i),t&&fe(t),o&&ve(o)},ze=()=>_([k,O,M,x,E,B,R,S,I,P]);var Ke={[W]:()=>import("./chunk-T3MRRZSU.js").then(e=>e.CarbonButtonComponent),[Y]:()=>import("./chunk-CE7RZJH4.js").then(e=>e.CarbonTableComponent),[K]:()=>import("./chunk-YELIUOOV.js").then(e=>e.CarbonTextCardComponent),[Q]:()=>import("./chunk-ILGORTMN.js").then(e=>e.CarbonCarouselComponent),[V]:()=>import("./chunk-UBAUPEJX.js").then(e=>e.CarbonCarouselCardComponent),[X]:()=>import("./chunk-6LXJIDQA.js").then(e=>e.CarbonSimpleTextComponent)};export{ue as a,Be as b,qe as c,ze as d,Ke as e};
