import{l as P,v as U}from"./chunk-KGG7IXI2.js";import{A as I,J as L,Jc as N,Oc as k,Xc as R,Y as S,_ as M,a as b,da as j,e as s,f,fb as O,g as v,ga as x,ia as g,lb as D,o as C,r as T,u as w,wa as F}from"./chunk-UJ7YJEPZ.js";var W=l=>{let o=F(void 0);return N(r=>{let c=l().subscribe(a=>o.set(a));r(()=>{c.unsubscribe()})}),o};var Y=new x("ELEMENT_RENDERER_CONFIG"),ie=(()=>{var o,r,i;let c=class c{constructor(){f(this,o);f(this,r);f(this,i);v(this,o,g(Y,{optional:!0})),v(this,r,s(this,o)?.uiElementWrapperComponent),v(this,i,g(U)),this.interpolationService=g(P),this.viewContainerRef=g(O),this.uiElementTemplateId=k.required({alias:"djuiUIElementRenderer"}),this.uiElementTemplate=W(()=>s(this,i).getTemplate(this.uiElementTemplateId()))}checkInputExistsForComponent(t,e){let n=R(t)?.inputs;if(!n)throw new Error("Invalid component");return!!n.find(u=>u.propName===e||u.templateName===e)}getComponentRequiredInputs(t){let e=R(t)?.inputs;if(!e)throw new Error("Invalid component");return e.filter(n=>n.propName.includes("RequiredConfigOption")).map(n=>n.templateName)}generateInputsWithInterpolationTracking(t){let{templateOptions:e,elementInterpolationContext$:n}=t,u=new C({}),$=u.asObservable().pipe(I(p=>!Object.values(p).every(d=>!d))),h=new C({}),V=h.asObservable().pipe(I(p=>!Object.values(p).every(d=>!d))),q={isInterpolationLoading:$,isInterpolationError:V},y={};for(let[p,d]of Object.entries(e)){let B=this.interpolationService.checkForInterpolation(d);y[p]=B?n.pipe(S(E=>{let m=structuredClone(u.getValue());return m[p]=!0,u.next(m),this.interpolationService.interpolate({context:E,value:d})}),L(E=>{let m=structuredClone(h.getValue());return m[p]=!0,h.next(m),console.warn(`Fail to interpolate ${p}. Error: ${E}`),T}),M({next:()=>{let E=structuredClone(h.getValue());E[p]=!1,h.next(E);let m=structuredClone(u.getValue());m[p]=!1,u.next(m)}})):w(d)}return b(b({},q),y)}generateInputsFromRemoteResource(t){let{elementInterpolationContext$:e}=t;return{isResourceLoading:e.pipe(I(n=>!!n.remoteResourcesStates?.isPartialLoading.length)),isResourceError:e.pipe(I(n=>!!n.remoteResourcesStates?.isPartialError.length))}}hasCorrectComponentSymbol(t,e){let n=t.ELEMENT_SYMBOL;return!(e.length&&!e.includes(n))}getUIElementWrapper(t){if(!s(this,r))return null;let e=s(this,r).EXCLUDED_ELEMENTS;return e&&!e.has(t)?this.viewContainerRef.createComponent(s(this,r)):null}};o=new WeakMap,r=new WeakMap,i=new WeakMap,c.\u0275fac=function(e){return new(e||c)},c.\u0275dir=D({type:c,inputs:{uiElementTemplateId:[1,"djuiUIElementRenderer","uiElementTemplateId"]}});let l=c;return l})();var pe=(()=>{var o,r;let i=class i{constructor(){f(this,o,{});f(this,r,{})}registerUIElement(a){let{type:t,component:e}=a;s(this,o)[t]=e}registerUIElementLoader(a){let{type:t,loader:e}=a;s(this,r)[t]=e}getUIElement(a){let t=s(this,o)[a];if(!t){let e=s(this,r)[a];if(e)return e();throw new Error(`${a} has not been registered as a UI Element yet!`)}return Promise.resolve(t)}};o=new WeakMap,r=new WeakMap,i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"});let l=i;return l})();export{W as a,Y as b,ie as c,pe as d};
