import{a as Se,b as Te}from"./chunk-JRTCKBMB.js";import{D as Ee,a as R,b as we,d as ye,e as be,f as ve,g as Ie,h as xe,j as W,l as Ce,m as De}from"./chunk-IMW6CZRX.js";import{b as j,c as _e}from"./chunk-F3GE6OJC.js";import{$a as r,$b as D,$c as ge,B as Y,Bb as b,Ca as F,Cb as o,Eb as oe,F as X,Mb as p,N as Z,Nb as h,Ob as f,Pb as x,Qb as C,Sb as B,Sc as H,Tb as S,Ub as d,Uc as me,Vb as re,Vc as K,Wb as de,Yb as ae,Z as ee,Zb as M,Zc as $,_ as te,_b as T,_c as fe,a as O,ab as _,c as Q,ca as A,cb as ie,dc as g,ec as w,fc as ce,l as v,ma as u,mb as U,mc as N,n as q,na as m,nb as se,oa as I,ob as ne,oc as E,pc as P,r as J,sc as pe,tb as c,tc as he,uc as ue,wa as y,y as G,yb as le}from"./chunk-RVPXDSFJ.js";var Fe=["dropdownButton"],Ue=["dropdownMenu"],Ne=["*"],Pe=(i,n,e,t,s,l,a,k,L,V,z,Be,Me,Re,Oe,Ae)=>({"cds--dropdown":i,"cds--multiselect":n,"cds--multi-select--selected":e,"cds--dropdown--light":t,"cds--list-box--light":s,"cds--list-box--inline":l,"cds--skeleton":a,"cds--dropdown--disabled cds--list-box--disabled":k,"cds--dropdown--readonly":L,"cds--dropdown--invalid":V,"cds--dropdown--warning cds--list-box--warning":z,"cds--dropdown--sm cds--list-box--sm":Be,"cds--dropdown--md cds--list-box--md":Me,"cds--dropdown--lg cds--list-box--lg":Re,"cds--list-box--expanded":Oe,"cds--list-box--invalid":Ae}),He=i=>({a:i}),Ke=i=>({"cds--list-box--up":i}),$e=(i,n)=>({"cds--label--disabled":i,"cds--visually-hidden":n}),je=i=>({"cds--list-box__menu-icon--open":i}),We=i=>({"cds--form__helper-text--disabled":i});function ze(i,n){if(i&1&&(x(0),g(1),C()),i&2){let e=d(2);r(),w(e.label)}}function Qe(i,n){}function qe(i,n){if(i&1&&c(0,Qe,0,0,"ng-template",17),i&2){let e=d(2);o("ngTemplateOutlet",e.label)}}function Je(i,n){if(i&1&&(p(0,"label",16),c(1,ze,2,1,"ng-container",7)(2,qe,1,1,null,7),h()),i&2){let e=d();o("for",e.id)("ngClass",P(4,$e,e.disabled,e.hideLabel)),r(),o("ngIf",!e.isTemplate(e.label)),r(),o("ngIf",e.isTemplate(e.label))}}function Ge(i,n){i&1&&f(0,"div",18)}function Ye(i,n){if(i&1){let e=B();p(0,"div",19),S("click",function(){u(e);let s=d();return m(s.clearSelected())})("keydown.enter",function(){u(e);let s=d();return m(s.clearSelected())}),g(1),I(),p(2,"svg",20),f(3,"path",21),h()()}if(i&2){let e=d();o("title",e.clearText),r(),ce(" ",e.getSelectedCount()," ")}}function Xe(i,n){if(i&1&&(p(0,"span",18),g(1),he(2,"async"),h()),i&2){let e=d();r(),w(ue(2,1,e.getDisplayStringValue()))}}function Ze(i,n){}function et(i,n){if(i&1&&c(0,Ze,0,0,"ng-template",22),i&2){let e=d();o("ngTemplateOutletContext",e.getRenderTemplateContext())("ngTemplateOutlet",e.displayValue)}}function tt(i,n){if(i&1&&(I(),f(0,"svg",23)),i&2){let e=d();o("ngClass",E(2,je,!e.menuIsClosed)),b("aria-label",e.menuButtonLabel)}}function it(i,n){i&1&&(I(),f(0,"svg",24))}function st(i,n){i&1&&(I(),f(0,"svg",25))}function nt(i,n){i&1&&de(0,0,["*ngIf","!menuIsClosed"])}function lt(i,n){i&1&&f(0,"hr",26)}function ot(i,n){if(i&1&&(x(0),g(1),C()),i&2){let e=d(2);r(),w(e.helperText)}}function rt(i,n){}function dt(i,n){if(i&1&&c(0,rt,0,0,"ng-template",17),i&2){let e=d(2);o("ngTemplateOutlet",e.helperText)}}function at(i,n){if(i&1&&(p(0,"div",27),c(1,ot,2,1,"ng-container",7)(2,dt,1,1,null,7),h()),i&2){let e=d();o("ngClass",E(3,We,e.disabled)),r(),o("ngIf",!e.isTemplate(e.helperText)),r(),o("ngIf",e.isTemplate(e.helperText))}}function ct(i,n){if(i&1&&(x(0),g(1),C()),i&2){let e=d(2);r(),w(e.invalidText)}}function pt(i,n){}function ht(i,n){if(i&1&&c(0,pt,0,0,"ng-template",17),i&2){let e=d(2);o("ngTemplateOutlet",e.invalidText)}}function ut(i,n){if(i&1&&(p(0,"div",28),c(1,ct,2,1,"ng-container",7)(2,ht,1,1,null,7),h()),i&2){let e=d();r(),o("ngIf",!e.isTemplate(e.invalidText)),r(),o("ngIf",e.isTemplate(e.invalidText))}}function mt(i,n){if(i&1&&(x(0),g(1),C()),i&2){let e=d(2);r(),w(e.warnText)}}function ft(i,n){}function gt(i,n){if(i&1&&c(0,ft,0,0,"ng-template",17),i&2){let e=d(2);o("ngTemplateOutlet",e.warnText)}}function _t(i,n){if(i&1&&(p(0,"div",28),c(1,mt,2,1,"ng-container",7)(2,gt,1,1,null,7),h()),i&2){let e=d();r(),o("ngIf",!e.isTemplate(e.warnText)),r(),o("ngIf",e.isTemplate(e.warnText))}}var wt=["list"],yt=["listItem"],bt=(i,n)=>({"cds--list-box__menu-item--active":i,"cds--list-box__menu-item--highlighted":n}),vt=i=>({item:i});function It(i,n){if(i&1&&(p(0,"div",9)(1,"label",10),f(2,"input",11)(3,"span",12),p(4,"span",13),g(5),h()()()),i&2){let e=d().$implicit;r(),b("data-contained-checkbox-state",e.selected),r(),o("checked",e.selected)("disabled",e.disabled),r(3),w(e.content)}}function xt(i,n){if(i&1&&(x(0),g(1),C()),i&2){let e=d().$implicit;r(),w(e.content)}}function Ct(i,n){i&1&&(I(),f(0,"svg",14))}function St(i,n){}function Tt(i,n){if(i&1&&c(0,St,0,0,"ng-template",15),i&2){let e=d().$implicit,t=d();o("ngTemplateOutletContext",E(2,vt,e))("ngTemplateOutlet",t.listTpl)}}function Dt(i,n){if(i&1){let e=B();p(0,"li",4),S("click",function(s){let l=u(e).$implicit,a=d();return m(a.doClick(s,l))}),p(1,"div",5,1),c(3,It,6,4,"div",6)(4,xt,2,1,"ng-container",7)(5,Ct,1,0,"svg",8)(6,Tt,1,4,null,7),h()()}if(i&2){let e=n.$implicit,t=n.index,s=d();o("id",s.getItemId(t))("ngClass",P(9,bt,e.selected,s.highlightedItem===s.getItemId(t))),b("aria-selected",e.selected)("title",s.showTitles?e.content:null)("disabled",e.disabled?!0:null),r(3),o("ngIf",!s.listTpl&&s.type==="multi"),r(),o("ngIf",!s.listTpl&&s.type==="single"),r(),o("ngIf",!s.listTpl&&s.type==="single"),r(),o("ngIf",s.listTpl)}}var Le=(()=>{class i{constructor(){this.type="single",this.size="md"}set items(e){}get items(){}getNextItem(){}hasNextElement(){}getNextElement(){}getPrevItem(){}hasPrevElement(){}getPrevElement(){}getSelected(){}getCurrentItem(){}getCurrentElement(){}getListItems(){}propagateSelected(e){}filterBy(e){}initFocus(){}onItemsReady(e){}reorderSelected(e){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ne({type:i,selectors:[["","cdsAbstractDropdownView",""],["","ibmAbstractDropdownView",""]],inputs:{items:"items"},outputs:{select:"select",blurIntent:"blurIntent"},standalone:!1}),i})(),ke={top:0,left:0},Ve=(()=>{class i{constructor(e,t){this.placeholderService=e,this.animationFrameService=t,this.animationFrameSubscription=new O,this._offset=ke}set offset(e){this._offset=Object.assign({},ke,e)}get offset(){return this._offset}appendToBody(e,t,s){t.style.display="block";let l=document.createElement("div");return l.className=`dropdown ${s}`,l.style.width=e.offsetWidth+"px",l.style.position="absolute",l.appendChild(t),this.placeholderService.hasPlaceholderRef()?this.placeholderService.appendElement(l):document.body.appendChild(l),this.menuInstance=l,this.animationFrameSubscription=this.animationFrameService.tick.subscribe(()=>{this.positionDropdown(e,l)}),this.positionDropdown(e,l),l}appendToDropdown(e){if(!this.menuInstance)return;let t=this.menuInstance,s=t.firstElementChild;return this.menuInstance=null,s.style.display="none",e.appendChild(s),this.animationFrameSubscription.unsubscribe(),this.placeholderService.hasPlaceholderRef()&&this.placeholderService.hasElement(t)?this.placeholderService.removeElement(t):document.body.contains(t)&&document.body.removeChild(t),t}updatePosition(e){this.positionDropdown(e,this.menuInstance)}ngOnDestroy(){this.animationFrameSubscription.unsubscribe()}positionDropdown(e,t){if(!t)return;let s=0,l=t.querySelector(".cds--list-box__menu");l&&(e.getBoundingClientRect().left!==l.getBoundingClientRect().left?e.getBoundingClientRect().left-l.getBoundingClientRect().left+l.getBoundingClientRect().right>(window.innerWidth||document.documentElement.clientWidth)&&(s=e.offsetWidth-l.offsetWidth):l.getBoundingClientRect().right>(window.innerWidth||document.documentElement.clientWidth)&&(s=e.offsetWidth-l.offsetWidth));let a=ve("position",["relative","fixed","absolute"],t.parentElement),k=a?a.getBoundingClientRect().top*-1:this.offset.top,L=a?a.getBoundingClientRect().left*-1:this.offset.left+s,V=R.findAbsolute(e,t,"bottom");V=R.addOffset(V,k,L),R.setElement(t,V)}}return i.\u0275fac=function(e){return new(e||i)(A(Se),A(we))},i.\u0275prov=ee({token:i,factory:i.\u0275fac}),i})(),si=(()=>{class i{constructor(e,t,s,l){this.elementRef=e,this.i18n=t,this.dropdownService=s,this.elementService=l,this.id=`dropdown-${i.dropdownCount++}`,this.hideLabel=!1,this.placeholder="",this.displayValue="",this.clearText=this.i18n.get().DROPDOWN.CLEAR,this.size="md",this.type="single",this.theme="dark",this.disabled=!1,this.readonly=!1,this.skeleton=!1,this.inline=!1,this.disableArrowKeys=!1,this.invalid=!1,this.warn=!1,this.appendInline=null,this.selectionFeedback="top-after-reopen",this.menuButtonLabel=this.i18n.get().DROPDOWN.OPEN,this.selectedLabel=this.i18n.get().DROPDOWN.SELECTED,this.selected=new y,this.onClose=new y,this.close=new y,this.hostClass=!0,this.hostWrapperClass=!0,this.fluid=!1,this.menuIsClosed=!0,this._dropUp=!1,this.noop=this._noop.bind(this),this.outsideClick=this._outsideClick.bind(this),this.outsideKey=this._outsideKey.bind(this),this.keyboardNav=this._keyboardNav.bind(this),this.visibilitySubscription=new O,this.onTouchedCallback=this._noop,this._isFocused=!1,this._writtenValue=[],this.propagateChange=a=>{}}get fluidInvalidClass(){return this.invalid&&this.fluid}get fluidFocusClass(){return this.fluid&&this._isFocused&&this.menuIsClosed}get writtenValue(){return this._writtenValue}set writtenValue(e){e&&e.length===0&&this.clearSelected(),this._writtenValue=e}ngOnInit(){this.view&&(this.view.type=this.type)}ngAfterContentInit(){if(!this.view)return;(this.writtenValue&&this.writtenValue.length||typeof this.writtenValue=="number")&&this.writeValue(this.writtenValue),this.view.type=this.type,this.view.size=this.size;let e=t=>t&&t.isUpdate;this.view.select.subscribe(t=>{if(this.type==="single"&&!e(t)&&!Array.isArray(t)&&(this.closeMenu(),t.item&&t.item.selected?this.itemValueKey?this.propagateChange(t.item[this.itemValueKey]):this.propagateChange(t.item):this.propagateChange(null)),this.type==="multi"&&!e(t))if(this.itemValueKey&&this.view.getSelected()){let s=this.view.getSelected().map(l=>l[this.itemValueKey]);this.propagateChange(s)}else this.propagateChange(this.view.getSelected());e(t)||(this.checkForReorder(),this.selected.emit(t))})}ngAfterViewInit(){this.appendInline===null&&be(this.elementRef.nativeElement)?this.appendInline=!1:this.appendInline===null&&(this.appendInline=!0),this.checkForReorder()}ngOnDestroy(){this.appendInline||this._appendToDropdown()}writeValue(e){this.writtenValue=e,this.view.onItemsReady(()=>{if(!e)this.view.propagateSelected([e]);else if(this.type==="single")if(this.itemValueKey){let t=Object.assign({},this.view.getListItems().find(s=>s[this.itemValueKey]===e));t.selected=!0,this.view.propagateSelected([t])}else this.view.propagateSelected([e]);else if(this.itemValueKey){let t=[];for(let s of e)for(let l of this.view.getListItems())l[this.itemValueKey]===s&&t.push(Object.assign({},l,{selected:!0}));this.view.propagateSelected(t)}else this.view.propagateSelected(e);this.checkForReorder()})}onBlur(){this.onTouchedCallback()}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}onKeyDown(e){if(!this.readonly){if(e.key==="Escape"&&!this.menuIsClosed&&e.stopImmediatePropagation(),e.key==="Escape")e.preventDefault(),this.closeMenu(),this.dropdownButton.nativeElement.focus();else if(this.menuIsClosed&&(e.key===" "||e.key==="ArrowDown"||e.key==="ArrowUp")){if(this.disableArrowKeys&&(e.key==="ArrowDown"||e.key==="ArrowUp"))return;e.preventDefault(),this.openMenu()}!this.menuIsClosed&&e.key==="Tab"&&this.dropdownMenu.nativeElement.contains(e.target)&&this.closeMenu(),!this.menuIsClosed&&e.key==="Tab"&&e.shiftKey&&this.closeMenu(),this.type!=="multi"&&this.menuIsClosed&&this.closedDropdownNavigation(e)}}closedDropdownNavigation(e){if(e.key==="ArrowDown"){e.preventDefault(),this.view.getCurrentItem().selected=!1;let t=this.view.getNextItem();t&&(t.selected=!0)}else if(e.key==="ArrowUp"){e.preventDefault(),this.view.getCurrentItem().selected=!1;let t=this.view.getPrevItem();t&&(t.selected=!0)}}getDisplayStringValue(){if(!this.view||this.skeleton)return;let e=this.view.getSelected();return e.length&&(!this.displayValue||!this.isRenderString())?this.type==="multi"?v(this.placeholder):v(e[0].content):e.length&&this.isRenderString()?v(this.displayValue):v(this.placeholder)}isRenderString(){return typeof this.displayValue=="string"}getRenderTemplateContext(){if(!this.view)return;let e=this.view.getSelected();return this.type==="multi"?{items:e}:e&&e.length>0?{item:e[0]}:{}}getSelectedCount(){if(this.view.getSelected())return this.view.getSelected().length}clearSelected(){if(!(this.disabled||this.getSelectedCount()===0)){for(let e of this.view.getListItems())e.selected=!1;this.selected.emit([]),this.propagateChange([])}}valueSelected(){return!!this.view.getSelected()}_noop(){}_outsideClick(e){!this.elementRef.nativeElement.contains(e.target)&&!this.dropdownMenu.nativeElement.contains(e.target)&&this.closeMenu()}_outsideKey(e){!this.menuIsClosed&&e.key==="Tab"&&this.dropdownMenu.nativeElement.contains(e.target)&&this.closeMenu()}_keyboardNav(e){e.key==="Escape"&&!this.menuIsClosed&&e.stopImmediatePropagation(),e.key==="Escape"?(e.preventDefault(),this.closeMenu(),this.dropdownButton.nativeElement.focus()):!this.menuIsClosed&&e.key==="Tab"&&(this.dropdownButton.nativeElement.focus(),this.dropdownButton.nativeElement.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,key:"Tab"})),this.closeMenu())}_appendToDropdown(){this.dropdownService.appendToDropdown(this.elementRef.nativeElement),this.dropdownMenu.nativeElement.removeEventListener("keydown",this.keyboardNav,!0)}_appendToBody(){let e=this.theme==="light"?" cds--list-box--light":"",t=this.menuIsClosed?"":" cds--list-box--expanded";this.dropdownService.appendToBody(this.dropdownButton.nativeElement,this.dropdownMenu.nativeElement,`${this.elementRef.nativeElement.className}${e}${t}`),this.dropdownMenu.nativeElement.addEventListener("keydown",this.keyboardNav,!0)}_shouldDropUp(){let e=this.dropdownMenu&&this.dropdownMenu.nativeElement.querySelector(".cds--list-box__menu"),t=e&&e.getBoundingClientRect();return e&&t?ye(e).reduce((l,a)=>{let k=a.getBoundingClientRect(),L=!(t.bottom<=k.bottom);return l||L},!1):!1}openMenu(){if(this.view.getListItems().length!==0){if(this._dropUp=!1,this.menuIsClosed=!1,!this.appendInline){let e=this.dropdownButton.nativeElement,t=this.elementRef.nativeElement;this.visibilitySubscription=this.elementService.visibility(e,t).subscribe(s=>{s.visible||this.closeMenu()}),this._appendToBody()}setTimeout(()=>{(this.dropUp===null||this.dropUp===void 0)&&(this._dropUp=this._shouldDropUp())},0),document.body.firstElementChild.addEventListener("click",this.noop,!0),document.body.firstElementChild.addEventListener("keydown",this.noop,!0),document.addEventListener("click",this.outsideClick,!0),document.addEventListener("keydown",this.outsideKey,!0),setTimeout(()=>this.view.initFocus(),0)}}closeMenu(){this.menuIsClosed||(this.menuIsClosed=!0,this.checkForReorder(),this.onClose.emit(),this.close.emit(),this.dropdownButton.nativeElement.focus(),this.view.disableScroll&&this.view.disableScroll(),this.appendInline||(this.visibilitySubscription.unsubscribe(),this._appendToDropdown()),document.body.firstElementChild.removeEventListener("click",this.noop,!0),document.body.firstElementChild.removeEventListener("keydown",this.noop,!0),document.removeEventListener("click",this.outsideClick,!0),document.removeEventListener("keydown",this.outsideKey,!0))}toggleMenu(){this.menuIsClosed?this.openMenu():this.closeMenu()}isTemplate(e){return e instanceof ie}handleFocus(e){this._isFocused=e.type==="focus",e.type==="blur"&&this.onBlur()}checkForReorder(){let e=this.menuIsClosed&&this.selectionFeedback==="top-after-reopen";this.type==="multi"&&(e||this.selectionFeedback==="top")&&this.view.reorderSelected()}}return i.dropdownCount=0,i.\u0275fac=function(e){return new(e||i)(_(F),_(W),_(Ve),_(Ie))},i.\u0275cmp=U({type:i,selectors:[["cds-dropdown"],["ibm-dropdown"]],contentQueries:function(e,t,s){if(e&1&&ae(s,Le,7),e&2){let l;T(l=D())&&(t.view=l.first)}},viewQuery:function(e,t){if(e&1&&(M(Fe,7),M(Ue,7)),e&2){let s;T(s=D())&&(t.dropdownButton=s.first),T(s=D())&&(t.dropdownMenu=s.first)}},hostVars:10,hostBindings:function(e,t){e&1&&S("keydown",function(l){return t.onKeyDown(l)}),e&2&&oe("cds--list-box__wrapper--fluid--invalid",t.fluidInvalidClass)("cds--list-box__wrapper--fluid--focus",t.fluidFocusClass)("cds--dropdown__wrapper",t.hostClass)("cds--list-box__wrapper",t.hostWrapperClass)("cds--list-box__wrapper--fluid",t.fluid)},inputs:{id:"id",label:"label",hideLabel:"hideLabel",helperText:"helperText",placeholder:"placeholder",displayValue:"displayValue",clearText:"clearText",size:"size",type:"type",theme:"theme",disabled:"disabled",readonly:"readonly",skeleton:"skeleton",inline:"inline",disableArrowKeys:"disableArrowKeys",invalid:"invalid",invalidText:"invalidText",warn:"warn",warnText:"warnText",appendInline:"appendInline",scrollableContainer:"scrollableContainer",itemValueKey:"itemValueKey",selectionFeedback:"selectionFeedback",menuButtonLabel:"menuButtonLabel",selectedLabel:"selectedLabel",dropUp:"dropUp",fluid:"fluid"},outputs:{selected:"selected",onClose:"onClose",close:"close"},standalone:!1,features:[N([{provide:De,useExisting:i,multi:!0}])],ngContentSelectors:Ne,decls:19,vars:43,consts:[["dropdownButton",""],["dropdownMenu",""],["class","cds--label",3,"for","ngClass",4,"ngIf"],[1,"cds--list-box",3,"ngClass"],["class","cds--list-box__label",4,"ngIf"],["type","button","aria-haspopup","listbox",1,"cds--list-box__field",3,"click","focus","blur","id","ngClass"],["class","cds--list-box__selection cds--tag--filter cds--list-box__selection--multi","tabindex","0",3,"title","click","keydown.enter",4,"ngIf"],[4,"ngIf"],[1,"cds--list-box__menu-icon"],["cdsIcon","chevron--down","size","16",3,"ngClass",4,"ngIf"],["class","cds--list-box__invalid-icon","cdsIcon","warning--filled","size","16",4,"ngIf"],["cdsIcon","warning--alt--filled","size","16","class","cds--list-box__invalid-icon cds--list-box__invalid-icon--warning",4,"ngIf"],[3,"ngClass"],["class","cds--list-box__divider",4,"ngIf"],["class","cds--form__helper-text",3,"ngClass",4,"ngIf"],["class","cds--form-requirement",4,"ngIf"],[1,"cds--label",3,"for","ngClass"],[3,"ngTemplateOutlet"],[1,"cds--list-box__label"],["tabindex","0",1,"cds--list-box__selection","cds--tag--filter","cds--list-box__selection--multi",3,"click","keydown.enter","title"],["focusable","false","preserveAspectRatio","xMidYMid meet","role","img","xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 16 16","aria-hidden","true",2,"will-change","transform"],["d","M12 4.7l-.7-.7L8 7.3 4.7 4l-.7.7L7.3 8 4 11.3l.7.7L8 8.7l3.3 3.3.7-.7L8.7 8z"],[3,"ngTemplateOutletContext","ngTemplateOutlet"],["cdsIcon","chevron--down","size","16",3,"ngClass"],["cdsIcon","warning--filled","size","16",1,"cds--list-box__invalid-icon"],["cdsIcon","warning--alt--filled","size","16",1,"cds--list-box__invalid-icon","cds--list-box__invalid-icon--warning"],[1,"cds--list-box__divider"],[1,"cds--form__helper-text",3,"ngClass"],[1,"cds--form-requirement"]],template:function(e,t){if(e&1){let s=B();re(),c(0,Je,3,7,"label",2),p(1,"div",3),c(2,Ge,1,0,"div",4),p(3,"button",5,0),S("click",function(a){return u(s),m(t.disabled||t.readonly?a.stopPropagation():t.toggleMenu())})("focus",function(a){return u(s),m(t.fluid?t.handleFocus(a):null)})("blur",function(a){return u(s),m(t.fluid?t.handleFocus(a):t.onBlur())}),c(5,Ye,4,2,"div",6)(6,Xe,3,3,"span",4)(7,et,1,2,null,7),p(8,"span",8),c(9,tt,1,4,"svg",9),h()(),c(10,it,1,0,"svg",10)(11,st,1,0,"svg",11),p(12,"div",12,1),c(14,nt,1,0,"ng-content",7),h()(),c(15,lt,1,0,"hr",13)(16,at,3,5,"div",14)(17,ut,3,2,"div",15)(18,_t,3,2,"div",15)}e&2&&(o("ngIf",t.label&&!t.skeleton),r(),o("ngClass",pe(22,Pe,[t.type!=="multi"&&!(t.skeleton&&t.fluid),t.type==="multi",t.type==="multi"&&t.getSelectedCount()>0,t.theme==="light",t.theme==="light",t.inline,t.skeleton,t.disabled,t.readonly,t.invalid,t.warn,t.size==="sm",t.size==="md",t.size==="lg",!t.menuIsClosed,t.invalid])),b("data-invalid",t.invalid?!0:null),r(),o("ngIf",t.skeleton&&t.fluid),r(),o("id",t.id)("ngClass",E(39,He,!t.menuIsClosed)),b("aria-expanded",!t.menuIsClosed)("aria-disabled",t.disabled)("aria-readonly",t.readonly)("disabled",t.disabled?!0:null),r(2),o("ngIf",t.type==="multi"&&t.getSelectedCount()>0),r(),o("ngIf",t.isRenderString()),r(),o("ngIf",!t.isRenderString()),r(2),o("ngIf",!t.skeleton),r(),o("ngIf",t.invalid),r(),o("ngIf",!t.invalid&&t.warn),r(),o("ngClass",E(41,Ke,t.dropUp!==null&&t.dropUp!==void 0?t.dropUp:t._dropUp)),r(2),o("ngIf",!t.menuIsClosed),r(),o("ngIf",t.fluid),r(),o("ngIf",t.helperText&&!t.invalid&&!t.warn&&!t.skeleton&&!t.fluid),r(),o("ngIf",t.invalid),r(),o("ngIf",!t.invalid&&t.warn))},dependencies:[H,K,$,j,fe],encapsulation:2}),i})();function Et(i,n){return G(i,"keydown").pipe(X(150),J(e=>{let t=n.find(s=>s.textContent.trim().toLowerCase().startsWith(e.key));if(t)return t}),Y(e=>!!e))}var ni=(()=>{class i{constructor(e,t,s){this.elementRef=e,this.i18n=t,this.appRef=s,this.ariaLabel=this.i18n.get().DROPDOWN_LIST.LABEL,this.listTpl=null,this.select=new y,this.scroll=new y,this.blurIntent=new y,this.type="single",this.showTitles=!0,this.size="md",this.listId=`listbox-${i.listCount++}`,this.highlightedItem=null,this.displayItems=[],this.index=-1,this._items=[]}set items(e){q(e)?(this._itemsSubscription&&this._itemsSubscription.unsubscribe(),this._itemsReady=new Q(t=>{this._itemsSubscription=e.subscribe(s=>{this.updateList(s),t.next(!0),t.complete()})}),this.onItemsReady(null)):this.updateList(e),this._originalItems=e}get items(){return this._originalItems}ngAfterViewInit(){this.index=this.getListItems().findIndex(e=>e.selected),this.setupFocusObservable(),setTimeout(()=>{this.doEmitSelect(!0)})}ngOnDestroy(){this.focusJump&&this.focusJump.unsubscribe(),this._itemsSubscription&&this._itemsSubscription.unsubscribe()}doEmitSelect(e=!0){if(this.type==="single")this.select.emit({item:this._items.find(t=>t.selected),isUpdate:e});else{let t=this.getSelected()||[];t.isUpdate=e,this.select.emit(t)}}getItemId(e){return`${this.listId}-${e}`}updateList(e){this._items=e.map(t=>Object.assign({},t)),this.displayItems=this._items,this.updateIndex(),this.setupFocusObservable(),this.doEmitSelect()}filterBy(e=""){e?(this.displayItems=this.getListItems().filter(t=>t.content.toLowerCase().includes(e.toLowerCase())),this.displayItems&&(this.index=0)):this.displayItems=this.getListItems(),this.updateIndex()}setupFocusObservable(){if(!this.list)return;this.focusJump&&this.focusJump.unsubscribe();let e=Array.from(this.list.nativeElement.querySelectorAll("li"));this.focusJump=Et(this.list.nativeElement,e).subscribe(t=>{t.focus()})}getNextItem(){return this.index<this.displayItems.length-1&&this.index++,this.displayItems[this.index]}hasNextElement(){return this.index<this.displayItems.length-1&&(this.index!==this.displayItems.length-2||!this.displayItems[this.index+1].disabled)}getNextElement(){let e=this.listElementList?this.listElementList.toArray():[];if(!e.length)return null;for(let t=this.index+1;t<e.length;t++)if(!this.displayItems[t].disabled)return this.index=t,e[t].nativeElement;return e[this.index]?.nativeElement}getPrevItem(){return this.index>0&&this.index--,this.displayItems[this.index]}hasPrevElement(){return this.index>0&&(this.index!==1||!this.displayItems[0].disabled)}getPrevElement(){let e=this.listElementList?this.listElementList.toArray():[];if(!e.length)return null;for(let t=this.index-1;t<this.index&&t>=0;t--)if(!this.displayItems[t].disabled)return this.index=t,e[t].nativeElement;return e[this.index].nativeElement}getCurrentItem(){return this.index<0?this.displayItems[0]:this.displayItems[this.index]}getCurrentElement(){return this.index<0?this.listElementList.first.nativeElement:this.listElementList.toArray()[this.index].nativeElement}getListItems(){return this._items}getSelected(){let e=this.getListItems().filter(t=>t.selected);return e.length===0?[]:e}propagateSelected(e){Array.isArray(e)||console.error(`${this.constructor.name}.propagateSelected expects an Array<ListItem>, got ${JSON.stringify(e)}`),this.onItemsReady(()=>{let t=[];for(let s of e)if(s&&s.selected){let l=Object.assign({},s);delete l.selected,l=JSON.stringify(l),t.push(l)}for(let s of this.getListItems()){if(t.length===0){s.selected=!1;continue}let l=Object.assign({},s);delete l.selected,l=JSON.stringify(l);for(let a of t)if(l.includes(a)){s.selected=!0;break}else s.selected=!1}})}initFocus(){this.index<0&&this.updateIndex(),this.list.nativeElement.focus(),setTimeout(()=>{this.highlightedItem=this.getItemId(this.index)})}updateIndex(){let e=this.getSelected();e.length?this.index=this.displayItems.indexOf(e[0]):this.hasNextElement()&&this.getNextElement()}navigateList(e){e.key==="Enter"||e.key===" "?(this.listElementList.some(t=>t.nativeElement===e.target)&&e.preventDefault(),e.key==="Enter"&&this.doClick(e,this.getCurrentItem())):(e.key==="ArrowDown"||e.key==="ArrowUp")&&(e.preventDefault(),e.key==="ArrowDown"?this.hasNextElement()?this.getNextElement()?.scrollIntoView({block:"end"}):this.blurIntent.emit("bottom"):e.key==="ArrowUp"&&(this.hasPrevElement()?this.getPrevElement().scrollIntoView({block:"nearest"}):this.blurIntent.emit("top")),setTimeout(()=>{this.highlightedItem=this.getItemId(this.index)}))}doClick(e,t){if(e.preventDefault(),t&&!t.disabled){if(this.list.nativeElement.focus(),this.type==="single"){t.selected=!0;for(let s of this.getListItems())t!==s&&(s.selected=!1)}else t.selected=!t.selected;this.index=this.displayItems.indexOf(t),this.highlightedItem=this.getItemId(this.index),this.doEmitSelect(!1),this.appRef.tick()}}onItemFocus(e){let t=this.listElementList.toArray()[e].nativeElement;t.classList.add("cds--list-box__menu-item--highlighted"),t.tabIndex=0}onItemBlur(e){let t=this.listElementList.toArray()[e].nativeElement;t.classList.remove("cds--list-box__menu-item--highlighted"),t.tabIndex=-1}emitScroll(e){let t=e.srcElement.scrollTop===0,s=e.srcElement.scrollHeight-e.srcElement.scrollTop===e.srcElement.clientHeight,l={atTop:t,atBottom:s,event:e};this.scroll.emit(l)}onItemsReady(e){(this._itemsReady||v(!0)).pipe(Z()).subscribe(e)}reorderSelected(e=!0){this.displayItems=[...this.getSelected(),...this.getListItems().filter(t=>!t.selected)],e&&setTimeout(()=>{this.updateIndex(),this.highlightedItem=this.getItemId(this.index)})}}return i.listCount=0,i.\u0275fac=function(e){return new(e||i)(_(F),_(W),_(le))},i.\u0275cmp=U({type:i,selectors:[["cds-dropdown-list"],["ibm-dropdown-list"]],viewQuery:function(e,t){if(e&1&&(M(wt,7),M(yt,5)),e&2){let s;T(s=D())&&(t.list=s.first),T(s=D())&&(t.listElementList=s)}},inputs:{ariaLabel:"ariaLabel",items:"items",listTpl:"listTpl",type:"type",showTitles:"showTitles"},outputs:{select:"select",scroll:"scroll",blurIntent:"blurIntent"},standalone:!1,features:[N([{provide:Le,useExisting:i}])],decls:3,vars:4,consts:[["list",""],["listItem",""],["role","listbox","tabindex","-1",1,"cds--list-box__menu","cds--multi-select",3,"scroll","keydown","id"],["role","option","class","cds--list-box__menu-item",3,"id","ngClass","click",4,"ngFor","ngForOf"],["role","option",1,"cds--list-box__menu-item",3,"click","id","ngClass"],["tabindex","-1",1,"cds--list-box__menu-item__option"],["class","cds--form-item cds--checkbox-wrapper",4,"ngIf"],[4,"ngIf"],["cdsIcon","checkmark","size","16","class","cds--list-box__menu-item__selected-icon",4,"ngIf"],[1,"cds--form-item","cds--checkbox-wrapper"],[1,"cds--checkbox-label"],["type","checkbox","tabindex","-1",1,"cds--checkbox",3,"checked","disabled"],[1,"cds--checkbox-appearance"],[1,"cds--checkbox-label-text"],["cdsIcon","checkmark","size","16",1,"cds--list-box__menu-item__selected-icon"],[3,"ngTemplateOutletContext","ngTemplateOutlet"]],template:function(e,t){if(e&1){let s=B();p(0,"ul",2,0),S("scroll",function(a){return u(s),m(t.emitScroll(a))})("keydown",function(a){return u(s),m(t.navigateList(a))}),c(2,Dt,7,12,"li",3),h()}e&2&&(o("id",t.listId),b("aria-label",t.ariaLabel)("aria-activedescendant",t.highlightedItem),r(2),o("ngForOf",t.displayItems))},dependencies:[H,me,K,$,j],encapsulation:2}),i})();var li=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=se({type:i}),i.\u0275inj=te({providers:[Ve],imports:[ge,Ee,Ce,Te,xe,_e]}),i})();export{si as a,ni as b,li as c};
