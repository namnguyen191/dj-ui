import{a as te,b as ne,c as ie}from"./chunk-QT3XFCGH.js";import{a as Ce}from"./chunk-WWS2XLF5.js";import{a as re,b as oe}from"./chunk-KZUONKLL.js";import"./chunk-T3L4ARYN.js";import{a as ce}from"./chunk-UQKGUTRS.js";import{a as c,b as pe,c as ue}from"./chunk-WPXIDDMA.js";import{c as ae,d as le,e as me,f as se,g as de}from"./chunk-UFUCDWUH.js";import{E as ee,n as z,o as f,p as J,q as Q,r as W,s as u,u as X,w as Y,x as Z}from"./chunk-JKCAMHHX.js";import{b as H,c as $,e as K}from"./chunk-YNHIMEB6.js";import{f as R,g as G,k as j}from"./chunk-4BUORYHE.js";import"./chunk-XND63YGZ.js";import"./chunk-XIV2GB5G.js";import"./chunk-DON54MFE.js";import{a as k}from"./chunk-SQVMHEBP.js";import{a as C,c as ge,e as fe,g as ve,i as Te,k as ye}from"./chunk-P7QEISYO.js";import{$a as r,A as b,Cb as t,D as I,Mb as l,Nb as m,Ob as s,Sb as F,T as M,Tb as P,Ub as L,Uc as A,_c as B,cc as O,da as g,dc as d,jc as V,l as T,ma as S,mb as N,na as U,nc as q,r as _,tb as y,wc as D}from"./chunk-U5SMYZY3.js";import{a as x,b as h}from"./chunk-Q7L6LLAK.js";var we=()=>[".."];function xe(i,v){i&1&&s(0,"cds-loading",14),i&2&&t("isActive",!0)("overlay",!0)}function he(i,v){if(i&1&&s(0,"cds-inline-loading",15),i&2){let e=L();t("state",e.getIdFieldState())}}var _e={[C]:"Button",[ge]:"Table",[fe]:"Text card",[ve]:"Carousel",[Te]:"Carousel card",[ye]:"Simple text"},be=()=>{let i=g(ce);return v=>b(500).pipe(M(()=>i.fetchUIElementTemplate(v.value)),_(()=>({idNotUnique:!0})),I(e=>e instanceof k&&e.status===404?T(null):T({idNotUnique:!0})))},je=(()=>{class i{constructor(){this.#e=g(Ce),this.#t=g(R),this.loadingSig=this.#e.isPending,this.newUIElementForm=new W({id:new u("",{nonNullable:!0,validators:[f.required],asyncValidators:[be()]}),name:new u("",{nonNullable:!0,validators:[f.required]}),description:new u("",{nonNullable:!0,validators:[f.required]}),type:new u(C,{nonNullable:!0})}),this.uiElementTypeItems=Object.entries(_e).map(([e,n])=>({content:n,value:e,selected:!1})).sort((e,n)=>e.content.localeCompare(n.content))}#e;#t;getFieldErrorMessage(e){let n=this.newUIElementForm.controls[e];if(!n.touched)return"";let o=n.errors;if(o===null)return"";let a=[];for(let p in o)switch(p){case"required":a.push("This field is required");break;default:a.push(`Unknown error: ${p}`);break}return a.join(". ")}getIdFieldState(){let e=this.newUIElementForm.controls.id;return e.pristine?c.Hidden:e.pending?c.Active:e.invalid?c.Error:c.Finished}async onSubmit(){let e=h(x({},this.newUIElementForm.getRawValue()),{options:{}}),n=await this.#e.add(e);this.#t.navigateByUrl(`ui-element-builder/edit/${n.id}`)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=N({type:i,selectors:[["namnguyen191-new-ui-element-page"]],decls:24,vars:16,consts:[["idValidationLoading",""],[3,"isActive","overlay",4,"ngIf"],[1,"new-ui-element-form",3,"ngSubmit","formGroup"],["formControlName","type","itemValueKey","value","label","Type"],[3,"items"],[1,"new-ui-element-form__btn-container"],["cdsButton","","type","submit",3,"disabled"],["cdsButton","secondary","type","button",3,"routerLink"],[3,"helperText","invalid","invalidText"],["cdsText","","formControlName","id",3,"autocomplete"],["helperText","The name of the UI Element",3,"invalid","invalidText"],["cdsText","","formControlName","name",3,"autocomplete"],["helperText","Give your UI Element a good description",1,"new-ui-element-form__description-text-area",3,"invalid","invalidText"],["cdsTextArea","","formControlName","description",1,"textarea-field",3,"rows"],[3,"isActive","overlay"],["errorText","This id is not unique","loadingText","Checking id...","successText","This id is unique",3,"state"]],template:function(n,o){if(n&1){let a=F();V(0)(1)(2)(3),y(4,xe,1,2,"cds-loading",1),l(5,"form",2),P("ngSubmit",function(){return S(a),U(o.onSubmit())}),l(6,"cds-dropdown",3),s(7,"cds-dropdown-list",4),m(),l(8,"cds-button-set",5)(9,"button",6),d(10,"Create"),m(),l(11,"button",7),d(12,"Cancel"),m()(),l(13,"cds-text-label",8),d(14," Id "),s(15,"input",9),m(),l(16,"cds-text-label",10),d(17," Name "),s(18,"input",11),m(),l(19,"cds-textarea-label",12),d(20," Description "),s(21,"textarea",13),m()(),y(22,he,1,1,"ng-template",null,0,D)}if(n&2){let a=O(23),p=o.loadingSig(),Ee=o.getFieldErrorMessage("id"),E=o.getFieldErrorMessage("name"),w=o.getFieldErrorMessage("description");r(4),t("ngIf",p),r(),t("formGroup",o.newUIElementForm),r(2),t("items",o.uiElementTypeItems),r(2),t("disabled",!o.newUIElementForm.valid),r(2),t("routerLink",q(15,we)),r(2),t("helperText",a)("invalid",!!Ee)("invalidText",a),r(2),t("autocomplete",!1),r(),t("invalid",!!E)("invalidText",E),r(2),t("autocomplete",!1),r(),t("invalid",!!w)("invalidText",w),r(2),t("rows",20)}},dependencies:[B,A,ee,X,z,J,Q,Y,Z,de,me,se,ae,le,K,H,$,oe,re,ie,te,ne,ue,pe,j,G],styles:["[_nghost-%COMP%]{height:calc(100vh - 3rem);display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .new-ui-element-form[_ngcontent-%COMP%]{flex-grow:1;display:grid;grid-template-columns:1fr 1fr;gap:3rem;padding:0 10rem}[_nghost-%COMP%]   .new-ui-element-form__description-text-area[_ngcontent-%COMP%]{grid-column:span 2}[_nghost-%COMP%]   .new-ui-element-form__description-text-area[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{flex-grow:1}[_nghost-%COMP%]   .new-ui-element-form__btn-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;align-items:end}"],changeDetection:0})}}return i})();export{je as NewUIElementPageComponent};
