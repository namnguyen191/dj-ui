import{a as G}from"./chunk-4XPXTYOG.js";import{f as H}from"./chunk-2HFDSWQC.js";import{a as B}from"./chunk-4ZOHYO2S.js";import{a as X}from"./chunk-QRGIKHOE.js";import{a as Q}from"./chunk-4K7K5ZWH.js";import{a as K}from"./chunk-TP2BCAT7.js";import{a as W}from"./chunk-QCNYXPM4.js";import{a as D,b as C,c as F,d as z}from"./chunk-PG7AMA7F.js";import{b as S,d as k}from"./chunk-NNDZXSP6.js";import{a as q}from"./chunk-HKPRGPMU.js";import{a as V}from"./chunk-UOQL4QAT.js";import{a,g as x,j as Z,m as J,n as $,q as T,r as M,u as j}from"./chunk-SBUECLRX.js";import{E as U,Hb as v,Ib as E,Jc as A,W as h,Xc as I,Zb as y,_ as p,ba as w,ea as i,f as R,fa as f,j as N,kb as g,u as _,y as b}from"./chunk-CELOEL42.js";var Y=new w("COMMON_SETUP_CONFIG");var ee=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=g({type:e,selectors:[["dj-ui-common-default-ui-element-infinite-error-component"]],decls:2,vars:0,template:function(o,r){o&1&&(v(0,"p"),y(1,"Infinite loop detected in element rendering!"),E())},dependencies:[I],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}}return e})();var te=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=g({type:e,selectors:[["dj-ui-common-default-ui-element-loading-component"]],decls:2,vars:0,template:function(o,r){o&1&&(v(0,"p"),y(1,"Loading UI Element..."),E())},dependencies:[I],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}}return e})();var oe=()=>R(U(e=>e.type==="MISSING_REMOTE_RESOURCE_TEMPLATE")),ie=()=>R(U(e=>e.type==="MISSING_UI_ELEMENT_TEMPLATE"));var re=(()=>{class e{constructor(){this.#t=i(S),this.singleFileUploadFetcher=t=>{let{endpoint:o,file:r,responseType:l="json"}=t,c=new FormData;return c.append("file",r),this.#t.post(o,c,{responseType:l})}}#t;static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var L=(()=>{class e{constructor(){this.#t=i(S),this.#e=t=>{let{endpoint:o,method:r,headers:l,body:c}=t;return this.#t.request(r,o,{headers:l,body:c})},this.httpFetcher=this.#e.bind(this)}#t;#e;static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ne=a.strictObject({remoteResourceId:a.string()},{errorMap:()=>({message:'Invalid triggerRemoteResource action hook payload, example: { "type": "triggerRemoteResource", "payload": { "remoteResourceId": "123" }  } '})}),se=a.strictObject({scope:$,data:V},{errorMap:()=>({message:'Invalid addToState action hook payload, example: { "type": "addToState", "payload": { "scope": "global", data: "{ "some": "data" }" }  } '})}),ae=a.strictObject({navigationType:a.union([a.literal("internal"),a.literal("external")]),url:a.string()},{errorMap:()=>({message:'Invalid navigate action hook payload, example: { "type": "navigate", "payload": { "navigationType": "internal", url: "/my/route" }  } '})}),O=(()=>{class e{constructor(){this.#t=i(C),this.#e=i(T),this.#o=i(H),this.handleTriggerRemoteResource=({remoteResourceId:t})=>{this.#t.triggerResource(t)},this.handleAddToState=t=>{this.#e.addToState(t)},this.navigate=({navigationType:t,url:o})=>{t==="internal"?this.#o.navigateByUrl(o):window.open(o,"_blank")?.focus()}}#t;#e;#o;static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var pe=(()=>{class e{#t;#e;#o;#i;constructor(){this.#t=i(A),this.FILE_INPUT_ELE_ID="file_input_element",this.#e=null,this.#o=new N,this.#i=new Error("File input element has not been initialized"),this.#r()}selectFiles(t={}){if(!this.#e)throw new Error("File input element has not been initialized");let{single:o,extensions:r=[]}=t;return o?this.#n():this.#s(),this.#a(r),this.#e.click(),_(this.#o)}#r(){let t=this.#t.getElementById(this.FILE_INPUT_ELE_ID);if(t){this.#e=t;return}this.#e=this.#t.createElement("input"),this.#e.setAttribute("id",this.FILE_INPUT_ELE_ID),this.#e.setAttribute("type","file"),this.#e.setAttribute("multiple",""),this.#e.style.display="none",this.#t.body.append(this.#e),this.#e.addEventListener("change",o=>{let r=o.target.files;r&&this.#o.next(r)}),this.#e.addEventListener("cancel",()=>{this.#o.next(null)})}#n(){if(!this.#e)throw this.#i;this.#e.removeAttribute("multiple")}#s(){if(!this.#e)throw this.#i;this.#e.setAttribute("multiple","")}#a(t){if(!this.#e)throw this.#i;if(t.length===0){this.#e.removeAttribute("accept");return}let o=t.map(r=>`.${r}`).join(",");this.#e.setAttribute("accept",o)}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ce=()=>{let e=i(O),n=i(x),t={addToState:{handler:e.handleAddToState,payloadParser:se},triggerRemoteResource:{handler:e.handleTriggerRemoteResource,payloadParser:ne},navigate:{handler:e.navigate,payloadParser:ae}};n.registerHooks(t)},me=()=>{let e=i(L).httpFetcher;i(D).registerFetcher("httpFetcher",e)};var le=e=>{let{getUiElementTemplate:n,getRemoteResourceTemplate:t}=e,o=i(M),r=i(j),l=i(k),c=o.getEvents().pipe(G()),P=u=>h({next:s=>{s.id!==u&&console.warn(`Request for template with id ${u} but received ${s.id} instead. This might cause DJ-UI to register the wrong template, leading to missing UI. Please check your template configuration for mis-matching id`)}});n&&c.pipe(ie(),b(s=>{let m=s.payload.id;return r.startRegisteringTemplate(m),n(m).pipe(P(m))}),h(s=>{r.registerTemplate(s)})).subscribe(),t&&c.pipe(oe(),b(s=>{let m=s.payload.id;return l.startRegisteringTemplate(m),t(m).pipe(P(m))}),h(s=>{l.registerTemplate(s)})).subscribe()},de=e=>{let n=i(F);for(let[t,o]of Object.entries(e))n.registerUIElement({type:t,component:o})},ue=e=>{let n=i(F);for(let[t,o]of Object.entries(e))n.registerUIElementLoader({type:t,loader:o})},tt=()=>{let e;try{e=i(Y)}catch{Z("No configs was provided for DJ-UI default setup, please provide values for the COMMON_SETUP_CONFIG token");return}ce(),me();let{templatesHandlers:n,componentsMap:t,componentLoadersMap:o}=e;n&&le(n),t&&de(t),o&&ue(o)},ot=()=>f([j,k,M,D,J,C,T,F,x]),it=()=>f([re,pe,L,O]),rt=()=>f([{provide:z,useValue:{uiElementLoadingComponent:te,uiElementInfiniteErrorComponent:ee}}]);var at={[B]:()=>import("./chunk-Z5WRXLTF.js").then(e=>e.SimpleGridLayoutComponent)};var mt={[X]:()=>import("./chunk-SOEXL5XO.js").then(e=>e.SimpleTextComponent),[q]:()=>import("./chunk-VOGW7BMX.js").then(e=>e.SimpleImageComponent),[Q]:()=>import("./chunk-5J6BZKMM.js").then(e=>e.SimpleTableComponent),[W]:()=>import("./chunk-NOJB6W5O.js").then(e=>e.ImagesCarouselComponent),[K]:()=>import("./chunk-LGPWIXNO.js").then(e=>e.CardComponent)};export{Y as a,tt as b,ot as c,it as d,rt as e,at as f,mt as g};
