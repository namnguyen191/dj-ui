import{a as D,b as $,c as R,d as z,e as B,f as K}from"./chunk-UIWFU22U.js";import{a as G}from"./chunk-R6GG5OYM.js";import{e as A,g as q}from"./chunk-ZGJ2SCUV.js";import"./chunk-4XPXTYOG.js";import{d as M,f as y}from"./chunk-2HFDSWQC.js";import"./chunk-XHLVS7FU.js";import"./chunk-JOWTQUES.js";import{d as k}from"./chunk-Q7T7GPG4.js";import{a as L,b as N}from"./chunk-A4HBTJ62.js";import"./chunk-QZIL3RNM.js";import{b as P,c as o,e as v,f as O,g as S,h as c,j as U,k as F,l as w,n as x}from"./chunk-GKWLEOQ4.js";import{a as I}from"./chunk-66RYNZRF.js";import"./chunk-ERB5ATM7.js";import"./chunk-CGO7NXBT.js";import{c as j}from"./chunk-GXVKBTVT.js";import"./chunk-RSTVJZ7U.js";import"./chunk-JVM3WL52.js";import"./chunk-PJHEGPYG.js";import{a as V}from"./chunk-MQ74QUYZ.js";import"./chunk-J2UA6UJD.js";import"./chunk-6GF7UK45.js";import"./chunk-CHX6FGWD.js";import"./chunk-HNFNR3GG.js";import"./chunk-PUECT5W6.js";import{c as E}from"./chunk-POJFSOR5.js";import{Cb as T,Hb as i,Ib as s,Jb as l,Ob as g,Zb as p,_a as a,_b as f,a as h,b as C,ea as d,kb as b,pb as _,xb as u}from"./chunk-CELOEL42.js";function H(m,J){m&1&&l(0,"p-progress-spinner",0)}var Ce=(()=>{class m{constructor(){this.uiElementTemplatesStore=d(A),this.#e=d(y),this.#t=d(M),this.createUIElementForm=new S({id:new c("",{nonNullable:!0,validators:[o.required,K(),B(),o.minLength(5),o.maxLength(50)]}),type:new c("SIMPLE_TEXT",{nonNullable:!0}),name:new c("",{nonNullable:!0,validators:[o.required,o.minLength(5),o.maxLength(50)]}),description:new c("",{nonNullable:!0,validators:[o.maxLength(150)]})}),this.uiElementTypes=Object.entries(q).map(([n,t])=>({key:n,label:t}))}#e;#t;async createUIElementTemplate(){if(this.createUIElementForm.invalid)return;let n=await this.uiElementTemplatesStore.add(C(h({},this.createUIElementForm.getRawValue()),{options:{}}));await this.#e.navigate(["builder","ui-element",n.id])}getFieldLabel(n){let t=E(n),e=this.createUIElementForm.controls[n],r=e.errors;if(e.untouched&&e.pristine||!r)return t;e.pristine&&e.markAsDirty();let X=this.#n(r);return`${t}: Errors: ${X.join(", ")}`}getFormSubmitButtonTooltip(){if(!this.createUIElementForm.invalid)return"";let n=[];for(let[t,e]of Object.entries(this.createUIElementForm.controls)){if(!e.errors)continue;let r=this.#n(e.errors);n.push(`Field ${t} has the following errors:
 ${r.join(`
`)}`)}return n.join(`
`)}#n(n){let t=[];for(let[e,r]of Object.entries(n))switch(e){case"required":{t.push("This field is required");break}case"minlength":{t.push(`This field needs to be at least ${r.requiredLength} characters long`);break}case"maxlength":{t.push(`This field cannot exceed ${r.requiredLength} characters long`);break}case"idNotUnique":{t.push("This ID has already been taken");break}case"isAlphaNumeric":{t.push("This field must be alphanumeric");break}default:t.push("Unknown validation errors. Please try again later"),console.warn(`${e} is an unknown validation error that does not have any handler`)}return t}navigateToViewAllPage(){return this.#e.navigate([".",{relativeTo:this.#t}])}static{this.\u0275fac=function(t){return new(t||m)}}static{this.\u0275cmp=b({type:m,selectors:[["prime-ng-playground-builder-feat-create-ui-element-template"]],decls:22,vars:8,consts:[["ariaLabel","loading",1,"progress-spinner"],["header","Create UI Element"],[1,"form-container",3,"ngSubmit","formGroup"],[1,"id-input-field"],["autocomplete","off","formControlName","id","id","id","pInputText",""],["for","id"],[1,"name-input-field"],["autocomplete","off","formControlName","name","id","name","pInputText",""],["for","name"],[1,"type-input-field"],["formControlName","type","inputId","type","optionValue","key","placeholder","Select the UI type",3,"options"],["for","type"],[1,"description-input-field"],["cols","30","formControlName","description","name","description","pTextarea","","rows","5"],["for","description"],[1,"btn-container"],["label","Create","type","submit",3,"disabled","pTooltip"],["label","Cancel","severity","danger",3,"onClick"]],template:function(t,e){t&1&&(_(0,H,1,0,"p-progress-spinner",0),i(1,"p-card",1)(2,"form",2),g("ngSubmit",function(){return e.createUIElementTemplate()}),i(3,"p-iftalabel",3),l(4,"input",4),i(5,"label",5),p(6),s()(),i(7,"p-iftalabel",6),l(8,"input",7),i(9,"label",8),p(10),s()(),i(11,"p-iftalabel",9),l(12,"p-select",10),i(13,"label",11),p(14,"UI Element Type"),s()(),i(15,"p-iftalabel",12),l(16,"textarea",13),i(17,"label",14),p(18),s()(),i(19,"div",15),l(20,"p-button",16),i(21,"p-button",17),g("onClick",function(){return e.navigateToViewAllPage()}),s()()()()),t&2&&(T(e.uiElementTemplatesStore.isPending()?0:-1),a(2),u("formGroup",e.createUIElementForm),a(4),f(e.getFieldLabel("id")),a(4),f(e.getFieldLabel("name")),a(2),u("options",e.uiElementTypes),a(6),f(e.getFieldLabel("description")),a(2),u("disabled",e.createUIElementForm.invalid)("pTooltip",e.getFormSubmitButtonTooltip()))},dependencies:[$,D,N,L,x,U,P,v,O,F,w,k,V,j,z,R,G,I],styles:["[_nghost-%COMP%]{height:calc(100vh - 50px);width:100vw;display:flex;justify-content:center;position:relative;align-items:center}[_nghost-%COMP%]   .progress-spinner[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;background-color:#00000080;width:100%;height:100%;z-index:2}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], [_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   p-select[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;resize:none}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   .id-input-field[_ngcontent-%COMP%], [_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   .name-input-field[_ngcontent-%COMP%], [_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   .type-input-field[_ngcontent-%COMP%], [_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   .description-input-field[_ngcontent-%COMP%]{grid-column:span 2}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]{grid-column:span 4;display:flex;gap:1rem}"],changeDetection:0})}}return m})();export{Ce as CreateUIElementTemplateComponent};
