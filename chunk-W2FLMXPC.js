import{a as Xt}from"./chunk-LLLXTKEK.js";import{a as Ht,b as Nt}from"./chunk-ZOQKNKYY.js";import{a as Ot,c as Gt}from"./chunk-JDKJRDVM.js";import{a as Bt}from"./chunk-TV56DAVP.js";import{$a as g,$c as it,A as Tt,Ba as et,Bb as St,Ca as O,Cb as T,Cc as gt,Db as kt,Dc as Et,F as _t,Hb as I,Ib as at,Kb as V,Lb as U,Mb as p,Nb as u,Ob as R,Pb as Rt,Qb as Lt,Rb as Mt,Sb as L,T as bt,Tb as M,Tc as Dt,U as nt,Ub as c,Vb as dt,Vc as Ft,Wb as ct,Ya as zt,Yc as Wt,ab as S,da as N,dc as D,eb as A,f as tt,fc as mt,la as ht,ma as C,mb as E,na as w,tb as v,wa as Y,xa as lt,zc as Pt}from"./chunk-RVPXDSFJ.js";import{a as k,b as G}from"./chunk-Q7L6LLAK.js";var Ut=["*"];function de(r,t){if(r&1&&R(0,"div",0),r&2){let e=t.$index,i=c();T("ngStyle",i.gridRenderer.getGridColumnStyle(e))}}function ce(r,t){if(r&1&&R(0,"div",1),r&2){let e=t.$index,i=c();T("ngStyle",i.gridRenderer.getGridRowStyle(e))}}function me(r,t){if(r&1){let e=L();p(0,"div",8),M("mousedown",function(s){C(e);let o=c();return w(o.resize.dragStartDelay(s))})("touchstart",function(s){C(e);let o=c();return w(o.resize.dragStartDelay(s))}),u()}}function ge(r,t){if(r&1){let e=L();p(0,"div",9),M("mousedown",function(s){C(e);let o=c();return w(o.resize.dragStartDelay(s))})("touchstart",function(s){C(e);let o=c();return w(o.resize.dragStartDelay(s))}),u()}}function pe(r,t){if(r&1){let e=L();p(0,"div",10),M("mousedown",function(s){C(e);let o=c();return w(o.resize.dragStartDelay(s))})("touchstart",function(s){C(e);let o=c();return w(o.resize.dragStartDelay(s))}),u()}}function ue(r,t){if(r&1){let e=L();p(0,"div",11),M("mousedown",function(s){C(e);let o=c();return w(o.resize.dragStartDelay(s))})("touchstart",function(s){C(e);let o=c();return w(o.resize.dragStartDelay(s))}),u()}}function fe(r,t){if(r&1){let e=L();p(0,"div",12),M("mousedown",function(s){C(e);let o=c();return w(o.resize.dragStartDelay(s))})("touchstart",function(s){C(e);let o=c();return w(o.resize.dragStartDelay(s))}),u()}}function ye(r,t){if(r&1){let e=L();p(0,"div",13),M("mousedown",function(s){C(e);let o=c();return w(o.resize.dragStartDelay(s))})("touchstart",function(s){C(e);let o=c();return w(o.resize.dragStartDelay(s))}),u()}}function Ce(r,t){if(r&1){let e=L();p(0,"div",14),M("mousedown",function(s){C(e);let o=c();return w(o.resize.dragStartDelay(s))})("touchstart",function(s){C(e);let o=c();return w(o.resize.dragStartDelay(s))}),u()}}function we(r,t){if(r&1){let e=L();p(0,"div",15),M("mousedown",function(s){C(e);let o=c();return w(o.resize.dragStartDelay(s))})("touchstart",function(s){C(e);let o=c();return w(o.resize.dragStartDelay(s))}),u()}}var l=function(r){return r.Fit="fit",r.ScrollVertical="scrollVertical",r.ScrollHorizontal="scrollHorizontal",r.Fixed="fixed",r.VerticalFixed="verticalFixed",r.HorizontalFixed="horizontalFixed",r}(l||{}),rt=function(r){return r.Always="always",r.OnDragAndResize="onDrag&Resize",r.None="none",r}(rt||{}),m=function(r){return r.None="none",r.CompactUp="compactUp",r.CompactLeft="compactLeft",r.CompactUpAndLeft="compactUp&Left",r.CompactLeftAndUp="compactLeft&Up",r.CompactRight="compactRight",r.CompactUpAndRight="compactUp&Right",r.CompactRightAndUp="compactRight&Up",r.CompactDown="compactDown",r.CompactDownAndLeft="compactDown&Left",r.CompactLeftAndDown="compactLeft&Down",r.CompactDownAndRight="compactDown&Right",r.CompactRightAndDown="compactRight&Down",r}(m||{}),$=function(r){return r.LTR="ltr",r.RTL="rtl",r}($||{}),pt=class{gridster;constructor(t){this.gridster=t}destroy(){this.gridster=null}checkCompact(){this.gridster.$options.compactType!==m.None&&(this.gridster.$options.compactType===m.CompactUp?this.checkCompactMovement("y",-1):this.gridster.$options.compactType===m.CompactLeft?this.checkCompactMovement("x",-1):this.gridster.$options.compactType===m.CompactUpAndLeft?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===m.CompactLeftAndUp?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===m.CompactRight?this.checkCompactMovement("x",1):this.gridster.$options.compactType===m.CompactUpAndRight?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===m.CompactRightAndUp?(this.checkCompactMovement("x",1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===m.CompactDown?this.checkCompactMovement("y",1):this.gridster.$options.compactType===m.CompactDownAndLeft?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===m.CompactDownAndRight?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===m.CompactLeftAndDown?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",1)):this.gridster.$options.compactType===m.CompactRightAndDown&&(this.checkCompactMovement("x",1),this.checkCompactMovement("y",1)))}checkCompactItem(t){this.gridster.$options.compactType!==m.None&&(this.gridster.$options.compactType===m.CompactUp?this.moveTillCollision(t,"y",-1):this.gridster.$options.compactType===m.CompactLeft?this.moveTillCollision(t,"x",-1):this.gridster.$options.compactType===m.CompactUpAndLeft?(this.moveTillCollision(t,"y",-1),this.moveTillCollision(t,"x",-1)):this.gridster.$options.compactType===m.CompactLeftAndUp?(this.moveTillCollision(t,"x",-1),this.moveTillCollision(t,"y",-1)):this.gridster.$options.compactType===m.CompactUpAndRight?(this.moveTillCollision(t,"y",-1),this.moveTillCollision(t,"x",1)):this.gridster.$options.compactType===m.CompactDown?this.moveTillCollision(t,"y",1):this.gridster.$options.compactType===m.CompactDownAndLeft?(this.moveTillCollision(t,"y",1),this.moveTillCollision(t,"x",-1)):this.gridster.$options.compactType===m.CompactLeftAndDown?(this.moveTillCollision(t,"x",-1),this.moveTillCollision(t,"y",1)):this.gridster.$options.compactType===m.CompactDownAndRight?(this.moveTillCollision(t,"y",1),this.moveTillCollision(t,"x",1)):this.gridster.$options.compactType===m.CompactRightAndDown&&(this.moveTillCollision(t,"x",1),this.moveTillCollision(t,"y",1)))}checkCompactMovement(t,e){let i=!1;this.gridster.grid.forEach(s=>{s.$item.compactEnabled!==!1&&this.moveTillCollision(s.$item,t,e)&&(i=!0,s.item[t]=s.$item[t],s.itemChanged())}),i&&this.checkCompact()}moveTillCollision(t,e,i){return t[e]+=i,this.gridster.checkCollision(t)?(t[e]-=i,!1):(this.moveTillCollision(t,e,i),!0)}},Ie={gridType:l.Fit,scale:1,fixedColWidth:250,fixedRowHeight:250,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,setGridSize:!1,compactType:m.None,mobileBreakpoint:640,useBodyForBreakpoint:!1,allowMultiLayer:!1,defaultLayerIndex:0,maxLayerIndex:2,baseLayerIndex:1,minCols:1,maxCols:100,minRows:1,maxRows:100,defaultItemCols:1,defaultItemRows:1,maxItemCols:50,maxItemRows:50,minItemCols:1,minItemRows:1,minItemArea:1,maxItemArea:2500,addEmptyRowsCount:0,rowHeightRatio:1,margin:10,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,useTransformPositioning:!0,scrollSensitivity:10,scrollSpeed:20,initCallback:void 0,destroyCallback:void 0,gridSizeChangedCallback:void 0,itemChangeCallback:void 0,itemResizeCallback:void 0,itemInitCallback:void 0,itemRemovedCallback:void 0,itemValidateCallback:void 0,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,enableOccupiedCellDrop:!1,emptyCellClickCallback:void 0,emptyCellContextMenuCallback:void 0,emptyCellDropCallback:void 0,emptyCellDragCallback:void 0,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{delayStart:0,enabled:!1,ignoreContentClass:"gridster-item-content",ignoreContent:!1,dragHandleClass:"drag-handler",stop:void 0,start:void 0,dropOverItems:!1,dropOverItemsCallback:void 0},resizable:{delayStart:0,enabled:!1,handles:{s:!0,e:!0,n:!0,w:!0,se:!0,ne:!0,sw:!0,nw:!0},stop:void 0,start:void 0},swap:!0,swapWhileDragging:!1,pushItems:!1,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},pushResizeItems:!1,displayGrid:rt.OnDragAndResize,disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1,disableScrollHorizontal:!1,disableScrollVertical:!1,enableBoundaryControl:!1,disableAutoPositionOnConflict:!1,dirType:$.LTR},x=class r{static merge(t,e,i){for(let s in e)e[s]!==void 0&&i.hasOwnProperty(s)&&(typeof e[s]=="object"?(s in t||(t[s]={}),t[s]=r.merge(t[s],e[s],i[s])):t[s]=e[s]);return t}static checkTouchEvent(t){t.clientX===void 0&&t.touches&&(t.touches&&t.touches.length?(t.clientX=t.touches[0].clientX,t.clientY=t.touches[0].clientY):t.changedTouches&&t.changedTouches.length&&(t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY))}static checkContentClassForEvent(t,e){if(t.$options.draggable.ignoreContent){if(!r.checkDragHandleClass(e.target,e.currentTarget,t.$options.draggable.dragHandleClass,t.$options.draggable.ignoreContentClass))return!0}else if(r.checkContentClass(e.target,e.currentTarget,t.$options.draggable.ignoreContentClass))return!0;return!1}static checkContentClassForEmptyCellClickEvent(t,e){return r.checkContentClass(e.target,e.currentTarget,t.$options.draggable.ignoreContentClass)||r.checkContentClass(e.target,e.currentTarget,t.$options.draggable.dragHandleClass)}static checkDragHandleClass(t,e,i,s){if(!t||t===e)return!1;if(t.hasAttribute("class")){let o=t.getAttribute("class").split(" ");if(o.indexOf(i)>-1)return!0;if(o.indexOf(s)>-1)return!1}return r.checkDragHandleClass(t.parentNode,e,i,s)}static checkContentClass(t,e,i){return!t||t===e?!1:t.hasAttribute("class")&&t.getAttribute("class").split(" ").indexOf(i)>-1?!0:r.checkContentClass(t.parentNode,e,i)}static compareItems(t,e){return t.y>e.y?-1:t.y<e.y?1:t.x>e.x?-1:1}},ut=class{gridster;initialItem;removeEmptyCellClickListenerFn;removeEmptyCellTouchendListenerFn;removeEmptyCellContextMenuListenerFn;removeEmptyCellDropListenerFn;removeEmptyCellMousedownListenerFn;removeEmptyCellTouchstartListenerFn;removeWindowMousemoveListenerFn;removeWindowTouchmoveListenerFn;removeWindowMouseupListenerFn;removeWindowTouchendListenerFn;removeEmptyCellDragoverListenerFn;removeDocumentDragendListenerFn;constructor(t){this.gridster=t}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(),this.gridster.movingItem=null,this.initialItem=this.gridster=null,this.removeDocumentDragendListenerFn&&(this.removeDocumentDragendListenerFn(),this.removeDocumentDragendListenerFn=null)}updateOptions(){this.gridster.$options.enableEmptyCellClick&&!this.removeEmptyCellClickListenerFn&&this.gridster.options.emptyCellClickCallback?(this.removeEmptyCellClickListenerFn=this.gridster.renderer.listen(this.gridster.el,"click",this.emptyCellClickCb),this.removeEmptyCellTouchendListenerFn=this.gridster.renderer.listen(this.gridster.el,"touchend",this.emptyCellClickCb)):!this.gridster.$options.enableEmptyCellClick&&this.removeEmptyCellClickListenerFn&&this.removeEmptyCellTouchendListenerFn&&(this.removeEmptyCellClickListenerFn(),this.removeEmptyCellTouchendListenerFn(),this.removeEmptyCellClickListenerFn=null,this.removeEmptyCellTouchendListenerFn=null),this.gridster.$options.enableEmptyCellContextMenu&&!this.removeEmptyCellContextMenuListenerFn&&this.gridster.options.emptyCellContextMenuCallback?this.removeEmptyCellContextMenuListenerFn=this.gridster.renderer.listen(this.gridster.el,"contextmenu",this.emptyCellContextMenuCb):!this.gridster.$options.enableEmptyCellContextMenu&&this.removeEmptyCellContextMenuListenerFn&&(this.removeEmptyCellContextMenuListenerFn(),this.removeEmptyCellContextMenuListenerFn=null),this.gridster.$options.enableEmptyCellDrop&&!this.removeEmptyCellDropListenerFn&&this.gridster.options.emptyCellDropCallback?(this.removeEmptyCellDropListenerFn=this.gridster.renderer.listen(this.gridster.el,"drop",this.emptyCellDragDrop),this.gridster.zone.runOutsideAngular(()=>{this.removeEmptyCellDragoverListenerFn=this.gridster.renderer.listen(this.gridster.el,"dragover",this.emptyCellDragOver)}),this.removeDocumentDragendListenerFn=this.gridster.renderer.listen("document","dragend",()=>{this.gridster.movingItem=null,this.gridster.previewStyle()})):!this.gridster.$options.enableEmptyCellDrop&&this.removeEmptyCellDropListenerFn&&this.removeEmptyCellDragoverListenerFn&&this.removeDocumentDragendListenerFn&&(this.removeEmptyCellDropListenerFn(),this.removeEmptyCellDragoverListenerFn(),this.removeDocumentDragendListenerFn(),this.removeEmptyCellDragoverListenerFn=null,this.removeEmptyCellDropListenerFn=null,this.removeDocumentDragendListenerFn=null),this.gridster.$options.enableEmptyCellDrag&&!this.removeEmptyCellMousedownListenerFn&&this.gridster.options.emptyCellDragCallback?(this.removeEmptyCellMousedownListenerFn=this.gridster.renderer.listen(this.gridster.el,"mousedown",this.emptyCellMouseDown),this.removeEmptyCellTouchstartListenerFn=this.gridster.renderer.listen(this.gridster.el,"touchstart",this.emptyCellMouseDown)):!this.gridster.$options.enableEmptyCellDrag&&this.removeEmptyCellMousedownListenerFn&&this.removeEmptyCellTouchstartListenerFn&&(this.removeEmptyCellMousedownListenerFn(),this.removeEmptyCellTouchstartListenerFn(),this.removeEmptyCellMousedownListenerFn=null,this.removeEmptyCellTouchstartListenerFn=null)}emptyCellClickCb=t=>{if(!this.gridster||this.gridster.movingItem||x.checkContentClassForEmptyCellClickEvent(this.gridster,t))return;let e=this.getValidItemFromEvent(t);e&&(this.gridster.options.emptyCellClickCallback&&this.gridster.options.emptyCellClickCallback(t,e),this.gridster.cdRef.markForCheck())};emptyCellContextMenuCb=t=>{if(this.gridster.movingItem||x.checkContentClassForEmptyCellClickEvent(this.gridster,t))return;t.preventDefault(),t.stopPropagation();let e=this.getValidItemFromEvent(t);e&&(this.gridster.options.emptyCellContextMenuCallback&&this.gridster.options.emptyCellContextMenuCallback(t,e),this.gridster.cdRef.markForCheck())};emptyCellDragDrop=t=>{let e=this.getValidItemFromEvent(t);e&&(this.gridster.options.emptyCellDropCallback&&this.gridster.options.emptyCellDropCallback(t,e),this.gridster.cdRef.markForCheck())};emptyCellDragOver=t=>{t.preventDefault(),t.stopPropagation();let e=this.getValidItemFromEvent(t);e?(t.dataTransfer&&(t.dataTransfer.dropEffect="move"),this.gridster.movingItem=e):(t.dataTransfer&&(t.dataTransfer.dropEffect="none"),this.gridster.movingItem=null),this.gridster.previewStyle()};emptyCellMouseDown=t=>{if(x.checkContentClassForEmptyCellClickEvent(this.gridster,t))return;t.preventDefault(),t.stopPropagation();let e=this.getValidItemFromEvent(t);!e||t.buttons!==1&&!(t instanceof TouchEvent)||(this.initialItem=e,this.gridster.movingItem=e,this.gridster.previewStyle(),this.gridster.zone.runOutsideAngular(()=>{this.removeWindowMousemoveListenerFn=this.gridster.renderer.listen("window","mousemove",this.emptyCellMouseMove),this.removeWindowTouchmoveListenerFn=this.gridster.renderer.listen("window","touchmove",this.emptyCellMouseMove)}),this.removeWindowMouseupListenerFn=this.gridster.renderer.listen("window","mouseup",this.emptyCellMouseUp),this.removeWindowTouchendListenerFn=this.gridster.renderer.listen("window","touchend",this.emptyCellMouseUp))};emptyCellMouseMove=t=>{t.preventDefault(),t.stopPropagation();let e=this.getValidItemFromEvent(t,this.initialItem);e&&(this.gridster.movingItem=e,this.gridster.previewStyle())};emptyCellMouseUp=t=>{this.removeWindowMousemoveListenerFn(),this.removeWindowTouchmoveListenerFn(),this.removeWindowMouseupListenerFn(),this.removeWindowTouchendListenerFn();let e=this.getValidItemFromEvent(t,this.initialItem);e&&(this.gridster.movingItem=e),this.gridster.options.emptyCellDragCallback&&this.gridster.movingItem&&this.gridster.options.emptyCellDragCallback(t,this.gridster.movingItem),setTimeout(()=>{this.initialItem=null,this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())}),this.gridster.cdRef.markForCheck()};getPixelsX(t,e){let i=this.gridster.options.scale;return i?(t.clientX-e.left)/i+this.gridster.el.scrollLeft-this.gridster.gridRenderer.getLeftMargin():t.clientX+this.gridster.el.scrollLeft-e.left-this.gridster.gridRenderer.getLeftMargin()}getPixelsY(t,e){let i=this.gridster.options.scale;return i?(t.clientY-e.top)/i+this.gridster.el.scrollTop-this.gridster.gridRenderer.getTopMargin():t.clientY+this.gridster.el.scrollTop-e.top-this.gridster.gridRenderer.getTopMargin()}getValidItemFromEvent(t,e){t.preventDefault(),t.stopPropagation(),x.checkTouchEvent(t);let i=this.gridster.el.getBoundingClientRect(),s=this.getPixelsX(t,i),o=this.getPixelsY(t,i),n={x:this.gridster.pixelsToPositionX(s,Math.floor,!0),y:this.gridster.pixelsToPositionY(o,Math.floor,!0),cols:this.gridster.$options.defaultItemCols,rows:this.gridster.$options.defaultItemRows};if(e&&(n.cols=Math.min(Math.abs(e.x-n.x)+1,this.gridster.$options.emptyCellDragMaxCols),n.rows=Math.min(Math.abs(e.y-n.y)+1,this.gridster.$options.emptyCellDragMaxRows),e.x<n.x?n.x=e.x:e.x-n.x>this.gridster.$options.emptyCellDragMaxCols-1&&(n.x=this.gridster.movingItem?this.gridster.movingItem.x:0),e.y<n.y?n.y=e.y:e.y-n.y>this.gridster.$options.emptyCellDragMaxRows-1&&(n.y=this.gridster.movingItem?this.gridster.movingItem.y:0)),!(!this.gridster.$options.enableOccupiedCellDrop&&this.gridster.checkCollision(n)))return n}},ft=class{gridster;lastGridColumnStyles={};lastGridRowStyles={};constructor(t){this.gridster=t}destroy(){this.gridster=null}updateItem(t,e,i){if(this.gridster.mobile)this.clearCellPosition(i,t),this.gridster.$options.keepFixedHeightInMobile?i.setStyle(t,"height",(e.rows-1)*this.gridster.$options.margin+e.rows*this.gridster.$options.fixedRowHeight+"px"):i.setStyle(t,"height",e.rows*this.gridster.curWidth/e.cols+"px"),this.gridster.$options.keepFixedWidthInMobile?i.setStyle(t,"width",this.gridster.$options.fixedColWidth+"px"):i.setStyle(t,"width",""),i.setStyle(t,"margin-bottom",this.gridster.$options.margin+"px"),i.setStyle(t,$.LTR?"margin-right":"margin-left","");else{let s=Math.round(this.gridster.curColWidth*e.x),o=Math.round(this.gridster.curRowHeight*e.y),n=this.gridster.curColWidth*e.cols-this.gridster.$options.margin,h=this.gridster.curRowHeight*e.rows-this.gridster.$options.margin;this.setCellPosition(i,t,s,o),i.setStyle(t,"width",n+"px"),i.setStyle(t,"height",h+"px");let d=null,a=null;this.gridster.$options.outerMargin&&(this.gridster.rows===e.rows+e.y&&(this.gridster.$options.outerMarginBottom!==null?d=this.gridster.$options.outerMarginBottom+"px":d=this.gridster.$options.margin+"px"),this.gridster.columns===e.cols+e.x&&(this.gridster.$options.outerMarginBottom!==null?a=this.gridster.$options.outerMarginRight+"px":a=this.gridster.$options.margin+"px")),i.setStyle(t,"margin-bottom",d),i.setStyle(t,$.LTR?"margin-right":"margin-left",a)}}updateGridster(){let t="",e="",i="",s="";if(this.gridster.$options.gridType===l.Fit)t=l.Fit,e=l.ScrollVertical,i=l.ScrollHorizontal,s=l.Fixed;else if(this.gridster.$options.gridType===l.ScrollVertical)this.gridster.curRowHeight=this.gridster.curColWidth*this.gridster.$options.rowHeightRatio,t=l.ScrollVertical,e=l.Fit,i=l.ScrollHorizontal,s=l.Fixed;else if(this.gridster.$options.gridType===l.ScrollHorizontal){let o=this.gridster.$options.rowHeightRatio,n=o>=1?o:o+1;this.gridster.curColWidth=this.gridster.curRowHeight*n,t=l.ScrollHorizontal,e=l.Fit,i=l.ScrollVertical,s=l.Fixed}else this.gridster.$options.gridType===l.Fixed?(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),t=l.Fixed,e=l.Fit,i=l.ScrollVertical,s=l.ScrollHorizontal):this.gridster.$options.gridType===l.VerticalFixed?(this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),t=l.ScrollVertical,e=l.Fit,i=l.ScrollHorizontal,s=l.Fixed):this.gridster.$options.gridType===l.HorizontalFixed&&(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),t=l.ScrollHorizontal,e=l.Fit,i=l.ScrollVertical,s=l.Fixed);this.gridster.mobile||this.gridster.$options.setGridSize&&this.gridster.$options.gridType!==l.Fit?this.gridster.renderer.removeClass(this.gridster.el,t):this.gridster.renderer.addClass(this.gridster.el,t),this.gridster.renderer.removeClass(this.gridster.el,e),this.gridster.renderer.removeClass(this.gridster.el,i),this.gridster.renderer.removeClass(this.gridster.el,s)}getGridColumnStyle(t){let e={left:this.gridster.curColWidth*t,width:this.gridster.curColWidth-this.gridster.$options.margin,height:this.gridster.gridRows.length*this.gridster.curRowHeight-this.gridster.$options.margin,style:{}};e.style=G(k({},this.getLeftPosition(e.left)),{width:e.width+"px",height:e.height+"px"});let i=this.lastGridColumnStyles[t];return i&&i.left===e.left&&i.width===e.width&&i.height===e.height?i.style:(this.lastGridColumnStyles[t]=e,e.style)}getGridRowStyle(t){let e={top:this.gridster.curRowHeight*t,width:this.gridster.gridColumns.length*this.gridster.curColWidth+this.gridster.$options.margin,height:this.gridster.curRowHeight-this.gridster.$options.margin,style:{}};e.style=G(k({},this.getTopPosition(e.top)),{width:e.width+"px",height:e.height+"px"});let i=this.lastGridRowStyles[t];return i&&i.top===e.top&&i.width===e.width&&i.height===e.height?i.style:(this.lastGridRowStyles[t]=e,e.style)}getLeftPosition(t){let e=this.gridster.$options.dirType===$.RTL?-t:t;return this.gridster.$options.useTransformPositioning?{transform:"translateX("+e+"px)"}:{left:this.getLeftMargin()+e+"px"}}getTopPosition(t){return this.gridster.$options.useTransformPositioning?{transform:"translateY("+t+"px)"}:{top:this.getTopMargin()+t+"px"}}clearCellPosition(t,e){this.gridster.$options.useTransformPositioning?t.setStyle(e,"transform",""):(t.setStyle(e,"top",""),t.setStyle(e,"left",""))}setCellPosition(t,e,i,s){let o=this.gridster.$options.dirType===$.RTL?-i:i;if(this.gridster.$options.useTransformPositioning){let n="translate3d("+o+"px, "+s+"px, 0)";t.setStyle(e,"transform",n)}else t.setStyle(e,"left",this.getLeftMargin()+o+"px"),t.setStyle(e,"top",this.getTopMargin()+s+"px")}getLeftMargin(){return this.gridster.$options.outerMargin?this.gridster.$options.outerMarginLeft!==null?this.gridster.$options.outerMarginLeft:this.gridster.$options.margin:0}getTopMargin(){return this.gridster.$options.outerMargin?this.gridster.$options.outerMarginTop!==null?this.gridster.$options.outerMarginTop:this.gridster.$options.margin:0}},$e=(()=>{class r{renderer;previewStyle$;gridRenderer;el;sub;constructor(e,i){this.renderer=i,this.el=e.nativeElement}ngOnInit(){this.sub=this.previewStyle$.subscribe(e=>this.previewStyle(e))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}previewStyle(e){e?(this.renderer.setStyle(this.el,"display","block"),this.gridRenderer.updateItem(this.el,e,this.renderer)):this.renderer.setStyle(this.el,"display","")}static \u0275fac=function(i){return new(i||r)(S(O),S(A))};static \u0275cmp=E({type:r,selectors:[["gridster-preview"]],inputs:{previewStyle$:"previewStyle$",gridRenderer:"gridRenderer"},decls:0,vars:0,template:function(i,s){},styles:[`gridster-preview{position:absolute;display:none;background:#00000026}
`],encapsulation:2})}return r})(),$t=(()=>{class r{renderer;cdRef;zone;options;movingItem;el;$options;mobile;curWidth;curHeight;grid;columns=0;rows=0;curColWidth;curRowHeight;gridColumns=[];gridRows=[];windowResize;dragInProgress;emptyCell;compact;gridRenderer;previewStyle$=new Y;calculateLayout$=new tt;resize$=new tt;destroy$=new tt;constructor(e,i,s,o){this.renderer=i,this.cdRef=s,this.zone=o,this.el=e.nativeElement,this.$options=JSON.parse(JSON.stringify(Ie)),this.mobile=!1,this.curWidth=0,this.curHeight=0,this.grid=[],this.curColWidth=0,this.curRowHeight=0,this.dragInProgress=!1,this.emptyCell=new ut(this),this.compact=new pt(this),this.gridRenderer=new ft(this)}static checkCollisionTwoItemsForSwaping(e,i){let s=e.cols===1?0:1,o=i.cols===1?0:1,n=e.rows===1?0:1,h=i.rows===1?0:1;return e.x+s<i.x+i.cols&&e.x+e.cols>i.x+o&&e.y+n<i.y+i.rows&&e.y+e.rows>i.y+h}checkCollisionTwoItems(e,i){if(!(e.x<i.x+i.cols&&e.x+e.cols>i.x&&e.y<i.y+i.rows&&e.y+e.rows>i.y))return!1;if(!this.$options.allowMultiLayer)return!0;let o=this.$options.defaultLayerIndex,n=e.layerIndex===void 0?o:e.layerIndex,h=i.layerIndex===void 0?o:i.layerIndex;return n===h}ngOnInit(){this.options.initCallback&&this.options.initCallback(this),this.calculateLayout$.pipe(_t(0),nt(this.destroy$)).subscribe(()=>this.calculateLayout()),this.resize$.pipe(bt(()=>Tt(100)),nt(this.destroy$)).subscribe(()=>this.resize())}ngOnChanges(e){e.options&&(this.setOptions(),this.options.api={optionsChanged:this.optionsChanged,resize:this.onResize,getNextPossiblePosition:this.getNextPossiblePosition,getFirstPossiblePosition:this.getFirstPossiblePosition,getLastPossiblePosition:this.getLastPossiblePosition,getItemComponent:i=>this.getItemComponent(i)},this.columns=this.$options.minCols,this.rows=this.$options.minRows+this.$options.addEmptyRowsCount,this.setGridSize(),this.calculateLayout())}resize(){let e,i;this.$options.gridType==="fit"&&!this.mobile?(i=this.el.offsetWidth,e=this.el.offsetHeight):(i=this.el.clientWidth,e=this.el.clientHeight),(i!==this.curWidth||e!==this.curHeight)&&this.checkIfToResize()&&this.onResize()}setOptions(){this.$options=x.merge(this.$options,this.options,this.$options),!this.$options.disableWindowResize&&!this.windowResize?this.windowResize=this.renderer.listen("window","resize",this.onResize):this.$options.disableWindowResize&&this.windowResize&&(this.windowResize(),this.windowResize=null),this.emptyCell.updateOptions()}optionsChanged=()=>{this.setOptions();let e=this.grid.length-1,i;for(;e>=0;e--)i=this.grid[e],i.updateOptions();this.calculateLayout()};ngOnDestroy(){this.destroy$.next(),this.previewStyle$.complete(),this.windowResize&&this.windowResize(),this.options&&this.options.destroyCallback&&this.options.destroyCallback(this),this.options&&this.options.api&&(this.options.api.resize=void 0,this.options.api.optionsChanged=void 0,this.options.api.getNextPossiblePosition=void 0,this.options.api=void 0),this.emptyCell.destroy(),this.emptyCell=null,this.compact.destroy(),this.compact=null}onResize=()=>{this.el.clientWidth&&(this.options.setGridSize&&(this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.setGridSize(),this.calculateLayout())};checkIfToResize(){let e=this.el.clientWidth,i=this.el.offsetWidth,s=this.el.scrollWidth,o=this.el.clientHeight,n=this.el.offsetHeight,h=this.el.scrollHeight,d=e<i&&h>n&&h-n<i-e,a=o<n&&s>i&&s-i<n-o;return d?!1:!a}checkIfMobile(){return this.$options.useBodyForBreakpoint?this.$options.mobileBreakpoint>document.body.clientWidth:this.$options.mobileBreakpoint>this.curWidth}setGridSize(){let e=this.el,i,s;this.$options.setGridSize||this.$options.gridType===l.Fit&&!this.mobile?(i=e.offsetWidth,s=e.offsetHeight):(i=e.clientWidth,s=e.clientHeight),this.curWidth=i,this.curHeight=s}setGridDimensions(){this.setGridSize(),!this.mobile&&this.checkIfMobile()?(this.mobile=!this.mobile,this.renderer.addClass(this.el,"mobile")):this.mobile&&!this.checkIfMobile()&&(this.mobile=!this.mobile,this.renderer.removeClass(this.el,"mobile"));let e=this.$options.minRows,i=this.$options.minCols,s=this.grid.length-1,o;for(;s>=0;s--)o=this.grid[s],o.notPlaced||(e=Math.max(e,o.$item.y+o.$item.rows),i=Math.max(i,o.$item.x+o.$item.cols));e+=this.$options.addEmptyRowsCount,(this.columns!==i||this.rows!==e)&&(this.columns=i,this.rows=e,this.options.gridSizeChangedCallback&&this.options.gridSizeChangedCallback(this))}calculateLayout(){if(this.compact&&this.compact.checkCompact(),this.setGridDimensions(),this.$options.outerMargin){let s=-this.$options.margin;this.$options.outerMarginLeft!==null?(s+=this.$options.outerMarginLeft,this.renderer.setStyle(this.el,"padding-left",this.$options.outerMarginLeft+"px")):(s+=this.$options.margin,this.renderer.setStyle(this.el,"padding-left",this.$options.margin+"px")),this.$options.outerMarginRight!==null?(s+=this.$options.outerMarginRight,this.renderer.setStyle(this.el,"padding-right",this.$options.outerMarginRight+"px")):(s+=this.$options.margin,this.renderer.setStyle(this.el,"padding-right",this.$options.margin+"px")),this.curColWidth=(this.curWidth-s)/this.columns;let o=-this.$options.margin;this.$options.outerMarginTop!==null?(o+=this.$options.outerMarginTop,this.renderer.setStyle(this.el,"padding-top",this.$options.outerMarginTop+"px")):(o+=this.$options.margin,this.renderer.setStyle(this.el,"padding-top",this.$options.margin+"px")),this.$options.outerMarginBottom!==null?(o+=this.$options.outerMarginBottom,this.renderer.setStyle(this.el,"padding-bottom",this.$options.outerMarginBottom+"px")):(o+=this.$options.margin,this.renderer.setStyle(this.el,"padding-bottom",this.$options.margin+"px")),this.curRowHeight=(this.curHeight-o)/this.rows*this.$options.rowHeightRatio}else this.curColWidth=(this.curWidth+this.$options.margin)/this.columns,this.curRowHeight=(this.curHeight+this.$options.margin)/this.rows*this.$options.rowHeightRatio,this.renderer.setStyle(this.el,"padding-left","0px"),this.renderer.setStyle(this.el,"padding-right","0px"),this.renderer.setStyle(this.el,"padding-top","0px"),this.renderer.setStyle(this.el,"padding-bottom","0px");this.gridRenderer.updateGridster(),this.$options.setGridSize?(this.renderer.addClass(this.el,"gridSize"),this.mobile||(this.renderer.setStyle(this.el,"width",this.columns*this.curColWidth+this.$options.margin+"px"),this.renderer.setStyle(this.el,"height",this.rows*this.curRowHeight+this.$options.margin+"px"))):(this.renderer.removeClass(this.el,"gridSize"),this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.updateGrid();let e=this.grid.length-1,i;for(;e>=0;e--)i=this.grid[e],i.setSize(),i.drag.toggle(),i.resize.toggle();this.resize$.next()}updateGrid(){this.$options.displayGrid==="always"&&!this.mobile?this.renderer.addClass(this.el,"display-grid"):this.$options.displayGrid==="onDrag&Resize"&&this.dragInProgress?this.renderer.addClass(this.el,"display-grid"):(this.$options.displayGrid==="none"||!this.dragInProgress||this.mobile)&&this.renderer.removeClass(this.el,"display-grid"),this.setGridDimensions(),this.gridColumns.length=r.getNewArrayLength(this.columns,this.curWidth,this.curColWidth),this.gridRows.length=r.getNewArrayLength(this.rows,this.curHeight,this.curRowHeight),this.cdRef.markForCheck()}addItem(e){e.$item.cols===void 0&&(e.$item.cols=this.$options.defaultItemCols,e.item.cols=e.$item.cols,e.itemChanged()),e.$item.rows===void 0&&(e.$item.rows=this.$options.defaultItemRows,e.item.rows=e.$item.rows,e.itemChanged()),e.$item.x===-1||e.$item.y===-1?this.autoPositionItem(e):this.checkCollision(e.$item)&&(this.$options.disableWarnings||(e.notPlaced=!0,console.warn("Can't be placed in the bounds of the dashboard, trying to auto position!/n"+JSON.stringify(e.item,["cols","rows","x","y"]))),this.$options.disableAutoPositionOnConflict?e.notPlaced=!0:this.autoPositionItem(e)),this.grid.push(e),this.calculateLayout$.next()}removeItem(e){this.grid.splice(this.grid.indexOf(e),1),this.calculateLayout$.next(),this.options.itemRemovedCallback&&this.options.itemRemovedCallback(e.item,e)}checkCollision(e){let i=!1;if(this.options.itemValidateCallback&&(i=!this.options.itemValidateCallback(e)),!i&&this.checkGridCollision(e)&&(i=!0),!i){let s=this.findItemWithItem(e);s&&(i=s)}return i}checkGridCollision(e){let i=e.y>-1&&e.x>-1,s=e.cols+e.x<=this.$options.maxCols,o=e.rows+e.y<=this.$options.maxRows,n=e.maxItemCols===void 0?this.$options.maxItemCols:e.maxItemCols,h=e.minItemCols===void 0?this.$options.minItemCols:e.minItemCols,d=e.maxItemRows===void 0?this.$options.maxItemRows:e.maxItemRows,a=e.minItemRows===void 0?this.$options.minItemRows:e.minItemRows,f=e.cols<=n&&e.cols>=h,y=e.rows<=d&&e.rows>=a,z=e.minItemArea===void 0?this.$options.minItemArea:e.minItemArea,F=e.maxItemArea===void 0?this.$options.maxItemArea:e.maxItemArea,B=e.cols*e.rows,X=z<=B,W=F>=B;return!(i&&s&&o&&f&&y&&X&&W)}findItemWithItem(e){let i=0,s;for(;i<this.grid.length;i++)if(s=this.grid[i],s.$item!==e&&this.checkCollisionTwoItems(s.$item,e))return s;return!1}findItemsWithItem(e){let i=[],s=0,o;for(;s<this.grid.length;s++)o=this.grid[s],o.$item!==e&&this.checkCollisionTwoItems(o.$item,e)&&i.push(o);return i}autoPositionItem(e){this.getNextPossiblePosition(e.$item)?(e.notPlaced=!1,e.item.x=e.$item.x,e.item.y=e.$item.y,e.itemChanged()):(e.notPlaced=!0,this.$options.disableWarnings||console.warn("Can't be placed in the bounds of the dashboard!/n"+JSON.stringify(e.item,["cols","rows","x","y"])))}getNextPossiblePosition=(e,i={})=>{e.cols===-1&&(e.cols=this.$options.defaultItemCols),e.rows===-1&&(e.rows=this.$options.defaultItemRows),this.setGridDimensions();let s=i.y||0,o;for(;s<this.rows;s++)for(e.y=s,o=i.x||0;o<this.columns;o++)if(e.x=o,!this.checkCollision(e))return!0;let n=this.$options.maxRows>=this.rows+e.rows,h=this.$options.maxCols>=this.columns+e.cols;return!(this.rows<=this.columns&&n)&&h?(e.x=this.columns,e.y=0,!0):n?(e.y=this.rows,e.x=0,!0):!1};getFirstPossiblePosition=e=>{let i=Object.assign({},e);return this.getNextPossiblePosition(i),i};getLastPossiblePosition=e=>{let i={y:0,x:0};i=this.grid.reduce((o,n)=>{let h={y:n.$item.y+n.$item.rows-1,x:n.$item.x+n.$item.cols-1};return x.compareItems(o,h)===1?h:o},i);let s=Object.assign({},e);return this.getNextPossiblePosition(s,i),s};pixelsToPositionX(e,i,s){let o=i(e/this.curColWidth);return s?o:Math.max(o,0)}pixelsToPositionY(e,i,s){let o=i(e/this.curRowHeight);return s?o:Math.max(o,0)}positionXToPixels(e){return e*this.curColWidth}positionYToPixels(e){return e*this.curRowHeight}getItemComponent(e){return this.grid.find(i=>i.item===e)}checkCollisionForSwaping(e){let i=!1;if(this.options.itemValidateCallback&&(i=!this.options.itemValidateCallback(e)),!i&&this.checkGridCollision(e)&&(i=!0),!i){let s=this.findItemWithItemForSwapping(e);s&&(i=s)}return i}findItemWithItemForSwapping(e){let i=this.grid.length-1,s;for(;i>-1;i--)if(s=this.grid[i],s.$item!==e&&r.checkCollisionTwoItemsForSwaping(s.$item,e))return s;return!1}previewStyle(e=!1){this.movingItem?(this.compact&&e&&this.compact.checkCompactItem(this.movingItem),this.previewStyle$.next(this.movingItem)):this.previewStyle$.next(null)}static getNewArrayLength(e,i,s){let o=Math.max(e,Math.floor(i/s));return o<0?0:Number.isFinite(o)?Math.floor(o):0}static \u0275fac=function(i){return new(i||r)(S(O),S(A),S(Pt),S(lt))};static \u0275cmp=E({type:r,selectors:[["gridster"]],inputs:{options:"options"},features:[ht],ngContentSelectors:Ut,decls:6,vars:2,consts:[[1,"gridster-column",3,"ngStyle"],[1,"gridster-row",3,"ngStyle"],[1,"gridster-preview",3,"gridRenderer","previewStyle$"]],template:function(i,s){i&1&&(dt(),V(0,de,1,1,"div",0,at),V(2,ce,1,1,"div",1,at),ct(4),R(5,"gridster-preview",2)),i&2&&(U(s.gridColumns),g(2),U(s.gridRows),g(3),T("gridRenderer",s.gridRenderer)("previewStyle$",s.previewStyle$))},dependencies:[Wt,$e],styles:[`gridster{position:relative;box-sizing:border-box;background:gray;width:100%;height:100%;-webkit-user-select:none;user-select:none;display:block}gridster.fit{overflow-x:hidden;overflow-y:hidden}gridster.scrollVertical{overflow-x:hidden;overflow-y:auto}gridster.scrollHorizontal{overflow-x:auto;overflow-y:hidden}gridster.fixed{overflow:auto}gridster.mobile{overflow-x:hidden;overflow-y:auto}gridster.mobile gridster-item{position:relative}gridster.gridSize{height:initial;width:initial}gridster.gridSize.fit{height:100%;width:100%}gridster .gridster-column,gridster .gridster-row{position:absolute;display:none;transition:.3s;box-sizing:border-box}gridster.display-grid .gridster-column,gridster.display-grid .gridster-row{display:block}gridster .gridster-column{border-left:1px solid white;border-right:1px solid white}gridster .gridster-row{border-top:1px solid white;border-bottom:1px solid white}
`],encapsulation:2})}return r})(),st=class{fromSouth;fromNorth;fromEast;fromWest;pushedItems;pushedItemsTemp;pushedItemsTempPath;pushedItemsPath;gridsterItem;gridster;pushedItemsOrder;tryPattern;iteration=0;constructor(t){this.pushedItems=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],this.pushedItemsPath=[],this.gridsterItem=t,this.gridster=t.gridster,this.tryPattern={fromEast:[this.tryWest,this.trySouth,this.tryNorth,this.tryEast],fromWest:[this.tryEast,this.trySouth,this.tryNorth,this.tryWest],fromNorth:[this.trySouth,this.tryEast,this.tryWest,this.tryNorth],fromSouth:[this.tryNorth,this.tryEast,this.tryWest,this.trySouth]},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){this.gridster=this.gridsterItem=null}pushItems(t,e){if(this.gridster.$options.pushItems&&!e){this.pushedItemsOrder=[],this.iteration=0;let i=this.push(this.gridsterItem,t);return i||this.restoreTempItems(),this.pushedItemsOrder=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],i}else return!1}restoreTempItems(){let t=this.pushedItemsTemp.length-1;for(;t>-1;t--)this.removeFromTempPushed(this.pushedItemsTemp[t])}restoreItems(){let t=0,e=this.pushedItems.length,i;for(;t<e;t++)i=this.pushedItems[t],i.$item.x=i.item.x||0,i.$item.y=i.item.y||0,i.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let t=0,e=this.pushedItems.length,i;for(;t<e;t++)i=this.pushedItems[t],i.checkItemChanges(i.$item,i.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let t=this.pushedItems.length-1,e=!1;for(;t>-1;t--)this.checkPushedItem(this.pushedItems[t],t)&&(e=!0);e&&this.checkPushBack()}push(t,e){if(this.iteration>100)return console.warn("max iteration reached"),!1;if(this.gridster.checkGridCollision(t.$item)||e==="")return!1;let i=this.gridster.findItemsWithItem(t.$item),s=e===this.fromNorth||e===this.fromWest;i.sort((a,f)=>s?f.$item.y-a.$item.y||f.$item.x-a.$item.x:a.$item.y-f.$item.y||a.$item.x-f.$item.x);let o=0,n,h=!0,d=[];for(;o<i.length;o++){if(n=i[o],n===this.gridsterItem)continue;if(!n.canBeDragged()){h=!1;break}let a=this.pushedItemsTemp.indexOf(n);if(a>-1&&this.pushedItemsTempPath[a].length>10){h=!1;break}if(this.tryPattern[e][0].call(this,n,t))this.pushedItemsOrder.push(n),d.push(n);else if(this.tryPattern[e][1].call(this,n,t))this.pushedItemsOrder.push(n),d.push(n);else if(this.tryPattern[e][2].call(this,n,t))this.pushedItemsOrder.push(n),d.push(n);else if(this.tryPattern[e][3].call(this,n,t))this.pushedItemsOrder.push(n),d.push(n);else{h=!1;break}}if(!h&&(o=this.pushedItemsOrder.lastIndexOf(d[0]),o>-1)){let a=this.pushedItemsOrder.length-1;for(;a>=o;a--)n=this.pushedItemsOrder[a],this.pushedItemsOrder.pop(),this.removeFromTempPushed(n),this.removeFromPushedItem(n)}return this.iteration++,h}trySouth(t,e){return this.gridster.$options.pushDirections.south?(this.addToTempPushed(t),t.$item.y=e.$item.y+e.$item.rows,this.push(t,this.fromNorth)?(t.setSize(),this.addToPushed(t),!0):(this.removeFromTempPushed(t),!1)):!1}tryNorth(t,e){return this.gridster.$options.pushDirections.north?(this.addToTempPushed(t),t.$item.y=e.$item.y-t.$item.rows,this.push(t,this.fromSouth)?(t.setSize(),this.addToPushed(t),!0):(this.removeFromTempPushed(t),!1)):!1}tryEast(t,e){return this.gridster.$options.pushDirections.east?(this.addToTempPushed(t),t.$item.x=e.$item.x+e.$item.cols,this.push(t,this.fromWest)?(t.setSize(),this.addToPushed(t),!0):(this.removeFromTempPushed(t),!1)):!1}tryWest(t,e){return this.gridster.$options.pushDirections.west?(this.addToTempPushed(t),t.$item.x=e.$item.x-t.$item.cols,this.push(t,this.fromEast)?(t.setSize(),this.addToPushed(t),!0):(this.removeFromTempPushed(t),!1)):!1}addToTempPushed(t){let e=this.pushedItemsTemp.indexOf(t);e===-1&&(e=this.pushedItemsTemp.push(t)-1,this.pushedItemsTempPath[e]=[]),this.pushedItemsTempPath[e].push({x:t.$item.x,y:t.$item.y})}removeFromTempPushed(t){let e=this.pushedItemsTemp.indexOf(t),i=this.pushedItemsTempPath[e].pop();i&&(t.$item.x=i.x,t.$item.y=i.y,t.setSize(),this.pushedItemsTempPath[e].length||(this.pushedItemsTemp.splice(e,1),this.pushedItemsTempPath.splice(e,1)))}addToPushed(t){if(this.pushedItems.indexOf(t)<0)this.pushedItems.push(t),this.pushedItemsPath.push([{x:t.item.x||0,y:t.item.y||0},{x:t.$item.x,y:t.$item.y}]);else{let e=this.pushedItems.indexOf(t);this.pushedItemsPath[e].push({x:t.$item.x,y:t.$item.y})}}removeFromPushed(t){t>-1&&(this.pushedItems.splice(t,1),this.pushedItemsPath.splice(t,1))}removeFromPushedItem(t){let e=this.pushedItems.indexOf(t);e>-1&&(this.pushedItemsPath[e].pop(),this.pushedItemsPath.length||(this.pushedItems.splice(e,1),this.pushedItemsPath.splice(e,1)))}checkPushedItem(t,e){let i=this.pushedItemsPath[e],s=i.length-2,o,n,h,d=!1;for(;s>-1;s--)o=i[s],n=t.$item.x,h=t.$item.y,t.$item.x=o.x,t.$item.y=o.y,this.gridster.findItemWithItem(t.$item)?(t.$item.x=n,t.$item.y=h):(t.setSize(),i.splice(s+1,i.length-s-1),d=!0);return i.length<2&&this.removeFromPushed(e),d}},j,H,jt=50,b,J,P,Z,q,K,Q;function Jt(r,t,e,i,s,o,n,h,d,a){j=r.$options.scrollSensitivity,H=r.$options.scrollSpeed,b=r.el,J=d,P=a;let f=b.offsetWidth,y=b.offsetHeight,z=b.scrollLeft,F=b.scrollTop,B=e-F,X=y+F-e-s,{clientX:W,clientY:ot}=o;if(!r.$options.disableScrollVertical)if(n.clientY<ot&&X<j){if(te(),J&&P&&!P.south||Q)return;Q=Yt(1,h,n)}else if(n.clientY>ot&&F>0&&B<j){if(Qt(),J&&P&&!P.north||K)return;K=Yt(-1,h,n)}else n.clientY!==ot&&vt();let le=z+f-t-i,ae=t-z;if(!r.$options.disableScrollHorizontal)if(n.clientX<W&&le<=j){if(Kt(),J&&P&&!P.east||Z)return;Z=At(1,h,n)}else if(n.clientX>W&&z>0&&ae<j){if(qt(),J&&P&&!P.west||q)return;q=At(-1,h,n)}else n.clientX!==W&&xt()}function Yt(r,t,e){let i=e.clientY;return window.setInterval(()=>{(!b||r===-1&&b.scrollTop-H<0)&&vt(),b.scrollTop+=r*H,i+=r*H,t({clientX:e.clientX,clientY:i})},jt)}function At(r,t,e){let i=e.clientX;return window.setInterval(()=>{(!b||r===-1&&b.scrollLeft-H<0)&&xt(),b.scrollLeft+=r*H,i+=r*H,t({clientX:i,clientY:e.clientY})},jt)}function Zt(){xt(),vt(),b=null}function xt(){qt(),Kt()}function vt(){te(),Qt()}function qt(){Z&&(clearInterval(Z),Z=0)}function Kt(){q&&(clearInterval(q),q=0)}function Qt(){Q&&(clearInterval(Q),Q=0)}function te(){K&&(clearInterval(K),K=0)}var yt=class{swapedItem;gridsterItem;gridster;constructor(t){this.gridsterItem=t,this.gridster=t.gridster}destroy(){this.gridster=this.gridsterItem=this.swapedItem=null}swapItems(){this.gridster.$options.swap&&(this.checkSwapBack(),this.checkSwap(this.gridsterItem))}checkSwapBack(){if(this.swapedItem){let t=this.swapedItem.$item.x,e=this.swapedItem.$item.y;this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.gridster.checkCollision(this.swapedItem.$item)?(this.swapedItem.$item.x=t,this.swapedItem.$item.y=e):(this.swapedItem.setSize(),this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.swapedItem=void 0)}}restoreSwapItem(){this.swapedItem&&(this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.swapedItem.setSize(),this.swapedItem=void 0)}setSwapItem(){this.swapedItem&&(this.swapedItem.checkItemChanges(this.swapedItem.$item,this.swapedItem.item),this.swapedItem=void 0)}checkSwap(t){let e;if(this.gridster.$options.swapWhileDragging?e=this.gridster.checkCollisionForSwaping(t.$item):e=this.gridster.checkCollision(t.$item),e&&e!==!0&&e.canBeDragged()){let i=e,s=i.$item.x,o=i.$item.y,n=t.$item.x,h=t.$item.y,d=n-s,a=h-o;i.$item.x=t.item.x-d,i.$item.y=t.item.y-a,t.$item.x=i.item.x+d,t.$item.y=i.item.y+a,this.gridster.checkCollision(i.$item)||this.gridster.checkCollision(t.$item)?(t.$item.x=n,t.$item.y=h,i.$item.x=s,i.$item.y=o):(i.setSize(),this.swapedItem=i,this.gridster.$options.swapWhileDragging&&(this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.setSwapItem()))}}},xe="gridster-item-resizable-handler",_=function(r){return r.UP="UP",r.DOWN="DOWN",r.LEFT="LEFT",r.RIGHT="RIGHT",r}(_||{}),Ct=class{zone;gridsterItem;gridster;lastMouse;offsetLeft;offsetTop;margin;outerMarginTop;outerMarginRight;outerMarginBottom;outerMarginLeft;diffTop;diffLeft;originalClientX;originalClientY;top;left;height;width;positionX;positionY;positionXBackup;positionYBackup;enabled;mousemove;mouseup;mouseleave;cancelOnBlur;touchmove;touchend;touchcancel;mousedown;touchstart;push;swap;path;collision=!1;constructor(t,e,i){this.zone=i,this.gridsterItem=t,this.gridster=e,this.lastMouse={clientX:0,clientY:0},this.path=[]}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(!0),this.gridsterItem=this.gridster=this.collision=null,this.mousedown&&(this.mousedown(),this.touchstart())}dragStart(t){t.which&&t.which!==1||(this.gridster.options.draggable&&this.gridster.options.draggable.start&&this.gridster.options.draggable.start(this.gridsterItem.item,this.gridsterItem,t),t.stopPropagation(),t.preventDefault(),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragMove),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragMove)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStop),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStop),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStop),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStop),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStop),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-moving"),this.margin=this.gridster.$options.margin,this.outerMarginTop=this.gridster.$options.outerMarginTop,this.outerMarginRight=this.gridster.$options.outerMarginRight,this.outerMarginBottom=this.gridster.$options.outerMarginBottom,this.outerMarginLeft=this.gridster.$options.outerMarginLeft,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.left=this.gridsterItem.left-this.margin,this.top=this.gridsterItem.top-this.margin,this.originalClientX=t.clientX,this.originalClientY=t.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.gridster.$options.dirType===$.RTL?this.diffLeft=t.clientX-this.gridster.el.scrollWidth+this.gridsterItem.left:this.diffLeft=t.clientX+this.offsetLeft-this.margin-this.left,this.diffTop=t.clientY+this.offsetTop-this.margin-this.top,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(!0),this.push=new st(this.gridsterItem),this.swap=new yt(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid(),this.path.push({x:this.gridsterItem.item.x||0,y:this.gridsterItem.item.y||0}))}dragMove=t=>{t.stopPropagation(),t.preventDefault(),x.checkTouchEvent(t);let e=this.getDirections(t);this.gridster.options.enableBoundaryControl&&(e.includes(_.UP)&&this.gridsterItem.el.getBoundingClientRect().top<this.gridster.el.getBoundingClientRect().top+(this.outerMarginTop??this.margin)&&(e=e.filter(i=>i!=_.UP),t=new MouseEvent(t.type,{clientX:t.clientX,clientY:this.lastMouse.clientY})),e.includes(_.LEFT)&&this.gridsterItem.el.getBoundingClientRect().left<this.gridster.el.getBoundingClientRect().left+(this.outerMarginLeft??this.margin)&&(e=e.filter(i=>i!=_.LEFT),t=new MouseEvent(t.type,{clientX:this.lastMouse.clientX,clientY:t.clientY})),e.includes(_.RIGHT)&&this.gridsterItem.el.getBoundingClientRect().right>this.gridster.el.getBoundingClientRect().right-(this.outerMarginRight??this.margin)&&(e=e.filter(i=>i!=_.RIGHT),t=new MouseEvent(t.type,{clientX:this.lastMouse.clientX,clientY:t.clientY})),e.includes(_.DOWN)&&this.gridsterItem.el.getBoundingClientRect().bottom>this.gridster.el.getBoundingClientRect().bottom-(this.outerMarginBottom??this.margin)&&(e=e.filter(i=>i!=_.DOWN),t=new MouseEvent(t.type,{clientX:t.clientX,clientY:this.lastMouse.clientY}))),e.length&&(this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,Jt(this.gridster,this.left,this.top,this.width,this.height,t,this.lastMouse,this.calculateItemPositionFromMousePosition),this.calculateItemPositionFromMousePosition(t))};calculateItemPositionFromMousePosition=t=>{this.gridster.options.scale?this.calculateItemPositionWithScale(t,this.gridster.options.scale):this.calculateItemPositionWithoutScale(t),this.calculateItemPosition(),this.lastMouse.clientX=t.clientX,this.lastMouse.clientY=t.clientY,this.zone.run(()=>{this.gridster.updateGrid()})};calculateItemPositionWithScale(t,e){this.gridster.$options.dirType===$.RTL?this.left=this.gridster.el.scrollWidth-this.originalClientX+(t.clientX-this.originalClientX)/e+this.diffLeft:this.left=this.originalClientX+(t.clientX-this.originalClientX)/e+this.offsetLeft-this.diffLeft,this.top=this.originalClientY+(t.clientY-this.originalClientY)/e+this.offsetTop-this.diffTop}calculateItemPositionWithoutScale(t){this.gridster.$options.dirType===$.RTL?this.left=this.gridster.el.scrollWidth-t.clientX+this.diffLeft:this.left=t.clientX+this.offsetLeft-this.diffLeft,this.top=t.clientY+this.offsetTop-this.diffTop}dragStop=t=>{t.stopPropagation(),t.preventDefault(),Zt(),this.cancelOnBlur(),this.mousemove(),this.mouseup(),this.mouseleave(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-moving"),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.path=[],this.gridster.options.draggable&&this.gridster.options.draggable.stop?Promise.resolve(this.gridster.options.draggable.stop(this.gridsterItem.item,this.gridsterItem,t)).then(this.makeDrag,this.cancelDrag):this.makeDrag(),setTimeout(()=>{this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle(!0))})};cancelDrag=()=>{this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push&&this.push.restoreItems(),this.swap&&this.swap.restoreSwapItem(),this.push&&(this.push.destroy(),this.push=null),this.swap&&(this.swap.destroy(),this.swap=null)};makeDrag=()=>{this.gridster.$options.draggable.dropOverItems&&this.gridster.options.draggable&&this.gridster.options.draggable.dropOverItemsCallback&&this.collision&&this.collision!==!0&&this.collision.$item&&this.gridster.options.draggable.dropOverItemsCallback(this.gridsterItem.item,this.collision.item,this.gridster),this.collision=!1,this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push&&this.push.setPushedItems(),this.swap&&this.swap.setSwapItem(),this.push&&(this.push.destroy(),this.push=null),this.swap&&(this.swap.destroy(),this.swap=null)};calculateItemPosition(){if(this.gridster.movingItem=this.gridsterItem.$item,this.positionX=this.gridster.pixelsToPositionX(this.left,Math.round),this.positionY=this.gridster.pixelsToPositionY(this.top,Math.round),this.positionXBackup=this.gridsterItem.$item.x,this.positionYBackup=this.gridsterItem.$item.y,this.gridsterItem.$item.x=this.positionX,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.x=this.positionXBackup),this.gridsterItem.$item.y=this.positionY,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.y=this.positionYBackup),this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,this.top),this.positionXBackup!==this.gridsterItem.$item.x||this.positionYBackup!==this.gridsterItem.$item.y){let t=this.path[this.path.length-1],e="";t.x<this.gridsterItem.$item.x?e=this.push.fromWest:t.x>this.gridsterItem.$item.x?e=this.push.fromEast:t.y<this.gridsterItem.$item.y?e=this.push.fromNorth:t.y>this.gridsterItem.$item.y&&(e=this.push.fromSouth),this.push.pushItems(e,this.gridster.$options.disablePushOnDrag),this.swap.swapItems(),this.collision=this.gridster.checkCollision(this.gridsterItem.$item),this.collision?(this.gridsterItem.$item.x=this.positionXBackup,this.gridsterItem.$item.y=this.positionYBackup,this.gridster.$options.draggable.dropOverItems&&this.collision!==!0&&this.collision.$item&&(this.gridster.movingItem=null)):this.path.push({x:this.gridsterItem.$item.x,y:this.gridsterItem.$item.y}),this.push.checkPushBack()}else this.collision=!1;this.gridster.previewStyle(!0)}toggle(){let t=this.gridsterItem.canBeDragged();!this.enabled&&t?(this.enabled=!this.enabled,this.mousedown=this.gridsterItem.renderer.listen(this.gridsterItem.el,"mousedown",this.dragStartDelay),this.touchstart=this.gridsterItem.renderer.listen(this.gridsterItem.el,"touchstart",this.dragStartDelay)):this.enabled&&!t&&(this.enabled=!this.enabled,this.mousedown(),this.touchstart())}dragStartDelay=t=>{if(t.target.classList.contains(xe)||x.checkContentClassForEvent(this.gridster,t))return;if(x.checkTouchEvent(t),!this.gridster.$options.draggable.delayStart){this.dragStart(t);return}let i=setTimeout(()=>{this.dragStart(t),y()},this.gridster.$options.draggable.delayStart),s=this.gridsterItem.renderer.listen("document","mouseup",y),o=this.gridsterItem.renderer.listen("document","mouseleave",y),n=this.gridsterItem.renderer.listen("window","blur",y),h=this.gridsterItem.renderer.listen("document","touchmove",f),d=this.gridsterItem.renderer.listen("document","touchend",y),a=this.gridsterItem.renderer.listen("document","touchcancel",y);function f(z){x.checkTouchEvent(z),(Math.abs(z.clientX-t.clientX)>9||Math.abs(z.clientY-t.clientY)>9)&&y()}function y(){clearTimeout(i),n(),s(),o(),h(),d(),a()}};getDirections(t){let e=[];return this.lastMouse.clientX===0&&this.lastMouse.clientY===0&&(this.lastMouse.clientY=t.clientY,this.lastMouse.clientX=t.clientX),this.lastMouse.clientY>t.clientY&&e.push(_.UP),this.lastMouse.clientY<t.clientY&&e.push(_.DOWN),this.lastMouse.clientX<t.clientX&&e.push(_.RIGHT),this.lastMouse.clientX>t.clientX&&e.push(_.LEFT),e}},wt=class{fromSouth;fromNorth;fromEast;fromWest;pushedItems;pushedItemsPath;gridsterItem;gridster;tryPattern;constructor(t){this.pushedItems=[],this.pushedItemsPath=[],this.gridsterItem=t,this.gridster=t.gridster,this.tryPattern={fromEast:this.tryWest,fromWest:this.tryEast,fromNorth:this.trySouth,fromSouth:this.tryNorth},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){this.gridster=this.gridsterItem=null}pushItems(t){return this.gridster.$options.pushResizeItems?this.push(this.gridsterItem,t):!1}restoreItems(){let t=0,e=this.pushedItems.length,i;for(;t<e;t++)i=this.pushedItems[t],i.$item.x=i.item.x||0,i.$item.y=i.item.y||0,i.$item.cols=i.item.cols||1,i.$item.row=i.item.row||1,i.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let t=0,e=this.pushedItems.length,i;for(;t<e;t++)i=this.pushedItems[t],i.checkItemChanges(i.$item,i.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let t=this.pushedItems.length-1,e=!1;for(;t>-1;t--)this.checkPushedItem(this.pushedItems[t],t)&&(e=!0);e&&this.checkPushBack()}push(t,e){let i=this.gridster.checkCollision(t.$item);if(i&&i!==!0&&i!==this.gridsterItem&&i.canBeResized()){if(this.tryPattern[e].call(this,i,t,e))return!0}else if(i===!1)return!0;return!1}trySouth(t,e,i){let s=t.$item.y,o=t.$item.rows;return t.$item.y=e.$item.y+e.$item.rows,t.$item.rows=o+s-t.$item.y,!this.gridster.checkCollisionTwoItems(t.$item,e.$item)&&!this.gridster.checkGridCollision(t.$item)?(t.setSize(),this.addToPushed(t),this.push(e,i),!0):(t.$item.y=s,t.$item.rows=o,!1)}tryNorth(t,e,i){let s=t.$item.rows;return t.$item.rows=e.$item.y-t.$item.y,!this.gridster.checkCollisionTwoItems(t.$item,e.$item)&&!this.gridster.checkGridCollision(t.$item)?(t.setSize(),this.addToPushed(t),this.push(e,i),!0):(t.$item.rows=s,!1)}tryEast(t,e,i){let s=t.$item.x,o=t.$item.cols;return t.$item.x=e.$item.x+e.$item.cols,t.$item.cols=o+s-t.$item.x,!this.gridster.checkCollisionTwoItems(t.$item,e.$item)&&!this.gridster.checkGridCollision(t.$item)?(t.setSize(),this.addToPushed(t),this.push(e,i),!0):(t.$item.x=s,t.$item.cols=o,!1)}tryWest(t,e,i){let s=t.$item.cols;return t.$item.cols=e.$item.x-t.$item.x,!this.gridster.checkCollisionTwoItems(t.$item,e.$item)&&!this.gridster.checkGridCollision(t.$item)?(t.setSize(),this.addToPushed(t),this.push(e,i),!0):(t.$item.cols=s,!1)}addToPushed(t){if(this.pushedItems.indexOf(t)<0)this.pushedItems.push(t),this.pushedItemsPath.push([{x:t.item.x||0,y:t.item.y||0,cols:t.item.cols||0,rows:t.item.rows||0},{x:t.$item.x,y:t.$item.y,cols:t.$item.cols,rows:t.$item.rows}]);else{let e=this.pushedItems.indexOf(t);this.pushedItemsPath[e].push({x:t.$item.x,y:t.$item.y,cols:t.$item.cols,rows:t.$item.rows})}}removeFromPushed(t){t>-1&&(this.pushedItems.splice(t,1),this.pushedItemsPath.splice(t,1))}checkPushedItem(t,e){let i=this.pushedItemsPath[e],s=i.length-2,o,n,h,d,a;for(;s>-1;s--)o=i[s],n=t.$item.x,h=t.$item.y,d=t.$item.cols,a=t.$item.rows,t.$item.x=o.x,t.$item.y=o.y,t.$item.cols=o.cols,t.$item.rows=o.rows,this.gridster.findItemWithItem(t.$item)?(t.$item.x=n,t.$item.y=h,t.$item.cols=d,t.$item.rows=a):(t.setSize(),i.splice(s+1,i.length-1-s));return i.length<2?(this.removeFromPushed(e),!0):!1}},It=class{zone;gridsterItem;gridster;lastMouse;itemBackup;resizeEventScrollType;directionFunction=null;resizeEnabled;resizableHandles;mousemove;mouseup;mouseleave;cancelOnBlur;touchmove;touchend;touchcancel;push;pushResize;minHeight;minWidth;offsetTop;offsetLeft;diffTop;diffLeft;diffRight;diffBottom;margin;outerMarginTop;outerMarginRight;outerMarginBottom;outerMarginLeft;originalClientX;originalClientY;top;left;bottom;right;width;height;newPosition;constructor(t,e,i){this.zone=i,this.gridsterItem=t,this.gridster=e,this.lastMouse={clientX:0,clientY:0},this.itemBackup=[0,0,0,0],this.resizeEventScrollType={west:!1,east:!1,north:!1,south:!1}}destroy(){this.gridster?.previewStyle(),this.gridster=this.gridsterItem=null}dragStart(t){if(t.which&&t.which!==1)return;this.gridster.options.resizable&&this.gridster.options.resizable.start&&this.gridster.options.resizable.start(this.gridsterItem.item,this.gridsterItem,t),t.stopPropagation(),t.preventDefault(),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragMove),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragMove)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStop),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStop),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStop),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStop),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStop),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-resizing"),this.lastMouse.clientX=t.clientX,this.lastMouse.clientY=t.clientY,this.left=this.gridsterItem.left,this.top=this.gridsterItem.top,this.originalClientX=t.clientX,this.originalClientY=t.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.bottom=this.gridsterItem.top+this.gridsterItem.height,this.right=this.gridsterItem.left+this.gridsterItem.width,this.margin=this.gridster.$options.margin,this.outerMarginTop=this.gridster.$options.outerMarginTop,this.outerMarginRight=this.gridster.$options.outerMarginRight,this.outerMarginBottom=this.gridster.$options.outerMarginBottom,this.outerMarginLeft=this.gridster.$options.outerMarginLeft,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.diffLeft=t.clientX+this.offsetLeft-this.left,this.diffRight=t.clientX+this.offsetLeft-this.right,this.diffTop=t.clientY+this.offsetTop-this.top,this.diffBottom=t.clientY+this.offsetTop-this.bottom,this.minHeight=this.gridster.positionYToPixels(this.gridsterItem.$item.minItemRows||this.gridster.$options.minItemRows)-this.margin,this.minWidth=this.gridster.positionXToPixels(this.gridsterItem.$item.minItemCols||this.gridster.$options.minItemCols)-this.margin,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(),this.push=new st(this.gridsterItem),this.pushResize=new wt(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid();let{classList:e}=t.target;e.contains("handle-n")?(this.resizeEventScrollType.north=!0,this.directionFunction=this.handleNorth):e.contains("handle-w")?this.gridster.$options.dirType===$.RTL?(this.resizeEventScrollType.east=!0,this.directionFunction=this.handleEast):(this.resizeEventScrollType.west=!0,this.directionFunction=this.handleWest):e.contains("handle-s")?(this.resizeEventScrollType.south=!0,this.directionFunction=this.handleSouth):e.contains("handle-e")?this.gridster.$options.dirType===$.RTL?(this.resizeEventScrollType.west=!0,this.directionFunction=this.handleWest):(this.resizeEventScrollType.east=!0,this.directionFunction=this.handleEast):e.contains("handle-nw")?this.gridster.$options.dirType===$.RTL?(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleNorthEast):(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleNorthWest):e.contains("handle-ne")?this.gridster.$options.dirType===$.RTL?(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleNorthWest):(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleNorthEast):e.contains("handle-sw")?this.gridster.$options.dirType===$.RTL?(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleSouthEast):(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleSouthWest):e.contains("handle-se")&&(this.gridster.$options.dirType===$.RTL?(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleSouthWest):(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleSouthEast))}dragMove=t=>{if(this.directionFunction===null)throw new Error("The `directionFunction` has not been set before calling `dragMove`.");t.stopPropagation(),t.preventDefault(),x.checkTouchEvent(t),this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,Jt(this.gridster,this.left,this.top,this.width,this.height,t,this.lastMouse,this.directionFunction,!0,this.resizeEventScrollType);let e=this.gridster.options.scale||1;this.directionFunction({clientX:this.originalClientX+(t.clientX-this.originalClientX)/e,clientY:this.originalClientY+(t.clientY-this.originalClientY)/e}),this.lastMouse.clientX=t.clientX,this.lastMouse.clientY=t.clientY,this.zone.run(()=>{this.gridster.updateGrid()})};dragStop=t=>{t.stopPropagation(),t.preventDefault(),Zt(),this.mousemove(),this.mouseup(),this.mouseleave(),this.cancelOnBlur(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.gridster.options.resizable&&this.gridster.options.resizable.stop?Promise.resolve(this.gridster.options.resizable.stop(this.gridsterItem.item,this.gridsterItem,t)).then(this.makeResize,this.cancelResize):this.makeResize(),setTimeout(()=>{this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-resizing"),this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())})};cancelResize=()=>{this.gridsterItem.$item.cols=this.gridsterItem.item.cols||1,this.gridsterItem.$item.rows=this.gridsterItem.item.rows||1,this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push.restoreItems(),this.pushResize.restoreItems(),this.push.destroy(),this.push=null,this.pushResize.destroy(),this.pushResize=null};makeResize=()=>{this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push.setPushedItems(),this.pushResize.setPushedItems(),this.push.destroy(),this.push=null,this.pushResize.destroy(),this.pushResize=null};handleNorth=t=>{this.top=t.clientY+this.offsetTop-this.diffTop,this.height=this.bottom-this.top,this.minHeight>this.height?(this.height=this.minHeight,this.top=this.bottom-this.minHeight):this.gridster.options.enableBoundaryControl&&(this.top=Math.max(0,this.top),this.height=this.bottom-this.top);let e=this.gridster.options.pushItems?this.margin:0;if(this.newPosition=this.gridster.pixelsToPositionY(this.top+e,Math.floor),this.gridsterItem.$item.y!==this.newPosition){if(this.itemBackup[1]=this.gridsterItem.$item.y,this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows+=this.gridsterItem.$item.y-this.newPosition,this.gridsterItem.$item.y=this.newPosition,this.pushResize.pushItems(this.pushResize.fromSouth),this.push.pushItems(this.push.fromSouth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item)){this.gridsterItem.$item.y=this.itemBackup[1],this.gridsterItem.$item.rows=this.itemBackup[3],this.top=this.gridster.positionYToPixels(this.gridsterItem.$item.y),this.setItemTop(this.gridster.positionYToPixels(this.gridsterItem.$item.y)),this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);return}else this.gridster.previewStyle();this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemTop(this.top),this.setItemHeight(this.height)};handleWest=t=>{let e=this.gridster.$options.dirType===$.RTL?this.originalClientX+(this.originalClientX-t.clientX):t.clientX;this.left=e+this.offsetLeft-this.diffLeft,this.width=this.right-this.left,this.minWidth>this.width?(this.width=this.minWidth,this.left=this.right-this.minWidth):this.gridster.options.enableBoundaryControl&&(this.left=Math.max(0,this.left),this.width=this.right-this.left);let i=this.gridster.options.pushItems?this.margin:0;if(this.newPosition=this.gridster.pixelsToPositionX(this.left+i,Math.floor),this.gridsterItem.$item.x!==this.newPosition){if(this.itemBackup[0]=this.gridsterItem.$item.x,this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols+=this.gridsterItem.$item.x-this.newPosition,this.gridsterItem.$item.x=this.newPosition,this.pushResize.pushItems(this.pushResize.fromEast),this.push.pushItems(this.push.fromEast,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item)){this.gridsterItem.$item.x=this.itemBackup[0],this.gridsterItem.$item.cols=this.itemBackup[2],this.left=this.gridster.positionXToPixels(this.gridsterItem.$item.x),this.setItemLeft(this.gridster.positionXToPixels(this.gridsterItem.$item.x)),this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);return}else this.gridster.previewStyle();this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemLeft(this.left),this.setItemWidth(this.width)};handleSouth=t=>{if(this.height=t.clientY+this.offsetTop-this.diffBottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight),this.bottom=this.top+this.height,this.gridster.options.enableBoundaryControl){let i=this.outerMarginBottom??this.margin,s=this.gridster.el.getBoundingClientRect();this.bottom=Math.min(this.bottom,s.bottom-s.top-2*i),this.height=this.bottom-this.top}let e=this.gridster.options.pushItems?0:this.margin;if(this.newPosition=this.gridster.pixelsToPositionY(this.bottom+e,Math.ceil),this.gridsterItem.$item.y+this.gridsterItem.$item.rows!==this.newPosition){if(this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows=this.newPosition-this.gridsterItem.$item.y,this.pushResize.pushItems(this.pushResize.fromNorth),this.push.pushItems(this.push.fromNorth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item)){this.gridsterItem.$item.rows=this.itemBackup[3],this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);return}else this.gridster.previewStyle();this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemHeight(this.height)};handleEast=t=>{let e=this.gridster.$options.dirType===$.RTL?this.originalClientX+(this.originalClientX-t.clientX):t.clientX;if(this.width=e+this.offsetLeft-this.diffRight-this.left,this.minWidth>this.width&&(this.width=this.minWidth),this.right=this.left+this.width,this.gridster.options.enableBoundaryControl){let s=this.outerMarginRight??this.margin,o=this.gridster.el.getBoundingClientRect();this.right=Math.min(this.right,o.right-o.left-2*s),this.width=this.right-this.left}let i=this.gridster.options.pushItems?0:this.margin;if(this.newPosition=this.gridster.pixelsToPositionX(this.right+i,Math.ceil),this.gridsterItem.$item.x+this.gridsterItem.$item.cols!==this.newPosition){if(this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols=this.newPosition-this.gridsterItem.$item.x,this.pushResize.pushItems(this.pushResize.fromWest),this.push.pushItems(this.push.fromWest,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item)){this.gridsterItem.$item.cols=this.itemBackup[2],this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);return}else this.gridster.previewStyle();this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemWidth(this.width)};handleNorthWest=t=>{this.handleNorth(t),this.handleWest(t)};handleNorthEast=t=>{this.handleNorth(t),this.handleEast(t)};handleSouthWest=t=>{this.handleSouth(t),this.handleWest(t)};handleSouthEast=t=>{this.handleSouth(t),this.handleEast(t)};toggle(){this.resizeEnabled=this.gridsterItem.canBeResized(),this.resizableHandles=this.gridsterItem.getResizableHandles()}dragStartDelay(t){if(x.checkTouchEvent(t),!this.gridster.$options.resizable.delayStart){this.dragStart(t);return}let e=setTimeout(()=>{this.dragStart(t),f()},this.gridster.$options.resizable.delayStart),{cancelMouse:i,cancelMouseLeave:s,cancelOnBlur:o,cancelTouchMove:n,cancelTouchEnd:h,cancelTouchCancel:d}=this.zone.runOutsideAngular(()=>{let y=this.gridsterItem.renderer.listen("document","mouseup",f),z=this.gridsterItem.renderer.listen("document","mouseleave",f),F=this.gridsterItem.renderer.listen("window","blur",f),B=this.gridsterItem.renderer.listen("document","touchmove",a),X=this.gridsterItem.renderer.listen("document","touchend",f),W=this.gridsterItem.renderer.listen("document","touchcancel",f);return{cancelMouse:y,cancelMouseLeave:z,cancelOnBlur:F,cancelTouchMove:B,cancelTouchEnd:X,cancelTouchCancel:W}});function a(y){x.checkTouchEvent(y),(Math.abs(y.clientX-t.clientX)>9||Math.abs(y.clientY-t.clientY)>9)&&f()}function f(){clearTimeout(e),o(),i(),s(),n(),h(),d()}}setItemTop(t){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,t)}setItemLeft(t){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,t,this.top)}setItemHeight(t){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"height",t+"px")}setItemWidth(t){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"width",t+"px")}},ee=(()=>{class r{renderer;zone;item;itemInit=new Y;itemChange=new Y;itemResize=new Y;$item;el;gridster;top;left;width;height;drag;resize;notPlaced;init;get zIndex(){return this.getLayerIndex()+this.gridster.$options.baseLayerIndex}constructor(e,i,s,o){this.renderer=s,this.zone=o,this.el=e.nativeElement,this.$item={cols:-1,rows:-1,x:-1,y:-1},this.gridster=i,this.drag=new Ct(this,i,this.zone),this.resize=new It(this,i,this.zone)}ngOnInit(){this.gridster.addItem(this)}ngOnChanges(e){e.item&&(this.updateOptions(),this.init||this.gridster.calculateLayout$.next()),e.item&&e.item.previousValue&&this.setSize()}updateOptions(){this.$item=x.merge(this.$item,this.item,{cols:void 0,rows:void 0,x:void 0,y:void 0,layerIndex:void 0,dragEnabled:void 0,resizeEnabled:void 0,compactEnabled:void 0,maxItemRows:void 0,minItemRows:void 0,maxItemCols:void 0,minItemCols:void 0,maxItemArea:void 0,minItemArea:void 0,resizableHandles:{s:void 0,e:void 0,n:void 0,w:void 0,se:void 0,ne:void 0,sw:void 0,nw:void 0}})}ngOnDestroy(){this.gridster.removeItem(this),this.drag.destroy(),this.resize.destroy(),this.gridster=this.drag=this.resize=null}setSize(){this.renderer.setStyle(this.el,"display",this.notPlaced?"":"block"),this.gridster.gridRenderer.updateItem(this.el,this.$item,this.renderer),this.updateItemSize()}updateItemSize(){let e=this.$item.y*this.gridster.curRowHeight,i=this.$item.x*this.gridster.curColWidth,s=this.$item.cols*this.gridster.curColWidth-this.gridster.$options.margin,o=this.$item.rows*this.gridster.curRowHeight-this.gridster.$options.margin;this.top=e,this.left=i,!this.init&&s>0&&o>0&&(this.init=!0,this.item.initCallback&&this.item.initCallback(this.item,this),this.gridster.options.itemInitCallback&&this.gridster.options.itemInitCallback(this.item,this),this.itemInit.next({item:this.item,itemComponent:this}),this.gridster.$options.scrollToNewItems&&this.el.scrollIntoView(!1)),(s!==this.width||o!==this.height)&&(this.width=s,this.height=o,this.gridster.options.itemResizeCallback&&this.gridster.options.itemResizeCallback(this.item,this),this.itemResize.next({item:this.item,itemComponent:this}))}itemChanged(){this.gridster.options.itemChangeCallback&&this.gridster.options.itemChangeCallback(this.item,this),this.itemChange.next({item:this.item,itemComponent:this})}checkItemChanges(e,i){e.rows===i.rows&&e.cols===i.cols&&e.x===i.x&&e.y===i.y||(this.gridster.checkCollision(this.$item)?(this.$item.x=i.x||0,this.$item.y=i.y||0,this.$item.cols=i.cols||1,this.$item.rows=i.rows||1,this.setSize()):(this.item.cols=this.$item.cols,this.item.rows=this.$item.rows,this.item.x=this.$item.x,this.item.y=this.$item.y,this.gridster.calculateLayout$.next(),this.itemChanged()))}canBeDragged(){let e=this.gridster.$options.draggable.enabled,i=this.$item.dragEnabled===void 0?e:this.$item.dragEnabled;return!this.gridster.mobile&&e&&i}canBeResized(){let e=this.gridster.$options.resizable.enabled,i=this.$item.resizeEnabled===void 0?e:this.$item.resizeEnabled;return!this.gridster.mobile&&e&&i}getResizableHandles(){let e=this.gridster.$options.resizable.handles,i=this.$item.resizableHandles;return i===void 0?e:k(k({},e),i)}bringToFront(e){if(e&&e<=0)return;let i=this.getLayerIndex(),s=this.gridster.$options.maxLayerIndex;if(i<s){let o=e?i+e:s;this.item.layerIndex=this.$item.layerIndex=o>s?s:o}}sendToBack(e){if(e&&e<=0)return;let i=this.getLayerIndex();if(i>0){let s=e?i-e:0;this.item.layerIndex=this.$item.layerIndex=s<0?0:s}}getLayerIndex(){return this.item.layerIndex!==void 0?this.item.layerIndex:this.gridster.$options.defaultLayerIndex!==void 0?this.gridster.$options.defaultLayerIndex:0}static \u0275fac=function(i){return new(i||r)(S(O),S($t),S(A),S(lt))};static \u0275cmp=E({type:r,selectors:[["gridster-item"]],hostVars:2,hostBindings:function(i,s){i&2&&kt("z-index",s.zIndex)},inputs:{item:"item"},outputs:{itemInit:"itemInit",itemChange:"itemChange",itemResize:"itemResize"},features:[ht],ngContentSelectors:Ut,decls:9,vars:8,consts:[[1,"gridster-item-resizable-handler","handle-s"],[1,"gridster-item-resizable-handler","handle-e"],[1,"gridster-item-resizable-handler","handle-n"],[1,"gridster-item-resizable-handler","handle-w"],[1,"gridster-item-resizable-handler","handle-se"],[1,"gridster-item-resizable-handler","handle-ne"],[1,"gridster-item-resizable-handler","handle-sw"],[1,"gridster-item-resizable-handler","handle-nw"],[1,"gridster-item-resizable-handler","handle-s",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-e",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-n",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-w",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-se",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-ne",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-sw",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-nw",3,"mousedown","touchstart"]],template:function(i,s){i&1&&(dt(),ct(0),v(1,me,1,0,"div",0)(2,ge,1,0,"div",1)(3,pe,1,0,"div",2)(4,ue,1,0,"div",3)(5,fe,1,0,"div",4)(6,ye,1,0,"div",5)(7,Ce,1,0,"div",6)(8,we,1,0,"div",7)),i&2&&(g(),I(s.resize.resizableHandles!=null&&s.resize.resizableHandles.s&&s.resize.resizeEnabled?1:-1),g(),I(s.resize.resizableHandles!=null&&s.resize.resizableHandles.e&&s.resize.resizeEnabled?2:-1),g(),I(s.resize.resizableHandles!=null&&s.resize.resizableHandles.n&&s.resize.resizeEnabled?3:-1),g(),I(s.resize.resizableHandles!=null&&s.resize.resizableHandles.w&&s.resize.resizeEnabled?4:-1),g(),I(s.resize.resizableHandles!=null&&s.resize.resizableHandles.se&&s.resize.resizeEnabled?5:-1),g(),I(s.resize.resizableHandles!=null&&s.resize.resizableHandles.ne&&s.resize.resizeEnabled?6:-1),g(),I(s.resize.resizableHandles!=null&&s.resize.resizableHandles.sw&&s.resize.resizeEnabled?7:-1),g(),I(s.resize.resizableHandles!=null&&s.resize.resizableHandles.nw&&s.resize.resizeEnabled?8:-1))},styles:[`gridster-item{box-sizing:border-box;z-index:1;position:absolute;overflow:hidden;transition:.3s;display:none;background:#fff;-webkit-user-select:text;user-select:text}gridster-item.gridster-item-moving{cursor:move}gridster-item.gridster-item-resizing,gridster-item.gridster-item-moving{transition:0s;z-index:2;box-shadow:0 0 5px 5px #0003,0 6px 10px #00000024,0 1px 18px #0000001f}.gridster-item-resizable-handler{position:absolute;z-index:2}.gridster-item-resizable-handler.handle-n{cursor:ns-resize;height:10px;right:0;top:0;left:0}.gridster-item-resizable-handler.handle-e{cursor:ew-resize;width:10px;bottom:0;right:0;top:0}.gridster-item-resizable-handler.handle-s{cursor:ns-resize;height:10px;right:0;bottom:0;left:0}.gridster-item-resizable-handler.handle-w{cursor:ew-resize;width:10px;left:0;top:0;bottom:0}.gridster-item-resizable-handler.handle-ne{cursor:ne-resize;width:10px;height:10px;right:0;top:0}.gridster-item-resizable-handler.handle-nw{cursor:nw-resize;width:10px;height:10px;left:0;top:0}.gridster-item-resizable-handler.handle-se{cursor:se-resize;width:0;height:0;right:0;bottom:0;border-style:solid;border-width:0 0 10px 10px;border-color:transparent}.gridster-item-resizable-handler.handle-sw{cursor:sw-resize;width:10px;height:10px;left:0;bottom:0}gridster-item:hover .gridster-item-resizable-handler.handle-se{border-color:transparent transparent #ccc}
`],encapsulation:2})}return r})();var ve=(r,t)=>t.trackById;function Te(r,t){if(r&1&&(p(0,"span"),D(1),u()),r&2){let e=c(2).ngIf;g(),mt("No definition for layout with id ",e.id,"")}}function _e(r,t){r&1&&Mt(0)}function be(r,t){if(r&1&&v(0,_e,1,0,"ng-container",1),r&2){let e=c(4);T("ngComponentOutlet",e.layoutLoadingComponent)}}function ze(r,t){if(r&1&&(p(0,"span"),D(1),u()),r&2){let e=c(3).ngIf;g(),mt("Loading layout with id ",e.id,"...")}}function Se(r,t){if(r&1&&v(0,be,1,1,"ng-container")(1,ze,2,1,"span"),r&2){let e=c(3);I(e.layoutLoadingComponent?0:1)}}function ke(r,t){r&1&&(p(0,"span",8),D(1," drag_pan "),u())}function Re(r,t){if(r&1&&(p(0,"gridster-item",5),v(1,ke,2,0,"span",6),R(2,"dj-ui-element-wrapper",7),u()),r&2){let e=t.$implicit;T("id",e.elementInstance.id)("item",e),g(),T("ngIf",e.dragEnabled),g(),T("uiElementInstance",e.elementInstance)}}function Le(r,t){if(r&1&&V(0,Re,3,4,"gridster-item",5,ve),r&2){let e=c();U(e)}}function Me(r,t){r&1&&(p(0,"span"),D(1,"This layout is empty"),u())}function Pe(r,t){r&1&&v(0,Le,2,0)(1,Me,2,0,"span"),r&2&&I(t.length>0?0:1)}function Ee(r,t){if(r&1&&(p(0,"gridster",4),v(1,Pe,2,1),u()),r&2){let e,i=t.ngIf,s=c(4);T("options",i),g(),I((e=s.gridItems())?1:-1,e)}}function De(r,t){if(r&1&&(R(0,"link",2),v(1,Ee,2,2,"gridster",3)),r&2){let e=c(3);g(),T("ngIf",e.layoutGridConfigs())}}function Fe(r,t){if(r&1&&v(0,Te,2,1,"span")(1,Se,2,1)(2,De,2,1),r&2){let e,i=c().ngIf;I((e=i.status)==="missing"?0:e==="loading"?1:e==="loaded"?2:-1)}}function We(r,t){r&1&&(p(0,"span"),D(1,"Infinte loop in rendering layout detected"),u())}function Oe(r,t){if(r&1&&(Rt(0),v(1,Fe,3,1)(2,We,2,0,"span"),Lt()),r&2){let e=c();g(),I(e.isInfinite()?2:1)}}var ie=16,He=16,Be=16,re=5,oe=4,ne=20,Xe=0,Ge=0,Ne=!0,Ye=!0,Ae={x:Xe,y:Ge,rows:ne,cols:oe,resizeEnabled:Ne,dragEnabled:Ye},Ve=400,se={setGridSize:!0,margin:re,displayGrid:rt.None,gridType:l.VerticalFixed,fixedRowHeight:Be,minCols:He,maxCols:ie,maxItemCols:ie,maxItemRows:Ve,maxRows:9999,resizable:{enabled:!0,handles:{n:!0,s:!0,e:!0,w:!0,se:!1,sw:!1,nw:!1,ne:!1}},draggable:{enabled:!0,ignoreContent:!0,dragHandleClass:"drag-area"},defaultItemRows:ne,defaultItemCols:oe,pushItems:!0,compactType:"compactLeft&Up",keepFixedHeightInMobile:!0},Ue=r=>typeof r.id=="string"&&r.elementInstance,he=(()=>{class r{constructor(){this.#t=N(Xt),this.#e=N(O),this.layoutId=et.required(),this.layoutConfig=Ot(()=>{let e=this.layoutId();return this.#t.getTemplate(e)}),this.gridItems=Et(()=>{let e=this.layoutConfig();return!e||!e.config?null:(setTimeout(()=>{this.gridItems.set(this.#s(e.config))},100),[])}),this.isInfinite=gt(()=>{let e=this.layoutId(),i=this.#e.nativeElement,s=Ht({ele:i,attrName:"layoutId",attrValue:e});return s&&console.error(`Layout with id ${e} has already existed in parents`),s}),this.layoutGridConfigs=gt(()=>{let e=this.layoutConfig();if(e?.status!=="loaded")return null;let i=e.config.gridConfigs;return G(k({},se),{itemChangeCallback:this.#r.bind(this),margin:i?.gap??re,compactType:i?.compactType??se.compactType})}),this.#i=N(Bt),this.layoutLoadingComponent=N(Gt,{optional:!0})?.layoutLoadingComponent}#t;#e;#i;#s(e){return e.uiElementInstances.map(i=>{let{positionAndSize:s}=i;return k(k({id:i.id,elementInstance:i,trackById:`LAYOUT: ${e.id} - ELEMENT: ${i.id}`},Ae),s)})}#r(e){if(Ue(e)){let{id:i,x:s,y:o,rows:n,cols:h}=e;this.#i.emitEvent({type:"UI_ELEMENT_REPOSITION",payload:{layoutId:this.layoutId(),elementId:i,newPositionAndSize:{x:s,y:o,rows:n,cols:h}}})}}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=E({type:r,selectors:[["dj-ui-layout"]],hostVars:1,hostBindings:function(i,s){i&2&&St("layoutId",s.layoutId())},inputs:{layoutId:[1,"layoutId"]},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngComponentOutlet"],["href",zt`https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=drag_pan`,"rel","stylesheet"],[3,"options",4,"ngIf"],[3,"options"],[3,"id","item"],["class","material-symbols-outlined drag-area",4,"ngIf"],[3,"uiElementInstance"],[1,"material-symbols-outlined","drag-area"]],template:function(i,s){i&1&&v(0,Oe,3,1,"ng-container",0),i&2&&T("ngIf",s.layoutConfig())},dependencies:[it,Dt,Ft,Nt,$t,ee],styles:["[_nghost-%COMP%]{display:block;width:100%}[_nghost-%COMP%]   .drag-area[_ngcontent-%COMP%]{position:absolute;top:.25rem;right:.25rem;opacity:0;transition:opacity ease-in-out .2s;cursor:grab;z-index:99999}[_nghost-%COMP%]   .drag-area[_ngcontent-%COMP%]:hover{opacity:1}[_nghost-%COMP%]   gridster[_ngcontent-%COMP%]{background:unset}[_nghost-%COMP%]   gridster[_ngcontent-%COMP%]   gridster-item[_ngcontent-%COMP%]{background:unset;overflow:visible}"],changeDetection:0})}}return r})();function je(r,t){r&1&&R(0,"dj-ui-layout",0),r&2&&T("layoutId",t)}function Je(r,t){r&1&&(p(0,"span"),D(1,"Waiting for layout id..."),u())}var ki=(()=>{class r{constructor(){this.layoutId=et.required()}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=E({type:r,selectors:[["djui"]],inputs:{layoutId:[1,"layoutId"]},decls:2,vars:1,consts:[[3,"layoutId"]],template:function(i,s){if(i&1&&v(0,je,1,1,"dj-ui-layout",0)(1,Je,2,0,"span"),i&2){let o;I((o=s.layoutId())?0:1,o)}},dependencies:[it,he],styles:["[_nghost-%COMP%]{display:block;width:100%}"],changeDetection:0})}}return r})();export{m as a,ki as b};
