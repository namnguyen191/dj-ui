import{a as G}from"./chunk-AUPDVPWC.js";import{a as k}from"./chunk-FI4W5XJG.js";import{f as Z}from"./chunk-XJT726ZN.js";import{e as E,g as I,h as R}from"./chunk-EWUWNZZG.js";import{a as M}from"./chunk-CB73VGS7.js";import{b as y}from"./chunk-HAEKH4MG.js";import{b as z}from"./chunk-PGWQLFOQ.js";import{a as W,c as Y,e as K,g as Q,i as V,k as X}from"./chunk-P7QEISYO.js";import{a as s,e as J,g as P,j as $,k as q,n as S,p as O}from"./chunk-RNE5JESU.js";import{b as B,d as x}from"./chunk-SPYAYC6H.js";import{$ as D,B as v,C as N,F as w,U as T,Y as l,b as g,ca as r,fa as _,r as L,t as h,x as A}from"./chunk-J33AFEAQ.js";var te=(()=>{class e{constructor(){this.#e=r(y),this.singleFileUploadFetcher=t=>{let{endpoint:o,file:c,responseType:d="json"}=t,m=new FormData;return m.append("file",c),this.#e.post(o,m,{responseType:d})}}#e;static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=l({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var oe=(()=>{class e{constructor(){this.#e=r(y),this.#t=t=>{let{endpoint:o,method:c,headers:d,body:m}=t;return this.#e.request(c,o,{headers:d,body:m})},this.httpFetcher=this.#t.bind(this)}#e;#t;static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=l({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var re=s.strictObject({remoteResourceId:s.string()},{errorMap:()=>({message:'Invalid triggerRemoteResource action hook payload, example: { "type": "triggerRemoteResource", "payload": { "remoteResourceId": "123" }  } '})}),ne=s.strictObject({scope:q,data:z},{errorMap:()=>({message:'Invalid addToState action hook payload, example: { "type": "addToState", "payload": { "scope": "global", data: "{ "some": "data" }" }  } '})}),ie=s.strictObject({navigationType:s.union([s.literal("internal"),s.literal("external")]),url:s.string()},{errorMap:()=>({message:'Invalid navigate action hook payload, example: { "type": "navigate", "payload": { "navigationType": "internal", url: "/my/route" }  } '})}),ae=(()=>{class e{constructor(){this.#e=r(I),this.#t=r(S),this.#o=r(Z),this.handleTriggerRemoteResource=({remoteResourceId:t})=>{this.#e.triggerResource(t)},this.handleAddToState=t=>{this.#t.addToState(t)},this.navigate=({navigationType:t,url:o})=>{t==="internal"?this.#o.navigateByUrl(o):window.open(o,"_blank")?.focus()}}#e;#t;#o;static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=l({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var se=()=>g(v(e=>e.type==="MISSING_LAYOUT_TEMPLATE")),pe=()=>g(v(e=>e.type==="MISSING_REMOTE_RESOURCE_TEMPLATE")),ce=()=>g(v(e=>e.type==="MISSING_UI_ELEMENT_TEMPLATE")),me=()=>g(v(e=>e.type==="UI_ELEMENT_REPOSITION"));var ue=new D("COMMON_SETUP_CONFIG"),ge=()=>{let e=r(ae),i=r(P),t={addToState:{handler:e.handleAddToState,payloadParser:ne},triggerRemoteResource:{handler:e.handleTriggerRemoteResource,payloadParser:re},navigate:{handler:e.navigate,payloadParser:ie}};i.registerHooks(t)},he=()=>{let e=r(oe).httpFetcher;r(E).registerFetcher("httpFetcher",e)},Ye=()=>{let e=r(te).singleFileUploadFetcher;r(E).registerFetcher("singleFileUploadFetcher",e)},ve=e=>{let{getLayoutTemplate:i,getUiElementTemplate:t,getRemoteResourceTemplate:o,updateElementsPositionsHandler:c}=e,d=r(x),m=r(k),H=r(O),j=r(M),f=d.getEvents().pipe(G()),b=p=>T({next:n=>{n.id!==p&&console.warn(`Request for template with id ${p} but received ${n.id} instead. This might cause DJ-UI to register the wrong template, leading to missing UI. Please check your template configuration for mis-matching id`)}});if(i&&f.pipe(se(),h(n=>{let a=n.payload.id;return m.startRegisteringTemplate(a),i(a).pipe(b(a))}),T(n=>m.registerTemplate(n))).subscribe(),t&&f.pipe(ce(),h(n=>{let a=n.payload.id;return H.startRegisteringTemplate(a),t(a).pipe(b(a))}),T(n=>{H.registerTemplate(n)})).subscribe(),o&&f.pipe(pe(),h(n=>{let a=n.payload.id;return j.startRegisteringTemplate(a),o(a).pipe(b(a))}),T(n=>j.registerTemplate(n))).subscribe(),c){let p=f.pipe(me()),n=p.pipe(w(3e3));p.pipe(N(n),L(C=>C.reduce((u,F)=>{let{payload:{elementId:U,layoutId:le,newPositionAndSize:de}}=F;return u=J(u,`${le}.${U}`,de),u},{})),h(C=>{let u=Object.entries(C).map(([F,U])=>c(F,U));return A(u)})).subscribe()}},Te=e=>{let i=r(R);for(let[t,o]of Object.entries(e))i.registerUIElement({type:t,component:o})},fe=e=>{let i=r(R);for(let[t,o]of Object.entries(e))i.registerUIElementLoader({type:t,loader:o})},Ke=()=>{let e;try{e=r(ue)}catch{B("No configs was provided for DJ-UI default setup, please provide values for the COMMON_SETUP_CONFIG token");return}ge(),he();let{templatesHandlers:i,componentsMap:t,componentLoadersMap:o}=e;i&&ve(i),t&&Te(t),o&&fe(o)},Qe=()=>_([k,O,M,x,E,$,I,S,R,P]);var et={[W]:()=>import("./chunk-5ZOMH6GQ.js").then(e=>e.CarbonButtonComponent),[Y]:()=>import("./chunk-ZMIR5WUN.js").then(e=>e.CarbonTableComponent),[K]:()=>import("./chunk-X6DVRZ4L.js").then(e=>e.CarbonTextCardComponent),[Q]:()=>import("./chunk-MJGECOHD.js").then(e=>e.CarbonCarouselComponent),[V]:()=>import("./chunk-3R2PMWAZ.js").then(e=>e.CarbonCarouselCardComponent),[X]:()=>import("./chunk-SOU4OZYA.js").then(e=>e.CarbonSimpleTextComponent)};export{ue as a,Ye as b,Ke as c,Qe as d,et as e};
