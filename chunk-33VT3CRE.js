import{a as Z}from"./chunk-OEMD7ULJ.js";import{a as x}from"./chunk-RFM5HJJR.js";import{f as w}from"./chunk-HOXVOTVY.js";import{f as B,g as k,i as J,j as E,k as q,m as S,n as P,p as R,q as I}from"./chunk-AC577EVM.js";import{a as M}from"./chunk-FQHWX7XN.js";import{a as U}from"./chunk-ROZW5JAP.js";import{b as y,f as G}from"./chunk-LMQLNWY7.js";import{b as z}from"./chunk-BQJLUYBS.js";import{a as $,c as W,e as Y,g as K,i as Q,k as V}from"./chunk-P7QEISYO.js";import{b as s}from"./chunk-I7O7BTAO.js";import{B as T,C as A,F as N,V as f,Z as m,aa as _,b as g,da as r,ga as D,r as j,t as v,x as L}from"./chunk-RVPXDSFJ.js";var ee=(()=>{class e{constructor(){this.#e=r(y),this.singleFileUploadFetcher=t=>{let{endpoint:o,file:p,responseType:l="json"}=t,c=new FormData;return c.append("file",p),this.#e.post(o,c,{responseType:l})}}#e;static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=m({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var te=(()=>{class e{constructor(){this.#e=r(y),this.#t=t=>{let{endpoint:o,method:p,headers:l,body:c}=t;return this.#e.request(p,o,{headers:l,body:c})},this.httpFetcher=this.#t.bind(this)}#e;#t;static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=m({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var oe=s.strictObject({remoteResourceId:s.string()},{errorMap:()=>({message:'Invalid triggerRemoteResource action hook payload, example: { "type": "triggerRemoteResource", "payload": { "remoteResourceId": "123" }  } '})}),re=s.strictObject({scope:q,data:z},{errorMap:()=>({message:'Invalid addToState action hook payload, example: { "type": "addToState", "payload": { "scope": "global", data: "{ "some": "data" }" }  } '})}),ne=s.strictObject({navigationType:s.union([s.literal("internal"),s.literal("external")]),url:s.string()},{errorMap:()=>({message:'Invalid navigate action hook payload, example: { "type": "navigate", "payload": { "navigationType": "internal", url: "/my/route" }  } '})}),ie=(()=>{class e{constructor(){this.#e=r(R),this.#t=r(S),this.#o=r(w),this.handleTriggerRemoteResource=({remoteResourceId:t})=>{this.#e.triggerResource(t)},this.handleAddToState=t=>{this.#t.addToState(t)},this.navigate=({navigationType:t,url:o})=>{t==="internal"?this.#o.navigateByUrl(o):window.open(o,"_blank")?.focus()}}#e;#t;#o;static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=m({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ae=()=>g(T(e=>e.type==="MISSING_LAYOUT_TEMPLATE")),se=()=>g(T(e=>e.type==="MISSING_REMOTE_RESOURCE_TEMPLATE")),pe=()=>g(T(e=>e.type==="MISSING_UI_ELEMENT_TEMPLATE")),ce=()=>g(T(e=>e.type==="UI_ELEMENT_REPOSITION"));var de=new _("COMMON_SETUP_CONFIG"),ue=()=>{let e=r(ie),n=r(k),t={addToState:{handler:e.handleAddToState,payloadParser:re},triggerRemoteResource:{handler:e.handleTriggerRemoteResource,payloadParser:oe},navigate:{handler:e.navigate,payloadParser:ne}};n.registerHooks(t)},ge=()=>{let e=r(te).httpFetcher;r(E).registerFetcher("httpFetcher",e)},Je=()=>{let e=r(ee).singleFileUploadFetcher;r(E).registerFetcher("singleFileUploadFetcher",e)},ve=e=>{let{getLayoutTemplate:n,getUiElementTemplate:t,getRemoteResourceTemplate:o,updateElementsPositionsHandler:p}=e,l=r(U),c=r(x),O=r(M),H=r(P),h=l.getEvents().pipe(Z());if(n&&h.pipe(ae(),v(i=>{let a=i.payload.id;return c.startRegisteringTemplate(a),n(a)}),f(i=>c.registerTemplate(i))).subscribe(),t&&h.pipe(pe(),v(i=>{let a=i.payload.id;return O.startRegisteringTemplate(a),t(a)}),f(i=>{O.registerTemplate(i)})).subscribe(),o&&h.pipe(se(),v(i=>{let a=i.payload.id;return H.startRegisteringTemplate(a),o(a)}),f(i=>H.registerTemplate(i))).subscribe(),p){let d=h.pipe(ce()),i=d.pipe(N(3e3));d.pipe(A(i),j(b=>b.reduce((u,C)=>{let{payload:{elementId:F,layoutId:me,newPositionAndSize:le}}=C;return u=B(u,`${me}.${F}`,le),u},{})),v(b=>{let u=Object.entries(b).map(([C,F])=>p(C,F));return L(u)})).subscribe()}},Te=e=>{let n=r(I);for(let[t,o]of Object.entries(e))n.registerUIElement({type:t,component:o})},he=e=>{let n=r(I);for(let[t,o]of Object.entries(e))n.registerUIElementLoader({type:t,loader:o})},qe=()=>{let e;try{e=r(de)}catch{G("No configs was provided for DJ-UI default setup, please provide values for the COMMON_SETUP_CONFIG token");return}ue(),ge();let{templatesHandlers:n,componentsMap:t,componentLoadersMap:o}=e;n&&ve(n),t&&Te(t),o&&he(o)},ze=()=>D([x,M,P,U,E,J,R,S,I,k]);var Ye={[$]:()=>import("./chunk-HNBMH7HE.js").then(e=>e.CarbonButtonComponent),[W]:()=>import("./chunk-G2NU7H4P.js").then(e=>e.CarbonTableComponent),[Y]:()=>import("./chunk-EZ5XWLPB.js").then(e=>e.CarbonTextCardComponent),[K]:()=>import("./chunk-G7HC2D5E.js").then(e=>e.CarbonCarouselComponent),[Q]:()=>import("./chunk-MLJ6VNPO.js").then(e=>e.CarbonCarouselCardComponent),[V]:()=>import("./chunk-S7DY5CYZ.js").then(e=>e.CarbonSimpleTextComponent)};export{de as a,Je as b,qe as c,ze as d,Ye as e};
