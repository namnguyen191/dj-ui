import{a as N}from"./chunk-XRMBQZWE.js";import{a as U,b as R}from"./chunk-PJMVV2UR.js";import{a as G,c as P}from"./chunk-QKJLZVOY.js";import{Ab as E,Ba as g,Bb as l,Bc as h,Ca as T,Cb as I,Cc as A,Gb as s,Jb as v,Kb as D,Lb as _,Mb as d,Nb as f,Ob as S,Pb as O,Qb as w,Sc as M,Tb as r,Uc as F,_a as m,_c as y,cc as c,da as u,ec as x,lb as C,sb as a}from"./chunk-AGCFPB43.js";import{a as p}from"./chunk-Q7L6LLAK.js";var b=(t,o)=>o.trackById;function H(t,o){if(t&1&&(_(0,"span"),c(1),d()),t&2){let n=r(2).ngIf;m(),x("No definition for layout with id ",n.id,"")}}function $(t,o){t&1&&w(0)}function z(t,o){if(t&1&&a(0,$,1,0,"ng-container",2),t&2){let n=r(4);l("ngComponentOutlet",n.layoutLoadingComponent)}}function B(t,o){if(t&1&&(_(0,"span"),c(1),d()),t&2){let n=r(3).ngIf;m(),x("Loading layout with id ",n.id,"...")}}function W(t,o){if(t&1&&a(0,z,1,1,"ng-container")(1,B,2,1,"span"),t&2){let n=r(3);s(n.layoutLoadingComponent?0:1)}}function q(t,o){if(t&1&&(_(0,"div",6),f(1,"dj-ui-element-wrapper",7),d()),t&2){let n=o.$implicit;I("--grid-item-columns",n.positionAndSize.cols)("--grid-item-rows",n.positionAndSize.rows),l("id",n.elementInstance.id),m(),l("uiElementInstance",n.elementInstance)}}function V(t,o){if(t&1&&v(0,q,2,6,"div",5,b),t&2){let n=r();D(n)}}function Y(t,o){t&1&&(_(0,"span"),c(1,"This layout is empty"),d())}function Z(t,o){t&1&&a(0,V,2,0)(1,Y,2,0,"span"),t&2&&s(o.length>0?0:1)}function J(t,o){if(t&1&&(_(0,"div",4),a(1,Z,2,1),d()),t&2){let n,i=o.ngIf,e=r(4);I("--grid-columns",i.columns)("--grid-gap",i.gap)("--grid-row-height",i.rowHeight)("padding",i.padding),m(),s((n=e.gridItems())?1:-1,n)}}function K(t,o){if(t&1&&a(0,J,2,9,"div",3),t&2){let n=r(3);l("ngIf",n.layoutGridConfigs())}}function Q(t,o){if(t&1&&a(0,H,2,1,"span")(1,W,2,1)(2,K,1,1,"div",1),t&2){let n,i=r().ngIf;s((n=i.status)==="missing"?0:n==="loading"?1:n==="loaded"?2:-1)}}function X(t,o){t&1&&(_(0,"span"),c(1,"Infinte loop in rendering layout detected"),d())}function tt(t,o){if(t&1&&(S(0),a(1,Q,3,1)(2,X,2,0,"span"),O()),t&2){let n=r();m(),s(n.isInfinite()?2:1)}}var nt=16,it="1rem",ot="0px",et="0px",at={columns:nt,rowHeight:it,gap:ot,padding:et},rt=4,_t=20,dt={cols:rt,rows:_t},j=(()=>{class t{constructor(){this.#t=u(N),this.#n=u(T),this.layoutId=g.required(),this.layoutConfig=G(()=>{let n=this.layoutId();return this.#t.getTemplate(n)}),this.gridItems=A(()=>{let n=this.layoutConfig();return!n||!n.config?null:n.config.uiElementInstances.map(i=>{let{positionAndSize:e}=i;return{id:i.id,elementInstance:i,trackById:`LAYOUT: ${n.id} - ELEMENT: ${i.id}`,positionAndSize:p(p({},dt),e)}})}),this.isInfinite=h(()=>{let n=this.layoutId(),i=this.#n.nativeElement,e=U({ele:i,attrName:"layoutId",attrValue:n});return e&&console.error(`Layout with id ${n} has already existed in parents`),e}),this.layoutGridConfigs=h(()=>{let n=this.layoutConfig();if(n?.status!=="loaded")return null;let i=n.config.gridConfigs??{};return p(p({},at),i)}),this.layoutLoadingComponent=u(P,{optional:!0})?.layoutLoadingComponent}#t;#n;static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=C({type:t,selectors:[["dj-ui-layout"]],hostVars:1,hostBindings:function(i,e){i&2&&E("layoutId",e.layoutId())},inputs:{layoutId:[1,"layoutId"]},decls:1,vars:1,consts:[[4,"ngIf"],[1,"grid",3,"--grid-columns","--grid-gap","--grid-row-height","padding"],[4,"ngComponentOutlet"],["class","grid",3,"--grid-columns","--grid-gap","--grid-row-height","padding",4,"ngIf"],[1,"grid"],[1,"grid-item",3,"id","--grid-item-columns","--grid-item-rows"],[1,"grid-item",3,"id"],[3,"uiElementInstance"]],template:function(i,e){i&1&&a(0,tt,3,1,"ng-container",0),i&2&&l("ngIf",e.layoutConfig())},dependencies:[y,M,F,R],styles:["[_nghost-%COMP%]{display:block;width:100%}[_nghost-%COMP%]   .grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(var(--grid-columns),1fr);grid-auto-rows:var(--grid-row-height);gap:var(--grid-gap)}[_nghost-%COMP%]   .grid[_ngcontent-%COMP%]   .grid-item[_ngcontent-%COMP%]{grid-column-start:span var(--grid-item-columns);grid-row-start:span var(--grid-item-rows)}"],changeDetection:0})}}return t})();function lt(t,o){t&1&&f(0,"dj-ui-layout",0),t&2&&l("layoutId",o)}function st(t,o){t&1&&(_(0,"span"),c(1,"Waiting for layout id..."),d())}var Ot=(()=>{class t{constructor(){this.layoutId=g.required()}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=C({type:t,selectors:[["djui"]],inputs:{layoutId:[1,"layoutId"]},decls:2,vars:1,consts:[[3,"layoutId"]],template:function(i,e){if(i&1&&a(0,lt,1,1,"dj-ui-layout",0)(1,st,2,0,"span"),i&2){let L;s((L=e.layoutId())?0:1,L)}},dependencies:[y,j],styles:["[_nghost-%COMP%]{display:block;width:100%}"],changeDetection:0})}}return t})();export{Ot as a};
