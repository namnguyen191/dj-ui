import{a as B,b as K,c as J,d as Q,e as W,g as X}from"./chunk-WLG4HSQZ.js";import{a as H}from"./chunk-N2LQX7VI.js";import{c as z}from"./chunk-7PVQWRKD.js";import"./chunk-5BGIWNYG.js";import{f as w}from"./chunk-UV6WKCAY.js";import"./chunk-JQNNOW5S.js";import"./chunk-OXQFDIO2.js";import{a as A,b as $}from"./chunk-6BEFNIFV.js";import{b as k,c as i,e as N,f as I,g as j,h as f,j as q,k as V,l as D,n as E}from"./chunk-PZF2HUG4.js";import{a as L}from"./chunk-Q4XJYIXY.js";import"./chunk-5EH4PHE6.js";import{c as G}from"./chunk-ABBLJOL2.js";import"./chunk-GDV3UKUI.js";import"./chunk-GLMHSY4W.js";import{a as U}from"./chunk-RFEU6O4M.js";import"./chunk-ONUWX4Z3.js";import"./chunk-5SLFWW7S.js";import"./chunk-PAE2UDOJ.js";import"./chunk-EWAYVCWY.js";import"./chunk-7JQNGYFA.js";import"./chunk-6O3Z2ZPM.js";import"./chunk-WBS7JUSK.js";import"./chunk-4LRNZHQJ.js";import{c as x}from"./chunk-4YZRLV7F.js";import{Ab as F,Bb as S,Fb as M,Gb as o,Hb as u,Ib as m,Tb as R,_a as l,a as P,b as v,e as h,f as C,g as O,gc as d,h as b,hc as g,ia as _,jb as y}from"./chunk-UJ7YJEPZ.js";function Z(c,a){c&1&&m(0,"p-progress-spinner",0)}var Me=(()=>{var a,p,T;let s=class s{constructor(){C(this,p);C(this,a);this.remoteResourceTemplatesStore=_(z),O(this,a,_(w)),this.createRemoteResourceForm=new j({id:new f("",{nonNullable:!0,validators:[i.required,X(),W(),i.minLength(5),i.maxLength(50)]}),name:new f("",{nonNullable:!0,validators:[i.required,i.minLength(5),i.maxLength(50)]}),description:new f("",{nonNullable:!0,validators:[i.maxLength(150)]})})}async createRemoteResourceTemplate(){if(this.createRemoteResourceForm.invalid)return;let r=await this.remoteResourceTemplatesStore.add(v(P({},this.createRemoteResourceForm.getRawValue()),{options:{requests:[]}}));await h(this,a).navigate(["builder","remote-resource",r.id])}getFieldLabel(r){let t=x(r),e=this.createRemoteResourceForm.controls[r],n=e.errors;if(e.untouched&&e.pristine||!n)return t;e.pristine&&e.markAsDirty();let Y=b(this,p,T).call(this,n);return`${t}: Errors: ${Y.join(", ")}`}getFormSubmitButtonTooltip(){if(!this.createRemoteResourceForm.invalid)return"";let r=[];for(let[t,e]of Object.entries(this.createRemoteResourceForm.controls)){if(!e.errors)continue;let n=b(this,p,T).call(this,e.errors);r.push(`Field ${t} has the following errors:
 ${n.join(`
`)}`)}return r.join(`
`)}navigateToViewAllPage(){return h(this,a).navigate(["builder","remote-resource"])}};a=new WeakMap,p=new WeakSet,T=function(r){let t=[];for(let[e,n]of Object.entries(r))switch(e){case"required":{t.push("This field is required");break}case"minlength":{t.push(`This field needs to be at least ${n.requiredLength} characters long`);break}case"maxlength":{t.push(`This field cannot exceed ${n.requiredLength} characters long`);break}case"idNotUnique":{t.push("This ID has already been taken");break}case"isAlphaNumeric":{t.push("This field must be alphanumeric");break}default:t.push("Unknown validation errors. Please try again later"),console.warn(`${e} is an unknown validation error that does not have any handler`)}return t},s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=y({type:s,selectors:[["prime-ng-playground-builder-feat-create-remote-resource-template"]],decls:18,vars:7,consts:[["ariaLabel","loading",1,"progress-spinner"],["header","Create remote resource"],[1,"form-container",3,"ngSubmit","formGroup"],[1,"id-input-field"],["autocomplete","off","formControlName","id","id","id","pInputText",""],["for","id"],[1,"name-input-field"],["autocomplete","off","formControlName","name","id","name","pInputText",""],["for","name"],[1,"description-input-field"],["cols","30","formControlName","description","name","description","pTextarea","","rows","5"],["for","description"],[1,"btn-container"],["label","Create","type","submit",3,"disabled","pTooltip"],["label","Cancel","severity","danger",3,"onClick"]],template:function(t,e){t&1&&(F(0,Z,1,0,"p-progress-spinner",0),o(1,"p-card",1)(2,"form",2),R("ngSubmit",function(){return e.createRemoteResourceTemplate()}),o(3,"p-iftalabel",3),m(4,"input",4),o(5,"label",5),d(6),u()(),o(7,"p-iftalabel",6),m(8,"input",7),o(9,"label",8),d(10),u()(),o(11,"p-iftalabel",9),m(12,"textarea",10),o(13,"label",11),d(14),u()(),o(15,"div",12),m(16,"p-button",13),o(17,"p-button",14),R("onClick",function(){return e.navigateToViewAllPage()}),u()()()()),t&2&&(S(e.remoteResourceTemplatesStore.isPending()?0:-1),l(2),M("formGroup",e.createRemoteResourceForm),l(4),g(e.getFieldLabel("id")),l(4),g(e.getFieldLabel("name")),l(4),g(e.getFieldLabel("description")),l(2),M("disabled",e.createRemoteResourceForm.invalid)("pTooltip",e.getFormSubmitButtonTooltip()))},dependencies:[K,B,$,A,E,q,k,N,I,V,D,U,G,Q,J,H,L],styles:["[_nghost-%COMP%]{height:calc(100vh - 50px);width:100vw;display:flex;justify-content:center;position:relative;align-items:center}[_nghost-%COMP%]   .progress-spinner[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;background-color:#00000080;width:100%;height:100%;z-index:2}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], [_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   p-select[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;resize:none}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   .id-input-field[_ngcontent-%COMP%], [_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   .name-input-field[_ngcontent-%COMP%], [_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   .description-input-field[_ngcontent-%COMP%]{grid-column:span 2}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]{grid-column:span 4;display:flex;gap:1rem}"],changeDetection:0});let c=s;return c})();export{Me as CreateRemoteResourceTemplateComponent};
