import{b as kt}from"./chunk-QDACP3EQ.js";import{a as Kt,e as $t}from"./chunk-HPV222VY.js";import{d as Bt}from"./chunk-6QAAQLBW.js";import{f as Lt}from"./chunk-XTFKQCFP.js";import{d as qt}from"./chunk-DK32R33J.js";import{a as L,d as _t}from"./chunk-RSFIQMZT.js";import{a as b,c as Dt,e as Ut,u as Nt}from"./chunk-DM5ORT33.js";import{Ac as d,Ba as yt,Bb as Ot,Bc as X,Ca as $,Dc as xt,E as N,Gb as jt,Hb as Tt,Ib as At,K as dt,U as g,Vb as Mt,W as K,Wb as Rt,Wc as Ct,Yb as Pt,_ as y,_a as wt,a as c,b as m,ea as p,gb as bt,jb as St,k as pt,lb as vt,nb as Et,oa as mt,ob as It,p as _,ra as ft,u as l,w as j,ya as ht,za as gt,zc as w}from"./chunk-Z6JASTJQ.js";var q=class{#e;constructor(n){this.configs=n,this.#e=new pt({status:"idle",conn:null}),this.db$=this.#e.asObservable().pipe(dt(2e3)),this.#t()}getRepo(n){return l(this.db$.pipe(N(e=>e.conn!==null),j(e=>new tt(e.conn,n))))}#t(){let n=this.#e.getValue();if(n.status==="ready"||n.status==="initializing")return;let e=indexedDB.open(this.configs.dbName,this.configs.dbVersion);e.onupgradeneeded=r=>{let o=r.target.result;for(let i of this.configs.stores)o.objectStoreNames.contains(i)||o.createObjectStore(i,{keyPath:"id",autoIncrement:!1})},e.onsuccess=()=>{this.#e.next({status:"ready",conn:e.result})},e.onerror=()=>{this.#e.next({status:"error",conn:null})}}},tt=class{#e;#t;constructor(n,e){this.getAll=()=>new Promise((r,o)=>{let s=this.#e.transaction(this.#t,"readonly").objectStore(this.#t).getAll();s.onsuccess=()=>{r(s.result)},s.onerror=()=>{o(s.error)}}),this.createOne=r=>new Promise((o,i)=>{let u=this.#e.transaction(this.#t,"readwrite").objectStore(this.#t).add(r);u.onsuccess=()=>{o(r)},u.onerror=()=>{i(u.error)}}),this.updateOne=r=>new Promise((o,i)=>{let u=this.#e.transaction(this.#t,"readwrite").objectStore(this.#t).put(r);u.onsuccess=()=>{o(r)},u.onerror=()=>{i(u.error)}}),this.#e=n,this.#t=e}getOne(n){return new Promise((e,r)=>{let a=this.#e.transaction(this.#t,"readonly").objectStore(this.#t).get(n);a.onsuccess=()=>{if(a.result===void 0){e(null);return}e(a.result)},a.onerror=()=>{r(a.error)}})}deleteOne(n){return new Promise((e,r)=>{let a=this.#e.transaction(this.#t,"readwrite").objectStore(this.#t).delete(n);a.onsuccess=()=>{if(a.result===void 0){e();return}e(a.result)},a.onerror=()=>{r(a.error)}})}clearAll(){return new Promise((n,e)=>{let i=this.#e.transaction(this.#t,"readwrite").objectStore(this.#t).clear();i.onsuccess=()=>{if(i.result===void 0){n();return}e(i.result)},i.onerror=()=>{e(i.error)}})}};function Ft(t){let n=w(()=>t());return Oe(n)?new Proxy(t,{get(e,r){return r in n?(yt(e[r])||Object.defineProperty(e,r,{value:d(()=>e()[r]),configurable:!0}),Ft(e[r])):e[r]}}):t}var Ie=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function Oe(t){if(t===null||typeof t!="object"||je(t))return!1;let n=Object.getPrototypeOf(t);if(n===Object.prototype)return!0;for(;n&&n!==Object.prototype;){if(Ie.includes(n.constructor))return!1;n=Object.getPrototypeOf(n)}return n===Object.prototype}function je(t){return typeof t?.[Symbol.iterator]=="function"}var Te=new WeakMap,f=Symbol("STATE_SOURCE");function h(t,...n){t[f].update(e=>n.reduce((r,o)=>c(c({},r),typeof o=="function"?o(r):o),e)),Re(t)}function Ae(t){return t[f]()}function Me(t){return Te.get(t[f])||[]}function Re(t){let n=Me(t);for(let e of n){let r=w(()=>Ae(t));e(r)}}function B(...t){let n=[...t],e=typeof n[0]=="function"?{}:n.shift(),r=n;return(()=>{class i{constructor(){let s=r.reduce((U,Ee)=>Ee(U),Pe()),{stateSignals:u,props:S,methods:Y,hooks:ve}=s,ct=c(c(c({},u),S),Y);this[f]=s[f];for(let U of Reflect.ownKeys(ct))this[U]=ct[U];let{onInit:ut,onDestroy:lt}=ve;ut&&ut(),lt&&p(ft).onDestroy(lt)}static \u0275fac=function(u){return new(u||i)};static \u0275prov=y({token:i,factory:i.\u0275fac,providedIn:e.providedIn||null})}return i})()}function Pe(){return{[f]:$({}),stateSignals:{},props:{},methods:{},hooks:{}}}function A(t,...n){let e=typeof t=="function"?[t,...n]:n;return r=>e.reduce((o,i)=>i(o),r)}function xe(t){return n=>{let e=t(c(c(c({[f]:n[f]},n.stateSignals),n.props),n.methods));return Reflect.ownKeys(e),m(c({},n),{props:c(c({},n.props),e)})}}function v(t){return xe(t)}function F(t){return n=>{let e=c(c(c({[f]:n[f]},n.stateSignals),n.props),n.methods),r=typeof t=="function"?t(e):t,o=i=>{let a=r[i],s=n.hooks[i];return a?()=>{s&&s(),a(e)}:s};return m(c({},n),{hooks:{onInit:o("onInit"),onDestroy:o("onDestroy")}})}}function M(t){return n=>{let e=t(c(c(c({[f]:n[f]},n.stateSignals),n.props),n.methods));return Reflect.ownKeys(e),m(c({},n),{methods:c(c({},n.methods),e)})}}function E(t){return n=>{let e=typeof t=="function"?t():t,r=Reflect.ownKeys(e);n[f].update(i=>c(c({},i),e));let o=r.reduce((i,a)=>{let s=d(()=>n[f]()[a]);return m(c({},i),{[a]:Ft(s)})},{});return m(c({},n),{stateSignals:c(c({},n.stateSignals),o)})}}var O=function(t){return t[t.None=0]="None",t[t.Entities=1]="Entities",t[t.Both=2]="Both",t}(O||{}),Ce=t=>t.id;function Wt(t){return t?.selectId??Ce}function et(t){let n=t?.collection,e=n===void 0?"entityMap":`${n}EntityMap`,r=n===void 0?"ids":`${n}Ids`,o=n===void 0?"entities":`${n}Entities`;return{entityMapKey:e,idsKey:r,entitiesKey:o}}function ke(t,n){return{entityMap:c({},t[n.entityMapKey]),ids:[...t[n.idsKey]]}}function De(t,n,e){switch(e){case O.Both:return{[n.entityMapKey]:t.entityMap,[n.idsKey]:t.ids};case O.Entities:return{[n.entityMapKey]:t.entityMap};default:return{}}}function Gt(t,n,e){let r=e(n);return t.entityMap[r]?(t.entityMap[r]=n,O.Entities):(t.entityMap[r]=n,t.ids.push(r),O.Both)}function Ue(t,n,e){let r=O.None;for(let o of n){let i=Gt(t,o,e);r!==O.Both&&(r=i)}return r}function W(t,n){let e=Wt(n),r=et(n);return o=>{let i=ke(o,r),a=Gt(i,t,e);return De(i,r,a)}}function Vt(t,n){let e=Wt(n),r=et(n);return()=>{let o={entityMap:{},ids:[]};return Ue(o,t,e),{[r.entityMapKey]:o.entityMap,[r.idsKey]:o.ids}}}function Ht(t){let{entityMapKey:n,idsKey:e,entitiesKey:r}=et(t);return A(E({[n]:{},[e]:[]}),v(o=>({[r]:d(()=>{let i=o[n]();return o[e]().map(s=>i[s])})})))}var P=()=>({requestStatus:"pending"}),R=()=>({requestStatus:"fulfilled"}),x=t=>({requestStatus:{error:t}}),Zt=()=>A(E({requestStatus:"idle"}),v(({requestStatus:t})=>({isPending:d(()=>t()==="pending"),isFulfilled:d(()=>t()==="fulfilled"),error:d(()=>{let n=t();return typeof n=="object"?n.error:null})})));var G=t=>A(Ht(),Zt(),M(n=>{let e=t();return{loadAll:async()=>{if(!e.fetchAll)throw Error("fetchAll loader was not provided");h(n,P());try{let o=await e.fetchAll();return h(n,Vt(o),R()),o}catch(o){throw x("Something went wrong fetching all entities"),o}},get:async o=>{let a=w(n.entities).find(s=>s.id===o);if(a)return a;if(!e.fetch)throw Error("fetch loader was not provided");h(n,P());try{let s=await e.fetch(o);return h(n,W(s),R()),s}catch(s){let u=`Something went wrong fetching entity with id ${o}. Err: ${s}`;throw x(u),h(n,R()),Error(u)}},add:async o=>{if(!e.create)throw Error("create loader was not provided");h(n,P());try{let i=await e.create(o);return h(n,W(i),R()),i}catch(i){throw x("Something went wrong creating entity"),i}},change:async o=>{if(!e.update)throw Error("update loader was not provided");h(n,P());try{let i=await e.update(o);return h(n,W(i),R()),i}catch(i){throw x("Something went wrong updating entity"),i}}}}));var zt={id:"POKEMON_PAGINATION.REMOTE_RESOURCE",name:"Pokemon remote resource with pagination",description:"A remote resource that fetches pokemon data with support for pagination",createdAt:"2025-04-05T17:07:36.743Z",stateSubscription:{watchedScopes:{global:["pokemonPagination"]},variables:{currentPage:"<${ return this.state?.global?.pokemonPagination?.selectedPage ?? 0 }$>",currentItemPerPage:"<${ return this.state?.global?.pokemonPagination?.pageLength ?? 10 }$>"}},options:{requests:[{fetcherId:"httpFetcher",configs:{endpoint:"https://beta.pokeapi.co/graphql/v1beta",method:"POST",body:{operationName:"GetPokemons",query:`<\${ return \`query GetPokemons {
  totalCount: pokemon_v2_pokemon_aggregate {
    aggregate {
      count
    }
  }
  pokemons: pokemon_v2_pokemon(offset: \${(this.state.variables.currentPage) * (this.state.variables.currentItemPerPage)}, limit: \${this.state.variables.currentItemPerPage}) {
    name
    id
    height
    pokemon_v2_pokemonabilities {
      pokemon_v2_ability {
        name
      }
    }
    pokemon_v2_pokemontypes {
      pokemon_v2_type {
        name
      }
    }
  }
}\` }$>`}},interpolation:'<${ return{pokemons:this.$current.data.pokemons.map((rawPokemonData=>({id:rawPokemonData.id,name:rawPokemonData.name,height:rawPokemonData.height,abilities:rawPokemonData.pokemon_v2_pokemonabilities.map((abilityData=>abilityData.pokemon_v2_ability.name)).join(", "),types:rawPokemonData.pokemon_v2_pokemontypes.map((typeData=>typeData.pokemon_v2_type.name)).join(", ")}))),totalCount:this.$current.data.totalCount.aggregate.count}; }$>'}]}};var Jt={id:"pokemon-server-side-pagination-table.PRIME_NG_SIMPLE_TABLE",type:"SIMPLE_TABLE",remoteResourceIds:["POKEMON_PAGINATION.REMOTE_RESOURCE"],name:"Pokemon server-side pagination table",description:"A table that fetch a bunch of pokemon using server-side pagination",createdAt:"2025-04-05T17:07:36.743Z",updatedAt:"2025-04-05T17:07:36.743Z",stateSubscription:{watchedScopes:{global:["usPopPage"]}},options:{title:"Pokemon table with server-side pagination",stripes:!0,gridLines:!0,resizableColumns:!0,columns:[{id:"id",label:"Id",disableResizable:!0},{id:"name",label:"Name"},{id:"height",label:"Height"},{id:"abilities",label:"Abilities"},{id:"types",label:"Types"}],rows:'<${ return this.remoteResourcesStates?.results?.["POKEMON_PAGINATION.REMOTE_RESOURCE"]?.result?.pokemons ?? [] }$>',pagination:{totalDataLength:"<${ return this.remoteResourcesStates?.results?.['POKEMON_PAGINATION.REMOTE_RESOURCE']?.result?.totalCount ?? 0 }$>",pageSizes:[10,15,25,50]}},eventsHooks:{paginationChanged:[{type:"addToState",payload:{scope:"global",data:{pokemonPagination:"<${ return this.$eventOutput }$>"}}}]}};var Qt={id:"sample-layout.SIMPLE_GRID_LAYOUT",type:"SIMPLE_GRID_LAYOUT",name:"Sample layout",description:"A simple grid layout that displays a bunch of different UI elements",createdAt:"2025-04-05T17:07:36.743Z",updatedAt:"2025-04-05T17:07:36.743Z",options:{grid:{gap:"1rem",padding:"0 10vw",rowHeight:"auto"},uiElementInstances:[{id:"1",uiElementTemplateId:"pokemon-server-side-pagination-table.PRIME_NG_SIMPLE_TABLE",positionAndSize:{cols:16}}]}};var Yt=[Qt,Jt],Xt=[zt];var $e="PRIME_NG_PLAYGROUND_LOCAL_DB",Le=1,qe=["appUIElementTemplates","appRemoteResourceTemplates"],V=(()=>{class t extends q{constructor(){super({stores:qe,dbName:$e,dbVersion:Le})}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var nt=(()=>{class t{constructor(){this.#e=p(_t),this.#t=p(V),this.#n=_(this.#t.getRepo("appRemoteResourceTemplates")),this.getAllRemoteResourceTemplates=()=>this.#n.pipe(g(e=>e.getAll())),this.createRemoteResourceTemplate=e=>{let r=m(c({},e),{createdAt:new Date().toISOString()});return this.#n.pipe(g(o=>o.createOne(r)))},this.updateRemoteResourceTemplate=e=>this.fetchRemoteResourceTemplate(e.id).pipe(g(r=>{let o=m(c({},e),{createdAt:r.createdAt,updatedAt:new Date().toISOString()});return this.#n.pipe(g(i=>i.updateOne(o)),K({next:()=>{this.#e.updateOrRegisterTemplate(o)}}))}))}#e;#t;#n;fetchRemoteResourceTemplate(e){return this.#n.pipe(g(r=>r.getOne(e)),j(r=>{if(r===null)throw new L({error:`Remote resource template with ID ${e} does not exist in indexed db`,status:404});return r}))}async resetExampleTemplates(){let e=await l(this.#n);for(let r of Xt){await e.deleteOne(r.id);let o=m(c({},r),{createdAt:new Date().toISOString()});await e.createOne(o)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Be={query:{}},Mr=B({providedIn:"root"},E(Be),G((t=p(nt))=>({fetchAll:()=>l(t.getAllRemoteResourceTemplates()),fetch:n=>l(t.fetchRemoteResourceTemplate(n)),create:n=>l(t.createRemoteResourceTemplate(n)),update:n=>l(t.updateRemoteResourceTemplate(n))})),v(({entities:t,query:n})=>({allRemoteResourceTemplatesInfo:d(()=>t().map(({id:e,createdAt:r,updatedAt:o,name:i,description:a})=>({id:e,createdAt:r,updatedAt:o,name:i,description:a}))),filteredRemoteResourceTemplates:d(()=>{let{id:e}=n();return t().filter(r=>e?r.id===e:!1)})})),M((t,n=p(nt))=>({updateQuery:e=>{h(t,{query:e})},resetMockTemplates:async()=>{await n.resetExampleTemplates(),await t.loadAll()}})),F({onInit:async({loadAll:t})=>{await t()}}));var rt=(()=>{class t{constructor(){this.#e=p(Nt),this.#t=p(V),this.#n=_(this.#t.getRepo("appUIElementTemplates")),this.getAllUIElementTemplates=()=>this.#n.pipe(g(e=>e.getAll())),this.createUIElementTemplate=e=>{let r=m(c({},e),{createdAt:new Date().toISOString()});return this.#n.pipe(g(o=>o.createOne(r)))},this.updateUIElementTemplate=e=>this.fetchUIElementTemplate(e.id).pipe(g(r=>{let o=m(c({},e),{createdAt:r.createdAt,updatedAt:new Date().toISOString()});return this.#n.pipe(g(i=>i.updateOne(o)),K({next:()=>{this.#e.updateOrRegisterTemplate(o)}}))}))}#e;#t;#n;fetchUIElementTemplate(e){return this.#n.pipe(g(r=>r.getOne(e)),j(r=>{if(r===null)throw new L({error:`UI element template with ID ${e} does not exist in indexed db`,status:404});return r}))}async resetExampleTemplates(){let e=await l(this.#n);for(let r of Yt){await e.deleteOne(r.id);let o=m(c({},r),{createdAt:new Date().toISOString()});await e.createOne(o)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Fe={query:{}},ot=new Set([Kt]),Hr=B({providedIn:"root"},E(Fe),G((t=p(rt))=>({fetchAll:()=>l(t.getAllUIElementTemplates()),fetch:n=>l(t.fetchUIElementTemplate(n)),create:n=>l(t.createUIElementTemplate(n)),update:n=>l(t.updateUIElementTemplate(n))})),v(({entities:t,query:n})=>({allUIElementTemplatesInfo:d(()=>t().map(({id:e,createdAt:r,updatedAt:o,name:i,description:a,type:s})=>({id:e,type:s,createdAt:r,updatedAt:o,name:i,description:a}))),filteredUIElementTemplates:d(()=>{let{id:e,isLayout:r=!1}=n();return t().filter(o=>{let i=!0;return e&&(i=i&&o.id===e),r&&(i=i&&ot.has(o.type)),i})},{equal:Ut})})),M((t,n=p(rt))=>({updateQuery:e=>{h(t,{query:e})},resetMockTemplates:async()=>{await n.resetExampleTemplates(),await t.loadAll()}})),F({onInit:async({loadAll:t})=>{await t()}})),Zr=({id:t,isLayout:n})=>e=>{let r=!0;return t&&(r=r&&e.id===t),n?r=r&&ot.has(e.type):r=r&&!ot.has(e.type),r};var We=b.strictObject({createdAt:b.string(),updatedAt:b.string().optional()}),te=b.strictObject({name:b.string(),description:b.string()}),Xr=b.strictObject({id:b.string()}).merge(We).merge(te),H=t=>t.omit({id:!0,type:!0}).merge(te),to=H(qt).describe("AppEditPrimeNgSimpleTableUIESchema"),eo=H(Bt).describe("AppEditPrimeNgSimpleTextUIESchema"),no=H(Lt).describe("AppEditPrimeNgSimpleImageUIESchema"),ro=H($t).describe("AppEditSimpleGridUIESchema");function Ge(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function ee(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),e.push.apply(e,r)}return e}function it(t){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?ee(Object(e),!0).forEach(function(r){Ge(t,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ee(Object(e)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}return t}function Ve(t,n){if(t==null)return{};var e={},r=Object.keys(t),o,i;for(i=0;i<r.length;i++)o=r[i],!(n.indexOf(o)>=0)&&(e[o]=t[o]);return e}function re(t,n){if(t==null)return{};var e=Ve(t,n),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(e[r]=t[r])}return e}function oe(t,n){return He(t)||Ze(t,n)||ze(t,n)||Je()}function He(t){if(Array.isArray(t))return t}function Ze(t,n){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var e=[],r=!0,o=!1,i=void 0;try{for(var a=t[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(e.push(s.value),!(n&&e.length===n));r=!0);}catch(u){o=!0,i=u}finally{try{!r&&a.return!=null&&a.return()}finally{if(o)throw i}}return e}}function ze(t,n){if(t){if(typeof t=="string")return ne(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ne(t,n)}}function ne(t,n){(n==null||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function Je(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qe(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function ie(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),e.push.apply(e,r)}return e}function ae(t){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?ie(Object(e),!0).forEach(function(r){Qe(t,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ie(Object(e)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}return t}function Ye(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return function(r){return n.reduceRight(function(o,i){return i(o)},r)}}function C(t){return function n(){for(var e=this,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return o.length>=t.length?t.apply(this,o):function(){for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return n.apply(e,[].concat(o,s))}}}function z(t){return{}.toString.call(t).includes("Object")}function Xe(t){return!Object.keys(t).length}function k(t){return typeof t=="function"}function tn(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function en(t,n){return z(n)||I("changeType"),Object.keys(n).some(function(e){return!tn(t,e)})&&I("changeField"),n}function nn(t){k(t)||I("selectorType")}function rn(t){k(t)||z(t)||I("handlerType"),z(t)&&Object.values(t).some(function(n){return!k(n)})&&I("handlersType")}function on(t){t||I("initialIsRequired"),z(t)||I("initialType"),Xe(t)&&I("initialContent")}function an(t,n){throw new Error(t[n]||t.default)}var sn={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},I=C(an)(sn),Z={changes:en,selector:nn,handler:rn,initial:on};function cn(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Z.initial(t),Z.handler(n);var e={current:t},r=C(pn)(e,n),o=C(ln)(e),i=C(Z.changes)(t),a=C(un)(e);function s(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(Y){return Y};return Z.selector(S),S(e.current)}function u(S){Ye(r,o,i,a)(S)}return[s,u]}function un(t,n){return k(n)?n(t.current):n}function ln(t,n){return t.current=ae(ae({},t.current),n),n}function pn(t,n,e){return k(n)?n(t.current):Object.keys(e).forEach(function(r){var o;return(o=n[r])===null||o===void 0?void 0:o.call(n,t.current[r])}),e}var dn={create:cn},se=dn;var mn={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}},ce=mn;function fn(t){return function n(){for(var e=this,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return o.length>=t.length?t.apply(this,o):function(){for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return n.apply(e,[].concat(o,s))}}}var ue=fn;function hn(t){return{}.toString.call(t).includes("Object")}var le=hn;function gn(t){return t||pe("configIsRequired"),le(t)||pe("configType"),t.urls?(yn(),{paths:{vs:t.urls.monacoBase}}):t}function yn(){console.warn(de.deprecation)}function wn(t,n){throw new Error(t[n]||t.default)}var de={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},pe=ue(wn)(de),bn={config:gn},me=bn;var Sn=function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return function(o){return e.reduceRight(function(i,a){return a(i)},o)}},fe=Sn;function he(t,n){return Object.keys(n).forEach(function(e){n[e]instanceof Object&&t[e]&&Object.assign(n[e],he(t[e],n[e]))}),it(it({},t),n)}var ge=he;var vn={type:"cancelation",msg:"operation is manually canceled"};function En(t){var n=!1,e=new Promise(function(r,o){t.then(function(i){return n?o(vn):r(i)}),t.catch(o)});return e.cancel=function(){return n=!0},e}var J=En;var In=se.create({config:ce,isInitialized:!1,resolve:null,reject:null,monaco:null}),ye=oe(In,2),D=ye[0],Q=ye[1];function On(t){var n=me.config(t),e=n.monaco,r=re(n,["monaco"]);Q(function(o){return{config:ge(o.config,r),monaco:e}})}function jn(){var t=D(function(n){var e=n.monaco,r=n.isInitialized,o=n.resolve;return{monaco:e,isInitialized:r,resolve:o}});if(!t.isInitialized){if(Q({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),J(at);if(window.monaco&&window.monaco.editor)return we(window.monaco),t.resolve(window.monaco),J(at);fe(Tn,Mn)(Rn)}return J(at)}function Tn(t){return document.body.appendChild(t)}function An(t){var n=document.createElement("script");return t&&(n.src=t),n}function Mn(t){var n=D(function(r){var o=r.config,i=r.reject;return{config:o,reject:i}}),e=An("".concat(n.config.paths.vs,"/loader.js"));return e.onload=function(){return t()},e.onerror=n.reject,e}function Rn(){var t=D(function(e){var r=e.config,o=e.resolve,i=e.reject;return{config:r,resolve:o,reject:i}}),n=window.require;n.config(t.config),n(["vs/editor/editor.main"],function(e){we(e),t.resolve(e)},function(e){t.reject(e)})}function we(t){D().monaco||Q({monaco:t})}function Pn(){return D(function(t){var n=t.monaco;return n})}var at=new Promise(function(t,n){return Q({resolve:t,reject:n})}),xn={config:On,init:jn,__getMonacoInstance:Pn},st=xn;var be=(()=>{class t{#e=$(null);#t=kt(this.#e).pipe(N(e=>e!==null));#n={};constructor(){this.#o()}#o(){st.init().then(e=>{this.#e.set(e)})}#r(e){return`inmemory://model/${e}.json`}async registerJSONSchema(e){let{schemaId:r,schemaFetcher:o}=e;if(this.#n[r])return;let i=await l(this.#t),a=await o();this.#n[r]=a;let s=Object.entries(this.#n).map(([u,S])=>({uri:u,fileMatch:[this.#r(u)],schema:S}));i.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,allowComments:!0,schemas:s})}async getJSONModel(e){let{schemaId:r,initialValue:o=""}=e,i=await l(this.#t);try{let a=i.Uri.parse(this.#r(r)),s=i.editor.getModel(a)??i.editor.createModel("","json",i.Uri.parse(this.#r(r)));return s.setValue(o),s}catch(a){throw console.error("Error getting JSON model: ",a),a}}async createEditor(e,r){return(await l(this.#t)).editor.create(e,r)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Cn=["editorContainer"],Se=(()=>{class t{constructor(){this.monacoEditorService=p(be),this.configs=gt.required(),this.valueChanged=ht(),this.editorContainerSig=bt.required("editorContainer"),this.editorInstanceResource=xt({request:()=>({configs:this.configs()}),loader:({request:e})=>this.#t(e.configs)}),this.#e=X(()=>{let e=this.editorInstanceResource.value();if(!e)return;let{valueChangeDebounceTime:r=500}=w(this.configs),o=Dt(()=>{let i=e.getValue();this.valueChanged.emit(i)},r);e.onDidChangeModelContent(o)})}#e;createWrapperElement(e){let r=document.createElement("div");return r.style.width="100%",r.style.height="100%",e.appendChild(r),r}async#t(e){let r=w(this.editorContainerSig).nativeElement;for(;r.hasChildNodes()&&r.firstChild;)r.removeChild(r.firstChild);let o=this.createWrapperElement(r),i=await this.setupAndGetConfigs();return this.monacoEditorService.createEditor(o,c({theme:"vs-dark",wordWrap:"on",minimap:{enabled:!1},automaticLayout:!0,value:e.initialValue??""},i))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=vt({type:t,viewQuery:function(r,o){r&1&&Mt(o.editorContainerSig,Cn,5),r&2&&Rt()},inputs:{configs:[1,"configs"]},outputs:{valueChanged:"valueChanged"}})}}return t})();function kn(t,n){t&1&&(jt(0,"span"),Pt(1,"Loading..."),Tt())}var Zo=(()=>{class t extends Se{async setupAndGetConfigs(){let{schemaId:e,initialValue:r}=w(this.configs);return{language:"json",model:e?await this.monacoEditorService.getJSONModel({schemaId:e,initialValue:r}):null}}static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=mt(t)))(o||t)}})()}static{this.\u0275cmp=St({type:t,selectors:[["prime-ng-playground-shared-json-editor"]],features:[Et],decls:3,vars:1,consts:[["editorContainer",""],[1,"editor-container"]],template:function(r,o){r&1&&(At(0,"div",1,0),It(2,kn,2,0,"span")),r&2&&(wt(2),Ot(o.editorInstanceResource.isLoading()?2:-1))},dependencies:[Ct],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex}[_nghost-%COMP%]   .editor-container[_ngcontent-%COMP%]{flex-grow:1}"]})}}return t})();export{be as a,Zo as b,Mr as c,ot as d,Hr as e,Zr as f};
